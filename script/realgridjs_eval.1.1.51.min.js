/*!
* RealGridJS Evaluation v1.1.51.2803
* Copyright (C) 2013-2025 WooriTech Inc.
* All Rights Reserved.
*/
!function(t){var T={cipherModes:{ECB:0,CBC:1,PCBC:2,CFB:3,OFB:4,CTR:5},outputTypes:{Base64:0,Hex:1,String:2,Raw:3}},k={},a="=",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=(k.encode=function(t){for(var e=[],i=t.length,n=i%3,s=i-n,r=0;r<s;){var o=t[r++]<<16|t[r++]<<8|t[r++];e.push(h.charAt(o>>>18&63)),e.push(h.charAt(o>>>12&63)),e.push(h.charAt(o>>>6&63)),e.push(h.charAt(63&o))}switch(n){case 2:o=t[r++]<<16|t[r++]<<8;e.push(h.charAt(o>>>18&63)),e.push(h.charAt(o>>>12&63)),e.push(h.charAt(o>>>6&63)),e.push(a);break;case 1:o=t[r++]<<16;e.push(h.charAt(o>>>18&63)),e.push(h.charAt(o>>>12&63)),e.push(a),e.push(a)}return e.join("")},k.decode=function(t){for(var e=t.split(""),i=[],n=e.length;e[--n]==a;);for(var s=0;s<n;){var r=h.indexOf(e[s++])<<18;s<=n&&(r|=h.indexOf(e[s++])<<12),s<=n&&(r|=h.indexOf(e[s++])<<6),s<=n&&(r|=h.indexOf(e[s++])),i.push(r>>>16&255),i.push(r>>>8&255),i.push(255&r)}for(;0==i[i.length-1];)i.pop();return i},{}),D=(d.isString=function(t){return"string"==typeof t||t instanceof String},{});D.map=function(t,e,i,n){var s=0,r=t&&t.length||0,o=new(n||Array)(r);if(r&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=cache[e]||buildFn(e)),i)for(;s<r;++s)o[s]=e.call(i,t[s],s,t);else for(;s<r;++s)o[s]=e(t[s],s,t);return o},T.Blowfish=new function(){Math.pow(2,2),Math.pow(2,3),Math.pow(2,4);var y=Math.pow(2,8),x=Math.pow(2,16),I=Math.pow(2,24),b=null,l={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]};function E(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)}function R(t,e){var i=e.s3[255&t],n=e.s2[255&(t>>=8)],s=e.s1[255&(t>>=8)],e=e.s0[255&(t>>=8)],t=(e>>16)+(s>>16)+((65535&e)+(65535&s)>>16)<<16|(65535&e)+(65535&s)&65535;return((t=(t>>16^n>>16)<<16|65535&(65535&t^65535&n))>>16)+(i>>16)+((65535&t)+(65535&i)>>16)<<16|(65535&t)+(65535&i)&65535}function f(t,e){var i=t.left,n=t.right,i=E(i,e.p[0]),n=E(n,E(R(i,e),e.p[1]));i=E(i,E(R(n,e),e.p[2])),n=E(n,E(R(i,e),e.p[3])),i=E(i,E(R(n,e),e.p[4])),n=E(n,E(R(i,e),e.p[5])),i=E(i,E(R(n,e),e.p[6])),n=E(n,E(R(i,e),e.p[7])),i=E(i,E(R(n,e),e.p[8])),n=E(n,E(R(i,e),e.p[9])),i=E(i,E(R(n,e),e.p[10])),n=E(n,E(R(i,e),e.p[11])),i=E(i,E(R(n,e),e.p[12])),n=E(n,E(R(i,e),e.p[13])),i=E(i,E(R(n,e),e.p[14])),n=E(n,E(R(i,e),e.p[15])),i=E(i,E(R(n,e),e.p[16])),t.right=i,t.left=E(n,e.p[17])}function S(t){for(var e,n=t,s=(d.isString(n)&&(n=D.map(n.split(""),function(t){return 255&t.charCodeAt(0)})),0),r=0,i={left:0,right:0},o={p:D.map(l.p.slice(0),function(t){for(var e=n.length,i=0;i<4;i++)r=r*y|n[s++%e];return(t>>16^r>>16)<<16|65535&(65535&t^65535&r)}),s0:l.s0.slice(0),s1:l.s1.slice(0),s2:l.s2.slice(0),s3:l.s3.slice(0)},a=0,h=o.p.length;a<h;)f(i,o),o.p[a++]=i.left,o.p[a++]=i.right;for(a=0;a<4;a++)for(e=0,h=o["s"+a].length;e<h;)f(i,o),o["s"+a][e++]=i.left,o["s"+a][e++]=i.right;return o}this.getIV=function(t){switch(t||T.outputTypes.Base64){case T.outputTypes.Hex:return D.map(b,function(t){return(t<=15?"0":"")+t.toString(16)}).join("");case T.outputTypes.String:return b.join("");case T.outputTypes.Raw:return b;default:return k.encode(b)}},this.setIV=function(t,e){var i=null;switch(e||T.outputTypes.Base64){case T.outputTypes.String:i=D.map(t.split(""),function(t){return t.charCodeAt(0)});break;case T.outputTypes.Hex:for(var i=[],n=0,s=t.length-1;n<s;n+=2)i.push(parseInt(t.substr(n,2),16));break;case T.outputTypes.Raw:i=t;break;default:i=k.decode(t)}(b={}).left=i[0]*I|i[1]*x|i[2]*y|i[3],b.right=i[4]*I|i[5]*x|i[6]*y|i[7]},this.encrypt=function(t,e,i){for(var n=T.outputTypes.Base64,s=T.cipherModes.ECB,r=(i&&(i.outputType&&(n=i.outputType),i.cipherMode)&&(s=i.cipherMode),S(e)),o=8-(7&t.length),a=0;a<o;a++)t+=String.fromCharCode(o);for(var h=[],l=t.length>>3,d=0,u={},c=s==T.cipherModes.CBC,_={left:b.left||null,right:b.right||null},a=0;a<l;a++)u.left=t.charCodeAt(d)*I|t.charCodeAt(d+1)*x|t.charCodeAt(d+2)*y|t.charCodeAt(d+3),u.right=t.charCodeAt(d+4)*I|t.charCodeAt(d+5)*x|t.charCodeAt(d+6)*y|t.charCodeAt(d+7),c&&(u.left=(u.left>>16^_.left>>16)<<16|65535&(65535&u.left^65535&_.left),u.right=(u.right>>16^_.right>>16)<<16|65535&(65535&u.right^65535&_.right)),f(u,r),c&&(_.left=u.left,_.right=u.right),h.push(u.left>>24&255),h.push(u.left>>16&255),h.push(u.left>>8&255),h.push(255&u.left),h.push(u.right>>24&255),h.push(u.right>>16&255),h.push(u.right>>8&255),h.push(255&u.right),d+=8;switch(n){case T.outputTypes.Hex:return D.map(h,function(t){return(t<=15?"0":"")+t.toString(16)}).join("");case T.outputTypes.String:return h.join("");case T.outputTypes.Raw:return h;default:return k.encode(h)}},this.decrypt=function(t,e,i){var n=T.outputTypes.Base64,s=T.cipherModes.ECB,r=(i&&(i.outputType&&(n=i.outputType),i.cipherMode)&&(s=i.cipherMode),S(e)),o=[],a=null;switch(n){case T.outputTypes.Hex:for(var a=[],h=0,l=t.length-1;h<l;h+=2)a.push(parseInt(t.substr(h,2),16));break;case T.outputTypes.String:a=D.map(t.split(""),function(t){return t.charCodeAt(0)});break;case T.outputTypes.Raw:a=t;break;default:a=k.decode(t)}for(var d,u,c,_,f,m,g=a.length>>3,p=0,w={},v=s==T.cipherModes.CBC,C={left:b.left||null,right:b.right||null},h=0;h<g;h++)w.left=a[p]*I|a[p+1]*x|a[p+2]*y|a[p+3],w.right=a[p+4]*I|a[p+5]*x|a[p+6]*y|a[p+7],v&&(d=w.left,u=w.right),_=r,m=f=m=f=void 0,f=(c=w).left,m=c.right,f=E(f,_.p[17]),m=E(m,E(R(f,_),_.p[16])),f=E(f,E(R(m,_),_.p[15])),m=E(m,E(R(f,_),_.p[14])),f=E(f,E(R(m,_),_.p[13])),m=E(m,E(R(f,_),_.p[12])),f=E(f,E(R(m,_),_.p[11])),m=E(m,E(R(f,_),_.p[10])),f=E(f,E(R(m,_),_.p[9])),m=E(m,E(R(f,_),_.p[8])),f=E(f,E(R(m,_),_.p[7])),m=E(m,E(R(f,_),_.p[6])),f=E(f,E(R(m,_),_.p[5])),m=E(m,E(R(f,_),_.p[4])),f=E(f,E(R(m,_),_.p[3])),m=E(m,E(R(f,_),_.p[2])),f=E(f,E(R(m,_),_.p[1])),c.right=f,c.left=E(m,_.p[0]),v&&(w.left=(w.left>>16^C.left>>16)<<16|65535&(65535&w.left^65535&C.left),w.right=(w.right>>16^C.right>>16)<<16|65535&(65535&w.right^65535&C.right),C.left=d,C.right=u),o.push(w.left>>24&255),o.push(w.left>>16&255),o.push(w.left>>8&255),o.push(255&w.left),o.push(w.right>>24&255),o.push(w.right>>16&255),o.push(w.right>>8&255),o.push(255&w.right),p+=8;return o[o.length-1]!=o[o.length-2]&&1!=o[o.length-1]||o.splice(o.length-(i=o[o.length-1]),i),D.map(o,function(t){return String.fromCharCode(t)}).join("")},this.setIV("0000000000000000",T.outputTypes.Hex)},"undefined"!=typeof exports?exports.blowfish=T.Blowfish:t.blowfish=T.Blowfish}(this);var Grids=function(V){function U(t){return"url("+Y+X+t+")"}var W=V||window,z=V&&V.document||document,Y="",X="assets/",q={PRODUCT:"RealGridJs",TYPE:"Evaluation",VENDER:null};function j(t){for(var e={},i=blowfish.decrypt(t,_f+function(t){for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]>>1);return e}([202,218,204,100]),{outputType:0,cipherMode:0}).split(";"),n=0,s=i.length;n<s;n++){var r=i[n].split("="),o=r[0],r=r[1];r&&0<r.length&&(e[o]=r)}return e}Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){return n.apply(this instanceof s?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this,s=function(){};return s.prototype=this.prototype,e.prototype=new s,e}),String.prototype.trim||(Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(Z,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0!=s){e=+e||0;if(!(s<=(e=Math.abs(e)===1/0?0:e)))for(i=Math.max(0<=e?e:s-Math.abs(e),0);i<s;){if(i in n&&n[i]===t)return i;i++}}return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n,s=[],r=2<=arguments.length?arguments[1]:void 0,o=0;o<i;o++)o in e&&(n=e[o],t.call(r,n,o,e))&&s.push(n);return s}),J=0,window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-J)),s=window.setTimeout(function(){t(i+n)},n);return J=i+n,s});var Z,J,I,Q,tt=!1,et=!1,it=window.addEventListener,nt=window.console,st=nt&&"function"==typeof nt.log?Function.prototype.bind.call(nt.log,nt):I,rt=(new Date).getTime(),ot=Object.prototype.toString,at=(Math.PI,Math.PI,Math.pow(2,53)-1),ht={width:0,height:0},lt=/\r|\n|\r\n/,dt=0;function ut(t){Q!=t&&t&&t._fireGridActivated(),Q=t}function ct(t){et=t}function _t(){et&&st&&st.apply(nt,arguments)}var ft=_t;function mt(t){if(tt)throw t}function gt(){return(new Date).getTime()-rt}var pt=gt;function wt(t){return t!==I&&null!==t}function vt(t){return null!==t&&"object"==typeof t}function Ct(t,e){return t&&e?t.toLowerCase()==e.toLowerCase():!t&&!e}function yt(t){return!t||!t.trim()}function k(t){return Array.isArray?Array.isArray(t):"[object Array]"===ot.call(t)}var xt=k;function It(t){return(Array.isArray?Array.isArray(t):"[object Array]"===ot.call(t))?t:null}function bt(t){return k(t)?t:[t]}function Et(t){return t instanceof Date?t:null}function Rt(t,e){return ht.width=t,ht.height=e,ht}function St(){for(var t,e=arguments,i=e.length,n=0;n<i;n++)if((t=e[n])!==I&&null!==t)return t;return I}function Tt(t){for(var e=arguments,i=e.length,n=1;n<i;n++)if(e[n]==t)return!0;return!1}function kt(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""}function Dt(t,e,i){return e=Math.max(e||2,1),i=i||0,new Array(e-String(t).length+1).join(i)+t}var Bt=Dt;function Ot(t,e,i){e=Math.max(e||2,1),i=i||0;t=t.toString(16);return new Array(e-t.toString(16).length+1).join(i)+t}function Mt(t,e){return t!==I&&null!==t?parseInt(t,e||10):0}function Ft(t){var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],n=[];for(i=0;i<t.length;i++){var s={},r=t.charCodeAt(i)-44032;s.cho=-1<r&&r<11172?e[Math.floor(r/588)]:t[i],s.org=t[i]===s.cho?null:t[i],n.push(s)}return n}var Nt=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],Lt=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];function At(t){return t%4==0&&t%100!=0||t%400==0}function Vt(t,e){var i=t.getDate();t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,Lt[At(t.getYear())?1:0][t.getMonth()]))}function Pt(t){return k(t)?t:wt(t)?[t]:null}var Ht=Pt;function Gt(t){return/\s/.test(t)}function $t(t){return t?t.trim():null}var Ut=$t;function Wt(t){t.preventDefault?(t.cancelable&&t.preventDefault(),t.stopPropagation()):t.returnValue=!1}function zt(t){if(Zi&&en&&t.metaKey)return(t=t.which||t.keyCode)===p.c||t===p.v||t===p.x}function Kt(t){return t.charAt(0).toUpperCase()+t.substr(1)}var m=Math.floor,B=Math.floor,Yt=Math.round,Xt=(Math.ceil,"Not yet implemented");function t(t){return Object.freeze?Object.freeze(t):t}function qt(t){var e,i=new t.constructor;for(e in t)i[e]=t[e];return i}function jt(t){t=t||{};for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];if(n)for(var s in n)t[s]=n[s]}return t}function Zt(t){this.message=t}function Jt(t){this.message=t||"Assert error"}(Jt.prototype=new Error).constructor=Jt;function Qt(t,e){if(!t)throw new Jt(e)}function te(t){this.defaultValue=t}function ee(t){return new te(t)}function ie(){}function e(t,e,i,n,s){if(null!==e&&"function"!=typeof e)throw"Base class is not a function";function r(){arguments[0]!==se&&(this.$inited=!1,this.init&&this.init.apply(this,arguments),this.$inited=!0)}var o,a,h,l,d,u=r.prototype=e?new e(se):new ie,c=null;if(u.constructor=r,u.$base=(e||ie).prototype,u.$name=t,i){var _={},f=r.$inits={};for(c in i)"function"==typeof(o=i[c])?(o.$name=c,(o.$owner=u)[c]=o):(o&&o.init&&(o=o.init),_[c]=o);for(c in r.$attrs={},_)o=i[c],t=Kt(c),a="boolean"==typeof o?"is"+t:c,l="set"+t,d=null,u.hasOwnProperty(h=c+"_")?(d=u[h],delete u[h]):o&&o.get?d=o.get:u.hasOwnProperty(a)||(d=function(t){return function(){return this["_"+t]}}(c)),d&&(d.$name=a,(d.$owner=u)[a]=d),d=null,o&&o.set?d=o.set:u.hasOwnProperty(l)||(d=(o instanceof te?function(n,s){return function(t){var e,i;return t=parseInt(t),!isNaN(t)&&u[s]&&(e=u[s].call(this))!=t&&(this["_"+n]=t,this.$inited)&&(this[i=n+"PropChanged"]?this[i].call(this,n,e,t):this.propertyChanged(n,e,t)),this}}:function(n,s){return function(t){var e,i;return u[s]&&(e=u[s].call(this))!=t&&(this["_"+n]=t,this.$inited)&&(this[i=n+"PropChanged"]?this[i].call(this,n,e,t):this.propertyChanged(n,e,t)),this}})(c,a)),d&&(d.$name=l,(d.$owner=u)[l]=d),o&&(o instanceof te?_[c]=o.defaultValue:"function"==typeof o.init?f[c]=o.init:o.hasOwnProperty("value")&&(_[c]=o.value)),r.$attrs[c]={field:"_"+c,value:_[c],get:u[a],set:u[l]}}if(n)for(c in n)r[c]=n[c];return"function"==typeof s&&s.call(r,r),r}var ne=Qt,V=new te(0),se={};ie.$_hash=0;(ie.prototype.constructor=ie).prototype.init=function(t){t||(this.$_hash=String(++ie.$_hash));for(var e=this.constructor;e;){var i=e.$inits,n=e.$attrs;if(n)for(var s in n){var r=i[s],s=n[s],r=r?r.call(this):s.value;this[s.field]=r}e=e.prototype.$base&&e.prototype.$base.constructor}},ie.prototype.destroy=function(t){if(!this.$name||0<=["VisualStyles","GridStyleSheet"].indexOf(this.$name))this instanceof d&&(this._listeners=[]);else{this._destroying=!0;for(var e=Object.keys(this),i=0,n=e.length;i<n;i++){var s=e[i],r=this[s];if("_grid"==s||"_parent"==s||"_owner"==s)this[s]=null;else if(r instanceof Array&&1<r.length&&r[0]instanceof ie){for(var o=0,a=r.length;o<a;o++)!t&&(r[o]instanceof br||r[o]instanceof Cr)||!r[o]._destroying&&r[o].destroy&&(r[o]._destroying=!0,r[o].destroy(t),r[o]=null);this[s]=null}else r instanceof ie&&"_destroying"!=s?!t&&(r instanceof br||r instanceof Cr)||(r._destroying||(r._destroying=!0,r.destroy(t)),this[s]=null):k(r)}}return!0};var re=ie.prototype;ie.prototype._super=function(){var t=this._super.caller;if(!t)throw new Error("Not supported Function.caller");if(t=t.$owner.$base[t.$name])return t.apply(this,arguments)},ie.prototype._inherit=function(t){this.constructor.prototype.$base[t].apply(this,Array.prototype.slice.call(arguments,1))},ie.prototype.className=function(){return this.constructor.prototype.$name},ie.prototype.baseClass=function(){return this.constructor.prototype.$base},ie.prototype.baseClassName=function(){var t=this.constructor.prototype.$base;return t&&t.$name},ie.prototype.clone=function(){var t,e,i=this.constructor,n=new i,s=i.$attrs;for(e in s)n[(t=s[e]).field]=this[t.field];return n},ie.prototype.propertyChanged=function(t,e,i){},ie.prototype.getAttr=function(t){for(var e=this.constructor;e;){var i=e.$attrs;if(i&&t in i)return i[t];e=e.prototype.$base&&e.prototype.$base.constructor}return null},ie.prototype.getProperty=function(t){t=this.getAttr(t),t=t?t.get?t.get.call(this):t:I;return t&&t.proxy?t.proxy():t},ie.prototype.setProperty=function(t,e){t=this.getAttr(t);t&&t.set&&t.set.call(this,e)},ie.prototype._initProps=function(t){if(t)for(var e in t){var i="_"+e;this.hasOwnProperty(i)&&(this[i]=t[e])}},ie.prototype.assign=function(t){if(t instanceof ie){if(t!==this)for(var e=t.constructor;e;){var i=e.$attrs;for(r in i){var n,s=this.getAttr(r);s&&s.set&&(o=i[r]).get&&(n=o.get.call(t),s.set.call(this,n))}e=e.prototype.$base&&e.prototype.$base.constructor}}else if(vt(t)){if(t!==this)for(var r in t){var o;t[r]!==I&&(o=this.getAttr(r))&&o.set&&o.set.call(this,t[r])}}else this.assignSimple(t)},ie.prototype.assignSimple=function(t){},ie.prototype.assignProps=function(t,e){if(t&&t!==this&&e)for(var i=0,n=e.length;i<n;i++){var s,r=e[i];t.hasOwnProperty(r)&&(s=this.getAttr(r))&&s.set&&s.set.call(this,t[r])}},ie.prototype.proxy=function(){for(var t,e,i={},n=this.constructor;n;){for(var s in t=n.$attrs)(e=t[s]).get&&((e=e.get.call(this))&&e.noProxy?e.toProxy&&"object"==typeof(e=e.toProxy(!1))&&0<Object.keys(e).length&&(i[s]=e):(e=e&&function t(e){if(k(e)){for(var i=[],n=0,s=e.length;n<s;n++)i.push(t(e[n]));return i}return"function"==typeof e.proxy?e.proxy():e}(e),i[s]=e));n=n.prototype.$base&&n.prototype.$base.constructor}return i.$_hash=this.$_hash,i},ie.prototype.as=function(t){return this instanceof t?this:null};function oe(t){if(tt)throw t}function ae(t,e,i,n){return t===e||(t=String(t),e=null==e?void 0:String(e),!t&&!e)||!(!t||!e)&&(i||(t=t.toLowerCase(),e=e.toLowerCase()),n?0<=e.indexOf(t):t==e)}function he(){this._values={},this._keys={}}var a=function(){var t=arguments.callee.caller;throw Xt+": "+t.$owner.$name+"::"+t.$name},b=function(t,e){return t instanceof e?t:null},le=e(null,null,{init:function(t){this._super(t),this._listeners=[]},destroy:function(){for(var t in this._destroying=!0,this._listeners=null,this)this[t]instanceof O&&(this[t]=null);this._super()},addListener:function(t,e){return t&&this._listeners.indexOf(t)<0&&(null!=e&&0<=e?this._listeners.splice(e,0,t):this._listeners.push(t)),this},removeListener:function(t){return t&&0<=(t=this._listeners.indexOf(t))&&this._listeners.splice(t,1),this},fireEvent:function(t){var e,i,n,s=this._listeners.length,r=Array.prototype.slice.call(arguments,0);for(r[0]=this,e=0;e<s;e++)(n=(i=this._listeners[e])[t])&&n.apply(i,r)},fireConfirmEvent:function(t){var e,i,n=this._listeners.length,s=Array.prototype.slice.call(arguments,0);for(s[0]=this,e=0;e<n;e++)if(r=(i=this._listeners[e])[t]){var r=r.apply(i,s);if("boolean"==typeof r&&!r)return!1}return!0},fireMessageEvent:function(t){var e,i,n=this._listeners.length,s=Array.prototype.slice.call(arguments,0);for(s[0]=this,e=0;e<n;e++)if(r=(i=this._listeners[e])[t]){var r=r.apply(i,s);if("string"==typeof r&&r)return r}return null},fireObjectEvent:function(t){var e,i,n=this._listeners.length,s=Array.prototype.slice.call(arguments,0);for(s[0]=this,e=0;e<n;e++)if(r=(i=this._listeners[e])[t]){var r=r.apply(i,s);if(null!=r)return r}return null}}),de={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,n,s,r,o,a="",h=0;for(t=de._utf8_encode(t);h<t.length;)n=(e=t.charCodeAt(h++))>>2,s=(3&e)<<4|(e=t.charCodeAt(h++))>>4,r=(15&e)<<2|(i=t.charCodeAt(h++))>>6,o=63&i,isNaN(e)?r=o=64:isNaN(i)&&(o=64),a=a+this._keyStr.charAt(n)+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(o);return a},decode:function(t){var e,i,n,s,r,o,a="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)n=this._keyStr.indexOf(t.charAt(h++)),e=(15&(s=this._keyStr.indexOf(t.charAt(h++))))<<4|(r=this._keyStr.indexOf(t.charAt(h++)))>>2,i=(3&r)<<6|(o=this._keyStr.indexOf(t.charAt(h++))),a+=String.fromCharCode(n<<2|s>>4),64!=r&&(a+=String.fromCharCode(e)),64!=o&&(a+=String.fromCharCode(i));return a=de._utf8_decode(a)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):e=127<n&&n<2048?(e+=String.fromCharCode(n>>6|192))+String.fromCharCode(63&n|128):(e=(e+=String.fromCharCode(n>>12|224))+String.fromCharCode(n>>6&63|128))+String.fromCharCode(63&n|128)}return e},_utf8_decode:function(t){var e,i="",n=0;for(c1=c2=0;n<t.length;)(e=t.charCodeAt(n))<128?(i+=String.fromCharCode(e),n++):191<e&&e<224?(c2=t.charCodeAt(n+1),i+=String.fromCharCode((31&e)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),i+=String.fromCharCode((15&e)<<12|(63&c2)<<6|63&c3),n+=3);return i}};le.prototype;function ue(t,e){if(t===e)return 1;if(null!=t&&null!=e){var i=t.length;if(i==e.length){for(var n=0;n<i;++n)if(t[n]!==e[n])return;return 1}}}he.prototype={constructor:he,containsKey:function(t){return t&&this._values.hasOwnProperty(t.$_hash)},isEmpty:function(){for(var t in this._values)return!1;return!0},set:function(t,e){if(!t||!t.$_hash)throw"Invalid key";this._values[t.$_hash]=e,this._keys[t.$_hash]=t},unset:function(t){return!(!t||!this._values.hasOwnProperty(t.$_hash)||(delete this._values[t.$_hash],delete this._keys[t.$_hash],0))},clear:function(){this._values={},this._keys={}},get:function(t){return t?this._values[t.$_hash]:void 0},keys:function(){var t,e=[];for(t in this._values)e.push(this._keys[t]);return e},values:function(){var t,e=[];for(t in this._values)e.push(this._values[t]);return e},each:function(t){for(var e in this._values)t.call(null,this._keys[e],this._values[e])},checkTrue:function(t){for(var e in this._values)if(t.call(null,this._keys[e],this._values[e]))return!0;return!1},checkFalse:function(t){for(var e in this._values)if(!t.call(null,this._keys[e],this._values[e]))return!0;return!1}};function ce(t){ge=t}function _e(){var t,e;return null==ge?(t=!1,!((t=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))||t)||(e=navigator.userAgent||navigator.vendor||window.opera,!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))))||t):Boolean(ge)}function fe(t,e){var i=t,n=e,s=[],r=[],o=[];this.name=function(){return i},this.count=function(){return s.length},this.addListener=function(t){t&&r.indexOf(t)<0&&r.push(t)},this.removeListener=function(t){t=r.indexOf(t);0<=t&&_listener.splice(t,1)},this.addUrl=function(t){t&&s.indexOf(t)<0&&s.push(t)},this.addUrls=function(t){if(t)for(var e=0;e<t.length;e++)this.addUrl(t[e])},this.getImage=function(t){if(0<=t&&t<s.length){var e=o[t];if(e)return e;(e=new Image).index=t,e.owner=this,(o[t]=e).onload=function(){this.owner._fireLoaded(this.index)}.bind(e),e.src=n+s[t]}return null},this._fireLoaded=function(t){for(var e=0;e<r.length;e++)r[e].onImageListImageLoaded(this,t)}}function me(){var i=[],n={};this.addListener=function(t){t&&i.indexOf(t)<0&&i.push(t)},this.removeListener=function(t){t=i.indexOf(t);0<=t&&i.splice(t,1)},this.destroy=function(){n={}},this.getImage=function(t){if(t){var e=n[t];if(e)return e;(e=new Image).owner=this,e.url=t,(n[t]=e).onload=function(){this.owner._fireLoaded(this.url)}.bind(e),e.src=t}return null},this._fireLoaded=function(t){for(var e=0;e<i.length;e++)i[e].onImageLoaded(t)}}var ge=void 0;function pe(e){var i=null;try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(e)}catch(t){if(i)throw t;i=(new DOMParser).parseFromString(e,"text/xml")}return i}function we(e){if(e)try{return(new XMLSerializer).serializeToString(e)}catch(t){return e.xml}}function ve(t,e){var i=[];if(t){var n=t.childNodes;if(n)for(var s=0,r=n.length;s<r;s++){var o=n[s];o.tagName===e&&i.push(o)}}return i}function Ce(t,e,i){t.setAttribute(e,i)}function ye(t,e,i,n,s){t=t.createElement(i);n&&t.setAttribute(n,s),e.appendChild(t)}var xe=".",Ie=",";function be(t){t=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Ee(t){var e=t,o=null,a=!0,h=null,l=null,i=(this.format=function(){return e},this.setFormat=function(t){t!=e&&i(e=t)},this.toBool=function(t){if(o&&t){var e=a?String(t):String(t).toLowerCase();if(e in o)return o[e]}return Boolean(t)},this.toBoolEx=function(t){t=a?String(t):String(t).toLowerCase();return o&&t in o?o[t]:t?Boolean(t):void 0},this.toBoolStrict=function(t){if(o){t=a?String(t):String(t).toLowerCase();if(t in o)return o[t]}},this.toText=function(t){return t?h:l},function(t){if(t){var e,i,t=t.split(/[;\:]/),n=!0,s=t[0],r=s?s.split(","):null;for(1<t.length&&(i=(s=t[1])?s.split(","):null),2<t.length&&"0"==(s=Ut(t[2]))&&(n=!1),o={},a=n,e=0;e<r.length;e++)s=r[e],o[n?s:s.toLowerCase()]=!1;for(e=0;e<i.length;e++)s=i[e],o[n?s:s.toLowerCase()]=!0;h=i&&0<i.length?i[0]:"true",l=r&&0<r.length?r[0]:"false"}else o={true:!0,false:!1},h="true",l="false"});i(e)}function Re(t){function e(t){l="AM",d="PM",t&&(t=t.split(";"),i=t[0]||Re.$_DefaultFormat,u=function(t){var e=[];if(t)for(var i,n,s=t.trim(),r=s.length,o=0;o<r;){if(i=s.charAt(o),0<=Ae.indexOf(i))e.push(i),o++;else{for(n=o++;o<r&&s.charAt(o)==i;)o++;if(i=s.substring(n,o),Le.indexOf(i)<0&&(n=i.charCodeAt(0),He<=n&&n<=Ve||Ge<=n&&n<=Pe))throw new Error("Invalid datetime write format: "+t);e.push(i)}if(o<r&&Gt(i=s.charAt(o)))for(e.push(i);o<r&&Gt(s.charAt(o));)o++}return e}(i),c=0<=u.indexOf("a")||0<=u.indexOf("A"),1<t.length)&&t[1]&&(0<(t=t[1].split(",")).length&&t[0]&&(l=t[0]),1<t.length)&&t[1]&&(d=t[1])}function h(t){return t<10?"0"+t:String(t)}var i=null,l=null,d=null,u=null,c=!1,n=null;this.format=function(){return i},this.formatString=function(){return n},this.setFormatString=function(t){(t=t||Re.$_DefaultFormat)!=n&&(u=[],e(t),n=t)},this.getText=function(t){if(!u)return"";for(var e=t,i=(e instanceof Date||(e=new Date(t)),""),n=0,s=u.length;n<s;n++){var r=u[n],o=r.length;switch(r.charCodeAt(0)){case $e:var a=u[n+1];Le.indexOf(a)<0&&Ae.indexOf(a)<0?i=(e.getFullYear()+"").substr(0,o):i+=2<o?e.getFullYear():h(e.getFullYear()%100);break;case Ue:i+=1<o?h(e.getMonth()+1):e.getMonth()+1;break;case ze:i+=1<o?h(e.getDate()):e.getDate();break;case Ke:i+=1<o?h(e.getHours()):e.getHours();break;case Ye:c?(0==(a=e.getHours())?a=12:12<a&&(a-=12),i+=1<o?h(a):a):i+=1<o?h(e.getHours()):e.getHours();break;case We:i+=1<o?h(e.getMinutes()):e.getMinutes();break;case qe:i+=1<o?h(e.getSeconds()):e.getSeconds();break;case Ge:case He:e.getHours()<12?i+=l:i+=d;break;case Xe:i+=e.getMilliseconds().toString().substr(0,o);break;default:i+=r}}return i},this.setFormatString(t||Re.$_DefaultFormat)}function Se(t){function e(t){if(C="am",y="pm",x=2e3,t){var t=t.split(";"),e=v=t[0]||_defaultFormat;if(e=$t(e)){var i=I(e),n=0<=i.indexOf("a");if(n&&0<=i.indexOf("H"))throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+e;if(0<=i.indexOf("h")&&!n)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+e}1<t.length&&t[1]&&(x=B(t[1])),2<t.length&&t[2]&&(i=t[2].split(","),C=i[0]||"am",1<i.length)&&(y=i[1]||"pm"),3<t.length&&(!t[3]||t[3])}}var i=null,v=null,C=null,y=null,x=2e3,I=function(t){var e,i=[];if(e=$t(t)){for(var n,s=e.length,r=0;r<s;){if(n=e.charAt(r),0<=Ze.indexOf(n))i.push(n),r++;else{for(a=r++;r<s&&e.charAt(r)==n;)r++;if(n=e.substring(a,r),je.indexOf(n)<0)throw new Error("Invalid datetime read format: "+t);i.push("A"==n?"a":n)}if(r<s&&Gt(n=e.charAt(r)))for(i.push(" ");r<s&&Gt(e.charAt(r));)r++}for(var o=[],s=i.length,a=0,r=0;r<s;r++)"a"==(n=i[r])||je.indexOf(n)<0?(1<a&&o.push("E"),o.push(n),a=0):(1==a&&o.splice(o.length-2,0,"L"),o.push(n),a++);i=o}return i};this.formatString=function(){return i},this.setFormatString=function(t){t!=i&&e(i=t)},this.format=function(){return v},this.getDate=function(t){var e=null;if(t=$t(t)){for(var i,n=I(v),s=function(t,e,i){var n,s=[],r=["am","pm","AM","PM","Am","Pm","aM","pM"];if(e&&r.push(e),i&&r.push(i),n=$t(t))for(var o,a,h=n.length,l=0;l<h;){if(o=n.charAt(l),0<="./-: ".indexOf(o))s.push(o),l++;else if(o.charCodeAt(0)>=Je&&o.charCodeAt(0)<=Qe){for(a=l++;l<h&&n.charCodeAt(l)>=Je&&n.charCodeAt(l)<=Qe;)l++;o=n.substring(a,l),s.push(o)}else{for(var d=-1,u=0;u<r.length;u++)if(n.indexOf(r[u],l)==l){d=u;break}if(d<0)throw"Invalid date value: "+n;s.push(r[u]),l+=r[u].length}if(l<h&&Gt(o=n.charAt(l)))for(s.push(" ");l<h&&Gt(n.charAt(l));)l++}return s}(t,C,y),r=(0<=n.indexOf("a")||n.indexOf("A"),n.length),o=s.length,a=0,h=1,l=1,d=0,u=0,c=0,_=0,f=0,m=0,g=0;m<r&&g<o;){var p=n[m],w=s[g];switch(p.charAt(0)){case"L":for(i=String(w),m++;m<r&&"E"!=(t=n[m]);){switch(w=i?B(i.substr(0,t.length)):-1,i=i.substr(t.length),t.charAt(0)){case"Y":case"y":a=Math.max(0,w);break;case"M":h=0<=w?w:1;break;case"D":case"d":l=0<=w?w:1;break;case"H":case"h":d=Math.max(0,w);break;case"m":u=Math.max(0,w);break;case"s":c=Math.max(0,w)}m++}break;case"Y":case"y":a=B(w);break;case"M":h=B(w);break;case"D":case"d":l=B(w);break;case"H":case"h":d=B(w);break;case"m":u=B(w);break;case"s":c=B(w);break;case"a":(t=String(w))&&(t=t.toLowerCase(),C&&t==C.toLowerCase()||"am"==t?_=12:(y&&t==y.toLowerCase()||"pm"==t)&&(f=12))}m++,g++}if(a<100&&0<=a&&(a+=x),a<0||9999<a)return null;if(Tt(h,1,3,5,7,8,10,12)){if(l<1||31<l)return null}else if(Tt(h,4,6,9,11)){if(l<1||30<l)return null}else{if(2!=h)return null;if(29<l)return null;if(29==l&&(a%4!=0||a%100==0)&&a%400!=0)return null}if(d<0||24<d)return null;if((0<_||0<f)&&12<d)return null;if(u<0||59<u)return null;if(c<0||59<c)return null;0<_?d%=12:0<f&&(d=d%12+12),e=new Date(a,h-1,l,d,u,c)}return e},this.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},this.getText=function(t){for(var e,i=t,n=(i instanceof Date||(i=new Date(t)),I(v)),s=0<=n.indexOf("a")||0<=n.indexOf("A"),r="",o=0,a=n.length;o<a;o++){var h=n[o],l=h.length;switch(h.charAt(0)){case"L":break;case"Y":case"y":r+=2<l?i.getFullYear():Bt(i.getFullYear()%100);break;case"M":r+=1<l?Bt(i.getMonth()+1):i.getMonth()+1;break;case"D":case"d":r+=1<l?Bt(i.getDate()):i.getDate();break;case"H":r+=1<l?Bt(i.getHours()):i.getHours();break;case"h":s?(0==(e=i.getHours())?e=12:12<e&&(e-=12),r+=1<l?Bt(e):e):r+=1<l?Bt(i.getHours()):i.getHours();break;case"m":r+=1<l?Bt(i.getMinutes()):i.getMinutes();break;case"s":r+=1<l?Bt(i.getSeconds()):i.getSeconds();break;case"A":case"a":i.getHours()<12?r+=C:r+=y;break;default:r+=h}}return r},this._daysOfYear=function(t){for(var e,i=[31,28,31,30,31,30,31,31,30,31,30],n=0,s=0;s<t.getMonth();s++)n+=i[s];return 2<=t.getMonth()&&((e=t.getFullYear())%400==0||e%4==0&&e%100!=0)&&n++,n+=t.getDate()},this._daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(parseInt(t/4)-parseInt(t/100)+parseInt(t/400)-460)},this.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,t=this._daysOfPriorYears(t.getFullYear())+this._daysOfYear(t)+e;return 60<=t&&t++,t},this.setFormatString(t)}function Te(t){var i=null,n=0,s=new Ne;this.format=function(){return i},this.setFormat=function(t){var e;t!=i&&(t=i=t)&&(e=t.toLowerCase(),0==(n=Math.max(0,Te.FORMATS.indexOf(e))))&&s.setFormat(t)},this.amText=function(){return s.amText()},this.setAmText=function(t){s.setAmText(t)},this.pmText=function(){return s.pmText()},this.setPmText=function(t){s.setPmText(t)},this.baseYear=function(){return s.baseYear()},this.setBaseYear=function(t){s.setBaseYear(t)},this.toDate=function(t){if(null==t||""===t)return null;var e=t;if(!(e instanceof Date)){var i=String(t);if(i)switch(n){case 0:e=s.parse(i);break;case 1:e=new Date(i);break;case 2:i=parseInt(t),e=new Date(i);break;default:e=new Date(i)}}return!e||isNaN(e.getTime())?null:e},this.setFormat(t)}function ke(t,e,i,n,s){var r=Yt(e.x+(e.width-i)/2),e=Yt(e.y+(e.height-i)/2),i=Yt(i/9),o=[r+4*i,e+2*i,r+4*i,e+4*i,r+2*i,e+4*i,r+2*i,e+5*i,r+4*i,e+5*i,r+4*i,e+7*i,r+5*i,e+7*i,r+5*i,e+5*i,r+7*i,e+5*i,r+7*i,e+4*i,r+5*i,e+4*i,r+5*i,e+2*i];t.drawPolygonArray(n,null,[r+0*i,e+0*i,r+0*i,e+9*i,r+9*i,e+9*i,r+9*i,e+0*i]),t.drawPolygonArray(s,null,o)}function De(t,e,i,n,s){var r=Yt(e.x+(e.width-i)/2),e=Yt(e.y+(e.height-i)/2),i=Yt(i/9),o=[r+2*i,e+4*i,r+2*i,e+5*i,r+7*i,e+5*i,r+7*i,e+4*i];t.drawPolygonArray(n,null,[r+0*i,e+0*i,r+0*i,e+9*i,r+9*i,e+9*i,r+9*i,e+0*i]),t.drawPolygonArray(s,null,o)}function Be(t,e,i,n){var s=i.x+(i.width-n)/2,i=i.y+(i.height-n)/2-n/6,n=n/10;t.drawPolygonArray(e,null,[s+0*n,i+6.573*n,s+4.3915*n,i+10*n,s+10.1*n,i+.91*n,s+8.205*n,i+0*n,s+3.684*n,i+6.9425*n,s+1.2*n,i+5*n])}function Oe(t,e,i,n){var s=i.x+(i.width-n)/2,i=i.y+(i.height-n)/2,n=n/9;t.drawPolygonArray(e,null,[s+2*n,i+n,s+n,i+2*n,s+4*n,i+5*n,s+n,i+8*n,s+2*n,i+9*n,s+5*n,i+6*n,s+8*n,i+9*n,s+9*n,i+8*n,s+6*n,i+5*n,s+9*n,i+2*n,s+8*n,i+n,s+5*n,i+4*n])}var Me=e("DecimalFormatter",null,{init:function(t){this._super(),this._optDecimal=!1,this._groupPos=0,this._seperator=null,this._groupSep=null,this._reg=null,this._regDecimal=null,this._replacement="$&,",this._round=null,this._displayMinusZero=!0,this.parse(t)},format:function(t){var e,i=Number(t);if(isNaN(i))return"";var n=this._minDigits;switch(this._optDecimal&&(t=be(i),n=Math.min(Math.max(t,this._minDigits),this._maxDigits)),e=Math.pow(10,n),this._round){case"c":i=Math.ceil(parseFloat((e*i).toFixed(1)))/e;break;case"f":var s=i.toString().split("."),i=parseFloat(1<s.length?s[0]+"."+s[1].substr(0,n):s[0]);break;default:i="a"===this._round?Math.abs(i):i,i=Math.round(e*i)/e}n=Math.min(Math.max(be(i),this._minDigits),this._maxDigits);t=i.toFixed(n);try{this._displayMinusZero||(e=parseFloat(t))!==Math.abs(parseFloat(t))||0!==e||(t=Math.abs(i).toFixed(n))}catch(t){}return this._seperator&&(t=t.replace(xe,this._seperator)),this._reg?n?t.replace(this._regDecimal,this._replacement):t.replace(this._reg,this._replacement):t},parse:function(t){this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this._parse(t)},_parse:function(t){function e(t){return Tt(t,"c","f","C","F","a","A")}if(t=t&&t.trim()){var i,n=xe,s=Ie,r=(-1<t.indexOf(";")&&(t=(o=t.split(";"))[0],1<o.length&&o[1]&&!e(o[1])&&(n=o[1]),2<o.length&&o[2]&&!e(o[2])&&(s=o[2]),this._round=o[3]||o[2]||o[1],this._round=e(this._round)?this._round.toLowerCase():this._round),this._seperator=n==xe?null:n,this._groupSep=s==Ie?null:s,t.length),o=t.indexOf(xe);if(this._optDecimal=0<t.indexOf("#",o),0<=o){for(h=o+1;h<r&&"0"==t.charAt(h);h++)this._minDigits++,this._maxDigits++;for(;h<r&&"#"==t.charAt(h);h++)this._maxDigits++;t=t.substr(0,o)}if(t&&(r=t.length,t.charAt(r-1)==Ie)&&(this._groupPos=3,t=t.substr(0,r-1)),t)for(var a=!0,h=(r=t.length)-1;0<=h;h--)if("0"==(i=t.charAt(h))&&a)this._minInts++,this._maxInts++;else if(0==this._groupPos&&i==Ie)this._groupPos=r-h-1;else{if("#"!=i)break;a=!1}0<this._groupPos&&(this._replacement="$&"+s,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+n+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+n+")","g"))}},setDisplayMinusZero:function(t){this._displayMinusZero=t}},{PerformTest:function(t,e){for(var i=new Me(t),t=pt(),n=0;n<e;n++)i.format(1234567.1234);t=pt()-t,ft("##### DecimalFormat PerformTest Result : "+t+" msces.")},Test:function(t,e){t=new Me(t).format(e);ft("##### DecimalFormat Test Result : "+t)}}),Fe=e("BooleanFormatter",null,{init:function(t){this._super(),this._format=t,this._nullText=null,this._trueText=null,this._falseText=null,this._parse()},format:null,setFormat:function(t){t!=this._format&&(this._format=t,this._parse())},formatValue:function(t){return t===I?this._nullText:t?this._trueText:this._falseText},_parse:function(){var t;this._falseText=this._trueText=null,this._format&&(t=this._format.split(/[;\:]/),this._falseText=t[0],0<t.length&&(this._trueText=t[1]),1<t.length)&&(this._nullText=t[2])}}),Ne=(Ee.Default=new Ee("false,f,0:true,t,1:0"),e("DateTimeParser",null,{init:function(t){this._super(),this._baseYear=0,this._patterns=[],this.setFormat(t)},format:null,baseYear:2e3,amText:"AM",pmText:"PM",setFormat:function(t){if(t!=this._format){if(!t)throw"Invalid empty date format";this.$_parseFormat(t),this._format=t}},setBaseYear:function(t){t!=this._baseYear&&(this._baseYear=t)},setAmText:function(t){t!=this._amText&&(this._amText=t)},setPmText:function(t){t!=this._pmText&&(this._pmText=t)},parse:function(t){try{for(var e=0,i=1,n=1,s=0,r=0,o=0,a=0,h=0,l=0,d=this._patterns.length,u=0,c=t.length,_=0;_<d&&u<c;_++){var f=this._patterns[_],m=f.c,g=f.len;switch(m){case"y":e=B(t.substr(u,g));break;case"M":i=B(t.substr(u,g));break;case"d":n=B(t.substr(u,g));break;case"a":if(this._amText&&t.indexOf(this._amText,u)==u)h=12,g=this._amText.length;else{if(!this._pmText||t.indexOf(this._pmText,u)!=u)return null;l=12,g=this._pmText.length}break;case"H":case"h":s=B(t.substr(u,g));break;case"m":r=B(t.substr(u,g));break;case"s":o=B(t.substr(u,g));break;case"S":a=B(t.substr(u,g));break;case".":case"/":case"-":case":":case" ":if("./-: ".indexOf(t.charAt(u))<0)return null;break;default:return null}u+=g}}catch(t){return null}return e<100&&(e+=this._baseYear),0<h?12==s&&(s=0):0<l&&s<12&&(s+=12),new Date(e,i-1,n,s,r,o,a)},$_parseFormat:function(t){var e,i,n,s=t,r=s.length,o=0;for(this._patterns=[];o<r;)if(e=o,Gt(i=s.charAt(o))){for(o++;o<r&&Gt(s.charAt(o));)o++;this._patterns.push({c:" ",p:e,len:o-e})}else{switch(n=0,i){case"y":4!=(n=this.$_getPattern(s,o,i))&&2!=n&&this.$_throwInvalidFormat(s);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;case"S":3!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;case"a":case".":case"/":case"-":case":":1!=(n=this.$_getPattern(s,o,i))&&this.$_throwInvalidFormat(s);break;default:this.$_throwInvalidFormat(s)}0<n&&(this._patterns.push({c:i,p:o,len:n}),o+=n)}},$_throwInvalidFormat:function(t){throw"Invalid date format: "+t},$_throwInvalidValue:function(t){throw"Invalid date text: "+t},$_getPattern:function(t,e,i){for(var n=1;++e<t.length&&t.charAt(e)==i;)n++;return n}})),Le=["yy","yyyy","yyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],Ae=[".","/","-",":"],Ve=("0".charCodeAt(0),"9".charCodeAt(0),"Z".charCodeAt(0)),Pe="z".charCodeAt(0),He="A".charCodeAt(0),Ge="a".charCodeAt(0),$e=("Y".charCodeAt(0),"y".charCodeAt(0)),Ue="M".charCodeAt(0),We="m".charCodeAt(0),ze=("D".charCodeAt(0),"d".charCodeAt(0)),Ke="H".charCodeAt(0),Ye="h".charCodeAt(0),Xe="S".charCodeAt(0),qe="s".charCodeAt(0),je=(Re.Default=new Re(Re.$_DefaultFormat="yyyy/MM/dd"),["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"]),Ze=[".","/","-",":"],Je="0".charCodeAt(0),Qe="9".charCodeAt(0);Se.Default=new Se(Se.$_DefaultFormat="yyyy/MM/dd"),Se.getSimpleDateNull=function(t){var e,i,n;return t instanceof Date?t:"number"==typeof t?new Date(t):3==(n=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/)).length&&(e=parseInt(n[0]),i=parseInt(n[1]-1),n=parseInt(n[2]),e==(t=new Date(e,i,n)).getFullYear())&&i==t.getMonth()&&n==t.getDate()?t:null},Te.FORMATS=["custom","iso","timestamp","platform"],(Te.Default=new Te("yyyy/MM/dd HH:mm:ss")).setAmText("AM"),Te.Default.setPmText("PM"),Te.Default.setBaseYear(2e3),(ExcelFormatConverter=e("ExcelFormatConverter",null,{},{convertNumberFormat:function(t){return 0<t.indexOf(".#")?t.replace(".#",".0"):t},convertDateFormat:function(t){for(var e="",i=t.length,n=0;n<i;n++){var s=t.charAt(n);switch(s){case"y":case"d":case"m":case"s":case":":e+=s;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(i-1<=n||"H"!=t.charAt(n+1))&&(e+="h");break;case"h":0!=n&&"h"==t.charAt(n-1)||(e+="h");break;case"S":break;case".":case"/":case"-":case" ":(i-1<=n||"S"!=t.charAt(n+1))&&(e=e+"\\"+s);break;default:e=e+'"'+s+'"'}}return e}})).Default=new ExcelFormatConverter;function ti(t,e){this.message=t,this.tokenPos=e}function h(t){this.message=t}(ti.prototype=new Error).constructor=ti,(h.prototype=new Error).constructor=h;function ei(){for(var t=[],e=0;e<arguments.length;e++)t[arguments[e]]=!0;return t}function ii(){for(var i=[],t=[],e=[],n=[],s=[],r=0,o=0,a=0,h={},l=0;l<256;l++)i[l]=l=="_".charCodeAt()||l>="0".charCodeAt()&&l<="9".charCodeAt()||l>="a".charCodeAt()&&l<="z".charCodeAt()||l>="A".charCodeAt()&&l<="Z".charCodeAt(),t[l]=l>="0".charCodeAt()&&l<="9".charCodeAt()||l>="a".charCodeAt()&&l<="f".charCodeAt()||l>="A".charCodeAt()&&l<="F".charCodeAt(),e[l]=l>="0".charCodeAt()&&l<="9".charCodeAt()||l==".".charCodeAt()||l=="e".charCodeAt()||l=="E".charCodeAt(),n[l]=1<=l&&l<=9||11==l||14<=l&&l<=32,s[l]=0==l;r='"'.charCodeAt(),o="'".charCodeAt(),a="\\".charCodeAt(),(h={}).str=K.ToStr,h.num=K.ToNum,h.bool=K.ToBool,h.not=K.Not,h.len=K.Length,h.lenb=K.LengthBin,h.and=K.And,h.in=K.In,h.mod=K.Mod,h.or=K.Or,h.div=K.Div,h.shl=K.Shl,h.shr=K.Shr,h.xor=K.Xor,h.is=K.Is,h.like=K.Like,h.ilike=K.ILike,h.match=K.Match,h.imatch=K.IMatch,h.defined=K.Defined,h.null=K.Null,h.empty=K.Empty,h.nan=K.NaN,h.datestr=K.ToDateStr,h.year=K.ToYear,h.month=K.ToMonth,h.day=K.ToDay,h.hour=K.ToHour,h.rounddown=K.ToRoundDown;var d,u=null,c=null,_=0,f=0,m=0,g=0,p=0,w=0,v=0,C=0;function y(){var t=c.charCodeAt(m);C=m,t<256?u[t]():D()}function x(){f=K.Symbol,m++}function I(){f=K.Comma,m++}function b(){f=K.CRLF,10==c.charCodeAt(m+1)?m+=2:m++,w++,v=m}function E(){f=K.CRLF,w++,v=++m}function R(){f=K.Equal,m++}function S(){"="==c.charAt(m+1)?(f=K.GreaterEqual,m+=2):(f=K.Greater,m++)}function T(){"="==c.charAt(m+1)?(f=K.LowerEqual,m+=2):">"==c.charAt(m+1)?(f=K.NotEqual,m+=2):(f=K.Lower,m++)}function k(){for(var t=m;t<_&&!i[c.charCodeAt(t)];)t++;for(var e=t;t<_&&i[c.charCodeAt(t)];)t++;return e<t?(p=t,c.substr(e,t-e).toLowerCase()):null}function D(){for(var t=m;m<_&&(i[c.charCodeAt(m)]||255<c.charCodeAt(m));)m++;var e=c.substr(t,m-t).toLowerCase();if(h.hasOwnProperty(e))switch(f=h[e]){case K.Not:if(e=k())switch(e){case"like":f=K.NotLike,m=p;break;case"ilike":f=K.NotILike,m=p;break;case"match":f=K.NotMatch,m=p;break;case"imatch":f=K.NotIMatch,m=p}break;case K.Is:"not"==(e=k())&&(f=K.IsNot,m=p)}else f=K.Identifier}function B(){for(f=K.IntegerLiteral,m++;m<_&&t[c.charCodeAt(m)];)m++}function O(){for(f=K.IntegerLiteral,m++;m<_&&e[c.charCodeAt(m)];){if("."==c.charAt(m)){if("."==c.charAt(m+1))break;f=K.FloatLiteral}m++}}function M(){f=K.Minus,m++}function F(){f=K.Plus,m++}function N(){"."==c.charAt(m+1)?(f=K.DotDot,m+=2):(f=K.Point,m++)}function L(){f=K.RoundOpen,m++}function A(){f=K.RoundClose,m++}function V(){f=K.Slash,m++}function P(){for(f=K.Space,m++;m<_&&n[c.charCodeAt(m)];)m++}function H(){f=K.BracketOpen,m++}function G(){f=K.BracketClose,m++}function $(){f=K.Star,m++}function U(){f=K.Mod,m++}function W(){f=K.StringLiteral;do{var t=c.charCodeAt(m);if(s[t])throw new ti("Untermintated string",t)}while(t==a&&m++,++m<_&&c.charCodeAt(m)!=r);m++}function z(){f=K.StringLiteral;do{var t=c.charCodeAt(m);if(s[t])throw new ti("Untermintated string",t)}while(t==a&&m++,++m<_&&c.charCodeAt(m)!=o);m++}for(this.tokenId=function(){return f},this.tokenLoc=function(){return{x:C-v,y:w}},this.tokenLen=function(){return m-C},this.token=function(){return c.substr(C,this.tokenLen())},this.isSpace=function(){return f==K.Space},this.init=function(t){_=(c=t).length,g=m=C=v=w=0,f=0},this.charAhread=function(){for(g=m;g<_&&0<c.charCodeAt(g)&&c.charCodeAt(g)<=32;)g++;return c.charCodeAt(this._runAhead)},this.nextId=function(t){for(;y(),m<_&&f!=t;);},this.nextNoSpace=function(){if(m<_)for(;y(),m<_&&this.isSpace(););},this.isFirstInLine=function(){if(0==C)return!0;var t,e=C;for(e--;0<e&&n[c.charCodeAt(e)];)e--;return 0==e||10==(t=c.charCodeAt(e))||13==t},u=[],d=1;d<=255;d++)u[d]=x;for(d=1;d<=32;d++)u[d]=P;for(u[10]=E,u[13]=b,u["$".charCodeAt()]=B,u[r]=W,u[o]=z,d=0;d<=9;d++)u["0".charCodeAt()+d]=O;for(d="A".charCodeAt();d<="Z".charCodeAt();d++)u[d]=D;for(d="a".charCodeAt();d<="z".charCodeAt();d++)u[d]=D;u["_".charCodeAt()]=D,u["(".charCodeAt()]=L,u[")".charCodeAt()]=A,u["*".charCodeAt()]=$,u["+".charCodeAt()]=F,u[",".charCodeAt()]=I,u["-".charCodeAt()]=M,u[".".charCodeAt()]=N,u["/".charCodeAt()]=V,u["%".charCodeAt()]=U,u["<".charCodeAt()]=T,u["=".charCodeAt()]=R,u[">".charCodeAt()]=S,u["[".charCodeAt()]=H,u["]".charCodeAt()]=G}function ni(){var s=null,r=new ii;function o(t){if(t!=r.tokenId())throw new ti("Token is not a expected kind ["+t+"]: "+r.tokenId(),r.tokenLoc());a()}function a(){r.nextNoSpace()}function h(){var t,e,i=null,n=l();if(K.IS_CHECK[e=r.tokenId()]){if(a(),(t=l())._prepareValue(),!(t=b(t._getLiteral(),gi)))throw new ti("is operator's operand must be defined, null or empty: "+r.tokenId());i=new yi(n,e,t)}else(i=new mi).leftExpr=n,(K.IS_RELATIVE[r.tokenId()]||r.tokenId()==K.Comma)&&(i.operator=r.tokenId(),a(),i.rightExpr=l());return i}function l(){var t=new $i;for(t.addTerm(e());K.IS_ADDITIVE[r.tokenId()];)t.addOperator(r.tokenId()),a(),t.addTerm(e());return t}function e(){var t=new Gi;for(t.addFactor(d());K.IS_MULTIPLICATIVE[r.tokenId()];)t.addOperator(r.tokenId()),a(),t.addFactor(d());return t}function d(){var t,e=r.tokenId();switch(e){case K.StringLiteral:return t=r.token(),a(),new bi(t);case K.RoundOpen:return a(),t=h(),o(K.RoundClose),t;case K.Identifier:var i,n=r.token();return a(),r.tokenId()==K.BracketOpen?(a(),i=h(),o(K.BracketClose),new Ri(n,i,0<=s.indexOf(n))):new Ei(n);case K.IntegerLiteral:return i=r.token(),a(),new Ii(i);case K.FloatLiteral:return n=r.token(),a(),new xi(n);case K.Minus:return a(),new ki(d());case K.Plus:return a(),new Di(d());case K.Not:return a(),new Bi(d());case K.Defined:return a(),new pi;case K.Null:return a(),new vi;case K.Empty:return a(),new wi;case K.NaN:return a(),new Ci;case K.ToBool:return a(),new Oi(d());case K.ToNum:return a(),new Mi(d());case K.ToStr:return a(),new Fi(d());case K.Length:return a(),new Ti(d());case K.LengthBin:return a(),new LenBinNode(d());case K.ToDateStr:return a(),new Ni(d());case K.ToYear:return a(),new Li(d());case K.ToMonth:return a(),new Ai(d());case K.ToDay:return a(),new Vi(d());case K.ToHour:return a(),new Pi(d());case K.ToRoundDown:return a(),new Hi(d())}throw new ti("Unkown token: "+e)}this.parse=function(t,e){if(!t)return null;try{var i="function"==typeof t?t:"string"==typeof t&&10<t.length?new Function("","return "+t)():null;if("function"==typeof i)return new fi(i)}catch(t){}s=e||[],r.init(t),a();i=h();return i&&i._prepareValue(),i},this.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)}}function si(t){for(var e="";0<=t;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e}function ri(){this.id=void 0,this.name="Tahoma",this.size=10,this.color="ff000000",this.bold=!1,this.italic=!1,this.scheme=void 0,this.underline=!1}function oi(){this.id=void 0,this.patternType="none",this.color=void 0,this.gradient=void 0,this.color2=void 0,this.degree="90",this.tint=0,this.serialize=function(t,e){var i,n,s;"linear"==this.gradient?(s=t.createElement("gradientFill"),e.appendChild(s),s.setAttribute("degree",this.degree),n=t.createElement("stop"),s.appendChild(n),n.setAttribute("position","0"),i=t.createElement("color"),n.appendChild(i),i.setAttribute("rgb",this.color),i.setAttribute("tint",this.tint),n=t.createElement("stop"),s.appendChild(n),n.setAttribute("position","1"),i=t.createElement("color"),n.appendChild(i),i.setAttribute("rgb",this.color2),i.setAttribute("tint",this.tint)):(s=t.createElement("patternFill"),e.appendChild(s),s.setAttribute("patternType",this.patternType),"none"!=this.patternType&&(i=t.createElement("fgColor"),s.appendChild(i),i.setAttribute("rgb",this.color),i.setAttribute("tint",this.tint)))}}function ai(){this.id=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0}function hi(){this.id=void 0,this.horzAlign=hi.ALIGN_NEAR,this.vertAlign=hi.VALIGN_CENTER,this.wrapText=!1,this.formatId=0,this.font=null,this.fill=null,this.border=null,this.xfId=0}function li(){this.index=void 0,this.width=10,this.style=null,this.serialize=function(t,e){e.setAttribute("min",this.index),e.setAttribute("max",this.index),e.setAttribute("width",this.width),this.style&&e.setAttribute("style",this.style.id)}}function di(t,e){this._nodeName=t,this._attributes={},this._childs=[],this._cellMap={},this._value=e,this.destroy=function(){this._attributes=null;for(var t=0,e=this._childs.length;t<e;t++)this._childs[t].destroy&&this._childs[t].destroy();this._childs=null},this.toText=function(){var t,e,i,n,s,r=[],o=[];for(t in r.push("<"+this._nodeName),this._attributes)r.push(" "+t+'="'+this._attributes[t]+'"');for(r.push(">"),e=0,i=this._childs.length;e<i;e++){for(t in n=this._childs[e],o.length=0,o.push("<"+n._nodeName),n._attributes)o.push(" "+t+'="'+n._attributes[t]+'"');o.push(">"),n.hasOwnProperty("_excelFormula")&&o.push("<f>"+String(n._excelFormula)+"</f>"),n.hasOwnProperty("_value")&&o.push("<v>"+String(n._value)+"</v>"),o.push("</"+n._nodeName+">"),r.push(o.join(""))}return null!=this._value&&r.push(this._value),r.push("</"+this._nodeName+">"),s=r.join(""),r=null,s},this.appendChild=function(t){var e=t._attributes&&t._attributes.r,i=this._cellMap[e];0<=i?this._childs[i]=t:(i=this._childs.push(t),this._cellMap[e]=i-1)},this.childNodes=function(){return this._childs},this.setAttribute=function(t,e){this._attributes||(this._attributes={}),this._attributes[t]=e},this.getAttribute=function(t){return this._attributes[t]}}var ui,K={Unknown:0,Add:1,Slash:2,Star:3,Minus:4,Plus:5,Identifier:10,And:11,In:12,Not:13,Div:14,Mod:15,Shl:16,Shr:17,Or:18,Xor:19,ToStr:20,ToNum:21,ToBool:23,Length:24,LengthBin:25,Is:26,IsNot:27,BraceClose:30,BraceOpen:31,Comma:32,CRLF:33,Null:34,Defined:35,Empty:36,NaN:37,Equal:40,Greater:41,GreaterEqual:42,Lower:43,LowerEqual:44,NotEqual:45,Like:46,NotLike:47,ILike:48,NotILike:49,Match:50,NotMatch:51,IMatch:52,NotIMatch:53,String:60,StringLiteral:61,Ascii:62,FloatLiteral:63,IntegerLiteral:64,Point:65,RoundOpen:66,RoundClose:67,DotDot:68,BracketOpen:69,BracketClose:70,Space:71,Symbol:80,ToDateStr:90,ToYear:91,ToMonth:92,ToDay:93,ToHour:94,ToRoundDown:95},ci=(K.IS_CHECK=ei(K.Is,K.IsNot),K.IS_RELATIVE=ei(K.Equal,K.NotEqual,K.Like,K.NotLike,K.ILike,K.NotILike,K.Match,K.NotMatch,K.IMatch,K.NotIMatch,K.Greater,K.GreaterEqual,K.Lower,K.LowerEqual),K.IS_ADDITIVE=ei(K.Minus,K.Plus,K.Or,K.Xor),K.IS_MULTIPLICATIVE=ei(K.And,K.Star,K.Slash,K.Div,K.Mod,K.Shl,K.Shr),e("ExpressionNode",null,{init:function(){this._super()},destroy:function(){return!1},_asLiteral:function(){return null},evaluate:function(){a()},toString:function(){return String(this)}})),_i=e("EmptyExpressionNode",ci,{init:function(){this._super()},destroy:function(){return!1},_asLiteral:function(){return null},evaluate:function(){},toString:function(){return""}},null,function(t){t.Default=new t}),fi=e("FunctionExpressionNode",ci,{init:function(t){this._super(),this._funcProc=t},destroy:function(){return!1},_asLiteral:function(){},evaluate:function(t){if(this._funcProc&&"function"==typeof this._funcProc){if(t._evaluate)return t._evaluate.call(t,this._funcProc);var e=t._grid,i=t._cell,n=(!i&&(t._target instanceof bh||t._target instanceof ma)&&(i=t._target),!(e=!e&&t._target.grid?t._target.grid():e)&&t._target._index&&(e=t._target._index.grid()),jt({},i&&i._index&&i._index.proxy())),e=(i instanceof ha&&(n.footerIndex=i._footerIndex),e&&e.getHandler()),t=(i&&!i._index.item()&&(i._index._item=t._item),i&&(null==i.value()&&i.displayText?i.displayText():i.value()));try{return this._funcProc(e,n,t)}catch(t){return null}}},toString:function(){return this._funcProc.toString()}}),mi=e("ExpressionNodeImpl",ci,{init:function(){this._super(),this.leftExpr=null,this.rightExpr=null,this.operator=K.Unknown,this._literal=null},evaluate:function(t){if(this._literal)return this._literal.value();if(!this.rightExpr)return this.leftExpr.evaluate(t);var e=this.leftExpr.evaluate(t),i=this.rightExpr.evaluate(t);switch(this.operator){case K.Equal:return e==i;case K.NotEqual:return e!=i;case K.Greater:return i<e;case K.GreaterEqual:return i<=e;case K.Lower:return e<i;case K.LowerEqual:return e<=i;case K.Like:return this._calcLike(e,i,!1);case K.NotLike:return!this._calcLike(e,i,!1);case K.ILike:return this._calcLike(e,i,!0);case K.NotILike:return!this._calcLike(e,i,!0);case K.Match:return this._calcMatch(e,i,!1);case K.NotMatch:return!this._calcMatch(e,i,!1);case K.IMatch:return this._calcMatch(e,i,!0);case K.NotIMatch:return!this._calcMatch(e,i,!0);default:throw new h("Unknown operator: "+operator)}},toString:function(){var t="";if(this._literal)t=this._literal.toString();else if(this.rightExpr){var e,i=this.leftExpr.toString(),n=this.rightExpr.toString();switch(this.operator){case K.Equal:e="=";break;case K.NotEqual:e="<>";break;case K.Greater:e=">";break;case K.GreaterEqual:e=">=";break;case K.Lower:e="<";break;case K.LowerEqual:e="<=";break;case K.Like:e="like";break;case K.NotLike:e="not like";break;case K.ILike:e="ilike";break;case K.NotILike:e="not ilike";break;case K.Match:e="match";break;case K.NotMatch:e="not match";break;case K.IMatch:e="imatch";break;case K.NotIMatch:e="not imatch";break;case K.Comma:e=",";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+n+")"}else t=this.leftExpr.toString();return t},isIdentifier:function(t){return this.leftExpr&&!this.rightExpr&&this.leftExpr.isIdentifier(t)},_prepareValue:function(){this.leftExpr._prepareValue(),null==this.rightExpr?this._literal=this.leftExpr._getLiteral():this.rightExpr._prepareValue()},_getLiteral:function(){return this._literal},_calcLike:function(t,e,i){var n,s,t=String(t),e=String(e);return!(!t||!e)&&(i&&(t=t.toLowerCase(),e=e.toLowerCase()),1<(i=e.length)?(n="%"==e.charAt(0),s="%"==e.charAt(i-1),n&&s?(e=e.substr(1,i-2),0<=t.indexOf(e,0)):n?(e=e.substr(1,i-1),i=t.length,t.lastIndexOf(e,i-1)==i-1):s?(e=e.substr(0,i-1),0==t.indexOf(e,0)):t==e):"%"!=e&&t==e)},_calcMatch:function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)}}),gi=e("CheckableNode",ci,{init:function(){this._super()}}),pi=e("DefinedNode",gi,{init:function(){this._super()},value:function(){return I},_asLiteral:function(){return this},evaluate:function(t){return I},toString:function(){return"defined"}}),wi=e("EmptyNode",gi,{init:function(){this._super()},value:function(){return I},_asLiteral:function(){return this},evaluate:function(t){return I},toString:function(){return"empty"}}),vi=e("NullNode",gi,{init:function(){this._super()},value:function(){return I},_asLiteral:function(){return this},evaluate:function(t){return null},toString:function(){return"null"}}),Ci=e("NanNode",gi,{init:function(){this._super()},value:function(){return NaN},_asLiteral:function(){return this},evaluate:function(t){return NaN},toString:function(){return"NaN"}}),yi=e("CheckNode",mi,{init:function(t,e,i){this._super(),this.leftExpr=t,this.operator=e,this._isNot=e==K.IsNot,this._value=-1,i instanceof pi?this._value=yi.DEFINED:i instanceof vi?this._value=yi.NULL:i instanceof wi?this._value=yi.EMPTY:i instanceof Ci&&(this._value=yi.NAN)},_prepareValue:function(){this.leftExpr._prepareValue(),this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return null},evaluate:function(t){var e,i=this._literal?this._literal.value():this.leftExpr.evaluate(t);switch(this._value){case yi.DEFINED:e=i!==I;break;case yi.NULL:e=i===I||null===i;break;case yi.EMPTY:e=i===I||null===i||0==String(i).length;break;case yi.NAN:e=null===i||isNaN(i);break;default:return I}return this._isNot?!e:e},toString:function(){var t="<<ERROR>>";switch(this._value){case yi.DEFINED:t="defined";break;case yi.NULL:t="null";break;case yi.EMPTY:t="empty";break;case yi.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"}},{DEFINED:0,NULL:1,EMPTY:2,NAN:3}),xi=e("FloatLiteralNode",ci,{init:function(t){this._super(),this._value=Number(t)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return String(this._value)}}),Ii=e("IntegerLiteralNode",ci,{init:function(t){this._super(),this._value=parseInt(t)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return String(this._value)}}),bi=e("StringLiteralNode",ci,{init:function(t){this._super(),this._value=t.substr(1,t.length-2);for(var e="",i=0,n=!1;i<this._value.length;)"\\"!=this._value[i]||n?(n=!1,e+=this._value[i++]):(n=!0,i++);this._value=e},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(t){return this._value},toString:function(){return this._value}}),Ei=e("IdentifierNode",ci,{init:function(t){this._super(),this._literal=t,this._idKey=-651212},identifier:function(){return this._literal},evaluate:function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},toString:function(){return this._literal}}),Ri=e("IndexerNode",ci,{init:function(t,e,i){this._super(),this._ident=t,this._indexer=e,this._capital=i,this._idKey=-1490313,this._intIndex=NaN,this._strIndex=null},_prepareValue:function(){var t=null,e=this._indexer._asLiteral();e||(t=this._indexer._prepareValue&&this._indexer)&&(t._prepareValue(),e=t._getLiteral()),e&&("string"==typeof(t=e.value())?this._strIndex=t:this._intIndex=parseInt(t),this._capital)&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())},_getLiteral:function(){return null},evaluate:function(t){var e;return-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex?t.evaluateIndexerS(this._idKey,this._strIndex,this._capital):isNaN(this._intIndex)?"string"==typeof(e=this._indexer.evaluate(t))?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e):t.evaluateIndexerI(this._idKey,this._intIndex)},toString:function(){return this._ident+"["+this._indexer.toString()+"]"}}),Si=e("UnaryNode",ci,{init:function(t){this._super(),this._factor=t,this._literal=null},_prepareValue:function(){this._literal=this._factor._asLiteral(),!this._literal&&this._factor._prepareValue&&(this._factor._prepareValue(),this._literal=this._factor._getLiteral())},_getLiteral:function(){return null}}),Ti=e("LenNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t?t.length:0},toString:function(){return"(len "+this._factor+")"}}),ki=e("MinusNode",Si,{init:function(t){this._super(t)},evaluate:function(t){return-(this._literal?this._literal.value():this._factor.evaluate(t))},toString:function(){return"-"+this._factor}}),Di=e("PlusNode",Si,{init:function(t){this._super(t)},evaluate:function(t){return this._literal?this._literal.value():this._factor.evaluate(t)},toString:function(){return"+"+this._factor}}),Bi=e("NotNode",Si,{init:function(t){this._super(t)},evaluate:function(t){return!(this._literal?this._literal.value():this._factor.evaluate(t))},toString:function(){return"(not "+this._factor+")"}}),Oi=e("ToBoolNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return Boolean(t)},toString:function(){return"(bool "+this._factor+")"}}),Mi=e("ToNumberNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return Number(t)},toString:function(){return"(num "+this._factor+")"}}),Fi=e("ToStringNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return String(t)},toString:function(){return"(str "+this._factor+")"}}),Ni=e("ToDateStringNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t instanceof Date&&(t=Dt(t.getFullYear(),4)+Dt(t.getMonth()+1,2)+Dt(t.getDate(),2)+Dt(t.getHours(),2)+Dt(t.getMinutes(),2)+Dt(t.getSeconds(),2)+Dt(t.getMilliseconds(),3)),String(t)},toString:function(){return"(datestr "+this._factor+")"}}),Li=e("ToYearNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t instanceof Date?t.getFullYear():null},toString:function(){return"(year "+this._factor+")"}}),Ai=e("ToMonthNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t instanceof Date?t.getMonth()+1:null},toString:function(){return"(month "+this._factor+")"}}),Vi=e("ToDayNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t instanceof Date?t.getDate():null},toString:function(){return"(day "+this._factor+")"}}),Pi=e("ToHourNode",Si,{init:function(t){this._super(t)},evaluate:function(t){t=this._literal?this._literal.value():this._factor.evaluate(t);return t instanceof Date?t.getHours():null},toString:function(){return"(hour "+this._factor+")"}}),Hi=e("ToRoundDownNode",Si,{init:function(t){this._super(t)},evaluate:function(t){if(this._factor._literal)return this._factor._literal.value();if(this._factor.rightExpr){var e=this._factor.leftExpr.evaluate(t),i=this._factor.rightExpr.evaluate(t);if(this._factor.operator!==K.Comma)throw new h("Unknown operator: "+operator);i=Math.pow(10,i);return Math.floor(e*i)/i}return this._factor.leftExpr.evaluate(t)},toString:function(){return"(rounddown "+this._factor+")"}}),Gi=e("TermNode",ci,{init:function(){this._super(),this._factors=[],this._operators=[],this._literal=null},addFactor:function(t){this._factors.push(t)},addOperator:function(t){this._operators.push(t)},isIdentifier:function(t){return 1==this._factors.length&&this._factors[0]instanceof Ei&&this._factors[0].identifier()==t},_prepareValue:function(){for(var t,e=0,i=this._factors.length;e<i;e++)(t=this._factors[e])._prepareValue&&t._prepareValue();0==this._operators.length&&(t=this._factors[0],this._literal=t._asLiteral(),!this._literal)&&t._prepareValue&&(this._literal=t._getLiteral())},_getLiteral:function(){return this._literal},evaluate:function(t){if(this._literal)return this._literal.value();for(var e,i=this._factors.length,n=this._factors[0].evaluate(t),s=1;s<i;s++)switch(e=this._factors[s].evaluate(t),this._operators[s-1]){case K.And:n=n&&e;break;case K.Star:n*=e;break;case K.Slash:n/=e;break;case K.Div:n=B(B(n)/B(e));break;case K.Mod:n%=e;break;case K.Shl:n<<=e;break;case K.Shr:n>>=e}return n},toString:function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{for(var e=this._factors.length,t="("+this._factors[0].toString(),i=1;i<e;i++){switch(this._operators[i-1]){case K.And:t+=" and ";break;case K.Star:t+=" * ";break;case K.Slash:case K.Div:t+=" / ";break;case K.Mod:t+=" mod ";break;case K.Shl:t+=" shl ";break;case K.Shr:t+=" shr "}t+=this._factors[i].toString()}t+=")"}return t}}),$i=e("SimpleExpressioNode",ci,{init:function(){this._super(),this._terms=[],this._operators=[],this._literal=null},addTerm:function(t){this._terms.push(t)},addOperator:function(t){this._operators.push(t)},isIdentifier:function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},_prepareValue:function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t]._prepareValue();0==this._operators.length&&(this._literal=this._terms[0]._getLiteral())},_getLiteral:function(){return this._literal},evaluate:function(t){if(this._literal)return this._literal.value();for(var e,i=this._terms.length,n=this._terms[0].evaluate(t),s=1;s<i;s++)switch(e=this._terms[s].evaluate(t),this._operators[s-1]){case K.Minus:n-=e;break;case K.Plus:n+=e;break;case K.Or:n=n||e;break;case K.Xor:n^=e}return n},toString:function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{for(var e=this._terms.length,t="("+this._terms[0].toString(),i=1;i<e;i++){switch(this._operators[i-1]){case K.Minus:t+=" - ";break;case K.Plus:t+=" + ";break;case K.Or:t+=" or ";break;case K.Xor:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[i].toString()}t+=")"}return t}}),Si=(ni.Default=new ni,e("ExpressionRuntime",null,{init:function(){this._super()},isIdentifier:function(t){throw new Error("Token is not a valid Identifier: "+t)},evaluateIdentifier:function(t){throw new Error("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){throw new Error("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e){throw new Error("Invalid identifier indexer: "+t)}})),Ui='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',Wi=e("ExcelStrings",null,{init:function(t){this._super(),this._nextId=0,this._count=0,this._stringMap={},this._strings=[]},count:function(){return this._count},uniqueCount:function(){return this._nextId},add:function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},getIndex:function(t){return this._stringMap[t]},createPart:function(){var t,e=pe('<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></sst>'),i=e.documentElement,n=/^\s|\s$|\r|\n|\r\n/;i.setAttribute("count",this._count),i.setAttribute("uniqueCount",this._nextId);for(var s=0,r=this._strings.length;s<r;s++){var o=e.createElement("si"),a=(i.appendChild(o),e.createElement("t")),o=(o.appendChild(a),e.createTextNode(this._strings[s]));a.appendChild(o),n.test(this._strings[s])&&a.setAttribute("xml:space","preserve")}return t=we(e),Ui+t}}),zi=(ri.prototype.toString=function(){return this.name+" "+this.size+" "+this.color+" "+this.bold+" "+this.italic},ri.prototype.serialize=function(t,e){ye(t,e,"sz","val",this.size||10),ye(t,e,"name","val",this.name||"Calibri"),ye(t,e,"color","rgb",this.color||"ff000000"),ye(t,e,"b","val",this.bold?"true":"false"),ye(t,e,"i","val",this.italic?"true":"false"),this.underline&&ye(t,e,"u")},oi.prototype.toString=function(){return this.patternType+" "+this.color+" "+this.gradient+" "+this.color2+" "+this.degree+" "+this.tint},ai.prototype.serialize=function(t,e){this.serializeBorder(t,e,"left"),this.serializeBorder(t,e,"right"),this.serializeBorder(t,e,"top"),this.serializeBorder(t,e,"bottom")},ai.prototype.serializeBorder=function(t,e,i){var n=t.createElement(i);e.appendChild(n),(i=this[i])&&(n.setAttribute("style","thin"),e=t.createElement("color"),n.appendChild(e),e.setAttribute("rgb",i._color.toColorHex()))},ai.prototype.toString=function(){return(this.left&&this.left.toText())+" "+(this.right&&this.right.toText())+" "+(this.top&&this.top.toText())+" "+(this.bottom&&this.bottom.toText())},hi.prototype.toString=function(){return this.horzAlign+" "+this.vertAlign+" "+this.wrapText+" "+this.formatId+" "+(this.font?this.font.id:void 0)+" "+(this.fill?this.fill.id:void 0)+" "+(this.border?this.border.id:void 0)+" "+this.xfId},hi.ALIGN_NEAR="left",hi.ALIGN_CENTER="center",hi.ALIGN_FAR="right",hi.VALIGN_NEAR="top",hi.VALIGN_CENTER="center",hi.VALIGN_FAR="bottom",hi.prototype.clone=function(){var t,e=new hi;for(t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e.id=void 0,e},hi.prototype.serialize=function(t,e){e.setAttribute("borderId",this.border?this.border.id:"0"),e.setAttribute("fillId",this.fill?this.fill.id:"0"),e.setAttribute("fontId",this.font?this.font.id:"0"),e.setAttribute("numFmtId",this.formatId),e.setAttribute("xfId","0");t=t.createElement("alignment");e.appendChild(t),t.setAttribute("horizontal",this.horzAlign),t.setAttribute("vertical",this.vertAlign),this.wrapText&&t.setAttribute("wrapText","1")},$$_EXCEL_NUMFMT_START=200,e("ExcelStyles",null,{init:function(t){this._super(),this._fonts=[],this._fills=[],this._borders=[],this._numFormats=[],this._xfs=[];var e=new oi,e=(this._fills.push(e,e),new ai),e=(this._borders.push(e),new ri),e=(this._fonts.push(e),new hi);this._xfs.push(e),this._fontsMap={},this._fillsMap={},this._bordersMap={},this._xfsMap={}},addFont:function(t){var e,i;return t?(e=t.toString(),this._fontsMap.hasOwnProperty(e)&&null!=(i=this._fontsMap[e])?t.id=i:(this._fonts.push(t),this._fontsMap[e]=t.id=this._fonts.length-1)):0},addFill:function(t){var e,i;return t?(e=t.toString(),this._fillsMap.hasOwnProperty(e)&&null!=(i=this._fillsMap[e])?t.id=i:(this._fills.push(t),this._fillsMap[e]=t.id=this._fills.length-1)):0},addBorder:function(t){var e,i;return t?(e=t.toString(),this._bordersMap.hasOwnProperty(e)&&null!=(i=this._bordersMap[e])?t.id=i:(this._borders.push(t),this._bordersMap[e]=t.id=this._borders.length-1)):0},addNumberFormat:function(t){var e=this._numFormats.indexOf(t);return e<0&&(this._numFormats.push(t),e=this._numFormats.length-1),$$_EXCEL_NUMFMT_START+e},add:function(t){var e,i;return t?(e=t.toString(),this._xfsMap.hasOwnProperty(e)&&null!=(i=this._xfsMap[e])?t.id=i:(this._xfs.push(t),this._xfsMap[e]=t.id=this._xfs.length-1)):0},createPart:function(){var t=pe('<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>'),e=t.documentElement,i=(0<this._numFormats.length&&(i=t.createElement("numFmts"),e.appendChild(i),this.$_createNumberFormats(t,i)),t.createElement("fonts")),i=(e.appendChild(i),this.$_createFonts(t,i),t.createElement("fills")),i=(e.appendChild(i),this.$_createFills(t,i),t.createElement("borders")),i=(e.appendChild(i),this.$_createBorders(t,i),t.createElement("cellStyleXfs")),i=(e.appendChild(i),this.$_createDefXfs(t,i),t.createElement("cellXfs"));return e.appendChild(i),this.$_createXfs(t,i),e=we(t),Ui+e},$_createNumberFormats:function(t,e){for(var i=0,n=this._numFormats.length;i<n;i++){var s=t.createElement("numFmt");Ce(s,"formatCode",this._numFormats[i]),Ce(s,"numFmtId",$$_EXCEL_NUMFMT_START+i),e.appendChild(s)}},$_createFonts:function(t,e){var i;this._fonts.length<1&&(i=new ri,this._fonts.push(i));for(var n=0,s=this._fonts.length;n<s;n++){var r=t.createElement("font");this._fonts[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._fonts.length)},$_createFills:function(t,e){var i;this._fills.length<1&&(i=new oi,this._fills.push(i));for(var n=0,s=this._fills.length;n<s;n++){var r=t.createElement("fill");this._fills[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._fills.length)},$_createBorders:function(t,e){var i;this._borders.length<1&&(i=new ai,this._borders.push(i));for(var n=0,s=this._borders.length;n<s;n++){var r=t.createElement("border");this._borders[n].serialize(t,r),e.appendChild(r)}e.setAttribute("count",this._borders.length)},$_createDefXfs:function(t,e){t=t.createElement("xf");e.appendChild(t),t.setAttribute("borderId",0),t.setAttribute("fillId",0),t.setAttribute("fontId",0),t.setAttribute("numFmtId",0),e.setAttribute("count",1)},$_createXfs:function(t,e){var i;this._xfs.length<1&&(i=new hi,this._xfs.push(i));for(var n=0,s=this._xfs.length;n<s;n++){var r=this._xfs[n],o=t.createElement("xf");r.serialize(t,o),e.appendChild(o)}e.setAttribute("count",this._xfs.length)}})),Ki=e("ExcelSheet",null,{init:function(t){this._super(),this._book=t,this._columns=null,this._doc=null,this._viewRoot=null,this._dataRoot=null,this._mergeRoot=null,this._rows=[],this._mergeCount=0,this._outlineLevel=0,this.$_preparePart(),this._dateConverter=Se.Default,this._dataRows=[],this._sparkGroups={},this._sheetName=t._sheets&&"Sheet"+(t._sheets.length+1)},destroy:function(){this._book=null,this._columns=null,this._doc=null,this._viewRoot=null,this._dataRoot=null,this._mergeRoot=null,this._rows=null,this._dateConverter=null,this._dataRows=null},colCount:function(){return this._columns.length},rowCount:function(){return this._dataRows.length},setColumns:function(t){this._columns=t},addRow:function(t,e){var i=this._dataRows[t]||(this._dataRows[t]=new di("row"));return i.setAttribute("r",t+1),e&&-1<e&&(i.setAttribute("ht",e),i.setAttribute("customHeight","1")),i},setRowLevel:function(t,e){0<=e&&(t=this._dataRows[t])&&(t.setAttribute("outlineLevel",e),this._outlineLevel=Math.max(e,this._outlineLevel))},addBlank:function(t,e,i,n){var n=this.addRow(t,n),s={_nodeName:"c"},r=s._attributes={};r.r=si(e)+(t+1),i&&(r.s=i.id),n.appendChild(s)},addMerge:function(t,e,i,n){e=si(e)+(t+1)+":"+si(e+n-1)+(t+i),n=this._doc.createElement("mergeCell");n.setAttribute("ref",e),this._mergeRoot.appendChild(n),this._mergeCount++},$_addCell:function(t,e,i,n,s,r,o){var r=this.addRow(t,r),a={_nodeName:"c"},h=a._attributes={};h.r=si(e)+(t+1),h.t=i,s&&(h.s=s.id),o&&(a._excelFormula=o),a._value=n,r.appendChild(a)},addText:function(t,e,i,n,s){i=this._book.addString(null!=i?i:"");this.$_addCell(t,e,"s",i,n,s)},addLink:function(t,e,i,n,s,r){var o;n&&""!=n?((o=document.createElement("div")).innerText=o.textContent=n,n=o.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),o.innerText=o.textContent=i,i=o.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"),this.$_addCell(t,e,"str",i,s,r,n='HYPERLINK("'+n+(i?'","'+i+'")':'")'))):this.addText(t,e,i,s,r)},addNumber:function(t,e,i,n,s,r){i=isNaN(i)||null==i?"":String(i);this.$_addCell(t,e,"n",i,n,s,r)},addBool:function(t,e,i,n,s,r,o){this.$_addCell(t,e,"b",i?1:0,n,o)},addDate:function(t,e,i,n,s,r,o,a){i?(i=this._dateConverter.toExcelDate(i),this.addNumber(t,e,i,n,a)):this.$_addCell(t,e,"s","",n,a)},addSparkLine:function(t,e,i,n,s){var r=n.column,r=this._sparkGroups[r.$_hash]||(this._sparkGroups[r.$_hash]=n.sparkLineGroup),n=r.refColumnInfo.startColumn,o=r.refColumnInfo.endColumn,a=null==(a=r.refColumnInfo.row)?0:a,r=r.sparkLines,n=this._sheetName+"!"+si(n+i)+(t+1+a)+":"+si(o+i)+(t+1+a);r[si(e)+(t+1)]=n,this.addBlank(t,e,s)},createPart:function(){var t,e,i,n,s,r=this._doc,o=r.documentElement,a="A1:"+si(this._columns.length-1)+this._dataRows.length,h=r.getElementsByTagName("dimension"),l=(h&&0<h.length&&h[0].setAttribute("ref",a),0<this._outlineLevel&&(h=r.createElement("sheetFormatPtr"),o.appendChild(h),h.setAttribute("outlineLevelRow",this._outlineLevel)),this._columns&&(a=r.createElement("cols"),o.appendChild(a),this.$_createCols(r,a)),0<this._mergeCount&&(o.appendChild(this._mergeRoot),this._mergeRoot.setAttribute("count",this._mergeCount)),[]),h=r.childNodes.item(0);for(l.push('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">'),h.getElementsByTagName("dimension")&&l.push(we(h.getElementsByTagName("dimension").item(0))),h.getElementsByTagName("sheetViews")&&l.push(we(h.getElementsByTagName("sheetViews").item(0))),h.getElementsByTagName("cols")&&l.push(we(h.getElementsByTagName("cols").item(0))),l.push("<sheetData>"),d=0,t=(e=this._dataRows).length;d<t;d++)e[d]&&l.push(e[d].toText());if(l.push("</sheetData>"),h.getElementsByTagName("mergeCells")&&l.push(we(h.getElementsByTagName("mergeCells").item(0))),0<Object.keys(this._sparkGroups).length){for(var d in l.push("<extLst>"),l.push('<ext uri="{05C60535-1F16-4fd2-B633-F4F36F0B64E0}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main">'),l.push('<x14:sparklineGroups xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main">'),this._sparkGroups){for(var u in n=(i=this._sparkGroups[d]).colors,s=i.sparkLines,i='<x14:sparklineGroup displayEmptyCellsAs="gap" type="'+(i.type||"line")+'" '+(n.colorMarkers?'markers="1" ':"")+(n.colorFirst?'first="1" ':"")+(n.colorLast?'last="1" ':"")+(n.colorHigh?'high="1" ':"")+(n.colorLow?'low="1" ':"")+">",l.push(i),n.colorSeries&&l.push('<x14:colorSeries rgb="'+n.colorSeries+'"/>'),n.colorMarkers&&l.push('<x14:colorMarkers rgb="'+n.colorMarkers+'"/>'),n.colorFirst&&l.push('<x14:colorFirst rgb="'+n.colorFirst+'"/>'),n.colorLast&&l.push('<x14:colorLast rgb="'+n.colorLast+'"/>'),n.colorHigh&&l.push('<x14:colorHigh rgb="'+n.colorHigh+'"/>'),n.colorLow&&l.push('<x14:colorLow rgb="'+n.colorLow+'"/>'),l.push("<x14:sparklines>"),s)l.push("<x14:sparkline>"),l.push("<xm:f>"+s[u]+"</xm:f>"),l.push("<xm:sqref>"+u+"</xm:sqref>"),l.push("</x14:sparkline>");l.push("</x14:sparklines>"),l.push("</x14:sparklineGroup>")}l.push("</x14:sparklineGroups>"),l.push("</ext>"),l.push("</extLst>")}for(l.push("</worksheet>"),d=0,t=e.length;d<t;d++)e[d]&&e[d].destroy&&e[d].destroy(),e[d]=null;return this._dataRows=null,Ui+l.join("")},$_preparePart:function(){var t=this._doc=pe('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"></worksheet>'),e=t.createElement("dimension"),e=(t.documentElement.appendChild(e),t.createElement("sheetViews")),i=(t.documentElement.appendChild(e),this._viewRoot=t.createElement("sheetView"));e.appendChild(i),i.setAttribute("workbookViewId","0"),this._book._sheets&&0!=this._book._sheets.length||i.setAttribute("tabSelected","1"),i.setAttribute("showOutlineSymbols","true"),this._dataRoot=t.createElement("sheetData"),this._mergeRoot=t.createElement("mergeCells")},$_createCols:function(t,e){for(var i=this._columns,n=0,s=i.length;n<s;n++){var r=i[n],o=t.createElement("col");r.serialize(t,o),e.appendChild(o)}},$_dateToStr:function(t){return Dt(t.getFullYear(),4)+Dt(t.getMonth()+1,2)+Dt(t.getDate(),2)+"T"+Dt(t.getHours(),2)+Dt(t.getMinutes(),2)+Dt(t.getSeconds(),2)}}),Yi=e("ExcelWorkbook2",null,{init:function(){this._super(),this._parts={},this._sst=new Wi(this),this._styles=new zi(this),this._sheets=[],this._RelationshipId=3,this.$_preapreTemplateParts()},destroy:function(){if(this._parts={},this._sst=null,this._styles=null,this._sheets.length)for(var t=0,e=this._sheets.length;t<e;t++)this._sheets[t].destroy()},parts:function(){return this._parts},sheets:function(){return this._sheets},addString:function(t){return this._sst.add(t)},addNumberFormat:function(t){return this._styles.addNumberFormat(t)},addFill:function(t){return this._styles.addFill(t)},addBorder:function(t){return this._styles.addBorder(t)},addFont:function(t){return this._styles.addFont(t)},addStyle:function(t){return this._styles.add(t)},createParts:function(){for(var t=this._parts,e=(t["xl/sharedStrings.xml"]=this._sst.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t["[Content_Types].xml"]),i=(i=(e=pe(e)).getElementsByTagName("Types"))&&0<i.length?i.item(0):null,n=t["xl/workbook.xml"],s=(s=(n=pe(n)).getElementsByTagName("workbook").item(0).getElementsByTagName("sheets"))&&0<s.length?s.item(0):null,r=t["xl/_rels/workbook.xml.rels"],o=(o=(r=pe(r)).getElementsByTagName("Relationships"))&&0<o.length?o.item(0):null,a=0,h=this._sheets.length;a<h;a++){var l,d=this._sheets[a],u="worksheets/sheet"+(a+1).toString()+".xml",c="xl/"+u;t[c]=d.createPart(),i&&((l=e.createElement("Override")).setAttribute("PartName","/"+c),l.setAttribute("ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"),i.appendChild(l)),s&&((c=n.createElement("sheet")).setAttribute("name",d._sheetName||"Sheet"+(a+1).toString()),c.setAttribute("sheetId",(a+1).toString()),c.setAttribute("r:id",d._id),s.appendChild(c)),o&&((l=r.createElement("Relationship")).setAttribute("Id",d._id),l.setAttribute("Type","http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"),l.setAttribute("Target",u),o.appendChild(l))}return t["[Content_Types].xml"]=we(e),t["xl/workbook.xml"]=we(n),t["xl/_rels/workbook.xml.rels"]=we(r),t},$_preapreTemplateParts:function(){var t=this._parts,e=(new Date).toISOString();t["[Content_Types].xml"]=Ui+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/></Types>',t["_rels/.rels"]=Ui+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=Ui+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGridJS</Application><AppVersion>1.0</AppVersion></Properties>',t["docProps/core.xml"]=Ui+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+e+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>",t["xl/workbook.xml"]=Ui+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><workbookPr date1904="false"/><bookViews><workbookView activeTab="0"/></bookViews><sheets></sheets></workbook>',t["xl/_rels/workbook.xml.rels"]=Ui+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>'},getRelationshipId:function(){return"rId"+(this._RelationshipId++).toString()}}),Xi=e("HtmlSheet",null,{init:function(){this._headrow=-1,this._bodyrow=-1,this._footrow=-1,this._headrows=[],this._bodyrows=[],this._footrows=[],this._selfClasses={},this._numberFormatter=null,this._datetimeWriter=null,this._boolFormatter=null,this._lineExp=new RegExp("\r\n|\r|\n","gi")},addHeadRow:function(){return this._headrows[++this._headrow]=[],this._headrow},addBodyRow:function(){return this._bodyrows[++this._bodyrow]=[],this._bodyrow},addFootRow:function(){return this._footrows[++this._footrow]=[],this._footrow},addHeader:function(t,e,i,n,s){var r="<th";1<n&&(r+=" rowspan="+n),1<s&&(r+=" colspan="+s),r=(r=r+(" class='"+this.$_getCssClasses(t,"rg-header"))+"'>")+this.$_makeInnerCellToHtml(t,"rg-header",e,i,!0),this._headrows[this._headrow].push(r+="</th>")},addFooterText:function(t,e,i,n,s){(e=null!==e&&e!==I?e:"")&&(null!=(r=i.prefix())&&(e=r+e),null!=(r=i.suffix()))&&(e+=r);var r="<th";1<n&&(r+=" rowspan="+n),1<s&&(r+=" colspan="+s),r=(r+=" class='"+this.$_getCssClasses(t,"rg-footer")+"'>")+this.$_makeInnerCellToHtml(t,"rg-footer",e,i,!1),this._footrows[this._footrow].push(r+="</td>")},addFooterNumber:function(t,e,i,n,s){var r,o=e+"";e&&"number"==typeof e&&(r=i.numberFormat())&&(this.$_setNumberFormat(r),o=this._numberFormatter.format(e)),this.addFooterText(t,o,i,n,s)},addBlank:function(t,e,i,n){var s;this._domMode?(s=this._doc.createElement("td"),1<i&&s.setAttribute("rowspan",i),1<n&&s.setAttribute("colspan",n),this.$_buildCellStyle(s,e),this._row.appendChild(s)):(i="<td ",i+=" class='"+this.$_getCssClasses(t,"rg-body"),this._bodyrows[this._bodyrow].push(i+=">&nbsp;</td>"))},addText:function(t,e,i,n,s,r){null!==e&&e!==I||(e=""),(r=!(7<arguments.length)||r)&&(null!=(o=i.prefix())&&(e=o+e),null!=(o=i.suffix()))&&(e+=o);var o="<td";1<n&&(o+=" rowspan="+n),1<s&&(o+=" colspan="+s),o=(o+=" class='"+this.$_getCssClasses(t,"rg-body")+"'>")+this.$_makeInnerCellToHtml(t,"rg-body",e,i,!1,n),this._bodyrows[this._bodyrow].push(o+="</td>")},addNumber:function(t,e,i,n,s){var r,o=e+"";wt(e)&&"number"==typeof e&&(r=i.numberFormat())&&(this.$_setNumberFormat(r),o=this._numberFormatter.format(e)),this.addText(t,o,i,n,s)},addDate:function(t,e,i,n,s){var r,o="";e&&e instanceof Date&&(o=((r=i.datetimeFormat())?(this.$_setDatetimeFormat(r),this._datetimeWriter):Re.Default).getText(e)),this.addText(t,o,i,n,s)},addBool:function(t,e,i,n,s){var r,o="";wt(e)&&(o=(r=i.booleanFormat())?(this.$_setBooleanFormat(r),this._boolFormatter.formatValue(e)):e.toString()),this.addText(t,o,i,n,s)},serialize:function(){var t,e,i="<style type='text/css'>";for(e in this._selfClasses)i+=this._selfClasses[e]+" ";if(i+="</style><table class='rg-html-table' style='border-spacing:0px'>",0<this._headrows.length){for(i+="<thead>",t=0;t<this._headrows.length;t++)i=(i+="<tr>")+this._headrows[t].join("")+"</tr>";i+="</thead>"}if(0<this._bodyrows.length){for(i+="<tbody>",t=0;t<this._bodyrows.length;t++)i=(i+="<tr>")+this._bodyrows[t].join("")+"</tr>";i+="</tbody>"}if(0<this._footrows.length){for(i+="<tfoot>",t=0;t<this._footrows.length;t++)i=(i+="<tr>")+this._footrows[t].join("")+"</tr>";i+="</tfoot>"}return i+="</html>"},$_setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new Me(t):null)},$_setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new Re(t):null)},$_setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new Fe(t):null)},$_makeInnerCellToHtml:function(t,e,i,n,s){n.textAlignment;var r=n.textAlignment(),o=n.lineAlignment(),a="<div class='"+this.$_getCssClasses(t,e+"-layout"),h=this.$_getSelfCssClasses(t,e+"-layout",n);return h&&(a+=" "+h),"rg-body"==e&&(a=(a+=" "+(r==D.FAR?"rg-right":r==D.NEAR?"rg-left":"rg-center"))+" "+(o==D.FAR?"rg-bottom":o==D.NEAR?"rg-top":"rg-middle"),s||n.textWrap()==Ms.NORMAL||(a+=" rg-nowrap")),a=(a=(a+="'>")+("<div class='"+this.$_getCssClasses(t,e+"-text")))+("'>"+(i=(i=this.$_htmlEscape(i))&&n.textWrap()!=Ms.NONE&&i.match(this._lineExp)?i.replace(this._lineExp,"<br/>"):i)+"</div></div>")},$_getCssClasses:function(t,e){var i=e;return t instanceof zl||(i+=" "+(e+="-"+(t instanceof Jo?"indicator":t instanceof ta?"checkbar":"group"))),t instanceof Tl&&(t=t.name())&&(i+=" "+(e+"-"+t.replace(" ","_"))),i},$_getSelfCssClasses:function(t,e,i){var n,s,r,o,a;return t instanceof Tl?(n=i.borderLeft()?i.borderLeft()._width:0,s=i.borderRight()?i.borderRight()._width:0,r=i.borderTop()?i.borderTop()._width:0,o=i.borderBottom()?i.borderBottom()._width:0,a=n+s+(n=i.paddingLeft())+(s=i.paddingRight()),i=r+o+(r=i.paddingTop())+(o=i.paddingBottom()),e=e+"-self-"+t.$_hash,this._selfClasses[e]||(this._selfClasses[e]="div."+e+"{ width: "+(t.displayWidth()-a-1)+"px; height:"+(t.measuredHeight()-i)+"px; padding-left:"+n+"px; padding-top:"+r+"px; padding-right:"+s+"px; padding-bottom:"+o+"px }"),e):null},$_headCount:function(){return this._head.children.length},$_bodyCount:function(){return this._body.children.length},$_colCount:function(){return this._row.children.length},$_htmlEscape:function(t){return t&&"string"==typeof t?t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}}),E=e("Dom",null,{init:function(t){this._super(),this._element=t},x:function(){return this._element.offsetLeft},y:function(){return this._element.offsetTop},size:function(){return E.getSize(this._element)},element:function(){return this._element},detach:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},clearChildren:function(){E.clearChildren(this._element)},addChild:function(t){E.addChild(this._element,t)},setStyles:function(t){E.setStyles(this._element,t)},getBounds:function(){return E.getBounds(this._element)},getOffset:function(){return E.getOffset(this._element)},move:function(t,e){E.move(this._element,t,e)},disableSelection:function(){E.disableSelection(this._element)},isAncestorOf:function(t){for(var e=t.parentElement;e;)if(e==this._element)return!0;return!1}},{createElement:function(t,e,i){var n=document.createElement(t);if(e&&E.setStyles(n,e),i)for(var s in i)n[s]=i[s];return n},setStyles:function(t,e){if(e){var i,n=t.style;for(i in e)n[i]=e[i]}},getSize:function(t){t=t.getBoundingClientRect();return{width:t.width,height:t.height}},setSize:function(t,e,i){t=t.style;t.width=e+"px",t.height=i+"px"},getBounds:function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},setBounds:function(t,e,i,n,s){t=t.style;t.left=e+"px",t.top=i+"px",t.width=n+"px",t.height=s+"px"},getScrolled:function(){var t=document.body,e=document.documentElement;return{sx:window.pageXOffset||e.scrollLeft||t.scrollLeft,sy:window.pageYOffset||e.scrollTop||t.scrollTop}},getOffset:function(t){var t=t.getBoundingClientRect(),e=document.body,i=document.documentElement,n=window.pageYOffset||i.scrollTop||e.scrollTop,s=window.pageXOffset||i.scrollLeft||e.scrollLeft,r=i.clientTop||e.clientTop||0,i=i.clientLeft||e.clientLeft||0,e=t.left+s-i,s=t.top+n-r;return{x:Math.round(e),y:Math.round(s)}},move:function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},disableSelection:function(t){t.style["-moz-user-select"]="-moz-none",t.style["-khtml-user-select"]="none",t.style["-webkit-user-select"]="none",t.style["-o-user-select"]="none",t.style["-ms-user-select"]="none",t.style["user-select"]="none"},addChild:function(t,e){return!(!t||!e||e.parentNode===t||(t.appendChild(e),0))},removeChild:function(t,e){return!(!t||!e||e.parentNode!==t||(t.removeChild(e),0))},clearChildren:function(t){for(var e=t;e.lastChild;)e.removeChild(e.lastChild)},clearElements:function(t){for(;t.lastChild;)E.clearElements(t.lastChild),t.removeChild(t.lastChild)},getChildIndex:function(t){if(t){var e=t.parentNode;if(e)for(var i=e.childNodes,n=0;n<i.length;n++)if(i[n]===t)return n}return-1},getRadioGroupValue:function(t){var e=document.getElementsByName(t);if(e)for(var i=e.length;i--;)if(e[i].checked)return e[i].value},htmlEncode:function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},getClipRect:function(t){return"rect("+t.y+"px,"+(t.x+t.width)+"px,"+(t.y+t.height)+"px,"+t.x+"px)"},renderTextRect:function(t,e,i,n,s,r){E.renderTextBounds(t,e,i,n,s.x,s.y,s.width,s.height,r)},renderTextBounds:function(t,e,i,n,s,r,o,a,h,l){if(i&&n){var d=t.style,u=(t.textContent=n,d.font=e?e.font:Hn,d.color=i.css(),d.whiteSpace="nowrap",d.textDecoration=e.underline?"underline":"none",t.getBoundingClientRect2());switch(h){case Tn.CENTER:s+=(o-u.width)/2;break;case Tn.RIGHT:s=s+o-u.width}switch(d.left=s+"px",l){case kn.TOP:break;case kn.BOTTOM:r=r+a-u.height;break;default:kn.MIDDLE;r+=(a-u.height)/2}d.top=r+"px"}},isAncestorOf:function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1}}),ci=e("Progress",le,{init:function(){this._super(),this._view=new qi,this._runner=null,this._next=0,this._completed=!1,this._timer=void 0},min:0,max:100,step:1,execute:function(t){t&&(this._runner=t,this._next=this._min,t.container instanceof HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext())},$_runNext:function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),_t("P R O G R E S S : "+this._min+" > "+this._next+" > "+this._max),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}this.$_completed||this.$_complete()},$_complete:function(){try{this._runner.complete&&this._runner.complete()}finally{_t("P R O G R E S S : completed : "+ +this._min+" > "+this._next+" > "+this._max),this.$_completed=!0,this._view.close()}}}),qi=e("ProgressView",null,{init:function(t){this._super(),this._container=null,this._dom=new E(this.$_createElement(t)),this._min=0,this._max=0,this._pos=0,this._useCssStyle=t},modal:!1,message:"Load data...",position:function(){return this._pos},setPosition:function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},setProperties:function(t,e,i,n,s){this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=n,s&&this.$_refreshView()},show:function(t,e){this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom.element());e=t.getBoundingClientRect(),t=this._dom.size();this._dom.move((e.width-t.width)/2,(e.height-t.height)/3)},close:function(){this._dom.detach()},$_createElement:function(t){var e=E.createElement("div",{position:"absolute",zIndex:3001,minWidth:"250px",padding:"8px 10px"});return t&&(e.className="rg-progress"),t||(e.style.backgroundColor="rgba(0, 111, 245, 0.05)",e.style.border="1px solid #ddd"),e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},$_createBar:function(t){var e=E.createElement("div",{width:"100%",height:"13px",marginBottom:"4px"}),i=(t&&(e.className="rg-progress-bar"),t||(e.style.background="linear-gradient(#aaa, #ccc)",e.style.border="1px solid #333"),E.createElement("div",{height:"100%",width:"0px"}));return e.appendChild(i),t&&(i.className="rg-progress-progress"),t||(i.style.background="linear-gradient(#fff, #ddd)",i.style.borderRight="1px solid #333"),e.$_led=i,e},$_createMsg:function(t){var e=E.createElement("div",{width:"100%",textAlign:"center"}),i=E.createElement("span",{});return t&&(i.className="rg-progress-message"),t||(i.style.fontSize="11px",i.style.fontFamily="Tahoma",i.style.fontWeight="bold"),e.appendChild(e.$_span=i),e},$_refreshView:function(){var t=this._dom.element(),e=t.$_bar,i=e.$_led,t=(t.$_msg.$_span.innerHTML=E.htmlEncode(this._message),E.getSize(e));i.style.width=Math.min(t.width-1,B(t.width*(this._pos-this._min)/(this._max-this._min)))+"px"},$_setMessage:function(t){this._dom.element().$_msg.$_span.innerHTML=E.htmlEncode(this._message)}}),ji=e("ProgressManager",null,{init:function(t){this._super(),this._container=t,this._title=null,this._view=null,this._useCssStyleProgress=!1},useCssStyleProgress:!1,show:function(t,e,i){this._view||(this._view=new qi(this._useCssStyleProgress)),this._view.show(t||this._container,e||"Load data...")},close:function(){this._view&&this._view.close()},setProperties:function(t,e,i,n){n||(n=this._title||"Load data... ",t<e&&(n+=parseInt(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view&&this._view.setProperties(t,e,i,n,!0)}}),Zi=0<=navigator.platform.toUpperCase().indexOf("MAC"),Ji=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),Qi="undefined"!=typeof InstallTrigger,tn=(window.whale,!!window.chrome&&!Ji),en=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")||!tn&&!Ji&&0<=navigator.userAgent.indexOf("Safari"),nn=en&&("Win32"==navigator.platform||0<=navigator.userAgent.indexOf("Windows")),sn=!!document.documentMode,rn=0<=navigator.userAgent.toLowerCase().indexOf("edge/"),on=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ji=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:void 0}(),an=void 0!==Ji&&Ji<=9,hn=void 0!==Ji&&Ji<=8,ln=!1,dn=-1!==navigator.appVersion.indexOf("MSIE 10"),un=-1!==navigator.appVersion.indexOf("MSIE 9"),Ji=document.createDocumentFragment(),cn=document.createElement("div"),_n=!1;Ji.appendChild(cn);try{Kn=cn.getBoundingClientRect()}catch(t){_n=!0}_n||isNaN(Kn.width)?Element.prototype.getBoundingClientRect2=function(){var t=Element.prototype.getBoundingClientRect.call(this);return{left:t.left,right:t.right,width:t.right-t.left,top:t.top,bottom:t.bottom,height:t.bottom-t.top}}:Element.prototype.getBoundingClientRect2=Element.prototype.getBoundingClientRect;try{cn.style.background="rgba(0, 0, 0, 1)"}catch(t){ln=!0}cn=null,Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&(ui=Object.getOwnPropertyDescriptor(Element.prototype,"innerText"),Object.defineProperty(Element.prototype,"textContent",{get:function(){return ui.get.call(this)},set:function(t){return ui.set.call(this,t)}}));function fn(){return{width:W.innerWidth||z.documentElement.clientWidth||z.body.clientWidth,height:W.innerHeight||z.documentElement.clientHeight||z.body.clientHeight}}function l(t,e){0==arguments.length?this.width=this.height=0:(this.width=t,this.height=e)}function mn(t,e){0==arguments.length?this.x=this.y=0:(this.x=t,this.y=e)}function gn(t,e){this._size=t,this._fixed=e}function pn(t,e){this._size=t,this._fixed=e}function _(t,e){"string"==typeof t?_._parse(t,this,e,!1):t instanceof _?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)}function g(t){this._color=t instanceof _?t:new _(t)}function f(t,e,i){this._color=new _(t),this._width=void 0!==e?Math.max(0,parseInt(e)):1,i&&(this._dash=i)}function wn(t){var D=t;"imageSmoothingEnabled"in D||(D.webkitImageSmoothingEnabled=!0),D.mozImageSmoothingEnabled=!0,D.oImageSmoothingEnabled=!0,D.imageSmoothingEnabled=!0,D.setLineDash=D.setLineDash||function(){},this.LINES_REG=new RegExp("\\n|\\r\\n?"),this.save=function(){D.save()},this.restore=function(){D.restore()},this.setCompositionOp=function(t){D.globalCompositeOperation=t},this.translate=function(t,e){D.translate(t,e)},this.scale=function(t,e,i){i&&D.setTransform(1,0,0,1,0,0),D.scale(t,e)},this.rotate=function(t){D.rotate(t)},this.clear=function(t,e,i,n){D.clearRect(t,e,i,n)},this.clip=function(){D.clip()},this.clipRect=function(t){D.beginPath(),D.rect(t.x,t.y,t.width,t.height),D.clip()},this.clipRectEx=function(t){D.beginPath(),D.rect(t.x,t.y,t.width+1,t.height+1),D.clip()},this.clipBounds=function(t,e,i,n){D.beginPath(),D.rect(t,e,i,n),D.clip()},this.clipBoundsEx=function(t,e,i,n){D.beginPath(),D.rect(t,e,i+1,n+1),D.clip()},this.containsPoint=function(t,e){return D.isPointInPath(t,e)},this.setAlpha=function(t){D.globalAlpha=t},this.setFill=function(t){D.fillStyle=t},this.setStroke=function(t,e,i){D.strokeStyle=t,D.lineWidth=e,D.setLineDash(i||[])},this.setShadow=function(t,e,i){D.shadowColor=t,D.shadowBlur=e,D.shadowOffsetX=D.shadowOffsetY=i},this.clearShadow=function(){D.shadowColor="transparent"},this.createLinearGradient=function(t,e,i,n){return isNaN(i)||isNaN(n),D.createLinearGradient(t,e,i,n)},this.createRadialGradient=function(t,e,i,n){var i=i/2,n=n/2,s=Math.min(i,n);return D.createRadialGradient(i,n,0,i,n,s)},this.drawBounds=function(t,e,i,n,s,r){D.beginPath(),D.rect(i,n,s,r),t&&(t.applyTo(this,i,n,s,r),D.fill()),e&&(e.applyTo(this),D.stroke())},this.drawBoundsI=function(t,e,i,n,s,r){var o=e&&e.applyTo(this);(t||o)&&(i+=e=o?e.width()%2/2:0,n+=e,D.beginPath(),D.rect(i,n,s,r),t&&t.applyTo(this,i,n,s,r)&&D.fill(),o)&&D.stroke()},this.drawRect=function(t,e,i){D.beginPath(),D.rect(i.x,i.y,i.width,i.height),t&&(t.applyTo(this,i.x,i.y,i.width,i.height),D.fill()),e&&(e.applyTo(this),D.stroke())},this.drawStrokeRect=function(t,e){D.beginPath(),D.strokeRect(e.x,e.y,e.width,e.height),t&&(t.applyTo(this),D.stroke())},this.fillAndClear=function(){D.fill(),D.shadowColor="transparent"},this.drawRectI=function(t,e,i){var n,s=e&&e.applyTo(this);(t||s)&&(e=s?e.width()%2/2:0,n=i.x+e,e=i.y+e,D.beginPath(),D.rect(n,e,i.width,i.height),t&&t.applyTo(this,n,e,i.width,i.height)&&this.fillAndClear(),s)&&D.stroke()},this.drawRoundRectI=function(t,e,i,n,s,r,o,a){var h,l,d,u=e&&e.applyTo(this);(t||u)&&(e=u?e.width()%2/2:0,h=i.x+e,l=i.y+e,d=i.right()+e+(a||0),e=i.bottom()+e+(a||0),D.beginPath(),D.moveTo(h+Math.min(n,i.width/2),l),D.lineTo(d-Math.min(s,i.width/2),l),D.quadraticCurveTo(d,l,d,l+Math.min(s,i.height/2)),D.lineTo(d,e-Math.min(o,i.height/2)),D.quadraticCurveTo(d,e,d-Math.min(o,i.width/2),e),D.lineTo(h+Math.min(o,i.width/2),e),D.quadraticCurveTo(h,e,h,e-Math.min(o,i.height/2)),D.lineTo(h,l+Math.min(n,i.height/2)),D.quadraticCurveTo(h,l,h+Math.min(n,i.width/2),l),D.closePath(),t&&t.applyTo(this,h,l,i.width,i.height)&&this.fillAndClear(),u)&&D.stroke()},this.drawRoundRectIWith=function(t,e,i,n,s){this.drawRoundRectI(t,e,i,n.topLeft,n.topRight,n.bottomLeft,n.bottomRight,s)},this.drawCircle=function(t,e,i,n,s){e=e&&e.applyTo(this);(t||e)&&(D.beginPath(),D.arc(i,n,s,0,2*Math.PI),t&&t.applyTo(this,i-s,n-s,2*s,2*s)&&D.fill(),e)&&D.stroke()},this.drawCircleBounds=function(t,e,i,n,s,r){var o,a,e=e&&e.applyTo(this);(t||e)&&(o=i+s/2,a=n+r/2,s=Math.min(s,r)/2,D.beginPath(),D.arc(o,a,s,0,2*Math.PI),t&&t.applyTo(this,i-s,n-s,2*s,2*s)&&D.fill(),e)&&D.stroke()},this.drawCircleRect=function(t,e,i){this.drawCircleBounds(t,e,i.x,i.y,i.width,i.height)},this.drawEllipse=function(t,e,i,n,s,r){var o,a,h,l,d,u,e=e&&e.applyTo(this);(t||e)&&(o=s/2*.5522848,a=r/2*.5522848,h=i+s,l=n+r,d=i+s/2,u=n+r/2,D.beginPath(),D.moveTo(i,u),D.bezierCurveTo(i,u-a,d-o,n,d,n),D.bezierCurveTo(d+o,n,h,u-a,h,u),D.bezierCurveTo(h,u+a,d+o,l,d,l),D.bezierCurveTo(d-o,l,i,u+a,i,u),D.closePath(),t&&t.applyTo(this,i,n,s,r)&&D.fill(),e)&&D.stroke()},this.drawTriangle=function(t,e,i){var n,e=e&&e.applyTo(this);(t||e)&&(n=i.x+i.width/2,D.beginPath(),D.moveTo(n,i.y),D.lineTo(i.right(),i.bottom()),D.lineTo(i.x,i.bottom()),D.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&D.fill(),e)&&D.stroke()},this.drawDiamond=function(t,e,i){var n,s,e=e&&e.applyTo(this);(t||e)&&(n=i.x+i.width/2,s=i.y+i.height/2,D.beginPath(),D.moveTo(n,i.y),D.lineTo(i.right(),s),D.lineTo(n,i.bottom()),D.lineTo(i.x,s),D.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&D.fill(),e)&&D.stroke()},this.drawCross=function(t,e,i){var n,s,r,o,e=e&&e.applyTo(this);(t||e)&&(n=i.x+i.width/2,s=i.y+i.height/2,r=Math.max(1.5,i.width/5),o=Math.max(1.5,i.height/5),D.beginPath(),D.moveTo(n-r,i.y),D.lineTo(n+r,i.y),D.lineTo(n+r,s-o),D.lineTo(i.right(),s-o),D.lineTo(i.right(),s+o),D.lineTo(n+r,s+o),D.lineTo(n+r,i.bottom()),D.lineTo(n-r,i.bottom()),D.lineTo(n-r,s+o),D.lineTo(i.x,s+o),D.lineTo(i.x,s-o),D.lineTo(n-r,s-o),D.closePath(),t&&t.applyTo(this,i.x,i.y,i.width,i.height)&&D.fill(),e)&&D.stroke()},this.drawDounut=function(t,e,i,n,s,r){e=e&&e.applyTo(this);(t||e)&&(D.beginPath(),D.arc(i,n,s,0,2*Math.PI,!0),D.arc(i,n,s-r,0,2*Math.PI,!1),D.closePath(),t&&t.applyTo(this,i-s,n-s,2*s,2*s)&&D.fill(),e)&&D.stroke()},this.drawArcSector=function(t,e,i,n,s,r,o,a,h,l){e=e&&e.applyTo(this);(t||e)&&(o+=3*Math.PI/2,D.beginPath(),D.moveTo(i,n),D.arc(i,n,s,o,o+a),D.lineTo(i,n),D.closePath(),t&&t.applyTo(this,i-s,n-r,2*s,2*r)&&D.fill(),e)&&D.stroke()},this.drawArcSector2=function(t,e,i,n,s,r,o,a,h,l,d,u){e=e&&e.applyTo(this);(t||e)&&(h+=3*Math.PI/2,D.beginPath(),D.arc(i,n,s,h,h+l),D.arc(i,n,o,h+l,h,!0),D.closePath(),t&&t.applyTo(this,i-o,n-a,2*o,2*a)&&D.fill(),e)&&D.stroke()},this.drawLine=function(t,e,i,n,s){t&&t.applyTo(this)&&(D.beginPath(),D.moveTo(e,i),D.lineTo(n,s),D.stroke())},this.drawLineI=function(t,e,i,n,s){t&&t.applyTo(this)&&(t=t.width()%2/2,D.beginPath(),e==n?(D.moveTo(e+t,i),D.lineTo(n+t,s)):i==s&&(D.moveTo(e,i+t),D.lineTo(n,s+t)),D.stroke())},this.drawHorzLine=function(t,e,i,n){t&&t.applyTo(this)&&(D.beginPath(),D.moveTo(e,n),D.lineTo(i,n),D.stroke())},this.drawHorzLineI=function(t,e,i,n){t&&t.applyTo(this)&&(n+=t.width()%2/2,D.beginPath(),D.moveTo(e,n),D.lineTo(i,n),D.stroke())},this.drawHLine=function(t,e,i,n){t&&t.applyTo(this)&&(D.beginPath(),D.moveTo(i,e),D.lineTo(n,e),D.stroke())},this.drawHLineI=function(t,e,i,n){t&&t.applyTo(this)&&(e+=t.width()%2/2,D.beginPath(),D.moveTo(i,e),D.lineTo(n,e),D.stroke())},this.drawVertLine=function(t,e,i,n){t&&t.applyTo(this)&&(D.beginPath(),D.moveTo(n,e),D.lineTo(n,i),D.stroke())},this.drawVertLineI=function(t,e,i,n){t&&t.applyTo(this)&&(n+=t.width()%2/2,D.beginPath(),D.moveTo(n,e),D.lineTo(n,i),D.stroke())},this.drawVLine=function(t,e,i,n){t&&t.applyTo(this)&&(D.beginPath(),D.moveTo(e,i),D.lineTo(e,n),D.stroke())},this.drawVLineI=function(t,e,i,n){t&&t.applyTo(this)&&(e+=t.width()%2/2,D.beginPath(),D.moveTo(e,i),D.lineTo(e,n),D.stroke())},this.drawLines=function(t,e){if(t&&t.applyTo(this)){var i=!1;if(xt(e)&&2<=e.length){D.beginPath(),D.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)D.lineTo(e[n].x,e[n].y);i=!0}else if(5<=arguments.length){D.beginPath(),D.moveTo(e,arguments[2]);for(n=3;n<arguments.length-1;n+=2)D.lineTo(arguments[n],arguments[n+1]);i=!0}i&&D.stroke()}},this.drawLinesI=function(t,e){if(t&&t.applyTo(this)){var i=t.width()%2/2,n=!1;if(xt(e)&&2<=e.length){for(D.beginPath(),D.moveTo(e[0].x,e[0].y),r=1;r<e.length;r++)D.lineTo(e[r].x,e[r].y);n=!0}else if(5<=arguments.length){for(var s=[],r=1,o=arguments.length;r<o;r++)s[r]=arguments[r]+i;for(D.beginPath(),D.moveTo(s[1],s[2]),r=3;r<o-1;r+=2)D.lineTo(s[r],s[r+1]);n=!0}n&&D.stroke()}},this.drawLinesArray=function(t,e){if(t&&e&&4<=e.length&&t.applyTo(this)){D.beginPath(),D.moveTo(e[0],e[1]);for(var i=1;i<e.length/2;i++)D.lineTo(e[2*i],e[2*i+1]);D.stroke()}},this.drawLinesArrayI=function(t,e){if(t&&e&&4<=e.length&&t.applyTo(this)){var i=t.width()%2/2;D.beginPath(),D.moveTo(e[0],e[1]);for(var n=1;n<e.length/2;n++)D.lineTo(e[2*n]+i,e[2*n+1]+i);D.stroke()}},this.drawCurve=function(t,e){t&&t.applyTo(this)&&(D.beginPath(),$n(D,e,0,e.length-1),D.stroke())},this.drawPolygon=function(t,e,i){var n,s,r;if(i&&1<(s=i.length)){e=e&&e.applyTo(this);if(t||e){for(D.beginPath(),D.moveTo(i[0].x,i[0].y),n=1;n<s;n++)D.lineTo(i[n].x,i[n].y);D.closePath(),t&&(r=Gn(i),t.applyTo(this,r.x,r.y,r.width,r.height))&&D.fill(),e&&D.stroke()}}},this.drawPolygonArray=function(t,e,i){var n,s,r;if(i&&2<(s=i.length)){e=e&&e.applyTo(this);if(t||e){for(D.beginPath(),D.moveTo(i[0],i[1]),s/=2,n=1;n<s;n++)D.lineTo(i[2*n],i[2*n+1]);D.closePath(),t&&(r=function(t){var e,i,n,s=t.length/2,r=t[0],o=t[1],a=r,h=o;for(e=1;e<s;e++)i=t[2*e],n=t[2*e+1],r=Math.min(r,i),o=Math.min(o,n),a=Math.max(a,i),h=Math.max(h,n);return{x:r,y:o,width:a-r,height:h-o}}(i),t.applyTo(this,r.x,r.y,r.width,r.height))&&D.fill(),e&&D.stroke()}}},this.drawRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){e=e&&e.applyTo(this);if(t||e){D.beginPath(),D.moveTo(i[0].x,i[0].y);for(var s=1,r=i.length;s<r;s++)D.lineTo(i[s].x,i[s].y);for(var o,s=n.length-1;0<=s;s--)D.lineTo(n[s].x,n[s].y);D.closePath(),t&&(o=Gn(i.concat(n)),t.applyTo(this,o.x,o.y,o.width,o.height))&&D.fill(),e&&D.stroke()}}},this.drawCurvedRange=function(t,e,i,n){var s;i&&1<i.length&&n&&1<n.length&&(e=e&&e.applyTo(this),t||e)&&(D.beginPath(),$n(D,i,0,i.length-1,!0),s=n[n.length-1],D.lineTo(s.x,s.y),$n(D,n,n.length-1,0,!1),s=i[0],D.lineTo(s.x,s.y),t&&(s=Gn(i.concat(n)),t.applyTo(this,s.x,s.y,s.width,s.height))&&D.fill(),e)&&D.stroke()},this.drawCurvedStraightRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){e=e&&e.applyTo(this);if(t||e){D.beginPath(),$n(D,i,0,i.length-1,!0);var s=n[n.length-1];D.lineTo(s.x,s.y);for(var r=n.length-2;0<=r;r--)D.lineTo(n[r].x,n[r].y);s=i[0],D.lineTo(s.x,s.y),t&&(s=Gn(i.concat(n)),t.applyTo(this,s.x,s.y,s.width,s.height))&&D.fill(),e&&D.stroke()}}},this.drawStraightCurvedRange=function(t,e,i,n){if(i&&1<i.length&&n&&1<n.length){e=e&&e.applyTo(this);if(t||e){D.beginPath();for(var s=0;s<i.length;s++)D.lineTo(i[s].x,i[s].y);var r=n[n.length-1];D.lineTo(r.x,r.y),$n(D,n,n.length-1,0,!1),r=i[0],D.lineTo(r.x,r.y),t&&(r=Gn(i.concat(n)),t.applyTo(this,r.x,r.y,r.width,r.height))&&D.fill(),e&&D.stroke()}}},this.drawText=function(t,e,i,n,s,r,o){e&&e.applyTo(this)&&(D.beginPath(),D.font=t?t.font:Hn,D.textAlign=r==Tn.CENTER?"center":r==Tn.RIGHT?"end":"start",D.textBaseline=o||"top",D.fillText(i,n,s))},this.drawTextRect=function(t,e,i,n,s,r){this.drawTextBounds(t,e,i,n.x,n.y,n.width,n.height,s,r)},this.drawTextBounds=function(t,e,i,n,s,r,o,a,h){if(i&&e&&e.applyTo(this)){var l=12,d=(D.beginPath(),t?(D.font=t.font,l=t.size):D.font=Hn,"start");if(a===Tn.CENTER?(n+=r/2,d="center"):a===Tn.RIGHT&&(n+=r,d="end"),o!=l)switch(h){case"top":break;case"bottom":s=s+o-l;break;default:s+=(o-l)/2}s+=l/2,D.textAlign=d,D.textBaseline="middle",D.fillText(i,n,s),t&&(t.underline||t.linethrough)&&(h=n,d=s,D.beginPath(),this.setStroke(e._color.value(),1),r=B(D.measureText(i).width),a===Tn.CENTER?h-=B(r/2):a===Tn.RIGHT&&(h-=r),t.underline&&(d=B(s+l/2+1)+.5,D.moveTo(h,d),D.lineTo(h+r,d)),t.linethrough&&(D.moveTo(h,s),D.lineTo(h+r,s)),D.stroke())}},this.getTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new O,e){var l=12;switch(t?(D.font=t.font,l=t.size):D.font=Hn,h.width=D.measureText(e).width,h.height=l,h.x=i,h.y=n,o===Tn.CENTER?h.x+=(s-h.width)/2:o===Tn.RIGHT&&(h.x+=s-h.width),a){case"top":break;case"bottom":h.y=h.bottom()-l;break;default:h.y+=(r-l)/2}}return h},this.drawTextRectExplicit=function(t,e,i,n,s,r){this.drawTextBoundsExplicit(t,e,i,n.x,n.y,n.width,n.height,s,r)},this.drawTextBoundsExplicit=function(t,e,i,n,s,r,o,a,h){if(i&&e){var l,d,u=r*o;if(!(isNaN(u)||u<=0)){var c="string"==typeof i?i.split(/\n|\r\n?/):i;if(c.length<=1)this.drawTextBounds(t,e,c[0],n,s,r,o,a,h);else if(e.applyTo(this)){var _,f,m,g,p=12,w=(D.beginPath(),t?(D.font=t.font,p=t.size,t.underline&&(D.font="underline "+D.font)):D.font=Hn,p+1),u=(D.textBaseline="middle",w*c.length),v=Math.min(c.length,Math.ceil(o/w));for("top"==h||o<=u||("bottom"===h?s=s+o-u:s+=(o-u)/2),_=0;_<v;_++)f="start",a===Tn.CENTER?(m=n+r/2,f="center"):a===Tn.RIGHT?(m=n+r,f="end"):m=n,g=s+w*_,g+=p/2,D.textAlign=f,t&&(t.underline||t.linethrough)&&(f=D.measureText(c[_]).width,l=m,d=B(g+p/2+1)+.5,a===Tn.CENTER?l-=B(f/2):a===Tn.RIGHT&&(l-=f),t.underline&&(D.moveTo(l,d),D.lineTo(l+f,d)),t.linethrough)&&(D.moveTo(l,g),D.lineTo(l+f,g)),D.fillText(c[_],m,g);D.stroke()}}}},this.getExplicitTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new O(i,n,0,0),e){var l="string"==typeof e?e.split(this.LINES_REG):e;if(1==l.length)return this.getTextRect(t,l[0],i,n,s,r,o,a,h);var d,u,c,e=12,t=(t?(D.font=t.font,e=t.size):D.font=Hn,e+1),e=(D.textBaseline="middle",t*l.length),_=Math.min(l.length,Math.ceil(r/t));for("top"==a||r<=e||("bottom"===a?n=n+r-e:n+=(r-e)/2),h.y=n,h.height=t*_,d=0;d<_;d++)c=l[d],c=D.measureText(c).width,u=o===Tn.CENTER?i+(s-c)/2:o===Tn.RIGHT?i+s-c:i,0==h.width?(h.x=u,h.width=c):(h.setLeft(Math.min(h.x,u)),h.setRight(Math.max(h.right(),u+c)))}return h},this.drawTextRectWrap=function(t,e,i,n,s,r){this.drawTextBoundsWrap(t,e,i,n.x,n.y,n.width,n.height,s,r)},this.drawTextBoundsWrap=function(t,e,i,n,s,r,o,a,h){if(i&&e){var l=r*o;if(!(isNaN(l)||l<=0)){var d=12,u=(t?(D.font=t.font,d=t.size):D.font=Hn,"string"==typeof i?i.split(this.LINES_REG):i);if(u.length<=1&&B(D.measureText(u[0]).width)<=r)this.drawTextBounds(t,e,u[0],n,s,r,o,a,h);else if(e.applyTo(this)){for(var c,_,f,m,g,p,w,v,C,y,x,I,b,E=d+1,R=Math.min(u.length,Math.ceil(o/E)),S=[],T=0,k=0;k<R&&T<=o;k++)if(m=0,(w="")===u[k])S.push(u[k]),T+=E,m=0,w="";else{for(""===(f=u[k].split(/(\s+)/))[0]&&f.splice(0,1),""===f[f.length-1]&&f.pop(),c=0;c<f.length&&T<=o;c++)if(g=f[c],m+(v=D.measureText(g).width)<=r)w+=null==g?"":g,m+=v;else if(w&&(S.push(w),T+=E,m=0,w=""),g=0===c?g:g.trim())if(v<=r)w=g,m=v;else for(;g&&T<=o;){for(_=2;_<=g.length;_++)if(p=g.substr(0,_),D.measureText(p).width>r){S.push(g.substr(0,_-1)),T+=E,g=g.substr(_-1);break}if(!g||1==g.length||D.measureText(g.trim()).width<=r){g.trim()&&(S.push(g),T+=E);break}}""!=w&&(S.push(w),T+=E,m=0,w="")}for(y=Math.min(S.length,Math.ceil(o/E)),T=S.length*E,D.beginPath(),D.textBaseline="middle","top"==h||o<=T||("bottom"===h?s=s+o-T:s+=(o-T)/2),k=0;k<y;k++)x="start",m=n,a===Tn.CENTER?(m+=r/2,x="center"):a===Tn.RIGHT&&(m=n+r,x="end"),C=s+E*k,C+=d/2,D.textAlign=x,t&&(t.underline||t.linethrough)&&(x=D.measureText(S[k]).width,I=m,b=B(C+d/2+1)+.5,a===Tn.CENTER?I-=B(x/2):a===Tn.RIGHT&&(I-=x),t.underline&&(D.moveTo(I,b),D.lineTo(I+x,b)),t.linethrough)&&(D.moveTo(I,C),D.lineTo(I+x,C)),D.fillText(S[k],m,C);D.stroke()}}}},this.drawTextBoundsEllipse=function(t,e,i,n,s,r,o,a,h){D.font=t?t.font:Hn;var l=D.measureText(i).width;if(r<l){var d=D.measureText("...").width;if(r<d)this.drawTextBounds(t,e,"...",n,s,r,o,a,h);else{for(var u=i.length;r-d<=l&&0<u--;)l=D.measureText(i=i.substring(0,u)).width;this.drawTextBounds(t,e,i+="...",n,s,r,o,a,h)}}else this.drawTextBounds(t,e,i,n,s,r,o,a,h)},this.getWrapTextRect=function(t,e,i,n,s,r,o,a,h){if(h?h.width=h.height=0:h=new O(i,n,0,0),e){var l=12,d=(t?(D.font=t.font,l=t.size):D.font=Hn,"string"==typeof e?e.split(/\n|\r\n?/):e);if(1==d.length&&D.measureText(d[0]).width<=s)return this.getTextRect(t,d[0],i,n,s,r,o,a,h);for(var u,c,_,f,m,g,p,w,v=l+1,C=Math.min(d.length,Math.ceil(r/v)),y=[],x=0,I=0;I<C&&x<=r;I++)if(E=0,(g="")===d[I])y.push(d[I]),x+=v,E=0,g="";else{for(""===(_=d[I].split(/(\s+)/))[0]&&_.splice(0,1),""===_[_.length-1]&&_.pop(),u=0;u<_.length&&x<=r;u++)if(f=_[u],E+(p=D.measureText(f).width)<=s)g+=null==f?"":f,E+=p;else if(g&&(y.push(g),x+=v,E=0,g=""),f=0===u?f:f.trim())if(p<=s)g=f,E=p;else for(;f&&x<=r;){for(c=2;c<=f.length;c++)if(m=f.substr(0,c),D.measureText(m).width>s){y.push(f.substr(0,c-1)),x+=v,f=f.substr(c-1);break}if(!f||1==f.length||D.measureText(f.trim()).width<=s){f.trim()&&(y.push(f),x+=v);break}}""!=g&&(y.push(g),x+=v,E=0,g="")}for(w=Math.min(y.length,Math.ceil(r/v)),x=y.length*v,"top"==a||r<=x||("bottom"===a?n=n+r-x:n+=(r-x)/2),h.y=n,h.height=x,I=0;I<w;I++){var b=D.measureText(y[I]).width,E=o===Tn.CENTER?i+(s-b)/2:o===Tn.RIGHT?i+s-b:i;0==h.width?(h.x=E,h.width=b):(h.setLeft(Math.min(h.x,E)),h.setRight(Math.max(h.right(),E+b)))}}return h},this.drawTextRectA=function(t,e,i,n,s){this.drawTextBoundsA(t,e,i,n.x,n.y,n.width,n.height,s)},this.drawTextBoundsA=function(t,e,i,n,s,r,o,a){e&&e.applyTo(this)&&(D.beginPath(),D.font=t?t.font:Hn,D.save(),D.translate(n+r/2,s+o/2),D.rotate(a),D.textAlign="center",D.textBaseline="middle",D.fillText(i,0,0),D.restore())},this.getTextWidth=function(t,e){return e?(D.font=t?t.font:Hn,D.measureText(e).width):0},this.getLinesWidth=function(t,e){D.font=t?t.font:Hn;var i=e.split(/\n|\r\n?/),n=i.length;if(n<=1)return D.measureText(e).width;for(var s=D.measureText(i[0]).width,r=1;r<n;r++)s=Math.max(D.measureText(i[0]).width);return s},this.drawImage=function(t,e,i,n,s,r,o,a,h){try{D.drawImage.apply(D,arguments)}catch(t){}},this.drawImageI=function(t,e,i,n,s,r,o,a,h){arguments[1]=Math.floor(arguments[1]),arguments[2]=Math.floor(arguments[2]);try{D.drawImage.apply(D,arguments)}catch(t){}},this.aL=function(t,e,i,n,s,r,o,a,h){try{D.drawImage.apply(D,arguments)}catch(t){}}}var vn={},Cn=0,yn=Image,xn=!0,In=e("UIContainer",le,{init:function(t,e){if(this._super(),this.$_dom=(t=!!t)?vn:null,this.$_rich=!t,!e)throw"container is null!";if(e instanceof HTMLDivElement?this._containerDiv=e:this._containerDiv=document.getElementById(e),!this._containerDiv)throw"Invalid grid container element: "+e;this._canvas=this._container=document.createElement("div"),this._containerDiv.appendChild(this._container),this._container.style.position="relative",this._container.style.width="100%",this._container.style.height="100%",this._container.style.borderStyle="none",this._container.style.borderWidth="0px",this._container.style.overflow="hidden",this._container.style["-webkit-touch-callout"]="none",this._container.style["-webkit-user-select"]="none",this._container.style["user-select"]="none",this._container.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";t=this._container.getBoundingClientRect();this._width=parseInt(t.width),this._height=parseInt(t.height),this._updateRequested=!1,this._layoutNeeded=!1,this._invalidated=!1,this._defaultTool=new os(this),this._activeTool=this._defaultTool,this._captured=!1,this._focusing=!1,this._focusingTarget=null,this._hovered=null,this._currentX=0,this._currentY=0,this._rendered=0,this._defaultCursor=rs.AUTO,this._drawing=!1,this._offsetX=0,this._offsetY=0,this._clicked=0,this._clicket=0,this._children=[],this._rootElement=this._createRootElement(this.$_dom),this._containerRender=this._render.bind(this),this._eventHandlers={},this._eventNodes=[],this.$_prepareContextMenu(),this._popupMenuManager=new Sn(this).addListener(this),this._contextMenu=null,this.onContextMenuItemClicked=null},_registerEventHandlers:function(t){t.style.cursor=this._defaultCursor,W.addEventListener&&(this.$_addListener(W,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(W,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(W,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(W,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(W,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(W,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(t,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(t,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(t,"keypress",this._keyPressHandler.bind(this),!1),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),Qi?this.$_addListener(t,"DOMMouseScroll",this._mouseScrollHandler.bind(this),!1):sn?this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!1):this.$_addListener(t,"mousewheel",this._mouseWheelHandler.bind(this),!1),xn)&&(t.addEventListener("touchstart",this._touchStartHandler.bind(this),!1),t.addEventListener("touchmove",this._touchMoveHandler.bind(this),!1),t.addEventListener("touchend",this._touchEndHandler.bind(this),!1),t.addEventListener("touchcancel",this._touchCancelHandler.bind(this),!1),t.addEventListener("touchleave",this._touchLeaveHandler.bind(this),!1))},$_addListener:function(t,e,i,n){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,n]),t.addEventListener(e,i,n),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},$_removeListener:function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var n=i[e],s=n.length;s--;){var r=n[s];t.removeEventListener(e,r[0],r[1])}}},$_removeListenerAll:function(t){for(var e=t?[t]:this._eventNodes,i=0,n=e.length;i<n;i++){var s=e[i];if(s in this._eventHandlers){var r,o=this._eventHandlers[s];for(r in o)for(var a=o[r],h=a.length;h--;){var l=a[h];s.removeEventListener(r,l[0],l[1])}}}},destroy:function(){this._destroying=!0,this.$_removeListenerAll(),this._currentX=this._currentY=null,E.clearElements(this._container),this._container.addEventListener&&this._container.removeEventListener("contextmenu",this.$_contextMenuHandler),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this.$_contextMenuHandler=null,this._container=null,this._containerRender=null,this._clicket=null,this._eventHandlers=null,this._eventNodes=null,this._super()},containerElement:function(){return this._container},isVisible:function(){return"hidden"!=this._container.style.visibility},setVisible:function(t){this._container.style.visibility=t?"visible":"hidden"},width:function(){return this._width},height:function(){return this._height},defaultTool:function(){return this._defaultTool},setDefaultTool:function(t,e){return this._defaultTool=t,e&&t&&this.setActiveTool(t),this},activeTool:function(){return this._activeTool},setActiveTool:function(t){return t!==this._activeTool&&(this._activeTool&&this._activeTool.deactivate(),this._activeTool=t,this._activeTool)&&this._activeTool.activate(),this},mouseX:function(){return this._currentX},mouseY:function(){return this._currentY},popupMenuManager:function(){return this._popupMenuManager},contextMenu:function(){return this._contextMenu},setContextMenu:function(t){t!=this._contextMenu&&(t instanceof En?this._contextMenu=t:this._contextMenu=t?new En("gridContextMenu",this,t):null)},addChild:function(t){return t&&this._children.indexOf(t)<0&&(this._children.push(t),t.attached(this)),t},removeChild:function(t){var e;t&&0<=(e=this._children.indexOf(t))&&(this._children.splice(e,1),t.detached())},addElement:function(t,e){return this._rootElement.addElement(t,e)},removeElement:function(t){this._rootElement.removeElement(t)},findElementAt:function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},setFocus:function(){this._setFocusAndScroll(this._canvas)},updateNow:function(){this._render(pt())},invalidateLayout:function(){this._layoutNeeded=!0,this.invalidate(!0)},invalidate:function(t){this._updateRequested&&this._invalidated||!t&&this._drawing||(window.requestAnimationFrame(this._containerRender),this._updateRequested=!0,this._invalidated=!0)},setCursor:function(t){this._canvas.style.cursor=t||this._defaultCursor},_createChildren:function(t){},_layoutChildren:function(t){},_createRootElement:function(t){return null},_render:function(t){if(!this._destroying){this._updateRequested=!1,this._offsetX=this._canvas.offsetLeft,this._offsetY=this._canvas.offsetTop;for(var e=this._canvas.offsetParent;e;)this._offsetX+=e.offsetLeft,this._offsetY+=e.offsetTop,e=e.offsetParent;this._drawing=!0;try{this.$$_render(t,null,0,0),this._resetSizeCallback&&(this._resetSizeCallback(),delete this._resetSizeCallback)}finally{this._drawing=!1,this._invalidated=!1,this._afterRender()}}},$$_render:function(t,e,i,n){},_afterRender:function(){},_setFocusAndScroll:function(t){if(t)if(this._focusing)t!=this._focusingTarget&&(t.setFocus?t.setFocus():t instanceof HTMLCanvasElement||t.focus({preventScroll:!0}));else{this._focusing=!0,this._focusingTarget=t;try{t.setFocus?t.setFocus():t instanceof HTMLCanvasElement||t.focus({preventScroll:!0})}catch(t){}finally{this._focusing=!1,this._focusingTarget=null}}},checkClicked:function(t,e){var i;tt&&(t=this._width-t,e=this._height-e,i=gt(),t<3&&e<3&&(i<this._clicket+300?(this._clicked++,3==this._clicked&&alert(this)):this._clicked=0),this._clicket=i)},toOffset:function(t){var e=this._canvas.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},toScreen:function(t){return t.x+=this._offsetX,t.y+=this._offsetY,t},$_prepareContextMenu:function(){this.$_contextMenuHandler=function(t){var e,i,n=this._contextMenu;n||(e=this.onGetContextMenu)&&(e=e(this,t.offsetX,t.offsetY))&&0<e.length&&(n=new En("gridContextMenu",this,e)),n&&(t.preventDefault(),e=(t.target||t.srcElement).getBoundingClientRect(),i=t.clientX-e.left,t=t.clientY-e.top,this._popupMenuManager.showContext(n,i,t))}.bind(this),it?this._container.addEventListener("contextmenu",this.$_contextMenuHandler):this._container.attachEvent("contextmenu",this.$_contextMenuHandler)},_resizeHandler:function(t){},_keyDownHandler:function(t){this._activeTool&&(Zi&&t.metaKey||(Zi||t.ctrlKey),this._activeTool.keyDown(t.keyCode,t.ctrlKey,t.shiftKey,t.altKey,t))},_keyUpHandler:function(t){this._activeTool&&(Zi&&t.metaKey||(Zi||t.ctrlKey),this._activeTool.keyUp(t.keyCode,t.ctrlKey,t.shiftKey,t.altKey,t))},_keyPressHandler:function(t){this._activeTool&&this._activeTool.keyPress(t.keyCode,t)},_clickHandler:function(t){this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this._activeTool&&this._activeTool.click(this.toOffset(t))},_dblclickHandler:function(t){this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this._activeTool&&this._activeTool.dblclick(this.toOffset(t))},_mouseDownHandler:function(t){this._popupMenuManager.close(),t.target===this._canvas&&(Q!=this._gridView&&ut(this._gridView),this._canvas.setAttribute("tabindex","0"),this._captured=!0,this.checkClicked(t.clientX-this._offsetX,t.clientY-this._offsetY),this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._activeTool&&this._activeTool.mouseDown(t),!sn||this._activeTool&&!this._activeTool.isEditing()||Wt(t))},_mouseMoveHandler:function(t){var e,i,n=this._hovered;this._captured||t.target===this._canvas?(this.toOffset(t),i=t.mouseX,e=t.mouseY,i==this._currentX&&e==this._currentY||(this._currentX=i,this._currentY=e,i=this.findElementAt(i,e,!0),this._activeTool&&this._activeTool.isDragging())||i&&i.canHover()&&i!=this._hovered&&(n&&(n.setHovered(!1),n instanceof Pa)&&(n.invalidate(),i instanceof Pa||n._owner.invalidate()),this._hovered=i,this._hovered)&&this._hovered._mouseEnabled&&(this._hovered.setHovered(!0),this._hovered instanceof Pa)&&this._hovered.invalidate(),this._activeTool&&this._activeTool.mouseMove(t)):(n&&(n.setHovered(!1),n instanceof Za&&n.invalidate(!0,!0),this._hovered=null),this._activeTool&&this._activeTool.mouseOutside())},_mouseUpHandler:function(t){(this._captured||t.target===this._canvas)&&(this._captured=!1,this._activeTool)&&this._activeTool.mouseUp(this.toOffset(t))},_mouseEnterHandler:function(t){this._activeTool&&this._activeTool.mouseEnter(this.toOffset(t))},_mouseLeaveHandler:function(t){this._activeTool&&this._activeTool.mouseLeave(this.toOffset(t))},_mouseOverHandler:function(t){this._activeTool&&this._activeTool.mouseLeave(this.toOffset(t))},_mouseWheelHandler:function(t){this._activeTool&&this._activeTool.mouseWheel(this.toOffset(t))&&Wt(t)},_mouseScrollHandler:function(t){this._activeTool&&(t.wheelDelta=-t.detail,this._activeTool.mouseWheel(this.toOffset(t)))&&Wt(t)},_wheelHandler:function(t){this._activeTool&&(t.wheelDelta=0!=t.deltaY?-t.deltaY:-t.deltaX,this._activeTool.mouseWheel(this.toOffset(t)))&&Wt(t)},_focusHandler:function(t){},_blurHandler:function(t){},_focusinHandler:function(t){_t("focusin to "+t.target),t.target!==this._canvas||this._gridView._exiting||_e()||!this._activeTool||this._activeTool.setFocus()},_focusHandlerFireFox:function(t){_t("focus to "+t.target);var e=this._gridFocused,i=t.target,n=this._gridView;i.nodeType&&n.containElement(i)&&(this._gridFocused=!0),t.target!==this._canvas||this._gridView._exiting||_e()||!this._activeTool||this._activeTool.setFocus(),this._gridFocused&&!!e!=!!this._gridFocused&&n&&n._fireGridFocusChanged(this._gridFocused,t)},_focusoutHandler:function(t){_t("focusout from "+t.target);var e=t.target,i=t.relatedTarget,n=this.gridView(),s=!!this._gridFocused,e=n.containElement(e);e&&n.containElement(i)||(i=!i||!i.nodeType,(e||i)&&(this._gridFocused=!1),this._gridFocused)||s==!!this._gridFocused||n&&n._fireGridFocusChanged(this._gridFocused,t)},_touchStartHandler:function(t){this._activeTool&&this._activeTool.touchStart(t)},_touchMoveHandler:function(t){this._activeTool&&this._activeTool.touchMove(t)},_touchEndHandler:function(t){this._activeTool&&this._activeTool.touchEnd(t)},_touchCancelHandler:function(t){this._activeTool&&this._activeTool.touchCancel(t)},_touchLeaveHandler:function(t){this._activeTool&&this._activeTool.touchEnd(t)},onMenuItemClick:function(t){this.onContextMenuItemClicked&&this.onContextMenuItemClicked(this,t),this.fireEvent(In.CONTEXT_MENU_ITEM_CLICKED,t)}}),bn=e("PopupMenuItem",null,{init:function(t,e){this._super(),this._parent=t,this._children=null,e&&this.assign(e)},visible:!0,enabled:!0,label:null,type:null,group:null,checked:!(In.CONTEXT_MENU_ITEM_CLICKED="onUIContainerContextMenuItemClicked"),tag:I,children:null,callback:null,parent:function(){return this._parent},setChildren:function(t){},isSeparator:function(){return"-"==this._label||this._type==Bs.SEPARATOR},getData:function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this._tag}},click:function(){"check"==this._type&&(this._checked=!this._checked),this._parent._itemClicked(this)}}),En=e("PopupMenu",le,{init:function(t,e,i){this._super(),this._name=t,this._parent=e,this._items=this._load(i)},destroy:function(){this._super()},visible:!0,enabled:!0,name:null,label:null,manager:function(){for(var t=this._parent;t;){if(t.popupMenuManager&&t.popupMenuManager()instanceof Sn)return t.popupMenuManager();if(t instanceof Sn)return t;t=t._parent}return null},items:function(){return this._items},count:function(){return this._items?this._items.length:0},isDescendant:function(t){for(var e=t;e;){if(e==this)return!0;e=e._parent}return!1},_load:function(t){var e=[];if(t){t=bt(t);for(var i=0;i<t.length;i++){var n,s=t[i];k(s.children)&&0<s.children.length?((n=new En(null,this,s.children))._parent=this,n._label=s.label,n._callback=s.callback,e.push(n)):(n=new bn(this,s),e.push(n))}}return e},_itemClicked:function(t){if(t.parent()==this&&"radio"==t.type()){var e=t.group();if(e){for(var i=0;i<this._items.length;i++){var n=this._items[i];n instanceof bn&&"radio"==n.type()&&n.group()==e&&n.setChecked(!1)}t.setChecked(!0)}}var s=this.manager()._popupIndex;"function"==typeof t.callback()?t.callback()(t.proxy(),s.proxy()):this._parent instanceof Sn?this._parent._doMenuItemClick(t,s):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,s):this._parent._itemClicked(t)}}),Rn=(En.CLICKED="onPopupMenuClicked",e("PopupMenuView",le,{init:function(t){this._super(),this._container=t,this._useCssStyle=t._gridView instanceof T&&(t._gridView._editorOptions._useCssStyle||t._gridView._editorOptions._useCssStylePopupMenu),this._containerElement=null,this._parentView=null,this._dom=new E(this._element=this._createElement(this._useCssStyle)),this._element.addEventListener("contextmenu",function(t){t.preventDefault()}),this._currDiv=null,this._menu=null,this._childView=null,this._showing=!1,this._timer=void 0,this._viewGridInside=!1},minWidth:0,maxWidth:0,itemIndex:-1,destroy:function(){},manager:function(){return this._menu.manager()},show:function(t,e,i,n,s,r,o){if(!this._showing){this._showing=!0;try{this._containerElement=t,this._parentView=e,this._firstItem=null;for(var a,h,l,d,u=(this._menu=i)._parent;u._parent&&!(u instanceof T);)u=u._parent;u&&u instanceof T?this._viewGridInside=u._editorOptions._viewGridInside:u&&u instanceof Sn&&(this._viewGridInside=u._container._gridView._editorOptions._viewGridInside),(i._parent instanceof T||i._parent instanceof Sn)&&(this._targetView?this.manager()._popupIndex=this._targetView.index():(h=(a=this.manager()._container)._gridView,l=$.temp(h,-1,null).clone(),h._layoutManager.mouseToIndex(a._currentX,a._currentY,l),-1===l.itemIndex()?(d=a.findElementAt(n,s))&&d instanceof Za&&l.setColumn(d.column()):this._targetView&&this._targetView.column&&(l._column=this._targetView.column()),this.manager()._popupIndex=l)),this.$_show(t,this._menu,n,s,r,o)}finally{this._showing=!1}}},$_show:function(t,e,i,n,s,r){var o,a,h,l=this._element,d=this.manager().dropdownCount(),u=this._viewGridInside?t:z.documentElement;l&&(this._menu=e,this._itemIndex=-1,this._dom.clearChildren(),this.$_buildItems(e),this._disableSelection(l),u.appendChild(l),u=e.items().length,d&&d<u?(u=(e=window.getComputedStyle(this._firstItem))&&parseInt(e.height.replace("px","")))&&!isNaN(u)&&(o=parseInt(e.marginTop.replace("px","")),a=parseInt(e.paddingTop.replace("px","")),o=isNaN(o)?0:o,a=isNaN(a)?0:a,h=parseInt(e.marginBottom.replace("px","")),e=parseInt(e.paddingBottom.replace("px","")),h=isNaN(h)?0:h,e=isNaN(e)?0:e,l.style.overflow="auto",l.style.height=(u+o+a+e)*d+8+h+"px"):(l.style.overflow="hidden",this._element.style.removeProperty("height")),u=fn(),o=dn||un?E.getBounds(z.body):E.getBounds(z.documentElement),a=E.getBounds(t),e=u.width,d=u.height,h=this._dom.getBounds(),l=window.pageXOffset||z.documentElement.scrollLeft,t=window.pageYOffset||z.documentElement.scrollTop,document.documentElement.scrollWidth>document.documentElement.clientWidth&&(d-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(e-=18),this._viewGridInside?(n+a.top+h.height>a.bottom&&(n=this._parentView?a.bottom-h.height-a.top-3:n-h.height-r),i+a.left+h.width>a.right&&(i=this._parentView?a.right-h.width-a.left-3:i-h.width-s)):(this._parentView||(i+=a.left-o.left,n+=a.top-o.top),n+h.height>=d+t-3&&(n=n-h.height-3)<0&&(n=Math.max(0,d-h.height-3)),i+h.width>=e+l-3?i=Math.max(0,e-h.width-3):void 0!==s&&h.width<s&&(i+=s-h.width)),this._dom.move(Math.max(0,i),Math.max(0,n)))},hide:function(t){t&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),(t=this._element)&&t.parentNode&&(this._viewGridInside?this._containerElement:z.documentElement).removeChild(t))},_createElement:function(t){var e=E.createElement("div",{position:"absolute",float:"none",minWidth:"60px",overflow:"hidden",zIndex:3e3});return t||E.setStyles(e,{background:"rgb(233, 233, 233)",border:"1px solid rgb(200, 200, 200)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"4px",margin:"0px"}),t?e.className="rg-popup-menu":E.setStyles(e,{boxSizing:"border-box"}),e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),e},_showChild:function(t){var e,i;this!=this.manager()._showingView||this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t||(this.$_hideChildView(),e=t.menuItem,i=this._element.getBoundingClientRect(),i=this._element.offsetLeft+i.width-4,t=this._element.offsetTop+t.offsetTop-this._element.scrollTop,this._childView=Rn._borrowView(this._container),this._childView.show(this._containerElement,this,e,i,t))},$_hideChildView:function(){if(this.manager()._showingView=null,this._childView){this._childView.$_hideChildView();var t=this._viewGridInside?this._containerElement:z.documentElement;try{this._childView._element&&t.removeChild(this._childView._element)}catch(t){}Rn._returnView(this._childView),this._childView=null}},hideChild:function(){this.$_hideChildView()},_disableSelection:function(t){t.style.WebkitUserSelect="none",t.style.MozUserSelect="none",t.style.KhtmlUserSelect="none",t.style.MsUserSelect="none",void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},_menuItemActived:function(t){var e=(this._currDiv=t).menuItem;this.manager()._showingView=this.manager()._activeView=t.menuView,e instanceof bn?(!e.isEnabled()||this._useCssStyle||e.isSeparator()||(t.style.background="rgba(0, 255, 0, 0.2)"),t.menuView&&t.menuView._childView&&t.menuView.$_hideChildView()):(e.isEnabled()&&!this._useCssStyle&&(t.style.background="rgba(0, 255, 0, 0.2)"),this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t.menuView._showChild(t)},200))},_menuItemDeactived:function(t){this._useCssStyle||(t.style.background="")},_menuItemClicked:function(t){var e=t.menuItem;e instanceof En?e.isEnabled()&&this._showChild(t):e?(this._container._canvas.focus({preventScroll:!0}),this.hide(!0),e.isEnabled()&&e.click(),this.manager().close()):this.$_hideChildView()},changeItemIndex:function(t){var e,i=this._itemIndex,n=this._menu,s=n&&n._items;if(0==t)this._itemIndex=-1,this.$_refreshItems(this._itemIndex);else if(s&&!(i>=s.length)){for(;;)if(!(e=s[i+=t])||e.isEnabled()&&(!e.isSeparator||!e.isSeparator()))break;e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},menuItemClicked:function(){var t=this._element.childNodes[this._itemIndex];t&&this._menuItemClicked(t)},$_refreshItems:function(t){for(var e=this._element,i=(this._menu.items(),0),n=e.childNodes.length;i<n;i++){var s,r,o,a,h=e.childNodes[i];h.style.background=i===t?"rgba(0,255,0,0.2)":"",i==t&&(0<this.manager().dropdownCount()&&(s=h.offsetTop,r=parseInt(h.offsetHeight)+4,o=parseInt(e.offsetHeight),s<(a=e.scrollTop)?e.scrollTop=Math.max(0,e.scrollTop+(s-a)):a+o<s+r&&(e.scrollTop=e.scrollTop+s+r-(a+o))),this._menuItemActived(h))}},$_buildItems:function(t){for(var e=t.items(),i=[],n=0,s=e.length;n<s;n++){var r,o,a,h=e[n];h.isVisible()&&((r=z.createElement("div")).menuView=this,r.menuItem=h,r.tabIndex=-1,E.setStyles(r,{position:"relative",float:"none",width:"100%"}),this._useCssStyle||E.setStyles(r,{paddingTop:"2px",paddingBottom:"2px",cursor:"default"}),h instanceof bn&&h.isSeparator()?(this._useCssStyle&&(r.className="rg-popup-separator"),o=z.createElement("hr"),this._useCssStyle||E.setStyles(o,{height:"1px",border:"0px",margin:"2px",color:"#777",backgroundColor:"#777"}),this._useCssStyle&&(o.className="rg-popup-separator-hr"),r.appendChild(o),r.onmouseover=function(t){t=t.currentTarget;this._menuItemActived(t)}.bind(this)):(this._firstItem||(this._firstItem=r),i.length=0,this._useCssStyle||(r.style.color=h.isEnabled()?"#333":"#aaa"),this._useCssStyle&&i.push("rg-popup-item"),this._useCssStyle&&h.group&&h.group()&&i.push("rg-popup-"+h.group()),this._useCssStyle&&!h.isEnabled()&&i.push("rg-popup-item-disable"),this._useCssStyle&&(r.className=i.join(" ")),r.style.whiteSpace="pre",r.onclick=function(t){t=t.currentTarget;this._menuItemClicked(t)}.bind(this),r.onmouseover=function(t){t=t.currentTarget;this._menuItemActived(t)}.bind(this),r.onmouseout=function(t){t=t.currentTarget;this._menuItemDeactived(t)}.bind(this),o=z.createElement("span"),i.length=0,o.style.display="inline-block",o.style.minWidth="20px",o.style.minHeight="7px",o.style.verticalAlign="middle",o.style.outline="none",o.innerHTML="",this._useCssStyle&&h.type&&("radio"===h.type()||"check"===h.type())&&i.push(h.group()?"rg-popup-radio":"rg-popup-check"),h.isChecked&&h.isChecked()&&(this._useCssStyle||E.setStyles(o,{backgroundImage:"url("+Y+X+(h.group()?"menu_radio.png":"menu_check.png")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),this._useCssStyle)&&i.push(h.group()?"rg-popup-radio-checked":"rg-popup-check-checked"),this._useCssStyle&&(o.className=i.join(" ")),this._disableSelection(o),r.appendChild(o),(a=z.createElement("span")).id="$popupMenu_item_"+Rn.$_menuId++,a.style.paddingRight="24px",a.innerHTML=h.label(),a.style.outline="none",this._disableSelection(a),r.appendChild(a),h instanceof En&&(a=z.createElement("span"),this._useCssStyle&&(a.className="rg-popup-expander"),r.appendChild(a),a.style.position="absolute",a.style.right="0px",a.style.width="24px",a.style.height="17px",a.style.verticalAlign="middle",a.style.outline="none",a.innerHTML=" ",this._useCssStyle||E.setStyles(a,{backgroundImage:"url("+Y+X+"menu_expander.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),a.tabIndex=-1,this._disableSelection(a),r.appendChild(a))),this._disableSelection(r),this._element.appendChild(r),0)}}},{$_menuId:0,$_views:[],_borrowView:function(t){var e=Rn.$_views.pop();return e?e._container=t:e=new Rn(t),e},_returnView:function(t){if(t._children)for(var e=0;e<t._children.length;e++)Rn.returnView(t[e]);Rn.$_views.push(t)}})),Sn=e("PopupMenuManager",le,{init:function(t){this._super(),this._container=t,this._menus=[],this._mainView=null,this._showingView=null,this._popupIndex=null,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._mainView._element||e.menuItem)return;e=e.parentNode}this.close()}.bind(this)},destroy:function(){this.close(),this._destroying=!0,this._mainView=null,this._showingView=null,this._popupIndex=null,this._showingView=null,this._activeView=null,this._super()},dropdownCount:0,isShow:function(){return!!this._mainView},indexOf:function(t){for(var e=this._menus.length;e--;)if(Ct(this._menus[e].name(),t))return e;return-1},getMenu:function(t){for(var e=this._menus.length;e--;)if(Ct(this._menus[e].name(),t))return this._menus[e];return null},addMenu:function(t,e,i){if(yt(t))throw"Menu name is empty.";var n=-1;return!i&&0<=(n=this.indexOf(t))?this._menus[n]:(t=new En(t,this,e),i&&-1<n?this._menus[n]=t:this._menus.push(t),t)},removeMenu:function(t){t=this.indexOf(t);0<=t&&this._menus.splice(t,1)},clearMenus:function(){this._menus.length=0},show:function(t,e,i,n,s,r){var o,a,h,l;this._mainView||("string"==typeof t?t=this.getMenu(t):t instanceof En||(t=new En(null,this,t)),t&&(r=null!=i&&null!=n?(s=isNaN(s=parseInt(s))?0:s,isNaN(r=parseInt(r))?0:r):(l=(o=e.boundsByContainer()).top(),l=e instanceof Xh&&(a=(h=e.grid()).layoutManager(),0<=(h=e.index().I()+e.innerIndex()-h.topItem()+h.fixedOptions().rowCount()))?(h=a.itemBounds(h),a.bodyBounds().top()+h.bottom()):o.bottom(),i=o.x,n=l,s=o.width,o.height),this._mainView=this._activeView=Rn._borrowView(this._container),this._mainView._targetView=e,this._mainView.show(this._container._container,null,t,i,n,s,r),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler)))},showContext:function(t,e,i){t&&!this._mainView&&(this._mainView=this._activeView=Rn._borrowView(this._container),this._mainView.show(this._container._container,null,t,e,i,0,0),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler))},close:function(){this._mainView&&(this._mainView.hide(),Rn._returnView(this._mainView),delete this._mainView._targetView,this._mainView=null,it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler))},containElement:function(t){if(this._activeView)return this._activeView._element.contains(t)},_doMenuItemClick:function(t,e){this.fireEvent(Sn.MENU_ITEM_CLICKED,t,e)},_doKeyDown:function(t){var e=this._activeView;switch(t){case p.DOWN:e.changeItemIndex(1);break;case p.UP:e.changeItemIndex(-1);break;case p.LEFT:e._parentView&&(e.changeItemIndex(0),e.hideChild(),this._showingView=this._activeView=e._parentView||this._mainView);break;case p.RIGHT:e&&e._childView&&(e=this._showingView=this._activeView=e._childView).changeItemIndex(1);break;case p.ENTER:case p.SPACE:e.menuItemClicked()}},keyDown:function(t){this._doKeyDown(t)}}),Tn=(Sn.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",t({LEFT:"left",CENTER:"center",RIGHT:"right"})),kn=t({TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"}),Dn=(t({NONE:"none",NORMAL:"normal"}),t({CIRCLE:"circle",TRIANGLE:"triangle",SQUARE:"square",DIAMOND:"diamond"}),t({VISIBLE:"visible",HIDDEN:"hidden",COLLAPSED:"collapsed"}),t({DEFAULT:"default",FAR:"far",MID:"mid",NEAR:"near"}),t({HORIZONTAL:"horizontal",VERTICAL:"vertical"})),O=(t({DEFAULT:"default",LEFT:"left",CENTER:"center",RIGHT:"right",FILL:"fill"}),t({DEFAULT:"default",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",FILL:"fill"}),t({NONE:"none",JUSTIFY:"justify"}),function(t,e,i,n){null==t?this.x=this.y=this.width=this.height=0:(this.x=t,this.y=e,this.width=i,this.height=n)}),Bn=(O.prototype={constructor:O,clone:function(){return new O(this.x,this.y,this.width,this.height)},getInner:function(){return new O(0,0,this.width,this.height)},equals:function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},toString:function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},left:function(){return this.x},setLeft:function(t){t-=this.x;this.x+=t,this.width-=t},leftBy:function(t){return this.x+=t,this.width-=t,this},right:function(){return this.x+this.width},setRight:function(t){t-=this.x+this.width;this.width+=t},rightBy:function(t){return this.width+=t,this},top:function(){return this.y},setTop:function(t){t-=this.y;return this.y+=t,this.height-=t,this},topBy:function(t){return this.y+=t,this.height-=t,this},bottom:function(){return this.y+this.height},setBottom:function(t){t-=this.y+this.height;return this.height+=t,this},bottomBy:function(t){return this.height+=t,this},shrink:function(t,e){return this.width-=t,this.height-=e,this},expand:function(t,e){return this.width+=t,this.height+=e,this},contains:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},isEmpty:function(){return 0===this.width||0===this.height},setEmpty:function(){return this.width=this.height=0,this},set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},copyHorz:function(t){return this.x=t.x,this.width=t.width,this},copyVert:function(t){return this.y=t.y,this.height=t.height,this},inflate:function(t,e,i,n){return e=1<arguments.length?e:0,i=2<arguments.length?i:t,n=3<arguments.length?n:e,t&&this.setLeft(this.x-t),e&&this.setTop(this.y-e),i&&this.setRight(this.right()+i),n&&this.setBottom(this.bottom()+n),this},offset:function(t,e){return this.x+=t,this.y+=e,this},round:function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},union:function(t){var e=this.clone();return e.setLeft(Math.min(this.x,t.x)),e.setRight(Math.max(this.right(),t.right())),e.setTop(Math.min(this.y,t.y)),e.setBottom(Math.max(this.bottom(),t.bottom())),e},normalize:function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this}},l.EMPTY=new l,l.empty=function(){return new l},l.create=function(t,e){return new l(t,e)},l.prototype={constructor:l,clone:function(){return new l(this.width,this.height)},equals:function(t){return t===this||t&&this.width===t.width&&this.height===t.height},toString:function(){return"{width: "+this.width+", height: "+this.height+"}"},isEmpty:function(){return 0===this.width||0===this.height},setEmpty:function(){return this.width=this.height=0,this},set:function(t,e){return this.width=t,this.height=e,this},round:function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t}},mn.EMPTY=new mn,mn.empty=function(){return new mn},mn.create=function(t,e){return new mn(t,e)},mn.prototype={constructor:l,clone:function(){return new mn(this.x,this.y)},equals:function(t){return t===this||t&&this.width===t.width&&this.height===t.height},toString:function(){return"{x: "+this.x+", y: "+this.y+"}"},isEmpty:function(){return 0===this.x||0===this.y},setEmpty:function(){return this.x=this.y=0,this},set:function(t,e){return this.x=t,this.y=e,this},round:function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t}},gn.prototype={constructor:gn,clone:function(){return new gn(this._size,this._fixed)},getSize:function(t){return this._fixed?this._size:t*this._size}},gn.Empty=new gn(0,!1),gn.createFrom=function(t){var e,i=0,n=!1;return t&&0<(e=(t=String(t).trim()).length)&&(2<e&&t.lastIndexOf("px")==e-2&&(n=!0,t=t.substr(0,e-3)),t)&&(i=parseFloat(t)),new gn(i,n)},gn.equals=function(t,e){return t instanceof gn&&e instanceof gn&&t._size===e.size&&t._precentage===e._precentage},pn.prototype={constructor:pn,clone:function(){return new pn(this._size,this._fixed)},getSize:function(t,e){return this._fixed?this._size:t*this._size/(e||100)}},pn.Empty=new pn(0,!0),pn.createFrom=function(t){var e,i=0,n=!0;return t&&0<(e=(t=String(t).trim()).length)&&(1<e&&t.lastIndexOf("%")==e-1&&(n=!1,t=t.substr(0,e-1).trim()),t)&&(i=parseFloat(t)),new pn(i,n)},pn.equals=function(t,e){return t instanceof pn&&e instanceof pn&&t._size===e.size&&t._precentage===e._precentage},(_._ERROR=new _(I,!0)).error=!0,_.createFrom=function(t,e){t=_._parse(t,Bn,e,!1);return t?"object"==typeof t?t:Bn.clone():null},_._parse=function(t,e,i,n){if(r=String(t)){var s,r,o=r.length;if("#"==(r=r.trim().toLowerCase()).charAt(0))if(r=r.substr(1),6<=--o&&o<=8)e._b=Mt(r.substr(o-2,2),16),e._g=Mt(r.substr(o-4,2),16),e._r=Mt(r.substr(o-6,2),16),e._a=6==o?i?NaN:1:Mt(r.substr(0,o-6),16)/255;else{if(3!=o){if(n)throw"Invalid color value text: "+t;return!1}e._r=Mt(r.charAt(0)+r.charAt(0),16),e._g=Mt(r.charAt(1)+r.charAt(1),16),e._b=Mt(r.charAt(2)+r.charAt(2),16),e._a=i?NaN:1}else if(0==r.indexOf("rgba(")&&")"==r.charAt(o-1))s=(r=r.substring(5,o-1)).split(","),e._r=Mt(s[0]),e._g=Mt(s[1]),e._b=Mt(s[2]),e._a=s[3];else{if(0!=r.indexOf("rgb(")||")"!=r.charAt(o-1)){if(i&&Fn.hasOwnProperty(r))return Fn[r];if(!i&&Mn.hasOwnProperty(r))return Mn[r];var a=Nn.createFrom(r,!1);if(a)return a;if(n)throw new Error("Invalid color text: "+t);return!1}s=(r=r.substring(4,o-1)).split(","),e._r=Mt(s[0]),e._g=Mt(s[1]),e._b=Mt(s[2]),e._a=i?NaN:1}return!0}return!1},_.getColorStringArray=function(t){return t.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},_.getColorCsvArray=function(t){return t.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},_.prototype.clone=function(){return new _(this)},_.prototype.copy=function(t,e){return t?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=isNaN(t._a)?Number(e):t._a):this._a=Number(e),this},_.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},_.prototype.valueWithBrightness=function(t){var e=this._r,i=this._g,n=this._b,t=Number(t);return isNaN(t)||1==t||(e=m(Math.max(0,Math.min(255,e*t))),i=m(Math.max(0,Math.min(255,i*t))),n=m(Math.max(0,Math.min(255,n*t))),255==e&&this._r<255&&(e=m((255+this._r)/2)),255==i&&this._g<255&&(i=m((255+this._g)/2)),255==n&&this._b<255&&(n=m((255+this._b)/2))),"rgba("+e+","+i+","+n+","+this._a+")"},_.prototype.argb=function(){return Math._floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},_.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},_.prototype.extractAlpha=function(){var t=this._a;return this._a=NaN,t},_.prototype.toHex=function(){return""+Ot(m(255*this._a))+Ot(this._r)+Ot(this._g)+Ot(this._b)},_.prototype.toColorHex=function(){return""+Ot(this._r)+Ot(this._g)+Ot(this._b)},_.prototype.toString=function(){return"#"+Ot(m(255*this._a))+Ot(this._r)+Ot(this._g)+Ot(this._b)},_.prototype.toColorString=function(){return"#"+Ot(this._r)+Ot(this._g)+Ot(this._b)},_.areEqual=function(t,e){return t&&e&&t._r==e._r&&t._g==e._g&&t._b==e._b&&t._a==e._a},new _),On=[new _,new _],Mn={transparent:new _("#00000000"),aqua:new _("#00ffff"),black:new _("#000000"),blue:new _("#0000ff"),fuchsia:new _("#ff00ff"),gray:new _("#808080"),green:new _("#008000"),lime:new _("#00ff00"),maroon:new _("#800000"),navy:new _("#000080"),olive:new _("#808000"),orange:new _("#ffa500"),purple:new _("#800080"),red:new _("#ff0000"),silver:new _("#c0c0c0"),teal:new _("#008080"),white:new _("#ffffff"),yellow:new _("#ffff00"),dimGray:new _("#696969"),ltGray:new _("#d3d3d3")},Fn={transparent:new _("#00000000"),aqua:new _("#00ffff",!0),black:new _("#000000",!0),blue:new _("#0000ff",!0),fuchsia:new _("#ff00ff",!0),gray:new _("#808080",!0),green:new _("#008000",!0),lime:new _("#00ff00",!0),maroon:new _("#800000",!0),navy:new _("#000080",!0),olive:new _("#808000",!0),orange:new _("#ffa500",!0),purple:new _("#800080",!0),red:new _("#ff0000",!0),silver:new _("#c0c0c0",!0),teal:new _("#008080",!0),white:new _("#ffffff",!0),yellow:new _("#ffff00",!0),dimGray:new _("#696969",!0),ltGray:new _("#d3d3d3",!0)},Nn=function(t,e){this._palette=t,this._index=1<arguments.length?e:-1},Ln=(Nn.createFrom=function(t,e){e=e?t.trim().toLowerCase():t;return 0==e.indexOf("pal(")&&")"==e.charAt(e.length-1)?1<=(e=e.substring(4,e.length-1)).indexOf(",")?1<(t=e.split(",")).length?new Nn(t[0],parseInt(t[1])):new Nn(t[0]):new Nn(e):null},Nn.prototype.clone=function(){return new Nn(this._palette,this._index)},Nn.prototype.getColor=function(){var t=this.getIndex();return 0<=t?this._palette.getColor(t):Mn.transparent},Nn.prototype.getIndex=function(){var t=this._palette;return t instanceof Ln||(this._palette=t=Ln.getPalette(this._palette)),t?((this._index<0||this._index>=t.getCount())&&(this._index=t.next()),this._index):-1},function(t){this._colors=[],this._next=0,this._parse(t)}),Ji=(Ln.register=function(t,e){t&&(Ln._palettes[t]=e)},Ln.loadPalettes=function(t){if(t){var e=Ht(t);if(e)for(var i=0;i<e.length;i++){var n=e[i].name,s=e[i].colors;n&&s&&(s=new Ln(s),Ln.register(n,s))}}},Ln.getPalette=function(t){return Ln._palettes.hasOwnProperty(t)?Ln._palettes[t]:Ln._palettes.default},Ln.prototype.getCount=function(){return this._colors.length},Ln.prototype.getColors=function(){return this._colors.slice()},Ln.prototype.next=function(){var t=this._next;return this._next=(this._next+1)%this._colors.length,t},Ln.prototype.getColor=function(t){return this._colors[t]},Ln.prototype._parse=function(t,e){if(this._colors=[],t)for(var i=t,n=0,s=(i=xt(i)?i:String(t).split(",")).length;n<s;n++){var r=_.createFrom(i[n],!0);this._colors.push(r)}this._colors.length<1&&this._colors.push(_.createFrom("#00000000"))},Ln._palettes={default:new Ln("#eeeeee")},g.prototype.color=function(){return this._color},g.prototype.applyTo=function(t,e,i,n,s){return t.setFill(this._color.value()),!0},g.prototype.toText=function(){return this._color.toString()},g.prototype.toColorText=function(){return this._color.toColorString()},g.prototype.css=ln?function(){return this._color.toColorString()}:function(){return this._color.value()},g.prototype.applyToCss=function(t){var e;this._color._a<1?(e=this._color.toString(),t.filter=e="progid:DXImageTransform.Microsoft.gradient(startColorstr="+e+",endColorstr="+e+")",t.background=""):(t.filter="",t.background=this._color.toColorString())},g.WHITE=new g(Mn.white),g.BLACK=new g(Mn.black),g.GRAY=new g(Mn.gray),g.DKGRAY=new g(Mn.dimGray),g.LTGRAY=new g(Mn.ltGray),g.RED=new g(Mn.red),g.YELLOW=new g(Mn.yellow),g.GREEN=new g(Mn.green),g.BLUE=new g(Mn.blue),g.Null=g.NULL={applyTo:function(t,e,i,n,s){return t.setFill("rgba(0, 0, 0, 0)"),!0}},g.areEqual=function(t,e){return t&&e&&_.areEqual(t._color,e._color)},e(null,null,{init:function(t){this._super();t=t?t.trim().toLowerCase():null;this.parse(t)},parse:function(t){}})),An=(Ji.createFrom=function(t){if(t){t=t.trim().toLowerCase();if(0==t.indexOf("linear"))return new An(t);if(0==t.indexOf("radial"))return new Vn(t);if(0==t.indexOf("glass"))return new Pn(t)}return null},e(null,Ji,{init:function(t){this._super(t),this._context=null},parse:function(t){if(this._colors=[],this._ratios=[],this._angle=0,t){var e=_.getColorCsvArray(t),i=e.length;if(i<2||"linear"!=e[0])throw"Invalid linear gradient text";for(var n=1;n<i;){var s=String(e[n]),s=_.createFrom(s);if(!s)break;this._colors[n-1]=s,n++}n<i&&(this._angle=parseFloat(e[n])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone());var r=255/((i=this._colors.length)-1),o=0;for(this._ratios=[0],n=1;n<i-1;n++)this._ratios.push((o+=r)/255);this._ratios.push(1)}},clone:function(){var t=new An(null);return t._colors=this._colors.slice(),t._ratios=this._ratios.slice(),t._angle=this._angle,t},prepare:function(t){this._context=t},applyTo:function(t,e,i,n,s){var r;switch(this._angle){case 90:r=t.createLinearGradient(e,i,e,i+s);break;case 45:r=t.createLinearGradient(e,i,e+n,i+s);break;default:r=t.createLinearGradient(e,i,e+n,i)}for(var o=0,a=this._colors.length;o<a;o++){var h=this._colors[o].value();r.addColorStop(this._ratios[o],h)}return t.setFill(r),!0},applyToEx:function(t,e,i,n,s,r,o){var a;switch(this._angle){case 90:a=t.createLinearGradient(n,s,n,s+o);break;case 45:a=t.createLinearGradient(n,s,n+r,s+o);break;default:a=t.createLinearGradient(n,s,n+r,s)}for(var h=0,l=this._colors.length;h<l;h++){var d=this._context.getColorValue(this._colors[h],e,i);a.addColorStop(this._ratios[h],d)}return t.setFill(a),!0},toText:function(){for(var t="linear",e=0,i=this._colors.length;e<i;e++)t+=","+this._colors[e].toString();return t+","+this._angle},css:ln?function(){return this._colors[0].toColorString()}:function(){var t;switch(this._angle){case 90:t=180;break;case 45:t=135;break;default:t=90}return"linear-gradient("+t+"deg,"+this._colors[0].value()+","+this._colors[1].value()+")"},applyToCss:function(t){var e=this._colors[0].toString(),i=this._colors[1].toString();t.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr="+e+",endColorstr="+i+")",t.background=""}})),Vn=(An.areEqual=function(t,e){var i=t&&e;if(i){if(i=t._colors.length==e._colors.length)for(var n=0;n<t._colors.length&&(i=_.areEqual(t._colors[n],e._colors[n]));n++);if(i){if(i=t._ratios.length==e._ratios.length)for(n=0;n<t._ratios.length&&t._ratios[n]==e._ratios[n];n++);i=i&&t._angle==e._angle}}return i},e(null,Ji,{init:function(t){this._super(t)},parse:function(t){if(this._colors=[],this._ratios=[],t){var e=_.getColorStringArray(t),i=e.length;if(i<2||"radial"!=e[0])throw"Invalid radial gradient text";for(var n=1;n<i;){var s=String(e[n]),s=_.createFrom(s);if(!s)break;this._colors[n-1]=s,n++}n<i&&(this._angle=parseFloat(e[n])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone());var r=255/((i=this._colors.length)-1),o=0;for(this._ratios=[0],n=1;n<i-1;n++)this._ratios.push((o+=r)/255);this._ratios.push(1)}},clone:function(){var t=new Vn(null);return t._colors=this._colors.slice(),t._ratios=this._ratios.slice(),t},prepare:function(t){},applyTo:function(t,e,i,n,s){for(var r=t.createRadialGradient(e,i,e+n,i+s),o=0,a=this._colors.length;o<a;o++){var h=this._colors[o].value();r.addColorStop(this._ratios[o],h)}return t.setFill(r),!0},applyToEx:function(t,e,i,n,s,r,o){for(var a,h=t.createRadialGradient(n,s,n+r,s+o),l=0,d=this._colors.length;l<d;l++){var u=On[l]||(u=On,a=new _,u.push(a),a);u.copy(this._colors[l],e),h.addColorStop(this._ratios[l],u.valueWithBrightness(i))}return t.setFill(h),!0}})),Pn=e(null,Ji,{init:function(t){this._super()},parse:function(t){}}),_n=(f.WHITE=new f(Mn.white),f.BLACK=new f(Mn.black),f.GRAY=new f(Mn.gray),f.DKGRAY=new f(Mn.dimGray),f.LTGRAY=new f(Mn.ltGray),f.RED=new f(Mn.red),f.GREEN=new f(Mn.green),f.BLUE=new f(Mn.blue),f.FOCUS=new f(Mn.gray,1,[1,1]),f.prototype.applyTo=function(t){return t.setStroke(this._color.value(),this._width,this._dash),!0},f.prototype.width=function(){return this._width},f.prototype.getWidth=function(){return this._width},f.prototype.toText=function(){return this._color.toString()+","+this._width+"px"},f.prototype.css=ln?function(){return this._width+"px solid "+this._color.toColorString()}:function(){return this._width+"px solid "+this._color.value()},f.areEqual=function(t,e){var i=t&&e&&_.areEqual(t._color,e._color)&&t._width==e._width;if((i=i&&!t._dash==!e._dash)&&t)for(var n=t._dash.length;n--&&t._dash[n]==e._dash[n];);return i},window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),Hn=(window.requestAnimationFrame=_n||function(t){setTimeout(t,10)},"12px Tahoma");function Gn(t){for(var e=o=t[0].x,i=a=t[0].y,n=1,s=t.length;n<s;n++)var r=t[n],o=Math.min(o,r.x),a=Math.min(a,r.y),e=Math.max(e,r.y),i=Math.max(i,r.y);return{x:o,y:a,width:e-o,height:i-a}}function $n(t,e,i,n,s){if(i!=n){var r=n<i?-1:1,o=i;if(!s&&void 0!==s||t.moveTo(e[o].x,e[o].y),2==Math.abs(n-i))t.lineTo(e[o+r].x,e[o+r].y);else{var a={x:0,y:0},h={x:0,y:0},l={x:0,y:0},d={x:e[o+r].x-e[o].x,y:e[o+r].y-e[o].y},u={x:0,y:0},c={x:0,y:0},_={x:0,y:0},f={x:0,y:0},m=Math.sqrt(d.x*d.x+d.y*d.y),g=(d.x/=m,d.y/=m,e[o+r].x-e[o].x),p=e[o].x,w=e[o].y;for(o+=r;o!=n;o+=r){l.x=-d.x,l.y=-d.y,d.x=e[o+r].x-e[o].x,d.y=e[o+r].y-e[o].y,m=Math.sqrt(d.x*d.x+d.y*d.y),d.x/=m,d.y/=m,d.x<l.x?(u.x=l.x-d.x,u.y=l.y-d.y):(u.x=d.x-l.x,u.y=d.y-l.y);var v=Math.sqrt(u.x*u.x+u.y*u.y);u.x/=v,u.y/=v,a.x=-(u=0<=l.y*d.y?{x:1,y:0}:u).x*g*.25,a.y=-u.y*g*.25,o==r+i?t.quadraticCurveTo(e[o].x+a.x,e[o].y+a.y,e[o].x,e[o].y):(c.x=p+h.x,c.y=w+h.y,_.x=e[o].x+a.x,_.y=e[o].y+a.y,f.x=(c.x+_.x)/2,f.y=(c.y+_.y)/2,t.quadraticCurveTo(c.x,c.y,f.x,f.y),t.quadraticCurveTo(_.x,_.y,e[o].x,e[o].y)),g=e[o+r].x-e[o].x,h.x=u.x*g*.25,h.y=u.y*g*.25,p=e[o].x,w=e[o].y}t.quadraticCurveTo(p+h.x,w+h.y,e[o].x,e[o].y)}}}wn.getEllipsePoint=function(t,e,i,n,s,r,o){s+=r;r=o?-1:1,o={};return o.x=t+Math.cos(s*r)*i,o.y=e+Math.sin(-s*r)*n,o},wn.getArcPoint=function(t,e,i,n,s,r,o,a,h){Math.abs(r)>2*Math.PI&&(r=2*Math.PI),h===I&&(h=.5);a=a?-1:1,r=(s+=3*Math.PI/2)-r*a*h,s={};return s.x=t+Math.cos(r*a)*i,s.y=e+Math.sin(-r*a)*n,s};function Un(){var c=null,_=[],f=[];this._render=function(){for(var t=0,e=_.length;t<e;t++)_[t].apply(c,f[t])},this.clear=function(t){c=t,_=[],f=[]},this.clipRect=function(t){_.push(c.clipBounds),f.push([t.x,t.y,t.width,t.height])},this.clipRectEx=function(t){_.push(c.clipBoundsEx),f.push([t.x,t.y,t.width,t.height])},this.setAlpha=function(t){_.push(c.setAlpha),f.push([t])},this.drawBounds=function(t,e,i,n,s,r){_.push(c.drawBounds),f.push([t,e,i,n,s,r])},this.drawBoundsI=function(t,e,i,n,s,r){_.push(c.drawBoundsI),f.push([t,e,i,n,s,r])},this.drawRect=function(t,e,i){_.push(c.drawBounds),f.push([t,e,i.x,i.y,i.width,i.height])},this.drawStrokeRect=function(t,e){_.push(c.drawStrokeRect),f.push([t,e.x,e.y,e.width,e.height])},this.drawRectI=function(t,e,i){_.push(c.drawBoundsI),f.push([t,e,i.x,i.y,i.width,i.height])},this.drawRoundRectI=function(t,e,i,n,s,r,o,a){_.push(c.drawRoundRectI),f.push([t,e,i.clone(),n,s,r,o,a])},this.drawRoundRectIWith=function(t,e,i,n,s){_.push(c.drawRoundRectIWith),f.push([t,e,i.clone(),n,s])},this.drawCircle=function(t,e,i,n,s){_.push(c.drawCircle),f.push([t,e,i,n,s])},this.drawEllipse=function(t,e,i,n,s,r){_.push(c.drawEllipse),f.push([t,e,i,n,s,r])},this.drawCircleRect=function(t,e,i){_.push(c.drawCircleRect),f.push([t,e,i.clone()])},this.drawTriangle=function(t,e,i){_.push(c.drawTriangle),f.push([t,e,i.clone()])},this.drawDiamond=function(t,e,i){_.push(c.drawDiamond),f.push([t,e,i.clone()])},this.drawArcSector=function(t,e,i,n,s,r,o,a,h,l){_.push(c.drawArcSector),f.push([t,e,i,n,s,r,o,a,h,l])},this.drawArcSector2=function(t,e,i,n,s,r,o,a,h,l,d,u){_.push(c.drawArcSector2),f.push([t,e,i,n,s,r,o,a,h,l,d,u])},this.drawLine=function(t,e,i,n,s){_.push(c.drawLine),f.push([t,e,i,n,s])},this.drawLineI=function(t,e,i,n,s){_.push(c.drawLineI),f.push([t,e,i,n,s])},this.drawHorzLine=function(t,e,i,n){_.push(c.drawHorzLine),f.push([t,e,i,n])},this.drawHorzLineI=function(t,e,i,n){_.push(c.drawHorzLineI),f.push([t,e,i,n])},this.drawVertLine=function(t,e,i,n){_.push(c.drawVertLine),f.push([t,e,i,n])},this.drawVertLineI=function(t,e,i,n){_.push(c.drawVertLineI),f.push([t,e,i,n])},this.drawLines=function(t,e){_.push(c.drawLines),f.push([t,e])},this.drawLinesI=function(t,e){_.push(c.drawLinesI),f.push([t,e])},this.drawCurve=function(t,e){_.push(c.drawCurve),f.push([t,e])},this.drawPolygon=function(t,e,i){_.push(c.drawPolygon),f.push([t,e,i])},this.drawPolygonArray=function(t,e,i){_.push(c.drawPolygonArray),f.push([t,e,i])},this.drawText=function(t,e,i,n,s,r,o){_.push(c.drawText),f.push([t,e,i,n,s,r,o])},this.drawTextBounds=function(t,e,i,n,s,r,o,a,h){_.push(c.drawTextBounds),f.push([t,e,i,n,s,r,o,a,h])},this.drawTextRect=function(t,e,i,n,s,r){_.push(c.drawTextBounds),f.push([t,e,i,n.x,n.y,n.width,n.height,s,r])},this.drawTextRectA=function(t,e,i,n,s){_.push(c.drawTextBoundsA),f.push([t,e,i,n.x,n.y,n.width,n.height,s])},this.drawImage=function(t,e,i,n,s,r,o,a,h){_.push(c.drawImage),f.push([t,e,i,n,s,r,o,a,h])},this.getTextWidth=function(t,e){return _graphics.gtTextWidth(t,e)}}function Wn(t){this.allFields=!0,this.caseSensitive=!1,this.partialMath=!1,this.regularExpression=!1,t&&jt(this,t)}function zn(t){this.fields=null,this.caseSensitive=!1,this.partialMatch=!1,this.regularExpression=!1,this.columns=null,t&&jt(this,t)}var Kn=e("ShapeCellRenderer",null,{init:function(){this._super()},draw:function(t,e,i,n){(i||n)&&this._doDraw(t,e,i,n)},_doDraw:function(t,e,i,n){}}),Yn=e("PolygonShape",Kn,{init:function(t){this._super(),this.setShape(t)},shape:null,setShape:function(t){this._shape=t?"inverted_triangle"===t?Yn.INVERTED_TRIANLGE:t.toLowerCase():null},_doDraw:function(t,e,i,n){var s,r,o,a=this._shape;if(Xn.hasOwnProperty(a)){if(s=Xn[a]){for(r=0,o=(s=s.slice()).length/2;r<o;r++)s[2*r]=e.x+s[2*r]*e.width,s[2*r+1]=e.y+s[2*r+1]*e.height;s.push(s[0],s[1]),t.drawPolygonArray(i,n,s)}}else if(qn.hasOwnProperty(a)&&(a=qn[a])){for(o=(s=(s=a[r=0]).slice()).length/2;r<o;r++)s[2*r]=e.x+s[2*r]*e.width,s[2*r+1]=e.y+s[2*r+1]*e.height;for(s.push(s[0],s[1]),t.drawPolygonArray(i,n,s),r=0,o=(s=(s=a[1]).slice()).length/2;r<o;r++)s[2*r]=e.x+s[2*r]*e.width,s[2*r+1]=e.y+s[2*r+1]*e.height;s.push(s[0],s[1]),t.drawPolygonArray(i,n,s)}}}),Xn=(Yn.RECTANGLE="rectangle",Yn.TRIANLGE="triangle",Yn.INVERTED_TRIANLGE="itriangle",Yn.DIAMOND="diamond",Yn.UP_ARROW="uparrow",Yn.DOWN_ARROW="downarrow",Yn.LEFT_ARROW="leftarrow",Yn.RIGHT_ARROW="rightarrow",Yn.PLUS="plus",Yn.MINUS="minus",Yn.EQUAL="equal",Yn.STAR="star",{rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]}),qn={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},jn=e("EllipseShape",Kn,{init:function(t){this._super()},_doDraw:function(t,e,i,n){t.drawEllipse(i,n,e.x,e.y,e.width,e.height)}}),Zn=e("NullShape",Kn,{init:function(){this._super()},destroy:function(){return!1},_doDraw:function(t,e,i,n){}},null,function(t){t.Default=new t}),Jn=e("ShadowDom",null,{init:function(t,e){this._container=t,this._canvas=t._canvas,this._dataProvider=null,this._itemProvider=null,this._columns=[],this._colCount=0,this._buttons=[],this._checkboxes=[],this._colTitles=[],this._editing=!1,this._editElement=null,this._rows=0,this._internalSet=!1,this._numberFormatter=new Me,this._datetimeWriter=new Re,this._booleanFormatter=new Fe,this._numberFormat=null,this._datetimeFormat=null,this._booleanFormat=null;var i=this._dom=document.createElement("div"),n=this._table=document.createElement("table"),s=(this._caption=document.createElement("caption"),n.appendChild(this._caption),this._head=document.createElement("thead"),n.appendChild(this._head),this._body=document.createElement("tbody"),n.appendChild(this._body),document.createElement("tfoot")),r=document.createElement("tr"),o=document.createElement("td"),a=(this._prevButton=this.$_addButton(o,"prev page",this.$_prevButtonHandler),this._nextButton=this.$_addButton(o,"next page",this.$_nextButtonHandler),r.appendChild(o),s.appendChild(r),n.appendChild(s),this._containerDiv=this._canvas,this._containerDiv=t._containerDiv,tt||((o=i.style).setProperty("height","0px","important"),o.setProperty("width","0px","important"),o.setProperty("overflow","hidden","important")),i.appendChild(n),this._containerDiv.appendChild(i),n.setAttribute("tabindex",-1),this._start=0,this._initOptions(),this.assignOptions(e),this._editor=new Qn(t,t._containerDiv,this._editorOptions),this);this._editor.setBeforeCallback(function(t){return a._editing?(alert(a._aleadyEditMessage),a._editor.focusEditor(),!1):(a._editing=!0,a._options&&a._options.beforeEditPopupCallback&&a._options.beforeEditPopupCallback(t),!0)}),this._editor.setAfterCallback(function(t){a._options&&a._options.afterEditPopupCallback&&a._options.afterEditPopupCallback(t),a._editing=!1}),this._editor.setEditorCommited(function(t,e){a.$_editorCommitedHandler(t,e)})},destroy:function(){this.$_clearBody(),this._container.$_removeListener(this._prevButton,"click"),this._container.$_removeListener(this._nextButton,"click"),this._editor.destroy(),this._table.parentNode&&this._table.parentNode.removeChild(this._table),this._numberFormatter.destroy(),delete this._numberFormatter,delete this._datetimeWriter,this._booleanFormatter.destroy(),delete this._booleanFormatter,this._columns=[],this._dataProvider=null,this._itemProvider=null,this._canvas=null,this._containerDiv=null,this._container=null},indicatorVisible:!0,checkBarVisible:!0,stateBarVisible:!0,start:0,count:20,title:null,description:null,indicatorTitle:null,checkBarTitle:null,stateBarTitle:null,emptyMessage:null,editButtonText:null,cellButtonTexts:null,stateTexts:null,rowText:null,linkText:null,_initOptions:function(){this._count=10,this._autoDrawing=!0,this._indicatorVisible=!0,this._checkBarVisible=!0,this._stateBarVisible=!0;var t=window.RG_CONST&&window.RG_CONST.SHADOW;this._title=t&&window.RG_CONST.SHADOW.TITLE||"리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",this._description=t&&window.RG_CONST.SHADOW.DESCRIPTION||"${columns} 열로 이루어진 데이터 테이블입니다.",this._indicatorTitle=t&&window.RG_CONST.SHADOW.INDICATOR_TITLE||"순번",this._checkBarTitle=t&&window.RG_CONST.SHADOW.CHECK_BAR_TITLE||"선택",this._stateBarTitle=t&&window.RG_CONST.SHADOW.STATE_BAR_TITLE||"행 상태",this._emptyMessage=t&&window.RG_CONST.SHADOW.EMPTY_MESSAGE||"데이터가 존재하지 않습니다.",this._editButtonText=t&&window.RG_CONST.SHADOW.EDIT_BUTTON_TEXT||"편집",this._cellButtonTexts=t&&window.RG_CONST.SHADOW.CELL_BUTTON_TEXTS||{action:"실행",popup:"팝업"},this._stateTexts=t&&window.RG_CONST.SHADOW.STATE_TEXTS||{created:"추가",updated:"수정",deleted:"삭제",createAndDeleted:"추가 후 삭제"},this._rowText=t&&window.RG_CONST.SHADOW.ROW_TEXT||"${index} 행",this._linkText=t&&window.RG_CONST.SHADOW.LINK_TEXT||"링크",this._summaryText=t&&window.RG_CONST.SHADOW.SUMMARY_TEXT||"합계 행",this._groupSummaryText=t&&window.RG_CONST.SHADOW.GROUP_SUMMARY_TEXT||"${groupText} 부분 합계 행",this._aleadyEditMessage=t&&window.RG_CONST.SHADOW.ALEADY_EDIT_MESSAGE||"이미 편집중입니다.",this._insertButtonText=t&&window.RG_CONST.SHADOW.INSERT_BUTTON_TEXT||"행 삽입",this._appendButtonText=t&&window.RG_CONST.SHADOW.APPEND_BUTTON_TEXT||"행 추가",this._deleteButtonText=t&&window.RG_CONST.SHADOW.DELETE_BUTTON_TEXT||"행 삭제",t=t&&window.RG_CONST.SHADOW.EDITOR,this._editorOptions={yearText:t&&window.RG_CONST.SHADOW.EDITOR.YEAR_TEXT||"년도",monthText:t&&window.RG_CONST.SHADOW.EDITOR.MONTH_TEXT||"월",dayText:t&&window.RG_CONST.SHADOW.EDITOR.DAY_TEXT||"일자",ampmText:t&&window.RG_CONST.SHADOW.EDITOR.AMPM_TEXT||"오전/오후",amText:t&&window.RG_CONST.SHADOW.EDITOR.AM_TEXT||"오전",pmText:t&&window.RG_CONST.SHADOW.EDITOR.PM_TEXT||"오후",hourText:t&&window.RG_CONST.SHADOW.EDITOR.HOUR_TEXT||"시",minuteText:t&&window.RG_CONST.SHADOW.EDITOR.MINUTE_TEXT||"분",secondText:t&&window.RG_CONST.SHADOW.EDITOR.SECOND_TEXT||"초",validationMessage:t&&window.RG_CONST.SHADOW.EDITOR.VALIDATION_MESSAGE||"잘못된 입력입니다."}},assignOptions:function(t){if(t&&(t.count&&(this._count=10),null!=t.indicatorVisible&&(this._indicatorVisible=t.indicatorVisible),null!=t.checkBarVisible&&(this._checkBarVisible=t.checkBarVisible),null!=t.stateBarVisible&&(this._stateBarVisible=t.stateBarVisible),null!=t.autoDrawing&&(this._autoDrawing=t.autoDrawing),t.title&&(this._title=t.title),t.description&&(this._description=t.description),t.count&&(this._count=t.count),t.indicatorTitle&&(this._indicatorTitle=t.indicatorTitle),t.checkBarTitle&&(this._checkBarTitle=t.checkBarTitle),t.stateBarTitle&&(this._stateBarTitle=t.stateBarTitle),t.emptyMessage&&(this._emptyMessage=t.emptyMessage),t.editButtonText&&(this._editButtonText=t.editButtonText),t.cellButtonTexts&&(this._cellButtonTexts=qt(t.cellButtonTexts)),t.stateTexts&&(this._stateTexts=qt(t.stateTexts)),t.rowText&&(this._rowText=t.rowText),t.linkText&&(this._linkText=t.linkText),t.aleadyEditMessage&&(this._aleadyEditMessage=t.aleadyEditMessage),t.summaryText&&(this._summaryText=t.summaryText),t.groupSummaryText&&(this._groupSummaryText=t.groupSummaryText),t.insertButtonText&&(this._insertButtonText=t.insertButtonText),t.appendButtonText&&(this._appendButtonText=t.appendButtonText),t.deleteButtonText&&(this._deleteButtonText=t.deleteButtonText),t.editor))for(var e in t.editor)this._editorOptions[e]=t.editor[e]},setColumns:function(t,e){this._grid=t,this._columns=[],this._fields=[],this._editables=[];for(var i=0,n=e.length;i<n;i++){var s=e[i];s instanceof M&&this._columns.push(s)}this._autoDrawing&&this._itemProvider&&this.reset()},setItemProvider:function(t){if(t instanceof P_)throw new Error("TreeView not support Web Accessibility.");var e,i=t!=this._itemProvider;i&&(this._itemProvider&&(e=this._itemProvider.dataSource()).unregisterClient(this),this._itemProvider=t,(e=this._dataProvider=this._itemProvider.dataSource()).registerClient(this),e.addListener(this),this._itemProvider.addListener(this)),this._autoDrawing&&0<this._columns.length&&(i||0==this._rows)&&this.reset()},reset:function(){this.$_setOptions(),this.$_fillHead(),this.$_setItems(0)},onGroupedItemProviderGrouped:function(t){0<this._columns.length&&this.$_setItems(0)},$_setOptions:function(){var t=this._container.gridView(),e=(this._indicatorVisible=t.indicator().isVisible(),this._footerVisible=t.footer().isVisible(),t.checkBar()),e=(this._checkBarVisible=e.isVisible(),this._checkBarExclusive=e.isExclusive(),this._stateBarVisible=t.stateBar().isVisible(),t.editOptions());this._insertable=e.isInsertable(),this._appendable=e.isAppendable(),this._deletable=e.isDeletable()},$_setItems:function(t){this._start=t,this.$_clearBody(),this.$_fillBody()},$_fillHead:function(){(e=this._head.querySelector("tr"))&&this._head.removeChild(e),this._colCount=0;var t="",e=document.createElement("tr");this._indicatorVisible&&((r=document.createElement("th")).scope="col",r.innerText=this._indicatorTitle,e.appendChild(r),t+=this._indicatorTitle+", ",this._colCount++),this._stateBarVisible&&((r=document.createElement("th")).scope="col",r.innerText=this._stateBarTitle,e.appendChild(r),t+=this._stateBarTitle+", ",this._colCount++),this._checkBarVisible&&((r=document.createElement("th")).scope="col",r.innerText=this._checkBarTitle,e.appendChild(r),t+=this._checkBarTitle+", ",this._colCount++),this._colTitles=[];for(var i=0,n=this._columns.length;i<n;i++){var s,r,o=this._columns[i];o.isVisible()&&0<o.width()?(s=(s=o.header()).text()?s.text():o.name(),(r=document.createElement("th")).scope="col",r.innerText=s,e.appendChild(r),t+=s+", ",this._colTitles.push(s),this._colCount++):this._colTitles.push(null)}this._head.appendChild(e),r=document.createElement("th"),this._head.appendChild(e);var a="";this._title&&(a+="<strong>"+this._title+"</strong>"),this._description&&(a+="<span>"+this._description.replace("${columns}",t.substr(0,t.length-2))+"</span>"),this._caption.innerHTML=a},$_clearBody:function(){for(var t=this._checkboxes.length;t--;)this._container.$_removeListener(this._checkboxes[t],"click");for(this._checkboxes=[],t=this._buttons.length;t--;){var e=this._buttons[t];e!=this._prevButton&&e!=this._nextButton&&this._container.$_removeListener(this._buttons[t],"click")}for(this._buttons=[];0<this._body.childNodes.length;)this._body.removeChild(this._body.lastChild)},$_fillBody:function(){this._rows=this._itemProvider.itemCount();var t=Math.min(this._rows-this._start,this._count);if(this._prevButton.disabled=0==this._start,this._nextButton.disabled=t<this._count,0<t){for(var e=0;e<t;e++)this.$_buildItem(this._start+e);this._footerVisible&&this.$_buildFooter()}else{var i=document.createElement("tr"),n=document.createElement("td");n.colSpan=this._colCount,n.innerText=this._emptyMessage,i.appendChild(n),this._body.appendChild(i)}},$_buildItem:function(t){var e=this._container.gridView(),i=e.rowGroup(),n=e.editOptions(),s=this._itemProvider.getItem(t),r=n.isWritable()&&n.canUpdate(s.rowState()===v.CREATED),o=document.createElement("tr");if(o.id=t,this._indicatorVisible&&((a=document.createElement("td")).id="indicator",a.innerText=this.$_getRowText(t+1),o.appendChild(a)),this._stateBarVisible&&((a=document.createElement("td")).id="state",n=s.rowState(),a.innerText=this._stateTexts&&n!=v.NONE?this._stateTexts[n]:"",o.appendChild(a)),this._checkBarVisible&&((a=document.createElement("td")).id="checkbox",this.$_addCheckBox(a,t,s.isChecked(),this._checkBarExclusive,this.$_checkboxHandler),o.appendChild(a)),s instanceof Vr){var a,h=i.getHeaderText(s);(a=document.createElement("td")).colSpan=this._columns.length,a.innerText=this._groupSummaryText.replace("${groupText}",h),o.appendChild(a)}else if(s instanceof Pr)for(var l=0,d=this._columns.length;l<d;l++){var u=this._columns[l];null!=this._colTitles[l]&&(h=this.$_getGroupFooterText(s,u),a=document.createElement("td"),h&&(a.innerText=h),o.appendChild(a))}else{for(l=0,d=this._columns.length;l<d;l++){u=this._columns[l];if(null!=this._colTitles[l]){(a=document.createElement("td")).id="col_"+l;var c=s.getData(u.dataIndex()),h=this.$_getText(u,c),_=this.$_getRowText(t+1)+" "+this._colTitles[l]+" ",f=((c=u.rendererObj())&&c instanceof Yc?(f=$.temp(e,t,u),f=c._getUrl(f),a.innerHTML="<a href='"+f+"' title='"+this._linkText+"' tabindex='-1' target='_blank'>"+h+"</a>"):a.innerHTML="<span>"+h+"</span>",r&&u.isWritable()&&this.$_addButton(a,_+this._editButtonText,this.$_editButtonHandler),u.button()),c=u.renderer();if(f==Cs.IMAGE)for(var m=u.imageButtons().images,g=0;g<m.length;g++)this.$_addButton(a,_+m[g].name,this.$_imageButtonHandler,g);else if(f!=Cs.NONE)this.$_addButton(a,_+this._cellButtonTexts[f],"action"==f?this.$_actionButtonHandler:this.$_popupButtonHandler);else if(c)if("image"==c.type||"icon"==c.type)(h=c.altText)&&this.$_addButton(a,_+h,this.$_imageClickHandler,g);else if("imageButtons"==c.type)for(m=c.images,g=0;g<m.length;g++)this.$_addButton(a,_+m[g].name,this.$_imageButtonHandler,g);else"imageButton"==c.type&&this.$_addButton(a,_+c.name,this.$_imageButtonHandler,g);o.appendChild(a)}}(this._insertable||this._appendable||this._deletable)&&(a=document.createElement("td"),this._insertable&&(this.$_addButton(a,this._insertButtonText,this.$_insertRowButtonHandler),t<this._start+this._count-1)&&this.$_addButton(a,this._appendButtonText,this.$_appendRowButtonHandler),this._deletable&&this.$_addButton(a,this._deleteButtonText,this.$_deleteRowButtonHandler),o.appendChild(a))}this._body.appendChild(o)},$_buildFooter:function(){var t=this._container.gridView(),e=t.footer(),i=this._indicatorVisible+this._checkBarVisible+this._stateBarVisible,n=this._columns.length,s=0;for(footers=t.footer().count();s<footers;s++){var r=document.createElement("tr");0<i&&((l=document.createElement("td")).colSpan=i,l.innerText=this._summaryText,r.appendChild(l));for(var o=0;o<n;o++){var a=this._columns[o],h=(this._summaryText,this._colTitles[o],e.getCell(t.getIndex(-1,a),s)),a=this.$_getFooterText(a.footer(),h),l=document.createElement("td");a&&(l.innerText=a),r.appendChild(l)}this._body.appendChild(r)}},$_getText:function(t,e){var i,n,s=t.getField(),r=t.styles();switch(s.dataType()){case S.NUMBER:i=r.numberFormat(),n=wt(e)&&i?(i!=this._numberFormat&&(this._numberFormatter.parse(i),this._numberFormat=i),this._numberFormatter.format(e)):wt(e)?e+"":"";break;case S.DATETIME:i=r.datetimeFormat(),n=e?(i?(i!=this._datetimeFormat&&(this._datetimeWriter.setFormatString(i),this._datetimeFormat=i),this._datetimeWriter):Re.Default).getText(e):"";break;case S.BOOLEAN:i=r._booleanFormat,n=wt(e)&&i?(i!=this._booleanFormat&&(this._booleanFormatter.setFormat(i),this._booleanFormat=i),this._booleanFormatter.formatValue(e)):wt(e)?e.toString():"";break;default:n=wt(e)?e.toString():""}return null!=(t=r.prefix())&&(n=t+n),null!=(t=r.suffix())&&(n+=t),n},$_getFooterText:function(t,e){var i,n,t=t.styles(),s=e.value(),r=Number(s);return!isNaN(r)&&(n=t.numberFormat())?(n!=this._numberFormat&&(this._numberFormatter._parse(n),this._numberFormat=n),i=this._numberFormatter.format(r)):s?i=s:wt(i=e.displayText())||(i=""),null!=(n=t.prefix())&&(i=n+i),null!=(n=t.suffix())&&(i+=n),i},$_getGroupFooterText:function(t,e){var i,n=this._container.gridView(),s=n.rowGroup(),r=Ca.getValue(t,e),o=e.footer().styles();Number(r);return r instanceof Date?(null!=this._datetimeFormat&&(this._datetimeWriter.setFormatString(void 0),this._datetimeFormat=void 0),i=this._numberFormatter.format(r)):"string"!=typeof r&&isNaN(r)?-1<(t=t.index())?(n=$.temp(n,t,e),t=s.getFooterCell(n),i=void 0===r||"number"==typeof r?t.displayText()||"":r):(s=e.footer().groupText())&&(i=s):i=r,null!=(n=o.prefix())&&(i=n+i),null!=(n=o.suffix())&&(i+=n),i},$_getRowText:function(t){return this._rowText?this._rowText.replace("${index}",t):t},$_getItemIndex:function(t){t=t.parentElement,t=t?t.parentElement:null;return t&&t.id?parseInt(t.id):-1},$_getCellIndex:function(t){var t=t.parentElement,e=t?t.parentElement:null;if(e){e=parseInt(e.id);if(!isNaN(e)){t=(t=t.id).substring(4,t.length),t=this._columns[parseInt(t)];if(t)return $.temp(this._grid,e,t)}}return null},$_addCheckBox:function(t,e,i,n,s){var r=document.createElement("input");return r.type=n?"radio":"checkbox",r.name="rg_shadow_item",r.tabIndex=-1,r.title=this.$_getRowText(e+1),r.$$value=e,r.checked=i,this._container.$_addListener(r,"click",s.bind(this),!1),t.appendChild(r),this._checkboxes.push(r),r},$_addButton:function(t,e,i,n){var s=document.createElement("input");return s.type="button",s.title=e,s.tabIndex=-1,null!=n&&(s.$$value=n),this._container.$_addListener(s,"click",i.bind(this),!1),t.appendChild(s),this._buttons.push(s),s},onDataProviderDataChanged:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderReset:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRefresh:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRefreshClient:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRowCountChanged:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRowMoved:function(t,e,i){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRowsMoved:function(t,e,i,n){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderStateChanged:function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderStatesChanged:function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderStatesCleared:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},onDataProviderRestoreRows:function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},isDataEditing:function(){return this._editing&&!this._internalSet},commit:function(){return!1},$_prevButtonHandler:function(t){this.$_setItems(this._start-this._count)},$_nextButtonHandler:function(t){this.$_setItems(this._start+this._count)},$_checkboxHandler:function(t){var t=t.target||t.srcElement||t.originalTarget,e=t.$$value;"radio"==t.type?this._grid.checkItem(e,t.checked,!0,!0):this._grid.checkItem(e,t.checked,!1,!1)},$_actionButtonHandler:function(t){t=t.target||t.srcElement||t.originalTarget,t=this.$_getCellIndex(t);t&&this._grid._fireCellButtonClicked(t)},$_popupButtonHandler:function(t){},$_imageClickHandler:function(t){t=t.target||t.srcElement||t.originalTarget,t=this.$_getCellIndex(t);t&&this._grid._fireDataCellClicked(t)},$_imageButtonHandler:function(t){var e,t=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(t),t=t.$$value,n=i.column().renderer();n&&("imageButtons"==n.type?e=(images=n.images)[t].name:"imageButton"==n.type&&(e=n.name)),i&&this._grid._fireImageButtonClicked(i,t,e)},$_editButtonHandler:function(t){var t=t.target||t.srcElement||t.originalTarget,e=qt(this.$_getCellIndex(t)),i=this.$_getRowText(e.itemIndex()+1),n=this._container.gridView(),s={itemIndex:e.itemIndex(),column:e.column().name()};s.column||(s.fieldName=e.column().fieldName()),n.setCurrent(s),this._editElement=t.parentElement,this._editor.popup(e,i,this._colTitles[e.col()],t)},$_appendRowButtonHandler:function(t){var t=t.target||t.srcElement||t.originalTarget,t=this.$_getItemIndex(t);-1==t?this._dataProvider.addRow([]):(t=this._itemProvider.getItem(t),this._dataProvider.insertRow(t.dataRow()+1,[]))},$_insertRowButtonHandler:function(t){var t=t.target||t.srcElement||t.originalTarget,t=this.$_getItemIndex(t);-1!=t&&(t=this._itemProvider.getItem(t),this._dataProvider.insertRow(t.dataRow(),[]))},$_deleteRowButtonHandler:function(t){var t=t.target||t.srcElement||t.originalTarget,t=this.$_getItemIndex(t);-1!=t&&(t=this._itemProvider.getItem(t),this._dataProvider.removeRow(t.dataRow(),[]))},$_editorCommitedHandler:function(t,e){var i=t.dataColumn(),n=t.item(),s=i.fieldName();this._internalSet=!0;try{n.setData(i.dataIndex(),e)}finally{this._internalSet=!1}this.$_setElementText(this._editElement,t,n,i,e);for(var r=this._editElement.parentNode.childNodes,o=r.length;o--;){var a,h,l=r[o];l!=this._editElement&&(a=this.$_getCellIndex(l.firstChild))&&(h=a.dataColumn())&&h.fieldName()==s&&this.$_setElementText(l,a,n,h,e)}},$_setElementText:function(t,e,i,n,s){s=this.$_getText(n,s);(n=n.rendererObj())&&n instanceof Yc?(n=n._getUrl(e),(e=t.getElementsByTagName("a")[0]).text=s,e.href=n):t.getElementsByTagName("span")[0].innerText=s;e=t.parentElement.querySelector("#state");e&&(n=i.rowState(),e.innerText=this._stateTexts&&n!=v.NONE?this._stateTexts[n]:"")}}),Qn=e("ShadowEditor",null,{init:function(t,e,i){this._container=t,this._options=i,this._valueChanged=!1,this._type=null,this._value=null,this._column=null,this._itemIndex=null;var t=this._dialog=document.createElement("div"),i=(t.class="popup",t.role="dialog",t.ariaLabelledby="popuptitle",t.style.display="none",t.style.position="absolute",t.style.left="0px",t.style.top="0px",document.createElement("div")),i=(i.id=t.ariaLabelledby,i.style.display="none",t.appendChild(i),this._body=document.createElement("div"),t.appendChild(this._body),document.createElement("div")),n=document.createElement("input"),n=(n.type="button",n.value="Apply",n.title="Apply",this._container.$_addListener(n,"click",this.$_applyButtonHandler.bind(this),!1),i.appendChild(n),document.createElement("input"));n.type="button",n.value="Cancel",n.title="Cancel",this._container.$_addListener(n,"click",this.$_cancelButtonHandler.bind(this),!1),i.appendChild(n),t.appendChild(i),e.firstElementChild?e.insertBefore(t,e.firstElementChild):e.appendChild(t),this._activeControls=[],this._lineInput=null,this._multiInput=null,this._numberInput=null,this._selector=null,this._yearInput=null,this._monthInput=null,this._dayInput=null,this._ampmSelector=null,this._hourInput=null,this._minuteInput=null,this._secondInput=null,this._defaultInput=null,this._focusControl=null},beforeCallback:null,afterCallback:null,editorCommited:null,popup:function(t,e,i,n){var s=!1;(s=this._beforeCallback?this._beforeCallback(t):s)&&(this._focusControl=n,n=(n=(s=(this._index=t).dataColumn()).editor())||"line",this._value=t.item().getData(s.dataIndex()),this.$_buildEditor(n,e,i),this.$_setEditValue(n,this._value),this._dialog.style.display="block",this._defaultInput)&&this._defaultInput.focus()},focusEditor:function(){this._defaultInput&&this._defaultInput.focus()},$_closeUp:function(t){t&&(t=this.$_getEditValue(this._type))!=this._value&&this._editorCommited(this._index,t),this._dialog.style.display="none",this._afterCallback&&this._afterCallback(this._index),this._focusControl&&this._focusControl.focus()},$_clearControls:function(){for(var t=this._activeControls.length;t--;)this._container.$_removeListener(this._activeControls[t]),this._body.removeChild(this._activeControls[t]),delete this._activeControls[t];this._activeControls=[]},$_buildEditor:function(t,e,i){this.$_clearControls();var n=e+" "+i;switch(t){case"multiline":(r=this._multiInput=document.createElement("textarea")).title=n,this._body.appendChild(r),this._activeControls.push(r);break;case"number":r=this._numberInput=this.$_addNumberInput(n);break;case"dropDown":(r=this._selector=document.createElement("select")).title=n,this.$_buildSelectOptions(r,this._index),this._body.appendChild(r),this._activeControls.push(r);break;case"date":var s=this._options,r=this._yearInput=this.$_addNumberInput(s.yearText,2e3,4,0,9999);this._monthInput=this.$_addNumberInput(s.monthText,1,2,1,12),this._dayInput=this.$_addNumberInput(s.dayText,1,2,1,31),this._ampmSelector=document.createElement("select"),this._ampmSelector.title=s.ampmText,this._ampmSelector.options[0]=new Option(s.amText,"am"),this._ampmSelector.options[1]=new Option(s.pmText,"pm"),this._body.appendChild(this._ampmSelector),this._activeControls.push(this._ampmSelector),this._hourInput=this.$_addNumberInput(s.hourText,0,2,0,11),this._minuteInput=this.$_addNumberInput(s.minuteText,0,2,0,59),this._secondInput=this.$_addNumberInput(s.secondText,0,2,0,59);break;default:(r=this._lineInput=document.createElement("input")).type="text",r.title=n,this._body.appendChild(r),this._activeControls.push(r)}this._defaultInput=r,this._type=t},$_buildSelectOptions:function(t,e){var i,n,s=e.item(),e=e.dataColumn(),r=!1;if(e.lookupSource()){for(var o=e.lookupKeyFieldIds(),a=[],h=0;h<o.length-1;h++)a.push(s.getData(o[h]));var l=e.lookupSource().getTextDomain(a);l&&l.values&&0<l.values.length&&(n=l.values,i=l.keys,r=!0)}else(l=e.lookupValues()||e.editorOptions().values)&&0<l.length&&((e=e.lookupLabels()||e.editorOptions().labels)&&e.length>=l.length?(n=e,i=l,r=!0):n=l);if(n)for(h=0;h<n.length;h++){var d=document.createElement("option");d.innerText=n[h],d.value=(r&&h<i.length?i:n)[h],t.appendChild(d)}},$_addNumberInput:function(t,e,i,n,s){var r=document.createElement("input");return(r.type="number")==r.type?(null!=n&&(r.min=n),null!=n&&(r.max=s)):(null!=i&&(r.maxLength=i),null!=n&&(r.dataset.min=n),null!=s&&(r.dataset.max=s),this._container.$_addListener(r,"keypress",this.$_numberEditHandler.bind(this),!1)),r.title=t,null!=e&&(r.value=e),this._body.appendChild(r),this._activeControls.push(r),r},$_setEditValue:function(t,e){switch(t){case"multiline":this._multiInput.value=e||"";break;case"number":isNaN(e)||(this._numberInput.value=e||"");break;case"dropDown":this._selector.value=e||"";break;case"date":var i,n=e;(n=e&&"string"==typeof e?new Date(e):n)instanceof Date&&!isNaN(n.getTime())?(this._yearInput.value=n.getFullYear(),this._monthInput.value=n.getMonth()+1,this._dayInput.value=n.getDate(),i=n.getHours(),this._ampmSelector.value=i<12?"am":"pm",this._hourInput.value=i%12,this._minuteInput.value=n.getMinutes(),this._secondInput.value=n.getSeconds()):(this._yearInput.value="",this._monthInput.value="",this._dayInput.value="",this._ampmSelector.value="am",this._hourInput.value="",this._minuteInput.value="",this._secondInput.value="");break;default:this._lineInput.value=e||""}},$_getEditValue:function(t){switch(t){case"multiline":return this._multiInput.value;case"number":var e=Number(this._numberInput.value);return isNaN(e)?null:e;case"dropDown":return this._selector.value;case"date":var e=parseInt(this._yearInput.value),i=parseInt(this._monthInput.value)-1,n=parseInt(this._dayInput.value),s=parseInt(this._hourInput.value)+("pm"==this._ampmSelector.value?12:0),r=parseInt(this._minuteInput.value),o=parseInt(this._secondInput.value);return new Date(e,i,n,s,r,o);default:return this._lineInput.value}},$_checkValue:function(t){var e,i,n,s,r;return!("date"==t&&(t=parseInt(this._yearInput.value),isNaN(t)||t<0?(alert(this._yearInput.title+" "+this._options.validationMessage),this._yearInput.focus(),1):(e=parseInt(this._monthInput.value),isNaN(e)||e<1||12<e?(alert(this._monthInput.title+" "+this._options.validationMessage),this._monthInput.focus(),1):(i=parseInt(this._dayInput.value),isNaN(i)||i<1||31<i?(alert(this._dayInput.title+" "+this._options.validationMessage),this._dayInput.focus(),1):(n=parseInt(this._hourInput.value),isNaN(n)||n<0||11<n?(alert(this._hourInput.title+" "+this._options.validationMessage),this._hourInput.focus(),1):(s=parseInt(this._minuteInput.value),isNaN(s)||s<0||59<s?(alert(this._minuteInput.title+" "+this._options.validationMessage),this._minuteInput.value.focus(),1):(r=parseInt(this._secondInput.value),isNaN(r)||r<0||59<r?(alert(this._secondInput.title+" "+this._options.validationMessage),this._secondInput.value.focus(),1):(!(t=new Date(t,e,i,n,s,r))||isNaN(t.getTime()))&&(alert(this._options.validationMessage),this._monthInput.focus(),1))))))))},$_numberEditHandler:function(t){return 48<=t.charCode&&t.charCode<=57},$_applyButtonHandler:function(t){this.$_checkValue(this._type)&&this.$_closeUp(!0)},$_cancelButtonHandler:function(t){this.$_closeUp()}}),ts=e("CanvasContext",e("VisualContext",le,{init:function(){this._super()}}),{init:function(t,e){this._super(),this._name=t,this._container=e,this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._graphics=new wn(this._ctx),this._dirty=!1,this._buffer=null,this._bufferCtx=null},destroy:function(){this._destroying=!0,this._container=null,this._canvas=null,this._ctx=null,this._graphics=null,this._buffer=null,this._bufferCtx=null,this._super()},name:function(){return this._name},isDirty:function(){return this._dirty},resize:function(t,e){var i=Math.max(window.devicePixelRatio,1);t*i==this._canvas.width&&e*i==this._canvas.height||(this._canvas.width=t*i,this._canvas.style.width=t+"px",this._canvas.height=e*i,this._canvas.style.height=e+"px",this._graphics.scale(i,i,!0))},prepare:function(t,e,i,n){var s,r,o,a;t&&(e||i)?(t=t,(s=this._buffer)||(this._buffer=s=z.createElement("canvas"),this._bufferCtx=s.getContext("2d")),t.width>s.width&&(s.width=t.width),t.height>s.height&&(s.height=t.height),s=t.x,r=t.y,o=t.width,a=t.height,this._bufferCtx.drawImage(this._canvas,s,r,o,a,0,0,o,a),n&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height),0<e?(t.x+=e,o-=e):e<0&&(s-=e,o+=e),0<i?(t.y+=i,a-=i):i<0&&(r-=i,a+=i),this._ctx.drawImage(this._buffer,s,r,o,a,t.x,t.y,o,a),this._dirty=!0):n&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height),this._graphics.save()},restore:function(){this._dirty&&(this._dirty=!1),this._graphics.restore()},invalidate:function(t){this._dirty||(this._dirty=!0)}}),es=e("CanvasCache",e("VisualCache",le,{init:function(){this._super()}}),{init:function(t,e){this._super(),this._element=e,this._canvas=t.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._graphics=new wn(this._ctx)},destroy:function(){this._destroying=!0,this._element=null,this._canvas=null,this._ctx=null,this._graphics=null,this._super()},dispose:function(){},resize:function(t,e){t>this._canvas.width&&(this._canvas.width=t),e>this._canvas.height&&(this._canvas.height=e)},prepare:function(){this._graphics.clear(0,0,this._canvas.width,this._canvas.height),this._graphics.save()},restore:function(){this._graphics.restore()},invalidate:function(t){this._dirty||(this._dirty=!0,this._container.invalidate())}}),cn=e("VisualContainer",In,{init:function(t,e,i,n){this._super(t,e);var s,e=this._container,r=this._deviceScale=Math.max(window.devicePixelRatio,1);t?(this._createChildren(e),this.invalidateLayout(),this._registerEventHandlers(e)):(t=this._canvas=document.createElement("canvas"),this._ctx=t.getContext("2d"),e.appendChild(t),s=e.getBoundingClientRect(),t.width=parseInt(s.width)*r,t.height=parseInt(s.height)*r,t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.background="#fff",t.style.borderStyle="none",t.style.borderWidth="0px",t.style.width=parseInt(s.width)+"px",t.style.height=parseInt(s.height)+"px",t.setAttribute("tabindex","0"),t.setAttribute("role","application"),i?(this._shadowDom=new Jn(this,n),t.setAttribute("aria-hidden",!0),this._container.setAttribute("aria-hidden",!0)):t.innerText="Your browser does not support HTML5 Canvas.",this._defContext=new ts("defaultContext",this),this._defContext.resize(this._width,this._height),this._contexts=null,this._createChildren(e),this.invalidateLayout(),this._registerEventHandlers(t)),this._imagePool=new me,this._imagePool.addListener(this)},destroy:function(){this._destroying=!0,this._imagePool.removeListener(this),this._imagePool.destroy(),E.clearElements(this._canvas),this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),this._ctx=null,this._canvas=null,this._imagePool=null,this._shadowDom&&this._shadowDom.destroy(),this._shadowDom=null,this._super()},onImageLoaded:function(t){var e=this._imagePool.getImage(t);ft("Image loaded at "+t+" ["+e.width+","+e.height+"]"),this.invalidateLayout()},getCanvasImage:function(){return this._canvas&&this._canvas.toDataURL()},getContext:function(t){if(this._contexts)for(var e=this._contexts.length;e--;)if(this._contexts[e].name()==t)return this._contexts[e];return null},addContext:function(t){t&&(this._contexts||(this._contexts=[]),this._contexts.indexOf(t)<0)&&(this._contexts.push(t),t.resize(this._width,this._height))},getImage:function(t){return this._imagePool.getImage(t)},measureText:function(t,e){return this.$_dom?e?8*e.length:0:(this._ctx.font=t.font,this._ctx.measureText(e).width)},measureTextRect:function(t,e,i,n,s,r,o,a,h,l){var d;switch(h){case Ms.EXPLICIT:d=this._defContext._graphics.getExplicitTextRect(t,e,i,n,s,r,o,a,l);break;case Ms.NORMAL:d=this._defContext._graphics.getWrapTextRect(t,e,i,n,s,r,o,a,l);break;default:d=this._defContext._graphics.getTextRect(t,e,i,n,s,r,o,a,l)}return d.height},invalidateElement:function(t){t._dom||(t._context||this._defContext).invalidate(t),this._drawing||this._updateRequested||(window.requestAnimationFrame(this._containerRender),this._updateRequested=!0)},validateElement:function(t){},scroll:function(t,e,i){this.$$_render(pt(),t,e,i)},setResizeDelay:function(t){t!=this._resizeDelay&&(t=!isNaN(t)&&t?parseInt(t):null,this._resizeDelay=t)},resetSize:function(t){if(parseInt){this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=null,this._resetSizeCallback=t;t=Math.max(window.devicePixelRatio,1);try{n=this._container.getBoundingClientRect()}catch(t){n={width:this._container.clientWidth,height:this._container.clientHeight}}if(this._width!=parseInt(n.width)||this._height!=parseInt(n.height)||this._deviceScale!=t){if(this._defContext){this._deviceScale=t;var e=this._canvas,i=this._width=Math.floor(n.width),n=this._height=Math.floor(n.height);if(e.style.width=i+"px",e.style.height=n+"px",this._canvas.width=i*t,this._canvas.height=n*t,this._defContext.resize(i,n),this._contexts)for(var s=0;s<this._contexts.length;s++)this._contexts[s].resize(this._width,this._height)}this.invalidateLayout(),ft("resized: "+this._width+", "+this._height)}else this.invalidateLayout()}},_createRootElement:function(t){return t?(t=new ns(t,"root",this),this._container.appendChild(t._dom),t):new ns(!1,"root",this,this._defContext)},$_validateChildren:function(t){var e=t._elements;if(e)for(var i=e.length;i--;){var n=e[i];n._dirty=n._nodraw=!1,this.$_validateChildren(n)}},_doLayout:function(t){},_doPrepareRender:function(t){},_beforeRender:function(t){},_doRender:function(t){if(this._doDrawContainer(this._defContext._graphics,t),this._defContext._dirty&&this._drawElement(this._rootElement,null,this._invalidated),this._contexts)for(var e=0,i=this._contexts.length;e<i;e++)this._contexts[e]._dirty&&this._drawElement(this._rootElement,this._contexts[e],!0);this.$_validateChildren(this._rootElement)},_doDrawContainer:function(t,e){},_drawElement:function(t,e,i){var n,s,r;if(!t._nodraw)if(t._dom)for(t.draw(),n=0,s=t.childCount();n<s;n++)(r=t.getChild(n)).isVisible()&&this._drawElement(r);else{var o,a=(e||this._defContext)._graphics,h=(a.save(),a.translate(t.x(),t.y()),t._mask?t._mask instanceof is?(t._mask._doDraw(a),a.clip()):t._mask instanceof O&&a.clipRect(t._mask):t.clip(a),a.setAlpha(t._alpha),t._context==e&&(i||t._dirty)&&((o=t._cache)?t.drawCache(a,o):(t._graphics=a,t.draw(a,!this._invalidated))),t._elements);if(h)for(n=0,s=h.length;n<s;n++)(r=h[n])._visible&&this._drawElement(r,e,i);a.restore()}},$$_render:function(t,e,i,n){var s=pt(),r=this._width,o=this._height;if(this._layoutChildren(new O(0,0,r,o)),tt&&(ft("rendering["+ ++this._rendered+"] at "+t),s=gt()),this._layoutNeeded?(this._layoutNeeded=!1,this._doLayout(new O(0,0,r,o)),tt&&_t("layouted in ["+(s=pt()-s)+"]")):this._doPrepareRender(new O(0,0,r,o)),tt&&(s=pt()),this._invalidated&&(this._defContext._dirty=!0,this._contexts))for(var a=0,h=this._contexts.length;a<h;a++)this._contexts[a]._dirty=!0;if(this._defContext.prepare(e,i,n,this._invalidated),this._contexts)for(a=0;a<this._contexts.length;a++)this._contexts[a].prepare(null,0,0,this._contexts[a]._dirty);try{var l=new O(Cn=0,0,r,o);if(this._beforeRender(l),this._doRender(l),this._ctx.clearRect(0,0,r,o),0<r&&0<o){var d=Math.max(window.devicePixelRatio,1);if(r*=d,o*=d,r=Math.floor(r),o=Math.floor(o),this._ctx.clearRect(0,0,r,o),this._ctx.drawImage(this._defContext._canvas,0,0,r,o,0,0,r,o),this._contexts)for(a=0;a<this._contexts.length;a++)this._ctx.drawImage(this._contexts[a]._canvas,0,0,r,o,0,0,r,o)}}finally{if(this._contexts)for(a=0;a<this._contexts.length;a++)this._contexts[a].restore();this._defContext.restore()}tt&&(s=pt()-s,_t("rendered elements2["+Cn+"] in ["+s+"]"));for(a=0,h=this._children.length;a<h;a++){var u=this._children[a];u._visible&&0<u._width&&0<u._height&&(u.resize(),u.layoutContent(),u._dirty&&u.draw(),this._ctx.drawImage(u._canvas,0,0,u._width,u._height,u._x,u._y,u._width,u._height))}},_resizeHandler:function(t){this._resizeDelay?(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(function(){this.resetSize()}.bind(this),this._resizeDelay)):this.resetSize()}}),is=(cn.prototype,e("VisualElement",le,{init:function(t,e){this._super(),this._name=e,this._parent=null,this._elements=null,this._dirty=!1,this._mouseEnabled=!0,this._hovered=!1,this._mask=null,this._nodraw=!1,this._context=null,this._graphics=null,this._drawings=new Un,this._cache=null},destroy:function(){var t;if(this._destroying=!0,this._context=null,this._graphics=null,this._drawings=null,this._elements&&k(this._elements)){for(var e=this._elements.length;e--;)(t=this.removeElementAt(e))&&!t._destroying&&t.destroy&&t.destroy();t=null}this._name=null,this._elements=null,this._cache=null,this._mask=null,this._x=null,this._y=null,this._width=null,this._height=null,this._rotation=null,this._super()},x:0,y:0,width:0,height:0,rotation:0,visible:!0,alpha:1,renderCallback:null,right:function(){return this._x+this._width},bottom:function(){return this._y+this._height},setWidth:function(t){return(t=Math.max(0,t))!=this._width&&(this._width=t,this.invalidate()),this},setHeight:function(t){return(t=Math.max(0,t))!=this._height&&(this._height=t,this.invalidate()),this},setVisible:function(t){return t!=this._visible&&(this._visible=t,this.invalidate(!0)),this},isCached:function(){return null!=this._cache},setCached:function(t){t&&!this._cache?(this._cache=new es(z,this),this._cache.resize(this._width,this._height)):!t&&this._cache&&(this._cache.dispose(),this._cahce=null)},isClickable:function(){return!1},name:function(){return this._name},setName:function(t){this._name=t},container:function(){return this._parent&&this._parent.container()},parent:function(){return this._parent},parentAs:function(t){for(var e=this;e;){if(e instanceof t)return e;e=e._parent}},childCount:function(){return this._elements?this._elements.length:0},isSingleton:function(){return 1==this._parent.childCount()},position:function(){return{x:this._x,y:this._y}},bounds:function(){return new O(this._x,this._y,this._width,this._height)},clientRect:function(){return new O(0,0,this._width,this._height)},mouseX:function(){var t=this.container();if(t){for(var e=t._currentX,i=this;i&&i!==I;)e-=i._x,i=i._parent;return e}return NaN},mouseY:function(){var t=this.container();if(t){for(var e=t._currentY,i=this;i&&i!==I;)e-=i._y,i=i._parent;return e}return NaN},mask:function(){return this._mask},setMask:function(t){this._mask=t?t.clone():null},isLayer:function(){return!1},setMouseEnabled:function(t){this._mouseEnabled=t},canHover:function(){return!0},isHovered:function(){return this._hovered},setHovered:function(t){t!=this._hovered&&(this._hovered=t,this._hoveredChanged)&&this._hoveredChanged()},propertyChanged:function(t,e){this.invalidate()},getChildren:function(){return this._elements&&this._elements.concat()},getChild:function(t){return this._elements?this._elements[t]:null},getChildIndex:function(t){return this._elements?this._elements.indexOf(t):-1},contains:function(t){return!!this._elements&&0<=this._elements.indexOf(t)},addChild:function(t,e){return this.insertChild(-1,t,e)},addElement:function(t,e){return this.addChild(t,e)},addContextElement:function(t){return this.addChild(t,this._context)},insertChild:function(t,e,i){return e instanceof is&&!this.contains(e)&&(this._elements||(this._elements=[]),t<0?(this._dom?this._dom.appendChild(e._dom):e._context=i,this._elements.push(e)):(this._dom?this._elements.length>t?this._dom.insertBefore(e._dom,this._elements[t]._dom):this._dom.appendChild(e._dom):e._context=i,this._elements.splice(t,0,e)),e._parent=this,e.$_attached(this)),e},insertElement:function(t,e,i){return this.insertChild(t,e,i)},removeChild:function(t){if(t&&this._elements){t=this._elements.indexOf(t);if(0<=t)return this.removeChildAt(t)}return null},removeElement:function(t){return this.removeChild(t)},removeChildAt:function(t){var e;return 0<=t&&t<this.childCount()?(e=this._elements[t],this._elements.splice(t,1),this._dom&&e._dom?this._dom.removeChild(e._dom):e._context=null,e._parent=null,e._dirty=!1,e.$_detached(this),e):null},removeElementAt:function(t){return this.removeChildAt(t)},clear:function(){var t,e=this._elements,i=e?e.length:0;if(0<i){for(t=0;t<i;t++)e[t]._parent=null,e[t].$_detached(this);if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);this.invalidate()}},hideAll:function(){var t,e=this._elements,i=e?e.length:0;if(this._dom)for(t=0;t<i;t++)e[t].setVisible(!1);else for(t=0;t<i;t++)e[t]._visible=!1},setTool:function(t){var e,i=this._elements,n=i?i.length:0;if(t)for(this.$_tool=!0,e=0;e<n;e++)i[e].setTool(!0);else if(this.$_tool)for(this.$_tool=!1,e=0;e<n;e++)i[e].setTool(!1)},invalidate:function(t,e){var i;if(!t&&this._dirty||(i=this.container())&&(i.invalidateElement(this),this._dirty=!0),e){var n=this._elements;if(n)for(var s=n.length;s--;)n[s].invalidate(t,!0)}},validate:function(){var t;this._dirty&&(this._dirty=!1,t=this.container())&&t.validateElement(this)},invalidateLayout:function(){var t=this.container();t&&t.invalidateLayout()},clip:function(t){},getBounds:function(t){return t?t.set(this._x,this._y,this._width,this._height):new O(this._x,this._y,this._width,this._height)},getClientRect:function(t){return t?t.set(0,0,this._width,this._height):new O(0,0,this._width,this._height)},containsInBounds:function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},containsInClient:function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},parentToElement:function(t,e,i){for(var n=this;n&&n!=t;)e-=n._x,i-=n._y,n=n._parent;return{x:e,y:i}},translateBy:function(t,e){var i=t;for(e=e||new O(0,0,this._width,this._height);i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},topBy:function(t,e){for(var i=this._y+e,n=this._parent;n&&n!==t;)i+=n._y,n=n._parent;return i},boundsBy:function(t,e){var i=this._x,n=this._y,s=this._parent;for(e&&(i+=e.x,n+=e.y);s&&s!==t;)i+=s._x,n+=s._y,s=s._parent;return e?new O(i,n,e.width,e.height):new O(i,n,this._width,this._height)},boundsByContainer:function(t){for(var e=this._x,i=this._y,n=(t&&(e+=t.x,i+=t.y),this._parent);n&&n._x!==I;)e+=n._x,i+=n._y,n=n._parent;return t?new O(e,i,t.width,t.height):new O(e,i,this._width,this._height)},boundsByScreen:function(t){return t=this.boundsByContainer(t),t=this.container().toScreen(t)},containerToElement:function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return{x:t,y:e}},move:function(t,e){this.setX(t),this.setY(e)},resize:function(t,e){this.setWidth(t),this.setHeight(e)},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},setPosition:function(t,e){this.setX(t),this.setY(e)},setBounds:function(t,e,i,n){this.setX(t),this.setY(e),this.setWidth(i),this.setHeight(n)},setBoundsI:function(t,e,i,n){this.setX(t>>0),this.setY(e>>0),this.setWidth(i>>0),this.setHeight(n>>0)},setRect:function(t){this.setX(t.x),this.setY(t.y),this.setWidth(t.width),this.setHeight(t.height)},setRectI:function(t){this.setX(m(t.x)),this.setY(m(t.y)),this.setWidth(m(t.width)),this.setHeight(m(t.height))},drawCache:function(t,e){var i;this._dirty&&(i=e._graphics,this._dirty=!1,this._graphics=i,(e._element=this)?(e.resize(this._width,this._height),e.prepare()):i.save(),this._renderCallback?this._renderCallback(i):this._doDraw(i),e.restore(),Cn++),t.drawImage(e._canvas,0,0,this._width,this._height,0,0,this._width,this._height)},draw:function(t,e){this._dirty=!1,this._renderCallback?this._renderCallback(t):this._doDraw(t,e),Cn++},draw2:function(t){this._dirty&&(this._dirty=!1,this._drawings.clear(t),this._renderCallback?this._renderCallback(this._drawings):this._doDraw(this._drawings),Cn++),this._drawings._render()},hitTest:function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},containerToLocal:function(t){for(var e=t.x,i=t.y,n=this;n;)e-=n._x,i-=n._y,n=n._parent;return{x:e,y:i}},localToContainer:function(t){for(var e=t.x,i=t.y,n=this;n;)e+=n._x,i+=n._y,n=n._parent;return{x:e,y:i}},findChildAt:function(t,e,i){var n,s,r,o,a=this._elements,h=a?a.length:0;if(0<h)for(n=h-1;0<=n;n--)if((s=a[n]).isVisible()&&(r=t-s._x,o=e-s._y,i||s._mouseEnabled)&&(s.isLayer()||s.hitTest(r,o))){if(r=s.findChildAt(r,o,i))return r;if(!s.isLayer()&&s._mouseEnabled)return s}return null},$_attached:function(t){this._doAttached(t)},_doAttached:function(t){},$_detached:function(t){this._doDetached(t)},_doDetached:function(t){},_doDraw:function(t,e){},_hoveredChanged:function(){},$_prepareSpan:function(){return this._span||(this._span=document.createElement("span"),this._span.style.position="absolute",this._dom.appendChild(this._span)),this._span}},{addChild:function(t,e){t.addChild(e)}})),ns=(is.prototype,e("RootElement",is,{init:function(t,e,i,n){this._super(t,e),this._container=i,this._context=n},container:function(){return this._container}})),ss=(e("MaskElement",is,{init:function(t,e,i){this._super(!1,t),this._target=e,this._render=i},_doDraw:function(t){this._render&&this._render(t,this._target)}}),e("LayerElement",is,{init:function(t,e,i){this._super(t,e),t?this._dom.style.pointerEvents="none":(this._clip=i,this._drawRect=null)},destroy:function(){this._destroying=!0,this._drawRect=null,this._super()},isLayer:function(){return!0},clip:function(t){var e;this._clip&&(e=this._drawRect=this._drawRect||new O,this.getClientRect(e),t.clipRect(e))}})),p=t({BACK:8,TAB:9,ENTER:13,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F2:113,F3:114,A:65,C:67,D:68,I:73,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,c:99,v:118,y:121,z:122}),rs=t({DEFAULT:"default",AUTO:"auto",POINTER:"pointer",WAIT:"wait",MOVE:"move",COL_RESIZE:"col-resize",ROW_RESIZE:"row-resize",CROSSHAIR:"crosshair",HORZ_RESIZE:"ew-resize",VERT_RESIZE:"ns-resize",NESW_RESIZE:"nesw-resize",NWSE_RESIZE:"nwse-resize",NO_DROP:"no-drop",NOT_ALLOWED:"not-allowed"}),Ji=e("TouchManager",null,{init:function(t){this._super(),this._container=t},touchStart:function(t){},touchMove:function(t){},touchEnd:function(t){},touchCancel:function(t){},_toOffset:function(t){var e=this._container;if(t)if(e){if(e._canvas)return e=e._canvas.getBoundingClientRect(),t.x=t.clientX-e.left,t.y=t.clientY-e.top,t;alert("no canvas")}else alert("no container");else alert("no touch")}}),os=e("VisualTool",null,{init:function(t,e){this._super(),this._owner=t,this._name=e,this._dragTracker=null,this._clickX=0,this._clickY=0,this._currX=0,this._currY=0},destroy:function(){this._destroying=!0,this._currX=this._currY=this._clickX=this._clickY=null,this._super()},dragTracker:null,owner:function(){return this._owner},setDragTracker:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker)&&this._dragTracker.activate()},isDragging:function(){return this._dragTracker&&this._dragTracker.isDragging()},clickX:function(){return this._clickX},clickY:function(){return this._clickY},currX:function(){return this._currX},currY:function(){return this._currY},isEditing:function(){return!1},touchManager:function(){return null},activate:function(){this._doActivate()},deactivate:function(){this._doDeactivate()},keyDown:function(t,e,i,n,s){return t===p.ESCAPE&&this.isDragging()?(this._stopDragTracker(null,null,!0),this.setDragTracker(null),!0):this._doKeyDown(t,e,i,n,s)},keyUp:function(t,e,i,n,s){return this._doKeyUp(t,e,i,n,s)},keyPress:function(t){return this._doKeyPress(t)},click:function(t){t.offsetX&&t.offsetY?this._doClick(t.offsetX,t.offsetY):this._doClick(t.mouseX,t.mouseY)},dblclick:function(t){t.offsetX&&t.offsetY?this._doDblClick(t.offsetX,t.offsetY):this._doDblClick(t.mouseX,t.mouseY)},mouseDown:function(t){var e,i=this._currX=this._clickX=t.mouseX,n=this._currY=this._clickY=t.mouseY;this.isDragging()&&(e=this.dragTracker()instanceof au,this._stopDragTracker(i,n,e),this.setDragTracker(null)),this._doMouseDown(t.mouseX,t.mouseY,t.ctrlKey,t.shiftKey,t.button,t)},mouseMove:function(t){var e=this._currX=t.mouseX,i=this._currY=t.mouseY,n=t.ctrlKey,s=t.shiftKey,r=this.dragTracker();r?r.isDragging()?null==t.buttons||0<t.buttons||an&&0<=t.buttons?r.drag(e,i)||(r=r.getNextRequest(e,i))&&(this._stopDragTracker(e,i,!0),this.setDragTracker(this._getDragTracker(r)),this._startDragTracker(e,i)):this._stopDragTracker(e,i,!0):3<=Math.abs(e-this._clickX)||3<=Math.abs(i-this._clickY)?this._startDragTracker(e,i):this._doMouseMove(e,i,n,s,t):this._doMouseMove(e,i,n,s,t)},mouseUp:function(t){var e=this._currX=t.mouseX,i=this._currY=t.mouseY;this.isDragging()?(!this.hasOwnProperty("_prevCheckIndex")||this._dragTracker instanceof oc||delete this._prevCheckIndex,this._stopDragTracker(e,i,!1)):this._doMouseUp(e,i,t)},mouseEnter:function(t){this._doMouseEnter(t.mouseX,t.mouseY)},mouseLeave:function(t){this._doMouseLeave(t.mouseX,t.mouseY)},mouseOver:function(t){this._doMouseOver(t.mouseX,t.mouseY)},mouseOutside:function(){this._doMouseOutside()},mouseWheel:function(t){return this._doMouseWheel(t)},touchStart:function(t){this.touchManager()?this.touchManager().touchStart(t):this._doTouchStart(t)},touchMove:function(t){this.touchManager()?this.touchManager().touchMove(t):this._doTouchMove(t)},touchEnd:function(t){this.touchManager()?this.touchManager().touchEnd(t):this._doTouchEnd(t)},touchCancel:function(t){this.touchManager()?this.touchManager().touchCancel(t):this._doTouchCancel(t)},findElementAt:function(t,e,i){return this._owner.findElementAt(t,e,i)},setFocus:function(){return this._doSetFocus()},_doActivate:function(){ft("tool: activated")},_doDeactivate:function(){ft("tool: deactivated")},_doKeyDown:function(t,e,i,n){return ft("tool: keyDown("+t+")"),!1},_doKeyUp:function(t,e,i,n){return ft("tool: keyUp("+t+")"),!1},_doKeyPress:function(t){ft("tool: keyPress("+t+")")},_doClick:function(t,e){ft("tool: click("+t+","+e+")")},_doDblClick:function(t,e){ft("tool: dblClick("+t+","+e+")")},_doMouseDown:function(t,e){ft("tool: mouseDown("+t+","+e+")")},_doMouseMove:function(t,e,i,n,s){ft("tool: mouseMove("+t+","+e+")")},_doMouseUp:function(t,e){ft("tool: mouseUp("+t+","+e+")")},_doMouseEnter:function(t,e){ft("tool: mouseEnter("+t+","+e+")")},_doMouseLeave:function(t,e){ft("tool: mouseLeave("+t+","+e+")")},_doMouseOver:function(t,e){ft("tool: mouseOver("+t+","+e+")")},_doMouseOutside:function(){},_doMouseWheel:function(t){return ft("tool: mouseWheel("+t.deltaX+","+t.deltaY+")"),!1},_doTouchStart:function(t){ft("tool: touchStart")},_doTouchMove:function(t){ft("tool: touchMove")},_doTouchEnd:function(t){ft("tool: touchEnd")},_doTouchCancel:function(t){ft("tool: touchCancel")},_startDragTracker:function(t,e,i){this._dragTracker&&(this._dragTracker.start(t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},_stopDragTracker:function(t,e,i){var n;this.isDragging()&&(n=this._dragTracker,i?n.cancel():n.drop(t,e),this.setDragTracker(null),this._doDragTrackerFinished(n,i),this._owner)&&this._owner.invalidate&&this._owner.invalidate()},_doDragTrackerStarted:function(t){ft("dragTracker started: "+t.name())},_doDragTrackerFinished:function(t,e){ft("dragTracker stopped: "+t.name()+", "+(e?"canceled":"completed"))},_doSetFocus:function(){}}),_n=e("EditRequest",null,{init:function(){this._super()},cursor:function(){return rs.AUTO},source:function(){return null},isSelectable:function(){return!1},isDblClickable:function(){return!1}}),as=e("DragTracker",null,{init:function(t,e,i,n){this._super(),this._container=t,this._name=e,this._active=!1,this._completed=!1,this._dragging=!1,this._startX=i,this._startY=n,this._currentX=0,this._currentY=0},cancelabel:!1,container:function(){return this._container},name:function(){return this._name},isActive:function(){return this._active},isDragging:function(){return this._dragging},startWhenCreated:function(){return!1},isCompleted:function(){return this._completed},activate:function(){this._active||(this._doActivate(),this._active=!0)},deactivate:function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},start:function(t,e,i){return this.cancel(),!(!this._active||!this._doStart(t,e,i)||(this._currentX=this._startX=t,this._currentY=this._startY=e,this._dragging=!0,this._completed=!1,this._showFeedback(t,e),0))},drag:function(t,e){return!(!this._dragging||(this._currentX=t,this._currentY=e,!this._doDrag(t,e))||(this._moveFeedback(t,e),0))},cancel:function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this._doEnded()}}finally{this._hideFeedback()}},drop:function(t,e){try{if(this._dragging)try{this._currentX=t,this._currentY=e,this._dragging=!1,this._canAccept(t,e)?(this._doCompleted(t,e),this._completed=!0):this._doCanceled(t,e)}finally{this._doEnded()}}finally{this._hideFeedback()}},getNextRequest:function(t,e){return null},startX:function(){return this._startX},startY:function(){return this._startY},currentX:function(){return this._currentX},currentY:function(){return this._currentY},offsetX:function(){return this._currentX-this._startX},offsetY:function(){return this._currentY-this._startY},_showFeedback:function(t,e){},_moveFeedback:function(t,e){},_hideFeedback:function(){},_doActivate:function(){ft(this._name+" activated")},_doDeactivate:function(){ft(this._name+" deactivated")},_doStart:function(t,e){return!0},_doDrag:function(t,e){return!0},_doCanceled:function(){},_canAccept:function(t,e){return!0},_doCompleted:function(){},_doEnded:function(){},_findElementAt:function(t,e,i){return this._container.findElementAt(t,e,i)}}),hs=(e("SingleTouchTracker",null,{init:function(){this._super()},start:function(t,e){},move:function(t,e){},stop:function(t,e){}}),e("SingleTouchManager",Ji,{init:function(t){this._super(t),this._touchId=void 0,this._started=null,this._seconded=null,this._startX=NaN,this._startY=NaN,this._tapped=0,this._dragging=!1,this._prevX=NaN,this._prevY=NaN,this._longTapTimer=void 0,this._tracker=null,this._events=[],this._touches=[],this._longTapDuration=500,this._doubleTapInterval=300,this._tapThreshold=4},touchHandler:null,tapHandler:null,doubleTapHandler:null,longTapHandler:null,dragStartHandler:null,dragHandler:null,dragEndHandler:null,swipeHandler:null,longTapDuration:null,doubleTapInterval:null,tapThreshold:null,isSingleTouch:function(){return 1==this._touches.length},removeTouches:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];-1<(n=this._touches.indexOf(n.identifier))&&this._touches.splice(n,1)}},touchStart:function(t){clearTimeout(this._longTapTimer);var e=t.changedTouches;if(_t("#### touch Start",t.touches.length,this._touches.length),1<t.touches.length||0<this._touches.length)for(var i=0,n=e.length;i<n;i++){var s=e[i];this._touches.push(s.identifier)}else 0<e.length?(s=this._toOffset(e[0]),this._tracker&&(this._tracker.stop(s.x,s.y),this._tracker=null),this._touchId=s.identifier,this._touches.push(s.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(t,s.x,s.y))?this._tracker.start(s.x,s.y):(0==this._tapped?(this._started=gt(),this._prevX=this._startX=s.x,this._prevY=this._startY=s.y):(this._seconded=gt(),this._prevX=s.x,this._prevY=s.y),this._events=[],this._events.push({x:s.x,y:s.y,t:t.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this._longTapDuration))):alert("no touch ?")},touchMove:function(t){var e=this.$_findTouch(t);_t("#### touch Move",e,this.isSingleTouch()),e&&this.isSingleTouch()&&(this._tracker?(t.cancelable&&t.preventDefault(),this._tracker.move(e.x,e.y)):(this._dragging?this._dragHandler&&this._dragHandler(this._prevX,this._prevY,e.x,e.y)&&t.cancelable&&t.preventDefault():Math.abs(this._prevX-e.x)>this._tapThreshold||Math.abs(this._prevY-e.y)>this._tapThreshold?(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,e.x,e.y)&&t.cancelable&&t.preventDefault()):t.cancelable&&t.preventDefault(),this._prevX=e.x,this._prevY=e.y,this._events.push({x:e.x,y:e.y,t:t.timeStamp}),30<this._events.length&&this._events.splice(0,15)))},touchEnd:function(t){if(clearTimeout(this._longTapTimer),_t("#### touch end",this.isSingleTouch()),void 0===this._touchId)this.removeTouches(t.changedTouches);else{if((e=this.$_findTouch(t))&&this.isSingleTouch()){t.cancelable&&t.preventDefault();var e,i=this._container;i._currentX=e.x,i._currentY=e.y;try{this._tracker?this._tracker.stop(e.x,e.y):this._dragging?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe()):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,gt()-this._started<this._doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(this._startX,this._startY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._starty=this._prevY,this._tapHandler&&this._tapHandler(this._prevX,this._prevY))):alert("touch end")}catch(t){}}this._tracker=null,this.removeTouches(t.changedTouches),on&&(this._touchEndt=gt())}},touchCancel:function(t){t.preventDefault(),this.removeTouches(t.changedTouches),clearTimeout(this._longTapTimer);t=this.$_findTouch(t);t&&this._tracker&&this._tracker.stop(t.x,t.y),this._tracker=null},$_findTouch:function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var n=e[i];if(n.identifier==this._touchId)return this._toOffset(n)}return null},$_checkSwipe:function(){var t=this._events,e=t.length;if(!(e<2)){for(var i=t[e-1],n=t[e-2],s=e-3;0<=s&&!(100<i.t-n.t);s--)n=t[s];var r,o,e=n.x,a=n.y,h=i.x,l=i.y,d=Math.sqrt(Math.pow(e-h,2)+Math.pow(a-l,2))/Math.max(16,i.t-n.t);.1<d&&(r=Math.log(.1/d)/Math.log(.998),d=d*(1-Math.pow(.998,1+r))/(1-.998),o="right",45<(l=(l=Math.round(180*Math.atan2(l-a,h-e)/Math.PI))<0?360+l:l)&&l<=135?o="bottom":135<l&&l<=225?o="left":225<l&&l<=315&&(o="top"),this._swipeHandler(r,d,o))}}})),S=(e("MobileContextMenu",null,{init:function(){this._super("focusView")},show:function(t){},close:function(){}}),e("MobileContextMenuView",le,{init:function(t){this._super(),this._container=t,this._dom=new E(this.$_createElement())},show:function(t){},close:function(){},$_createElement:function(){}}),t({TEXT:"text",NUMBER:"number",BOOLEAN:"boolean",DATETIME:"datetime",OBJECT:"object",CHAR:"char",UNUM:"unum",INT:"int",UINT:"uint",DATE:"date"})),v=t({NONE:"none",CREATED:"created",UPDATED:"updated",DELETED:"deleted",CREATE_AND_DELETED:"createAndDeleted",isDeleted:function(t){return t==v.DELETED||t==v.CREATE_AND_DELETED}}),ls=t({NONE:"none",AUTO:"auto",EXPLICIT:"explicit"}),ds=t({NORMAL:"normal",UPPER:"upper",LOWER:"lower",DEFAULT:"default"}),H=t({NORMAL:"normal",FOCUSED:"focused",UPDATING:"updating",INSERTING:"inserting",APPENDING:"appending",DUMMY:"dummy",isEditing:function(t){return t==H.UPDATING||t==H.INSERTING||t==H.APPENDING},isInserting:function(t){return t==H.INSERTING||t==H.APPENDING}}),us=t({ROWS:"rows",ITEMS:"items"}),cs=t({HORIZONTAL:"horizontal",VERTICAL:"vertical"}),_s=t({UP:"up",HOVER:"hover",DOWN:"down"}),Ji=t({NONE:0,SORT:1}),fs=t({VISIBLE:"visible",HOVERED:"hovered",ALWAYS:"always",HIDDEN:"hidden"}),ms=t({AUTO:"auto",EXPLICIT:"explicit"}),gs=t({NONE:"none",EXCLUSIVE:"exclusive",INCLUSIVE:"inclusive",REVERSE:"reverse"}),ps=t({ASCENDING:"ascending",DESCENDING:"descending"}),ws=t({SENSITIVE:"sensitive",INSENSITIVE:"insensitive"}),vs=t({AUTO:"auto",EXPLICIT:"explicit"}),Cs=t({NONE:"none",ACTION:"action",POPUP:"popup",IMAGE:"image"}),ys=t({ALWAYS:"always",DEFAULT:"default",VISIBLE:"visible",HIDDEN:"hidden",ROWFOCUSED:"rowfocused"}),xs=t({SENSITIVE:"sensitvie",INSENSITIVE:"insensitive",LOWER:"lower",UPPER:"upper"}),Is=t({ERROR:"error",WARNING:"warning",INFO:"info",IGNORE:"ignore"}),bs=t({NONE:"none",INDEX:"index",ROW:"row"}),Es=t({NONE:"none",EVEN:"even",EVEN_FILL:"evenFill",FILL:"fill"}),A=t({BOTH:"both",HEADER:"header",FOOTER:"footer",NONE:"none",SUMMARY:"summary",isHeader:function(t){return"both"==t||"header"==t},isFooter:function(t){return"both"==t||"footer"==t},isFooterOnly:function(t){return"footer"==t||"summary"==t}}),Rs=t({NORMAL:"normal",MERGE:"merge",HIDE:"hide"}),Ss=t({ALWAYS:"always",MULTI_ROWS_ONLY:"multiRowsOnly"}),Ts=t({NONE:"none",AGGREGATE:"aggregate",STATISTICAL:"statistical"}),ks=t({NONE:"none",SINGLE:"single",EXTENDED:"extended"}),G=t({BLOCK:"block",ROWS:"rows",COLUMNS:"columns",SINGLE_ROW:"singleRow",SINGLE_COLUMN:"singleColumn",SINGLE:"single",NONE:"none",isSingle:function(t){return t&&(t==G.SINGLE_ROW||t==G.SINGLE_COLUMN||t==G.SINGLE)},isRow:function(t){return t&&(t==G.ROWS||t==G.SINGLE_ROW)},isColumn:function(t){return t&&(t==G.COLUMNS||t==G.SINGLE_COLUMN)}}),Ds=t({NONE:"none",HEAD:"head",BODY:"body",TAIL:"tail"}),Bs=t({NORMAL:"normal",CHECK:"check",RADIO:"radio",SEPARATOR:"separator"}),P=t({NONE:"none",LEFT_EDGE:"leftEdge",RIGHT_EDGE:"rightEdge",TOP_EDGE:"topEdge",BOTTOM_EDGE:"bottomEdge",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center"}),Os=t({DEFAULT:"default",NONE:"none",LEFT:"left",RIGHT:"right",UPPER:"upper",LOWER:"lower",LEFT_FILL:"leftFill",RIGHT_FILL:"rightFill",UPPER_FILL:"upperFill",LOWER_FILL:"lowerFill"}),Ms=t({NONE:"none",EXPLICIT:"explicit",ELLIPSE:"ellipse",NORMAL:"normal"}),D=(t({CLIP:"clip",ELLIPSIS:"ellipsis",PATH:"path"}),t({NEAR:"near",CENTER:"center",FAR:"far"})),Fs=t({LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",NONE:"none"}),Ns=t({NONE:"none",CENTER:"center",BOTH:"both",WIDTH:"width",HEIGHT:"height",AUTO:"auto"}),Ls=t({MASK:"mask",INVERSION:"inversion"}),Is={ERROR:"error",WARNING:"warning",INFO:"info",IGNORE:"ignore"},As="always",Vs="update",Ps="insert",Hs=t({ROW:"row",CELL:"cell",DEFAULT:"default"}),Gs=t({DEFAULT:"default",TEXT:"text",NONE:"none",IMAGE:"image"}),$s=t({DEFAULT:"default",FIXED:"fixed"}),Us=t({ROW:"row",DATA:"data",FILL:"fill",CELL:"cell"}),Ws=t({BEFORE_EDITCOMMIT:"beforeEditCommit",NORMAL:"normal"}),zs=t({LEFT_TOP:"leftTop",LEFT_BOTTOM:"leftBottom",RIGHT_TOP:"rightTop",RIGHT_BOTTOM:"rightBottom"}),Ks=t({LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",LEFT_TOP:"leftTop",LEFT_BOTTOM:"leftBottom",RIGHT_TOP:"rightTop",RIGHT_BOTTOM:"rightBottom",CENTER:"center"}),Ys=t({VALUE:"value",LABEL:"label",VALUE_LABEL:"valueLabel",LABEL_VALUE:"labelValue"}),Xs=t({NORMAL:"normal",TODAY:"today",TODAY_WHEN_NULL:"todayWhenNull"}),qs=t({DEFAULT:"default",CANCEL:"cancel",COMMIT:"commit"}),js=t({DEFAULT:"default",ALWAYS:"always"}),Zs=e("Dimension",null,{init:function(t){this._super(),this._value=NaN,this._valuePercent=!1,this._minimum=NaN,this._minimumPercent=!1,this._maximum=NaN,this._maximumPercent=!1,t&&this.setSize(t)},size:null,minSize:null,maxSize:null,setSize:function(t){t!=this.size&&(this._size=t,t=this.parse(t),this._value=t.value,this._valuePercent=t.percent)},setMinSize:function(t){t!=this.minSize&&(this._minSize=t,t=this.parse(t),this._minimum=t.value,this._minimumPercent=t.percent)},setMaxSize:function(t){t!=this.maxSize&&(this._maxSize=t,t=this.parse(t),this._maximum=t.value,this._maximumPercent=t.percent)},getDimension:function(t){var e,i=t;return isNaN(this._value)||(i=this._value?this._valuePercent?this._value*t/100:this._value:0),isNaN(this._minimum)||(e=this._minimum?this._minimumPercent?this._minimum*t/100:this._minimum:0,i=Math.max(e,i)),isNaN(this._maximum)||(e=this._maximum?this._maximumPercent?this._maximum*t/100:this._maximum:0,i=Math.min(e,i)),i},equals:function(t){return this._value==t._value&&this._valuePercent==t._valuePercent&&this._minimum==t._minimum&&this._minimumPercent==t._minimumPercent&&this._maximum==t._maximum&&this._maximumPercent==t._maximumPercent},toString:function(){return this._size||""},parse:function(t){var e,i={value:NaN,percent:!1};return(t=t&&String(t).trim())&&(e=t.length,i.percent="%"==t.charAt(e-1),!i.percent||0<(e=(t=t.substring(0,e-1)).length))&&(i.value=Number(t)),i}},{createFrom:function(t){var e,i=null;return t&&0<(t=t.trim()).length&&(0<(e=t.split(",")).length&&(t=e[o]&&e[0].trim())&&(i=new Zs).setSize(t),1<e.length&&(t=e[1]&&e[1].trim())&&(i=new Zs).setMinSize(t),2<e.length)&&(t=e[2]&&e[2].trim())&&(i=new Zs).setMaxSize(t),i},areEquals:function(t,e){return t===e||!(!t||!e)&&t.equals(e)}}),$=e("CellIndex",null,{init:function(t,e,i,n){this._super(!0),this._grid=t,this._itemIndex=isNaN(e)?-1:e,this._column=i,this._verticalStep=n||Hs.DEFAULT,this._item=null},verticalStep:Hs.DEFAULT,grid:function(){return this._grid},itemIndex:function(t){return 0<arguments.length?(this._itemIndex=t,this):this._itemIndex},setItemIndex:function(t){return this._itemIndex=t,this},column:function(t){return 0<arguments.length?(this._column=t,this):this._column},setColumn:function(t){this._column=t},dataColumn:function(){return this._column instanceof M&&this._column},valueColumn:function(){return this._column instanceof zl&&this._column},group:function(){return this._column instanceof R&&this._column},I:function(){return this._itemIndex},C:function(){return this._column},col:function(){return this._column.index()},dataField:function(){return this._column instanceof M?this._column.dataIndex():-1},item:function(){return this._grid&&this._grid.getItem(this._itemIndex)||this._item},dataRow:function(){var t=this.item();return t?t.dataRow():-1},dataId:function(){var t=this.item();return t?t.dataId():-1},value:function(){var t=this._column;if(t instanceof M){var e=t.dataIndex();if(e<0)throw new Error("Not exists data field: "+t.fieldName());t=this.item();if(t)return t.getData(e);throw new Error("Invalid item index: "+this._itemIndex)}return I},isFixed:function(){var t,e;return!!(this._grid&&this._column&&this._column.isVisible())&&(t=this._grid.layoutManager(),(e=this._column.root().displayIndex())<t.fixedColCount()||e>=t.rfixedStartCol()||0<=this._itemIndex&&this._itemIndex<t.fixedItemCount())},isFixedCol:function(){var t;return!!(this._grid&&this._column&&this._column.isVisible())&&(t=this._grid.layoutManager(),this._column.root().displayIndex()<t.fixedColCount())},isRightFixedCol:function(){var t;return!!(this._grid&&this._column&&this._column.isVisible())&&(t=this._grid.layoutManager(),this._column.root().displayIndex()>=t.rfixedStartCol())},isFixedRow:function(){var t;return!(!this._grid||!this._column)&&(t=this._grid.layoutManager(),this._itemIndex<t.fixedItemCount())},isTop:function(){var t=this._column;return!t||!t.group()||R.isTop(t)},isBottom:function(){var t=this._column;return!t||!t.group()||R.isBottom(t)},isLeft:function(){var t=this._column;return!!t&&(t.group()?0==t.group().displayIndex()&&R.isLeft(t):0==t.displayIndex())},isRight:function(){var t=this._column;return!!t&&(t.group()?0==t.group().displayIndex()&&R.isRight(t):t.displayIndex()==this._grid.visibleColumnCount()-1)},isFirst:function(){var t;if(this._column&&(this._grid&&0<this._grid.visibleColumnCount()))return(t=(t=this._grid.getVisibleColumn(0))instanceof zl?t:t.root().first())==this._column;return!1},isEditableFirst:function(){var t,e=this._grid;if(e&&this._column)for(var i=e.collectColumns(!0,!0,!0),n=i.indexOf(this._column)-1;n--;){if((t=i[n])instanceof Yl)return!1;if(t.isEditable()&&!t.isReadOnly()&&t.isVisible())return!1}return!0},isLast:function(){var t;if(this._column&&(this._grid&&0<this._grid.visibleColumnCount()))return(t=(t=this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1))instanceof zl?t:t.root().last())==this._column;return!1},isEditableLast:function(){var t,e=this._grid;if(e&&this._column)for(var i=e.collectColumns(!0,!0,!0),n=i.indexOf(this._column)+1,s=i.length;n<s;n++){if((t=i[n])instanceof Yl)return!1;if(t.isEditable()&&!t.isReadOnly()&&t.isVisible())return!1}return!0},editable:function(){var t=this.item();return t&&(0<=t.dataRow()||t.itemState()==H.INSERTING||t.itemState()==H.APPENDING)},clone:function(){return new $(this._grid,this._itemIndex,this._column,this._verticalStep)},assign:function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._column=t._column,this._verticalStep=t._verticalStep,this._item=t._item||null):(this._itemIndex=-1,this._column=null,this._item=null),this},proxy:function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this._column?this._column.name():null,dataRow:this.dataRow(),fieldIndex:this.dataColumn()?this._column.dataIndex():-1,fieldName:this.dataColumn()?this._column.fieldName():null}},set:function(t,e,i){3<=arguments.length?(this._grid=t,this._itemIndex=e,this._column=i):2==arguments.length&&(this._itemIndex=t,this._column=e)},isValid:function(){return this._grid&&this._grid.isValid(this)},normalize:function(t,e){return t&&(this._grid=t,this._column||(this._column=t.getFirstColumn()),this._itemIndex=e&&-1==this._itemIndex?-1:Math.max(0,Math.min(this._itemIndex,t.itemCount()-1))),this},isMath:function(t,e){return this._column===e&&(e=this.item(),0<=t?e&&e.dataRow()==t:!e||e.dataRow()==t)},incRow:function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount()-1,this._itemIndex+t)))},first:function(){this._grid&&(this._itemIndex=0)},last:function(){this._grid&&(this._itemIndex=this._grid.itemCount()-1)},right:function(){var t=Js(this._grid,this._column);t&&(this._column=t)},left:function(){var t=Qs(this._grid,this._column);t&&(this._column=t)},next:function(){var t=tr(this._grid,this._column);return!!t&&(this._column=t,!0)},prev:function(){var t=er(this._grid,this._column);return!!t&&(this._column=t,!0)},lower:function(t){return this._verticalStep!==Hs.ROW||t?this._verticalStep===Hs.CELL?this.isBottom()?this._itemIndex<this._grid.itemCount()-1&&(this.incRow(1),this._column=R.getTop(this._column),!0):(this._column=R.getLower(this._column),!0):this.isBottom()?this._itemIndex<this._grid.itemCount()-1&&(this.incRow(1),!0):(this._column=R.getLower(this._column),!0):this._itemIndex<this._grid.itemCount()-1&&(this.incRow(1),!0)},upper:function(t){return this._verticalStep!==Hs.ROW||t?this._verticalStep===Hs.CELL?this.isTop()?0<this._itemIndex&&(this.incRow(-1),this._column=R.getBottom(this._column),!0):(this._column=R.getUpper(this._column),!0):this.isTop()?0<this._itemIndex&&(this.incRow(-1),!0):(this._column=R.getUpper(this._column),!0):0<this._itemIndex&&(this.incRow(-1),!0)},home:function(){var t=this._grid;t&&0<t.visibleColumnCount()&&(t=t.getVisibleColumn(0),this._column=t instanceof zl?t:t.root().first())},end:function(){var t=this._grid;t&&0<t.visibleColumnCount()&&(t=t.getVisibleColumn(t.visibleColumnCount()-1),this._column=t instanceof zl?t:t.root().last())},down:function(t,e){this._verticalStep==Hs.ROW&&!t||this.isBottom()||e?this._itemIndex<this._grid.itemCount()-1&&(this.incRow(1),this._verticalStep==Hs.CELL)&&(this._column=R.getTop(this._column)):this._column=R.getLower(this._column)},up:function(t){this._verticalStep==Hs.ROW&&!t||this.isTop()?0<this._itemIndex&&(this.incRow(-1),this._verticalStep==Hs.CELL)&&(this._column=R.getBottom(this._column)):this._column=R.getUpper(this._column)},toString:function(){var t=this._column?this._column.root():null,e=this._column?this._column.dataRoot():null;return"("+(t?t.displayIndex():"null")+","+(e?e.displayIndex():"null")+","+this._itemIndex+")"}},{NULL:null,$_temp:null,temp:function(t,e,i){return $.$_temp._grid=t,$.$_temp._itemIndex=e,$.$_temp._column=i,$.$_temp._item=null,$.$_temp},areEquals:function(t,e){return t===e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._column===e._column},nullProxy:function(){return{itemIndex:-1,column:null,dataRow:-1,fieldIndex:-1,fieldName:null}}},function(t){t.NULL=new t,t.$_temp=new t}),Js=function(t,e){if(t&&e){var i,n,s=t.layoutManager(),r=R.getRight(e);if(r)return r;for(i=(e.group()?e.root():e).displayIndex()+1,n=s.columnCount();i<n;i++){if((r=s.getColumn(i))instanceof zl)return r;if(r instanceof R&&(r=r.first()))return r}}return null},Qs=function(t,e){if(t&&e){var i,n=t.layoutManager(),s=R.getLeft(e);if(s)return s;for(i=(e.group()?e.root():e).displayIndex()-1;0<=i;i--){if((s=n.getColumn(i))instanceof zl)return s;if(s instanceof R&&(s=s.last()))return s}}return null},tr=function(t,e){if(t&&e){var i,n,s=t.layoutManager(),r=R.getNext(e);if(r)return r;for(i=(e.group()?e.root():e).displayIndex()+1,n=s.columnCount();i<n;i++){if((r=s.getColumn(i))instanceof zl)return r;if(r instanceof R&&(r=r.first()))return r}}return null},er=function(t,e){if(t&&e){var i,n=t.layoutManager(),s=R.getPrev(e);if(s)return s;for(i=(e.group()?e.root():e).displayIndex()-1;0<=i;i++){if((s=n.getColumn(i))instanceof zl)return s;if(s instanceof R&&(s=s.last()))return s}}return null},ir=e("GridRange",null,{init:function(){this._super(),this._row1=0,this._col1=null,this._row2=-1,this._col2=null},isEmpty:function(){return this._row2<this._row1||null==this._col2&&null==this._col2},R1:function(){return this._row1},C1:function(){return this._col1},R2:function(){return this._row2},C2:function(){return this._col2},top:function(){return this._row1<=this._row2?this._row1:this._row2},bottom:function(){return this._row1<=this._row2?this._row2:this._row1},firstCell:function(){var t=new $;return t.setItemIndex(this._row1<=this._row2?this._row1:this._row2),this._col1.dataRoot().distance()<=this._col2.dataRoot().distance()?t._column=this._col1:t._column=this._col2,t},lastCell:function(){var t=new $;return t.setItemIndex(this._row1>=this._row2?this._row1:this._row2),this._col1.dataRoot().distance()>=this._col2.dataRoot().distance()?t._column=this._col1:t._column=this._col2,t},contains:function(t,e){return!!e&&(e=e.root().displayIndex(),t>=this._row1)&&t<=this._row2&&e>=this._col1.root().displayIndex()&&e<=this._col2.root().displayIndex()},containsIndex:function(t){return t&&this.contains(t._itemIndex,t._column)},normalize:function(){var t;return this._row1>this._row2&&(t=this._row1,this._row1=this._row2,this._row2=t),this._col1.dataRoot().distance()>this._col2.dataRoot().distance()&&(t=this._col1,this._col1=this._col2,this._col2=t),this},normalizeData:function(){this.normalize();var t=this._col1;return t instanceof R&&(this._col1=R.getFirstDataRoot(t)),(t=this._col2)instanceof R&&(this._col2=R.getLastDataRoot(t)),this}},{$_setRange:function(t,e,i,n,s){return t._row1=e<=n?e:n,t._row2=e<=n?n:e,i===s?t._col1=t._col2=i:(t._col1=i.dataRoot().distance()<=s.dataRoot().distance()?i:s,t._col2=i.dataRoot().distance()<=s.dataRoot().distance()?s:i),t},create:function(t,e){return e&&t!==e?ir.$_setRange(new ir,t._itemIndex,t._column,e._itemIndex,e._column):((e=new ir)._row1=e._row2=t._itemIndex,e._col1=e._col2=t._column,e)},temp:function(t,e){var i=ir.$_TEMP;return e&&t!==e?ir.$_setRange(i,t._itemIndex,t._column,e._itemIndex,e._column):(i._row1=i._row2=t._itemIndex,i._col1=i._col2=t._column,i)},createRange:function(t,e,i,n){return ir.$_setRange(new ir,t,e,i,n)}}),nr=(ir.NULL=new ir,ir.$_TEMP=new ir,e("IconElement",is,{init:function(t,e){this._super(t,e),this._image=null},setImage:function(t){t!=this._image&&(this._image=t,this.invalidate())},iconWidth:function(){return this._image?this._image.width:0},iconHeight:function(){return this._image?this._image.height:0},_hoverChanged:function(){},_doDraw:function(t){var e,i,n,s,r=this._image;r&&(e=Math.min(this.width(),r.width),i=Math.min(this.height(),r.height),n=(this.width()-e)/2,s=(this.height()-i)/2,t.drawImage(r,n,s,e,i))}})),sr=e("DefaultSummarizer",e("GridSummarizer",null,{init:function(){this._super()},getCount:function(){},getSum:function(t){},getMax:function(t){},getMin:function(t){},getAvg:function(t){},getVar:function(t){},getVarp:function(t){},getStdev:function(t){},getStdevp:function(t){},getDataCount:function(t){},getDataAvg:function(t){}}),{init:function(t){this._super(),this._provider=t},getCount:function(){return this._provider.itemCount()},getSum:function(t){return this._provider.getSum(t)},getMax:function(t){return this._provider.getMax(t)},getMin:function(t){return this._provider.getMin(t)},getAvg:function(t){return this._provider.getAvg(t)},getVar:function(t){return this._provider.getVar(t)},getVarp:function(t){return this._provider.getVarp(t)},getStdev:function(t){return this._provider.getStdev(t)},getStdevp:function(t){return this._provider.getStdevp(t)},getDataCount:function(t){return this._provider.getDataCount(t)},getDataAvg:function(t){return this._provider.getDataAvg(t)}}),rr=e("LinearBarcode",e("BarCode",null,{init:function(){this._super(),this._value=null,this._error=null},value:function(){return this._value},setValue:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},error:function(){return this._error},render:function(t,e){this._error?ft("Barocde error: "+this._error):this._doRender(t,e)},_parse:function(t){},_doRender:function(t,e){}}),{init:function(){this._super()},barFill:null,integralBar:!0,minBarWidth:1,maxBarWidth:0,barWidth:0,_doRender:function(t,e){var i,n;!this._barFill||(i=this._getBarLength())<1||((n=this._barWidth)<=0&&(n=this._integralBar?Math.floor(e.width/i):e.width/i,n=Math.max(this._minBarWidth,n),0<this._maxBarWidth)&&(n=Math.min(this._maxBarWidth,n)),e.x+=(e.width-(i*=n))/2,this._integralBar&&(e.x=Math.floor(e.x)),this._drawBars(t,this._barFill,e.x,e.y,n,e.height))},_getBarLength:function(){return 0},_drawBars:function(t,e,i,n,s,r){}}),or=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],ar=[103,104,105],hr=[251658240,15728640,983040,61440,3840,240,15],lr=e("Code128",rr,{init:function(){this._super(),this._weights=[]},quietZoneWidth:10,_parse:function(t){this._weigthts=[];var e=t?t.length:0;if(!(e<1)){var i,n,s=this._detectType(t),r=(2==s&&e%2==1&&(t="0"+t,e++),ar[s]),o=or[r],a=r;if(this._weigthts.push(o),2==s)for(i=0;i<e;i+=2)n=t.substr(i,2),r=parseInt(n),r=this._convert(s,r),this._weigthts.push(o=or[r]),a+=r*(i+1);else for(i=0;i<e;i++)r=t.charCodeAt(i),r=this._convert(s,r),this._weigthts.push(o=or[r]),a+=r*(i+1);this._weigthts.push(or[a%=103]),this._weigthts.push(or[106])}},_getBarLength:function(){return this._quietZoneWidth+11*(this._weigthts.length-1)+13+this._quietZoneWidth},_drawBars:function(t,e,i,n,s,r){i+=10*s;for(var o,a,h,l=this._weigthts.length-1,d=0;d<l;d++)for(a=this._weigthts[d],o=0;o<6;o++)h=(a&hr[o+1])>>4*(5-o),h*=s,o%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,h,r):t.drawBounds(e,null,i,n,h,r)),i+=h;for(a=this._weigthts[l],o=0;o<7;o++)h=(a&hr[o])>>4*(6-o),h*=s,o%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,h,r):t.drawBounds(e,null,i,n,h,r)),i+=h},_convert:function(t,e){switch(t){case 0:if(0<=e&&e<32)return e+64;if(32<=e&&e<96)return e-32;case 1:if(32<=e&&e<128)return e-32;case 2:if(0<=e&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},_detectType:function(t){var e=/^[0-9]+$/;return e.test(t)?2:(e=/[a-z]/).test(t)?1:0}}),dr={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},ur=e("Code39",rr,{init:function(){this._super(),this._codes=[],this._wideWidth=3},_parse:function(t){if(this._codes=[],t){var e,i,n,s=t.length;for(this._codes.push(dr["*"]),e=0;e<s;e++){if(i=t.charAt(e),!(n=dr[i]))throw new Error("Invalid Code39 character: "+i);this._codes.push(n)}this._codes.push(dr["*"])}},_getBarLength:function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},_drawBars:function(t,e,i,n,s,r){for(var o,a,h,l=this._codes.length,d=0;d<l;d++){for(o=this._codes[d],a=0;a<9;a++)h="n"==o.charAt(a)?1:this._wideWidth,h*=s,a%2==0&&(this._integralBar?t.drawBoundsI(e,null,i,n,h,r):t.drawBounds(e,null,i,n,h,r)),i+=h;d<l-1&&(i+=s)}}});function cr(t,e){this.message=t,this.tokenPos=e}(cr.prototype=new Error).constructor=cr;function _r(t,e){function l(t){return{literal:t,evaluate:function(t,e){return t.literal}}}function i(t){if(d.splice(0,d.length),t)for(var e,i,n,s,r,o,a=t.length,h=0;h<a;)if(0<=(o=t.indexOf("${",h))&&(0<=(r=t.indexOf("}",o+2))?(h<o&&(e=t.substring(h,o),s=l(e),d.push(s)),(e=t.substring(o+2,r).trim())&&(s=(i=e.indexOf("["))&&(n=e.indexOf("]"))&&i<n?{ident:e,idKey:-1,evaluate:function(t,e){var i,n=t.ident,s=n.indexOf("["),r=n.indexOf("]");if(s<r)return i=n.substr(0,s).trim(),n=n.substring(s+1,r).replace(/'|"/g,"").trim(),t.idKey<0&&(t.idKey=e.isIdentifier(i)),e.evaluateIndexerS(t.idKey,n,this._capital)}}:{ident:e,idKey:-1,evaluate:function(t,e){return t.idKey<0&&(t.idKey=e.isIdentifier(t.ident)),e.evaluateIdentifier(t.idKey)}},d.push(s)),h=r+1):o=-1),o<0){e=t.substr(h,a),s=l(e),d.push(s);break}}var n=null,s=e,d=[];this.source=function(){return n},this.setSource=function(t){t!=n&&i(n=t)},this.evaluate=function(t){try{for(var e="",i=0,n=d.length;i<n;i++)e+=d[i].evaluate(d[i],t)||"";return e}catch(t){if(!s)throw t}return null},i(t)}function fr(){this.message=fr.message}function mr(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.datacount=0,this.dataavg=NaN}function gr(t){if(this.fillMode=Mr.SET,this.fillPos=0,this.count=-1,this.rootArray=!0,this.rows="row",this.start=0,this.delimiter=",",this.quoted=!1,this.parentId=0,this.childrenField=null,this.treeField=null,this.iconField=null,this.needSorting=!1,t){for(var e in t.hasOwnProperty("append")&&(this.fillMode=Mr.APPEND),t.hasOwnProperty("fillMode")&&(this.fillMode=t.fillMode),t.hasOwnProperty("fillPos")&&(this.fillPos=t.fillPos),t.hasOwnProperty("count")&&(this.count=t.count),t.hasOwnProperty("rootArray")&&(this.rootArray=t.rootArray),t.hasOwnProperty("rows")&&(this.rows=t.rows),t.hasOwnProperty("start")&&(this.start=t.start),t.hasOwnProperty("delimiter")&&(this.delimiter=t.delimiter),t.hasOwnProperty("quoted")&&(this.quoted=t.quoted),t.hasOwnProperty("itemIndex")&&(this.itemIndex=t.itemIndex),t)void 0!==t[e]&&(this[e]=t[e]);this.parentId=t.parentId||t.parent,this.childrenField=t.childrenField||t.children,this.treeField=t.treeField||t.tree,this.iconField=t.iconField||t.icon,this.needSorting=t.needSorting||t.sorting}}function pr(n){function a(t,e){var i=t.index();if(0<=i)return i;if(e){if(0<=(i=t.footer().index()))return i;for(var n=0,s=t.count();n<s;n++)if(0<=(i=(o=b(t.getItem(n),C))?a(o,e):i))return i}else for(n=0,s=t.count();n<s;n++){var r=t.getItem(n);if(0<=r.index())return r.index();var o=b(r,C);if(o&&0<=(i=a(o)))return i}return-1}var u=n,c=0,_=[],f=[],m=function(t,e,i,n,s){var r,o,a,h,l,d=u._createFooterCallback;if(n&&t instanceof C&&t._setExpanded(!0),u.isMergeMode()){for(t instanceof Hr||(u.expandedAdornments()==A.HEADER||u.expandedAdornments()==A.BOTH?e.push(t):u.expandedAdornments()==A.SUMMARY&&(!d||d(u._handler,hf(t,!0))?e.push(t.footer()):t._hasFooter=!1)),r=0,o=t.count();r<o;r++)if((a=t.getItem(r))instanceof C)if(h=a,i&&(!s||h.level()<=s)||h.isExpanded())m(h,e,i,n,s);else switch(u.collapsedAdornments()){case A.BOTH:e.push(h),h.footer&&e.push(h.footer());break;case A.SUMMARY:case A.FOOTER:e.push(h.footer());break;default:A.HEADER;e.push(h)}else a!=t.footer()&&e.push(a);t instanceof Hr||u.expandedAdornments()!=A.FOOTER&&u.expandedAdornments()!=A.BOTH||(!d||d(u._handler,hf(t,!0))?e.push(t.footer()):t._hasFooter=!1)}else{for(t instanceof Hr||(u.expandedAdornments()==A.SUMMARY?((l=t.footer())._expandable=!0,e.push(l)):e.push(t)),r=0,o=t.count();r<o;r++)if((a=t.getItem(r))instanceof C)if(h=a,i&&(!s||h.level()<=s)||h.isExpanded())m(h,e,i,n,s);else switch(u.collapsedAdornments()){case A.HEADER:e.push(h);break;case A.FOOTER:case A.SUMMARY:(l=h.footer())._expandable=!0,e.push(l);break;default:A.BOTH;e.push(h),h.footer()&&((l=h.footer())._expandable=!1,e.push(h.footer()))}else a instanceof Pr||e.push(a);t instanceof Hr||u.expandedAdornments()==A.BOTH&&((l=t.footer())._expandable=!t._expanded&&!t.isVisible(),e.push(l))}};this.provider=function(){return u},this.count=function(){return _.length},this.fixedCount=function(){return c},this.getItems=function(){return _.slice()},this.getItem=function(t){return _[t]},this.clear=function(t){for(var e=0,i=(t=t||_).length;e<i;e++)t[e]._parent=n._rootItem,t[e]instanceof Vr&&t[e]._children&&this.clear(t[e]._children);t.splice(0,t.length)},this.expand=function(t,e,i,n){var s,r=t,o=e,a=i=!(2<arguments.length)||i,h=n;if(r instanceof Hr)s=c;else{if(u.isMergeMode())switch(u.collapsedAdornments()){case A.BOTH:s=r.index(),_.splice(s,2);break;case A.FOOTER:case A.SUMMARY:s=r.footer().index(),_.splice(s,1);break;default:A.HEADER;s=r.index(),_.splice(s,1)}else switch(u.collapsedAdornments()){case A.BOTH:s=r.index(),_.splice(s,2);break;case A.FOOTER:case A.SUMMARY:s=r.footer().index(),_.splice(s,1);break;case A.HEADER:s=r.index(),_.splice(s,1)}a&&(r._index=-1)}f.splice(0,f.length),m(r,f,o,a,h);for(var l=0,d=f.length;l<d;l++)_.splice(s+l,0,f[l]);return!0},this.collapse=function(t,e){var i,n,s,r;if(t instanceof C&&t._setExpanded(!1),u.isMergeMode()){for(0<=(s=t.index())?(_.splice(s,1),t._index=-1):(s=a(t,u.expandedAdornments()==A.SUMMARY))<0&&(s=a(t));s<_.length&&(i=_[s]).isDescendantOf(t);)_.splice(s,1),i._index=-1,e&&(i instanceof C||i instanceof zh)&&(n=i instanceof C?i:i instanceof zh&&i.parent()._expanded?i.parent():null)&&n._setExpanded(!1);switch(u.collapsedAdornments()){case A.BOTH:t._index=s,_.splice(s,0,t),_.splice(s+1,0,t.footer());break;case A.FOOTER:case A.SUMMARY:_.splice(s,0,t.footer());break;default:A.HEADER;t._index=s,_.splice(s,0,t)}}else{for(0<=(s=t.index())?(_.splice(s,1),t._index=-1):(s=(r=t.footer()).index(),_.splice(s,1),r._index=-1);s<_.length&&(i=_[s]).isDescendantOf(t);)_.splice(s,1),i._index=-1,e&&(i instanceof C||i instanceof Pr)&&(n=i instanceof C?i:i instanceof Pr&&i.parent()._expanded?i.parent():null)&&n._setExpanded(!1);switch(u.collapsedAdornments()){case A.BOTH:t._index=s,_.splice(s,0,t),(r=t.footer())._index=s,r._expandable=!1,_.splice(s+1,0,t.footer());break;case A.FOOTER:case A.SUMMARY:(r=t.footer())._index=s,r._expandable=!0,_.splice(s,0,r);break;default:A.HEADER;t._index=s,_.splice(s,0,t)}}return!0},this.getNext=function(t){return null!=t&&t.isVisible()&&t.index()<this.count()-1?_[t.index()+1]:null},this.getPrior=function(t){return null!=t&&t.isVisible()&&0<t.index()?_[t.index()-1]:null},this._clearAndInit=function(t,e){if(this.clear(),t){c=Math.min(e,t.itemCount());for(var i=0;i<c;i++)_.push(t.getItem(i))}else c=0},this._resetIndices=function(t){for(var e=_.length,i=t=0<arguments.length?t:0;i<e;i++)_[i]._index=i}}function wr(t,e){this.level=0,this.startIndex=t,this.endIndex=e,this.children=[]}var rr=e("DataTag",null,{init:function(){this._super()},connect:function(t){},disconnect:function(){},clearRows:function(){},setRows:function(){},setRowCount:function(t){},insertRow:function(t){},insertRows:function(t,e){},removeRow:function(t){},removeRows:function(t){},updateRow:function(t){},updateRows:function(t,e){},setValue:function(t,e){},moveRow:function(t,e){},moveRows:function(t,e,i){}}),vr=e("DataTagCollection",null,{init:function(t){this._super(),this._owner=t,this._tags=[]},destroy:function(){this._tags=null,this._super()},add:function(t){var e;t&&((e=this._tags||(this._tags=[])).indexOf(t)<0&&e.push(t),t.connect(this._owner))},remove:function(t){var e;t&&this._tags&&0<=(e=this._tags.indexOf(t))&&(this._tags.splice(e,1),t.disconnect())},clearRows:function(){if(this._tags)for(var t=this._tags,e=t.length;e--;)t[e].clearRows()},setRows:function(){if(this._tags)for(var t=this._tags,e=t.length;e--;)t[e].setRows()},setRowCount:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].setRowCount(t)},insertRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].insertRow(t)},insertRows:function(t,e){if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].insertRows(t,e)},removeRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].removeRow(t)},removeRows:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].removeRows(t)},updateRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].updateRow(t)},updateRows:function(t,e){if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].updateRows(t,e)},setValue:function(t,e){if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].setValue(t,e)},moveRow:function(t,e){if(this._tags)for(var i=this._tags,n=i.length;n--;)i[n].moveRow(t,e)},moveRows:function(t,e,i){if(this._tags)for(var n=this._tags,s=n.length;s--;)n[s].moveRows(t,e,i)}}),Cr=e("DataField",le,{init:function(t,e,i){this._super(),this._owner=null,this._index=-1,this._orgFieldName=null,this._orgAttrName=null,this._orgBaseField=null,this._boolParser=null,this._dateParser=null,this._ownerBoolParser=null,this._ownerDateParser=null,t&&this.setFieldName(t),void 0!==e&&(this._dataType="numeric"==e?S.NUMBER:"date"==e?S.DATETIME:e),null!=i&&(t=parseInt(i),this._length=isNaN(t)?0:t),this._runType=void 0,this._ranged=!1,this._runSet=null,this._runMax=void 0,this._runMin=void 0,this._typeLock=!1,this.equalValues=null,this.sameValues=null,this.readValue=null,this.nullValue=void 0,this._calculated=!1,this._objectKey=null,this._objectCallback=null},fieldName:null,dataType:S.TEXT,subTypeEnabled:!0,subType:null,subtypeEnabled:!0,subtype:null,length:0,set:null,header:null,minimum:void 0,maximum:void 0,required:!1,updatable:!0,defaultValue:void 0,baseField:null,booleanFormat:null,dateFormat:null,datetimeFormat:null,amText:null,pmText:null,baseYear:NaN,calculateExpression:null,calculateCallback:null,objectKey:null,objectCallback:null,comparer:null,hash:function(){return this._fieldName},index:function(){return this._index},$_setIndex:function(t){this._index=t},setFieldName:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this._changed())},orgFieldName:function(){return this._orgFieldName},orgAttrName:function(){return this._orgAttrName},setDataType:function(t){"numeric"==t?t=S.NUMBER:"date"==t&&(t=S.DATETIME),t!=this._dataType&&(this._dataType=t,this._resetTypes(),this._changed())},runType:function(){return this._runType},setSubType:function(t){(t=t||null)!=this._subType&&(this._subType=t,this._resetTypes(),this._changed())},setSubTypeEnabled:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this._resetTypes(),this._changed())},getSubtype_:function(){return this._subType},setSubtype:function(t){this.setSubType(t)},isSubtypeEnabled:function(){return this._subtypeEnabled},setSubtypeEnabled:function(t){this.setSubTypeEnabled(t)},setLength:function(t){t!=this._length&&(this._length=t,this._resetTypes(),this._changed())},setSet:function(t){t!==this._set&&k(t)&&(this._set=t,this._resetTypes(),this._changed())},setMinimum:function(t){t!=this._minimum&&(this._minimum=t,this._resetTypes(),this._changed())},setMaximum:function(t){t!=this._maximum&&(this._maximum=t,this._resetTypes(),this._changed())},setRequired:function(t){t!=this._required&&(this._required=t,this._changed())},setHeader:function(t){t!=this._header&&(this._header=t,this._changed())},setDefaultValue:function(t){t!=this._defaultValue&&(this._defaultValue=t)},setBaseField:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this._changed())},booleanFormat_:function(){return this._boolFormat},setBooleanFormat:function(t){this.setBoolFormat(t)},setBoolFormat:function(t){t!=this._boolFormat&&(this._boolFormat=t,this._boolParser=t?new Ee(t):null,this._changed())},datetimeFormat_:function(){return this._dateFormat},setDatetimeFormat:function(t){this.setDateFormat(t)},setDateFormat:function(t){t!=this._dateFormat&&((this._dateFormat=t)?(this._dateParser=new Te(t),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear)):this._dateParser=null,this._changed())},setAmText:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&this._dateParser.setAmText(t),this._changed())},setPmText:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&this._dateParser.setPmText(t),this._changed())},setBaseYear:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&this._dateParser.setBaseYear(t),this._changed())},isEmpty:function(t){var e=null==t||""===t;return e=e||this._dataType!=S.NUMBER?e:isNaN(t)},getBool:function(t,e){return"boolean"==typeof e?e:(this._boolParser||t).toBool(e)},getDate:function(t,e){return e instanceof Date||"number"==typeof e?new Date(e):(this._dateParser||t).toDate(e)},setCalculateExpression:function(t){t!=this._calculateExpression&&(this._calculateExpression=t,this._updatable=!this._calculateExpression&&!this._calculateCallback&&this._updatable)},setCalculateCallback:function(t){t!=this._calculateCallback&&(this._calculateCallback=t,this._updatable=!this._calculateExpression&&!this._calculateCallback&&this._updatable)},isCalculated:function(){return this._calculateCallback||this._calculateExpression},isNull:function(t){if(null==t)return!0;switch(this._runType){case S.TEXT:case S.CHAR:if(0==String(t).length)return!0;break;case S.NUMBER:case S.UNUM:case S.INT:case S.UINT:if(isNaN(t))return!0}return!1},propertyChanged:function(t,e){this._changed()},clone:function(){var t=this._super();return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t},_prepare:function(t){this._owner=t},_changed:function(){this._owner},_resetTypes:function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t._boolParser,this._ownerDateParser=t._dateParser);var e,i,n,s=this._dataType,r=this._subType;if(this._runType=s,this._ranged=!1,(!this._owner||this._owner.isSubTypeEnabled())&&this._subTypeEnabled){if(r)switch(s){case S.TEXT:r==S.CHAR&&0<this._length&&(s=r);break;case S.NUMBER:r!=S.UNUM&&r!=S.INT&&r!=S.UINT||(s=r);break;case S.DATETIME:r==S.DATE&&(s=r)}if(this._runType=s,this._runSet=null,this._set&&this._set.length){if(this._runType==S.DATETIME){for(this._runSet=[],e=0;e<this._set.length;e++)(n=this.getDate(this._ownerDateParser,this._set[e]))&&this._runSet.push(n.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==S.DATE){for(this._runSet=[],e=0;e<this._set.length;e++)(n=this.getDate(this._ownerDateParser,this._set[e]))&&(i=new Date(n),this._runSet.push(i.setHours(0,0,0,0)));this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case S.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case S.DATETIME:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case S.TEXT:this.equalValues=this._equalTextValues,this.sameValues=this._sameTextValues,this.readValue=this._readTextValue,this.nullValue=null;break;case S.CHAR:this.equalValues=this._equalTextValues,this.sameValues=this._sameTextValues,this.readValue=this._readCharValue,this.nullValue=null;break;case S.NUMBER:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readNumberValue,this.nullValue=NaN;break;case S.UNUM:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readUnumValue,this.nullValue=NaN;break;case S.INT:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readIntValue,this.nullValue=NaN;break;case S.UINT:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readUintValue,this.nullValue=NaN;break;case S.DATETIME:this.equalValues=this._equalDateValues,this.sameValues=this._sameDateValues,this.readValue=this._readDatetimeValue,this.nullValue=null;break;case S.DATE:this.equalValues=this._equalDateValues,this.sameValues=this._sameDateValues,this.readValue=this._readDateValue,this.nullValue=null;break;case S.BOOLEAN:this.equalValues=this._equalBoolValues,this.sameValues=this._sameBoolValues,this.readValue=this._readBooleanValue,this.nullValue=!1;break;case S.OBJECT:this.equalValues=this._equalObjectValues,this.sameValues=this._sameObjectValues,this.readValue=this._readObjectValues,this.nullValue=!1;break;default:this.equalValues=this._equalDummyValues,this.sameValues=this._sameDummyValues,this.readValue=this._readDummyValue,this.nullValue=void 0}}}},_refreshFormats:function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||this._dateParser.setBaseYear(t.baseYear()),this._dateParser.amText||this._dateParser.setAmText(t.amText()),this._dateParser.pmText||this._dateParser.setPmText(t.pmText())),this._ownerBoolParser=t._boolParser,this._ownerDateParser=t._dateParser},_equalDummyValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},_sameDummyValues:function(t,e){return null==t?null==e:null!=e&&t==e},_equalTextValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},_sameTextValues:function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},_equalNumberValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},_sameNumberValues:function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},_equalDateValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},_sameDateValues:function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},_equalBoolValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},_sameBoolValues:function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},_equalObjectValues:function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):t===e},_sameObjectValues:function(t,e){return null==t||null==e?null==t&&null==e:t==e},_readDummyValue:function(t){return t},_readTextValue:function(t){return void 0!==t&&(t=null===t?null:String(t),this._ranged)&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},_readCharValue:function(t){return void 0!==t&&(t=(t=null===t?null:String(t))&&t.substr(0,this._length),this._ranged)&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},_readNumberValue:function(t){if(null!=t&&""!==t){t=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));return t}},_readUnumValue:function(t){if(null!=t&&""!==t){t=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,t)}return t}},_readIntValue:function(t){if(null!=t&&""!==t){t=0<=t?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=0<=t?Math.floor(t):Math.ceil(t)}return t}},_readUintValue:function(t){if(null!=t&&""!==t){t=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,Math.floor(Math.floor(t)))}return t}},_readDatetimeValue:function(t){if(void 0!==t){if(null===t)return this.nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,n=this._runSet.length;n--;)if(e.getTime()==this._runSet[n]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},_readDateValue:function(t){if(void 0!==t){if(null===t)return this.nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,n=this._runSet.length;n--;)if(e.getTime()==this._runSet[n]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},_readBooleanValue:function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},_readObjectValues:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+"\r\n"+e)}else if(null!=e&&"object"!=typeof e)try{e=JSON.parse(e)}catch(t){}return e},$_compareObject:function(t,e,i,n){var s=this._objectKey,r=this._objectCallback,t=r?r(this.orgFieldName(),i,t):s&&t.hasOwnProperty(s)?t[s]:null;return(e=r?r(this.orgFieldName(),n,e):s&&e.hasOwnProperty(s)?e[s]:null)<t?1:t<e?0:-1},_calculateValue:function(t,e,i,n,s,r){return this._calculateCallback?this._calculateCallback(e,i,s,r):this._calculateExpression?(this._exprNode||(this._exprNode=ni.Default.parse(this._calculateExpression,Cr.CAPITAL_INDEXERS)),t.setValues(r,n),this._exprNode.evaluate(t)):void 0},proxy:function(){return of(this)}},{CAPITAL_INDEXERS:["value","values"]}),yr=e("DataSourceError",null,{init:function(t){this._super(),this._message=t},message:function(){return this._message}}),xr=e("SimpleDataComparer",null,{init:function(){this._super()},dataType:S.TEXT,compare:function(t,e,i){return t._dataType==S.NUMBER?Number(e)-Number(i):i<e?1:e<i?-1:0}}),Ir=e("DataOutputOptions",null,{init:function(t){this._super(),this._datetimeWriter=null,this._booleanFormatter=null,this._numberFormatter=null,t&&this.assign(t)},datetimeFormat:void 0,booleanFormat:void 0,numberFormat:void 0,datetimeCallback:null,booleanCallback:null,numberCallback:null,nullDateText:null,nullText:null,nanText:null,setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new Re(t):null)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new Fe(t):null)},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new Me(t):null)}}),br=e("DataSource",le,{init:function(){this._super(),this._fields=[],this._calcFields=[],this._fieldNames=[],this._fieldMap={},this._defComparer=new xr,this._comparers=[],this._boolParser=Ee.Default,this._dateParser=Te.Default,this._eventLock=0,this._clients=[],this._calculateRuntime=null},destroy:function(){this._destroying=!0;try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=null,this._calcFields=null,this._fieldNames=null,this._comparers=null,this._clients=null,this._super(!0)},subTypeEnabled:!0,subtypeEnabled:!0,insertable:!0,updatable:!0,deletable:!0,softDeleting:!(fr.message="Client is editing (call grid.commit() or grid.cancel() first)"),deleteCreated:!1,checkStates:!0,restoreMode:ls.NONE,strictRestore:!1,booleanFormat:null,datetimeFormat:null,dateFormat:null,baseYear:2e3,amText:"AM",pmText:"PM",alertClientError:!0,throwClientError:!1,commitBeforeDataEdit:!1,calculateRuntime:function(){return this._calculateRuntime||(this._calculateRuntime=new xc),this._calculateRuntime},setSubTypeEnabled:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=this._fields.length;e--;)this._fields[e]._resetTypes()}},subtypeEnabled_:function(){return this._subTypeEnabled},setSubtypeEnabled:function(t){this.setSubtypeEnabled(t)},setCheckStates:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},setRestoreMode:function(t){var e;t!=this._restoreMode&&(e=this._restoreMode,this._restoreMode=t,this._doRestoreModeChanged(e,t))},fieldCount:function(){return this._fields.length},rowCount:function(){a()},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new Ee(t):Ee.Default)},$_createDateReader:function(){this._datetimeFormat?(this._dateParser=new Te(this._datetimeFormat),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear)):this._dateParser=Te.Default},setDateFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},setAmText:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},setPmText:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},getDatetimeFormat_:function(){return this._dateFormat},setDatetimeFormat:function(t){this.setDateFormat(t)},getField:function(t){return 0<=t&&t<this._fields.length?this._fields[t]:null},isLocal:function(){return!0},isImmediateUpdate:function(){return!1},isSummarized:function(){return!1},$_addField:function(t,e,i){if(!t)throw new Error("fieldName must be exists.");if(0<=this.getFieldIndex(t))throw new Error("fieldName is already exists: "+t);t=new Cr(t,e,i);return this.$_internalInsertField(this._fields.length,t),t},$_internalAddField:function(t){var e=null;return"string"==typeof t?e=this.$_addField(t,S.TEXT,0):t instanceof Cr?(e=t.clone(),this.$_internalInsertField(this._fields.length,e)):(e=this.$_addField(t.fieldName,t.dataType||S.TEXT,t.length),"defaultValue"in t&&(e._defaultValue=t.defaultValue),"baseField"in t&&(e._baseField=t.baseField),"booleanFormat"in t&&e.setBooleanFormat(t.booleanFormat),"datetimeFormat"in t&&e.setDatetimeFormat(t.datetimeFormat),"amText"in t&&(e._amText=t.amText),"pmText"in t&&(e._pmText=t.pmText),"baseYear"in t&&(e._baseYear=t.baseYear),"header"in t&&(e._header=t.header),"objectKey"in t&&(e._objectKey=t.objectKey),"objectCallback"in t&&(e._objectCallback=t.objectCallback)),e},addField:function(t,e,i){var n;if(this._checkClientState()){this.beginUpdate();try{return(n=this.$_internalAddField(t))&&n._resetTypes(this),n}finally{if(e&&this._doFieldsReset(),i)for(var s=0;s<this._values.length;s++)this._values[s]&&this.$_internalCalculateValues(this._values[s],s);this.endUpdate()}}},clearFields:function(){0<this._fields.length&&this._checkClientState()&&(this.$_internalClearFields(),this._doFieldsReset())},setFields:function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),k(t))for(var e,i=t.length,n=0;n<i;n++)e=null,(e=this.$_internalAddField(t[n]))&&e._resetTypes(this)}finally{this.endUpdate(),this._doFieldsReset()}}},getFields:function(){return this._fields.slice()},fieldByName:function(t){if(t)for(var e=t.toUpperCase(),i=0,n=this._fields.length;i<n;i++){var s=this._fields[i];if(s.fieldName()==e)return s}return null},getFieldNames:function(){for(var t=this._fields.length,e=[],i=0;i<t;i++)e.push(this._fields[i]._fieldName);return e},getOrgFieldNames:function(){for(var t=this._fields.length,e=[],i=0;i<t;i++)e.push(this._fields[i]._orgFieldName);return e},getFieldName:function(t){return this._checkFieldIndex(t),this._fields[t]._fieldName},getOrgFieldName:function(t){return this._checkFieldIndex(t),this._fields[t]._orgFieldName},getFieldIndex:function(t){if(t){t=t.toUpperCase();if(t in this._fieldMap)return this._fieldMap[t]}return-1},getFieldIndexC:function(t){return t in this._fieldMap?this._fieldMap[t]:-1},getBaseField:function(t){return 0<=t&&t<this._fields.length?this.getFieldIndex(this._fields[t]._baseField):-1},getFieldIndexOf:function(t){return"string"==typeof t?this.getFieldIndex(t):parseInt(t)},getValueType:function(t){return this._fields[t]._dataType},getDefaultValue:function(t){return this._fields[t]._defaultValue},getRowState:function(t){a()},setRowState:function(t,e,i){a()},clearRowStates:function(t,e){a()},getStateRows:function(t){a()},getAllStateRows:function(){a()},setRowStates:function(t,e,i,n){a()},getRowStateCount:function(t){a()},restoreUpdatedStates:function(t){a()},restoreUpdatedRows:function(t){a()},getUpdatedCells:function(t){a()},beginUpdate:function(){this._checkClientState(),this._eventLock++},endUpdate:function(t){this._checkClientState(),t=!(0<arguments.length)||t,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&t&&this._fireRefresh()},hasData:function(t){return!1},canUpdateField:function(t,e){if(0<=e&&e<this._fields.length){if(!this._fields[e]._updatable&&0<=t)try{var i=this.getRowState(t);return!i||i==v.CREATED||i==v.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},getDataComparer:function(t){if(0<=t)return this._comparers[t]||null},setDataComparer:function(t,e){this._comparers[t]=e||void 0},canSummarize:function(t){if(0<=t&&t<this.fieldCount()){t=this.getValueType(t);if(t==S.BOOLEAN||t==S.NUMBER||S.DATE)return!0}return!1},findRow:function(t,e){return-1},getDistinctValues:function(t,e,i){return null},exportToJson:function(){},exportToCsv:function(t){(new v_).export(this,t)},exportToXml:function(){},registerClient:function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},unregisterClient:function(t){t&&0<=(t=this._clients.indexOf(t))&&this._clients.splice(t,1)},cancelClients:function(){for(var t=this._clients.length;t--;)this._clients[t].cancelDataEditing()},commitClients:function(){for(var t=this._clients.length;t--;)this._clients[t].commitDataEditing()},refreshClients:function(){this._fireRefreshClients()},_checkClientState:function(){var t=this.$_isClientsBusy();if(t.busy){if(this._commitBeforeDataEdit&&1==t.cnt){for(var e=!0,i=0,n=(listeners=t.client._listeners).length;i<n;i++)var s=listeners[i].commit(!1,!0),e=e&&(s||listeners[i].isEditing&&!listeners[i].isEditing());if(e)return!0}if(this._throwClientError)throw new fr;return this._alertClientError&&alert(fr.message),!1}return!0},_doCheckStatesChanged:function(){},_doRestoreModeChanged:function(t,e){},$_isClientsBusy:function(){var t={busy:!1,cnt:0,client:null};if(!this._destroying)for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},_checkFieldIndex:function(t){if(t<0||t>=this._fields.length)throw new Error("Invalid field index: "+t)},$_internalClearFields:function(){this._checkClientState();for(var t=this._fields.length;t--;)this._fields[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},$_internalInsertField:function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||i<t)throw new Error("index is out of bounds:"+t);if(e){e._prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e._fieldName),e.isCalculated()&&this._calcFields.push(e),e.$_setIndex(t);for(var n=(this._fieldMap[e.fieldName()]=t)+1;n<=i;n++)(e=this._fields[n]).$_setIndex(n),this._fieldMap[e.fieldName()]=n;return t}return-1},$_internalCalculateValues:function(t,e){var i=this._calcFields;if(0<i.length){for(var n=[],s=0;s<t.length;s++)n[s]=this.getField(s).readValue(t[s]);for(s=0,len=i.length;s<len;s++){var r=i[s],o=this._fieldMap[r.fieldName()];t[o]=n[o]=r.readValue(r._calculateValue(this._calculateRuntime,e,r.orgFieldName(),this._fieldNames,this.getOrgFieldNames(),n))}}},refreshFieldFormats:function(){for(var t=this._fields.length;t--;)this._fields[t]._refreshFormats(this)},refreshFieldFormat:function(t){t&&t._refreshFormats(this)},_doFieldsReset:function(){},$_createOutputRows:function(t,e,i){i=2<arguments.length?i:0;for(var n,s=this.fieldCount(),r=t.length,o=(e=e instanceof Ir?e:new Ir(e)).nullDateText(),a=e.nullText(),h=e.nanText(),l=0;l<s;l++){var d,u,c=this.getField(l),_=c.orgFieldName();if(c._dataType==S.DATETIME&&((d=e._datetimeCallback)||(u=e._datetimeWriter)||null!=o))if(d)for(n=0;n<r;n++)(f=t[n])[_]=d(n+i,_,f[_]);else for(n=0;n<r;n++){var f,m=(f=t[n])[_];f[_]=m?u?u.getText(f[_]):m:o}else if(c._dataType==S.BOOLEAN&&((d=e._booleanCallback)||(u=e._booleanFormatter)))if(d)for(n=0;n<r;n++)(f=t[n])[_]=d(n+i,_,f[_]);else for(n=0;n<r;n++)(f=t[n])[_]=u.formatValue(f[_]);else if(c._dataType==S.NUMBER&&((d=e._numberCallback)||(u=e._numberFormatter)||null!=h))if(d)for(n=0;n<r;n++)(f=t[n])[_]=d(n+i,_,f[_]);else for(n=0;n<r;n++){var g=(f=t[n])[_];f[_]=null==g||isNaN(g)?h:u?u.format(g):g}else if(null!=a)for(n=0;n<r;n++){g=(f=t[n])[_];f[_]=null==g?a:g}}},$_sortRows:function(t,i,n,e,s){return t.sort(function(t,e){return n(i,t,e)})}}),s=(br.prototype,e("DataProvider",br,{init:function(){this._super(),this._eventLock=0,this._resetLock=0,this._countLock=0,this._tags=new vr(this),this._filters=null,this._filterRuntime=null},filterRuntime:function(){return this._filterRuntime||(this._filterRuntime=new Sr(this)),this._filterRuntime},addTag:function(t){this._tags.add(t)},removeTag:function(t){this._tags.remove(t)},deletedCount:function(){return 0},setFilters:function(t,e){e=0<arguments.length?e:"and",!t||t instanceof kr?(this._filters=t,e&&this._filters.setFilterMode(e)):this._filters=new kr(this.filterRuntime(),t,e)},beginUpdate:function(){this._checkClientState()&&this._eventLock++},endUpdate:function(t){this._checkClientState()&&(t=!(0<arguments.length)||t,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock)&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),0<this._countLock)&&this._fireRowCountChanged(),this._resetLock=this._countLock=0)},setRowCount:function(t,e,i,n){a()},clearRows:function(){a()},setRows:function(t,e,i){a()},setXmlRows:function(t,e,i){a()},addRows:function(t,e,i,n){a()},insertRows:function(t,e,i,n,s){a()},insertXmlRows:function(t,e,i,n,s){a()},updateRows:function(t,e,i,n,s){a()},updateStrictRows:function(t,e,i,n,s){a()},updateXmlRows:function(t,e,i,n,s){a()},appendXmlRows:function(t,e,i,n){a()},getRows:function(t,e){a()},fillValue:function(t,e){a()},getRowObjects:function(t,e){a()},getOutputObject:function(t,e,i){a()},getValue:function(t,e){a()},setValue:function(t,e,i){a()},getRow:function(t){a()},getRowObject:function(t){if(t<0||t>=this.getRowCount())throw new RangeError("row is out of range: "+t);for(var e,i,n=this.fieldCount(),s={},r=0;r<n;r++)e=this.getOrgFieldName(r),i=this.getValue(t,r),s[e]=i;return s},getColumn:function(t,e,i){a()},hasData:function(t){a()},insertRow:function(t,e){a()},appendRow:function(t){a()},removeRow:function(t){a()},removeRows:function(t){a()},updateRow:function(t,e){a()},updateStrictRow:function(t,e){a()},moveRow:function(t,e){a()},moveRows:function(t,e,i){a()},canUpdateRow:function(t){return!1},canAppendRow:function(){return!1},canInsertRow:function(t){return!1},canDeleteRow:function(t){return!1},objectToRow:function(t){var e=[];if(t)for(var i,n=this.fieldCount(),s=0;s<n;s++)i=this.getOrgFieldName(s),t.hasOwnProperty(i)&&(e[s]=t[i]);return e},equalValues:function(t,e,i){var n;return e===i||(n=this._fields[t],e=this.getValue(e,t),i=this.getValue(i,t),n.equalValues(e,i))},equalTexts:function(t,e,i){return e===i||(this._fields[t],e=this.getValue(e,t),i=this.getValue(i,t),null==e?null==i:null!=i&&e.toLowerCase()==i.toLowerCase())},sameValues:function(t,e,i){var n;return e===i||(n=this._fields[t],e=this.getValue(e,t),i=this.getValue(i,t),n.sameValues(e,i))},compareValues:function(t,e,i){return 0},compareTexts:function(t,e,i){return 0},compareNumbers:function(t,e,i){return 0},compareBools:function(t,e,i){return 0},compareObjects:function(t,e,i){return 0},summarize:function(t,e){return!1},summarizeRange:function(t,e,i){return!1},copyRows:function(t,e,i,n){},hideCount:function(){return 0},_doFieldsReset:function(){this._fireReset()},refreshClients:function(){this._fireRefreshClients()},tags:function(){return this._tags},isEventLocked:function(){return 0<this._eventLock},filters:function(){return this._filters||null},getHandler:function(){return this.fireObjectEvent(s.GET_HANDLER)},_fireDisposed:function(){this._eventLock<=0&&this.fireEvent(s.DISPOSED)},_fireReset:function(){this._eventLock<=0?this.fireEvent(s.RESET):this._resetLock++},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(s.REFRESH)},_fireRefreshClients:function(){this._eventLock<=0&&this.fireEvent(s.REFRESH)},_fireRowCountChanged:function(){this._eventLock<=0?this.fireEvent(s.ROW_COUNT_CHANGED):this._countLock++},_fireRowInserting:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_INSERTING,t,e)},_fireRowInserted:function(t,e){this._eventLock<=0&&(this.fireEvent(s.ROW_INSERTED,t,e),this.fireEvent(s.DATA_CHANGED))},_fireRowsInserted:function(t,e,i){this._eventLock<=0&&(this.fireEvent(s.ROWS_INSERTED,t,e,i),this.fireEvent(s.DATA_CHANGED))},_fireRowRemoving:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_REMOVING,t)},_fireRowRemoved:function(t){this._eventLock<=0&&(this.fireEvent(s.ROW_REMOVED,t),this.fireEvent(s.DATA_CHANGED))},_fireRowsRemoving:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROWS_REMOVING,t)},_fireRowsRemoved:function(t){this._eventLock<=0&&(this.fireEvent(s.ROWS_REMOVED,t),this.fireEvent(s.DATA_CHANGED))},_fireRowUpdating:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_UPDATING,t,e)},_fireRowUpdated:function(t){this._eventLock<=0&&(this.fireEvent(s.ROW_UPDATED,t),this.fireEvent(s.DATA_CHANGED))},_fireRowsUpdated:function(t,e){this._eventLock<=0&&(this.fireEvent(s.ROWS_UPDATED,t,e),this.fireEvent(s.DATA_CHANGED))},_fireRowListUpdated:function(t){this._eventLock<=0&&this.fireEvent(s.LIST_UPDATED,t)},_fireRowMoving:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_MOVING,t,e)},_fireRowMoved:function(t,e){this._eventLock<=0&&this.fireEvent(s.ROW_MOVED,t,e)},_fireRowsMoving:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROWS_MOVING,t,e,i)},_fireRowsMoved:function(t,e,i){this._eventLock<=0&&this.fireEvent(s.ROWS_MOVED,t,e,i)},fireValueChanging:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(s.VALUE_CHANGING,t,e,i)},_fireValueChanged:function(t,e){this._eventLock<=0&&(this.fireEvent(s.VALUE_CHANGED,t,e),this.fireEvent(s.DATA_CHANGED))},_fireRowStateChanged:function(t){this._eventLock<=0&&this.fireEvent(s.STATE_CHANGED,t)},_fireRowStatesChanged:function(t){this._eventLock<=0&&this.fireEvent(s.STATES_CHANGED,t)},_fireRowStatesCleared:function(){this._eventLock<=0&&this.fireEvent(s.STATES_CLEARED)},_fireRestoreRows:function(){this._eventLock<=0&&this.fireEvent(s.RESTOREROWS)},_fireRowHided:function(t,e){this._eventLock<=0&&this.fireEvent(s.ROW_HIDED,t,e)}})),Er=(s.DISPOSED="onDataProvderDisposed",s.RESET="onDataProviderReset",s.REFRESH="onDataProviderRefresh",s.REFRESH_CLIENT="onDataProviderRefreshClient",s.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",s.ROW_INSERTING="onDataProviderRowInserting",s.ROW_INSERTED="onDataProviderRowInserted",s.ROWS_INSERTED="onDataProviderRowsInserted",s.ROW_REMOVING="onDataProviderRowRemoving",s.ROW_REMOVED="onDataProviderRowRemoved",s.ROWS_REMOVING="onDataProviderRowsRemoving",s.ROWS_REMOVED="onDataProviderRowsRemoved",s.ROW_UPDATING="onDataProviderRowUpdating",s.ROW_UPDATED="onDataProviderRowUpdated",s.ROWS_UPDATED="onDataProviderRowsUpdated",s.LIST_UPDATED="onDataProviderRowListUpdated",s.ROW_MOVING="onDataProviderRowMoving",s.ROW_MOVED="onDataProviderRowMoved",s.ROWS_MOVING="onDataProviderRowsMoving",s.ROWS_MOVED="onDataProviderRowsMoved",s.VALUE_CHANGING="onDataProviderValueChanging",s.VALUE_CHANGED="onDataProviderValueChanged",s.DATA_CHANGED="onDataProviderDataChanged",s.STATE_CHANGED="onDataProviderStateChanged",s.STATES_CHANGED="onDataProviderStatesChanged",s.STATES_CLEARED="onDataProviderStatesCleared",s.RESTOREROWS="onDataProviderRestoreRows",s.ROW_HIDED="onDataProviderRowHided",s.GET_HANDLER="getHandler",s.prototype),Rr=e("DataProviderObserver",null,{init:function(){this._super()},onDataProvderDisposed:function(t){},onDataProviderReset:function(t){},onDataProviderRefresh:function(t){},onDataProviderRefreshClient:function(t){},onDataProviderRowCountChanged:function(t,e){},onDataProviderRowInserting:function(t,e,i){return!0},onDataProviderRowInserted:function(t,e){},onDataProviderRowsInserted:function(t,e,i){},onDataProviderRowRemoving:function(t,e){return!0},onDataProviderRowRemoved:function(t,e){},onDataProviderRowsRemoving:function(t,e){return!0},onDataProviderRowsRemoved:function(t,e){},onDataProviderRowUpdating:function(t,e,i){return!0},onDataProviderRowUpdated:function(t,e){},onDataProviderRowsUpdated:function(t,e,i){},onDataProviderRowListUpdated:function(t,e){},onDataProviderRowMoving:function(t,e,i){return!0},onDataProviderRowMoved:function(t,e,i){},onDataProviderRowsMoving:function(t,e,i,n){return!0},onDataProviderRowsMoved:function(t,e,i,n){},onDataProviderValueChanging:function(t,e,i,n){return!0},onDataProviderValueChanged:function(t,e,i){},onDataProviderStateChanged:function(t,e){},onDataProviderStatesChanged:function(t,e){},onDataProviderStatesCleared:function(t){}}),Sr=e("DataFilterRuntime",Si,{init:function(){this._super(),this._provider=null,this._fieldCount=0,this._row=-1,this._values=null},prepare:function(t){this._provider=t,this._fieldCount=t?t.fieldCount():0},setRow:function(t,e){this._row=t,this._values=e},isIdentifier:function(t){return t=t.toLowerCase(),Sr.IDENTS.hasOwnProperty(t)?dc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(t===dc.ID_ROW)return this._item.index();throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);switch(t){case dc.ID_VALUE:case dc.ID_VALUES:return this._values[e]}throw new h("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){switch(t){case dc.ID_VALUE:case dc.ID_VALUES:var n=this.$_getField(e,i);return this._values[n]}throw new h("Invalid identifier indexer: "+t)},$_getField:function(t,e){e=e?this._provider.getFieldIndexC(t):this._provider.getFieldIndex(t);if(e<0||e>=this._fieldCount)throw new h("Data field is not exits:"+t);return e}},{ID_ROW:0,ID_VALUE:1,ID_VALUES:2},function(t){t.IDENTS={row:t.ID_ROW,value:t.ID_VALUE,values:t.ID_VALUES}}),Tr=e("DataFilter",null,{init:function(t,e){this._super(),this._runtime=t,this._exproNode=null,this._active=!1,this.setCriteria(e)},criteria:null,active:!0,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?ni.Default.parse(t,Tr.CAPITAL_INDEXERS):null)},select:function(t,e){return!this._exprNode||(this._runtime.setRow(t,e),this._exprNode.evaluate(this._runtime))}},{CAPITAL_INDEXERS:["value","values","len"]}),kr=e("DataFilterCollection",null,{init:function(t,e,i){this._super(),this._runtime=t,this._isOr=!1,this.load(e),i&&this.setFilterMode(i)},filterMode:"and",setFilterMode:function(t){t=t&&t.toLocaleLowerCase();t!=this._filterMode&&(this._filterMode=t,this._isOr=this._filterMode==kr.FILTER_OR)},load:function(t){if(k(t)||(t=t&&[t]),this._filters=[],t)for(var e=0,i=t.length;e<i;e++){var n=null,s=t[e];s&&("string"==typeof s?n=new Tr(this._runtime,s):s.criteria&&(n=new Tr(this._runtime,s.criteria))),n&&this._filters.push(n)}},prepare:function(t){this._runtime.prepare(t)},select:function(t,e){var i,n=this._filters,s=n.length;if(this._isOr){for(i=0;i<s;i++)if(1==n[i].select(t,e))return!0;return!1}for(i=0;i<s;i++)if(0==n[i].select(t,e))return!1;return!0}},{FILTER_AND:"and",FILTER_OR:"or"}),Dr={csvToArray:function(t,e,i,n,s,r){i=2<arguments.length?Math.max(i,0):0,n=3<arguments.length?n:-1,r=5<arguments.length?r:",";for(var o,a,h,l=[],d=[],u=e.length,c=0,_=[];c<u;)'"'==(o=e.charAt(c))?h?a&&'"'==e.charAt(c+1)?(_.push(o),c++):a&&(a=!1,s)||_.push(o):(h=a=!0,s||_.push(o)):a||o!=r&&"\r"!=o&&"\n"!=o?(h=!0,_.push(o)):(o==r?d.push(_.join("")):"\r"!=o&&"\n"!=o||(d.push(_.join("")),l.push(d),d=[],"\n"==e.charAt(c+1)&&c++),h=!(_=[])),c++;a&&_.splice(0,0,'"'),0<_.length&&d.push(_.join("")),0<d.length&&l.push(d),0<i&&(n<=0?l.splice(0,i):l=l.splice(i,n));var f=t.getFields(),m=f.length,g=0<m,c=0;for(cnt=l.length;c<cnt;c++){d=l[c],g&&d.length>m&&(d.length=m);for(var p=0;p<m;p++)d[p]=f[p].readValue(d[p])}return _=d=null,l},xmlToRow:function(t,e,i){for(var n,s,r=t.childNodes,o=e.length,a=new Array(o),h=0,l=r.length;h<l;h++){var d,u,c=r[h];0<=(d=i.indexOf(c.tagName))&&null!=(u=null==(u=c.nodeValue)&&c.hasChildNodes()?Tt(c.childNodes[0].nodeType,3,4)?c.childNodes[0].nodeValue:void 0:u)&&(a[d]=e[d].readValue(u))}for(h=0;h<o;h++)void 0===a[h]&&(n=t,s=i[h],null!=(u=n?n.getAttribute(s):void 0))&&(a[h]=e[h].readValue(u));return a},xmlToArray:function(t,e,i,n){i=2<arguments.length?i:0,n=3<arguments.length?n:-1;var s=null,r=Dr.xmlToRow,o=e?e.length:0;if(o&&(i=Math.max(0,i),n<0&&(n=o),n=Math.min(o-i,n)))for(var a=t.getFields(),h=t.getOrgFieldNames(),s=(a.length,new Array(n)),l=0;l<n;l++){var d=r(e[l+i],a,h);s[l]=d}return s}},Br=(mr.prototype.clear=function(){this.count=this.datacount=0,this.sum=this.max=this.min=this.avg=this.vars=this.dataavg=NaN},e("LocalDataProvider",s,{init:function(){Er.init.call(this),this._points=[],this._nextPoint=0,this._values=[],this._rowIds=[],this._rowStates=[],this._orgValues=null,this._needRestore=!1,this._deletedCount=0,this._nextRowId=0,this._hideRowIds=[],this.calculateRuntime()},destroy:function(){this._destroying=!0,this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hideRowIds=null,this._super()},getRowId:function(t){return this._rowIds[t]},getDataRowById:function(t){return this._rowIds.indexOf(t)},addRow:function(t){var e=this.rowCount();return this.insertRow(this._values.length,t)?e:-1},rowCount:function(){return this._values.length},isSummarized:function(){return!0},deletedCount:function(){return this._deletedCount},getOptions:function(){return this._super()},setOptions:function(t){this._super(t)},$_internalInsertField:function(t,e){if(0<=(t=this._super(t,e))){for(var i,n=this._values.length,s=0;s<n;s++)(i=this._values[s])&&i.splice(t,0,void 0);if(this._orgValues)for(n=Math.min(n,this._orgValues.length),s=0;s<n;s++)(i=this._orgValues[s])&&i.splice(t,0,void 0)}return t},internalClearFields:function(){Er.internalClearFields.call(this),this.$_clearRows()},hasData:function(t){return 0<=t&&t<this._values.length&&void 0!==this._values[t]},setRowCount:function(t,e,i,n){if(this._checkClientState()){e=1<arguments.length&&e,i=2<arguments.length?i:null,n=3<arguments.length?n:"none";var s=this._values,r=s.length,o=Math.max(0,t);if(o!=r){var a,h,l,d,u,c=this._rowIds,_=this._rowStates;if(this.refreshFieldFormats(),s.length=c.length=_.length=o,this._orgValues&&this._orgValues.length>o&&(this._orgValues.length=o),r<o&&(e||i)){if(d=this._fields.length,(u=!k(u=i)&&u&&vt(u)?this.objectToRow(u):u)&&u.length<1&&(u=null),e||u)for(var f,m=u?Math.min(u.length,d):0,g=r;g<o;g++){if(l=[],e)for(a=0;a<d;a++)h=this._fields[a],l[a]=void 0!==h._defaultValue?h._defaultValue:h._nullValue;if(0<m)for(a=0;a<m;a++)void 0!==(f=u[a])&&(l[a]=this._fields[a].readValue(f));s[g]=l}}else if(o<r&&0<this._deletedCount)for(g=r-1;o<=g;g--)_[g]!=v.DELETED&&_[g]!=v.CREATE_AND_DELETED||this._deletedCount--,_[g]=v.NONE;for(n=this.isCheckStates()&&n?n:v.NONE,g=r;g<o;g++)_[g]=n,c[g]=this._nextRowId++;for(g=this._hideRowIds.length-1;0<=g;g--)a=this._hideRowIds[g],c.indexOf(a)<0&&this._hideRowIds.splice(g,1);this.tags().setRowCount(o),this._fireRefresh(),this._fireRowCountChanged()}}},$_clearRows:function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hideRowIds.length=0,this._hideRowIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.tags().clearRows()},clearRows:function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged())},setRows:function(t,e,i){if(this._checkClientState()&&(e=1<arguments.length?e:0,0!=(i=2<arguments.length?i:-1))){_t(">>>>>> set rows..."+gt()),this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var n,s,r,o,a,h,l=this.isCheckStates(),d=this._filters;if(t&&0<(n=t.length)&&e<n)if(e=Math.max(0,e),i=i<0?n:Math.min(i,n-e),d){for(this._values.length=this._rowIds.length=this._rowStates.length=i,d.prepare(this),s=n,o=r=0,a=e;a<s&&o<i;a++)k(h=t[a])||(h=this.objectToRow(h)),d.select(r++,h)&&this._internalSetRow(o++,h,l);this._values.length=this._rowIds.length=this._rowStates.length=o}else if(e<(s=Math.min(n,e+i)))for(this._values.length=this._rowIds.length=this._rowStates.length=s-e,o=0,a=e;a<s;a++)k(h=t[a])||(h=this.objectToRow(h)),this._internalSetRow(o++,h,l)}finally{this.endUpdate(!1)}this.tags().setRows(),this._fireRefresh(),this._fireRowCountChanged()}},setXmlRows:function(t,e,i){this._checkClientState()&&(e=1<arguments.length?e:0,0!=(i=2<arguments.length?i:-1))&&(t=Dr.xmlToArray(this,t,e,i),this.setRows(t))},addRows:function(t,e,i,n){e=1<arguments.length?e:0,i=2<arguments.length?i:-1,n=3<arguments.length&&n,this.insertRows(this.rowCount(),t,e,i,n)},appendRows:function(t,e,i,n){e=1<arguments.length?e:0,i=2<arguments.length?i:-1,n=3<arguments.length&&n,this.insertRows(this.rowCount(),t,e,i,n)},insertRows:function(t,e,i,n,s,r){var o,a,h,l,d;if((i=2<arguments.length?i:0,n=3<arguments.length?n:-1,s=4<arguments.length&&s,e&&!((o=e.length)<1))&&0!=(n=n<0?o:Math.min(o,n))){if(this._checkClientState(),t<0||t>this._values.length)throw new RangeError("row is out of bounds:"+t);if(this.refreshFieldFormats(),i=Math.max(0,i),h=Math.min(o,i+n),s)for(l=t,a=i;a<h;a++)this._fireRowInserting(l)&&(k(d=e[a])||(d=this.objectToRow(d)),this._internalInsertRow(l,d),this.tags().insertRow(l),this._fireRowInserted(l),this._fireRowCountChanged(),l++);else{for(l=t,a=i;a<h;a++,l++)d=e[a],xt(d)||(d=this.objectToRow(d)),this._internalInsertRow(l,d);this.tags().insertRows(t,n=h-i),this._fireRowsInserted(t,n,r),this._fireRowCountChanged()}}},appendXmlRows:function(t,e,i,n){this.insertXmlRows(this.rowCount(),t,e,i,n)},insertXmlRows:function(t,e,i,n,s,r){this._checkClientState()&&(e=Dr.xmlToArray(this,e,i=2<arguments.length?i:0,n=3<arguments.length?n:-1),this.insertRows(t,e,i,n,s,r))},updateRows:function(t,e,i,n,s){this.$_updateRows(t,e,i,n,!1,s)},updateStrictRows:function(t,e,i,n,s){this.$_updateRows(t,e,i,n,!0,s)},$_updateRows:function(t,e,i,n,s,r){var o;if(this._checkClientState()&&(i=2<arguments.length?i:0,n=3<arguments.length?n:-1,r=4<arguments.length&&r,e&&!((o=e.length)<1)&&0!=(n=n<0?o:Math.min(o,n)))){this.refreshFieldFormats();var a,h,l=this.rowCount();if(i=Math.max(0,i),!((a=Math.min(o,i+n))<=i))if(r)for(u=t,c=i;c<a&&!(l<=u);c++,u++)this._fireRowUpdating(u)&&(h=e[c],this._internalUpdateRow(u,h,s,!0),this.tags().updateRow(u),this._fireRowUpdated(u));else{for(var d=[],u=t,c=i;c<a&&!(l<=u);c++,u++)this._rowStates[u]==v.NONE&&d.push(u),h=e[c],this._internalUpdateRow(u,h,s,!1);0<d.length&&this._fireRowStatesChanged(d),this.tags().updateRows(t,n=a-i),this._fireRowsUpdated(t,n)}}},updateXmlRows:function(t,e,i,n,s){this._checkClientState()&&(e=Dr.xmlToArray(this,e,i,n),this.updateRows(t,e,i,n,s))},fillValue:function(t,e){if(!(Object.keys(t).length<=0)){var i,n=[],s=[];for(i in t){for(var r=+i,o=(n.push(r),{}),a=0;a<t[i].length;a++)o[this._fields[t[i][a]].orgFieldName()]=e;var h=this._internalUpdateRow(r,o,!1);this._rowStates[r]!==v.NONE&&h&&s.push(i)}s.length&&this._fireRowStatesChanged(s),n.length&&this._fireRowListUpdated(n)}},getValue:function(t,e){this._checkRowIndex(t),this._checkFieldIndex(e);t=this._values[t];return t?t[e]:I},setValue:function(t,e,i){if(!this._checkClientState())return!1;this._checkRowIndex(t),this._checkFieldIndex(e);var n=this._fields[e],s=this._rowStates[t];if(!n._updatable&&(s==v.NONE||s==v.UPDATED))return!1;var r,o=this._values[t],i=n.readValue(i);if(o&&n.equalValues(i,o[e]))return!1;this.refreshFieldFormat(n);n=this.isCheckStates()&&(s==v.NONE||!s);return o||(this._values[t]=o=[]),n&&this._orgValues&&(r=o.concat()),o[e]=i,this.$_internalCalculateValues(o,t),n?(r&&(this._orgValues[t]=r),this._changeRowState(t,v.UPDATED,!0)):this._needRestore&&this.$_restoreState(t),this.tags().setValue(t,e),this._fireValueChanged(t,e),!0},getRow:function(t){this._checkRowIndex(t);t=this._values[t];return t?t.slice():[]},$_getRowObject:function(t,e){var i={},n=this._values[t];if(n)for(var s=0;s<e;s++)i[this.getOrgFieldName(s)]=n[s];return i},getRowObject:function(t){return this._checkRowIndex(t),this.$_getRowObject(t,this.fieldCount())},getRows:function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:-1;var i=this._values.length,n=Math.max(0,t),s=e<0?i-1:Math.min(i-1,e);if(i<=n||s<n)return[];for(var r=s-n+1,o=new Array(r),a=0;a<r;a++)o[a]=this._values[a+n]||[];return o},getRowObjects:function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:-1;var i=this._values.length,n=Math.max(0,t),s=e<0?i-1:Math.min(i-1,e);if(i<=n||s<n)return[];for(var r=this.fieldCount(),o=s-n+1,a=new Array(o),h=0;h<o;h++)a[h]=this.$_getRowObject(h+n,r);return a},getOutputObjects:function(t,e,i){i=this.getRowObjects(e,i);return t&&this.$_createOutputRows(i,t,e),i},getOutputObject:function(t,e){e=this.getRowObject(e);return t&&this.$_createOutputRows([e],t),e},getColumn:function(t,e,i){e=1<arguments.length?e:0,i=2<arguments.length?i:-1,this._checkFieldIndex(t);var n=this._values.length;if(i=i<0?n-1:Math.min(n-1,i),n<=(e=Math.max(0,e))||i<e)return null;for(var s=new Array(i-e+1),r=e;r<=i;r++){var o=this._values[r];s[r-e]=o&&o[t]}return s},updateRow:function(t,e){return this.$_updateRow(t,e,!1)},updateStrictRow:function(t,e){return this.$_updateRow(t,e,!0)},$_updateRow:function(t,e,i){if(this._checkClientState())return this._checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this._fireRowUpdating(t)||(this._internalUpdateRow(t,e,i,!0),this.tags().updateRow(t),this._fireRowUpdated(t),0))},insertRow:function(t,e,i){if(!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new RangeError("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this._fireRowInserting(t,e)||(xt(e)||(e=this.objectToRow(e)),this._internalInsertRow(t,e),this.tags().insertRow(t),this._fireRowInserted(t,i),this._fireRowCountChanged(),0))},appendRow:function(t){var e=this.rowCount();return this.insertRow(this._values.length,t)?e:-1},$_deleteRow:function(t){var e;return!!this._fireRowRemoving(t)&&(e=this._rowStates[t],this._internalRemoveRow(t),v.isDeleted(e)&&this._deletedCount--,this.tags().removeRow(t),this._fireRowRemoved(t),this._fireRowCountChanged(),!0)},removeRow:function(t){if(this._checkClientState()){if(this._checkRowIndex(t),this._softDeleting&&this._checkStates){switch(this._rowStates[t]){case v.CREATED:this._deleteCreated?this.$_deleteRow(t):this._changeRowState(t,v.CREATE_AND_DELETED,!0,!0,!0);break;case v.DELETED:case v.CREATE_AND_DELETED:break;default:this._changeRowState(t,v.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)}},removeRows:function(t,e){if(this._checkClientState()){var i,n,s,r=this.isDeleteCreated();if(t&&!((i=t.length)<1)){if(this._softDeleting&&this._checkStates){for(var o,a=e?null:[],h=i;h--;){switch(n=t[h],this._checkRowIndex(n),o=!1,s=this._rowStates[n]){case v.CREATED:r||(o=this._changeRowState(n,v.CREATE_AND_DELETED,e,!1,!0),t.splice(h,1));break;case v.DELETED:case v.CREATE_AND_DELETED:t.splice(h,1);break;default:o=this._changeRowState(n,v.DELETED,e,!1,!0),t.splice(h,1)}a&&o&&a.push(n)}e||a&&0<a.length&&this._fireRowStatesChanged(a)}if(0<(i=t.length))if(1<i&&t.sort(function(t,e){return t-e}),e)for(h=i;h--;)n=t[h],this._checkRowIndex(n),this.$_deleteRow(n);else if(this._fireRowsRemoving(t)){for(h=i;h--;)n=t[h],this._checkRowIndex(n),s=this._rowStates[n],this._internalRemoveRow(n),v.isDeleted(s)&&this._deletedCount--;this.tags().removeRows(t),this._fireRowsRemoved(t),this._fireRowCountChanged()}}}},moveRow:function(t,e){this._checkClientState()&&t!=e&&(this._checkRowIndex(t),this._checkRowIndex(e),this._fireRowMoving(t,e))&&(this._internalMoveRow(t,e),this.tags().moveRow(t,e),this._fireRowMoved(t,e))},moveRows:function(t,e,i){!this._checkClientState()||e<1||t==i||(this._checkRowIndex(t),this._checkRowIndex(i),this._fireRowsMoving(t,e,i)&&(this._internalMoveRows(t,e,i),this.tags().moveRows(t,e,i),this._fireRowsMoved(t,e,i)))},getRowState:function(t){return this._checkRowIndex(t),this._rowStates[t]||v.NONE},$_checkDeleted:function(t,e){v.isDeleted(e)?this._deletedCount++:v.isDeleted(t)&&!v.isDeleted(e)&&this._deletedCount--},setRowState:function(t,e,i){this._checkClientState()&&(this._checkRowIndex(t),this._orgValues?this._changeRowStateEx(t,e,!0,i):this._changeRowState(t,e,!0,i))},setRowStates:function(t,e,i,n){var s,r,o,a,h,l;if(this._checkClientState()&&(t&&!((r=t.length)<1)))if(n)for(s=0;s<r;s++)o=t[s],this._checkRowIndex(o),this._changeRowStateEx(o,e,!0,i);else{for(a=[],h=this._rowStates,s=0;s<r;s++)o=t[s],this._checkRowIndex(o),e!=(l=h[o])&&(h[o]=e,a.push(o),this.$_checkDeleted(l,e),this._orgValues)&&this.$_prepareOrgValues(o,l,e);0<a.length&&this._fireRowStatesChanged(a)}},clearRowStates:function(t,e){if(this._checkClientState()){e=1<arguments.length&&e;for(var i=this._rowStates,n=[],s=i.length;s--;)switch(i[s]){case v.CREATE_AND_DELETED:case v.DELETED:t?(e?this.$_deleteRow(s):(this._internalRemoveRow(s),this._deletedCount--),n.push(s)):(this._changeRowState(s,v.NONE,e),this._deletedCount--);break;default:this._changeRowState(s,v.NONE,e)}this.$_resetOrgValues(),e||(0<n.length&&(this._fireRowsRemoved(n),this._fireRowCountChanged()),this._fireRowStatesCleared())}},getStateRows:function(t){var e,i,n=[];if(t)for(e=0,i=this._rowStates.length;e<i;e++)this._rowStates[e]==t&&n.push(e);return n},getAllStateRows:function(){for(var t,e={},i=e.created=[],n=e.updated=[],s=e.deleted=[],r=e.createAndDeleted=[],o=0,a=this._rowStates.length;o<a;o++)(t=this._rowStates[o])===v.CREATED?i.push(o):t===v.UPDATED?n.push(o):t===v.DELETED?s.push(o):t===v.CREATE_AND_DELETED&&r.push(o);return e},getRowStateCount:function(t){var e,i,n=t?t.length:0,s=this._rowStates.length,r=0;if(n&&s)if(1<n)for(e=0;e<s;e++)i=this._rowStates[e],0<=t.indexOf(i)&&r++;else for(i=t[0],e=0;e<s;e++)this._rowStates[e]===i&&r++;return r},$_restoreState:function(t){if(this._rowStates[t]===v.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],n=this.isStrictRestore(),s=0,r=this._fields.length;s<r;s++){var o=i.length>s?i[s]:void 0,a=e.length>s?e[s]:void 0;if(n){if(!this._fields[s].equalValues(o,a))return!1}else if(!this._fields[s].sameValues(o,a))return!1}return this._rowStates[t]=v.NONE,!0}}return!1},restoreUpdatedStates:function(t){if(this._orgValues&&this._checkClientState()){var e,i,n,s=[];if(k(t="number"==typeof t?[t]:t))for(e=0,i=t.length;e<i;e++)0<=(n=t[e])&&n<this._values.length&&this.$_restoreState(n)&&s.push(n);else for(e=0,i=this._values.length;e<i;e++)this.$_restoreState(e)&&s.push(e);0<s.length&&this._fireRowStatesChanged(s)}},$_restoreRow:function(t){if(this._rowStates[t]===v.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],n=0,s=Math.min(e.length,this._fields.length);n<s;n++)i[n]=e[n];return this._rowStates[t]=v.NONE,!0}}return!1},restoreUpdatedRows:function(t){if(this._orgValues&&this._checkClientState()){var e,i,n,s=[];if(k(t))for(e=0,i=t.length;e<i;e++)0<=(n=t[e])&&n<this._values.length&&this.$_restoreRow(n)&&s.push(n);else if(t||0==t)0<=(n=t)&&n<this._values.length&&this.$_restoreRow(n)&&s.push(n);else for(e=0,i=this._values.length;e<i;e++)this.$_restoreRow(e)&&s.push(e);0<s.length&&(this._fireRestoreRows(s),this._fireRowStatesChanged(s))}},getUpdatedCells:function(t){var e=this.restoreMode();if(!this._orgValues||e!=ls.AUTO&&e!=ls.EXPLICIT)return null;if(null==t?t=this.getStateRows(v.UPDATED):k(t)||"number"==typeof t&&(t=[t]),!k(t))return null;for(var i=[],n=0,s=t.length;n<s;n++){var r=t[n],o=0<=r&&this._orgValues&&r<this._orgValues.length?this._orgValues[r]:null;if(o){for(var a=this._values[r],h=this.isStrictRestore(),l=[],d=0,u=this._fields.length;d<u;d++){var c=a.length>d?a[d]:void 0,_=o.length>d?o[d]:void 0;this._fields[d].isCalculated()||(h?this._fields[d].equalValues(c,_)||l.push({fieldName:this.getOrgFieldName(d),oldValue:o[d],newValue:a[d]}):this._fields[d].sameValues(c,_)||l.push({fieldName:this.getOrgFieldName(d),oldValue:o[d],newValue:a[d]}))}0<l.length&&i.push({__rowId:r,updatedCells:l})}}return i},findRow:function(t,e){if(!(!t||t.length<1||!e||e.length<t.length)){for(var i,n,s,r,o=[],a=[],h=this._values,l=t.length,d=0;d<l;d++)0<=(i="string"==typeof t[d]?this.getFieldIndex(t[d]):Number(t[d]))&&i<this.fieldCount()&&o.indexOf(i)<0&&(o.push(i),a.push(e[d]));for(s=o.length,d=0;d<s;d++)o[d]=this._fields[o[d]];for(l=h.length,d=0;d<l;d++){for(n=h[d],r=!0,i=0;i<s;i++)if(!o[i].equalValues(a[i],n[i])){r=!1;break}if(r)return d}}return-1},savePoint:function(t){if(this._checkClientState()){t=!(0<arguments.length)||arguments;var e,i,n,s,r,o=this._values;if(0<this._fields.length&&o&&0<(i=o.length)){for(s=new Array(i),e=0;e<i;e++)n=(n=o[e])&&n.concat(),s[e]=n;return r=t?this._rowStates.concat():null,e=this._nextPoint++,this._points.push({id:e,data:s,states:r}),e}return-1}},rollback:function(t){if(this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);i=i.states;i&&(this._rowStates=i.concat());break}}},$_removeSavePoints:function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},clearSavePoints:function(){this.$_removeSavePoints(0)},getSavePoints:function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},canUpdateRow:function(t){return!0},canAppendRow:function(){return!0},canInsertRow:function(t){return!0},canDeleteRow:function(t){return!0},$_getSortedRows:function(t){var e,i=new Array(this._values.length);switch(this.getField(t).dataType()){case S.NUMBER:e=this.compareNumbers.bind(this);break;case S.DATETIME:e=this.compareDates.bind(this);break;case S.BOOLEAN:e=this.compareBools.bind(this);break;case S.OBJECT:e=this.compareObjects.bind(this);break;default:e=this.compareValues.bind(this)}for(var n=i.length;n--;)i[n]=n;return this.$_sortRows(i,t,e,0,i.length-1),i},getDistinctValues:function(t,e,i){e=1<arguments.length?e:-1,this._checkFieldIndex(t);var n=[];if(0<(e=e<0?this._values.length:e)){var s,r,o,a=this.getField(t).dataType()==S.NUMBER,h=this.$_getSortedRows(t),l=(i===ps.DESCENDING&&h.reverse(),this._values[h[0]]);for(n.push(l?l[t]:void 0),s=1,r=h.length;s<r&&!(e<=n.length);s++)this.equalValues(t,h[s-1],h[s])||(o=(l=this._values[h[s]])?l[t]:void 0,-1!=n.indexOf(o))||a&&isNaN(o)||n.push(o)}return n},compareValues:function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:null,i=i?i[t]:null,e===I||null===e?i===I||null===i?0:-1:i===I||null===i||i<e?1:e<i?-1:0)},compareTexts:function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:null,i=i?i[t]:null,e===I||null===e?i===I||null===i?0:-1:i===I||null===i||(e=String(e).toLocaleLowerCase(),(i=String(i).toLocaleLowerCase())<e)?1:e<i?-1:0)},compareNumbers:function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:NaN,i=i?i[t]:NaN,isNaN(e)?isNaN(i)?0:-1:isNaN(i)||i<e?1:e<i?-1:0)},compareDates:function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:null,i=i?i[t]:null,e instanceof Date?!(i instanceof Date)||i<e?1:e<i?-1:0:i instanceof Date?-1:0)},compareBools:function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=!!e&&Boolean(e[t]),i=!!i&&Boolean(i[t]),e&&!i?1:!e&&i?-1:0)},compareObjects:function(t,e,i){var n=this._values[e],s=this._values[i];return n===s?0:(n=n?n[t]:null,s=s?s[t]:null,n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0)},summarize:function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount();if(i<1)return!1;var n,s,r=0,o=t.field,a=0,h=NaN,l=NaN;for(c=0;c<i;)if(s=(n=this._values[c++])?null==n[o]?void 0:n[o]:NaN,!isNaN(s)){a=h=l=s,r++;break}for(;c<i;)s=(n=this._values[c++])?null==n[o]?void 0:n[o]:NaN,isNaN(s)||(a+=s,s<h&&(h=s),l<s&&(l=s),r++);if(t.count=i,0<r)if(t.sum=a,t.min=h,t.max=l,t.avg=a/i,t.datacount=r,t.dataavg=a/r,e){for(var d=0,u=t.avg,c=0;c<i;c++)s=(n=this._values[c])?null==n[o]?void 0:n[o]:NaN,isNaN(s)||(d+=Math.pow(s-u,2));t.varsp=d/i,t.vars=d/(i-1)}else t.varsp=NaN,t.vars=NaN;return!0},summarizeRange:function(t,e,i){if(null==t||null==e)return!1;t.clear();var n=e.length;if(n<1)return!1;var s,r,o,a=0,h=t.field,l=0,d=NaN,u=NaN;for(f=0;f<n;)if(s=e[f++],o=(r=this._values[s])?null==r[h]?void 0:r[h]:NaN,!isNaN(o)){l=d=u=o,a++;break}for(;f<n;)s=e[f++],o=(r=this._values[s])?null==r[h]?void 0:r[h]:NaN,isNaN(o)||(l+=o,o<d&&(d=o),u<o&&(u=o),a++);if(t.count=n,0<a)if(t.sum=l,t.min=d,t.max=u,t.avg=l/n,t.datacount=a,t.dataavg=l/a,i){for(var c=0,_=t.avg,f=0;f<n;f++)s=e[f],o=(r=this._values[s])?null==r[h]?void 0:r[h]:NaN,isNaN(o)||(c+=Math.pow(o-_,2));t.varsp=c/n,t.vars=c/(n-1)}else t.varsp=NaN,t.vars=NaN;return!0},_doFieldsReset:function(){this.$_clearRows(),this._super()},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(t,e){this.$_resetOrgValues()},copyRows:function(t,e,i,n){this._checkRowIndex(t);var s=this._values.length;if(!((e=Math.max(0,Math.min(e,s-t)))<1||s<i)){for(var r=[],o=0;o<s;o++){for(var a=this._values[o+t],h=[],l=0,d=this._fields.length;l<d;l++){var u=a[l];this._fields[l].dataType()==S.DATE?h[l]=typeof u==Date?new Date(u):u:h[l]=u}r.push(h)}e=this._checkStates;n&&(this._checkStates=!1);try{this.insertRows(i,r)}finally{this._checkStates=e}}},_checkRowIndex:function(t){if(t<0||t>=this._values.length)throw new RangeError("row is out of bounds: "+t)},$_resetOrgValues:function(){var t=this.restoreMode();this._orgValues=this.isCheckStates()&&t!=ls.NONE?[]:null,this._needRestore=this._orgValues&&t==ls.AUTO},_arrayToRow:function(t,e){for(var i=Math.min(t?t.length:0,this._fields.length),n=new Array(i),s=0;s<i;s++)n[s]=this._fields[s].readValue(t[s]);return this.$_internalCalculateValues(n,e),n},_internalInsertRow:function(t,e){var e=this._arrayToRow(e,t),i=t==this._values.length;i?(this._values.push(e),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,e),this._rowIds.splice(t,0,this._nextRowId++)),i?this._rowStates.push(this.isCheckStates()?v.CREATED:v.NONE):(this._rowStates.splice(t,0,this.isCheckStates()?v.CREATED:v.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},_internalSetRow:function(t,e,i){e=this._arrayToRow(e,t);this._values[t]=e,this._rowIds[t]=this._nextRowId++,this.isCheckStates()&&(this._rowStates[t]=v.NONE)},_xmlToRow:function(t){},_internalInsertXmlRow:function(t,e,i){},_internalSetXmlRow:function(t,e){},_internalUpdateRow:function(t,e,i,n){for(var s,r,o,a=this._fields,h=k(e),l=Math.min(a.length,(h?e:a).length),d=this._values[t],u=this._rowStates[t],c=this.isCheckStates()&&(u==v.NONE||!u),_=(d||(this._values[t]=d=[]),c&&this._orgValues&&(r=d.concat()),!1),f=0;f<l;f++)!(o=a[f])._updatable&&u!=v.CREATED&&u!=v.CREATE_AND_DELETED||!h&&!e.hasOwnProperty(o.orgFieldName())||(s=h?e[f]:e[o.orgFieldName()],i&&s===I)||(_=!this._needRestore||_||(i?!o.equalValues(d[f],o.readValue(s)):!o.sameValues(d[f],o.readValue(s))),d[f]=o.readValue(s));return _&&this.$_internalCalculateValues(d,t),c&&_?(r&&(this._orgValues[t]=r),this._changeRowState(t,v.UPDATED,n)):this._needRestore&&this.$_restoreState(t),c&&_},_internalUpdateXmlRow:function(t,e,i){},_internalRemoveRow:function(t){var e=this._rowIds[t];0<=this._hideRowIds.indexOf(e)&&this._hideRowIds.splice(this._hideRowIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},_internalMoveRow:function(t,e){var i=this._values[t],n=this._rowIds[t],s=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,n),this._rowStates.splice(e,0,s),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},_internalMoveRows:function(t,e,i){for(var n=this._values.splice(t,e),s=this._rowIds.splice(t,e),r=this._rowStates.splice(t,e),o=0,a=n.length;o<a;o++)this._values.splice(i+o,0,n[o]),this._rowIds.splice(i+o,0,s[o]),this._rowStates.splice(i+o,0,r[o]);this._orgValues&&this._orgValues.length>t&&(n=this._orgValues.splice(t,e),this._orgValues.splice(i+o,0,n[o]))},_changeRowState:function(t,e,i,n,s){if(this.isCheckStates()||n){n=this._rowStates[t];if((e=e||v.NONE)!=n)return this._rowStates[t]=e,s&&(!v.isDeleted(n)&&v.isDeleted(e)?this._deletedCount++:v.isDeleted(n)&&!v.isDeleted(e)&&this._deletedCount--),i&&this._fireRowStateChanged(t),!0}return!1},$_prepareOrgValues:function(t,e,i){i==v.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==v.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},_changeRowStateEx:function(t,e,i,n,s){var r=this._rowStates[t];return!!this._changeRowState(t,e,!1,n,s)&&(this._orgValues&&this.$_prepareOrgValues(t,r,e),i&&this._fireRowStateChanged(t),!0)},$_searchDataRow:function(t,e,i,n,s){var r=this.rowCount();if(!(r<1)){var o=Math.min(t.length,e.length);if(!(o<1)){for(var a,h,l=!i||i.allFields,d=i&&i.caseSensitive,u=i&&i.partialMatch,c=null,_=[],f=0;f<o;f++)_[f]=this.getField(t[f]).dataType();for(n=Math.max(0,n),s=Math.min(r-1,s),a=n;a<=s;a++){if(g=!0)for(f=0;f<o;f++){switch(h=this.getValue(a,t[f]),_[f]){case S.DATETIME:case S.DATE:var m,g=e[f]instanceof Date?ae(e[f],h,d,u):(c||(m=/[.]/.test(e[f])?"yyyy.MM.dd":/[/]/.test(e[f])?"yyyy/MM/dd":/[-]/.test(e[f])?"yyyy-MM-dd":"yyyyMMdd",c=new Se(m)),ae(e[f],h&&c.getText(h),d,u));break;default:g=ae(e[f],h,d,u)}if(g&&!l)return a;if(!g&&l)break}if(g)return a}}}return-1},searchDataRow:function(t,e,i,n,s){n=3<arguments.length?n:0,s=!(4<arguments.length)||s,i=i instanceof Wn?i:i?new Wn(i):null;var r=-1;if(t&&0<t.length&&e&&0<e.length){for(var o,a=t.length,h=[],l=0;l<a;l++)o=parseFloat(t[l]),!isNaN(o)&&o|0==o?h.push(o):0<=(o=this.getFieldIndex(t[l]))&&h.push(o);0<h.length&&(a=this.rowCount(),(r=(n=Math.max(0,n))<a?this.$_searchDataRow(h,e,i,n,a-1):-1)<0)&&s&&0<n&&(r=this.$_searchDataRow(h,e,i,0,n-1))}return r},$_searchData:function(t,e,i,n,s,r){var o=this.rowCount();if(!(o<1)){for(var a,h,l=i&&i.caseSensitive,d=i&&i.partialMatch,u=this.fieldCount(),c=t.length,_=null,f=[],m=0;m<u;m++)f[m]=this.getField(m).dataType();for(n=Math.max(0,n),s=Math.min(o-1,s),(r=Math.max(0,r))>=t.length&&(n++,r=0),a=n;a<=s;a++)for(m=n<a?0:r;m<c;m++){var g=t[m];if(0<=g&&g<u){switch(h=this.getValue(a,g),f[g]){case S.DATETIME:case S.DATE:var p,w=e instanceof Date?ae(e,h,l,d):(_||(p=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",_=new Se(p)),ae(e,h&&_.getText(h),l,d));break;default:w=ae(e,h,l,d)}if(w)return{dataRow:a,fieldIndex:g,searchFieldIndex:m}}}}return null},searchData:function(t,e,i,n,s,r){n=3<arguments.length?n:0,s=4<arguments.length?s:0,r=!(5<arguments.length)||r,i=i instanceof zn?i:i?new zn(i):null;var o=null;if(!t||t.length<1){t=[];for(var a=this.getFields(),h=0;h<a.length;h++)t.push(a[h].orgFieldName())}if(t&&0<t.length&&null!=e){for(var l,d=t.length,u=[],c=0;c<d;c++)l=parseFloat(t[c]),!isNaN(l)&&l|0==l?u.push(l):u.push(this.getFieldIndex(t[c]));0<u.length&&(d=this.rowCount(),n=Math.max(0,n),s=Math.max(0,s),o=!(o=n<d?this.$_searchData(u,e,i,n,d-1,s):null)&&r&&0<n?this.$_searchData(u,e,i,0,n-1,0):o)&&(o.fieldName=this.getOrgFieldName(o.fieldIndex))}return o},isDataChanged:function(t,e){var i;return!(this._rowStates[t]!==v.UPDATED||!this._orgValues)&&(this._checkRowIndex(t),this._checkFieldIndex(e),!(!this._orgValues||!this._orgValues[t]))&&(i=this._orgValues[t][e],t=this.getValue(t,e),e=this._fields[e])&&e.dataType()!==S.OBJECT&&!e.sameValues(i,t)},$_hideDataRows:function(t,e){if(null!=t){for(var i,n=[],s=this._hideRowIds.length,r=0,o=(t=k(t)?t:[t]).length;r<o;r++)null!=(i=this.getRowId(t[r]))&&(n.push(t[r]),e?this._hideRowIds.indexOf(i)<0&&this._hideRowIds.push(i):0<=(i=this._hideRowIds.indexOf(i))&&this._hideRowIds.splice(i,1));this._hideRowIds.length!==s&&this._fireRowHided(n,e)}},hideDataRows:function(t){this.$_hideDataRows(t,!0)},showDataRows:function(t){this.$_hideDataRows(t,!1)},clearHideDataRows:function(){0<this._hideRowIds.length&&(this._hideRowIds=[],this._fireRowHided([],!1))},getHideDataRows:function(){for(var t,e=[],i=0,n=this._hideRowIds.length;i<n;i++)0<=(t=this._rowIds.indexOf(this._hideRowIds[i]))&&e.push(t);return e.sort(function(t,e){return t-e}),e},isHideDataRow:function(t){t=this._rowIds[t];return 0<=this._hideRowIds.indexOf(t)},hideCount:function(){return!!this._hideRowIds&&this._hideRowIds.length}})),Or=e("DataPath",null,{init:function(){re.init.call(this)}},{extractJson:function(t,e){var i=t;if(e=e&&e.trim(e))for(var n=e.split("."),s=0;s<n.length;s++){var r=n[s]&&n[s].trim();if(r){var o,a,h=r.indexOf("["),l=r.lastIndexOf("]");if(0<h&&h<l?i=k(o="$"!=(a=r.substring(0,h))?i[a]:i)&&(a=r.substring(h+1,l),0<=(h=parseInt(a)))&&h<o.length?o[h]:null:"$"!=r&&(i=i[r]),!i)break}}return k(i)?i:null},extractXml:function(t,e){var i=null;if(e=e&&e.trim())for(var n=e.split("."),s=0;s<n.length;s++){var r=n[s]&&n[s].trim();if(r){var o,a=r.indexOf("["),h=r.lastIndexOf("]");if(0<a&&a<h?(o=r.substring(0,a),(i=ve(i?i[0]:t,o))&&(o=r.substring(a+1,h),i=i[parseInt(o)])):i=ve(i?i[0]:t,r),!i)break}}return i}}),Mr=(Or.prototype,t({SET:"set",APPEND:"append",INSERT:"insert",UPDATE:"update"})),Fr=e("DataLoader",null,{init:function(t){re.init.call(this),this._provider=t},load:function(t,e,i){if(i=new gr(i),!this.$_checkEmpty(e,i))switch(this.$_prepareLoad(e,i),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,i);case"xml":return this.$_loadXml(e,i);case"csv":return this.$_loadCsv(e,i)}return 0},$_loadJson:function(t,e){"string"==typeof t&&(t=JSON.parse(t));var i=null;if(i=(i=e.rootArray?It(t):i)||Or.extractJson(t,e.rows)){var n=e.fillPos,s=e.start,r=e.count,o=e.itemIndex;switch(e.fillMode){case Mr.APPEND:this._provider.addRows(i,s,r);break;case Mr.INSERT:this._provider.insertRows(n,i,s,r,!1,o);break;case Mr.UPDATE:this._provider.updateRows(n,i,s,r);break;default:Mr.SET;this._provider.setRows(i,s,r)}return i.length}return this.$_fillEmpty(e),0},$_loadXml:function(t,e){if((t="string"==typeof t?pe(t):t)&&t.documentElement){var i=e.fillPos,n=e.start,s=e.count,r=e.rows,o=e.itemIndex,a=Or.extractXml(t.documentElement,r);switch(e.fillMode){case Mr.APPEND:this._provider.appendXmlRows(a,n,s);break;case Mr.INSERT:this._provider.insertXmlRows(i,a,n,s,!1,o);break;case Mr.UPDATE:this._provider.updateXmlRows(i,a,n,s);break;default:Mr.SET;this._provider.setXmlRows(a,n,s)}return a.length}return this.$_fillEmpty(e),0},$_loadCsv:function(t,e){var i=e.fillPos,n=e.start,s=e.count,r=e.quoted,o=e.delimiter,a=e.itemIndex,h=Dr.csvToArray(this._provider,t,n,s,r,o);if(h&&0<(s=h.length)){switch(e.fillMode){case Mr.APPEND:this._provider.addRows(h,0,s);break;case Mr.INSERT:this._provider.insertRows(i,h,0,s,!1,a);break;case Mr.UPDATE:this._provider.updateRows(i,h,0,s);break;default:Mr.SET;this._provider.setRows(h,0,s)}return h.length}return this.$_fillEmpty(e),0},$_fillEmpty:function(t){t.fillMode===Mr.SET&&this._provider.setRows(null)},$_checkEmpty:function(t,e){return!t&&(this.$_fillEmpty(e),!0)},$_prepareLoad:function(t){var e=null;t.filters&&(e=new kr(this._provider.filterRuntime(),t.filters),t.filterMode)&&e.setFilterMode(t.filterMode)}}),Nr=0,Lr=e("GridItem",null,{init:function(){this._super(!0),this._id=Nr++,this._index=-1,this._parent=null,this._extents=0},id:function(){return this._id},index:function(){return this._index},parent:function(){return this._parent},parentIndex:function(){return this._parent?this._parent._index:-1},root:function(){for(var t=this;1<t.level();)t=t.parent();return t},childIndex:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent.level()+1},isLeaf:function(){return!0},isVisible:function(){return this._parent&&0<=this._index},displayLevel:function(){return this.level()},provider:function(){return this._parent.provider()},dataSource:function(){return this._parent.dataSource()},dataRow:function(){return-1},dataId:function(){return-1},rowState:function(){var t,e=this.dataRow();return 0<=e&&(t=this.dataSource())?t.getRowState(e):v.NONE},itemState:function(){return H.NORMAL},isChecked:function(){return 0!=(1&this._extents)},setChecked:function(t,e){this._parent.provider().checkItem(this,t,void 0,e)},$_setChecked:function(t){this._extents=t?1|this._extents:-2&this._extents},isCheckable:function(){return 0==(4&this._extents)},setCheckable:function(t){this._parent.provider().setCheckable(this,t)},$_setCheckable:function(t){this._extents=t?-5&this._extents:4|this._extents},isEditable:function(){return!1},isReadOnly:function(){return 0!=(this._extents&EXT_READONLY)},setReadOnly:function(t){this._extents=t?this._extents|EXT_READONLY:this._extents&~EXT_READONLY},isResizable:function(){return!1},getAncestor:function(t){if(t<this.level()){for(var e=this._parent;e.level()>t;)e=e._parent;return e}return null},getAncestors:function(){var t=null,e=this._parent;if(e)for(t=[];t.push(e),e=e._parent;);return t},isDescendantOf:function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},getData:function(t){var e=this.dataSource(),i=(this instanceof Kh||this instanceof Vr?this.firstItem():this instanceof zh?this.parent().firstItem():this).dataRow();return e?e.getValue(i,t):I},setData:function(t,e){var i=this.dataSource(),n=this.dataRow();i&&i.setValue(n,t,e)},getRowData:function(){var t=this.dataRow();if(0<=t){var e=this.dataSource();if(e)return e.getRow(t)}return null},getRowObject:function(){var t=this.dataSource();return t?t.getRowObject(dataRow):null},canEdit:function(){return!1},makeVisible:function(){this._parent.setExpanded(!0),this._parent.makeVisible()},isMerged:function(){return!1},setIndex:function(t){this._index=t}}),Ar=e("GridRow",Lr,{init:function(t){this._super(),this._dataRow=t,this._dataRowId=void 0,this._displayLevel=-1},getDataRow:function(){return this._dataRow},dataRow:function(){return this._dataRow},dataId:function(){return this.dataSource().getRowId(this._dataRow)},isEditable:function(){return!0},isResizable:function(){return!0},displayLevel:function(){return 0<=this._displayLevel?this._displayLevel:this.level()},canEdit:function(){return!0},getData:function(t){return this.dataSource().getValue(this._dataRow,t)},setData:function(t,e){this.dataSource().setValue(this._dataRow,t,e)}}),C=e("GroupItem",Lr,{init:function(){this._super(),this._children=[],this._descendantCount=0,this._summaries=null,this._rows=null},expanded:!1,count:function(){return this._children.length},children:function(){return this._children.slice()},setExpanded:function(t,e,i){t==this._expanded&&!i||(t?this.provider().expand(this,e,i):this.provider().collapse(this,e))},isCollapsed:function(){return!this.isExpanded()},footer:function(){return null},first:function(){return 0<this._children.length?this._children[0]:null},last:function(){var t=this._children.length;return 0<t?this._children[t-1]:null},firstItem:function(){var t;return 0<this._children.length?(t=this._children[0])instanceof C?t.firstItem():t:null},firstDataItem:function(){if(0<this._children.length)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof C)return this._children[t].firstDataItem();if(this._children[t]instanceof Ar)return this._children[t]}return null},lastItem:function(t){var e,i;if(0<this._children.length){for(e=this._children.length;e&&(i=this._children[e-1],t&&!this._hasFooter&&i instanceof zh);e--);return i instanceof C?i.lastItem(t):i}return null},lastDataItem:function(){if(0<this._children.length)for(var t,e=this._children.length;e;e--){if((t=this._children[e-1])instanceof C)return t.lastDataItem();if(t instanceof Ar)return t}return null},descendantCount:function(){return this._descendantCount},firstVisibleItem:function(t){var e;if(t){if(this._hasFooter&&this.footer().isVisible)return this.footer();for(var i=0,n=this._children.length;i<n;i++){if((e=this._children[i])instanceof C)e=e.firstVisibleItem(t);else if(e.isVisible())return e;if(e)return e}}else for(i=0,n=this._children.length;i<n;i++){if((e=this._children[i]).isVisible())return e;if(e instanceof C){var s=e.firstVisibleItem(t);if(s)return s}}return null},isExpandable:function(){return!0},isCollapsable:function(){return!0},getItem:function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},itemOfRow:function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow()==t)return this._children[e];return null},indexOf:function(t){for(var e=this._children.length,i=0;i<e;i++)if(this._children[i]==t)return i;return-1},isDescendant:function(t){if(t&&t!==this){for(var e=t._parent;e&&e!=this;)e=e._parent;return e===this}return!1},getDescendants:function(o){var t;return(!o||this._expanded)&&this._children&&0<this._children.length?(function t(e,i){for(var n,s=e.count(),r=0;r<s;r++)i.push(n=e.getItem(r)),!(n=b(n,C))||o&&!n.isExpanded()||t(n,i)}(this,t=[]),t):null},clear:function(){this._summaries=null,this._children.splice(0,this._children.length),this._descendantCount=0},insert:function(t,e){this._addChild(e,t)},add:function(t){this._addChild(t,-1)},addAll:function(t){this._addChildren(t)},remove:function(t){var e=this.indexOf(t);0<=e&&(this._children.splice(e,1),t instanceof Lr)&&(t._parent=null)},setItem:function(t,e){var i;t&&e&&t!=e&&(i=this._removeChild(t),this._insertChild(i,e),e instanceof Lr)&&(e._index=t.index())},getNumber:function(t){t=this.$_getSummary(t);return t instanceof mr?t.count:t?t.length:this._descendantCount},getSum:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.sum;if(e){for(var i,n=this.dataSource(),s=e.length,r=NaN,o=0;o<s;o++)i=n.getValue(e[o],t),isNaN(i)||(r=(isNaN(r)?0:r)+i);return r}return NaN},getMax:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.max;if(e){var i,n,s,r=this.dataSource(),o=e.length;if(1<o){for(i=NaN,s=0;i=r.getValue(e[s++],t),isNaN(i=null==i?void 0:i)&&s<o;);for(;s<o;)n=r.getValue(e[s++],t),!isNaN(n=null==n?void 0:n)&&i<n&&(i=n);return i}if(1==o)return null==(i=r.getValue(e[0],t))?void 0:i}return NaN},getMin:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.min;if(e){var i,n,s,r=this.dataSource(),o=e.length;if(1<o){for(i=NaN,s=0;i=r.getValue(e[s++],t),isNaN(i=null==i?void 0:i)&&s<o;);for(;s<o;)n=r.getValue(e[s++],t),!isNaN(n=null==n?void 0:n)&&n<i&&(i=n);return i}if(1==o)return null==(i=r.getValue(e[0],t))?void 0:i}return NaN},getAvg:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.avg;if(e){var i,n,s=this.dataSource(),r=e.length;if(1<r){for(n=i=0;n<r;n++)i+=s.getValue(e[n],t);return i/r}if(1==r)return i=s.getValue(e[0],t)}return NaN},getVar:function(t,e){var i=this.$_getSummary(t);if(i instanceof mr)return i.vars;if(i&&this.summaryMode()==Ts.STATISTICAL){var n,s,r,o=this.dataSource(),a=i.length;if(1<a){for(s=n=0;s<a;s++)n+=o.getValue(i[s],t);for(r=n/a,s=n=0;s<a;s++)n+=Math.pow(o.getValue(i[s],t)-r,2);return n/=a-e}if(1==a)return 0}return NaN},getStdev:function(t,e){var i=this.$_getSummary(t);if(i instanceof mr)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.summaryMode()==Ts.STATISTICAL){var n,s,r,o=this.dataSource(),a=i.length;if(1<a){for(s=n=0;s<a;s++)n+=o.getValue(i[s],t);for(r=n/a,s=n=0;s<a;s++)n+=Math.pow(o.getValue(i[s],t)-r,2);return n=Math.sqrt(n/(a-e))}if(1==a)return 0}return NaN},getDataCount:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.datacount;var i,n=this.dataSource(),s=e.length,r=0;if(0<s){for(i=0;i<s;i++)null!=n.getValue(e[i],t)&&r++;return r}return 0},getDataAvg:function(t){var e=this.$_getSummary(t);if(e instanceof mr)return e.dataavg;var i,n=this.dataSource(),s=e.length,r=0,o=0;if(0<s){for(i=0;i<s;i++)null!=n.getValue(e[i],t)&&(r++,o+=n.getValue(e[i],t));return 0<r?o/r:0}return NaN},summaryMode:function(){return this.provider().summaryMode()},_setExpanded:function(t){this._expanded=t},_incDescendants:function(t){this._descendantCount+=t},_insertChild:function(t,e){this._children.splice(t,0,e),e instanceof Lr&&(e._parent=this)},_addChild:function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t._parent=this)},_addChildren:function(t){var e;if(t&&0<(e=t.length))for(var i,n=0;n<e;n++)(i=t[n])&&this.indexOf(i)<0&&(i._parent=this)._children.push(i)},_removeChild:function(t){var e=this.indexOf(t);return 0<=e&&(this._children.splice(e,1),t instanceof Lr)&&(t._parent=null),e},attachItem:function(t){t&&(t._parent=this)},detachItem:function(t){t&&item_parent==this&&(t._parent=null)},_exchangeItems:function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);var i;t!==e&&(i=this._children[t],this._children[t]=this._children[e],this._children[e]=i)},_moveChild:function(t,e){var i=this._children.length;if(t<0||i<=t)throw new RangeError("index is out of range: "+t);var n=Math.min(Math.max(t+e,0),i-1),i=this._children[t];if(e<0)for(var s=t;n<s;s--)this._children[s]=this._children[s-1];else for(s=t;s<n;s++)this._children[s]=this._children[s+1];this._children[n]=i},_changeParent:function(t,e,i){this._parent.remove(this),t._addChild(this,e),i&&t.setExpanded(!0)},$_getRows:function(){var t=[];return this.$_collectRows(this,t),t},$_collectRows:function(t,e){for(var i,n=t.count(),s=0;s<n;s++)(i=t.getItem(s))instanceof C?this.$_collectRows(i,e):0<=(i=i.dataRow())&&e.push(i)},$_getSummary:function(t){var e=b(this.dataSource(),s);if(!e)return null;null==this._summaries&&(this._summaries={});var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},$_summarize:function(t,e){var i=this.summaryMode();return i!=Ts.NONE?(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),3<this._rows.length&&e.canSummarize(t)?(t=new mr(t),e.summarizeRange(t,this._rows,i==Ts.STATISTICAL),t):this._rows):null}}),Vr=e("GroupItemImpl",C,{init:function(t){this._super(),this._groupField=t,this._footer=null,this._header=null},groupField:function(){return this._groupField},footer:function(){return this._footer},_addChild:function(t,e){this._super(t,e),t instanceof Pr&&(this._footer=t)}}),Pr=e("GroupFooter",Lr,{init:function(){this._super()},expandable:!1,displayLevel:function(){return this._expandable?this.level()-1:this.level()}}),Hr=e("RootItem",Vr,{init:function(t){this._super(-1),this._provider=t},provider:function(){return this._provider},level:function(){return 0},isExpanded:function(){return!1},isLeaf:function(){return!1},isVisible:function(){return!0},dataSource:function(){return this._provider.dataSource()},isExpandable:function(){return!1},isCollapsable:function(){return!1}}),Gr=e("ItemProvider",le,{init:function(t){this._super(),this._indexing=t,this._rootItem=this._createRootItem(),this._eventLock=0},hideDeleted:!1,dataSource:function(){a()},itemCount:function(){a()},getItem:function(t){a()},getItems:function(t,e){a()},attachItem:function(t){t&&(t._parent=this._rootItem)},refreshItems:function(){a()},getItemsByIndices:function(t){var e=[];if(t)for(var i=0,n=t.length;i<n;i++){var s=this.getItem(t[i]);s&&e.push(s)}return e},getIndexOfRow:function(t){t=this.getItemOfRow(t);return t?t.index():-1},getIndicesOfRows:function(t){var e=[],i=t?t.length:0;if(i)for(var n=0;n<i;n++){var s=this.getItemOfRow(t[n]);e.push(s?s.index():-1)}return e},getItemOfRow:function(t){a()},getItemsByRows:function(t,e){for(var i,n=[],s=t?t.length:0,r=0;r<s;r++)(i=this.getItemOfRow(t[r],e))&&n.push(i);return n},exchange:function(t,e){a()},setCheckable:function(t,e){t&&e!=t.isCheckable()&&(t.$_setCheckable(e),this._fireCheckableChanged(t))},_clearChecked:function(){for(var t=0,e=this.itemCount();t<e;t++)this.getItem(t).$_setChecked(!1)},checkItem:function(t,e,i,n){var s;t&&(s=t.isChecked(),i?(this._clearChecked(),e&&t.$_setChecked(!0),e!=s&&n&&this._fireItemChecked(t),this._fireRefreshClient()):e!=s&&(t.$_setChecked(e),n?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e))},checkItems:function(t,e,i){if(t&&0<t.length){for(var n=0,s=t.length;n<s;n++){var r=t[n];r instanceof Lr&&r.$_setChecked(e)}i?this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},checkAll:function(t,e,i,n){var s,r,o=this.itemCount();if(i)for(s=0;s<o;s++)(r=this.getItem(s)).isCheckable()&&r.$_setChecked(t);else for(s=0;s<o;s++)this.getItem(s).$_setChecked(t);n?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},_setCheckItem:function(t,e){t.$_setChecked(e)},_clearDisplayLevels:function(){},hasCellStyle:function(){return!1},setCellStyle:function(t,e,i){},setCellStyles:function(t,e,i){},clearCellStyles:function(){},removeCellStyle:function(t){},getCellStyle:function(t,e){return null},canUpdate:function(t,e){var i,n;return!!t&&(i=t.dataRow(),n=this.dataSource(),t=t.itemState(),t=H.isInserting(t)||t===H.DUMMY,0<=i||t)&&n&&(t||n.canUpdateRow(i))&&n.canUpdateField(i,e)},canAppend:function(){var t=this.dataSource();return t&&t.canAppendRow()},canInsert:function(t){var e;return!!t&&(t=t.dataRow(),e=this.dataSource())&&e.canInsertRow(t)},canDelete:function(t){var e;return!!t&&(t=t.dataRow(),e=this.dataSource(),0<=t)&&e&&e.canDeleteRow(t)},getAllItems:function(){a()},findItem:function(t,e,i,n,s){a()},getSum:function(t){return NaN},getMax:function(t){return NaN},getMin:function(t){return NaN},getAvg:function(t){return NaN},getVar:function(t){return NaN},getStdev:function(t){return NaN},getDataCount:function(t){return 0},getDataAvg:function(t){return NaN},isIndexing:function(){return this._indexing},_createRootItem:function(){return new Hr(this)},_resetItemIndicies:function(t){if(this._indexing&&!this._updateLock)for(var e=t,i=this.itemCount();e<i;e++)this.getItem(e)._index=e},_setExpanded:function(t,e){t._setExpanded(e)},_resetItemIndex:function(t){var e=this.getItem(t);e&&(e._index=t)},_incDescendents:function(t,e){t._descendantCount+=e,t.parent()&&this._incDescendents(t.parent(),e)},_copyExtents:function(t,e){t instanceof Lr&&e instanceof Lr&&(e._extents=t._extents)},_fireReset:function(){this._eventLock<=0&&this.fireEvent(Gr.RESET)},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(Gr.REFRESH)},_fireRefreshClient:function(){this._eventLock<=0&&this.fireEvent(Gr.REFRESH_CLIENT)},_fireItemInserted:function(t){this._eventLock<=0&&this.fireEvent(Gr.ITEM_INSERTED,t)},_fireItemDeleted:function(t){this._eventLock<=0&&this.fireEvent(Gr.ITEM_DELETED,t)},_fireItemUpdated:function(t){this._eventLock<=0&&this.fireEvent(Gr.ITEM_UPDATED,t)},_fireCheckableChanged:function(t){this._eventLock<=0&&this.fireEvent(Gr.CHECKABLE_CHANGED,t)},_fireItemChecked:function(t){this._eventLock<=0&&this.fireEvent(Gr.ITEM_CHECKED,t)},_fireItemsChecked:function(t,e){this._eventLock<=0&&this.fireEvent(Gr.ITEMS_CHECKED,t,e)},_fireItemAllChecked:function(t){this._eventLock<=0&&this.fireEvent(Gr.ITEM_ALL_CHECKED,t)},_fireItemCheckChanged:function(t,e){this.fireEvent(Gr.ITEMCHECK_CHANGED,t,e)},_fireRowStateChanged:function(t){this._eventLock<=0&&this.fireEvent(Gr.ROW_STATE_CHANGED,t)},_fireRowStatesChanged:function(t){this._eventLock<=0&&this.fireEvent(Gr.ROW_STATES_CHANGED,t)},_fireRowStatesCleared:function(){this._eventLock<=0&&this.fireEvent(Gr.ROW_STATES_CLEARED)},_fireSort:function(t,e,i){this._eventLock<=0&&this.fireEvent(Gr.SORT,t,e,i)},_fireSorted:function(){this._eventLock<=0&&this.fireEvent(Gr.SORTED)},_fireFilterAdded:function(t,e){this._eventLock<=0&&this.fireEvent(Gr.FILTER_ADDED,t,e)},_fireFilterRemoved:function(t,e){this._eventLock<=0&&this.fireEvent(Gr.FILTER_REMOVED,t,e)},_fireFilterCleared:function(t){this._eventLock<=0&&this.fireEvent(Gr.FILTER_CLEARED,t)},_fireFilterAllCleared:function(){this._eventLock<=0&&this.fireEvent(Gr.FILTER_ALL_CLEARED)},_fireFiltered:function(t,e){this._eventLock<=0&&this.fireEvent(Gr.FILTERED,t,e)}}),$r=(Gr.RESET="onItemProviderReset",Gr.REFRESH="onItemProviderRefresh",Gr.REFRESH_CLIENT="onItemProviderRefreshClient",Gr.ITEM_INSERTED="onItemProviderItemInserted",Gr.ITEM_DELETED="onItemProviderItemDeleted",Gr.ITEM_UPDATED="onItemProviderItemUpdated",Gr.CHECKABLE_CHANGED="onItemProviderCheckableChanged",Gr.ITEM_CHECKED="onItemProviderItemChecked",Gr.ITEMS_CHECKED="onItemProviderItemsChecked",Gr.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",Gr.ROW_STATE_CHANGED="onItemProviderRowStateChanged",Gr.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",Gr.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",Gr.SORT="onItemProviderSort",Gr.SORTED="onItemProviderSorted",Gr.FILTER_ADDED="onItemProviderFilterAdded",Gr.FILTER_REMOVED="onItemProviderFilterRemoved",Gr.FILTER_CLEARED="onItemProviderFilterCleared",Gr.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",Gr.FILTERED="onItemProviderFiltered",Gr.ITEMCHECK_CHANGED="onItemProviderItemCheckChanged",e("CellEditableMap",rr,{init:function(t){this._super(),this._editableMap=[]},destroy:function(){this._editableMap=null,this._super()},isEmpty:function(){return 0==this._styleMap.length&&!this._styleMap[-1]},setReadOnly:function(t,e,i){t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._readOnly=i},setEditable:function(t,e,i){t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._editable=i},getReadOnly:function(t,e){t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._readOnly},getEditable:function(t,e){t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._editable},setCursor:function(t,e,i){t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._cursor=i},getCursor:function(t,e){t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._cursor},setEditor:function(t,e,i){t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._editor=i},getEditor:function(t,e,i){t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._editor},removeEditableMap:function(t,e){var i;null!=t&&((e=arguments.length<2?-1:e)<0?delete this._editableMap[t]:(i=this._editableMap[t])&&delete i[e])},clearEditableMap:function(t){var e;return(0!==this._editableMap.length||null!=this._editableMap[-1])&&(e=0<=(t=t?t.dataRow():-1)?this._editableMap[t]:void 0,this._editableMap=[],e&&(this._editableMap[t]=e),!0)},getWritable:function(t,e){var i=this.getReadOnly(t,e),t=this.getEditable(t,e);return!i&&t},connect:function(t){},disconnect:function(){},clearRows:function(){return this.clearEditableMap()},setRows:function(){},setRowCount:function(t){},insertRow:function(t){},insertRows:function(t,e){},removeRow:function(t){},removeRows:function(t){},updateRow:function(){},updateRows:function(t,e){},updateList:function(t){},setValue:function(t,e){},moveRow:function(t,e){},moveRows:function(t,e,i){}})),Ur=e("CellStyleMap",rr,{init:function(t){this._super(),this._owner=t,this._styleMap=[]},destroy:function(){this._destroying=!0,this._styleMap=null,this._super()},isEmpty:function(){return 0==this._styleMap.length&&!this._styleMap[-1]},setCellStyle:function(t,e,i){if(e<0)this._styleMap[t]=i;else{var n=this._styleMap[t];if(n)if(k(n))n[e]=i;else{for(var s=this._owner.dataSource().fieldCount(),r=[],o=0;o<s;o++)r[o]=n;this._styleMap[t]=r}(r=(r=this._styleMap[t])||[])[e]=i,this._styleMap[t]=r}},setCellStyles:function(t,e,i){if(e&&!(e.length<1)&&i){var n,s,r,o=this._owner.dataSource(),a=o.fieldCount(),h=i;if(k(h)){for(h=h.concat(),r=Math.min(a,h.length),n=0;n<r;n++)s=parseInt(h[n]),isNaN(s)||s<0?h[n]=-1:h[n]=s;for(var l,d,u,c=this,_=o,f=e,m=h,g=f.length,p=Math.min(m.length,_.fieldCount()),w=0;w<g;w++)if(k(u=f[w]))for(l=0;l<p;l++)0<=(d=m[l])&&(d=t.getStyle(u[d]))&&c.setCellStyle(w,l,d)}else{for(var v in h={},i)s=parseInt(i[v]),0<=(s=isNaN(s)?o.getFieldIndex(i[v]):s)&&s<a&&(h[v]=s);for(var C=this,y=e,x=h,I=0,b=y.length;I<b;I++){var E=y[I];if(E)for(var R in x){var S=x[R],R=t.getStyle(E[R]);R&&C.setCellStyle(I,S,R)}}}}},removeCellStyle:function(t){for(var e=0,i=this._styleMap.length;e<i;e++){var n=this._styleMap[e];if(k(n))for(var s=n.length-1;0<=s;s--)n[s]===t&&(n[s]=null);else this._styleMap[e]===t&&delete this._styleMap[e]}},clearCellStyles:function(){this._styleMap=[]},checkCellStyle:function(t,e){t=this._styleMap[t];return k(t)?!!t[e]:!!t},getCellStyle:function(t,e){t=this._styleMap[t];return k(t)?t[e]:t},connect:function(t){},disconnect:function(){},clearRows:function(){this._styleMap=[]},setRows:function(){this._owner.dataSource()&&(this._styleMap.length=Math.min(this._styleMap.length,this._owner.dataSource().rowCount()))},setRowCount:function(t){this._styleMap.length=t},insertRow:function(t){this._styleMap.splice(t,0,null)},insertRows:function(t,e){for(var i=0;i<e;i++)this._styleMap.splice(t,0,null)},removeRow:function(t){this._styleMap.splice(t,1)},removeRows:function(t){for(var e=t.length-1;0<=e;e--)this._styleMap.splice(t[e],1)},updateRow:function(){},updateRows:function(t,e){},updateList:function(t){},setValue:function(t,e){},moveRow:function(t,e){t=this._styleMap.splice(t,1);this._styleMap.splice(e,0,t[0])},moveRows:function(t,e,i){for(var n=this._styleMap.splice(t,e),s=0;s<e;s++)this._styleMap.splice(i+s,0,n[s])}}),Wr=e("ItemCheckableTag",null,{init:function(t,e){this._super(),this._owner=t,this._exprNode=ni.Default.parse(e,["value","values"]),this._runtime=new vc},connect:function(t){this._runtime.setDataSource(t)},disconnect:function(){},clearRows:function(){Wr.clearCheckables(this._owner)},setRows:function(){for(var t,e=this._owner._rows.length;e--;)t=this._owner._rows[e],this.$_setCheckable(t)},insertRow:function(t){this.$_setCheckable(t)},insertRows:function(t,e){for(var i=0;i<e;i++){var n=this._owner.getItemOfRow(t+i);n instanceof Lr&&this.$_setCheckable(n)}},updateRow:function(t){this.$_setCheckable(t)},updateRows:function(t,e){for(var i=0;i<e;i++){var n=this._owner.getItemOfRow(t+i);n instanceof Lr&&this.$_setCheckable(n)}},updateList:function(t){for(var e=0;e<t.length;e++){var i=this._owner.getItemOfRow(t[e]);i instanceof Lr&&this.$_setCheckable(i)}},changeStates:function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e]);i instanceof Lr&&this.$_setCheckable(i)}},$_setCheckable:function(t){this._runtime.setItem(t),t.$_setCheckable(this._exprNode.evaluate(this._runtime))}},{clearCheckables:function(t){for(var e=t.itemCount();e--;)t.getItem(e).$_setCheckable(!0)}}),zr=e("DefaultItemProvider",Gr,{init:function(t){this._super(t),this._dataSource=null,this._rows=[],this._filteredItems=[],this._pageItems=[],this._sortedItems=[],this._pubItems=this._items=this._rows,this._distinctRows=[],this._cellStyles=new Ur(this),this._editableMap=new $r(this),this._fixedCount=0,this._fixedSorting=!1,this._maxItemCount=0,this._itemCount=0,this._pubCount=0,this._filtered=!1,this._hideDeleted=!1,this._filters=[],this._filterRuntime=new gc,this._filterLock=0,this._fixedFiltering=!1,this._sorted=!1,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._labelComparer={},this._sorter=null,this._paging=!1,this._pagingSource=us.ROWS,this._pageSize=10,this._pageCount=-1,this._pageStartIndex=-1,this._currPage=0,this._pageStart=0,this._summaryMode=Ts.AGGREGATE,this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null,this._pageSorting=!1,this._updateLock=!1},destroy:function(){this._destroying=!0,this.setDataSource(null),this._rows=null,this._pubItems=null,this._items=null,this._filteredItems=null,this._pageItems=null,this._sortedItems=null,this._distinctRows=null,this._filters=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._summaryMap=null,this._super()},hideDeleted:!1,setHideDeleted:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this.$_buildItems(),this._fireRefresh())},filterOr:!1,setFilterOr:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},isFiltered:function(){return this._filtered},isSorted:function(){return this._sorted},isPaging:function(){return this._paging},pageStartIndex:function(){return this._pageStart},sorter:function(){return this._sorter||this._defSorter},setSorter:function(t){this._sorter=t},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},beginUpdate:function(){this._updateLock=!0},endUpdate:function(){this._updateLock=!1},sortMode:ms.AUTO,filterMode:vs.AUTO,checkableExpression:function(){return this._checkableExpression},setCheckableExpression:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t)&&(this._checkableTag=new Wr(this,t),this._dataSource)&&this._checkableTag.connect(this._dataSource)},getFieldDomain:function(t){for(var e,i=this._rows.length,n=[],s=I,r=0;r<i;r++)(e=this._dataSource.getValue(r,t))!=s&&n.indexOf(e)<0&&n.push(e),s=e;return n},beginFilter:function(){this._filterLock++},endFilter:function(t,e,i){t=!(0<arguments.length)||t,0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock)&&t&&this.applyFilters(!0,e,i)},hasFilter:function(t){t=this._filters[t];return t&&0<t.length},addFilter:function(t,e){var i=e&&e.criteria();if(0<=t)return this._fireFilterAdded(t,i),(i=this._filters[t])||(this._filters[t]=i=[]),t=new Ro(e),i.push(t),this.applyFilters(),t},removeFilter:function(t,e){this._filtered&&this._filters[t]&&(this._fireFilterRemoved(t,e),0<=(e=(t=this._filters[t]).indexOf(e)))&&(t.splice(e,1),this.applyFilters())},clearFilters:function(t){var e;this._filtered&&this._filters[t]&&(this._fireFilterCleared(t),0<(e=this._filters[t]).length)&&(e.length=0,delete this._filters[t],this.applyFilters())},clearAllFilters:function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},hasFilters:function(){for(var t,e=this._filters.length,i=0;i<e;i++)if((t=this._filters[i])&&0<t.length)return!0;return!1},applyFilters:function(t,e,i){if(t=!(0<arguments.length)||t,!(0<this._filterLock)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},orderBy:function(t,e,i,n){n=!(3<arguments.length)||n,this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=t?t.length:0,r=e?e.length:0,o=i?i.length:0,a=0;a<r;a++)Tt(e[a],ps.ASCENDING,ps.DESCENDING)||(e[a]=ps.ASCENDING);for(a=0;a<s;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(ps.ASCENDING),a<o?this._sortCases.push(i[a]):0<o?this._sortCases.push(i[o-1]):this._sortCases.push(ws.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{n&&this._fireRefresh()}finally{this._fireSorted()}},getSortFields:function(){return this._sortFields.slice()},getSortDirections:function(){return this._sortDirections.slice()},getSortCases:function(){return this._sortCases.concat()},getLabelComparer:function(){return this._labelComparer},setLabelComparer:function(t){this._labelComparer=t},setPaging:function(t,e,i,n){e=1<arguments.length?e:10,i=2<arguments.length?i:-1,e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&n==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=n,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},getPage:function(){return this._paging?this._currPage:-1},page:function(){return this._paging?this._currPage:-1},setPage:function(t,e){t=isNaN(t)?0:t,e=0<arguments.length?e:-1,this._paging&&(t=Math.max(0,Math.min(this.pageCount()-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},pageCount:function(){return this._paging?0<=this._pageCount?this._pageCount:B((this._dataSource.rowCount()+this._pageSize-1)/this._pageSize):0},setPageCount:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},setPageSorting:function(t){this._paging&&this._pageSorting,this._pageSorting=t},getCheckedRows:function(t){for(var e,i=t?this._dataSource.rowCount():this.itemCount(),n=[],s=0;s<i;s++)(e=(t?this._rows:this._pubItems)[s]).isChecked()&&n.push(e.dataRow());return n},resetCheckables:function(){for(var t=this._rows.length;t--;)this._rows[t].$_setCheckable(!0);this._fireRefresh()},applyCheckables:function(){this._checkableTag?this._checkableTag.setRows():Wr.clearCheckables(this),this._fireRefresh()},dataSource:function(){return this._dataSource},setDataSource:function(t){t!==this._dataSource&&(this.$_clearRows(),this._dataSource&&(this._dataSource.removeTag(this._cellStyles),this._dataSource.removeTag(this._editableMap),this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.addTag(this._cellStyles),this._dataSource.addTag(this._editableMap)),this._destroying||(this.$_resetSummary(),this._fireReset()))},itemCount:function(){return this._pubCount},fixedCount:function(){return this._fixedCount},maxItemCount:function(){return this._maxItemCount},setMaxItemCount:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this.refreshItems())},getItem:function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},getItems:function(t,e){return this._pubItems.slice(t,t+e)},getIndexOfRow:function(t){return 0<=t&&t<this._rows.length&&(t=this._rows[t])&&0<=this._pubItems.indexOf(t)?t._index:-1},getItemOfRow:function(t,e){return 0<=t&&t<this._rows.length&&(0<=(t=this._rows[t])._index||e)?t:null},refreshItems:function(){var t={};this.$_saveExtents(t),this.$_clearRows(),this.$_buildRows(t),this._fireRefresh()},setFixed:function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},exchange:function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},clearDisplayLevels:function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},getAllItems:function(){return this._pubItems.slice()},hasCellStyle:function(){return!this._cellStyles.isEmpty()},setCellStyle:function(t,e,i){this._cellStyles.setCellStyle(t,e,i)},setCellStyles:function(t,e,i){this._cellStyles.setCellStyles(t,e,i)},removeCellStyle:function(t){this._cellStyles.removeCellStyle(t)},clearCellStyles:function(){this._cellStyles.clearCellStyles()},checkCellStyle:function(t,e){return this._cellStyles.checkCellStyle(t,e)},getCellStyle:function(t,e){return this._cellStyles.getCellStyle(t,e)},setCellEditable:function(t,e,i){this._editableMap.setEditable(t,e,i)},setCellReadOnly:function(t,e,i){this._editableMap.setReadOnly(t,e,i)},getCellEditable:function(t,e){return this._editableMap.getEditable(t,e)},getCellReadOnly:function(t,e){return this._editableMap.getReadOnly(t,e)},setCellCursor:function(t,e,i){return this._editableMap.setCursor(t,e,i)},getCellCursor:function(t,e){return this._editableMap.getCursor(t,e)},setCellEditor:function(t,e,i){return this._editableMap.setEditor(t,e,i)},getCellEditor:function(t,e){return this._editableMap.getEditor(t,e)},clearEditableMap:function(t){return this._editableMap.clearEditableMap(t)},getNumber:function(t){t=this.$_getSummary(t);return t?t.count:this.itemCount()},getSum:function(t){t=this.$_getSummary(t);return t?t.sum:NaN},getMax:function(t){t=this.$_getSummary(t);return t?t.max:NaN},getMin:function(t){t=this.$_getSummary(t);return t?t.min:NaN},getAvg:function(t){t=this.$_getSummary(t);return t?t.avg:NaN},getVar:function(t){t=this.$_getSummary(t);return t?t.vars:NaN},getVarp:function(t){t=this.$_getSummary(t);return t?t.varsp:NaN},getStdev:function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.vars):NaN},getStdevp:function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.varsp):NaN},getDataCount:function(t){t=this.$_getSummary(t);return t?t.datacount:0},getDataAvg:function(t){t=this.$_getSummary(t);return t?t.dataavg:NaN},$_saveExtents:function(t){for(var e,i=0,n=this._rows.length;i<n;i++)0<=(e=this._rows[i])._dataRowId&&(t[e._dataRowId]=e._extents)},$_clearRows:function(){this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},$_clearIndicies:function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},$_clearDistincts:function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},$_checkFiltered:function(){return!!this._dataSource&&(this._filters.length=this._dataSource.fieldCount(),this.hasFilters()||this._hideDeleted&&0<this._dataSource.deletedCount()||0<this._dataSource.hideCount())},$_select:function(t,e,i){for(var n=t.length,s=0;s<n;s++)if(t[s].select(this._filterRuntime,e,i))return!0;return!1},$_checkSorted:function(){for(var t=this._sortFields.length-1;0<=t;t--)this._sortFields[t]>this._dataSource.fieldCount()&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&0<this._sortFields.length},$_buildRows:function(t){var e=this._dataSource;if(e){var i=gt();_t(">>>>>> B U I L D I T E M S... "+i),this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount(),!this._filtered&&!this._paging&&0<this.maxItemCount()&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount())),this._rows=new Array(this._rowCount);for(var n=0,s=this._rows.length;n<s;n++){var r=this._rows[n]=this.$_createRow(n);t&&t.hasOwnProperty(r.dataId())&&(r._extents=t[r.dataId()])}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),_t("####### B U I L D I T E M S: "+(gt()-i))}},$_resetCounts:function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},$_buildItems:function(t,e){var i,n,s,r,o=0<this.maxItemCount()?this.maxItemCount():this._rows.length,a=this._dataSource.hideCount();if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this._hideDeleted||0<a)for(_=0;_<this._rowCount;_++)n=this._rows[_],s=this._dataSource.getRowState(this._rows[_]._dataRow),r=this._dataSource.isHideDataRow(this._rows[_]._dataRow),this._hideDeleted&&v.isDeleted(s)||r?n._index=-1:n._index=0;else for(_=0;_<this._rowCount;_++)this._rows[_]._index=0;var h,l,d=this.fixedCount(),u=0<d&&!this._fixedFiltering,c=this._rows.length;if(!t)for(var _=0,f=this._filters.length;_<f;_++)if(h=this._filters[_])for(l=0;l<h.length;l++)h[l].prepare(this._filterRuntime,this._dataSource);for(this._paging||(c=Math.min(c,o)),_=i=0;_<this._rowCount&&i<c;_++)if(0<=(n=this._rows[_])._index)if(t||u&&i<d)this._filteredItems.push(n),i++;else{for(var m=!this._filterOr,g=0,p=0,f=this._filters.length;p<f;p++)if((h=this._filters[p])&&g++,this._filterOr){if(h&&this.$_select(h,n,p)){m=!0;break}}else if(h&&!this.$_select(h,n,p)){m=!1;break}!m&&0!==g||(this._filteredItems.push(n),i++)}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(!this._sorted||this._paging&&this._pageSorting)this._sortedItems.length=0;else{if(e){var w=this._sortedItems;for(_=w.length;_--;)w[_]._index<0&&w.splice(_,1)}else this.$_sortRows();this._pubItems=this._sortedItems}this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},$_buildPageItems:function(){for(var t=this._sorted&&!this._pageSorting?this._sortedItems:this._filtered?this._filteredItems:this._items,e=(this._pageItems.length=0,this._pageStart=0<=this._pageStartIndex?this._pageStartIndex:this._currPage*this._pageSize),i=t.length,n=0<this.maxItemCount()?this.maxItemCount():i,s=Math.min(this._pageSize,n);e<i&&0<s;e++,s--)this._pageItems.push(t[e]);this._pageSorting&&this._sorted&&this.$_sortRows(this._pageItems),this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},$_buildPage:function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},$_compareFuncs:function(t,e,i){for(var n={},s=this._dataSource,r=0,o=t.length;r<o;r++){var a=s.getField(t[r]);if(a){var h=a._comparer||(s.getDataComparer(a.index())?s.getDataComparer(a.index()):this._labelComparer[a.index()]),a=a.dataType(),l=i[r]==ws.INSENSITIVE;if(!h)switch(a){case S.DATETIME:case S.NUMBER:h=s.compareNumbers.bind(s);break;case S.BOOLEAN:h=s.compareBools.bind(s);break;case S.OBJECT:h=s.compareObjects.bind(s);break;default:h=(l?s.compareTexts:s.compareValues).bind(s)}h&&(n[t[r]]=h)}}return n},$_sortRows:function(t){var t=t||this._items.slice(),e=[],h=(0<this._fixedCount&&!this._fixedSorting&&(e=t.splice(0,this._fixedCount)),this.$_compareFuncs(this._sortFields,this._sortDirections,this._sortCases));t.sort(function(t,e){for(var i,n,s,r=0,o=0,a=this._sortFields.length;o<a&&(n=this._sortDirections[o],s=this._sortFields.length==o+1,!(i=h[this._sortFields[o]])||0===(r=i(this._sortFields[o],t._dataRow,e._dataRow)));o++);return r=0===(r*=n===ps.DESCENDING?-1:1)&&s?n===ps.DESCENDING?e._dataRow-t._dataRow:t._dataRow-e._dataRow:r}.bind(this)),this._sortedItems=e.concat(t)},$_createRow:function(t){t=new Ar(t);return this.attachItem(t),t._dataRowId=t.dataId(),t},$_createAllRow:function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},$_resetSummary:function(){this._summaryMap=[]},$_clearSummary:function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;0<=t;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},$_getSummary:function(t){var e,i=this._summaryMap[t];return i||(e=this._dataSource)&&e.canSummarize(t)&&(i=new mr(t),this._summaryMap[t]=i),i&&0==i.count&&0<this.itemCount()&&this.$_summarize(i),i},$_summarize:function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,n=new Array(i),s=0;s<i;s++)n[s]=this._items[s]._dataRow;e.summarizeRange(t,n,this._summaryMode==Ts.STATISTICAL)}else e.summarize(t,this._summaryMode==Ts.STATISTICAL)},$_needSort:function(){return this._sorted&&this._sortMode==ms.AUTO},$_needFilter:function(){return this._filtered&&this._filterMode==vs.AUTO},onDataProviderDisposed:function(t){t.removeTag(this._cellStyles),t.removeTag(this._editableMap),this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(),this.$_resetSummary(),this._fireReset(),this.setDataSource(null)},onDataProviderReset:function(t){this.$_clearRows(),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},onDataProviderRefresh:function(t){this.refreshItems()},onDataProviderRefreshClient:function(t){this._fireRefreshClient()},onDataProviderRowCountChanged:function(t,e){this._fireRefreshClient()},onDataProviderRowInserting:function(t,e,i){return!0},onDataProviderRowInserted:function(t,e,i){var n,s=this._rows,r=e<s.length?s[e]:null,o=this.$_createRow(e);s.splice(e,0,o);for(var a=e,h=s.length;a<h;a++)s[a]._dataRow=a;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():(this._filtered&&(n=this._filteredItems,e=null!=i?i:Math.max(0,r?n.indexOf(r):n.length),n.splice(e,0,o)),this._sorted&&(n=this._sortedItems,e=null!=i?i:Math.max(0,r?n.indexOf(r):n.length),n.splice(e,0,o)),this.$_clearSummary(),this.$_resetCounts(),this._updateLock||this._resetItemIndicies(this._sorted?0:e)),this._checkableTag&&this._checkableTag.insertRow(o),this._fireItemInserted(o)},onDataProviderRowsInserted:function(t,e,i,n){if(!(i<0)){for(var s,r,o=this._rows,a=e<o.length?o[e]:null,h=[],l=0;l<i;l++)h.push(s=this.$_createRow(e+l)),o.splice(e+l,0,s);var d=o.length;for(l=e;l<d;l++)o[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered)for(r=this._filteredItems,e=null!=n?n:Math.max(0,a?r.indexOf(a):r.length),l=0;l<h.length;l++)r.splice(e+l,0,h[l]);if(this._sorted)for(r=this._sortedItems,e=null!=n?n:Math.max(0,a?r.indexOf(a):r.length),l=0;l<h.length;l++)r.splice(e+l,0,h[l]);this.$_clearSummary(),this.$_resetCounts(),this._updateLock||this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},onDataProviderRowRemoving:function(t,e){return!0},$_silentRemoveRow:function(t){var e,i;this._filtered&&0<=(i=(e=this._filteredItems).indexOf(t))&&e.splice(i,1),this._sorted&&0<=(i=(e=this._sortedItems).indexOf(t))&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._updateLock||this._resetItemIndicies(0)},onDataProviderRowRemoved:function(t,e){var i=this._rows,n=i[e];i.splice(e,1);for(var s=i.length-1;e<=s;s--)i[s]._dataRow=s;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(n),this._fireItemDeleted(n)},onDataProviderRowsRemoving:function(t,e){return!0},$_silentRemoveRows:function(t){var e,i,n,s;if(this._filtered)for(i=this._filteredItems,e=0;e<t.length;e++)n=t[e],0<=(s=i.indexOf(n))&&i.splice(s,1);if(this._sorted)for(i=this._sortedItems,e=0;e<t.length;e++)n=t[e],0<=(s=i.indexOf(n))&&i.splice(s,1);this.$_clearSummary(),this.$_resetCounts(),this._updateLock||this._resetItemIndicies(0)},onDataProviderRowsRemoved:function(t,e){if(e&&!(e.length<1)){1<e.length&&e.sort(function(t,e){return t-e});for(var i=this._rows,n=e[0],s=[],r=e.length-1;0<=r;r--)s.push(i[e[r]]),i.splice(e[r],1);for(r=this._rows.length-1;n<=r;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(s),this._fireRefresh()}},onDataProviderRowUpdating:function(t,e,i){return!0},onDataProviderRowUpdated:function(t,e){this.$_needFilter()||this.$_needSort()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._rows[e]&&this._fireItemUpdated(this._rows[e])},onDataProviderRowsUpdated:function(t,e,i){this.$_needFilter()||this.$_needSort()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},onDataProviderRowListUpdated:function(t,e){this.$_needFilter()||this.$_needSort()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateList(e),this._fireRefresh()},onDataProviderValueChanging:function(t,e,i,n){return!0},onDataProviderValueChanged:function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._rows[e]&&this._fireItemUpdated(this._rows[e])},onDataProviderRowMoving:function(t,e,i){return!0},onDataProviderRowMoved:function(t,e,i){for(var n=this._rows,s=n.splice(e,1),r=(n.splice(i,0,s[0]),n.length),o=e=Math.min(e,i);o<r;o++)n[o]._dataRow=o;(this._sorted||this._paging||this._hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},onDataProviderRowsMoving:function(t,e,i,n){return!0},onDataProviderRowsMoved:function(t,e,i,n){this.refreshItems()},onDataProviderStateChanged:function(t,e){var i;this._hideDeleted&&(i=this._rows[e],v.isDeleted(i.rowState()))&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted()&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._fireRowStateChanged(this._rows[e])},onDataProviderRowHided:function(t,e,i){this._filtered=this.$_checkFiltered(),i?(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted()&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(i=this.getItemsByRows(e),this.$_silentRemoveRows(i)),this._fireRefresh()):this.refreshItems()},onDataProviderStatesChanged:function(t,e){if(this._hideDeleted){for(var i,n,s=!1,r=0,o=e.length;r<o;r++)if(i=e[r],i=this._rows[i],v.isDeleted(i.rowState())){s=!0;break}s&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted()&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(n=this.getItemsByRows(e),this.$_silentRemoveRows(n)),this._fireRefresh())}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},onDataProviderRestoreRows:function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},onDataProviderStatesCleared:function(t){this._pubCount!=t.rowCount()&&this.refreshItems(),this._fireRowStatesCleared()}}),Kr=e("ProxyItemProvider",Gr,{init:function(t,e){this._super(e),this._initialize(),this.setSource(t)},source:null,setSource:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source)&&(this._populateItems(),this._source.addListener(this))},dataSource:function(){return this._source?this._source.dataSource():null},fixedCount:function(){return this._source?this._source.fixedCount():0},maxItemCount:function(){return this._source?this._source.maxItemCount():0},setMaxItemCount:function(t){this._source&&this._source.setMaxItemCount(t)},setFixed:function(t,e,i){this._source&&this._source.setFixed(t,e,i)},getIndexOfRow:function(t){return this.isEditing()&&0<=this._editingItem.dataRow()&&this._editingItem.dataRow()===t?this._editingItem.index():this._source?this._source.getIndexOfRow(t):-1},getItemOfRow:function(t){return this._source?this._source.getItemOfRow(t):null},refreshItems:function(){this._source&&this._source.refreshItems()},_clearDisplayLevels:function(){this._source&&this._source._clearDisplayLevels()},setCellStyle:function(t,e,i){this._source&&this._source.setCellStyle(t,e,i)},removeCellStyle:function(t){this._source&&this._source.removeCellStyle(t)},clearCellStyles:function(){this._source&&this._source.clearCellStyles()},_initialize:function(){},_clearItems:function(){},_populateItems:function(){this._resetItemIndicies(0)},onItemProviderReset:function(t){this._populateItems(),this._fireReset()},onItemProviderRefresh:function(t){this._populateItems(),this._fireRefresh()},onItemProviderRefreshClient:function(t){this._fireRefreshClient()},onItemProviderItemInserted:function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},onItemProviderItemDeleted:function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},onItemProviderItemUpdated:function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},onItemProviderCheckableChanged:function(t,e){this._fireCheckableChanged(e)},onItemProviderItemChecked:function(t,e){this._fireItemChecked(e)},onItemProviderItemsChecked:function(t,e,i){this._fireItemsChecked(e,i)},onItemProviderItemAllChecked:function(t,e){this._fireItemAllChecked(e)},onItemProviderItemCheckChanged:function(t,e,i){this._fireItemCheckChanged(e,i)},onItemProviderRowStateChanged:function(t,e){this._fireRowStateChanged(e)},onItemProviderRowStatesChanged:function(t,e){this._fireRowStatesChanged(e)},onItemProviderRowStatesCleared:function(t){this._fireRowStatesCleared()},onItemProviderFilterAdded:function(t,e,i){},onItemProviderFilterRemoved:function(t,e,i){},onItemProviderFilterCleared:function(t,e){},onItemProviderFilterAllCleared:function(t){},onItemProviderFiltered:function(t){},onItemProviderSort:function(t,e,i){},onItemProviderSorted:function(t){}}),Yr=e("GroupedItemProvider",Kr,{init:function(t,e){this._visibleItems=null,this._rootItem=null,this._groupFields=null,this._groupSorting=!0,this._sortDirection=ps.ASCENDING,this._summarizing=!1,this._grouped=!1,this._editItem=null,this._super(t,e),this._groupList={}},destroy:function(){this._destroying=!0,this._groupList=null,this._visibleItems=null,this._rootItem=null,this._groupFields=null,this._createFooterCallback=null,this._super()},treeMode:!1,expandedAdornments:A.BOTH,collapsedAdornments:A.HEADER,createFooterCallback:null,expandWhenGrouping:!1,mergeMode:!1,summaryMode:Ts.AGGREGATE,isGrouped:function(){return this._grouped},groupList:function(){return this._groupList},groupCount:function(){return this._groupFields?this._groupFields.length:0},setExpandedAdornments:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.isGrouped())&&(this._populateItems(),this._fireRefresh())},setCollapsedAdornments:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.isGrouped())&&(this._populateItems(),this._fireRefresh())},setCreateFooterCallback:function(t){t!=this._createFooterCallback&&(this._createFooterCallback=t,this.isGrouped())&&(this._populateItems(),this._fireRefresh())},setMergeMode:function(t){t!=this._mergeMode&&((this._mergeMode=t)||this._clearDisplayLevels(),this._populateItems(),this._fireRefresh())},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},canGrouping:function(t){return this._fireGrouping(t)},groupBy:function(t){this.groupByMode(t,this._mergeMode)},groupByMode:function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this._fireGrouped()}},isGroupedField:function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},getGroupLevel:function(t){if(this._groupFields&&0<=t)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},getGroupedFields:function(){return this._groupFields?this._groupFields.concat():null},expand:function(t,e,i,n){if(t&&(!t.isExpanded()||i)&&this._fireExpand(t)&&(t.isExpanded()&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,n))){this._resetItemIndicies(t.index());try{this._fireRefresh()}finally{this._fireExpanded(t)}}},$_collapseChild:function(t,e,i){for(var n=0,s=t._children.length;n<s;n++){var r=t._children[n];r instanceof Vr&&(r._expanded=!1,this.$_collapseChild(r,e,i))}},collapse:function(t,e,i){if(t&&t.isExpanded()){if(this._fireCollapse(t)&&this._visibleItems.collapse(t,e)){this._resetItemIndicies(t.index());try{this._fireRefresh()}finally{this._fireCollapsed(t)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},itemCount:function(){return this._grouped?this._visibleItems.count():this.source().itemCount()},getItem:function(t){return this.isGrouped()?0<=t&&t<this._visibleItems.count()?this._visibleItems.getItem(t):null:this.source().getItem(t)},getItems:function(t,e){if(this.isGrouped()){for(var i,n=[],s=Math.min(this._visibleItems.count(),t+e-1),r=t;r<s;r++)i=this._visibleItems.getItem(r),n.push(i);return n}return this.source().getItems(t,e)},getAllItems:function(){var t;return this.isGrouped()?((t=new pr(this)).expand(this._rootItem,!0,!1),t.getItems()):this.source()?this.source().getAllItems():null},getIndexOfRow:function(t){if(this.isGrouped()){for(var e=0,i=this._visibleItems.count();e<i;e++)if(this._visibleItems.getItem(e).dataRow()==t)return e;return-1}return this.source().getIndexOfRow(t)},getItemOfRow:function(t){if(this.isGrouped()){for(var e=0,i=this._visibleItems.count();e<i;e++){var n=this._visibleItems.getItem(e);if(n.dataRow()==t)return n}return null}return this.source().getItemOfRow(t)},setFixed:function(t,e,i){this._super(t,e,i)},_initialize:function(){this._super(),this._visibleItems=new pr(this),this._rootItem=new Hr(this)},_clearItems:function(){this._visibleItems.clear(),this._rootItem.clear(),this._groupList={}},_saveExpand:function(t,e){for(var i=0,n=t._children.length;i<n;i++){var s,r,o,a=t._children[i];(a instanceof Vr||a instanceof Kh)&&(s=a.firstItem()._dataRowId,r=this.dataSource().getDataRowById(s),o=a._groupField,0<=r)&&0<=o&&(e[s]={expanded:a._expanded,children:[]},this._saveExpand(a,e[s].children))}},_restoreExpand:function(t,e){for(var i=0,n=t._children.length;i<n;i++){var s,r,o,a=t._children[i];(a instanceof Vr||a instanceof Kh)&&(s=a.firstItem()._dataRowId,r=this.dataSource().getDataRowById(s),o=a._groupField,0<=r)&&0<=o&&e[s]&&(a._setExpanded(e[s].expanded),this._restoreExpand(a,e[s].children))}},_populateItems:function(t){var e={},i=this.source().itemCount();if(t&&0<i&&this._rootItem&&this._saveExpand(this._rootItem,e),this._clearItems(),this.source()){if(this._groupFields){for(var n=this._groupFields.length-1;0<=n;n--)this._groupFields[n]>=this.dataSource().fieldCount()&&this._groupFields.splice(n,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;this._grouped&&0<i&&(this._buildGroupItems(i),t&&this._restoreExpand(this._rootItem,e),this.$_resetVisibleItems())}},_resetItemIndicies:function(t){this.isIndexing()&&this.isGrouped()?this._visibleItems._resetIndices(t):this._super(t)},$_checkChildren:function(t,e,i,n){for(var s,r=t.count(),o=0;o<r;o++)(s=b(t.getItem(o),Lr))&&(!i||(n||s instanceof Ar||s instanceof L)&&s.isCheckable())&&s.$_setChecked(e),s instanceof C&&this.$_checkChildren(s,e,i,n)},_clearChecked:function(){this.isGrouped()?this.$_checkChildren(this._rootItem,!1,!1):this._super(),this._editItem&&this._editItem.$_setChecked(!1)},checkAll:function(t,e,i,n,s){if(!this._editItem||i&&!this._editItem.isCheckable()||this._editItem.$_setChecked(t),e||!this.isGrouped())this._super(t,e,i,n);else{var r,e=this._visibleItems.fixedCount();if(0<e)if(i)for(r=e;r--;){var o=this.getItem(r);o.isCheckable()&&o.$_setChecked(t)}else for(r=e;r--;)this.getItem(r).$_setChecked(t);this.$_checkChildren(this._rootItem,t,i,s),this._fireItemCheckChanged(null,t),n?this._fireItemAllChecked(t):this._fireRefreshClient()}},findItem:function(t,e,i,n,s){var r=this.dataSource();if(r){var o=this.itemCount();if(!(o<1)){var a=Math.min(t.length,e.length);if(!(a<1)){var h,l,d,u,c,_=!i||i.allFields,f=i&&i.caseSensitive,m=i&&i.partialMatch,g=null,p=[],w=(w=i.dataComparer)&&"function"==typeof w?w:null;for(n=Math.max(0,n),s=Math.min(o-1,s),d=0;d<a;d++)p[d]=r.getField(t[d]).dataType();for(h=n;h<=s;h++){if(C=0<=(c=(l=this.$_getItem(h)).dataRow()))for(d=0;d<a;d++){switch(u=l.getData(t[d]),p[d]){case S.DATETIME:case S.DATE:var v,C=e[d]instanceof Date?w?w(c,t[h],e[d],u):ae(e[d],u,f,m):(g||(v=/[.]/.test(e[d])?"yyyy.MM.dd":/[/]/.test(e[d])?"yyyy/MM/dd":/[-]/.test(e[d])?"yyyy-MM-dd":"yyyyMMdd",g=new Se(v)),w?w(c,t[h],e[d],u&&g.getText(u)):ae(e[d],u&&g.getText(u),f,m));break;default:C=w?w(c,t[h],e[d],u):ae(e[d],u,f,m)}if(C&&!_)return h;if(!C&&_)break}if(C)return h}}}}return-1},findCell:function(t,e,i,n,s,r){var o=this.dataSource();if(o){var a=this.itemCount();if(!(a<1)){for(var h,l,d,u,c=i&&i.caseSensitive,_=i&&i.partialMatch,f=this.dataSource().fieldCount(),m=t.length,g=null,p=[],w=(w=i.dataComparer)&&"function"==typeof w?w:null,v=0;v<f;v++)p[v]=o.getField(v).dataType();for(n=Math.max(0,n),s=Math.min(a-1,s),(r=Math.max(0,r))>=t.length&&(n++,r=0),h=n;h<=s;h++)if(0<=(u=(l=this.$_getItem(h)).dataRow()))for(v=n<h?0:r;v<m;v++){var C=t[v];if(0<=C&&C<f){switch(d=l.getData(C),p[C]){case S.DATETIME:case S.DATE:var y,x=e instanceof Date?w?w(u,C,e,d):ae(e,d,c,_):(g||(y=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",g=new Se(y)),w?w(u,C,e,d&&g.getText(d)):ae(e,d&&g.getText(d),c,_));break;default:x=w?w(u,C,e,d):ae(e,d,c,_)}if(x)return{itemIndex:h,fieldIndex:C,searchFieldIndex:v}}}}}return null},onItemProviderReset:function(t){this._super(t)},onItemProviderRefresh:function(t){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):this._super(t)},onItemProviderItemInserted:function(t,e){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):this._super(t,e)},onItemProviderItemDeleted:function(t,e){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):this._super(t,e)},onItemProviderItemUpdated:function(t,e){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):this._super(t,e)},$_getItem:function(t){return(this._grouped?this._visibleItems:this.source()).getItem(t)},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this.source(),this.fixedCount()),this.source()&&this.source().itemCount()>this._visibleItems.fixedCount()&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(0)},_buildGroupItems:function(t){t>this.fixedCount()&&(t=new wr(this.fixedCount(),t-1),this._buildGroups(t,this.source(),this._groupFields),this._groupList={},this._buildItems(this._rootItem,t,this._groupFields),this.isMergeMode())&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this._rootItem))},$_resetDisplayLevels:function(t){for(var e,i,n=t.count(),s=0;s<n;s++)(e=b(t.getItem(s),C))&&((i=b(e.firstItem,Ar))&&i._displayLevel<0&&(i._displayLevel=e.level),this.$_resetDisplayLevels(e))},_buildGroups:function(t,e,i){if(!(i.length<=t.level)){var n=t.startIndex,s=t.endIndex;if(!(s<n)){for(var r=t.level+1,o=i[t.level],a=this.dataSource().getField(o),h=new wr(n,n),l=(h.level=r,t.children.push(h),e.getItem(n).getData(o)),d=n+1;d<=s;d++){var u=e.getItem(d).getData(o);a.equalValues(u,l)||(h&&(h.endIndex=d-1),(h=new wr(d,d)).level=r,t.children.push(h)),l=u}h&&(h.endIndex=s);for(var c=t.children.length,d=0;d<c;d++)this._buildGroups(t.children[d],e,i)}}},_buildItems:function(t,e,i){var n=this.isMergeMode(),s=e.children.length;if(0<s)for(var r=i[e.level],o=0;o<s;o++){var a=new(n?Kh:Vr)(r);(this._groupList[a.id()]=a)._setExpanded(this.isExpandWhenGrouping()),t.add(a),this._buildItems(a,e.children[o],i)}else{var h=e.endIndex-e.startIndex+1,l=this.source().getItems(e.startIndex,h);t.addAll(l),this._incDescendents(t,h)}0<t.level()&&(l=new(n?zh:Pr),t.add(l))},_setEditItem:function(t){this._editItem=t},_setDummyEditItem:function(t){this._dummyEditItem=t},_fireGrouping:function(t){return this.fireConfirmEvent(Yr.GROUPING,t)},_fireGrouped:function(t){this.fireEvent(Yr.GROUPED)},_fireExpand:function(t){return this.fireConfirmEvent(Yr.EXPAND,t)},_fireExpanded:function(t){this.fireEvent(Yr.EXPANDED,t)},_fireCollapse:function(t){return this.fireConfirmEvent(Yr.COLLAPSE,t)},_fireCollapsed:function(t){this.fireEvent(Yr.COLLAPSED,t)}}),Xr=(Yr.GROUPING="onGroupedItemProviderGrouping",Yr.GROUPED="onGroupedItemProviderGrouped",Yr.EXPAND="onGroupedItemProviderExpand",Yr.EXPANDED="onGroupedItemProviderExpanded",Yr.COLLAPSE="onGroupedItemProviderCollapse",Yr.COLLAPSED="onGroupedItemProviderCollapsed",e("DummyEditItem",Ar,{init:function(t,e,i,n,s){this._super(n),this._target=e,t.attachItem(this),this._index=i,this._state=s,this._values=[],this._displayLevel=e?e.displayLevel():0,this._started=!1,this._checkDiff=!1,this._strictDiff=!1},values:null,isResizable:function(){return!1},values_:function(){},setValues:function(t){},beginEdit:function(t,e){},setValue:function(t,e){},itemState:function(){return this._state},getData:function(t){return null},setData:function(t,e){},getRowData:function(){return null},getRowObject:function(){return null},_clearDisplayLevels:function(){for(var t=this._rows.length,e=0;e<t;e++)this._rows[e]._displayLevel=-1}})),qr=e("EditItem",Ar,{init:function(t,e,i,n,s){this._super(n),this._target=e,t.attachItem(this),this._index=i,this._state=s,this._values=[],this._displayLevel=e?e.displayLevel():0,this._started=!1,this._checkDiff=!1,this._strictDiff=!1,this._index2=void 0},values:null,isResizable:function(){return!1},values_:function(){return this._values.concat()},setValues:function(t){var e,i,n,s,r,o=this.provider(),a=this.dataSource(),h=a.fieldCount();if(k(t))for(h=Math.min(h,t.length),e=0;e<h;e++)n=a.getField(e),s=this._values[e],r=n.readValue(t[e]),this._values[e]=r,this._started&&!n.equalValues(s,r)&&o._editItemCellUpdated(this,e,s,r);else if(t)for(e=0;e<h;e++)i=a.getOrgFieldName(e),t.hasOwnProperty(i)&&(n=a.getField(e),s=this._values[e],r=n.readValue(t[i]),this._values[e]=r,this._started)&&!n.equalValues(s,r)&&o._editItemCellUpdated(this,e,s,r)},beginEdit:function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},setValue:function(t,e){var i=this.dataSource();if(t<0&&t>=i.fieldCount())throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),n=this._values[t];e=i.readValue(e),this._values[t]=e,this._started&&!i.equalValues(n,e)&&this.provider()._editItemCellUpdated(this,t,n,e)},itemState:function(){return this._state},getData:function(t){if(t<0&&t>=this.dataSource().fieldCount())throw new RangeError("field index is out of bounds: "+t);return this._values[t]},setData:function(t,e){var i=this.dataSource();if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),n=this._values[t],s=(e=i.readValue(e),!this._checkDiff);(s=s||(this._strictDiff?!i.equalValues(n,e):!i.sameValues(n,e)))&&(this._values[t]=e,this.provider()._editItemCellUpdated(this,t,n,e),this.provider()._editItemCellEdited(this,t))},getRowData:function(){return this._values.concat()},getRowObject:function(){var t=this.dataSource();if(t){for(var e=t.fieldCount(),i={},n=0;n<e;n++)i[t.getOrgFieldName(n)]=this._values[n];return i}return null},_clearDisplayLevels:function(){for(var t=this._rows.length,e=0;e<t;e++)this._rows[e]._displayLevel=-1}}),jr=e("EditableItemProvider",Kr,{init:function(t,e){this._super(t,e),this._orgItem=null,this._editingItem=null,this._dummyEditItem=null,this._editingState=H.NORMAL,this._insertMode=0,this._modified=!1,this._commiting=!1,this._saveDs=null,t&&(this._saveDs=t.dataSource())&&this._saveDs.registerClient(this)},isDataEditing:function(){return this.isEditing()},cancelDataEditing:function(){this.isEditing()&&this._fireCancelRequest()},commitDataEditing:function(){this.isEditing()&&this._fireCommitRequest()},editingItem:function(){return this._commiting||this.isEditing()?this._editingItem:null},edit:function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},editData:function(t,e,i){var n;if(t&&(n=this.dataSource())&&0<=e&&e<n.fieldCount()){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},appendDummy:function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){throw this.cancelDummy(),t}},append:function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},insert:function(t,e,i,n){if(!this.isEditing())try{return this._beginInsert(t,e,i,n),!0}catch(t){throw this.cancel(),t}return!1},remove:function(t){},removeAll:function(t){},getRemovableRows:function(t){return null},removeRows:function(t){},cancelDummy:function(){this._dummyEditItem&&this._cancelDummyEdit()},cancel:function(){this.isEditing()&&this._cancelEdit()},commit:function(){if(this.isEditing()){this._commiting=!0;try{var t=this.dataSource();if(t){if(this._editingState==H.UPDATING&&this.isCheckDiff()){for(var e=this._editingItem.values(),i=e.length,n=!1,s=this.isStrictDiff(),r=0;r<i;r++)if(s){if(!t.getField(r).equalValues(this._orgItem.getData(r),e[r])){n=!0;break}}else if(!t.getField(r).sameValues(this._orgItem.getData(r),e[r])){n=!0;break}if(!n)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},isEditing:function(t){return H.isEditing(this._editingState)&&(!t||t===this._editingItem)},isEdited:function(t){return H.isEditing(this._editingState)&&(!t||t===this._editingItem)&&this._modified},checkDiff:!1,checkCellDiff:!1,strictDiff:!1,isUpdating:function(){return this._editingState==H.UPDATING},isInserting:function(){return this._editingState==H.INSERTING},isAppending:function(){return this._editingState==H.APPENDING},setDiffs:function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},itemCount:function(){return this.source().itemCount()},onItemProviderReset:function(t){this._super(t);t=this.dataSource();t!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=t,this._saveDs)&&this._saveDs.registerClient(this)},onItemProviderRefresh:function(t){this._super(t)},onItemProviderRefreshClient:function(t){this._super(t)},onItemProviderItemInserted:function(t,e){this._super(t,e)},onItemProviderItemRemoved:function(t,e){this._super(t,e)},onItemProviderItemUpdated:function(t,e){this._super(t,e)},_checkEditing:function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},_checkNotEditing:function(){if(this.isEditing())throw new Error("itemProvider is already editing")},_beginUpdate:function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._orgItem=t,this._editingState=H.UPDATING,this._fireUpdateStarted(this._editingItem))},_doBeginUpdate:function(t){return null},_beginAppendDummy:function(){this._dummyEditItem=this._doBeginAppendDummy()},_beginAppend:function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._editingState=H.APPENDING,this._fireAppendStarted(this._editingItem))},_doBeginAppend:function(t){return null},_beginInsert:function(t,e,i,n){if(!t)throw"item is null";this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,i,n),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._editingState=H.INSERTING,this._resetItemIndicies(0),this._fireInsertStarted(this._editingItem))},_doBeginInsert:function(t,e){return null},_cancelDummyEdit:function(){this._dummyEditItem=null,this._doCancelDummyEdit()},_cancelEdit:function(){this._checkEditing();var e=this._editingState;try{this._editingState=H.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._fireCanceled()},_doCancelDummyEdit:function(){},_doCancelEdit:function(t,e){t==H.INSERTING&&this._resetItemIndicies(0)},_updateEditingRow:function(t){return!1},_insertEditingRow:function(t){return!1},_commitEdit:function(){if(this._checkEditing(),!this.dataSource())throw new Error("data provier is null");try{this._fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var e=this._editingState,t=!1;if(this.isUpdating())try{this._editingState=H.NORMAL,t=this._doCompleteUpdate(this._orgItem)}catch(t){throw this._editingState=e,t}else try{this._editingState=H.NORMAL,t=this._doCompleteInsert(e==H.APPENDING)}catch(t){throw this._editingState=e,t}return t?(this._modified=!1,this._doCommitEdit(e,this._orgItem),this._fireCommitted(this._editingItem)):this._editingState=e,t},_doCommitEdit:function(t,e){return!1},_editItemCellEdited:function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this._fireItemCellEdited(t,e))},_editItemCellUpdated:function(t,e,i,n){this.isEditing(t)&&(this._modified=!0,this._fireItemCellUpdated(t,e,i,n))},_fireUpdateStarted:function(t){this._eventLock<=0&&this.fireEvent(jr.UPDATE_STARTED,t)},_fireAppendStarted:function(t){this._eventLock<=0&&this.fireEvent(jr.APPEND_STARTED,t)},_fireInsertStarted:function(t){this._eventLock<=0&&this.fireEvent(jr.INSERT_STARTED,t)},_fireItemCellEdited:function(t,e){this._eventLock<=0&&this.fireEvent(jr.CELL_EDITED,t,e)},_fireItemCellUpdated:function(t,e,i,n){this._eventLock<=0&&this.fireEvent(jr.CELL_UPDATED,t,e,i,n)},_fireItemCommitting:function(t){this._eventLock<=0&&this.fireEvent(jr.COMMITTING,t)},_fireCommitted:function(t){this._eventLock<=0&&this.fireEvent(jr.COMMITTED,t)},_fireCanceled:function(){this._eventLock<=0&&this.fireEvent(jr.CANCELED)},_fireCommitRequest:function(){this._eventLock<=0&&this.fireEvent(jr.COMMIT_REQUEST)},_fireCancelRequest:function(){this._eventLock<=0&&this.fireEvent(jr.CANCEL_REQUEST)}});jr.UPDATE_STARTED="onItemEditUpdateStarted",jr.APPEND_STARTED="onItemEditAppendStarted",jr.INSERT_STARTED="onItemEditInsertStarted",jr.CELL_EDITED="onItemEditCellEdited",jr.CELL_UPDATED="onItemEditCellUpdated",jr.COMMITTING="onItemEditCommitting",jr.COMMITTED="onItemEditCommitted",jr.CANCELED="onItemEditCanceled",jr.COMMIT_REQUEST="onItemEditCommitRequest",jr.CANCEL_REQUEST="onItemEditCancelRequest";function Zr(t,e,i,n){this.level=t,this.message=e,this.column=i,this.userMessage=n,Zt.call(this,e)}function Jr(){return{9:new RegExp("[0-9 ]"),0:new RegExp("[0-9]"),a:new RegExp("[A-Za-z]"),"*":new RegExp("[A-Za-z0-9]")}}function Qr(t){if(!t)return null;t=(t=String(t))&&t.replace(/[^0-9]/g,"");var e,i,n=parseInt(t.substr(0,4)),t=parseInt(t.substr(4,2));return isNaN(n)||n<=0||isNaN(t)||t<0?null:(i=4-(e=new Date(n,0,1)).getDay()+1,e.setDate(i),e.getFullYear()==n&&t--,i=7*t,e.setDate(e.getDate()+i),e)}function to(t,e,i){thursDay=function(t,e){var t=new Date(t),i=(i=t.getDay())<e?-3-i:4-i,e=t.getDate();return t.setDate(e+i),t};var n=t.getFullYear(),s=thursDay(new Date(n,0,1),e),t=thursDay(new Date(n,t.getMonth(),t.getDate()),e),e=s.getFullYear(),r=t.getFullYear(),n=r<n?(s=thursDay(new Date(e,0,1)),Math.ceil((t.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===r?1:0)):n<r?1:Math.ceil((t.valueOf()-s.valueOf())/6048e5)+(e===r?1:0);return String(r)+(i?"-":"")+(n<10?"0"+n:String(n))}var eo=e("GridItemProvider",e("EditableItemProviderImpl",jr,{init:function(t,e){this._super(t,e),this._insertRow=-1},itemCount:function(){var t=this.source().itemCount();return(t+=this.isInserting()||this.isAppending()?1:0)+(this._dummyEditItem?1:0)},getItem:function(t){var e;return this.isEditing()&&this._editingItem.index()==t?this._editingItem:(this.isInserting()?e=t>this._editingItem.index()?this.source().getItem(t-1):this.source().getItem(t):t<this.source().itemCount()&&(e=this.source().getItem(t)),e||(this._dummyEditItem&&t==this.itemCount()-1?this._dummyEditItem:null))},_doBeginUpdate:function(t){return this._editingItem=this._createEditItem(t,H.UPDATING,null),this._editingItem},_doBeginAppendDummy:function(){return this._dummyEditItem=this._dummyEditItem||this._createDummyEditItem(),this._dummyEditItem._index=this.itemCount()-1,this._dummyEditItem},_doBeginAppend:function(t){return this._editingItem=this._createEditItem(null,H.APPENDING,t),this._editingItem},_doBeginInsert:function(t,e,i,n){return this._editingItem=this._createEditItem(t,H.INSERTING,e,i,n),this._editingItem},_doCancelEdit:function(t,e){this._super(t,e)},_doCommitEdit:function(t,e){this._super(t,e)},_doCompleteUpdate:function(t){var e,i=this.dataSource();return!!i&&(e=this._editingItem,this._copyExtents(e,t),i.updateRow(e.dataRow(),e.values()))},_doCompleteInsert:function(t){var e,i,n=!1,s=this.dataSource();return s&&(e=this._editingItem,t=t?s.rowCount():Math.max(0,this._insertRow),i=e.values(),n=s.insertRow(t,i,e._index2))&&(s=this.getItemOfRow(t),this._copyExtents(e,s)),n},remove:function(t){var e=this.dataSource();t&&!this.isEditing(t)&&e&&0<=(t=t.dataRow())&&e.removeRow(t)},removeAll:function(t){if(t&&0!=t.length){var e=this.dataSource();if(e){var i,n=t.length;if(1<n){for(var s=[],r=0;r<n;r++)0<=(i=this.getItem(t[r]).dataRow())&&s.push(i);1<s.length?e.removeRows(s):1==s.length&&e.removeRow(s[0])}else 1==n&&0<=(i=this.getItem(t[0]).dataRow())&&e.removeRow()}}},revert:function(t){var e,i;(t=t instanceof Lr?t:this.getItem(t))&&(e=this.dataSource())&&(t=t.dataRow(),(i=e.getRowState(t))==v.DELETED?e.setRowState(t,v.NONE):i==v.CREATE_AND_DELETED&&e.setRowState(t,v.CREATED))},revertAll:function(t){if(t&&0!=t.length){var e=this.dataSource();if(e)for(var i=t.length;i--;){var n,s=this.getItem(t[i]);s&&(s=s.dataRow(),(n=e.getRowState(s))==v.DELETED?e.setRowState(s,v.NONE):n==v.CREATE_AND_DELETED&&e.setRowState(s,v.CREATED))}}},getRemovableRows:function(t){if(!t||0==t.length)return null;for(var e=[],i=0,n=t.length;i<n;i++){var s=this.getItem(t[i]).dataRow();0<=s&&e.push(s)}return e},removeRows:function(t){t&&(1<t.length?this.dataSource().removeRows(t):this.dataSource().removeRow(t[0]))},_createDummyEditItem:function(){return new Xr(this,null,this.itemCount(),-1,H.DUMMY)},_createEditItem:function(t,e,i,n,s){var r,o=this.dataSource();if(!o)return null;var a=null,h=o.fieldCount();switch(e){case H.UPDATING:for(a=new qr(this,t,t.index(),t.dataRow(),e),r=0;r<h;r++)a.setValue(r,t.getData(r));this._copyExtents(t,a);break;case H.INSERTING:case H.APPENDING:var l=this._itemProvider,d=e==H.INSERTING&&t?n?t.index()+1:t.index():this.itemCount(),a=new qr(this,t,d,-1,e);if(e==H.INSERTING){var d=t.dataRow(),u=t;if(d<=-1){for(var c=this._source._visibleItems;(u=c.getNext(u))&&!(u instanceof Ar););this._insertRow=u?u.dataRow():this.dataSource().rowCount()}else this._insertRow=n?Math.min(this.dataSource().rowCount(),d+1):d;t instanceof Ar&&n&&l&&(d=l._pubItems.indexOf(u),0<=d++)&&d<=l._pubItems.length&&(a._index2=d)}if(i)for(r=0;r<h;r++)i.length>r&&a.setValue(r,i[r])}return a}}),{init:function(t){this._super(null,t),this._updateLock=!1,this._groupSorting=!0,this._groupSortDirection=ps.ASCENDING,this._groupSortCase=ws.SENSITIVE,this._itemProvider=new zr(!1),this._itemProvider.addListener(this),this._groupedProvider=new Yr(this._itemProvider,!1),this.setSource(this._groupedProvider),this._summarizer=new sr(this._itemProvider)},destroy:function(){this._destroying=!0,this.setSource(null),this._itemProvider.removeListener(this),this._super()},isHideDeleted:function(){return this._itemProvider.isHideDeleted()},setHideDeleted:function(t){this._itemProvider.setHideDeleted(t)},setFilterOr:function(t){this._itemProvider.setFilterOr(t)},isFilterOr:function(t){this._itemProvider.isFilterOr()},setSummaryMode:function(t){this._itemProvider.setSummaryMode(t)},setRowGroupSummaryMode:function(t){this._groupedProvider.setSummaryMode(t)},setMergeMode:function(t){this._groupedProvider.setMergeMode(t)},sortMode:function(){return this._itemProvider.sortMode()},setSortMode:function(t){this._itemProvider.setSortMode(t)},filterMode:function(t){return this._itemProvider.filterMode()},setFilterMode:function(t){this._itemProvider.setFilterMode(t)},beginUpdate:function(){this._updateLock=!0,this._itemProvider.beginUpdate()},endUpdate:function(t){this._itemProvider.endUpdate(),this._updateLock=!1,this._resetItemIndicies(0)},isGrouped:function(){return this._groupedProvider.isGrouped()},groupList:function(){return this._groupedProvider.groupList()},groupLevels:function(){return this._groupedProvider.groupCount()},groupByFields:function(){return this._groupedProvider.getGroupedFields()},summarizer:function(){return this._summarizer},canGrouping:function(t){return this._fireGrouping(t)},getFieldDomain:function(t){this._itemProvider.getFieldDomain(t)},isFiltered:function(t){return null!=t?this._itemProvider.hasFilter(t):this._itemProvider.hasFilters()},addFilter:function(t,e){this._itemProvider.addFilter(t,e)},removeFilter:function(t,e){this._itemProvider.removeFilter(e)},clearFilters:function(t){this._itemProvider.clearFilters(t)},clearAllFilters:function(){this._itemProvider.clearAllFilters()},beginFiltering:function(){this._itemProvider.beginFilter()},endFiltering:function(t,e){this._itemProvider.endFilter(!0,t,e)},setHideDeletedRows:function(t){this._itemProvider.setHideDeleted(t)},orderBy:function(t,e,i){if(this._groupedProvider.isGrouped()&&this._groupSorting){for(var n,s,r,o,a=e?e.length:0,h=i?i.length:0,l=this._groupedProvider.getGroupedFields(),d=this._itemProvider.getSortDirections(),u=this._itemProvider.getSortCases(),c=[],_=0,f=l.length;_<f;_++)c.push(l[_]);for(_=0,f=t.length;_<f;_++)n=t[_],s=c.indexOf(n),r=_<a?e[_]:0<a?e[a-1]:ps.ASCENDING,o=_<h?i[_]:0<h?i[h-1]:ws.SENSITIVE,s<0?(c.push(n),d[c.length-1]=r,u[c.length-1]=o):(d[s]=r,u[s]=o);this._itemProvider.orderBy(l=c,d,u)}else this._itemProvider.orderBy(t,e,i)},getSortFields:function(){return this._itemProvider.getSortFields()},getSortDirections:function(){return this._itemProvider.getSortDirections()},getSortCases:function(){return this._itemProvider.getSortCases()},getLabelComparer:function(){return this._itemProvider.getLabelComparer()},setLabelComparer:function(t){this._itemProvider.setLabelComparer(t)},groupBy:function(t,e,i,n){(t&&!(t.length<1)||this._groupedProvider.isGrouped())&&this._groupedProvider.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=i,this._groupSortCase=n||ws.SENSITIVE,e&&this._itemProvider.orderBy(t,[i],[n],!1),this._groupedProvider.groupBy(t))},groupByMode:function(t,e){this._groupSorting&&this._itemProvider.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},addGroupBy:function(t,e){var i,n=[this._groupSortDirection];this._groupedProvider.groupCount()<1?i=[e]:(i=this._groupedProvider.getGroupedFields()).splice(t,0,e),this._groupedProvider.canGrouping(i)&&(this._groupSorting&&this._itemProvider.orderBy(i,n,null,!1),this._groupedProvider.groupBy(i))},removeGroupBy:function(t,e){if(this._groupedProvider.isGrouped()){for(var i=-1,n=this._groupedProvider.getGroupedFields(),s=0,r=n.length-1;0<=r;r--)if(s++,n[r]==t){i=r;break}0<=i?(n.splice(i,e?s:1),this._groupedProvider.canGrouping(n)&&(this._groupSorting&&this._itemProvider.orderBy(n,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(n))):this._groupedProvider.canGrouping(null)&&this._groupSorting&&this._itemProvider.orderBy(null,null,null,!1)}},isMergedRowGrouped:function(){return this._groupedProvider.isGrouped()&&this._groupedProvider.isMergeMode()},getGroupLevels:function(){return this._groupedProvider.groupCount()},isGroupedField:function(t){return this._groupedProvider.isGroupedField(t)},getGroupLevel:function(t){return this._groupedProvider.getGroupLevel(t)},getGroupByFieldCount:function(){return this._groupedProvider.groupCount()},setExpandWhenGrouping:function(t){this._groupedProvider.setExpandWhenGrouping(t)},setGroupedStyle:function(t,e,i,n){this._groupedProvider._handler=n,this._groupedProvider.setExpandedAdornments(t),this._groupedProvider.setCollapsedAdornments(e),this._groupedProvider.setCreateFooterCallback(i)},setGroupSorting:function(t){this._groupSorting=t,this._groupedProvider._groupSorting=t},expand:function(t,e,i,n){this._groupedProvider.expand(t,e,i,n)},collapse:function(t,e,i){this._groupedProvider.collapse(t,e,i)},setPaging:function(t,e,i,n){this._itemProvider.setPaging(t,e,i,n)},page:function(){return this._itemProvider.page()},setPage:function(t,e){this._itemProvider.setPage(t,e)},pageCount:function(){return this._itemProvider.pageCount()},setPageCount:function(t){this._itemProvider.setPageCount(t)},setPageSorting:function(t){this._itemProvider.setPageSorting(t)},getDisplayItemIndex:function(t){return this._itemProvider.isPaging()?t.index()+this._itemProvider.pageStartIndex():t.index()},getCheckedRows:function(t){return this._itemProvider.getCheckedRows(t)},setCheckableExpression:function(t){this._itemProvider.setCheckableExpression(t)},resetCheckables:function(){this._itemProvider.resetCheckables()},applyCheckables:function(){this._itemProvider.applyCheckables()},dataSource:function(){return this._itemProvider.dataSource()},setDataSource:function(t){this._itemProvider.setDataSource(t)},getAllItems:function(){return this._groupedProvider.getAllItems()},getPagingAllItems:function(){var t=this._itemProvider;return(t.isSorted()?t._sortedItems:t._items).slice()},findItem:function(t,e,i,n,s){return this._groupedProvider.findItem(t,e,i,n,s)},findCell:function(t,e,i,n,s,r){return this._groupedProvider.findCell(t,e,i,n,s,r)},checkItems:function(t,e,i){this._groupedProvider.checkItems(t,e,i)},checkItem:function(t,e,i,n){this._groupedProvider.checkItem(t,e,i,n)},checkAll:function(t,e,i,n,s){this._groupedProvider.checkAll(t,e,i,n,s)},hasCellStyle:function(){return this._itemProvider.hasCellStyle()},setCellStyle:function(t,e,i){this._itemProvider.setCellStyle(t,e,i)},setCellStyles:function(t,e,i){this._itemProvider.setCellStyles(t,e,i)},clearCellStyles:function(){this._itemProvider.clearCellStyles()},removeCellStyle:function(t){this._itemProvider.removeCellStyle(t)},getCellStyle:function(t,e){return this._itemProvider.getCellStyle(t,e)},checkCellStyle:function(t,e){return this._itemProvider.checkCellStyle(t,e)},setCellEditable:function(t,e,i){this._itemProvider.setCellEditable(t,e,i)},setCellReadOnly:function(t,e,i){this._itemProvider.setCellReadOnly(t,e,i)},getCellEditable:function(t,e,i){return this._itemProvider.getCellEditable(t,e,i)},getCellReadOnly:function(t,e,i){return this._itemProvider.getCellReadOnly(t,e,i)},setCellCursor:function(t,e,i){this._itemProvider.setCellCursor(t,e,i)},getCellCursor:function(t,e){return this._itemProvider.getCellCursor(t,e)},setCellEditor:function(t,e,i){this._itemProvider.setCellEditor(t,e,i)},getCellEditor:function(t,e){return this._itemProvider.getCellEditor(t,e)},clearEditableMap:function(t){return this._itemProvider.clearEditableMap(t)},getItemOfRow:function(t,e){return this._itemProvider.getItemOfRow(t,e)},_doBeginUpdate:function(t){t=this._super(t);return this._groupedProvider._setEditItem(t),t},_doBeginAppendDummy:function(){var t=this._super();return this._groupedProvider._setDummyEditItem(t),t},_doBeginAppend:function(t){t=this._super(t);return this._groupedProvider._setEditItem(t),t},_doBeginInsert:function(t,e,i,n){t=this._super(t,e,i,n);return this._groupedProvider._setEditItem(t),t},_doCancelDummyEdit:function(){this._super(),this._groupedProvider._setDummyEditItem(null)},_doCancelEdit:function(t,e){this._super(t,e),this._groupedProvider._setEditItem(null)},_doCommitEdit:function(t,e){this._super(t,e),this._groupedProvider._setEditItem(null)},onGroupedItemProviderGrouping:function(t,e){return this.fireConfirmEvent(Yr.GROUPING,e)},onGroupedItemProviderGrouped:function(t){this.fireEvent(Yr.GROUPED)},onGroupedItemProviderExpand:function(t,e){return this.fireConfirmEvent(Yr.EXPAND,e)},onGroupedItemProviderExpanded:function(t,e){this.fireEvent(Yr.EXPANDED,e)},onGroupedItemProviderCollapse:function(t,e){return this.fireConfirmEvent(Yr.COLLAPSE,e)},onGroupedItemProviderCollapsed:function(t,e){this.fireEvent(Yr.COLLAPSED,e)},onItemProviderFilterAdded:function(t,e,i){this._fireFilterAdded(e,i)},onItemProviderFilterRemoved:function(t,e,i){this._fireFilterRemoved(e,i)},onItemProviderFilterCleared:function(t,e){this._fireFilterCleared(e)},onItemProviderFilterAllCleared:function(t){this._fireFilterAllCleared()},onItemProviderFiltered:function(t,e,i){this._fireFiltered(e,i)},onItemProviderSort:function(t,e,i){this._fireSort(e,i)},onItemProviderSorted:function(t){this._fireSorted()}}),io=new RegExp("\\s*,\\s*"),d=e("VisualStyles",le,{init:function(t,e,i,n){this._super(!0),this._owner=t,this._name=e,this._parent=null,this._sysDefault=null,this._values=[],this._updateLock=0,this._font=null,n!==I&&(this._fireEvents=n),i&&this.extend(i)},destroy:function(){return!1},assign:function(t){this._super(t);for(var e=d.STYLE_NAMES,i=Object.keys(e),n=0,s=i.length;n<s;n++){var r="_"+i[n];this[r]=t[r]}this._values=t._values.slice()},copy:function(t){for(var e=d.STYLE_NAMES,i=Object.keys(e),n=0,s=i.length;n<s;n++){var r="_"+i[n];!this[r]&&t[r]&&(this[r]=t[r],this._values[e[i[n]]]=!0)}},noProxy:function(){},name:null,parent:null,sysDefault:null,fireEvents:!0,setParent:function(t,e){return t!==this._parent&&(this._parent=t,e===I||e)&&this._fireEvents&&this.changed(d.STYLE_ALL),this},setSysDefault:function(t,e){t!==this._sysDefault&&(this._sysDefault=t,e===I||e)&&this._fireEvents&&this.changed(d.STYLE_ALL)},setParentAndDefault:function(t,e){this._parent=t,this._sysDefault=e},background:function(t){if(!(0<arguments.length))return this.searchStyles(d.BACKGROUND)._background;t!==I?(t=this.getFill(t),this._values[d.BACKGROUND]&&t===this._background||(this._background=t,this._values[d.BACKGROUND]=!0,this._fireEvents&&this.changed(d.BACKGROUND))):this._values[d.BACKGROUND]&&(delete this._background,this._values[d.BACKGROUND]=!1,this._fireEvents)&&this.changed(d.BACKGROUND)},selectedBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.SELECTED_BACKGROUND)._selectedBackground;t!==I?(t=this.getFill(t),this._values[d.SELECTED_BACKGROUND]&&t===this._selectedBackground||(this._selectedBackground=t,this._values[d.SELECTED_BACKGROUND]=!0,this._fireEvents&&this.changed(d.SELECTED_BACKGROUND))):this._values[d.SELECTED_BACKGROUND]&&(delete this._selectedBackground,this._values[d.SELECTED_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.SELECTED_BACKGROUND)},inactiveBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.INACTIVE_BACKGROUND)._inactiveBackground;t!==I?(t=this.getFill(t),this._values[d.INACTIVE_BACKGROUND]&&t===this._inactiveBackground||(this._inactiveBackground=t,this._values[d.INACTIVE_BACKGROUND]=!0,this._fireEvents&&this.changed(d.INACTIVE_BACKGROUND))):this._values[d.INACTIVE_BACKGROUND]&&(delete this._inactiveBackground,this._values[d.INACTIVE_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.INACTIVE_BACKGROUND)},border:function(t){if(!(0<arguments.length))return this.searchStyles(d.BORDER)._border;t!==I?(t=this.getStroke(t),this._values[d.BORDER]&&t===this._border||(this._border=t,this._values[d.BORDER]=!0,this._fireEvents&&this.changed(d.BORDER))):this._values[d.BORDER]&&(delete this._border,this._values[d.BORDER]=!1,this._fireEvents)&&this.changed(d.BORDER)},borderLeft:function(t){if(!(0<arguments.length))return this.searchStyles(d.BORDER_LEFT)._borderLeft;t!==I?(t=this.getStroke(t),this._values[d.BORDER_LEFT]&&t===this._borderLeft||(this._borderLeft=t,this._values[d.BORDER_LEFT]=!0,this._fireEvents&&this.changed(d.BORDER_LEFT))):this._values[d.BORDER_LEFT]&&(delete this._borderLeft,this._values[d.BORDER_LEFT]=!1,this._fireEvents)&&this.changed(d.BORDER_LEFT)},borderLeftWidth:function(t){var e=this.borderLeft();return e?e.width():0},borderRight:function(t){if(!(0<arguments.length))return this.searchStyles(d.BORDER_RIGHT)._borderRight;t!==I?(t=this.getStroke(t),this._values[d.BORDER_RIGHT]&&t===this._borderRight||(this._borderRight=t,this._values[d.BORDER_RIGHT]=!0,this._fireEvents&&this.changed(d.BORDER_RIGHT))):this._values[d.BORDER_RIGHT]&&(delete this._borderRight,this._values[d.BORDER_RIGHT]=!1,this._fireEvents)&&this.changed(d.BORDER_RIGHT)},borderRightWidth:function(t){var e=this.borderRight();return e?e.width():0},borderTop:function(t){if(!(0<arguments.length))return this.searchStyles(d.BORDER_TOP)._borderTop;t!==I?(t=this.getStroke(t),this._values[d.BORDER_TOP]&&t===this._borderTop||(this._borderTop=t,this._values[d.BORDER_TOP]=!0,this._fireEvents&&this.changed(d.BORDER_TOP))):this._values[d.BORDER_TOP]&&(delete this._borderTop,this._values[d.BORDER_TOP]=!1,this._fireEvents)&&this.changed(d.BORDER_TOP)},borderTopWidth:function(t){var e=this.borderTop();return e?e.width():0},borderBottom:function(t){if(!(0<arguments.length))return this.searchStyles(d.BORDER_BOTTOM)._borderBottom;t!==I?(t=this.getStroke(t),this._values[d.BORDER_BOTTOM]&&t===this._borderBottom||(this._borderBottom=t,this._values[d.BORDER_BOTTOM]=!0,this._fireEvents&&this.changed(d.BORDER_BOTTOM))):this._values[d.BORDER_BOTTOM]&&(delete this._borderBottom,this._values[d.BORDER_BOTTOM]=!1,this._fireEvents)&&this.changed(d.BORDER_BOTTOM)},borderBottomWidth:function(t){var e=this.borderBottom();return e?e.width():0},line:function(t){if(!(0<arguments.length))return this.searchStyles(d.LINE)._line;t!==I?(t=this.getStroke(t),this._values[d.LINE]&&t===this._line||(this._line=t,this._values[d.LINE]=!0,this._fireEvents&&this.changed(d.LINE))):this._values[d.LINE]&&(delete this._line,this._values[d.LINE]=!1,this._fireEvents)&&this.changed(d.LINE)},renderer:function(t){if(!(0<arguments.length))return this.searchStyles(d.RENDERER)._renderer;t!==I?this._values[d.RENDERER]&&t===this._renderer||(this._renderer=t,this._values[d.RENDERER]=!0,this._fireEvents&&this.changed(d.RENDERER)):this._values[d.RENDERER]&&(delete this._renderer,this._values[d.RENDERER]=!1,this._fireEvents)&&this.changed(d.RENDERER)},fontName:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_FAMILY)._fontFamily;t!==I?this._values[d.FONT_FAMILY]&&t===this._fontFamily||(this._fontFamily=t,this._values[d.FONT_FAMILY]=!0,this._fireEvents&&this.changed(d.FONT_FAMILY)):this._values[d.FONT_FAMILY]&&(delete this._fontFamily,this._values[d.FONT_FAMILY]=!1,this._fireEvents)&&this.changed(d.FONT_FAMILY)},fontFamily:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_FAMILY)._fontFamily;t!==I?this._values[d.FONT_FAMILY]&&t===this._fontFamily||(this._fontFamily=t,this._values[d.FONT_FAMILY]=!0,this._fireEvents&&this.changed(d.FONT_FAMILY)):this._values[d.FONT_FAMILY]&&(delete this._fontFamily,this._values[d.FONT_FAMILY]=!1,this._fireEvents)&&this.changed(d.FONT_FAMILY)},fontSize:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_SIZE)._fontSize;t!==I?(t=parseInt(t),this._values[d.FONT_SIZE]&&t===this._fontSize||(this._fontSize=t,this._values[d.FONT_SIZE]=!0,this._fireEvents&&this.changed(d.FONT_SIZE))):this._values[d.FONT_SIZE]&&(delete this._fontSize,this._values[d.FONT_SIZE]=!1,this._fireEvents)&&this.changed(d.FONT_SIZE)},fontBold:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_BOLD)._fontBold;t!==I?(t=t&&"false"!==t,this._values[d.FONT_BOLD]&&t===this._fontBold||(this._fontBold=t,this._values[d.FONT_BOLD]=!0,this._fireEvents&&this.changed(d.FONT_BOLD))):this._values[d.FONT_BOLD]&&(delete this._fontBold,this._values[d.FONT_BOLD]=!1,this._fireEvents)&&this.changed(d.FONT_BOLD)},fontItalic:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_ITALIC)._fontItalic;t!==I?(t=t&&"false"!==t,this._values[d.FONT_ITALIC]&&t===this._fontItalic||(this._fontItalic=t,this._values[d.FONT_ITALIC]=!0,this._fireEvents&&this.changed(d.FONT_ITALIC))):this._values[d.FONT_ITALIC]&&(delete this._fontItalic,this._values[d.FONT_ITALIC]=!1,this._fireEvents)&&this.changed(d.FONT_ITALIC)},fontUnderline:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_UNDERLINE)._fontUnderline;t!==I?(t=t&&"false"!==t,this._values[d.FONT_UNDERLINE]&&t===this._fontUnderline||(this._fontUnderline=t,this._values[d.FONT_UNDERLINE]=!0,this._fireEvents&&this.changed(d.FONT_UNDERLINE))):this._values[d.FONT_UNDERLINE]&&(delete this._fontUnderline,this._values[d.FONT_UNDERLINE]=!1,this._fireEvents)&&this.changed(d.FONT_UNDERLINE)},fontLinethrough:function(t){if(!(0<arguments.length))return this.searchStyles(d.FONT_LINETHROUGH)._fontLinethrough;t!==I?(t=t&&"false"!==t,this._values[d.FONT_LINETHROUGH]&&t===this._fontLinethrough||(this._fontLinethrough=t,this._values[d.FONT_LINETHROUGH]=!0,this._fireEvents&&this.changed(d.FONT_LINETHROUGH))):this._values[d.FONT_LINETHROUGH]&&(delete this._fontLinethrough,this._values[d.FONT_LINETHROUGH]=!1,this._fireEvents)&&this.changed(d.FONT_LINETHROUGH)},textWrap:function(t){if(!(0<arguments.length))return this.searchStyles(d.TEXT_WRAP)._textWrap;t!==I?this._values[d.TEXT_WRAP]&&t===this._textWrap||(this._textWrap=t,this._values[d.TEXT_WRAP]=!0,this._fireEvents&&this.changed(d.TEXT_WRAP)):this._values[d.TEXT_WRAP]&&(delete this._textWrap,this._values[d.TEXT_WRAP]=!1,this._fireEvents)&&this.changed(d.TEXT_WRAP)},foreground:function(t){if(!(0<arguments.length))return this.searchStyles(d.FOREGROUND)._foreground;t!==I?(t=this.getFill(t),this._values[d.FOREGROUND]&&t===this._foreground||(this._foreground=t,this._values[d.FOREGROUND]=!0,this._fireEvents&&this.changed(d.FOREGROUND))):this._values[d.FOREGROUND]&&(delete this._foreground,this._values[d.FOREGROUND]=!1,this._fireEvents)&&this.changed(d.FOREGROUND)},selectedForeground:function(t){if(!(0<arguments.length))return this.searchStyles(d.SELECTED_FOREGROUND)._selectedForeground;t!==I?(t=this.getFill(t),this._values[d.SELECTED_FOREGROUND]&&t===this._selectedForeground||(this._selectedForeground=t,this._values[d.SELECTED_FOREGROUND]=!0,this._fireEvents&&this.changed(d.SELECTED_FOREGROUND))):this._values[d.SELECTED_FOREGROUND]&&(delete this._selectedForeground,this._values[d.SELECTED_FOREGROUND]=!1,this._fireEvents)&&this.changed(d.SELECTED_FOREGROUND)},inactiveForeground:function(t){if(!(0<arguments.length))return this.searchStyles(d.INACTIVE_FOREGROUND)._inactiveForeground;t!==I?(t=this.getFill(t),this._values[d.INACTIVE_FOREGROUND]&&t===this._inactiveForeground||(this._inactiveForeground=t,this._values[d.INACTIVE_FOREGROUND]=!0,this._fireEvents&&this.changed(d.INACTIVE_FOREGROUND))):this._values[d.INACTIVE_FOREGROUND]&&(delete this._inactiveForeground,this._values[d.INACTIVE_FOREGROUND]=!1,this._fireEvents)&&this.changed(d.INACTIVE_FOREGROUND)},textAlignment:function(t){if(!(0<arguments.length))return this.searchStyles(d.TEXT_ALIGNMENT)._textAlignment;t!==I?this._values[d.TEXT_ALIGNMENT]&&t===this._textAlignment||(this._textAlignment=t,this._values[d.TEXT_ALIGNMENT]=!0,this._fireEvents&&this.changed(d.TEXT_ALIGNMENT)):this._values[d.TEXT_ALIGNMENT]&&(delete this._textAlignment,this._values[d.TEXT_ALIGNMENT]=!1,this._fireEvents)&&this.changed(d.TEXT_ALIGNMENT)},lineAlignment:function(t){if(!(0<arguments.length))return this.searchStyles(d.LINE_ALIGNMENT)._lineAlignment;t!==I?this._values[d.LINE_ALIGNMENT]&&t===this._lineAlignment||(this._lineAlignment=t,this._values[d.LINE_ALIGNMENT]=!0,this._fireEvents&&this.changed(d.LINE_ALIGNMENT)):this._values[d.LINE_ALIGNMENT]&&(delete this._lineAlignment,this._values[d.LINE_ALIGNMENT]=!1,this._fireEvents)&&this.changed(d.LINE_ALIGNMENT)},numberFormat:function(t){if(!(0<arguments.length))return this.searchStyles(d.NUMBER_FORMAT)._numberFormat;t!==I?this._values[d.NUMBER_FORMAT]&&t===this._numberFormat||(this._numberFormat=t,this._values[d.NUMBER_FORMAT]=!0,this._fireEvents&&this.changed(d.NUMBER_FORMAT)):this._values[d.NUMBER_FORMAT]&&(delete this._numberFormat,this._values[d.NUMBER_FORMAT]=!1,this._fireEvents)&&this.changed(d.NUMBER_FORMAT)},datetimeFormat:function(t){if(!(0<arguments.length))return this.searchStyles(d.DATETIME_FORMAT)._datetimeFormat;t!==I?this._values[d.DATETIME_FORMAT]&&t===this._datetimeFormat||(this._datetimeFormat=t,this._values[d.DATETIME_FORMAT]=!0,this._fireEvents&&this.changed(d.DATETIME_FORMAT)):this._values[d.DATETIME_FORMAT]&&(delete this._datetimeFormat,this._values[d.DATETIME_FORMAT]=!1,this._fireEvents)&&this.changed(d.DATETIME_FORMAT)},booleanFormat:function(t){if(!(0<arguments.length))return this.searchStyles(d.BOOLEAN_FORMAT)._booleanFormat;t!==I?this._values[d.BOOLEAN_FORMAT]&&t===this._booleanFormat||(this._booleanFormat=t,this._values[d.BOOLEAN_FORMAT]=!0,this._fireEvents&&this.changed(d.BOOLEAN_FORMAT)):this._values[d.BOOLEAN_FORMAT]&&(delete this._booleanFormat,this._values[d.BOOLEAN_FORMAT]=!1,this._fireEvents)&&this.changed(d.BOOLEAN_FORMAT)},prefix:function(t){if(!(0<arguments.length))return this.searchStyles(d.PREFIX)._prefix;t!==I?this._values[d.PREFIX]&&t===this._prefix||(this._prefix=t,this._values[d.PREFIX]=!0,this._fireEvents&&this.changed(d.PREFIX)):this._values[d.PREFIX]&&(delete this._prefix,this._values[d.PREFIX]=!1,this._fireEvents)&&this.changed(d.PREFIX)},suffix:function(t){if(!(0<arguments.length))return this.searchStyles(d.SUFFIX)._suffix;t!==I?this._values[d.SUFFIX]&&t===this._suffix||(this._suffix=t,this._values[d.SUFFIX]=!0,this._fireEvents&&this.changed(d.SUFFIX)):this._values[d.SUFFIX]&&(delete this._suffix,this._values[d.SUFFIX]=!1,this._fireEvents)&&this.changed(d.SUFFIX)},paddingLeft:function(t){if(!(0<arguments.length))return this.searchStyles(d.PADDING_LEFT)._paddingLeft;t!==I?(t=parseInt(t),this._values[d.PADDING_LEFT]&&t===this._paddingLeft||(this._paddingLeft=t,this._values[d.PADDING_LEFT]=!0,this._fireEvents&&this.changed(d.PADDING_LEFT))):this._values[d.PADDING_LEFT]&&(delete this._paddingLeft,this._values[d.PADDING_LEFT]=!1,this._fireEvents)&&this.changed(d.PADDING_LEFT)},paddingRight:function(t){if(!(0<arguments.length))return this.searchStyles(d.PADDING_RIGHT)._paddingRight;t!==I?this._values[d.PADDING_RIGHT]&&t===this._paddingRight||(t=parseInt(t),this._paddingRight=t,this._values[d.PADDING_RIGHT]=!0,this._fireEvents&&this.changed(d.PADDING_RIGHT)):this._values[d.PADDING_RIGHT]&&(delete this._paddingRight,this._values[d.PADDING_RIGHT]=!1,this._fireEvents)&&this.changed(d.PADDING_RIGHT)},paddingTop:function(t){if(!(0<arguments.length))return this.searchStyles(d.PADDING_TOP)._paddingTop;t!==I?(t=parseInt(t),this._values[d.PADDING_TOP]&&t===this._paddingTop||(this._paddingTop=t,this._values[d.PADDING_TOP]=!0,this._fireEvents&&this.changed(d.PADDING_TOP))):this._values[d.PADDING_TOP]&&(delete this._paddingTop,this._values[d.PADDING_TOP]=!1,this._fireEvents)&&this.changed(d.PADDING_TOP)},paddingBottom:function(t){if(!(0<arguments.length))return this.searchStyles(d.PADDING_BOTTOM)._paddingBottom;t!==I?(t=parseInt(t),this._values[d.PADDING_BOTTOM]&&t===this._paddingBottom||(this._paddingBottom=t,this._values[d.PADDING_BOTTOM]=!0,this._fireEvents&&this.changed(d.PADDING_BOTTOM))):this._values[d.PADDING_BOTTOM]&&(delete this._paddingBottom,this._values[d.PADDING_BOTTOM]=!1,this._fireEvents)&&this.changed(d.PADDING_BOTTOM)},paddingHorz:function(t){return this.paddingLeft()+this.paddingRight()},paddingVert:function(t){return this.paddingTop()+this.paddingBottom()},iconIndex:function(t){if(!(0<arguments.length))return this.searchStyles(d.ICON_INDEX)._iconIndex;t!==I?this._values[d.ICON_INDEX]&&t===this._iconIndex||(this._iconIndex=t,this._values[d.ICON_INDEX]=!0,this._fireEvents&&this.changed(d.ICON_INDEX)):this._values[d.ICON_INDEX]&&(delete this._iconIndex,this._values[d.ICON_INDEX]=!1,this._fireEvents)&&this.changed(d.ICON_INDEX)},iconLocation:function(t){if(!(0<arguments.length))return this.searchStyles(d.ICON_LOCATION)._iconLocation;t!==I?this._values[d.ICON_LOCATION]&&t===this._iconLocation||(this._iconLocation=t,this._values[d.ICON_LOCATION]=!0,this._fireEvents&&this.changed(d.ICON_LOCATION)):this._values[d.ICON_LOCATION]&&(delete this._iconLocation,this._values[d.ICON_LOCATION]=!1,this._fireEvents)&&this.changed(d.ICON_LOCATION)},iconAlignment:function(t){if(!(0<arguments.length))return this.searchStyles(d.ICON_ALIGNMENT)._iconAlignment;t!==I?this._values[d.ICON_ALIGNMENT]&&t===this._iconAlignment||(this._iconAlignment=t,this._values[d.ICON_ALIGNMENT]=!0,this._fireEvents&&this.changed(d.ICON_ALIGNMENT)):this._values[d.ICON_ALIGNMENT]&&(delete this._iconAlignment,this._values[d.ICON_ALIGNMENT]=!1,this._fireEvents)&&this.changed(d.ICON_ALIGNMENT)},iconOffset:function(t){if(!(0<arguments.length))return this.searchStyles(d.ICON_OFFSET)._iconOffset;t!==I?(t=parseInt(t),this._values[d.ICON_OFFSET]&&t===this._iconOffset||(this._iconOffset=t,this._values[d.ICON_OFFSET]=!0,this._fireEvents&&this.changed(d.ICON_OFFSET))):this._values[d.ICON_OFFSET]&&(delete this._iconOffset,this._values[d.ICON_OFFSET]=!1,this._fireEvents)&&this.changed(d.ICON_OFFSET)},iconPadding:function(t){if(!(0<arguments.length))return this.searchStyles(d.ICON_PADDING)._iconPadding;t!==I?(t=parseInt(t),this._values[d.ICON_PADDING]&&t===this._iconPadding||(this._iconPadding=t,this._values[d.ICON_PADDING]=!0,this._fireEvents&&this.changed(d.ICON_PADDING))):this._values[d.ICON_PADDING]&&(delete this._iconPadding,this._values[d.ICON_PADDING]=!1,this._fireEvents)&&this.changed(d.ICON_PADDING)},contentFit:function(t){if(!(0<arguments.length))return this.searchStyles(d.CONTENT_FIT)._contentFit;t!==I?this._values[d.CONTENT_FIT]&&t===this._contentFit||(this._contentFit=t,this._values[d.CONTENT_FIT]=!0,this._fireEvents&&this.changed(d.CONTENT_FIT)):this._values[d.CONTENT_FIT]&&(delete this._contentFit,this._values[d.CONTENT_FIT]=!1,this._fireEvents)&&this.changed(d.CONTENT_FIT)},selectionDisplay:function(t){if(!(0<arguments.length))return this.searchStyles(d.SELECTION_DISPLAY)._selectionDisplay;t!==I?this._values[d.SELECTION_DISPLAY]&&t===this._selectionDisplay||(this._selectionDisplay=t,this._values[d.SELECTION_DISPLAY]=!0,this._fireEvents&&this.changed(d.SELECTION_DISPLAY)):this._values[d.SELECTION_DISPLAY]&&(delete this._selectionDisplay,this._values[d.SELECTION_DISPLAY]=!1,this._fireEvents)&&this.changed(d.SELECTION_DISPLAY)},hoveredMaskBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.HOVERED_MASK_BACKGROUND)._hoveredMaskBackground;t!==I?(t=this.getFill(t),this._values[d.HOVERED_MASK_BACKGROUND]&&t===this._hoveredMaskBackground||(this._hoveredMaskBackground=t,this._values[d.HOVERED_MASK_BACKGROUND]=!0,this._fireEvents&&this.changed(d.HOVERED_MASK_BACKGROUND))):this._values[d.HOVERED_MASK_BACKGROUND]&&(delete this._hoveredMaskBackground,this._values[d.HOVERED_MASK_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.HOVERED_MASK_BACKGROUND)},hoveredMaskBorder:function(t){if(!(0<arguments.length))return this.searchStyles(d.HOVERED_MASK_BORDER)._hoveredMaskBorder;t!==I?(t=this.getStroke(t),this._values[d.HOVERED_MASK_BORDER]&&t===this._hoveredMaskBorder||(this._hoveredMaskBorder=t,this._values[d.HOVERED_MASK_BORDER]=!0,this._fireEvents&&this.changed(d.HOVERED_MASK_BORDER))):this._values[d.HOVERED_MASK_BORDER]&&(delete this._hoveredMaskBorder,this._values[d.HOVERED_MASK_BORDER]=!1,this._fireEvents)&&this.changed(d.HOVERED_MASK_BORDER)},hoveredBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.HOVERED_BACKGROUND)._hoveredBackground;t!==I?(t=this.getFill(t),this._values[d.HOVERED_BACKGROUND]&&t===this._hoveredBackground||(this._hoveredBackground=t,this._values[d.HOVERED_BACKGROUND]=!0,this._fireEvents&&this.changed(d.HOVERED_BACKGROUND))):this._values[d.HOVERED_BACKGROUND]&&(delete this._hoveredBackground,this._values[d.HOVERED_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.HOVERED_BACKGROUND)},hoveredForeground:function(t){if(!(0<arguments.length))return this.searchStyles(d.HOVERED_FOREGROUND)._hoveredForeground;t!==I?(t=this.getFill(t),this._values[d.HOVERED_FOREGROUND]&&t===this._hoveredForeground||(this._hoveredForeground=t,this._values[d.HOVERED_FOREGROUND]=!0,this._fireEvents&&this.changed(d.HOVERED_FOREGROUND))):this._values[d.HOVERED_FOREGROUND]&&(delete this._hoveredForeground,this._values[d.HOVERED_FOREGROUND]=!1,this._fireEvents)&&this.changed(d.HOVERED_FOREGROUND)},figureBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_BACKGROUND)._figureBackground;t!==I?(t=this.getFill(t),this._values[d.FIGURE_BACKGROUND]&&t===this._figureBackground||(this._figureBackground=t,this._values[d.FIGURE_BACKGROUND]=!0,this._fireEvents&&this.changed(d.FIGURE_BACKGROUND))):this._values[d.FIGURE_BACKGROUND]&&(delete this._figureBackground,this._values[d.FIGURE_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.FIGURE_BACKGROUND)},figureInactiveBackground:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_INACTIVE_BACKGROUND)._figureInactiveBackground;t!==I?(t=this.getFill(t),this._values[d.FIGURE_INACTIVE_BACKGROUND]&&t===this._figureInactiveBackground||(this._figureInactiveBackground=t,this._values[d.FIGURE_INACTIVE_BACKGROUND]=!0,this._fireEvents&&this.changed(d.FIGURE_INACTIVE_BACKGROUND))):this._values[d.FIGURE_INACTIVE_BACKGROUND]&&(delete this._figureInactiveBackground,this._values[d.FIGURE_INACTIVE_BACKGROUND]=!1,this._fireEvents)&&this.changed(d.FIGURE_INACTIVE_BACKGROUND)},figureBorder:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_BORDER)._figureBorder;t!==I?(t=this.getStroke(t),this._values[d.FIGURE_BORDER]&&t===this._figureBorder||(this._figureBorder=t,this._values[d.FIGURE_BORDER]=!0,this._fireEvents&&this.changed(d.FIGURE_BORDER))):this._values[d.FIGURE_BORDER]&&(delete this._figureBorder,this._values[d.FIGURE_BORDER]=!1,this._fireEvents)&&this.changed(d.FIGURE_BORDER)},figureSize:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_SIZE)._figureSize;t!==I?this._values[d.FIGURE_SIZE]&&t===this._figureSize||(this._figureSize=d.getDimension(t),this._values[d.FIGURE_SIZE]=!0,this._fireEvents&&this.changed(d.FIGURE_SIZE)):this._values[d.FIGURE_SIZE]&&(delete this._figureSize,this._values[d.FIGURE_SIZE]=!1,this._fireEvents)&&this.changed(d.FIGURE_SIZE)},figureName:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_NAME)._figureName;t!==I?this._values[d.FIGURE_NAME]&&t===this._figureName||(this._figureName=t,this._values[d.FIGURE_NAME]=!0,this._fireEvents&&this.changed(d.FIGURE_NAME)):this._values[d.FIGURE_NAME]&&(delete this._figureName,this._values[d.FIGURE_NAME]=!1,this._fireEvents)&&this.changed(d.FIGURE_NAME)},figureState:function(t){if(!(0<arguments.length))return this.searchStyles(d.FIGURE_STATE)._figureState;t!==I?this._values[d.FIGURE_STATE]&&t===this._figureState||(this._figureState=t,this._values[d.FIGURE_STATE]=!0,this._fireEvents&&this.changed(d.FIGURE_STATE)):this._values[d.FIGURE_STATE]&&(delete this._figureState,this._values[d.FIGURE_STATE]=!1,this._fireEvents)&&this.changed(d.FIGURE_STATE)},font:function(t){var e,i,n;if(!(0<arguments.length))return e=[],i=this.fontSize(),this.fontItalic()&&e.push("italic"),this.fontBold()&&e.push("bold"),e.push(i+"px"),(n=this.fontFamily())&&e.push(n),{font:r=e.join(" "),size:i,underline:this.fontUnderline(),linethrough:this.fontLinethrough()};if(t=t&&t.trim()){var s,r,o=t.split(io),a=o.length;for(0<a&&o[0]&&this.fontFamily(o[0]),1<a&&o[1]&&this.fontSize(o[1]),s=2;s<a;s++)if(r=o[s])switch(r=r.toLowerCase()){case"bold":this.fontBold(!0);break;case"italic":this.fontItalic(!0);break;case"underline":this.fontUnderline(!0);break;case"linethrough":case"line-through":this.fontLinethrough(!0)}}},beginUpdate:function(){this._updateLock++},endUpdate:function(t){t=!(0<arguments.length)||t,this._updateLock--,0==this._updateLock&&this._fireEvents&&this.changed(d.STYLE_ALL,t)},hasValue:function(t){return"string"==typeof t?this._values[d.STYLE_NAMES[t]]:this._values[t]},getValue:function(t){return this["_"+t]},clearValues:function(){this._values=[]},extend:function(t,e){e=!(1<arguments.length)||e,this.beginUpdate();try{if(t instanceof d){var i=t._values;i[d.BACKGROUND]&&this.background(t._background),i[d.SELECTED_BACKGROUND]&&this.selectedBackground(t._selectedBackground),i[d.INACTIVE_BACKGROUND]&&this.inactiveBackground(t._inactiveBackground),i[d.BORDER]&&this.border(t._border),i[d.BORDER_LEFT]&&this.borderLeft(t._borderLeft),i[d.BORDER_RIGHT]&&this.borderRight(t._borderRight),i[d.BORDER_TOP]&&this.borderTop(t._borderTop),i[d.BORDER_BOTTOM]&&this.borderBottom(t._borderBottom),i[d.LINE]&&this.line(t._line),i[d.RENDERER]&&this.renderer(t._renderer),i[d.FONT_FAMILY]&&this.fontFamily(t._fontFamily),i[d.FONT_SIZE]&&this.fontSize(t._fontSize),i[d.FONT_BOLD]&&this.fontBold(t._fontBold),i[d.FONT_ITALIC]&&this.fontItalic(t._fontItalic),i[d.FONT_UNDERLINE]&&this.fontUnderline(t._fontUnderline),i[d.FONT_LINETHROUGH]&&this.fontLinethrough(t._fontLinethrough),i[d.TEXT_WRAP]&&this.textWrap(t._textWrap),i[d.FOREGROUND]&&this.foreground(t._foreground),i[d.SELECTED_FOREGROUND]&&this.selectedForeground(t._selectedForeground),i[d.INACTIVE_FOREGROUND]&&this.inactiveForeground(t._inactiveForeground),i[d.TEXT_ALIGNMENT]&&this.textAlignment(t._textAlignment),i[d.LINE_ALIGNMENT]&&this.lineAlignment(t._lineAlignment),i[d.NUMBER_FORMAT]&&this.numberFormat(t._numberFormat),i[d.DATETIME_FORMAT]&&this.datetimeFormat(t._datetimeFormat),i[d.BOOLEAN_FORMAT]&&this.booleanFormat(t._booleanFormat),i[d.PREFIX]&&this.prefix(t._prefix),i[d.SUFFIX]&&this.suffix(t._suffix),i[d.PADDING_LEFT]&&this.paddingLeft(t._paddingLeft),i[d.PADDING_RIGHT]&&this.paddingRight(t._paddingRight),i[d.PADDING_TOP]&&this.paddingTop(t._paddingTop),i[d.PADDING_BOTTOM]&&this.paddingBottom(t._paddingBottom),i[d.ICON_INDEX]&&this.iconIndex(t._iconIndex),i[d.ICON_LOCATION]&&this.iconLocation(t._iconLocation),i[d.ICON_ALIGNMENT]&&this.iconAlignment(t._iconAlignment),i[d.ICON_OFFSET]&&this.iconOffset(t._iconOffset),i[d.ICON_PADDING]&&this.iconPadding(t._iconPadding),i[d.CONTENT_FIT]&&this.contentFit(t._contentFit),i[d.SELECTION_DISPLAY]&&this.selectionDisplay(t._selectionDisplay),i[d.HOVERED_MASK_BACKGROUND]&&this.hoveredMaskBackground(t._hoveredMaskBackground),i[d.HOVERED_MASK_BORDER]&&this.hoveredMaskBorder(t._hoveredMaskBorder),i[d.HOVERED_BACKGROUND]&&this.hoveredBackground(t._hoveredBackground),i[d.HOVERED_FOREGROUND]&&this.hoveredForeground(t._hoveredForeground),i[d.FIGURE_BACKGROUND]&&this.figureBackground(t._figureBackground),i[d.FIGURE_INACTIVE_BACKGROUND]&&this.figureInactiveBackground(t._figureInactiveBackground),i[d.FIGURE_BORDER]&&this.figureBorder(t._figureBorder),i[d.FIGURE_SIZE]&&this.figureSize(t._figureSize),i[d.FIGURE_NAME]&&this.figureName(t._figureName),i[d.FIGURE_STATE]&&this.figureState(t._figureState)}else if(t){var n,s=t.padding;for(n in void 0!==s&&(this.paddingLeft(s),this.paddingRight(s),this.paddingTop(s),this.paddingBottom(s)),t){var r=this[n];r instanceof Function&&r.call(this,t[n])}}}finally{this.endUpdate(e)}},toProxy:function(t){var e={name:this._name,background:d.getFillText(this.background()),selectedBackground:d.getFillText(this.selectedBackground()),inactiveBackground:d.getFillText(this.inactiveBackground()),border:d.getStrokeText(this.border()),borderLeft:d.getStrokeText(this.borderLeft()),borderRight:d.getStrokeText(this.borderRight()),borderTop:d.getStrokeText(this.borderTop()),borderBottom:d.getStrokeText(this.borderBottom()),line:d.getStrokeText(this.line()),renderer:this.renderer(),fontFamily:this.fontFamily(),fontSize:this.fontSize(),fontBold:this.fontBold(),fontItalic:this.fontItalic(),fontUnderline:this.fontUnderline(),fontLinethrough:this.fontLinethrough(),textWrap:this.textWrap(),foreground:d.getFillText(this.foreground()),selectedForeground:d.getFillText(this.selectedForeground()),inactiveForeground:d.getFillText(this.inactiveForeground()),textAlignment:this.textAlignment(),lineAlignment:this.lineAlignment(),numberFormat:this.numberFormat(),datetimeFormat:this.datetimeFormat(),booleanFormat:this.booleanFormat(),prefix:this.prefix(),suffix:this.suffix(),paddingLeft:this.paddingLeft(),paddingRight:this.paddingRight(),paddingTop:this.paddingTop(),paddingBottom:this.paddingBottom(),iconIndex:this.iconIndex(),iconLocation:this.iconLocation(),iconAlignment:this.iconAlignment(),iconOffset:this.iconOffset(),iconPadding:this.iconPadding(),contentFit:this.contentFit(),selectionDisplay:this.selectionDisplay(),hoveredMaskBackground:d.getFillText(this.hoveredMaskBackground()),hoveredMaskBorder:d.getStrokeText(this.hoveredMaskBorder()),hoveredForeground:d.getFillText(this.hoveredForeground()),figureBackground:d.getFillText(this.figureBackground()),figureInactiveBackground:d.getFillText(this.figureInactiveBackground()),figureBorder:d.getStrokeText(this.figureBorder()),figureSize:d.getDimensionText(this.figureSize()),figureName:this.figureName(),figureState:this.figureState()};if(!1!==t)return e;var i,n,s=this._values,r={};for(n in e)null!=(i=d.STYLE_NAMES[n])&&s[i]&&(r[n]=e[n]);return r},applyPaddings:function(t){var e;return t.x+=e=this.paddingLeft(),t.width-=e+this.paddingRight(),t.y+=e=this.paddingTop(),t.height-=e+this.paddingBottom(),t},searchStyles:function(t){if(this._values[t])return this;for(var e=this._parent;e;){if(e._values[t])return e;e=e._parent}if(this._sysDefault&&this._sysDefault._values[t])return this._sysDefault;for(e=this._parent;e;){if(e._sysDefault&&e._sysDefault._values[t])return e._sysDefault;e=e._parent}return d.Default},changed:function(t,e){e=!(1<arguments.length)||e,0==this._updateLock&&e&&(this._owner&&this._owner.stylesChanged?this._owner.stylesChanged(t):this.fireEvent(d.CHANGED,t))},getFill:function(t){return d.getFill(t)},getStroke:function(t){return d.getStroke(t)}},{STYLE_ALL:-1,VISIBILITY:0,BACKGROUND:1,SELECTED_BACKGROUND:2,INACTIVE_BACKGROUND:3,FOREGROUND:4,SELECTED_FOREGROUND:5,INACTIVE_FOREGROUND:6,BORDER:10,BORDER_LEFT:11,BORDER_RIGHT:12,BORDER_TOP:13,BORDER_BOTTOM:14,LINE:15,RENDERER:16,TEXT_ALIGNMENT:20,LINE_ALIGNMENT:21,NUMBER_FORMAT:22,DATETIME_FORMAT:23,BOOLEAN_FORMAT:24,PREFIX:25,SUFFIX:26,FONT:30,FONT_FAMILY:31,FONT_SIZE:32,FONT_BOLD:33,FONT_ITALIC:34,FONT_UNDERLINE:35,FONT_LINETHROUGH:36,TEXT_WRAP:37,PADDING_LEFT:40,PADDING_RIGHT:41,PADDING_TOP:42,PADDING_BOTTOM:43,ICON_INDEX:44,ICON_LOCATION:45,ICON_ALIGNMENT:46,ICON_OFFSET:47,ICON_PADDING:48,CONTENT_FIT:49,SELECTION_DISPLAY:50,HOVERED_MASK_BACKGROUND:51,HOVERED_MASK_BORDER:52,HOVERED_BACKGROUND:53,HOVERED_FOREGROUND:54,FIGURE_BACKGROUND:55,FIGURE_INACTIVE_BACKGROUND:56,FIGURE_BORDER:57,FIGURE_SIZE:58,FIGURE_NAME:59,FIGURE_STATE:60,getFill:function(t){var e;return t="string"==typeof t?new(0==(e=t.trim().toLowerCase()).indexOf("linear")?An:0==e.indexOf("radial")?Vn:0==e.indexOf("glass")?Pn:g)(e):t},getFillText:function(t){return t?t.toText():null},getStroke:function(t){var e;return"string"==typeof t&&(e=t.trim().split(","),t=new f(e[0],e[1])),t},getStrokeText:function(t){return t?t.toText():null},getFont:function(t){var e=[],i=String(t),t=12;if(i){var n,s,r=null,o=!1,a=!1;0<(s=(n=i.toLowerCase().split(io)).length)&&n[0]&&(r=n[0]),1<s&&n[1]&&(t=Number(n[1]));for(var h=2;h<s;h++)if(i=n[h])switch(i=i.toLowerCase()){case"bold":o=!0;break;case"italic":a=!0}a&&e.push("italic"),o&&e.push("bold"),e.push(t+"px"),r&&e.push(r)}return{font:i=e.join(" "),size:t}},getDimension:function(t){return t=t instanceof Zs?t:new Zs(t)},getDimensionText:function(t){return t?t.toString():null}},function(t){var e;t.Default=new t(null,"defaultStyles"),(e=t.Default)._background=g.WHITE,e._selectedBackground=g.DKGRAY,e._inactiveBackground=g.LTGRAY,e._border=null,e._borderLeft=null,e._borderRight=null,e._borderTop=null,e._borderBottom=null,e._line=null,e._fontFamily="Tahoma",e._fontSize=12,e._fontBold=!1,e._fontItalic=!1,e._fontUnderline=!1,e._fontLinethrough=!1,e._textWrap=Ms.NONE,e._foreground=g.BLACK,e._selectedForeground=g.WHITE,e._inactiveForeground=g.GRAY,e._textAlignment=D.CENTER,e._lineAlignment=D.CENTER,e._numberFormat=null,e._datetimeFormat=null,e._booleanFormat=null,e._prefix=null,e._suffix=null,e._paddingLeft=0,e._paddingRight=0,e._paddingTop=0,e._paddingBottom=0,e._iconIndex=0,e._iconLocation=Fs.LEFT,e._iconAlignment=D.CENTER,e._iconOffset=0,e._iconPadding=2,e._contentFit=Ns.AUTO,e._selectionDisplay=Ls.MASK,e._hoveredMaskBackground=new g(525505271),e._hoveredMaskBorder=new f(861049591),e._hoveredBackground=null,e._hoveredForeground=null,e._figureBackground=new g(4278224896),e._figureInactiveBackground=g.LTGRAY,e._figureBorder=null,e._figureSize=null,e._figureName=null,e._figureState=null,t.STYLE_NAMES={background:t.BACKGROUND,selectedBackground:t.SELECTED_BACKGROUND,inactiveBackground:t.INACTIVE_BACKGROUND,border:t.BORDER,borderLeft:t.BORDER_LEFT,borderRight:t.BORDER_RIGHT,borderTop:t.BORDER_TOP,borderBottom:t.BORDER_BOTTOM,line:t.LINE,renderer:t.RENDERER,fontFamily:t.FONT_FAMILY,fontSize:t.FONT_SIZE,fontBold:t.FONT_BOLD,fontItalic:t.FONT_ITALIC,fontUnderline:t.FONT_UNDERLINE,fontLinethrough:t.FONT_LINETHROUGH,textWrap:t.TEXT_WRAP,foreground:t.FOREGROUND,selectedForeground:t.SELECTED_FOREGROUND,inactiveForeground:t.INACTIVE_FOREGROUND,textAlignment:t.TEXT_ALIGNMENT,lineAlignment:t.LINE_ALIGNMENT,numberFormat:t.NUMBER_FORMAT,datetimeFormat:t.DATETIME_FORMAT,booleanFormat:t.BOOLEAN_FORMAT,prefix:t.PREFIX,suffix:t.SUFFIX,paddingLeft:t.PADDING_LEFT,paddingRight:t.PADDING_RIGHT,paddingTop:t.PADDING_TOP,paddingBottom:t.PADDING_BOTTOM,iconIndex:t.ICON_INDEX,iconLocation:t.ICON_LOCATION,iconAlignment:t.ICON_ALIGNMENT,iconOffset:t.ICON_OFFSET,iconPadding:t.ICON_PADDING,contentFit:t.CONTENT_FIT,selectionDisplay:t.SELECTION_DISPLAY,hoveredMaskBackground:t.HOVERED_MASK_BACKGROUND,hoveredMaskBorder:t.HOVERED_MASK_BORDER,hoveredBackground:t.HOVERED_BACKGROUND,hoveredForeground:t.HOVERED_FOREGROUND,figureBackground:t.FIGURE_BACKGROUND,figureInactiveBackground:t.FIGURE_INACTIVE_BACKGROUND,figureBorder:t.FIGURE_BORDER,figureSize:t.FIGURE_SIZE,figureName:t.FIGURE_NAME,figureState:t.FIGURE_STATE}}),u=(d.CHANGED="onVisualStylesChanged",e("GridStyleSheet",null,{init:function(){this._super(),this._grid=new d(null,u.DEFAULT,null,!1),this._panel=new d(null,u.PANEL,null,!1),this._body=new d(null,u.BODY,null,!1),this._bodyEmpty=new d(null,u.BODY_EMPTY,null,!1),this._bodyRowHover=new d(null,u.BODY_ROWHOVER,null,!1),this._bodyRowFocus=new d(null,u.BODY_ROWFOCUS,null,!1),this._fixed=new d(null,u.FIXED,null,!1),this._fixedColBar=new d(null,u.FIXED_COLBAR,null,!1),this._fixedRowBar=new d(null,u.FIXED_ROWBAR,null,!1),this._header=new d(null,u.HEADER,null,!1),this._headerGroup=new d(null,u.HEADER_GROUP,null,!1),this._headerSub=new d(null,u.HEADER_SUB,null,!1),this._headerSummary=new d(null,u.HEADER_SUMMARY,null,!1),this._footer=new d(null,u.FOOTER,null,!1),this._footerGroup=new d(null,u.FOOTER_GROUP,null,!1),this._rowGroupHead=new d(null,u.ROWGROUP_HEAD,null,!1),this._rowGroupFoot=new d(null,u.ROWGROUP_FOOT,null,!1),this._rowGroupSummary=new d(null,u.ROWGROUP_SUMMARY,null,!1),this._rowGroupHeader=new d(null,u.ROWGROUP_HEADER,null,!1),this._rowGroupFooter=new d(null,u.ROWGROUP_FOOTER,null,!1),this._rowGroupPanel=new d(null,u.ROWGROUP_PANEL,null,!1),this._rowGroupBar=new d(null,u.ROWGROUP_BAR,null,!1),this._rowGroupHeaderBar=new d(null,u.ROWGROUP_HEADER_BAR,null,!1),this._rowGroupFooterBar=new d(null,u.ROWGROUP_FOOTER_BAR,null,!1),this._indicator=new d(null,u.INDICATOR,null,!1),this._indicatorHead=new d(null,u.INDICATOR_HEAD,null,!1),this._indicatorFoot=new d(null,u.INDICATOR_FOOT,null,!1),this._indicatorSum=new d(null,u.INDICATOR_SUM,null,!1),this._checkBar=new d(null,u.CHECKBAR,null,!1),this._checkBarHead=new d(null,u.CHECKBAR_HEAD,null,!1),this._checkBarFoot=new d(null,u.CHECKBAR_FOOT,null,!1),this._checkBarSum=new d(null,u.CHECKBAR_SUM,null,!1),this._stateBar=new d(null,u.STATEBAR,null,!1),this._stateBarHead=new d(null,u.STATEBAR_HEAD,null,!1),this._stateBarFoot=new d(null,u.STATEBAR_FOOT,null,!1),this._stateBarSum=new d(null,u.STATEBAR_SUM,null,!1),this._selection=new d(null,u.SELECTION,null,!1),this._treeExpander=new d(null,u.TREE_EXPANDER,null,!1),this._fixedTreeExpander=new d(null,u.FIXED_TREE_EXPANDER,null,!1),this._scrollBar=new d(null,u.SCROLLBAR,null,!1),this._scrollThumb=new d(null,u.SCROLLTHUMB,null,!1),this._scrollButton=new d(null,u.SCROLLBUTTON,null,!1)},destroy:function(){return!1},getGrid:function(){return this._grid},getPanel:function(){return this._panel},getBody:function(){return this._body},getBodyEmpty:function(){return this._bodyEmpty},getBodyRowHover:function(){return this._bodyRowHover},getBodyRowFocus:function(){return this._bodyRowFocus},getFixed:function(){return this._fixed},getFixedColBar:function(){return this._fixedColBar},getFixedRowBar:function(){return this._fixedRowBar},getHeader:function(){return this._header},getHeaderGroup:function(){return this._headerGroup},getHeaderSub:function(){return this._headerSub},getHeaderSummary:function(){return this._headerSummary},getFooter:function(){return this._footer},getFooterGroup:function(){return this._footerGroup},getRowGroupHead:function(){return this._rowGroupHead},getRowGroupFoot:function(){return this._rowGroupFoot},getRowGroupSummary:function(){return this._rowGroupSummary},getRowGroupHeader:function(){return this._rowGroupHeader},getRowGroupFooter:function(){return this._rowGroupFooter},getRowGroupPanel:function(){return this._rowGroupPanel},getRowGroupBar:function(){return this._rowGroupBar},getRowGroupHeaderBar:function(){return this._rowGroupHeaderBar},getRowGroupFooterBar:function(){return this._rowGroupFooterBar},getIndicator:function(){return this._indicator},getIndicatorHead:function(){return this._indicatorHead},getIndicatorFoot:function(){return this._indicatorFoot},getIndicatorSum:function(){return this._indicatorSum},getCheckBar:function(){return this._checkBar},getCheckBarHead:function(){return this._checkBarHead},getCheckBarFoot:function(){return this._checkBarFoot},getCheckBarSum:function(){return this._checkBarSum},getStateBar:function(){return this._stateBar},getStateBarHead:function(){return this._stateBarHead},getStateBarFoot:function(){return this._stateBarFoot},getStateBarSum:function(){return this._stateBarSum},getSelection:function(){return this._selection},getTreeExpander:function(){return this._treeExpander},getFixedTreeExpander:function(){return this._fixedTreeExpander},getScrollBar:function(){return this._scrollBar},getScrollThumb:function(){return this._scrollThumb},getScrollButton:function(){return this._scrollButton},grid:function(){return this._grid},panel:function(){return this._panel},body:function(){return this._body},bodyEmpty:function(){return this._bodyEmpty},bodyRowHover:function(){return this._bodyRowHover},bodyRowFocus:function(){return this._bodyRowFocus},fixed:function(){return this._fixed},fixedColBar:function(){return this._fixedColBar},fixedRowBar:function(){return this._fixedRowBar},header:function(){return this._header},headerGroup:function(){return this._headerGroup},headerSub:function(){return this._headerSub},headerSummary:function(){return this._headerSummary},footer:function(){return this._footer},footerGroup:function(){return this._footerGroup},rowGroupHead:function(){return this._rowGroupHead},rowGroupFoot:function(){return this._rowGroupFoot},rowGroupSummary:function(){return this._rowGroupSummary},rowGroupHeader:function(){return this._rowGroupHeader},rowGroupFooter:function(){return this._rowGroupFooter},rowGroupPanel:function(){return this._rowGroupPanel},rowGroupBar:function(){return this._rowGroupBar},rowGroupHeaderBar:function(){return this._rowGroupHeaderBar},rowGroupFooterBar:function(){return this._rowGroupFooterBar},indicator:function(){return this._indicator},indicatorHead:function(){return this._indicatorHead},indicatorFoot:function(){return this._indicatorFoot},indicatorSum:function(){return this._indicatorSum},checkBar:function(){return this._checkBar},checkBarHead:function(){return this._checkBarHead},checkBarFoot:function(){return this._checkBarFoot},checkBarSum:function(){return this._checkBarSum},stateBar:function(){return this._stateBar},stateBarHead:function(){return this._stateBarHead},stateBarFoot:function(){return this._stateBarFoot},stateBarSum:function(){return this._stateBarSum},selection:function(){return this._selection},treeExpander:function(){return this._treeExpander},fixedTreeExpander:function(){return this._fixedTreeExpander},scrollBar:function(){return this._scrollBar},scrollThumb:function(){return this._scrollThumb},scrollButton:function(){return this._scrollButton}},{DEFAULT:"default",GRID:"grid",PANEL:"panel",BODY:"body",BODY_EMPTY:"body.empty",BODY_ROWHOVER:"body.rowHover",BODY_ROWFOCUS:"body.rowFocus",FIXED:"fixed",FIXED_COLBAR:"fixed.colBar",FIXED_ROWBAR:"fixed.rowBar",HEADER:"header",HEADER_GROUP:"header.group",HEADER_SUB:"header.sub",HEADER_SUMMARY:"header.summary",FOOTER:"footer",FOOTER_GROUP:"footer.group",ROWGROUP_HEADER:"rowGroup.header",ROWGROUP_FOOTER:"rowGroup.footer",ROWGROUP_HEAD:"rowGroup.head",ROWGROUP_FOOT:"rowGroup.foot",ROWGROUP_SUMMARY:"rowGroup.summary",ROWGROUP_BAR:"rowGroup.bar",ROWGROUP_HEADER_BAR:"rowGroup.headerBar",ROWGROUP_FOOTER_BAR:"rowGroup.footerBar",ROWGROUP_PANEL:"rowGroup.panel",ROWGROUP_LEVELS:"rowGroup.levels",INDICATOR:"indicator",INDICATOR_HEAD:"indicator.head",INDICATOR_FOOT:"indicator.foot",INDICATOR_SUMMARY:"indicator.summary",CHECKBAR:"checkBar",CHECKBAR_HEAD:"checkBar.head",CHECKBAR_FOOT:"checkBar.foot",CHECKBAR_SUMMARY:"checkBar.summary",STATEBAR:"stateBar",STATEBAR_HEAD:"stateBar.head",STATEBAR_FOOT:"stateBar.foot",STATEBAR_SUMMARY:"stateBar.summary",SELECTION:"selection",TREE_EXPANDER:"tree.expander",FIXED_TREE_EXPANDER:"fixed.tree.expander",SCROLLBAR:"scrollBar",SCROLLTHUMB:"scrollBar.thumb",SCROLLBUTTON:"scrollBar.button",clearStyles:function(t){t.beginUpdate();try{t.styles().clearValues(),t.panel().styles().clearValues(),t.body()().styles()().clearValues(),t.body().emptyStyles().clearValues(),t.body().rowHoverStyles().clearValues(),t.body().rowFocusStyles().clearValues(),t.fixedOptions().styles().clearValues(),t.fixedOptions().colBarStyles().clearValues(),t.fixedOptions().rowBarStyles().clearValues(),t.header().styles().clearValues(),t.header().groupStyles().clearValues(),t.header().subStyles().clearValues(),t.header().summary().styles().clearValues(),t.footer().styles().clearValues(),t.footer().groupStyles().clearValues(),t.rowGroup().headStyles().clearValues(),t.rowGroup().footStyles().clearValues(),t.rowGroup().summaryStyles().clearValues(),t.rowGroup().headerStyles().clearValues(),t.rowGroup().footerStyles().clearValues(),t.rowGroup().panelStyles().clearValues(),t.rowGroup().barStyles().clearValues(),t.rowGroup().headerBarStyles().clearValues(),t.rowGroup().footerBarStyles().clearValues(),t.indicator().styles().clearValues(),t.indicator().headStyles().clearValues(),t.indicator().footStyles().clearValues(),t.indicator().summaryStyles().clearValues(),t.checkBar().styles().clearValues(),t.checkBar().headStyles().clearValues(),t.checkBar().footStyles().clearValues(),t.checkBar().summaryStyles().clearValues(),t.stateBar().styles().clearValues(),t.stateBar().headStyles().clearValues(),t.stateBar().footStyles().clearValues(),t.stateBar().summaryStyles().clearValues(),t.selectOptions().maskStyles().clearValues(),t.displayOptions().scrollBarStyles().clearValues(),t.displayOptions().scrollThumbStyles().clearValues(),t.displayOptions().scrollButtonStyles().clearValues(),t instanceof X_&&t.treeOptions().expanderStyles().clearValues()}finally{t.endUpdate()}}})),no=(u.Default=(gt(),Kr=new u,(n=Kr._grid).background(g.WHITE),n.foreground(g.BLACK),n.border(new f(4289374890)),n.borderLeft(null),n.borderTop(null),n.borderRight(null),n.borderBottom(null),n.inactiveBackground(g.LTGRAY),n.fontFamily("Tahoma"),n.fontSize(12),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.NEAR),n.lineAlignment(D.CENTER),n.iconLocation(Fs.LEFT),n.iconAlignment(D.CENTER),n.iconPadding(2),n.contentFit(Ns.AUTO),n.figureBackground(g.BLACK),(n=Kr._panel).background(new g(4291611852)),n.foreground(g.BLACK),n.borderRight(new f(4286019447)),n.paddingLeft(0),n.paddingTop(4),n.paddingBottom(5),n.paddingRight(2),n.textAlignment(D.NEAR),n.lineAlignment(D.CENTER),(n=Kr._body).background(g.WHITE),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(new f(4291611852)),n.borderBottom(n.borderRight()),n.line(f.DKGRAY),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.NEAR),n.lineAlignment(D.CENTER),n.iconLocation(Fs.LEFT),n.iconAlignment(D.CENTER),n.iconPadding(2),n.contentFit(Ns.AUTO),n.figureInactiveBackground(g.LTGRAY),(n=Kr._bodyEmpty).background(new g(4294506744)),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(new f(4288256409)),n.borderBottom(n.borderRight()),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.fontSize(14),n.textAlignment(D.NEAR),n.lineAlignment(D.NEAR),(n=Kr._bodyRowHover).background(new g(543516779)),n.border(null),(n=Kr._bodyRowFocus).background(new g(814254216)),n.border(null),(n=Kr._fixed).background(g.LTGRAY),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(new f(4288256409)),n.borderBottom(n.borderRight()),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.NEAR),n.lineAlignment(D.CENTER),n.figureInactiveBackground(g.LTGRAY),(n=Kr._fixedColBar).background(g.LTGRAY),n.borderRight(new f(4288256409)),n.borderBottom(n.borderRight()),(n=Kr._fixedRowBar).background(g.LTGRAY),n.borderRight(new f(4288256409)),n.borderBottom(n.borderRight()),(n=Kr._header).background(new An("linear #ffffff #cccccc 90")),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),n.textWrap(Ms.NORMAL),n.hoveredBackground(g.LTGRAY),(n=Kr._headerGroup).background(new An("linear #ffffff #aaaaaa 90")),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),n.textWrap(Ms.NORMAL),(n=Kr._headerSub).foreground(g.BLACK),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),n.textWrap(Ms.NORMAL),(n=Kr._headerSummary).background(new g(4293848814)),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(1),n.paddingBottom(2),n.textAlignment(D.FAR),n.lineAlignment(D.CENTER),(n=Kr._footer).background(new g(4293848814)),n.foreground(g.BLACK),n.borderLeft(null),n.borderBottom(null),n.borderRight(f.GRAY),n.borderTop(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(2),n.paddingBottom(1),n.textAlignment(D.FAR),n.lineAlignment(D.CENTER),(n=Kr._footerGroup).background(new g(4293848814)),n.foreground(g.BLACK),n.borderLeft(null),n.borderBottom(null),n.borderRight(f.GRAY),n.borderTop(f.GRAY),n.paddingTop(2),n.paddingBottom(1),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.FAR),n.lineAlignment(D.CENTER),(n=Kr._rowGroupHeader).background(g.GRAY),n.foreground(g.WHITE),n.borderLeft(null),n.borderTop(null),n.borderRight(f.DKGRAY),n.borderBottom(f.DKGRAY),n.paddingTop(2),n.paddingBottom(2),n.paddingLeft(2),n.paddingRight(2),n.textAlignment(D.NEAR),n.lineAlignment(D.CENTER),n.figureBackground(g.WHITE),(n=Kr._rowGroupFooter).background(new g(4292730333)),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(2),n.paddingBottom(2),n.textAlignment(D.FAR),n.lineAlignment(D.CENTER),n.figureBackground(g.GRAY),(n=Kr._rowGroupPanel).background(new An("linear #ffffff #cccccc 90")),n.foreground(g.BLACK),n.border(f.DKGRAY),n.line(new f(4281545523,1)),n.paddingLeft(1),n.paddingRight(1),n.paddingTop(1),n.paddingBottom(1),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),(n=Kr._rowGroupBar).borderLeft(null),n.borderRight(f.DKGRAY),n.borderTop(null),n.borderBottom(null),(n=Kr._rowGroupHeaderBar).borderLeft(null),n.borderRight(null),n.borderTop(null),n.borderBottom(null),(n=Kr._rowGroupFooterBar).borderLeft(null),n.borderRight(null),n.borderTop(null),n.borderBottom(f.GRAY),(n=Kr._indicator).background(new An("linear #e5e5e5 #ffffff 180")),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(2),n.paddingBottom(2),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),n.hoveredBackground(g.LTGRAY),n.selectedBackground(g.LTGRAY),n.selectedForeground(g.RED),n.figureBackground(g.BLACK),(n=Kr._checkBar).background(g.WHITE),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(2),n.paddingBottom(2),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),n.figureBackground(new g(4283782485)),n.figureInactiveBackground(new g(4293848814)),n.figureSize(new Zs(12)),n.line(new f("rgba(170, 170, 170, 0.7)")),(n=Kr._checkBarHead).figureBackground(new g(4283782485)),n.figureInactiveBackground(g.LTGRAY),n.figureSize(new Zs(12)),(n=Kr._stateBar).background(g.WHITE),n.foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(f.GRAY),n.borderBottom(f.GRAY),n.paddingLeft(2),n.paddingRight(2),n.paddingTop(2),n.paddingBottom(2),n.textAlignment(D.CENTER),n.lineAlignment(D.CENTER),(n=Kr._selection).background(new g(790532351)),n.border(new f(1595838719,2)),(n=Kr._treeExpander).foreground(g.BLACK),n.borderLeft(null),n.borderTop(null),n.borderRight(null),n.borderBottom(new f(4291611852)),n.paddingTop(0),n.paddingBottom(0),n.paddingLeft(0),n.paddingRight(2),n.figureBackground(g.GRAY),n.figureSize(new Zs(9)),n.line(f.GRAY),(n=Kr._scrollBar).background(new g("#fff0f0f0")),(n=Kr._scrollThumb).background(new g("#ffc0c0c0")),n.hoveredBackground(new g("#ffa0a0a0")),n.selectedBackground(new g("#ff808080")),(n=Kr._scrollButton).background(new g("#fff0f0f0")),n.hoveredBackground(new g("#ffd0c0d0")),n.selectedBackground(new g("#ff808080")),n.foreground(new g("#ff333333")),n.hoveredForeground(new g("#ff333333")),n.selectedForeground(new g("#ffffffff")),gt(),Kr),"body"),so="fixed",ro="header",oo="rowGroup",ao="indicator",ho="rowHeader",lo="checkBar",uo="statusBar",co="stateBar",_o="scrollBar",fo=e("StylesArchiver",null,{init:function(){this._super()},loadGridStyles:function(t,e){this._loadGrid(t,e)},loadGrid:function(t,e){},saveGrid:function(t){},loadStyles:function(t,e){},saveStyles:function(t){}},{applyStyles:function(t,e,i){i=!(2<arguments.length)||i,t&&e&&e.extend(t,i)},deserialize:function(n,t){function e(t,e){if(e&&n&&n.hasOwnProperty(t)){t=n[t];if(t)return e.extend(t),1}}function i(t,e,i){t=n[t][e];t&&i.extend(t)}e("grid",t.styles()),e("panel",t.panel().styles());var s,r,o,a,h,l,d=t.body();if(e(no,d.styles())){if(i(no,"empty",d.emptyStyles()),i(no,"rowHover",d.rowHoverStyles()),i(no,"rowFocus",d.rowFocusStyles()),_=n[no].dynamicStyles){if(s=t.body().dynamicStyles().owner(),r=[],"function"==typeof _)(h=new wo(s)).setCriteria(_),r.push(h);else for(l=0;l<_.length;l++)k((o=_[l]).criteria)?((a=new vo(s)).setCriteria(o.criteria),k(o.styles)?a.setStyles(o.styles):a.setStyles([o.styles]),r.push(a)):((h=new wo(s)).setCriteria(o.criteria),h.setStyles(o.styles),r.push(h));d.setDynamicStyles(r)}else n[no].hasOwnProperty("dynamicStyles")&&d.setDynamicStyles(null);if(_=n[no].cellDynamicStyles){if(s=d.cellDynamicStyles().owner(),r=[],"function"==typeof _)(h=new wo(s)).setCriteria(_),r.push(h);else for(l=0;l<_.length;l++)k((o=_[l]).criteria)?((a=new vo(s)).setCriteria(o.criteria),k(o.styles)?a.setStyles(o.styles):a.setStyles([o.styles]),r.push(a)):((h=new wo(s)).setCriteria(o.criteria),h.setStyles(o.styles),r.push(h));d.setCellDynamicStyles(r)}else n[no].hasOwnProperty("cellDynamicStyles")&&d.setCellDynamicStyles(null)}d=t.fixedOptions(),e(so,d.styles())&&(i(so,"colBar",d.colBarStyles()),i(so,"rowBar",d.rowBarStyles())),d=t.sortingOptions(),e("sorting",d.sortOrderStyles()),d=t.header(),e(ro,d.styles())&&(i(ro,"group",d.groupStyles()),i(ro,"sub",d.subStyles()),i(ro,"summary",d.summary().styles())),d=t.footer();if(e("footer",d.styles())&&i("footer","group",d.groupStyles()),n&&n.hasOwnProperty(oo)){var u=t.rowGroup(),c=(i(oo,"header",u.headerStyles()),i(oo,"footer",u.footerStyles()),i(oo,"head",u.headStyles()),i(oo,"foot",u.footStyles()),i(oo,"summary",u.summaryStyles()),i(oo,"headerBar",u.headerBarStyles()),i(oo,"footerBar",u.footerBarStyles()),i(oo,"bar",u.barStyles()),i(oo,"panel",u.panelStyles()),n[oo].rowGroupLevels);if(c)for(l=0;l<Math.min(c.length,u.levelCount);l++){var _=c[l],f=u.getLevel(l);_.header&&f.headerStyles().extend(_.header),_.footer&&f.footerStyles().extend(_.footer),_.headerBar&&f.headerBarStyles().extend(_.headerBar),_.footerBar&&f.footerBarStyles().extend(_.footerBar),_.bar&&f.barStyles().extend(_.bar)}}var d=t.indicator(),d=(e(ho,d.styles())?(i(ho,"head",d.headStyles()),i(ho,"foot",d.footStyles()),i(ho,"summary",d.summaryStyles())):e(ao,d.styles())&&(i(ao,"head",d.headStyles()),i(ao,"foot",d.footStyles()),i(ao,"summary",d.summaryStyles())),t.checkBar()),d=(e(lo,d.styles())&&(i(lo,"head",d.headStyles()),i(lo,"foot",d.footStyles()),i(lo,"summary",d.summaryStyles())),t.stateBar()),d=(e(uo,d.styles())&&(i(uo,"head",d.headStyles()),i(uo,"foot",d.footStyles()),i(uo,"summary",d.summaryStyles())),e(co,d.styles())&&(i(co,"head",d.headStyles()),i(co,"foot",d.footStyles()),i(co,"summary",d.summaryStyles())),t.displayOptions());e(_o,d.scrollBarStyles())&&(i(_o,"thumb",d.scrollThumbStyles()),i(_o,"button",d.scrollButtonStyles())),_e()?e("mobileSelection",t.selectOptions().mobileStyles()):e("selection",t.selectOptions().maskStyles()),X_&&(d=b(t,X_))&&n&&n.hasOwnProperty("tree")&&i("tree","expander",d.treeOptions().expanderStyles())}}),mo=e("DynamicStyleOwner",null,{init:function(t){this._super(),t&&t.hasOwnProperty("capitalIndexers")&&(t=t.capitalIndexers)&&(this._capitalIndexers=t.concat())},capitalIndexers:function(){return this._capitalIndexers},parseValue:function(t,e){}}),go=e("DynamicStyle",null,{init:function(t){this._super(),ne(null!=t,"owner is null"),this._owner=t,this._body=!0,this._fixed=!0},owner:function(){return this._owner},apply:function(t,e){},_setOwner:function(t){this._owner=t},_changed:function(){}}),po=["readOnly","editable","cursor","editor"],wo=e("DynamicStyleImpl",go,{init:function(t,e){this._super(t),this._exprNode=null,this._styleMap={},e&&(e.hasOwnProperty("criteria")&&this.setCriteria(e.criteria),e.hasOwnProperty("styles"))&&this.setStyles(e.styles)},criteria:null,styles:null,setCriteria:function(t){var e=t?t.toString():null;e!=this._criteria&&(this._criteria=e,"function"==typeof t?this._exprNode=new fi(t):this.$_buildExpression(),this._changed())},setStyles:function(t){t!=this._styles&&(this._styles=t,this.$_buildStyles(),this._changed())},check:function(t){t=this._exprNode&&this._exprNode.evaluate(t);return t&&"object"==typeof t?0<Object.keys(t).length:t},apply:function(t,e){var i,n,s,r,o;if(this._exprNode&&(r=this._exprNode.evaluate(t))){for(s in r=this._exprNode instanceof fi&&"boolean"!=typeof r?r:this._styleMap)(n=e[s])?n.call(e,r[s]):0<=po.indexOf(s)&&((i=i||{})[s]=r[s]);i&&t._cell&&(o=t._grid,t=t._cell._index,o.setCellWritable(t,i))}},$_buildExpression:function(){(!this._criteria||(this._exprNode=ni.Default.parse(this._criteria,this._owner?this._owner.capitalIndexers():null),null==this._exprNode))&&(this._exprNode=_i.Default)},$_buildStyles:function(){if(this._styleMap={},"string"==typeof this._styles)for(var t=this._styles.split(";"),e=0,i=t.length;e<i;e++){var n=t[e].split("=");1<n.length?this._styleMap[n[0]]=n[1]:this._styleMap[n[0]]=I}else if(this._styles)for(var s in this._styles)this._styleMap[s]=this._styles[s]}}),vo=e("DynamicStyleCase",go,{init:function(t,e){this._super(t),this._exprNodes=[],this._stylesMap=[],e&&(e.hasOwnProperty("criteria")&&this.setCriteria(e.criteria),e.hasOwnProperty("styles"))&&this.setStyles(e.styles)},criteria:null,styles:null,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this.$_buildExpressions(),this._changed())},setStyles:function(t){t!=this._styles&&(this._styles=t,this.$_buildStyles(),this._changed())},check:function(t){for(var e=0,i=this._exprNodes.length;e<i;e++){var n=this._exprNodes[e];if(n&&n.evaluate(t))return!0}return!1},apply:function(t,e){for(var i=0,n=this._exprNodes.length;i<n;i++){var s,r,o,a=this._exprNodes[i];if(a&&(s=a.evaluate(t))){for(var h in s=a instanceof fi&&"boolean"!=typeof s?s:this._stylesMap[i]){var l=e[h];l?l.call(e,s[h]):0<=po.indexOf(h)&&((r=r||{})[h]=s[h])}r&&t._cell&&(a=t._grid,o=t._cell._index,a.setCellWritable(o,r));break}}},$_buildExpressions:function(){var t,e=this.owner();if(this._exprNodes=[],k(this._criteria)&&0<(t=this._criteria.length))for(var i=0;i<t;i++){var n=this._criteria[i];n?(null==(n="function"==typeof n?new fi(n):ni.Default.parse(n,e?e.capitalIndexers():null))&&(n=_i.Default),this._exprNodes.push(n)):this._exprNodes.push(_i.Default)}},$_buildStyles:function(){if(this._stylesMap=[],k(this._styles))for(var t=0,e=this._exprNodes.length;t<e;t++){var i=this._styles.length>t?this._styles[t]:this._styles[e-1],n={};if(this._stylesMap.push(n),"string"==typeof i)for(var s=i.split(";"),r=0;r<s.length;r++){var o=s[r].split(/\s*=/);1<o.length?n[o[0]]=o[1]:n[o[0]]=null}else for(var a in i)n[a]=i[a]}}}),Co=e("DynamicStyleCollection",null,{init:function(t){this._super(),this._owner=t,this._items=[]},owner:function(){return this._owner},count:function(){return this._items.length},getItem:function(t){return this._items[t]},clear:function(){this._items=[]},add:function(t){t=this.$_createStyle(t);t&&this._items.indexOf(t)<0&&this._items.push(t)},setItems:function(t){var e;if(this._items=[],t)if("function"==typeof t)(e=this.$_createStyle(t))&&this._items.push(e);else if(k(t=t instanceof Co?t.toArray():t))for(var i=t.length,n=0;n<i;n++)(e=this.$_createStyle(t[n]))&&this._items.push(e)},prepare:function(){},checkStyle:function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].check(t))return!0;return!1},applyCheck:function(t,e,i){t&&e&&i&&this.applyInternalNormal(t,e,i)},applyInternalNormal:function(t,e,i){for(var n=0,s=this._items.length;n<s;n++)this._items[n].apply(t,e)},applyInternalUserMode:function(t,e,i){try{for(var n=0,s=this._items.length;n<s;n++)this._items[n].apply(t,e)}catch(t){}},toArray:function(){return this._items.concat()},$_createStyle:function(t){var e,i,n=null;return"function"==typeof t?((e=new wo(this._owner)).setCriteria(t),n=e):t instanceof go?(t._owner=this._owner,n=t):k(t.criteria)?(t.styles=k(t.styles)?t.styles:t.styles&&[t.styles],(i=new vo(this._owner)).setCriteria(t.criteria),i.setStyles(t.styles),n=i):t&&t.criteria&&((e=new wo(this._owner)).setCriteria(t.criteria),e.setStyles(t.styles),n=e),n},proxy:function(){if(!this._items||this._items.length<=0)return null;for(var t=[],e=0,i=this._items.length;e<i;e++)t.push({criteria:this._items[e].criteria(),styles:this._items[e].styles()});return t}}),yo=new d,xo=["readOnly","editable","button","popupMenu"],Io=e("DataCellStyle",null,{init:function(t,e){this._super(),this._id=t,this._styles=yo,this._props=null,this.assign(e)},id:function(){return this._id},isEditable:function(t){return this._props&&"boolean"==typeof this._props.editable?this._props.editable:t},isReadOnly:function(t){return this._props&&"boolean"==typeof this._props.readOnly?this._props.readOnly:t},isWritable:function(){if(this._props){var t=this._props.editable;if(void 0!==t&&!t)return!1;if(this._props.readOnly)return!1}return!0},button:function(){return this._props&&this._props.button},popupMenu:function(){return this._props&&this._props.popupMenu},setStyles:function(t){t!=this._styles&&(t?(this._styles===yo&&(this._styles=new d(null,null,!1)),this._styles.clearValues(),this._styles.extend(t,!1,!1)):this._styles=yo)},assignTo:function(t){t&&t.extend(this._styles,!1,!1)},calcWritable:function(t,e){var i=this._props;if(i){if(void 0!==i.editable&&!(t=i.editable))return!1;if(void 0!==i.readOnly&&(e=i.readOnly))return!1}return t&&!e},assign:function(t){t&&(this.setStyles(t instanceof Io?t._styles:t),this.$_assignProps(t,xo))},$_assignProps:function(t,e){for(var i=0,n=e.length;i<n;i++){var s=e[i];void 0!==t[s]&&(this._props=this._props||{},this._props[s]=t[s])}}}),bo=e("DataCellStyleCollection",le,{init:function(t){this._super(),this._owner=t,this._styles={},this._dirtyLock=0},getStyle:function(t){return this._styles[t]},get:function(t){return this._styles[t]},clear:function(){this._styles={},this._dirtyLock<=0&&this._owner&&this._owner.dataCellStylesCleared()},add:function(t,e){t&&e&&!this._styles[t]&&(this._styles[t]=new Io(t,e),this._owner)&&this._owner.dataCellStyleAdded(t,this._dirtyLock<=0)},set:function(t,e){var i;t&&(i=this._styles[t],e?i?(i.assign(e),this._owner&&this._owner.dataCellStyleChanged(t,this._dirtyLock<=0)):(this._styles[t]=new Io(t,e),this._owner&&this._owner.dataCellStyleAdded(t,this._dirtyLock<=0)):i&&(delete this._styles[t],this._owner)&&this._owner.dataCellStyleRemoved(t,i,this._dirtyLock<=0))},beginUpdate:function(){this._dirtyLock++},endUpdate:function(t){0<this._dirtyLock&&(this._dirtyLock=Math.max(this._dirtyLock-1,0),0==this._dirtyLock)&&t&&this._owner&&this._owner.dataCellStyleChanged(null,!0)},load:function(t){}}),Eo=e("ColumnFilter",le,{init:function(t){this._super(),this.setCriteria(t)},destroy:function(){return this._destroying=!0,this._criteria=null,this._tag=null,this._super()},name:null,criteria:null,text:null,description:null,active:!1,visible:!0,tag:null,setActive:function(t,e){this._active=t,!1!==e&&this._changed()},setVisible:function(t){t!=this._visible&&(this._visible=t)},propertyChanged:function(t,e,i){this._changed()},toString:function(){return this._text||this._name},_changed:function(){this.fireEvent(Eo.CHANGED)}}),Ro=(Eo.CHANGED="onColumnFilterChanged",e("ColumnFilterRun",Eo,{init:function(t){this._super(t.criteria()),this._refFitler=t,this._exprNode=null,this.$_parse()},destroy:function(){return this._destroying=!0,this._exprNode=null,this._criteria=null,this._refFitler=null,this._super()},prepare:function(t,e){t.setDataSource(e)},select:function(t,e,i){return!this._exprNode||(t.setData(e,i),this._exprNode.evaluate(t))},setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this.$_parse())},$_parse:function(){this._criteria?(this._exprNode=ni.Default.parse(this._criteria,null),this._exprNode instanceof fi&&(this._exprNode.evaluate=this._evaluate.bind(this))):this._exprNode=null},_evaluate:function(t){var e=this._criteria,i=t._dataSource.getOrgFieldName(t._field),n=t._item.getData(t._field);return e(t._dataSource.getHandler(),t._item.dataRow(),i,this._refFitler&&this._refFitler.proxy(),n)}})),So=e("ColumnFilterCollection",le,{init:function(t){this._super(),this._column=t,this._items=[],this._names={},this._updating=!1,this._nextId=1},destroy:function(){this._destroying=!0,this.clear(!1);for(var t=0,e=this._items.length;t<e;t++)this._items[t]&&!this._items[t]._destroying&&this._items[t].destroy&&this._items[t].destroy(),this._items[t]=null;this._items=null,this._super(),this._names=null},count:function(){return this._items.length},activeCount:function(){for(var t=0,e=this._items.length;e--;)this._items[e].isActive()&&t++;return t},items:function(){return this._items.slice()},isVisible:function(){for(var t=this._items.length;t--;)if(this._items[t].isVisible())return!0;return!1},getItemAt:function(t){if(t<0||t>=this._items.length)throw new Error("Invalid index: "+t);return this._items[t]},getItem:function(t){return this._names[t]||null},getItemIndex:function(t){for(var e=this._items.length-1;0<=e;e--)if(this._items[e]._name==t)return e;return-1},getActiveItems:function(t){for(var e=[],i=this._items.length-1;0<=i;i--)this._items[i].isActive()==t&&e.push(this._items[i]);return e},assign:function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i,n=It(t),s=(n=n||[t]).length,r=0;r<s;r++)(t=n[r])&&t.name&&(this.$_checkName(t.name),(i=new Eo).assign(t),this._items.push(i),(this._names[t.name]=i).addListener(this));(e||0<this.count())&&this._changed(null)}},clear:function(t){t=!(0<arguments.length)||t;var e=this._items.length;if(0<e){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this._changed(null),!0}return!1},$_userFilterAdd:function(t,e){var i=b(t,Eo);return i||(this.$_checkName(t.name),(i=new Eo).assign(t)),this.add(i,e),i},add:function(t,e){e=null==e||e;var i=b(t,Eo);i?this._items.indexOf(i)<0&&i.name()&&this.$_checkName(i.name()):t&&t.name&&(this.$_checkName(t.name),(i=new Eo).assign(t)),this._items.push(i),(this._names[i.name()]=i).addListener(this),e&&this._changed(null)},addItems:function(t,e){if((t=k(t)?t:t&&[t])&&0<t.length){for(var i,n,s=0,r=t.length,o=0;o<r;o++)(n=b(t[o],Eo))?this._items.indexOf(t[o])<0&&n.name()&&(e||this.$_checkName(n.name())):t[o]&&t[o].name&&(e||this.$_checkName(t[o].name),(n=new Eo).assign(t[o])),0<=(i=this.getItemIndex(n.name()))?(this._items[i]&&this._items[i].removeListener(this),this._items[i]=n):this._items.push(n),n.addListener(this),this._names[n.name()]=n,s++;0<s&&this._changed(null)}},remove:function(t){if(t){for(var e,i=this._items.length-1;0<=i;i--)if((e=this._items[i]).name()==t)return this._items.splice(i,1),delete this._names[e.name()],e.removeListener(this),this._changed(null),!0;return!1}},removeItems:function(t){if(k(t)){for(var e,i,n=0,s=t.length-1;0<=s;s--)0<=(e=this.getItemIndex(t[s]))&&(i=this._items[e],this._items.splice(e,1),delete this._names[i.name()],i.removeListener(this),n++);0<n&&this._changed(null)}},activateItems:function(t,e){if(k(t)){var i,n,s=0;this._updating=!0;try{for(i=t.length-1;0<=i;i--)(n=this._names[t[i]])&&n.isActive()!=e&&(n.setActive(e),s++)}finally{this._updating=!1}0<s&&this._changed(null)}},activateAll:function(t){this._updating=!0;try{for(var e,i=this._items.length,n=!1,s=0;s<i;s++)(e=this._items[s]).isActive()!=t&&(e.setActive(t),n=!0)}finally{this._updating=!1}n&&this._changed(null)},hideFilters:function(t,e){if(t)for(var i,n=t.length,s=0;s<n;s++)(i=this._names[t[s]])&&i.setVisible(!e)},hideAllFilters:function(t){for(var e,i=this._items.length,n=0;n<i;n++)(e=this._items[n])&&e.setVisible(!t)},toggleItems:function(t){if(t){var e,i,n=0;this._updating=!0;try{for(e=t.length-1;0<=e;e--)(i=this._names[t[e]])&&(i.setActive(!i.isActive()),n++)}finally{this._updating=!1}0<n&&this._changed(null)}},toggleAll:function(){this._updating=!0;try{for(var t,e=this._items.length,i=!1,n=0;n<e;n++)(t=this._items[n]).setActive(!t.isActive()),i=!0}finally{this._updating=!1}i&&this._changed(null)},$_checkName:function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},_changed:function(t){this._updating||this.fireEvent(Eo.CHANGED,t)},onColumnFilterChanged:function(t){this._changed(t)},onColumnFilterSelectorChanged:function(){this._changed(null)},onColumnFilterUserAdd:function(t,e,i){if(e&&e.criteria&&e.text)return e.name=e.name||"$userFilter_"+this._nextId++,this.$_userFilterAdd(e,i)}}),To=e("ColumnFilterSelector",le,{init:function(t){this._super(),this._container=t,this._eltActions=null,this._eltAll=null,this._eltItems=null,this._column=null,this._showing=!1,this._x=0,this._y=0,this._acceptText=null,this._cancelText=null,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._element)return;e=e.parentNode}this.hide()}.bind(this),this._acceptClickHandler=function(t){this.$_activeFilters()}.bind(this),this._cancelClickHandler=function(t){this.$_closeFilter()}.bind(this),this._acceptMouseoverHandler=function(t){t.currentTarget.style.background="rgba(9, 211, 140, 0.5)"}.bind(this),this._acceptMouseoutHander=function(t){t.currentTarget.style.background=""}.bind(this),this._cancelMouseoverHandler=function(t){t.currentTarget.style.background="#888"}.bind(this),this._cancelMouseoutHandler=function(t){t.currentTarget.style.background=""}.bind(this),this._searchTextInputHandler=function(t){this.$_searchTextInputHandler(t)}.bind(this),this._searchTextKeydownHandler=function(t){this.$_searchInputKeydown(t)}.bind(this)},closeWhenClick:!1,showButtons:!1,showSearchInput:!1,userFilterAddCallback:null,viewGridInside:!0,enterCallback:!1,$_searchInputKeydown:function(t){var e,i,n,s;(t.ctrlKey||this.isEnterCallback())&&13==t.keyCode&&this._userFilterAddCallback&&(s=(e=this._column.grid()).getHandler(),i=sf(this._column),n=t.currentTarget.value,(s=(s=this._userFilterAddCallback(s,i,n))&&this.fireObjectEvent(To.USER_FILTER_ADD,s,!1))&&(this.$_buildItem(s,e.filteringOptions().selector().isUseCssStyle()),this.isShowButtons()||this.fireEvent(To.CHANGED)),t.preventDefault())},$_searchFilterItem:function(t){for(var e=this._eltItems.children,i=0,n=e.length;i<n;i++){var s=e[i],r=(r=s.check.filter.toString())&&r.toLowerCase();!t||r&&0<=r.indexOf(t)?s.style.display="":s.style.display=function(t,e){for(var i=!0,n=0,s=t.length;n<s;n++){for(var i=!0,r=0,o=e.length;r<o&&(i=i&&e[r].org?t[n+r]&&e[r].org===t[n+r].org:t[n+r]&&e[r].cho===t[n+r].cho);r++);if(i||n+e.length>t.length)break}return i}(Ft(r),Ft(t))?"":"none"}this.$_changeCheckAll()},$_searchTextInputHandler:function(t){t=t.currentTarget,t=t.value?t.value.toLowerCase():"";this.$_searchFilterItem(t)},$_checkAll:function(t,e){for(var i=this._eltItems.children,n=0,s=i.length;n<s;n++)!this._clearWhenSearchCheck&&"none"===i[n].style.display||(i[n].check.checked="none"!==i[n].style.display&&(null!==t?t:i[n].check.checked),i[n].check.filter.setActive(i[n].check.checked,!1));!this.isShowButtons()&&e&&this.fireEvent(To.CHANGED)},$_changeCheckAll:function(){for(var t=this._eltItems.children,e=!0,i=0,n=0,s=t.length;n<s&&("none"===t[n].style.display||(i++,e=t[n].check.checked));n++);this._eltAll.check.checked=e&&i},$_activeFilters:function(){for(var t=this._eltItems.children,e=0,i=t.length;e<i;e++)t[e].check.filter.setActive(t[e].check.checked&&(!this._clearWhenSearchCheck||""===t[e].style.display),!1);this.fireEvent(To.CHANGED),this.hide()},$_closeFilter:function(){this.hide()},destroy:function(){this._destroying=!0,this._x=null,this._y=null,this._eltActions=null,this._eltAll=null,this._eltItems=null,this._eltSearchInput=null,this._eltButtons=null,this._column=null,this._globalMouseHandler=null,this._super()},column:function(){return this._column},isOpened:function(){var t=this._element&&this._element.parentElement;return this._element&&t&&t.contains(this._element)},show:function(t,e){if(this.hide(),t){this._showing=!0;try{e=e||t.grid().filteringOptions().selector(),this._closeWhenClick=e.isCloseWhenClick(),this._showButtons=e.isShowButtons(),this._showSearchInput=e.isShowSearchInput(),this._clearWhenSearchCheck=t.grid().filteringOptions().isClearWhenSearchCheck(),this._acceptText=e.acceptText(),this._cancelText=e.cancelText(),this._userFilterAddCallback=e.userFilterAddCallback(),this._enterCallback=e.isEnterCallback(),this.$_show(t,e)}finally{this._showing=!1}}},$_show:function(t,e){var i,n,s,r=this,o=t.grid(),a=e.isUseCssStyle(),h=e.isViewGridInside(),l=(this._element=this._initControl(a),this._element);l&&!l.parentNode&&(i=o.width()-10,o=o.height()-10,l.style.position="absolute",l.style.float="none",l.style.overflow="hidden",l.style.zIndex=3e3,a||(l.style.background="rgb(233, 233, 233)",l.style.border="1px solid rgb(200, 200, 200)",l.style.boxShadow="rgba(0, 0, 0, 0.8) 1px 2px 5px",l.style.fontFamily="Tahoma",l.style.fontStyle="normal",l.style.fontVariant="normal",l.style.fontWeight="normal",l.style.fontSize="10pt",l.style.padding="4px"),this._column=t.index().column(),this._eltSearchInput.style.display=this.isShowSearchInput()?"":"none",this._eltButtons.style.display=this.isShowButtons()?"":"none",this.$_clearActions(),n=this.$_buildActions(this._column,a),this.$_clearItems(),s=this.$_buildItems(this._column,a),this.$_changeCheckAll(),this.$_buildButtons(this._column,a),a=parseFloat(e.getMinWidth(i)),!isNaN(a)&&0<a&&(l.style.minWidth=a+"px"),a=parseFloat(e.getMaxWidth(i)),!isNaN(a)&&0<a?l.style.maxWidth=(h?Math.min(a,i):a)+"px":l.style.maxWidth=i+"px",a=parseFloat(e.getMinHeight(o)),!isNaN(a)&&0<a&&(l.style.minHeight=a+"px"),a=parseFloat(e.getMaxHeight(o)),!isNaN(a)&&0<a?l.style.maxHeight=(h?Math.min(a,o):a)+"px":l.style.maxHeight=(h?o:Math.max(document.documentElement.clientHeight,o))+"px",this._eltAll.style.visibility=s?"":"collapse",this._eltAll.style.height=s?"":"0px",(h?this._container:z.body).appendChild(l),e=(i=l.getBoundingClientRect()).height-this._eltActions.offsetHeight-this._eltAll.offsetHeight-this._eltSearchInput.offsetHeight-this._eltButtons.offsetHeight-(this.isShowSearchInput()?4:0)-(this.isShowButtons()?4:0)-8,8<this._eltItems.offsetHeight-e&&(this._eltItems.style.height=Math.ceil(e)+"px"),this._eltItems.offsetWidth>this._eltItems.clientWidth&&(l.style.width=i.width+this._eltItems.offsetWidth-this._eltItems.clientWidth+"px"),a=(e=h?t.boundsByContainer():t.boundsByScreen()).right()-i.width,l.style.left=(this._x=Math.max(0,a))+"px",t=e.bottom(),h?t+i.height>=(o+=10)&&(t=Math.max(0,o-i.height-3)):i.height+t>document.documentElement.clientHeight&&(t=Math.max(0,document.documentElement.clientHeight-i.height)),l.style.top=(this._y=t)+"px",n&&!s?(this.hide(),n.click(e.x,this._y)):this._column.hasFilterAction()||s?setTimeout(function(){W.addEventListener("mousedown",r._globalMouseHandler)},0):this.hide(),this._column._filters&&this.addListener(this._column._filters),this.isShowSearchInput())&&setTimeout(function(){this._searchInput.focus()}.bind(this),10)},hide:function(){var t=this._element;t&&t.parentNode&&(it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler),this.removeListener(this._column._filters),this._column.grid().container()._canvas.focus({preventScroll:!0}),t.parentElement.removeChild(t))},containElement:function(t){return(t=this._element)&&t.contains(t)},_initControl:function(t){var e=z.createElement("div"),i=(t&&(e.className="rg-filterselector"),e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this._eltActions=z.createElement("div")),n=(t&&(i.className="rg-filter-actions"),i.style.float="none",i.style.overflow="auto",e.appendChild(i),i=this._eltSearchInput=z.createElement("div"),t&&(i.className="rg-filter-search"),i.style.float="none",t||(i.style.marginBottom="4px"),z.createElement("input")),n=(n.id="$columnFilterSearch",t&&(n.className="rg-filter-search-input"),t||(n.style.width="100%"),n.tabIndex=-1,n.autocomplete="off",n.oninput=this._searchTextInputHandler,n.onkeydown=this._searchTextKeydownHandler,this._searchInput=n,i.appendChild(n),e.appendChild(i),i=this._eltAll=z.createElement("div"),t&&(i.className="rg-filter-all"),i.style.float="none",t||(i.style.backgroundColor="#333",i.style.color="#fff"),i.tabIndex=-1,z.createElement("input")),s=(t&&(n.className="rg-filter-all-check"),n.id="$columnFilter_all_"+To.$_checkId++,n.type="checkbox",n.tabIndex=-1,i.check=n,i.onclick=function(t){t="INPUT"===t.target.tagName?t.target.checked:t.currentTarget.check.checked=!t.currentTarget.check.checked;this.$_checkAll(t,!0)}.bind(this),i.appendChild(n),z.createElement("label")),n=(t&&(s.className="rg-filter-all-label"),s.htmlFor=n.id,s.innerHTML="All",s.style.pointerEvents="none",i.appendChild(s),z.createElement("hr"));return t&&(n.className=" "),n.style.height="1px",n.style.border="0px",n.style.margin="2px",n.style.color="#777",n.style.backgroundColor="#777",i.appendChild(n),e.appendChild(i),i=this._eltItems=z.createElement("div"),t&&(i.className="rg-filter-items"),i.style.float="none",i.style.overflow="auto",e.appendChild(i),i=this._eltButtons=z.createElement("div"),t&&(i.className="rg-filter-buttons"),t||E.setStyles(i,{textAlign:"center",paddingTop:"4px",marginLeft:"0px",marginRight:"0px"}),E.setStyles(i,{position:"relative",float:"none",clear:"both",boxSizing:"border-box"}),i.tabIndex=-1,e.appendChild(i),e},_disableSelection:function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},$_clearActions:function(){for(var t=this._eltActions;t.lastChild;)t.removeChild(t.lastChild)},$_buildActions:function(t,e){var i=t.filterActions(),n=i.length,s=this;e||(this._eltActions.style.paddingBottom=n?"4px":"0px");for(var r=0;r<n;r++){var o=i[r],a=z.createElement("div"),h=(e&&(a.className="rg-filter-action-item"),a.container=this,a.action=o,a.style.float="none",a.style.whiteSpace="nowrap",a.style.cursor="pointer",this._disableSelection(a),this._eltActions.appendChild(a),a.onclick=function(t){var t=this._currDiv=t.currentTarget,e=t.action;t.container.hide(),e&&e.click(s._x,s._y),s._closeWhenClick&&s.hide()},e||(a.onmouseover=function(t){(this._currDiv=t.currentTarget).style.textDecoration="underline"},a.onmouseout=function(t){(this._currDiv=t.currentTarget).style.textDecoration="none"}),z.createElement("input")),h=(e&&(h.className="rg-filter-action-check"),h.id="$columnAction_item_"+To.$_checkId++,h.type="checkbox",h.tabIndex=-1,h.checked=!1,h.action=o,h.style.visibility="hidden",a.check=h,a.appendChild(h),z.createElement("span"));e&&(h.className="rg-filter-action-label"),h.innerHTML=o.displayText(),h.title=o.description(),a.appendChild(h)}return 1==n?i[0]:null},$_clearItems:function(){for(var t=this._eltItems;t.lastChild;)t.removeChild(t.lastChild)},$_buildItem:function(t,e){var i=this,n=z.createElement("div"),s=(e&&(n.className="rg-filter-item"),n.style.float="none",n.style.whiteSpace="nowrap",n.tabIndex=-1,this._disableSelection(n),this._eltItems.appendChild(n),e||(n.onmouseover=function(t){(this._currDiv=t.currentTarget).style.textDecoration="underline"},n.onmouseout=function(t){(this._currDiv=t.currentTarget).style.textDecoration="none"}),z.createElement("input")),r=(e&&(s.className="rg-filter-item-check"),s.id="$columnFilter_item_"+To.$_checkId++,s.type="checkbox",s.tabIndex=-1,s.checked=t.isActive(),s.filter=t,n.onclick=function(t){"INPUT"===t.target.tagName?e=t.target:(e=t.target.check).checked=!e.checked;var e,t=e.filter;i._clearWhenSearchCheck&&i.$_checkAll(null,!1),i.isShowButtons()||t.setActive(e.checked,!i.isShowButtons()),i.$_changeCheckAll(),!i.isShowButtons()&&i._closeWhenClick&&i.hide()},n.check=s,n.appendChild(s),z.createElement("label"));e&&(r.className="rg-filter-item-label"),r.htmlFor=s.id,r.innerHTML=t.toString(),r.style.pointerEvents="none",n.appendChild(r)},$_buildItems:function(t,e){for(var i=t.filters(),n=!1,s=0,r=i.length;s<r;s++){var o=i[s];o.isVisible()&&(this.$_buildItem(o,e),n=!0)}return n},$_buildButtons:function(t,e){var i;this._eltButtons&&(E.clearChildren(this._eltButtons),(i=document.createElement("label")).innerHTML=this._acceptText||"accept",i.onclick=this._acceptClickHandler,i.onmouseover=e?null:this._acceptMouseoverHandler,i.onmouseout=e?null:this._acceptMouseoutHander,e&&(i.className="rg-filter-accept"),E.setStyles(i,{cursor:"pointer"}),e||E.setStyles(i,{border:"1px solid #0a3c59",borderRadius:"3px",color:"#06426c",borderWidth:"1px",padding:"0px 3px",marginLeft:"5px"}),E.disableSelection(i),this._eltButtons.appendChild(i),(i=document.createElement("label")).innerHTML=this._cancelText||"cancel",i.onclick=this._cancelClickHandler,i.onmouseover=e?null:this._cancelMouseoverHandler,i.onmouseout=e?null:this._cancelMouseoutHandler,e&&(i.className="rg-filter-cancel"),E.setStyles(i,{cursor:"pointer"}),e||E.setStyles(i,{border:"1px solid #0a3c59",borderRadius:"3px",color:"#06426c",borderWidth:"1px",padding:"0px 3px",marginLeft:"5px"}),E.disableSelection(i),this._eltButtons.appendChild(i))},$_refreshItems:function(){for(var t=this._eltItems.children,e=0,i=t.length;e<i;e++){var n=t[e];n.check.checked=n.check.filter.isActive()}},_changed:function(){this.fireEvent(Eo.CHANGED)}},{$_checkId:0}),ko=(To.CHANGED="onColumnFilterSelectorChanged",To.USER_FILTER_ADD="onColumnFilterUserAdd",e("ColumnFilterAction",le,{init:function(t,e){this._super(),this._column=t,this._name=e},name:null,text:null,description:null,column:function(){return this._column},displayText:function(){return this._text||this._name},click:function(t,e){this._column&&this._column.$_filterActionClick(this,t,e)}})),Do=e("ToastOptions",null,{init:function(t){this._super(),t&&this.assign(t)},message:null,visible:!0,zIndex:null,styles:null,setStyles:function(t){t?(this._styles||(this._styles=new d),this._styles.extend(t)):this._styles=null},assign:function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=Boolean(t):this._super(t)},proxy:function(){var t=this._super();return this._styles&&(t.styles=this._styles.toProxy()),t}}),Bo=e("ToastView",le,{init:function(t){this._super(),this._container=t,this._span=null,this._element=this._createElement(),this._showing=!1},minWidth:0,maxWidth:0,dropDownCount:8,show:function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},$_show:function(t){var e,i,n,s,r,o,a,h,l,d,u,c,_,f,m=t.message();m&&(e=this._element)&&(f=this._span,_=this._container._gridView.displayOptions(),f.innerHTML=m,e.style.position="absolute",e.style.overflow="hidden",e.style.zIndex=t.zIndex&&null!=t.zIndex()?t.zIndex():_&&_.toastZIndex&&null!=_.toastZIndex()?_.toastZIndex():3e3,(f=t.styles())&&(i=f.background(),n=f.foreground(),s=f.border(),r=f.figureBackground(),o=f.fontFamily(),a=f.fontItalic()?"italic":"noramal",fontWidth=f.fontBold()?"bold":"normal",h=f.fontUnderline()?"underline":"",l=f.paddingLeft(),d=f.paddingRight(),u=f.paddingTop(),c=f.paddingBottom()),i?e.style.background=i.css():ln?new g("rgba(33, 33, 33, 0.8)").applyToCss(e.style):e.style.background="rgba(33, 33, 33, 0.8)",e.style.color=n?n.css():"rgb(255, 255, 255)",e.style.border=s?s.css():"1px solid rgb(200, 200, 200)",e.style.boxShadow=r?r.css()+" 1px 2px 5px":"rgb(0, 0, 0, 0.8) 1px 2px 5px",e.style.fontFamily=o||"Tahoma",e.style.fontStyle=a||"normal",e.style.fontWeight="normal",e.style.fontSize="16pt",e.style.paddingTop=u?u+"px":"8px",e.style.paddingBottom=c?c+"px":"8px",e.style.paddingLeft=l?l+"px":"16px",e.style.paddingRight=d?d+"px":"16px",h&&(e.style.textDecoration=h),this._container._container.appendChild(e),_=(m=e.getBoundingClientRect2()).width+10,t=m.height+10,(f=new O).width=this._container.width(),f.height=this._container.height(),e.style.left=(f.width-_)/2+"px",e.style.top=(f.height-t)/2+"px")},hide:function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},_createElement:function(){var t=z.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this._disableSelection(t),this._span=z.createElement("span"),t.appendChild(this._span),this._disableSelection(this._span),t},_disableSelection:function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}}},{$_labelId:0}),Oo=e("ToastManager",null,{init:function(t){this._super(),this._container=t.container(),this._toast=null,this._active=!1},isVisible:function(){return this._active},show:function(t,e,i){(!this._active||e)&&(this.close(),t=t instanceof Do?t:t?new Do(t):null)&&t.isVisible()?(this._toast||(this._toast=new Bo(this._container)),this._toast.show(t),this._active=!0,i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0)):i&&i()},close:function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)}}),Mo=e("ToolTipOptions",null,{init:function(t){this._super(),this._styles=new d,t&&this.assign(t)},message:null,visible:!0,styles:null,setStyles:function(t){t!=this._styles&&this._styles.extend(t,!1)},assign:function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=Boolean(t):this._super(t)}}),Fo=e("ToolTipView",le,{init:function(t){this._super(),this._container=t,this._span=null,this._element=this._createElement(),this._showing=!1},minWidth:0,maxWidth:0,dropDownCount:8,show:function(t,e,i,n){this._showing=!0;try{this.$_show(t,e,i,n)}finally{this._showing=!1}},$_show:function(t,e,i,n){var s,r=this._container.gridView(),o=t.message()+"";o&&(s=this._element)&&(this._span.innerHTML=o.replace(/\n/g,"<br>"),s.style.position="absolute",s.style.left=e+"px",s.style.top=i+"px",s.style.overflow="hidden",s.style.zIndex=3e3,s.style.background=t.styles().background().color().value(),s.style.color="rgb(100, 100, 100)",s.style.border="1px solid rgb(100, 100, 100)",s.style.borderRadius="4px",s.style.boxShadow="5px 5px 5px rgba(100, 100, 100, 0.8)",s.style.fontFamily="Tahoma",s.style.fontStyle="normal",s.style.fontVariant="normal",s.style.fontWeight="normal",s.style.fontSize="10pt",s.style.padding="2px",s.style.visibility="hidden",s.style.whiteSpace="nowrap",this._container._container.appendChild(s),o=s.getBoundingClientRect(),e=this._container._container.getBoundingClientRect(),s.style.left=o.right>e.right?Math.max(e.right-o.width-e.left-2,0)+"px":s.style.left,o.bottom>e.bottom&&(n instanceof Za?s.style.top=Math.max(0,i-(o.bottom-e.bottom))+"px":s.style.top=Math.max(i-o.height-r._layoutManager.$_calcItemHeight(r,r.delegate(),0),0)+"px"),s.style.visibility="visible")},hide:function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},_createElement:function(){var t=z.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),_e()&&t.addEventListener("touchend",this._touchendHandler.bind(this),!1),this._disableSelection(t),this._span=z.createElement("span"),t.appendChild(this._span),this._disableSelection(this._span),t},_touchendHandler:function(t){t.preventDefault(),this.hide()},_disableSelection:function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}}},{$_labelId:0}),No=e("ToolTipManager",null,{init:function(t){this._super(),this._container=t.container(),this._tipView=null,this._active=!1,this._hintDuration=t.displayOptions&&t.displayOptions()?t.displayOptions()._hintDuration:0,this._showTimer=null},isVisible:function(){return this._active},show:function(t,e,i,n){this._active||(this.close(),(t=t instanceof Mo?t:t?new Mo(t):null)&&t.isVisible()&&(this._tipView||(this._tipView=new Fo(this._container)),this._tipView.show(t,e,i,n),(t=n.grid())&&(this._showPos={x:t.mouseX(),y:t.mouseY()}),this._active=!0))},close:function(t,e){if(this._active&&t&&e){var i=this._showPos;if(i&&Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return}this._showTimer&&clearTimeout(this._showTimer),this._active&&(this._tipView&&this._tipView.hide(),this._active=!1)}}),Lo=(Is.$_levels={error:1,warning:2,info:3,ignore:4},Is.compare=function(t,e){return Is.$_levels[t]-Is.$_levels[e]},(Zr.prototype=new Zt).toString=function(){return"Validation failed["+this.level+"]: "+this.message},e("EditValidation",null,{init:function(t){this._super(),this._name=t},name:null,active:!0,mode:As,level:Is.ERROR,criteria:null,message:null,description:null,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?ni.Default.parse(t,Lo.CAPITAL_INDEXERS):null)},validate:function(t){if(this._exprNode&&!this._exprNode.evaluate(t))throw t=this._message||this._description||this._name||this._criteria,new Zr(this._level,t,null,this._message)}},{CAPITAL_INDEXERS:["value","values"]})),Ao=e("EditValidationCollection",null,{init:function(){this._super(),this._items=[]},count:function(){return this._items.length},items_:function(){return this._items.slice()},setItems:function(t){this.assign(t)},clear:function(){this._items=[]},addAll:function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},assign:function(t){if(t!==this&&(this.clear(),t))for(var e=0,i=(t=k(t)?t:[t]).length;e<i;e++){var n=new Lo;n.assign(t[e]),this._items.push(n)}},validate:function(t,e,i,n){for(var s=0;s<this._items.length;s++){var r=this._items[s];if(r.isActive()&&(r.mode()==t||r.mode()==As))try{r.validate(e)}catch(t){if(!i||Is.compare(r.level(),n)<0)throw t instanceof Zr?(t.level=r.level(),t):new Zr(r.level(),t)}}}}),Vo=e("DataRowValidationRuntime",Si,{init:function(){this._super(),this._item=null,this._dataSource=null,this._fieldCount=null},item:null,setItem:function(t){this._item=t,this._dataSource=this._item.dataSource(),this._fieldCount=this._dataSource?this._dataSource.fieldCount():0},isIdentifier:function(t){return t=t.toLowerCase(),Vo.IDENTS.hasOwnProperty(t)?Vo.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case Vo.ID_ROW:return this._item.index();case Vo.ID_DATA_ROW:return this._item.dataRow();case Vo.ID_CHECKED:return this._item.isChecked()}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);switch(t){case Vo.ID_VALUE:case Vo.ID_VALUES:return this._item.getData(e)}throw new h("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){var n=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(n<0||n>=this._fieldCount)throw new h("Data field is not exists:"+e);switch(t){case Vo.ID_VALUE:case Vo.ID_VALUES:return this._item.getData(n)}throw new h("Invalid identifier indexer: "+t)}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checekd:t.ID_CHECKED,value:t.ID_VALUE,values:t.ID_VALUES}}),Po=e("DataCellValidationRuntime",Si,{init:function(){this._super(),this._index=null,this._value=null},setIndex:function(t){this._index=t,this._value=this._index.item().getData(this._index.column().dataIndex()),this._dataSource=this._index.item().dataSource()},isIdentifier:function(t){return t=t.toLowerCase(),Po.IDENTS.hasOwnProperty(t)?Po.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case Po.ID_VALUE:return this._value;case Po.ID_ROW:return this._index.I();case Po.ID_DATA_ROW:return this._index.item().dataRow();case Po.ID_INDEX:return this._index.column().index();case Po.ID_FIELD:return this._index.column().dataIndex();case Po.ID_CHECKED:var e=this._index.item();return!!e&&e.isChecked();case Po.ID_TAG:return this._index.column().tag();case Po.ID_BASE:e=this._index.dataColumn().baseIndex();return 0<=e?this._index.item().getData(e):I}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){var i=this._dataSource.fieldCount();if(e<0||i<=e)throw new h("Data field index out of bounds:"+e);switch(t){case Po.ID_VALUE:case Po.ID_VALUES:return this._index.item().getData(e)}throw new h("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){var n=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e),i=this._dataSource.fieldCount();if(n<0||i<=n)throw new h("Data field is not exists:"+e);switch(t){case Po.ID_VALUE:case Po.ID_VALUES:return this._index.item().getData(n)}throw new h("Invalid identifier indexer: "+t)}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_TAG:6,ID_BASE:7,ID_VALUES:8},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES}}),Ho=e("ValidationManager",null,{init:function(t){this._super(),this._owner=t,this._userValidations=!1,this._validateCellList={}},owner:function(){return this._owner},hasRowValidation:function(){return this._owner.validations()&&0<this._owner.validations().count()},validateCell:function(t,e){this.$_validateCell(t,e,!0,this._owner.editOptions().commitLevel())},validateRow:function(t,e,i){var n=this._owner.editOptions().commitLevel();if(!i)for(var s=this._owner.getDataColumns(),r=0,o=s.length;r<o;r++){var a=s[r],a=$.temp(this._owner,t.index(),a);this.$_validateCell(a,e,!0,n)}var h,i=this._owner.validations();i&&0<i.count()&&((h=this._owner.rowValidationRuntime()).setItem(t),i.validate(e?Ps:Vs,h,!1,n))},$_validateCell:function(t,e,i,n){var s=b(t.dataColumn(),M);if(s){var r=t.item().getData(s.dataIndex());if(s.isRequired()){var o=s.grid(),o=o&&o.dataSource()&&o.dataSource().getField(s.dataIndex());if(o&&o.isEmpty(r))throw n=s.requiredLevel()||Is.ERROR,o=s.requiredMessage()||"Value is required: "+s.fieldName(),new Zr(n,o,s,s.requiredMessage())}r=s.validations();if(r&&0<r.count()){o=this._owner.columnValidationRuntime();o.setIndex(t);try{r.validate(e?Ps:Vs,o,i,n),this.$_clearInvalidateCell(t)}catch(t){throw t instanceof Zr&&(t.column=s),t}}}},$_addInvalidateCell:function(t,e){var i,n=t.dataId&&t.dataId(),s=t.dataColumn&&t.dataColumn().dataIndex();null==n||s<=-1||(((i=this._validateCellList)[n]||(i[n]={}))[s]={dataRow:t.dataRow(),message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn().name()})},$_clearInvalidateCell:function(t){var e=t.dataId(),t=t.dataColumn().dataIndex(),e=this._validateCellList[e];e&&e[t]&&delete e[t]},$_clearInvalidateList:function(){this._validateCellList={},this._userValidations=!1,this._owner.refreshView()},clearInvalidCellList:function(){this.$_clearInvalidateList()},addInvalidateCell:function(t,e){this.$_addInvalidateCell(t,e)},getInvalidCellList:function(){var t,e=[],i=this._validateCellList;for(t in i){var n,s=i[t];for(n in s){var r=s[n];e.push({column:r.column,dataRow:r.dataRow,message:r.message,level:r.level})}}return 0<e.length?e:null},checkValidateCells:function(t,e){var i,n,s,r,o,a=this._owner,h=a.getDataColumns(),l=[];if(null!=t)for(i=0,s=(t=bt(t)).length;i<s;i++)(o=a.getItem(t[i]))&&o.dataId&&-1<o.dataId()&&(delete this._validateCellList[o.dataId()],l.push(o));else{if(e)for(i=0,s=a.itemCount();i<s;i++)(o=a.getItem(i))&&o.dataId&&-1<o.dataId()&&(delete this._validateCellList[o.dataId()],l.push(o));else l=a.getAllItems();this._validateCellList={}}for(i=0,r=l.length;i<r;i++)if((o=l[i]).dataId&&!(o.dataId()<0))for(n=0,s=h.length;n<s;n++)try{var d=h[n],u=d.dataIndex(),c=$.temp(a,o.index(),d);c._item=o,this.$_validateCell(c,!1,!1,"ignore"),a._fireValidateCell(c,!1,c.item().getData(u))}catch(t){this.$_addInvalidateCell(c,t),this._userValidations=!0}return a.refreshView(),this.getInvalidCellList()},clearInvalidateList:function(){this.$_clearInvalidateList()}}),Go=e("LookupSource",le,{init:function(t){this._super(),this._id=t},id:function(){return this._id},clear:function(){},load:function(t){},exists:function(){return!1},fill:function(t,e){},fillRows:function(t){},add:function(t,e){},addRow:function(t){},lookup:function(){},getDomain:function(){return null},getTextDomain:function(){return null},_changed:function(){this.fireEvent(Go.CHANGED)}}),$o=(Go.CHANGED="onLookupSourceChanged",e("LookupSourceProvider",le,{init:function(t){this._super(),this._id=t},getSource:function(t){return null},_changed:function(){this.fireEvent($o.CHANGED)}})),Uo=($o.CHANGED="onLookupSourceProviderChanged",e("LocalLookupSourceProvider",$o,{init:function(t){this._super(),this._sources={},t&&this.load(t)},load:function(t){if(t!==this){if(this._sources={},k(t))for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);else t&&this.$_add(t);this._changed()}},add:function(t){t=this.$_add(t);return t&&this._changed(),t},remove:function(t){this.$_remove(t)&&this._changed()},getSource:function(t){return this._sources[t]},$_createSource:function(t){var e,i=null;return t&&(e=(e=t.type)?e.toLowerCase():null,(e=new Wo(t.id,t.levels,t.ordered)).fill(t.keys,t.values),i=e),i},$_add:function(t){if(t&&t.id&&this._sources[t.id]!==t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),(this._sources[t.id]=e).addListener(this),e}return null},$_remove:function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},onLookupSourceChanged:function(t){this._changed()}})),Wo=e("LookupTree",Go,{init:function(t,e,i){if(t=0<arguments.length?t:null,e=1<arguments.length?e:-1,i=2<arguments.length&&i,this._super(t),e<1)throw"LookupTable levels must be equals or greater than 1";this._levels=e,this._tree={},this._listMap=i?{}:null},clear:function(){this._tree={},this._changed()},load:function(t){},exists:function(t){var e;if(t&&0<(e=t.length)&&e<=this._levels){if(0<(e=Math.min(e,this._levels)-1)){for(var i=this._tree,n=0;n<e&&(i=i[t[n]]);n++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},fill:function(t,e){if(t&&0<t.length&&e&&0<e.length){for(var i=Math.min(t.length,e.length),n=0;n<i;n++){var s=t[n];k(s)||(s=[s]),this.$_add(s,e[n])}this._changed()}},fillRows:function(t){var e;if(t&&0<(e=t.length)){for(var i=0;i<e;i++)this.$_addRow(t[i]);this._changed()}},add:function(t,e){t&&(this.$_add(t,e),this._changed())},addRow:function(t){t&&(this.$_addRow(t),this._changed())},lookup:function(t,e){if(1<this._levels){var i,n=this._tree,s=this._levels-1;for(a=0;a<s&&(n=n[i=t[a]]);a++);}else n=this._tree;if(i=t[t.length-1],n&&i&&e){for(var r=i.split(e),o=[],a=0,h=r.length;a<h;a++)o.push(n[r[a]]||r[a]);return o.join(e)}return n?n[i]:void 0},getDomain:function(t){if(!t||t.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var e,i=[],n=[],s=this._tree;if(1<this._levels)for(o=t.length,a=0;a<o;a++)if(t[a],!(s=s[t[a]]))return{keys:i,values:n};if(this._listMap)for(var r=this._listMap[t.slice(0,t.length).join("~!~")],o=r?r.length:0,a=0;a<o;a++)i.push(r[a]),n.push(s[r[a]]);else for(e in s)i.push(e),n.push(s[e]);return{keys:i,values:n}},getTextDomain:function(t){for(var e=this.getDomain(t),t=e.keys,i=e.values,n=0,s=t.length;n<s;n++)t[n]=t[n]?String(t[n]):null,i[n]=i[n]?String(i[n]):null;return e},$_add:function(t,e){if(t){var i,n=this._levels;if((k(t)?t.length:1)<n)throw Error("Keys length must be equals or greater than "+n);if(1<n){for(var s,r,o=this._tree,a=0,h=n-1;a<h;a++)(r=o[s=t[a]])||(o[s]=r={}),o=r;o[i=t[h]]=e}else this._tree[i=t]=e;this._listMap&&(n=t.slice(0,t.length-1).join("~!~"),k(e=this._listMap[n])||(this._listMap[n]=e=[]),e.push(i))}},$_addRow:function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}}}),n=e("GridObject",le,{init:function(t){this._super(),this._grid=t,this._dirty=!1},destroy:function(){for(var t in this._destroying=!0,this._grid=null,this)(this[t]instanceof d||this[t]instanceof Co)&&(this[t]=null);this._super()},owner:function(){return this._grid},isDirty:function(){return this._dirty},clean:function(){this._dirty&&(this._dirty=!1)},invalidate:function(){this._grid&&this._grid.invalidate()},refreshOwner:function(){this._grid&&this._grid.refreshView()},propertyChanged:function(t,e){"visible"==t&&this._visibleChanged(),this._changed()},_changed:function(){this._dirty||(this._dirty=!0,this._doChanged(),this.refreshOwner())},_visibleChanged:function(){this._grid&&this._grid._objectVisualChanged(this)},_doChanged:function(){}}),zo=n.prototype,Ko=e("VisualObject",n,{init:function(t,e){this._super(t),this._styles=new d(this,e)},destroy:function(){this._destroying=!0,this._styles=null,this._realHeight=null,this._super()},stylesChanged:function(){this._changed()},visible:!0,styles:null,setStyles:function(t){t!==this._styles&&this._styles.extend(t)},_doChanged:function(){this._grid&&this._grid._visualObjectChanged(this)}}),Yo=(Ko.prototype,e("GridPanel",Ko,{init:function(t){this._super(t,"panelStyles"),this.setVisible(!0)},minHeight:20,height:0,realHeight:0,proxy:function(){var t=this._super();return t.height=this._realHeight,delete t.realHeight,t}})),Kr=e("SummaryObject",Ko,{init:function(t,e){this._super(t,e),this._cell=this.$_createSummaryCell(),this._groupStyles=new d(this),this._runtime=new cc,this._runStyles=new d(this,"runFooterStyles",null,!1),this._eachStyles=null},styles:null,groupStyles:null,minHeight:ee(23),height:V,realHeight:V,resizable:!1,mergeCells:null,count:1,$_createSummaryCell:function(){return null},setGroupStyles:function(t){t!==this._groupStyles&&this._groupStyles.extend(t)},setStyles:function(t){if(t)if(xt(t))for(var e,i=this._eachStyles=[],n=0,s=t.length;n<s;n++)e=new d(this,"footerStyles"),i.push(e),e.setSysDefault(this.$_getSysdefaultStyles()),e.extend(t[n]);else this._eachStyles=null,this._styles.extend(t);else this._eachStyles=null,this._styles.clearValues()},setMergeCells:function(t){if(this._mergeCells=[],t instanceof Array)if(t[0]instanceof Array)for(var e=0,i=t.length;e<i;e++)this._mergeCells[e]=t[e].slice(0);else this._mergeCells[0]=t.slice(0);else this._mergeCells=null;this._summaryMergeDirty=!0,this._changed()},getCell:function(t,e){var i=this._cell,n=t.column();return i.setIndex(t),void 0===e?i.setSummaryIndex(0):i.setSummaryIndex(e),i.calculate(),n instanceof R?i.setStyles(this._groupStyles):(n=(t=this.$_getSummaryObject(n)).getStyles(e),null!=e&&this._eachStyles&&this._eachStyles[e]?n.setParent(this._eachStyles[e],!1):n.setParent(this.styles(),!1),(t=t.getDynamicStyles(e))&&0<t.count()?((e=this._runStyles).clearValues(),e.setParent(n),this._runtime.setCell(i),t.applyInternal(this._runtime,e),i.setStyles(e)):i.setStyles(n)),i},assign:function(t){this._super(t),this._dirty&&(this._doChanged(),this.refreshOwner())},_changed:function(){this._dirty||(this._dirty=!0,this._doChanged(),this.refreshOwner())},proxy:function(){var t=this._super();return t.height=this._realHeight,delete t.realHeight,t}}),Xo=e("Footer",Kr,{init:function(t){this._super(t,"footerStyles"),this.setVisible(!0)},$_createSummaryCell:function(){return new ha},$_getSummaryObject:function(t){return t.footer()},$_getSysdefaultStyles:function(){u.Default.footer()}}),qo=e("HeaderSummary",Kr,{init:function(t){this._super(t._grid,"headerSummaryStyles"),this._header=t,this._headStyles=new d(this),this._headCell=new oa(this),this.setVisible(!1)},destroy:function(){this._destroying=!0,this._header=null,this._headStyles=null,this._headCell=null,this._super()},headStyles:null,$_createSummaryCell:function(){return new la},$_getSummaryObject:function(t){return t.header().summary()},setHeadStyles:function(t){t!==this._headStyles&&this._headStyles.extend(t)},header:function(){return this._header},getHeadCell:function(){var t=this._headCell;return t.setStyles(this._headStyles),t},proxy:function(){var t=this._super();return t.height=this._realHeight,delete t.realHeight,t},$_getSysdefaultStyles:function(){u.Default.headerSummary()}}),jo=e("Header",Ko,{init:function(t){this._super(t,"headerStyles"),this._summary=new qo(this),this._groupStyles=new d(this,"headerGroupStyles"),this._subStyles=new d(this,"headerSubSytles"),this._cell=new aa,this.setVisible(!0)},destroy:function(){this._destroying=!0,this._summary=null,this._groupStyles=null,this._subStyles=null,this._cell=null,this._super()},summary:null,groupStyles:null,subStyles:null,minHeight:ee(23),height:V,realHeight:V,resizable:!1,sortable:!0,filterable:!0,subTextLocation:Os.LOWER,subTextGap:1,itemOffset:2,itemGap:2,imageList:null,showTooltip:!1,tooltipEllipseTextOnly:!1,heightFill:$s.DEFAULT,setSummary:function(t){t!==this._summary&&this._summary.assign(t)},setGroupStyles:function(t){t!==this._groupStyles&&this._groupStyles.extend(t)},setSubStyles:function(t){t!==this._subStyles&&this._subStyles.extend(t)},setSubTextLocation:function(t){(t=t||Os.LOWER)!=this._subTextLocation&&(this._subTextLocation=t,this._changed())},getCell:function(t){var e=this._cell,i=t.column(),n=i.header();return e.setIndex(t),e.setStyles(n.styles()),e.setSubStyles(n.subStyles()),e.setText(n.displayText()),e.setSubText(n.subText()),e.setSubLocation(n.subTextLocation()||this._subTextLocation),e.setSubTextGap(void 0===(t=n.subTextGap())?this._subTextGap:t),e.setItemOffset(void 0===(t=n.itemOffset())?this._itemOffset:t),e.setItemGap(void 0===(t=n.itemGap())?this._itemGap:t),e.setImageList(this._imageList),e.setImageIndex(n.imageIndex()),e.setImageUrl(n.imageUrl()),e.setCheckLocation(n.checkLocation()),e.setImageLocation(n.imageLocation()),e.setChecked(i.isChecked()),e.setShowTooltip(n.isShowTooltip()),e.setTooltip(n.tooltip()),e},getGroupingCell:function(t){var e,i=this._cell,n=t.header();return i.setIndex(this._grid.getIndex(-1,t)),i.setStyles(this._grid.rowGroup().panelStyles()),i.setSubStyles(n.subStyles()),i.setText(n.displayText()),i.setSubText(n.subText()),i.setSubLocation(n.subTextLocation()||this._subTextLocation),i.setSubTextGap(void 0===(e=n.subTextGap())?this._subTextGap:e),i.setItemOffset(void 0===(e=n.itemOffset())?this._itemOffset:e),i.setItemGap(void 0===(e=n.itemGap())?this._itemGap:e),i.setImageList(this._imageList),i.setImageIndex(n.imageIndex()),i.setImageUrl(n.imageUrl()),i.setCheckLocation(n.checkLocation()),i.setImageLocation(n.imageLocation()),i.setChecked(t.isChecked()),i.setShowTooltip(n.isShowTooltip()),i.setTooltip(n.tooltip()),i},clean:function(){this._super(),this._summary.clean()},proxy:function(){var t=this._super();return t.height=this._realHeight,delete t.realHeight,t}}),Zo=e("EditBar",Ko,{init:function(t){this._super(t,"editBarStyles"),this._cell=new da,this.setVisible(!1)},minHeight:23,height:0,getCell:function(t){var e=this._cell;return e.setStyles(this._styles),e}}),Kr=e("SectionObject",Ko,{init:function(t,e){this._super(t,e),this._headStyles=new d(this),this._footStyles=new d(this),this._summaryStyles=new d(this),this._headCell=new oa(this),this._footCell=new oa(this),this._sumCell=new oa(this),this.setVisible(!0)},headStyles:null,footStyles:null,summaryStyles:null,headText:null,footText:null,summaryText:null,headImageUrl:null,footImageUrl:null,summaryImageUrl:null,setHeadStyles:function(t){t!==this._headStyles&&this._headStyles.extend(t)},setFootStyles:function(t){t!==this._footStyles&&this._footStyles.extend(t)},setSummaryStyles:function(t){t!==this._summaryStyles&&this._summaryStyles.extend(t)},getCell:function(t){a()},getHeadCell:function(){var t=this._headCell;return t.setStyles(this._headStyles),t},getFootCell:function(){var t=this._footCell;return t.setStyles(this._footStyles),t},getSumCell:function(){var t=this._sumCell;return t.setStyles(this._summaryStyles),t},setHeadImageUrl:function(t){t!=this._headImageUrl&&(this._headImageUrl=t,this._headImage=t?this._grid.getImage(t):null,this._changed())},setFootImageUrl:function(t){t!=this._footImageUrl&&(this._footImageUrl=t,this._footImage=t?this._grid.getImage(t):null,this._changed())},setSummaryImageUrl:function(t){t!=this._summaryImageUrl&&(this._summaryImageUrl=t,this._summaryImage=t?this._grid.getImage(t):null,this._changed())},headImage:function(){return this._headImage||(this._headImage=this._headImageUrl?this._grid.getImage(this._headImageUrl):null)},footImage:function(){return this._footImage||(this._footImage=this._footImageUrl?this._grid.getImage(this._footImageUrl):null)},summaryImage:function(){return this._summaryImage||(this._summaryImage=this._summaryImageUrl?this._grid.getImage(this._summaryImageUrl):null)}}),Jo=e("Indicator",Kr,{init:function(t){this._super(t,"indicatorStyles"),this._cell=new ua(this),this._stateImages={},this._mark=Gs.DEFAULT},destroy:function(){this._destroying=!0,this._realWidth=null,this._super()},displayValue:bs.INDEX,zeroBase:!1,indexOffset:V,rowOffset:V,minWidth:ee(40),maxWidth:V,width:V,realWidth:V,selectable:!0,stateImages:null,mark:null,getCell:function(t){var e,i=this._cell;return i.setIndex(t),i.setStyles(this.styles()),t.item()&&((e=t.item().itemState())==H.NORMAL&&this._grid.focusedIndex().I()==t.I()&&(e=H.FOCUSED),i.setItemState(e)),i},setStateImages:function(t){if("object"==typeof t){for(var e in t)this._stateImages[e]=t[e];this._changed()}},proxy:function(){var t=this._super();return t.width=this._realWidth,delete t.realWidth,t}}),Qo=e("StateBar",Kr,{init:function(t){this._super(t,"stateBarStyles"),this._cell=new ca,this._stateTexts={created:"C",updated:"U",deleted:"D",createAndDeleted:"X"},this._stateStyles={created:null,updated:null,deleted:null,createAndDeleted:null},this._stateImages={}},destroy:function(){this._destroying=!0,this._stateTexts=null,this._stateStyles=null,this._super()},width:ee(20),mark:Gs.DEFAULT,stateTexts:{},stateStyles:{},stateImages:{},setStateTexts:function(t){if("object"==typeof t){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}},setStateImages:function(t){if("object"==typeof t){for(var e in t)this._stateImages[e]=t[e];this._changed()}},setStateStyles:function(t){if("object"==typeof t){for(var e in t){var i;this._stateStyles.hasOwnProperty(e)&&(null==t[e]?this._stateStyles[e]=null:((i=(i=this._stateStyles[e])||new d(this)).copy(this._styles),i.extend(t[e],!1),this._stateStyles[e]=i))}this._changed()}},getCell:function(t){var e=this._cell;return e.setIndex(t),e.setStyles(this.styles()),e}}),ta=e("CheckBar",Kr,{init:function(t){this._super(t,"checkBarStyles"),this._cell=new _a,this._runtime=new _c,this._runStyles=new d(this,"runCheckBarStyles",null,!1),this._dynamicStyles=new Co(this),this._allChecked=!1},width:ee(20),exclusive:!1,showAll:!0,showGroup:!0,visibleOnly:!1,checkableOnly:!0,checkableExpression:null,dynamicStyles:null,headCheckImageUrl:null,headUnCheckImageUrl:null,checkImageUrl:null,unCheckImageUrl:null,disableCheckImageUrl:null,disableUnCheckImageUrl:null,drawCheckBox:!0,radioImageUrl:null,unCheckRadioImageUrl:null,syncHeadCheck:!1,setCheckImageUrl:function(t){t!=this._checkImageUrl&&(this._checkImageUrl=t)&&this._grid.getImage(t)},setUnCheckImageUrl:function(t){t!=this._unCheckImageUrl&&(this._unCheckImageUrl=t)&&this._grid.getImage(t)},setDisableCheckImageUrl:function(t){t!=this._disableCheckImageUrl&&(this._disableCheckImageUrl=t)&&this._grid.getImage(t)},setDisableUnCheckImageUrl:function(t){t!=this._disableUnCheckImageUrl&&(this._disableUnCheckImageUrl=t)&&this._grid.getImage(t)},getCheckImage:function(t,e){e=e?t?this._checkImageUrl:this._unCheckImageUrl:t?this._disableCheckImageUrl||this._checkImageUrl:this._disableUnCheckImageUrl||this._unCheckImageUrl;return e?this._grid.getImage(e):null},setHeadCheckImageUrl:function(t){t!=this._headCheckImageUrl&&(this._headCheckImageUrl=t)&&this._grid.getImage(t)},setHeadUnCheckImageUrl:function(t){t!=this._headUnCheckImageUrl&&(this._headUnCheckImageUrl=t)&&this._grid.getImage(t)},setRadioImageUrl:function(t){t!=this._radioImageUrl&&(this._radioImageUrl=t)&&this._grid.getImage(t)},setUnCheckRadioImageUrl:function(t){t!=this._unCheckRadioImageUrl&&(this._unCheckRadioImageUrl=t)&&this._grid.getImage(t)},getCell:function(t){var e,i=this._cell,t=(i.setIndex(t),this.dynamicStyles());return t&&0<t.count()?((e=this._runStyles).clearValues(),e.setParent(this.styles()),this._runtime.setCell(i),t.applyInternal(this._runtime,e),i.setStyles(e)):i.setStyles(this.styles()),i},setCheckableExpression:function(t){this._checkableExpression=t,this._grid._items&&this._grid._items.setCheckableExpression&&this._grid._items.setCheckableExpression(this.checkableExpression()),this._dirty||(this._dirty=!0,this.refreshOwner())},setDynamicStyles:function(t){this._dynamicStyles.setItems(t),this.refreshOwner()},capitalIndexers:function(){return["value","values"]},propertyChanged:function(t,e){"exclusive"==t&&this._grid&&this._grid._objectVisualChanged(this),this._super(t,e)}}),ea=e("GridBody",Ko,{init:function(t){this._super(t,"gridBodyStyles"),this._cellStyles=new d(this,"",null,!1),this._runtimeStyles=new d(this,"",null,!1),this._runtimeStyles2=new d(null,"",null,!1),this._items=null,this._fixedStyles=null,this._bodyStyles=null,this._hasCellStyles=!1,this._emptyStyles=new d(this,"emptyStyles",null,!1),this._rowHoverStyles=new d(this,"rowHoverStyles",{border:null},!1),this._rowFocusStyles=new d(this,"rowFocusStyles",{border:null},!1),this._dynamicStyles=new Co(this),this._cellDynamicStyles=new Co(this),this._rowStylesFirst=!1,this._fixedIgnoreDynamic=!1,this._fixedIgnoreColumn=!1,this._groupCell=new fa,this._dataCell=new ga,this._literalCell=new pa,this._seriesCell=new wa,this._mergedCell=new Yh,this._dataSource=null,this._rowRuntime=new dc,this._cellRuntime=new uc,this._rowStylesOwner=new mo({capitalIndexers:["value","values"]}),this._cellStylesOwner=new mo({capitalIndexers:["value","values"]}),this._styleTargets={body:!0,fixed:!1},this._runBodyStyles=new d(this,"runBodyStyles",null,!1)},destroy:function(){for(var t in this._destroying=!0,this._styleTargets=null,this)this[t]instanceof d&&(this[t]=null,delete this[t]);this._rowStylesOwner=null,this._cellStylesOwner=null,this._super()},capitalIndexers:function(){return ia},emptyStyles:null,rowHoverStyles:null,rowFocusStyles:null,dynamicStyles:null,cellDynamicStyles:null,rowStylesFirst:!1,setEmptyStyles:function(t){t!==this._emptyStyles&&(this._emptyStyles.extend(t),this._grid)&&this._grid.refreshView()},setRowHoverStyles:function(t){t!=this._rowHoverStyles&&(this._rowHoverStyles.extend(t),this._grid)&&this._grid.refreshView()},setRowFocusStyles:function(t){t!=this._rowFocusStyles&&(this._rowFocusStyles.extend(t),this._grid)&&this._grid.refreshView()},setDynamicStyles:function(t){this._dynamicStyles.setItems(t),this._grid&&this._grid.refreshView()},setCellDynamicStyles:function(t){this._cellDynamicStyles.setItems(t),this._grid&&this._grid.refreshView()},setRowStylesFirst:function(t){t!=this._rowStylesFirst&&(this._rowStylesFirst=t,this._grid)&&this._grid.refreshView()},rowRuntime:function(){return this._rowRuntime},cellRunTime:function(){return this._cellRuntime},checkDynamicStyle:function(t,e){if((!t.isFixed()||!this._fixedIgnoreDynamic)&&(!(t._itemIndex<0)||e)){if(e=e||t.item(),this._rowRuntime.setItem(e,this._grid),this._dynamicStyles.checkStyle(this._rowRuntime))return!0;var i=t.column(),n=t.dataColumn();if(n&&!i._ignoreDefaultDynamicStyles){i=i instanceof Yl?this._seriesCell:i instanceof pa?this._literalCell:i instanceof R?this._groupCell:this._dataCell;if(i.setIndex(t),this._cellRuntime.setCell(i,e),this.cellDynamicStyles().checkStyle(this._cellRuntime))return!0;if(n.dynamicStyles().checkStyle(this._cellRuntime))return!0;if(this._hasCellStyles&&this._items.checkCellStyle(e.dataRow(),n.dataIndex()))return!0}}return!1},getCell:function(t,e,i){var n,s,r,o,a,h,l,d=t.column(),u=t.dataColumn(),c=t.isFixed(),e=e?this._mergedCell:d instanceof M?this._dataCell:d instanceof Yl?this._seriesCell:d instanceof pa?this._literalCell:d instanceof R?this._groupCell:this._dataCell,_=this._rowStylesFirst?this._runBodyStyles:null,f=this._cellStyles;return e.setIndex(t),(n=this._runtimeStyles2).clearValues(),this._fixedIgnoreColumn&&c||n.assign(d._styles),_?n.setParent(_,!1):n.setParent(c?this._fixedStyles:this._bodyStyles,!1),f.clearValues(),f.setParent(n,!1),this._dataSource&&e!==this._groupCell?(i=i||t.item(),c&&this._fixedIgnoreDynamic?l=a=h=0:(s=this._dynamicStyles,r=this._cellDynamicStyles,l=s.count(),h=u?(a=u._ignoreDefaultDynamicStyles?0:r.count(),(o=u.dynamicStyles()).count()):(a=d._ignoreDefaultDynamicStyles?0:r.count(),0)),_?(this._styleTargets.body=!c,this._styleTargets.fixed=c,_.clearValues(),_.setParent(c?this._fixedStyles:this._bodyStyles,!1),0<l&&(this._rowRuntime.setItem(i,this._grid),s.applyInternal(this._rowRuntime,_,this._styleTargets)),0<a||0<h?((n=this._runtimeStyles).clearValues(),n.setParent(f,!1),0<a&&(this._cellRuntime.setCell(e,i),r.applyInternal(this._cellRuntime,n,this._styleTargets)),0<h&&(this._cellRuntime.setCell(e,i),o.applyInternal(this._cellRuntime,n,this._styleTargets)),e.setStyles(n)):e.setStyles(f)):i.dataRow&&-1<=i.dataRow()&&(0<l||0<a||0<h)?((n=this._runtimeStyles).clearValues(),n._parent=f,0<l&&(this._rowRuntime.setItem(i,this._grid),s.applyInternal(this._rowRuntime,n)),0<a&&(this._cellRuntime.setCell(e,i),r.applyInternal(this._cellRuntime,n)),0<h&&(this._cellRuntime.setCell(e,i),o.applyInternal(this._cellRuntime,n)),e.setStyles(n)):e.setStyles(f),u&&this._hasCellStyles?(d=this._items.getCellStyle(i.dataRow(),u.dataIndex()),e.setCellStyles(d)):e.setCellStyles(null)):e.setStyles(f),u&&(this._grid.isItemEditing(i)?(e.setError(u.error()),e.setErrorLevel(u.errorLevel())):(l=(_=this._grid._validationManager._validateCellList)[t.dataId()]&&_[t.dataId()][u.dataIndex()])?(e.setError(l.message),e.setErrorLevel(l.level)):(e.setError(null),e.setErrorLevel(Is.IGNORE))),e._styles._sysDefault=(c?this._fixedStyles:this._bodyStyles)._sysDefault,e},getCellSimple:function(t,e){var i=t._column,e=e?this._mergedCell:i instanceof Yl?this._seriesCell:i instanceof pa?this._literalCell:i instanceof R?this._groupCell:this._dataCell;return e.setIndex(t),e},addDynamicStyle:function(t,e){},_prepareUpdate:function(){var t=this._grid=this.owner(),t=(this._items=t.itemSource(),this._fixedStyles=t.fixedOptions().styles(),this._fixedIgnoreDynamic=t.fixedOptions().isIgnoreDynamicStyles(),this._fixedIgnoreColumn=t.fixedOptions().isIgnoreColumnStyles(),this._bodyStyles=this.styles(),this._hasCellStyles=this._items.hasCellStyle(),this._dataSource=t.dataSource(),this._rowRuntime.setDataSource(this._dataSource),this._cellRuntime.setDataSource(this._dataSource),Co.prototype);t.applyInternal=this._grid._userMode?t.applyInternalUserMode:t.applyInternalNormal}}),ia=["value","values"],na=e("RowGroupLevel",null,{init:function(t){this._super(),this._headerStyles=new d(this,"rowGroupLevelHeaderStyles"),this._footerStyles=new d(this,"rowGroupLevelFooterStyles"),this._barStyles=new d(this,"rowGroupLevelBarStyles"),this._headerBarStyles=new d(this,"rowGroupLevelHeaderBarStyles"),this._footerBarStyles=new d(this,"rowGroupLevelFooterBarStyles"),t&&(t.footerStyles&&this._footerStyles.extend(t.footerStyles),t.headerStyles&&this._headerStyles.extend(t.headerStyles),t.barStyles&&this._barStyles.extend(t.barStyles),t.headerBarStyles&&this._headerBarStyles.extend(t.headerBarStyles),t.footerBarStyles)&&this._footerBarStyles.extend(t.footerBarStyles)},headerStyles:function(){return this._headerStyles},footerStyles:function(){return this._footerStyles},barStyles:function(){return this._barStyles},headerBarStyles:function(){return this._headerBarStyles},footerBarStyles:function(){return this._footerBarStyles}}),sa=e("RowGroup",n,{init:function(t){this._super(t),this._levels=[],this._headStyles=new d(this,"rowGroupHead"),this._footStyles=new d(this,"rowGroupFoot"),this._summaryStyles=new d(this,"rowGroupSummary"),this._headerStyles=new d(this,"rowGroupHeader"),this._footerStyles=new d(this,"rowGroupFooter"),this._panelStyles=new d(this,"rowGroupPanel"),this._barStyles=new d(this,"rowGroupBar"),this._headerBarStyles=new d(this,"rowGroupHeaderBar"),this._footerBarStyles=new d(this,"rowGroupFooterBar"),this._headerCell=new va(this),this._footerCell=new Ca(this),this._barCell=new ya,this._itemBarCell=new xa,this._headCell=new Ia,this._footCell=new ba,this._summaryCell=new Ea,this._footerRuntime=new cc,this._runStyles=new d(this,"rowGroupRuntimeStyles",null,!1),this._headerExprStatement=new _r(this._headerStatement),this._statementRuntime=new fc},destroy:function(){for(var t in this._destroying=!0,this._headerExprStatement=null,this._statementRuntime=null,this)this[t]instanceof d&&(this[t]=null);this._super()},levels:null,headerStyles:null,footerStyles:null,panelStyles:null,barStyles:null,headerBarStyles:null,footerBarStyles:null,headStyles:null,footStyles:null,summaryStyles:null,headerStatement:"${groupField}: ${groupValue} - ${rowCount} rows",levelIndent:20,headerOffset:-1,footerOffset:0,mergeMode:!1,mergeExpander:!0,expandedAdornments:A.BOTH,collapsedAdornments:A.HEADER,cellDisplay:Rs.MERGE,footerVisibility:Ss.MULTI_ROWS_ONLY,inheritsLevel:!0,imageLists:null,summaryMode:Ts.AGGREGATE,footerCellMerge:!1,footerStatement:null,sorting:!0,headerCallback:null,createFooterCallback:null,levelCount:function(){return this._levels.length},levels_:function(){return this._levels.concat()},setLevels:function(t){if(this._levels=[],t)for(var e=0;e<t.length;e++){var i=t[e];i instanceof na||(i=new na(i)),this._levels.push(i)}this._changed()},setHeadStyles:function(t){t!=this._headStyles&&this._headStyles.extend(t)},setFootStyles:function(t){t!=this._footStyles&&this._footStyles.extend(t)},setSummaryStyles:function(t){t!=this._summaryStyles&&this._summaryStyles.extend(t)},setHeaderStyles:function(t){t!=this._headerStyles&&this._headerStyles.extend(t)},setFooterStyles:function(t){t!=this._footerStyles&&this._footerStyles.extend(t)},setPanelStyles:function(t){t!=this._panelStyles&&this._panelStyles.extend(t)},setBarStyles:function(t){t!=this._barStyles&&this._barStyles.extend(t)},setHeaderBarStyles:function(t){t!=this._headerBarStyles&&this._headerBarStyles.extend(t)},setFooterBarStyles:function(t){t!=this._footerBarStyles&&this._footerBarStyles.extend(t)},setHeaderStatement:function(t){t!=this._headerStatement&&(this._headerStatement=t,this._headerExprStatement.setSource(t),this._changed())},setFooterStatement:function(t){t!=this._footerStatement&&((this._footerStatement=t)?this._footerExprStatement?this._footerExprStatement.setSource(t):this._footerExprStatement=new _r(t):this._footerExprStatement=null,this._changed())},setMergeMode:function(t){t!=this._mergeMode&&(this._mergeMode=t,this.owner())&&(this.owner().$_rowGroupFooterMergeChanged(),this.owner().$_rowGroupMergeModeChanged())},setFooterCellMerge:function(t){t!=this._footerCellMerge&&(this._footerCellMerge=t,this.owner()&&this.owner().$_rowGroupFooterMergeChanged(),this._changed())},setExpandedAdornments:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.owner())&&this.owner().$_rowGroupAdornmentsChanged()},setCollapsedAdornments:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.owner())&&this.owner().$_rowGroupAdornmentsChanged()},setCreateFooterCallback:function(t){t!=this._createFooterCallback&&(this._createFooterCallback="function"==typeof t?t:null,this.owner())&&this.owner().$_rowGroupAdornmentsChanged()},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.owner())&&this.owner().$_groupSummaryModeChanged()},setSorting:function(t){t!=this._sorting&&(this._sorting=t,this.owner())&&this.owner().$_groupSortingChanged()},getLevel:function(t){var e=this._levels.length;return t<e?this._levels[t]:0<e&&this._inheritsLevel?this._levels[e-1]:null},getHeaderCell:function(t){var e=this.owner().getItem(t),e=this.getLevel(e.level()-1);return this._runStyles.clearValues(),e?this._runStyles.setParent(e.headerStyles(),!1):this._runStyles.setParent(this._headerStyles,!1),this._headerCell.setStyles(this._runStyles),this._headerCell.setIndex($.temp(this.owner(),t)),this._headerCell},getFooterCell:function(t,e){var i=(e=this.owner().getItem(t.I())||e).parent(),i=this.getLevel(i.level()-1),n=b(t.column(),zl);return n&&(this._runStyles.clearValues(),this._runStyles.extend(n.footer().styles()),this._runStyles.extend(n.footer().groupStyles())),i?this._runStyles.setParent(i.footerStyles(),!1):this._runStyles.setParent(this._footerStyles,!1),this._footerCell.setIndex(t),this._footerCell.calculate(e),n&&(i=n.footer().groupDynamicStyles())&&0<i.count()&&(this._footerRuntime.setCell(this._footerCell,e),i.applyInternal(this._footerRuntime,this._runStyles)),this._footerCell.setStyles(this._runStyles),this._footerCell},getBarCell:function(t){this._barCell.setLevel(t);t=this.getLevel(t-1);return t?this._barCell.setStyles(t.barStyles()):this._barCell.setStyles(this._barStyles),this._barCell},getHeaderBarCell:function(t){this._itemBarCell.setIndex(t);t=this.getLevel(t.item().level()-1);return t?this._itemBarCell.setStyles(t.headerBarStyles()):this._itemBarCell.setStyles(this._headerBarStyles),this._itemBarCell},getFooterBarCell:function(t){this._itemBarCell.setIndex(t);t=t.item().parent(),t=this.getLevel(t.level()-1);return t?this._itemBarCell.setStyles(t.footerBarStyles()):this._itemBarCell.setStyles(this._footerBarStyles),this._itemBarCell},getHeadCell:function(t){return this._headCell.setStyles(this._headStyles),this._headCell},getFootCell:function(t){return this._footCell.setStyles(this._footStyles),this._footCell},getSummaryCell:function(t){return this._summaryCell.setStyles(this._summaryStyles),this._summaryCell},getHeaderText:function(t){return!this._headerStatement&&this._headerCallback&&"function"==typeof this._headerCallback?this._headerCallback(hf(t,!0),this._grid&&this._grid.getHandler()):(this._statementRuntime.setGrid(this.owner()),this._statementRuntime.setGroup(t),this._headerExprStatement.evaluate(this._statementRuntime))},getFooterText:function(t){return this._footerExprStatement?(this._statementRuntime.setGrid(this.owner()),this._statementRuntime.setGroup(t),this._footerExprStatement.evaluate(this._statementRuntime)):null}}),ra=e("GridCell",null,{init:function(t){this._super(),this._name=t,this._index=new $},styles:null,index:null,name:function(){return this._name},setIndex:function(t){this._index.assign(t)},getItem:function(){return this._index.item()},item:function(){return this._index.item()},error:function(){return null},errorLevel:function(){return Is.IGNORE}},{ERROR:"<<ERROR>>"}),oa=e("StyledCell",ra,{init:function(t){this._super(null),this._model=t},model:null,displayText:function(){return null},value:function(){return null}}),aa=e("HeaderCell",ra,{init:function(){this._super("headerCell")},subStyles:null,text:null,subText:null,subTextGap:1,subLocation:Os.LOWER,itemOffset:2,itemGap:2,imageList:null,imageIndex:-1,imageUrl:null,checkLocation:P.NONE,imageLocation:P.NONE,checked:!1,showTooltip:!0,tooltip:null}),Kr=e("SummaryCell",ra,{init:function(t){this._super(t),this._value=NaN,this._error=null,this._errorDetail=null},summaryIndex:0,displayText:function(){var t,e,i;return this._error?ra.ERROR:(e=this._summaryIndex,!(i=isNaN(this._value)?null:String(this._value))&&(t=this.index().valueColumn())&&(i=this.$_getSummaryObject(t).text())instanceof Array?0<=e&&i[e]?i[e]:null:i)},value:function(){return this._value},level:function(){return 0},calculate:function(){var t=this.index().dataColumn(),e=t?t.grid():null;if(this._value=NaN,this._error=null,e&&0<=t.dataIndex()){var i=this.$_getSummaryObject(t);if(e.summaryMode()!=Ts.NONE&&i.expression()&&0<e.rowCount())try{var n=e.columnSummaryRuntime();n.setColumn(t,e.getSummarizer()),this._value=i.evaluate(n,this._summaryIndex)}catch(t){this._error=t,this._errorDetail=t,oe(t)}else i._callback&&(this._value=i._callback(t.proxy(),this._summaryIndex,e.getHandler()));1<e.footer().count()?(n=i.value(),(t=Array.isArray(n)?n.slice():[n])[this._summaryIndex]=this._value,i.setValue(t)):i.setValue(this._value)}},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),ha=e("FooterCell",Kr,{init:function(){this._super("footerCell")},$_getSummaryObject:function(t){return t.footer()},$_execCallback:function(t,e,i){var n=e.grid();return t(e.proxy(),i,n.getHandler())}}),la=e("HeaderSummaryCell",Kr,{init:function(){this._super("headerSummaryCell")},$_getSummaryObject:function(t){return t.header().summary()},$_execCallback:function(t,e,i){var n=e.grid();return t(e.proxy(),n.getHandler(),i)}}),da=e("EditBarCell",ra,{init:function(){this._super("editBarCell")},displayText:function(){return null},value:function(){return null}}),ua=e("IndicatorCell",ra,{init:function(t){this._super("indicatorCell"),this._indicator=t},indicator:null,itemState:H.NORMAL,displayText:function(){var t,e=this._indicator,i=this.index(),n=i.item(),s="";if(i.item())switch(e.displayValue()){case bs.INDEX:0<=(t=e._grid.getIndicatorIndex(n))&&(t+=e.indexOffset(),e.isZeroBase()||t++,s=String(t));break;case bs.ROW:0<=(t=i.dataRow())&&(t+=e.rowOffset(),e.isZeroBase()||t++,s=String(t))}return s},value:function(){return null}}),ca=e("StateBarCell",ra,{init:function(){this._super("stateBarCell")},displayText:function(){switch(this.item().rowState()){case v.CREATED:return"C";case v.UPDATED:return"U";case v.DELETED:return"D";case v.CREATE_AND_DELETED:return"CD";default:return""}},value:function(){return null}}),_a=e("CheckBarCell",ra,{init:function(){this._super("checkBarCell")},displayText:function(){return this._index.dataRow()},value:function(){return this.item().isChecked()}}),fa=e("GroupCell",ra,{init:function(t){this._super(t)},setCellStyles:function(t){}}),ma=e("ValueCell",ra,{init:function(t){this._super(t)},cellStyles:null,displayText:function(){return this.value()},value:function(){return I},blankState:function(){return Ds.NONE},setCellStyles:function(t){(this._cellStyles=t)&&t.assignTo(this._styles)}}),ga=e("DataCell",ma,{init:function(t){this._super(t||"dataCell")},error:null,errorLevel:Is.IGNORE,error_:function(){return this._error},errorLevel_:function(){return this._errorLevel},displayText:function(){var t=this.index(),e=t.dataColumn(),t=t.item();return ga._displayText(t,e)},value:function(){var t=this.index(),e=t.dataColumn().dataIndex();if(0<=e)return t.item().getData(e)},blankState:function(){var t,e,i,n,s,r,o=Ds.NONE,a=this.index(),h=a.dataColumn(),l=a.item(),d=h._equalBlankNode,u=d&&ga.equalBlankRuntime();return h&&(h.isEqualBlank()||d)&&h.isDataRoot()&&0<=l.dataRow()&&(e=(t=a.grid()).itemCount(),d&&u&&u.setDataArguments(this._index.item().dataSource(),this,l),1<e)&&(a=a.I(),h=h.dataIndex(),l=d?(u.setItem(l),d.evaluate(u)):l.getData(h),0<a?(r=t.getItem(a-1),a<e-1?(s=t.getItem(a+1),r instanceof Ar&&(i=d?(u.setItem(r),d.evaluate(u)):r.getData(h),l instanceof Date&&i instanceof Date?+l==+i:l==i)?o=s instanceof Ar&&((n=d?(u.setItem(s),d.evaluate(u)):s.getData(h))instanceof Date&&l instanceof Date?+n==+l:n==l)?Ds.BODY:Ds.TAIL:s instanceof Ar&&((n=d?(u.setItem(s),d.evaluate(u)):s.getData(h))instanceof Date&&l instanceof Date?+n==+l:n==l)&&(o=Ds.HEAD)):r instanceof Ar&&((i=d?(u.setItem(r),d.evaluate(u)):r.getData(h))instanceof Date&&l instanceof Date?+i==+l:i==l)&&(o=Ds.TAIL)):(s=t.getItem(a+1))instanceof Ar&&((n=d?(u.setItem(s),d.evaluate(u)):s.getData(h))instanceof Date&&l instanceof Date?+n==+l:n==l)&&(o=Ds.HEAD)),o},getTextFromItem:function(t){var e=this.index().dataColumn();return ga._displayText(t,e)}},{_displayText:function(t,e){var i=e,n=0<=i.dataIndex()?t.getData(i.dataIndex()):void 0;if(i.isLookupDisplay()){var s=i.lookupSource();if(s){for(var r=i.lookupKeyFieldIds(),o=r.length,a=[],h=0;h<o;h++)a.push(t.getData(r[h]));l=void 0!==(l=s.lookup(a,i.valueSeparator()))?l:null!=i.textOfInvalid()?i.textOfInvalid():n}else var s=i.labelFieldIndex(),l=0<=s?t.getData(s):i.getLookupLabel(n)}else l=n,i.valueType&&i.valueType()==S.NUMBER&&null!=i.nanText()&&isNaN(l)?l=i.nanText():null!=l&&("string"==typeof l||"number"==typeof l)&&l.toString()&&(s=i.getDisplayRegExp())&&(n=i.displayReplace())?l=l.toString().replace(s,n):(s=i.displayCallback&&i.displayCallback())?l=s(i.grid().getHandler(),$.temp(i.grid(),t.index(),e).proxy(),l):null!=l&&"object"==typeof l&&(l=JSON.stringify(l));return null==l?"":String(l)},equalBlankRuntime:function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new Ec),this._equalBlankRuntime}}),pa=e("LiteralCell",ma,{init:function(t){this._super(t||"literalCell")},displayText:function(){return this._index.column().value()},value:function(){return this._index.column().getValue()}}),wa=e("SeriesCell",ma,{init:function(t){this._super(t||"seriesCell")},displayText:function(){return null},value:function(){var t=this.index().column();if(t instanceof Yl){var e,i=t.fields();if(i&&0<(e=i.length)){var n,s=this.item();for(vals=new Array(e),n=0;n<e;n++)0<=i[n]&&(vals[n]=s.getData(i[n]));return vals}}return[]}},{getText:function(t,e){return t?t.join(null!=e?e:","):""}}),va=e("RowGroupHeaderCell",ra,{init:function(t){this._super("rowGroupHeaderCell"),this._rowGroup=t},displayText:function(){var t=b(this.item(),C);return t?this._rowGroup.getHeaderText(t):""},value:function(){return null}}),Ca=e("RowGroupFooterCell",ra,{init:function(t){this._super("rowGroupFooterCell"),this._value=NaN,this._error=null,this._errorDetail=null,this._rowGroup=t},calculate:function(t){this._value=NaN,this._error=null;try{this._value=Ca.$_getValue(this.item()||t,this.index().dataColumn())}catch(t){this._error=t,this._errorDetail=t,oe(t)}},displayText:function(){return this._error?ra.ERROR:Ca.$_displayText(this.item(),this.index().valueColumn(),this._value)},value:function(){return this._value},level:function(){return this.index().item().level()}},{$_getValue:function(t,e){var i,n,s;if(e&&0<=e.dataIndex())return s=e.footer(),i=t.parent(),s.groupExpression()?((n=e.grid().rowGroupSummaryRuntime()).setColumn(e,e.grid().getSummarizer()),n.setItem(i),s.evaluateGroup(n)):s._groupCallback?(n=e.grid(),s._groupCallback(t._index,e.proxy(),n&&n.getHandler(),hf(i,!0))):!(i&&e&&e.grid().isGroupedColumn(e))||null==(s=e.grid()._rowGroup.getFooterText(i))?void 0:s},getValue:function(t,e){try{return Ca.$_getValue(t,e)}catch(t){return ra.ERROR}},$_displayText:function(t,e,i){var n,i=isNaN(i)?null:String(i);return i||(t=b(t.parent(),C),n=e.grid().rowGroup(),t&&e&&e.grid().isGroupedColumn(e)&&(n=n.getFooterText(t))?i=n:e&&(i=e.footer().groupText())),i}}),ya=e("RowGroupBarCell",ra,{init:function(t){this._super("rowGroupBarCell")},level:0,displayText:function(){return null},value:function(){return null}}),xa=e("RowGroupItemBarCell",ra,{init:function(t){this._super("rowGroupItemBarCell")},displayText:function(){return null},value:function(){return null}}),Ia=e("RowGroupHeadCell",ra,{init:function(t){this._super("rowGroupHeadCell")},index:function(){return $.NULL},displayText:function(){return null},value:function(){return null}}),ba=e("RowGroupFootCell",ra,{init:function(t){this._super("rowGroupFootCell")},displayText:function(){return null},value:function(){return null}}),Ea=e("RowGroupSummaryCell",ra,{init:function(t){this._super("rowGroupSummaryCell")},displayText:function(){return null},value:function(){return null}}),Ra=e("GridElement",is,{init:function(t,e){this._super(t,e),this._drawRect=new O,this._recycling=!1},destroy:function(){this._destroying=!0,this._drawRect=null,this._super()},grid:function(){for(var t=this._parent;t;){if(t instanceof T)return t;t=t._parent}return null},measure:function(t,e,i){return this._doMeasure(t,e,i)},measureHeight:function(t,e,i){return this._doMeasureHeight(t,e,i)},layoutContent:function(t){return this._doLayoutContent(t)},refresh:function(){this._doRefresh()},clip:function(t){this.getClientRect(this._drawRect),t.clipRect(this._drawRect)},_doDraw:function(t,e){e&&t.drawRectI(g.WHITE,null,this._drawRect),this._doRender(t,this._drawRect)},_doMeasure:function(t,e,i){return new l(e,i)},_doMeasureHeight:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){},_doRefresh:function(){},_doRender:function(t,e){},_drawStyledBorders:function(t,e,i){var n=i.borderLeftWidth(),s=i.borderTopWidth(),r=i.borderRightWidth(),o=i.borderBottomWidth();n&&(n/=2,t.drawLineI(i.borderLeft(),e.x+n,e.y,e.x+n,e.bottom())),s&&(s/=2,t.drawLineI(i.borderTop(),e.x,e.y+s,e.right(),e.y+s)),r&&(r=(r+1)/2,t.drawLineI(i.borderRight(),e.right()-r,e.y,e.right()-r,e.bottom())),o&&(o=(o+1)/2,t.drawLineI(i.borderBottom(),e.x,e.bottom()-o,e.right(),e.bottom()-o))}}),Rs=(Ra.prototype,e("VisualObjectElement",Ra,{init:function(t,e,i){this._super(t,e),this._model=i,this._clipBounds=null,this._dom&&(this._dom.style.pointerEvents="none")},destroy:function(){this._destroying=!0,this._clipBounds=null,this._model=null,this._super()},model:null,setClipBounds:function(t,e,i,n){var s=null,r=b(t,O);r?((s=this._clipBounds||new O).x=Math.max(r.x,this._x),s.setRight(Math.min(r.right(),this.right())),s.y=Math.max(r.y,this._y),s.setBottom(Math.min(r.bottom(),this.bottom())),s.x-=this._x,s.y-=this._y):isNaN(t)||((s=this._clipBounds||new O).x=Math.max(t,this._x),s.setRight(Math.min(t+i,this.right())),s.y=Math.max(e,this._y),s.setBottom(Math.min(e+n,this.bottom())),s.x-=this._x,s.y-=this._y),this._clipBounds=s},clip:function(t){this.getClientRect(this._drawRect),t.clipRect(this._clipBounds||this._drawRect)}})),Sa=(Rs.prototype,e("EmptyGridElement",Ra,{init:function(t,e){this._super(t,e)},_doRender:function(t,e){var i=this.grid(),n=i.displayOptions().emptyMessage(),s=i._productName,i=i.body().emptyStyles().background();i&&t.drawRectI(i,null,e),(n||s)&&(e.inflate(-10,-10),n&&t.drawTextRect(null,g.BLACK,n,e,Tn.LEFT,kn.TOP),s)&&t.drawTextRect(null,g.BLACK,s,e,Tn.LEFT,kn.BOTTOM)}})),Ta=e("PanelElement",Rs,{init:function(t,e){this._super(t,"panelView",e)},_doMeasure:function(t,e,i){return l.create(e,this.model().minHeight())},_doRender:function(t,e){var i=this.model().styles(),n=i.background();n&&t.drawRectI(n,null,e),this._drawStyledBorders(t,e,i)}}),ka=e("HeaderElement",Rs,{init:function(t,e,i,n){this._super(t,"headerView",e),this._fixed=i,this._rightFixed=n,this._cells={},this._focusedColumn=null},destroy:function(){for(var t in this._destroying=!0,this._cells)this._cells[t]=null;this._cells=null,this._focusedColumn=null,this._super()},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},$_getChildAt:function(t,e,i,n){for(var s=0,r=t.childCount();s<r;s++){var o=t.getChild(s);if(o.isVisible()){if(n&&o instanceof qa){var a=this.$_getChildAt(o,e-o.x(),i-o.y(),!0);if(a)return a}if(o.containsInBounds(e,i))return o}}return null},getCellAt:function(t,e,i){return this.$_getChildAt(this,t,e,i)},findCell:function(t,e){if(t){var i=t.root(),n=this._cells[i.$_hash];if(n&&(n.isVisible()||e))return n=i!=t?n.findCell(t,e):n}return null},_doMeasure:function(t,e,i){return l.create(e,this.model().minHeight())},_doRender:function(t,e){t.drawRectI(g.WHITE,null,e);var i,n,s=this.grid().fixedOptions(),r=s.colBarWidth();0<r&&this.isFixed()&&(i=(s=s.colBarStyles()).background(),n=s.borderRight(),s=s.borderLeft(),this.isRightFixed()?e.setRight(r):e.setLeft(e.right()-r),i&&t.drawRectI(i,null,e),n&&t.drawVertLineI(n,e.y,e.bottom(),e.right()-1),s)&&this._rightFixed&&t.drawVertLineI(s,e.y,e.bottom(),e.x)},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},$_checkCell:function(t){var e=b(t,Za);e&&e.setFocused(this._focusedColumn==e.index().column()),t instanceof Ja&&this.$_refreshCells(t)},$_refreshCells:function(t){for(var e=0,i=t.childCount();e<i;e++)this.$_checkCell(t.getChild(e))},_doRefresh:function(){for(var t in this._focusedColumn=this.grid().focusedIndex().column(),this._cells)this.$_checkCell(this._cells[t])},_prepareCells:function(t){for(var e=this.grid(),i=e.header(),n=(e.isColumnLayoutChanged(),this.hideAll(),t.firstCol(this._fixed,this._rightFixed)),s=t.lastCol(this._fixed,this._rightFixed),r=n;r<=s;r++){var o=t.getColumn(r),a=this._cells[o.$_hash],o=(a||(a=o instanceof R?new Ja(this._dom):new Za(e,this._dom),this._cells[o.$_hash]=a,this.addElement(a)),a.setVisible(!0),$.temp(e,-1,o)),o=i.getCell(o);a.updateCell(o)}},_layoutCells:function(t){for(var e=t.firstCol(this._fixed,this._rightFixed),i=t.lastCol(this._fixed,this._rightFixed),n=e;n<=i;n++){var s=this._cells[t.getColumn(n).$_hash],r=t.getColumnBounds(n);r.height=this.height(),s.setRect(r),s.layoutContent(t)}}}),Ss=e("SummaryElement",Rs,{init:function(t,e,i,n,s){this._super(t,e,i),this._fixed=n,this._rightFixed=s,this._cells=[],this._mergeCells={}},destroy:function(){this._destroying=!0,this._cells=null,this._mergeCells=null,this._super()},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},findCell:function(t,e){if(e){var i=e.root(),t=this._cells[t]&&this._cells[t][i.$_hash];if(t&&t.isVisible())return t=i!=e?t.findCell(e):t}return null},_doMeasure:function(t,e,i){return l.create(e,this.model().minHeight())},_doRender:function(t,e){t.drawRectI(g.WHITE,null,e);var i,n,s=this.grid().fixedOptions(),r=s.colBarWidth();this.isFixed()&&0<r&&(i=(s=s.colBarStyles()).background(),n=s.borderRight(),s=s.borderLeft(),this.isRightFixed()?e.setRight(r):e.setLeft(e.right()-r),i&&t.drawRectI(i,null,e),n&&t.drawVertLine(n,e.y,e.bottom(),e.right()-1),s)&&this._rightFixed&&t.drawVertLineI(s,e.y,e.bottom(),e.x)},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},_doRefresh:function(){},_prepareCells:function(t){this.grid().isColumnLayoutChanged(),this.hideAll();var e=t.firstCol(this._fixed,this._rightFixed),i=t.lastCol(this._fixed,this._rightFixed),n=this.$_getMergeManager(),s=0<n.count(),r=this.model().count();for(l=e;l<=i;l++)for(var o=s&&n.findRoomBy(t.getColumn(l)),a=0;a<r;a++)this._prepareCell(t,a,l,s,o);if(s)for(var h=n.getRoomNames(),l=0;l<h.length;l++)if((o=s&&n.getRoom(h[l]))&&(e>o.base()&&e<=o.last()||i<o.base()&&i>=o.start()))for(a=0;a<r;a++)this._prepareCell(t,a,o.base(),!0,o)},_prepareCell:function(t,e,i,n,s){var r=this.grid(),o=this.model(),t=t.getColumn(i),a=this._cells[e],h=(a||this._cells.push(a={}),a[t.$_hash]),a=(h||(h=t instanceof R?this.$_createGroupCellElement():this.$_createCellElement(),a[t.$_hash]=h,this.addElement(h)),h.setVisible(!n||!s||s.base()==i),$.temp(r,-1,t)),n=o.getCell(a,e);h.updateCell(n)},_layoutCells:function(t){var e,i,n=t.firstCol(this._fixed,this._rightFixed),s=t.lastCol(this._fixed,this._rightFixed),r=(this.grid(),this.$_getMergeManager()),o=0<r.count(),a=this.model().count(),h=B(this.height()/a);for(m=n;m<=s;m++)for(i=t.getColumn(m),e=0;e<a;e++){var l,d,u=this._cells[e][i.$_hash],c=t.getColumnBounds(m);o&&(_=r.findRoomBy(i))&&(l=t.getColumnBounds(_.start()),d=t.getColumnBounds(_.last()),c.x=l.x,c.width=d.right()-c.x),c.y=h*e,c.height=e<a-1?h:this.height()-h*e,u.setRect(c),u.layoutContent(t,e)}if(o)for(var _,f=r.getRoomNames(),m=0;m<f.length;m++)if((_=r.getRoom(f[m]))&&(n>_.base()&&n<=_.last()||s<_.base()&&s>=_.start()))for(e=0;e<a;e++)(c=t.columnBounds(_.start())).height=this.height(),d=t.columnBounds(_.last()),c.width=d.right()-c.x,c.y=h*e,c.height=e<a-1?h:this.height()-h*e,(u=this._cells[e][t.getColumn(_.base()).$_hash]).setRect(c),u.layoutContent(t)}}),Da=e("FooterElement",Ss,{init:function(t,e,i,n){this._super(t,"footerView",e,i,n)},$_getMergeManager:function(){return this.grid().footerMergeManager()},$_createGroupCellElement:function(){return new nh(this._dom)},$_createCellElement:function(){return new th(this._dom)}}),Ba=e("HeaderSummaryElement",Ss,{init:function(t,e,i,n){this._super(t,"headerSummaryView",e,i,n)},destroy:function(){this._super()},$_getMergeManager:function(){return this.grid().headerSummaryMergeManager()},$_createGroupCellElement:function(){return new sh(this._dom)},$_createCellElement:function(){return new eh(this._dom)}}),Oa=e("IndicatorElement",Rs,{init:function(t,e){this._super(t,"IndicatorView",e),this._cells=[],this._fixedCount=0},refreshSelection:function(t){},_doMeasure:function(t,e,i){var n,s,t=this.grid(),r=this.model(),o=r.width();return o<=0&&(n=r,o=(s=(t=t).itemCount())<=0?0:(s=new Array(String(s).length+1).join("8"),n=n.styles(),t.container().measureText(n.font(),s)),0<(t=r.maxWidth())&&t<o&&(o=t),o=Math.max(r.minWidth(),o)),l.create(o,i)},_doRender:function(t,e){var i=this.model().styles(),n=i.background();n&&t.drawRectI(n,null,e),this._drawStyledBorders(t,e,i)},_doLayoutContent:function(t){var e,i,n,s,r=this.grid(),o=this.model(),a=this.width(),h=t.topIndex(),l=t.fixedItemCount(),d=t.itemCount();for(this._fixedCount=l;this.childCount()<l+d;)e=0<this._cells.length?this._cells.pop():this._createCell(),this.addElement(e);for(;this.childCount()>l+d;)(e=this.removeElementAt(this.childCount()-1)).validate(!0),this._cells.push(e);for(n=this.childCount(),i=0;i<n;i++)e=this.getChild(i),s=$.temp(r,i<l?i:i+h),s=o.getCell(s),e.updateCell(s),(s=t.getItemBounds(i)).x=0,s.width=a,e.setRect(s)},_doRefresh:function(){for(var t=this.grid(),e=t.indicator(),i=t.layoutManager(),n=i.fixedItemCount(),s=this.childCount(),r=0;r<s;r++){var o=r<n?r:r+i.topIndex(),o=$.temp(t,o),o=e.getCell(o);this.getChild(r).updateCell(o)}},_createCell:function(){return new ph(this._dom)}}),Ma=e("StateBarElement",Rs,{init:function(t,e){this._super(t,"stateBarView",e),this._cells=[],this._fixedCount=0},refreshSelection:function(t){},_doMeasure:function(t,e,i){return l.create(this.model().width(),i)},_doRender:function(t,e){var i=this.model().styles(),n=i.background();n&&t.drawRectI(n,null,e),this._drawStyledBorders(t,e,i)},_doLayoutContent:function(t){var e,i,n,s,r=this.grid(),o=this.model(),a=this.width(),h=t.topIndex(),l=t.fixedItemCount(),d=t.itemCount();for(this._fixedCount=l;this.childCount()<l+d;)e=0<this._cells.length?this._cells.pop():this._createCell(),this.addElement(e);for(;this.childCount()>l+d;)(e=this.removeElementAt(this.childCount()-1)).validate(!0),this._cells.push(e);for(n=this.childCount(),i=0;i<n;i++)e=this.getChild(i),s=$.temp(r,i<l?i:i+h),s=o.getCell(s),e.updateCell(s),(s=t.getItemBounds(i)).x=0,s.width=a,e.setRect(s)},_doRefresh:function(){},_createCell:function(){return new wh(this._dom)}}),Fa=e("CheckBarElement",Rs,{init:function(t,e){this._super(t,"checkBarView",e),this._cells=[],this._fixedCount=0},refreshSelection:function(t){},_doMeasure:function(t,e,i){return l.create(this.model().width(),i)},_doRender:function(t,e){var i=this.model().styles(),n=i.background();n&&t.drawRectI(n,null,e),this._drawStyledBorders(t,e,i)},_doLayoutContent:function(t){var e,i,n,s,r,o=this.grid(),a=this.width(),h=this.model(),l=h.isExclusive(),d=h.isShowGroup(),u=(h.checkImageUrl(),h.unCheckImageUrl(),h.isDrawCheckBox()),c=h.radioImageUrl(),_=h.unCheckRadioImageUrl(),f=t.topIndex(),m=t.fixedItemCount(),g=t.itemCount();for(this._fixedCount=m;this.childCount()<m+g;)e=0<this._cells.length?this._cells.pop():this._createCell(),this.addElement(e);for(;this.childCount()>m+g;)(e=this.removeElementAt(this.childCount()-1)).validate(!0),this._cells.push(e);for(n=this.childCount(),i=0;i<n;i++)r=$.temp(o,i<m?i:i+f),s=h.getCell(r),(e=this.getChild(i)).setMarkVisible(d||0<=r.dataRow()),e.setExclusive(l),e.setDrawCheckBox(u),e.setRadioImageUrl(c),e.setUnCheckRadioImageUrl(_),e.updateCell(s),(r=t.getItemBounds(i)).x=0,r.width=a,e.setRect(r)},_doRefresh:function(){},_createCell:function(){return new Ih(this._dom)}}),Na=e("GridBodyElement",Rs,{init:function(t,e,i,n){this._super(t,"gridBodyView",e),this._fixed=i,this._rightFixed=n,this._lineScrolled=!1,this._horzScrolling=!1,this._fixedCount=0,this._items=[],this._rowViews=[],this._fill=new g(16777215)},destroy:function(){this._destroying=!0,this._items=null,this._rowViews=null,this._fill=null,this._super()},empty:!1,isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},isLineScrolled:function(){return this._lineScrolled},checkResourceColumn:function(t,e){},checkResourceUse:function(t,e){},clearItems:function(){this._items=[]},addItem:function(t){this._items.indexOf(t)<0&&this._items.push(t)},findRowView:function(t){for(var e,i=this.getChildren()||[],n=0,s=i.length;n<s;n++)if((e=i[n])instanceof Sh&&e._item._index==t)return e;return null},findFirstRow:function(){var t=this.childCount();if(0<t){for(var e=null,i=1;i<t;i++){var n=this.getChild(i);n instanceof Sh&&!e&&n.itemIndex()<e.itemIndex()&&(e=n)}return e}return null},_doMeasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this._lineScrolled=!1,this._super(t);for(var e,i,n,s,r,o,a=this._fixed,h=this._rightFixed,l=this.grid(),d=this.childCount(),u=this._items,c=u.length,_=0;_<d;_++)this.getChild(_)._recycling=!1;for(;(e=this.childCount())<c;)i=u[e],n=this.$_borrowView(i),this.addElement(n);for(;(e=this.childCount())>c;)this.$_removeView(e-1);for(this._fixedCount=t.fixedItemCount(),s=l.body().styles(),o=l.topIndex(),_=e=0;_<c;_++)i=u[_],(n=this.getChild(_)).updateElement(i,s),r=(r=i.index())<this._fixedCount?r:r-o,r=t.itemBounds(r,a,h),n.setRect(r),(!n._recycling||t.isColumnMerged&&this._lineScrolled&&(_<=1||c-2<=_))&&(n._layoutIndex=e++,n.layoutContent(t))},_doRender:function(t,e){var i,n,s;this.isEmpty()||(s=(n=(i=this.grid()).fixedOptions()).colBarWidth(),t.drawRect(g.WHITE,null,e),this.isFixed()&&0<s&&(this.isRightFixed()?e.setRight(s):e.setLeft(e.right()-s),e.height=i.layoutManager().fixedBounds().height,i=(s=n.colBarStyles()).borderRight(),n=s.borderLeft(),(s=s.background())&&t.drawRect(s,null,e),i&&t.drawVertLineI(i,e.y,e.bottom(),e.right()-1),n)&&this._rightFixed&&t.drawVertLineI(n,e.y,e.bottom(),e.x))},_doRefresh:function(){},$_removeView:function(t){t=this.removeElementAt(t);t.validate(!0),this._rowViews.push(t)},$_borrowView:function(t){var e=(e=this._rowViews.pop())||this.grid().delegate().borrowItemView(t,this._fixed,this._rightFixed);return Qt(null!=e,"view is null"),e._recycling=!1,e}}),La=e("GridLinesElement",ss,{init:function(t,e){this._super(t,"gridLinesView"),this._grid=e},_doDraw:function(t){var e,i,n,s,r,o=this._grid,a=o.layoutManager(),h=a.bodyBounds(),l=(h.setRight(h.right()+a.rfixedWidth()),a.footerBounds().y),d=Math.min(h.right(),a.gridBounds().right()),u=o.fixedOptions();0<a.fixedHeight()&&0<u.rowBarHeight()&&(s=Math.min(a.gridBounds().right(),h.right()),(r=h.y+a.fixedHeight())<l)&&(i=u.rowBarStyles().background(),n=u.rowBarStyles().borderBottom(),i&&(e=Math.min(u.rowBarHeight(),l-r),t.drawBoundsI(i,null,0,r,s,e)),(r+=u.rowBarHeight()-1)<l)&&n&&0<n.width()&&t.drawLineI(n,0,r,s,r),(n=o.body().styles().line())&&0<n.width()&&(s=h.right(),r=h.bottom(),s<=d&&0<a.columnCount()+a.fixedColCount()&&t.drawLineI(n,s-1,0,s-1,r),0<o.itemCount())&&a.itemCount()==a.fullItemCount()&&r<l&&t.drawLineI(n,0,r-1,d,r-1)}}),Aa=e("GridDebugElement",ss,{init:function(t,e){this._super(t,"gridDebugView"),this._grid=e,this._drawRect=new O,this._strokes={grid:f.RED,body:f.BLUE,fixed:f.RED,nonfixed:f.GREEN}},destroy:function(){this._destroying=!0,this._grid=null,this._super()},gridBounds:!1,bodyBounds:!1,fixedBounds:!1,nonfixedBounds:!1,_doDraw:function(t,e){this.getClientRect(this._drawRect),this._doRender(t,this._drawRect)},_doRender:function(t,e){var i,n=this._grid.layoutManager();this._gridBounds&&(i=n.gridBounds(),t.drawRect(null,this._strokes.grid,i)),this._bodyBounds&&(i=n.bodyBounds(),ft("### B O D Y: "+i.x+", "+i.width),t.drawRect(null,this._strokes.body,i)),this._fixedBounds&&(i=n.fixedBounds(),t.drawRect(null,this._strokes.fixed,i)),this._nonfixedBounds&&(i=n.nonfixedBounds(),t.drawRect(null,this._strokes.nonfixed,i))}}),Va=e("HandleElement",is,{init:function(t,e,i){this._super(t,i),this._owner=e},clickable:!1,owner:function(){return this._owner},propertyChanged:function(t,e){this.invalidate()},hoverChanged:function(t){this.invalidate()}}),Kr=e("CellHandle",Va,{init:function(t,e,i){this._super(t,e,i)},cellView:function(){return this._owner}}),Pa=e("HeaderCellHandle",Kr,{init:function(t,e,i){this._super(t,e,i)},destroy:function(){this._destroying=!0,this._options=null,this._super()}}),Ha=e("HeaderSortHandle",Pa,{init:function(t,e,i){this._super(e,i,"sortHandle"),this.setMouseEnabled(!1),this.setClickable(!1),this._grid=t,this._options=t.sortingOptions(),this._options._handleFill&&(this._fill=this._options._handleFill),this._options._handleNoneFill&&(this._noneFill=this._options._handleNoneFill),this._options._hoveredHandleFill&&(this._hoveredFill=this._options._hoveredHandleFill),this._options._hoveredHandleNoneFill&&(this._hoveredNoneFill=this._options._hoveredHandleNoneFill),this._options._handleBorderPen&&(this._border=this._options._handleBorderPen)},sortOrder:-1,sortDir:ps.ASCENDING,fill:g.GRAY,noneFill:g.EMPTY,hoveredFill:g.GRAY,hoveredNoneFill:g.EMPTY,border:f.GRAY,_doDraw:function(t){var e,i,n,s,r,o=this._options;(o.visibility!=fs.HOVERED||this._owner.isHovered())&&(e=this.getClientRect(),i=this.sortOrder(),o.isImageHandle()?this.$_drawHandleImage(t,e,i):this.$_drawHandle(t,e,i),o.isShowSortOrder())&&0<=i&&(o=o._sortOrderStyles,e.setLeft(12),e.y=(e.height-15)/2,e.height=13,n=o&&o.font()||this._owner.font(),s=o&&o.foreground()||this._owner.foreground(),r=o.textAlignment(),o=o.lineAlignment(),r=r?r==D.FAR?"right":r==D.NEAR?"left":"center":"left",o=o?o==D.FAR?"bottom":o==D.NEAR?"top":"middle":"top",t.drawTextRect(n,s,(i+1).toString(),e,r,o))},$_drawHandle:function(t,e,i){var n=this._options._showSortOrder?12:0,n=(e.width-n)/2,e=(e.height-9)/2,n=i<0||this.sortDir()==ps.ASCENDING?[n,e,n-4,9+e-1,4+n,9+e-1,n,e]:[n-4,e,4+n,e,n,9+e-1,n-4,e],e=this.isHovered()?i<0?this._hoveredNoneFill:this._hoveredFill:i<0?this._noneFill:this._fill;t.drawPolygonArray(e,this._border,n)},$_drawHandleImage:function(t,e,i){var n=this.sortDir(),s=this.isHovered(),r=this._options.handleImages(),o=this._options._showSortOrder?12:0,i=i<0?s?r._hoveredNone:r._none:n==ps.ASCENDING?s?r._hoveredAscending:r._ascending:s?r._hoveredDescending:r._descending;i&&(n=this._grid.getImage(i),s=Math.min(n.width,e.width-o),r=Math.min(n.height,e.height),t.drawImage(n,(e.width-o-s)/2+o,(e.height-r)/2,s,r))},isHovered:function(){return this._super()||this._owner&&this._owner.isHovered()}}),Ga=e("HeaderFilterHandle",Pa,{init:function(t,e,i){this._super(e,i,"filterHandle"),this.setClickable(!0),this._grid=t,this._options=t.filteringOptions(),this._options._handleFill&&(this._fill=this._options._handleFill),this._options._handleNoneFill&&(this._noneFill=this._options._handleNoneFill),this._options._hoveredHandleFill&&(this._hoveredFill=this._options._hoveredHandleFill),this._options._hoveredHandleNoneFill&&(this._hoveredNoneFill=this._options._hoveredHandleNoneFill),this._options._handleBorderPen&&(this._border=this._options._handleBorderPen)},fill:g.GRAY,noneFill:g.EMPTY,hoveredFill:g.GRAY,hoveredNoneFill:g.EMPTY,border:f.GRAY,isClickable:function(){return!0},_doDraw:function(t){var e=this.cellView();e&&(e=e.index().dataColumn())&&(this._options.isImageHandle()?this.$_drawHandleImage(t,this.clientRect(),e):this.$_drawHandle2(t,this.clientRect(),e))},$_drawHandle2:function(t,e,i){var n=e.width/2,e=(e.height-12)/2,s=[n-5,e,5+n,e,n,12+e-4+2,n-5,e],i=i.isFiltered(),i=this.isHovered()?i?this._hoveredFill:this._hoveredNoneFill:i?this._fill:this._noneFill;t.drawPolygonArray(i,this._border,s),t.drawLineI(this._border,n-1,12+e-4-1,n-1,12+e+1),t.drawLineI(this._border,n,12+e-4-1,n,12+e+1)},$_drawHandleImage:function(t,e,i){var i=i.isFiltered(),n=this.isHovered(),s=this._options.handleImages(),i=i?n?s._hoveredFill:s._fill:n?s._hoveredNone:s._none,n=this._grid.getImage(i);n&&(s=Math.min(n.width,e.width),i=Math.min(n.height,e.height),t.drawImage(n,(e.width-s)/2,(e.height-i)/2,s,i))},setHovered:function(t){this._super(t),this._owner.invalidate(!0,!0)}}),$a=e("HeaderCheckHandle",Pa,{init:function(t,e,i){this._super(e,i,"checkHandle"),this.setClickable(!0),this._grid=t,this._options=t.columnHeaderOptions(),this._options._checkFill&&(this._fill=this._options._checkFill),this._options._checkNoneFill&&(this._noneFill=this._options._checkNoneFill),this._options._hoveredCheckFill&&(this._hoveredFill=this._options._hoveredCheckFill),this._options._hoveredCheckNoneFill&&(this._hoveredNoneFill=this._options._hoveredCheckNoneFill),this._options._checkBorderPen&&(this._border=this._options._checkBorderPen)},checked:!1,fill:g.DKGRAY,noneFill:g.EMPTY,hoveredFill:g.DKGRAY,hoveredNoneFill:g.EMPTY,border:f.GRAY,_doDraw:function(t){var e=this.getClientRect();this._options.isImageCheckHandle()?this.$_drawImageCheck(t,e):this.$_drawCheck(t,e)},$_drawCheck:function(t,e){var i=g.WHITE;i&&t.drawRectI(i,this._border,e);t.drawBoundsI(null,this._border,e.x,e.y,12,12),e.y+=2,i=this.isHovered()?this.isChecked()?this._hoveredFill:this._hoveredNoneFill:this.isChecked()?this._fill:this._noneFill,Be(t,i,e,11)},$_drawImageCheck:function(t,e){var i=this.isChecked(),n=this.isHovered(),s=this._options.checkImages(),i=i?n?s._hoveredFill:s._fill:n?s._hoveredNone:s._none,n=this._grid.getImage(i);n&&(s=Math.min(n.width,e.width),i=Math.min(n.height,e.height),t.drawImage(n,(e.width-s)/2,(e.height-i)/2,s,i))},setHovered:function(t){this._super(t)}}),Ua=e("HeaderImageHandle",Pa,{init:function(t,e){this._super(t,e,"imageHandle"),this.setMouseEnabled(!0),this.setClickable(!0)},image:null,_doDraw:function(t){var e=this._image;e&&0<e.width&&0<e.height&&t.drawImage(e,0,0,e.width,e.height)}}),Wa=e("GroupRemoveButtonHandle",Pa,{init:function(t,e,i){this._super(e,i,"removeButtonHandle"),this._grid=t,this.setMouseEnabled(!0),this.setClickable(!0),this._options=t.groupingOptions()&&t.groupingOptions().removeButton(),this._options._fill&&(this._fill=this._options._fill),this._options._hoveredFill&&(this._hoveredFill=this._options._hoveredFill),this._size=this._options._size||12,this._buttonGap=this._options.buttonGap()},fill:g.DKGRAY,hoveredFill:g.DKGRAY,size:0,buttonGap:4,isClickable:function(){return!0},_doDraw:function(t){var e=this.getClientRect();this.$_drawCloseMark(t,e)},$_drawCloseMark:function(t,e){var i=this._size,n=this.isHovered()?this._hoveredFill:this._fill;Oe(t,n,e,i)},setHovered:function(t){this._super(t)}}),za=e("HeaderPopupHandle",Pa,{init:function(t,e,i){this._super(e,i,"popupHandle"),this.setClickable(!0),this._grid=t,this._options=t.columnHeaderOptions()},pen:f.GRAY,hoveredPen:f.DKGRAY,border:f.GRAY,isClickable:function(){return!0},_doDraw:function(t){var e,i,n,s=this.cellView();s&&s.index().column()&&(this._options._popupMenuPen&&(this._pen=this._options._popupMenuPen),this._options._hoveredPopupMenuPen&&(this._hoveredPen=this._options._hoveredPopupMenuPen),s=isNaN(s=parseInt(this._options.popupMenuWidth()))?7:s,e=(i=this.getClientRect()).x+(i.width-s)/2,i=i.y+(i.height-13+3)/2,s+=e,n=this.isHovered()?this._hoveredPen:this._pen,t.drawHLine(n,i,e,s),t.drawHLine(n,i+=5,e,s),t.drawHLine(n,i+=5,e,s))},setHovered:function(t){this._super(t),this._owner.invalidate(!0,!0)}}),Ka=e("DataCellExpandHandle",Kr,{init:function(t,e){this._super(t,e,"dataCellExpandHandle")},expanded:!1,background:null,group:function(){var t=b(this.cellView(),Xh);return t?t.mergeRoom().group():null},isClickable:function(){return!0},_doDraw:function(t){var e=this.clientRect(),i=this._background||g.DKGRAY;(this.isExpanded()?De:ke)(t,e,9,i,g.WHITE)}}),Ya=e("CellElement",Ra,{init:function(t,e){this._super(t,e),this._grid=null,this._fixed=!1,this._recycling=!1,this._index=new $,this._renderRect=new O,this._textAlign="near",this._lineAlign="middle"},destroy:function(){this._destroying=!0,this._grid=null,this._font=null,this._index=null,this._renderREct=null,this._super()},background:g.WHITE,foreground:g.BLACK,font:null,border:null,borderLeft:null,borderTop:null,borderRight:null,borderBottom:null,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,line:null,figureBackground:g.DKGRAY,figureInactiveBackground:g.LTGRAY,figureBorder:null,figureSize:null,figureName:null,figureState:null,textAlignment:D.NEAR,lineAlignment:D.CENTER,textWrap:Ms.NONE,pushed:!1,mouseEntered:!1,pressed:!1,clickable:!1,index:null,isFixed:function(){return this._fixed},setIndex:function(t){$.areEquals(this._index,t)||(this._index.assign(t),this.invalidate())},getItem:function(){return this._index.item()},item:function(){return this._index.item()},setTextAlignment:function(t){if(t!=this._textAlignment){switch(this._textAlignment=t){case D.FAR:this._textAlign="right";break;case D.NEAR:this._textAlign="left";break;default:this._textAlign="center"}this.invalidate()}},setLineAlignment:function(t){if(t!=this._lineAlignment){switch(this._lineAlignment=t){case D.FAR:this._lineAlign="bottom";break;case D.NEAR:this._lineAlign="top";break;default:this._lineAlign="middle"}this.invalidate()}},setFont:function(t){var e=this._font;t==e||t&&e&&t.font==e.font&&t.size==e.size&&t.underline==e.underline&&t.linethrough==e.linethrough||(this._font=t,this.invalidate())},borderWidth:function(){return this._border?this._border.width():0},borderLeftWidth:function(){return this._borderLeft?this._borderLeft.width():0},borderRightWidth:function(){return this._borderRight?this._borderRight.width():0},borderHorzWidth:function(){return(this._borderLeft?this._borderLeft.width():0)+(this._borderRight?this._borderRight.width():0)},borderTopWidth:function(){return this._borderTop?this._borderTop.width():0},borderBottomWidth:function(){return this._borderBottom?this._borderBottom.width():0},borderVertWidth:function(){return(this._borderTop?this._borderTop.width():0)+(this._borderBottom?this._borderBottom.width():0)},paddingHorz:function(){return this._paddingLeft+this._paddingRight},paddingVert:function(){return this._paddingTop+this._paddingBottom},textAlign:function(){return this._textAlign},lineAlign:function(){return this._lineAlign},canHovering:function(t){return!0},setMouseEntered:function(t){t!=this._mouseEntered&&(this._mouseEntered=t,this.canHovering(t))&&(this._doLayoutHandles(),this.invalidate(!1,!0))},setPressed:function(t){t!=this._pressed&&(this._pressed=t,this.invalidate(!1,!0))},updateCell:function(t){this._grid=this.grid(),this.setIndex(t.index()),this._doPrepareValue(t),this._doPrepareElement(t.styles()),this._doUpdateContent(t)},inflatePadding:function(t){return t.x+=this._paddingLeft,t.width-=this._paddingLeft+this._paddingRight,t.y+=this._paddingTop,t.height-=this._paddingTop+this._paddingBottom,t},deflatePadding:function(t){return t.x-=this._paddingLeft,t.width+=this._paddingLeft+this._paddingRight,t.y-=this._paddingTop,t.height+=this._paddingTop+this._paddingBottom,t},deflatePadding2:function(t){return t.x+=this._paddingLeft,t.width-=this._paddingLeft+this._paddingRight,t.y+=this._paddingTop,t.height-=this._paddingTop+this._paddingBottom,t},inflatePadding2:function(t){return t.x-=this._paddingLeft,t.width+=this._paddingLeft+this._paddingRight,t.y-=this._paddingTop,t.height+=this._paddingTop+this._paddingBottom,t},getButtonWidth:function(){return 0},propertyChanged:function(t,e){this.invalidate()},_doLayoutContent:function(t){this._doLayoutHandles()},_doRender:function(t,e){t.drawTextRect(null,g.BLACK,"Cell:"+this._index.toString(),e,Tn.CENTER)},_doPrepareValue:function(t){},_doPrepareElement:function(t){this.setBackground(t.background()),this.setForeground(t.foreground()),this.setFont(t.font()),this.setBorder(t.border()),this.setBorderLeft(t.borderLeft()),this.setBorderTop(t.borderTop()),this.setBorderRight(t.borderRight()),this.setBorderBottom(t.borderBottom()),this.setPaddingLeft(t.paddingLeft()),this.setPaddingTop(t.paddingTop()),this.setPaddingRight(t.paddingRight()),this.setPaddingBottom(t.paddingBottom()),this.setLine(t.line()),this.setFigureBackground(t.figureBackground()),this.setFigureInactiveBackground(t.figureInactiveBackground()),this.setFigureBorder(t.figureBorder()),this.setFigureSize(t.figureSize()),this.setFigureName(t.figureName()),this.setFigureState(t.figureState()),this.setTextAlignment(t.textAlignment()),this.setLineAlignment(t.lineAlignment()),this.setTextWrap(t.textWrap())},_doUpdateContent:function(t){},_doLayoutHandles:function(){},_drawBorders:function(t,e){var i=this._borderLeft?this._borderLeft.width():0,n=this._borderTop?this._borderTop.width():0,s=this._borderRight?this._borderRight.width():0,r=this._borderBottom?this._borderBottom.width():0;i&&(i=m(i/2),t.drawVertLineI(this._borderLeft,e.y,e.bottom(),e.x+i)),n&&(n=m(n/2),t.drawHorzLineI(this._borderTop,e.x,e.right(),e.y+n)),s&&(s=m((s+1)/2),t.drawVertLineI(this._borderRight,e.y,e.bottom(),e.right()-s)),r&&(r=m((r+1)/2),t.drawHorzLineI(this._borderBottom,e.x,e.right(),e.bottom()-r))},_drawBordersWithBlank:function(t,e,i){var n=this._borderLeft?this._borderLeft.width():0,s=!this._borderTop||i!=Ds.NONE&&i!=Ds.HEAD?0:this._borderTop.width(),r=this._borderRight?this._borderRight.width():0,i=!this._borderBottom||i!=Ds.NONE&&i!=Ds.TAIL?0:this._borderBottom.width();n&&(n=m(n/2),t.drawVertLineI(this._borderLeft,e.y,e.bottom(),e.x+n)),s&&(s=m(s/2),t.drawHorzLineI(this._borderTop,e.x,e.right(),e.y+s)),r&&(r=m((r+1)/2),t.drawVertLineI(this._borderRight,e.y,e.bottom(),e.right()-r)),i&&(i=m((i+1)/2),t.drawHorzLineI(this._borderBottom,e.x,e.right(),e.bottom()-i))},_getRenderRect:function(t){var e=this._renderRect,i=this._borderLeft?B((this._borderLeft.width()+1)/2):0,n=this._borderTop?B((this._borderTop.width()+1)/2):0;return t?e.set(t.x+i,t.y+n,t.width-i-(this._borderRight?B((this._borderRight.width()+1)/2):0),t.height-n-(this._borderBottom?B((this._borderBottom.width()+1)/2):0)):e.set(i,n,this.width()-i-(this._borderRight?B((this._borderRight.width()+1)/2):0),this.height()-n-(this._borderBottom?B((this._borderBottom.width()+1)/2):0)),e}}),Xa=Ya.prototype,qa=e("GroupCellElement",Ya,{init:function(t,e){this._super(t,e),this._cells={},this._fill=new g(4293980400)},destroy:function(){for(var t in this._destroying=!0,this._cells)this._cells[t]=null;this._cells=null,this._fill=null,this._super()},focused:!1,group:function(){return b(this._index._column,R)},findCell:function(t){for(var e,i=this.childCount(),n=0;n<i;n++)if((e=this.getChild(n)).isVisible()){if(e.index().column()===t)return e;if(e instanceof qa&&(e=e.findCell(t)))return e}return null},getCellBounds:function(t,e){e?e.copy(t.bounds()):e=t.bounds();for(var i=this.index().column(),n=t.index().column().group(),s=t;n&&n!=i;)s=s.parent(),e.x+=s.x(),e.y+=s.y(),n=n.group();return e},$_getChild:function(t,e,i,n){for(var s,r,o=t.childCount(),a=0;a<o;a++){if(s=t.getChild(a),n&&s instanceof qa&&(r=this.$_getChild(s,e-s.x(),i-s.y(),n)))return r;if(s.containsInBounds(e,i))return s}return null},getCellAt:function(t,e,i){return this.$_getChild(this,t,e,i)},_updateCell:function(t){this._super(t),this._doUpdateGroup(t.index().column())},_doMeasure:function(t,e,i){return new l(e,t.header().minHeight())},_doRender:function(t,e){this.childCount()<=0&&(t.drawRect(this._fill,null,e),this._drawBorders(t,e))},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},_doUpdateGroup:function(t){},_getCell:function(t){return this._cells[t.$_hash]},$_setCell:function(t,e){this._cells[t.$_hash]=e},_prepareCells:function(t){},_layoutCells:function(t){}},{getRootOf:function(t){var e=b(t.parent(),qa);if(e)for(;e;){var i=b(e.parent(),qa);if(!i)return e;e=i}return null}}),Ss=e("ValueCellElement",Ya,{init:function(t,e){this._super(t,e),this._numberFormatter=null,this._datetimeWriter=null,this._booleanFormatter=null},focused:!1,text:null,prefix:null,suffix:null,numberFormat:null,datetimeFormat:null,booleanFormat:null,setFocused:function(t){t!=this._focused&&(this._focused=t,this.invalidate())},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new Me(t):null,this.invalidate())},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new Re(t):null,this.invalidate())},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new Fe(t):null,this.invalidate())},numberFormatter:function(){return this._numberFormatter},booleanFormatter:function(){return this._boolFormatter},datetimeWriter:function(){return this._datetimeWriter||Re.Default},setBorderRight:function(t){var e=this._index&&this._index._column,i=this.grid().displayOptions().isDrawLastColumnRight();this._super(!i&&e&&e._isLastColumn?null:t)},_doPrepareValue:function(t){this._super(t);t=t.styles();this.setNumberFormat(t.numberFormat()),this.setDatetimeFormat(t.datetimeFormat()),this.setBooleanFormat(t.booleanFormat()),this.setPrefix(t.prefix()),this.setSuffix(t.suffix())}}),ja=e("SelectableCellElement",Ya,{init:function(t,e){this._super(t,e)},hoveredBackground:g.WHITE,hoveredForeground:g.BLACK,selectedBackground:g.WHITE,selectedForeground:g.BLACK,selected:!1,_doPrepareElement:function(t){this._super(t),this.setHoveredBackground(t.hoveredBackground()),this.setHoveredForeground(t.hoveredForeground()),this.setSelectedBackground(t.selectedBackground()),this.setSelectedForeground(t.selectedForeground())}},{drawImageUrl:function(t,e,i,n){var s,r,t=t.getImage(n);t&&0<(n=t.width)&&0<(s=t.height)&&(r=m(i.x+(i.width-n)/2),i=m(i.y+(i.height-s)/2),e.drawImage(t,r,i,n,s))}}),Za=(new O,e("HeaderCellElement",ja,{init:function(t,e){this._super(e,"headerCellView"),this._sortHandle=new Ha(t,e,this),this._sortHandle.setVisible(!1),this.addElement(this._sortHandle),this._filterHandle=new Ga(t,e,this),this._filterHandle.setVisible(!1),this.addElement(this._filterHandle),this._popupHandle=new za(t,e,this),this._popupHandle.setVisible(!1),this.addElement(this._popupHandle),this._checkHandle=new $a(t,e,this),this._checkHandle.setVisible(!1),this.addElement(this._checkHandle),this._imageHandle=null,this._column=null,this._handleWidth=0},subFont:null,subForeground:null,subHoveredForeground:null,subSelectedForeground:null,subTextWrap:null,subTextAlignment:null,subLineAlignment:null,focused:!1,text:null,subText:null,subTextGap:1,showHandles:!0,checkLocation:P.NONE,imageLocation:P.NONE,subLocation:Os.LOWER,imageList:null,imageIndex:-1,imageUrl:null,itemOffset:2,itemGap:2,checked:!1,showTooltip:!0,tooltip:null,setSubFont:function(t){var e=this._subFont;t==e||t&&e&&t.font==e.font&&t.size==e.size&&t.underline==e.underline&&t.linethrough==e.linethrough||(this._subFont=t,this.invalidate())},setSubTextAlignment:function(t){if(t!=this._subTextAlignment){switch(this._subTextAlignment=t){case D.FAR:this._subTextAlign="right";break;case D.NEAR:this._subTextAlign="left";break;default:this._subTextAlign="center"}this.invalidate()}},setSubLineAlignment:function(t){if(t!=this._subLineAlignment){switch(this._subLineAlignment=t){case D.FAR:this._subLineAlign="bottom";break;case D.NEAR:this._subLineAlign="top";break;default:this._subLineAlign="middle"}this.invalidate()}},column:function(){return this.index().C()},setFocused:function(t){t!=this._focused&&(this._focused=t,this._doLayoutHandles(),this.invalidate())},isHovered:function(){return this._super()||this._filterHandle.isHovered()||this._checkHandle.isHovered()||this._popupHandle.isHovered()||this._imageHandle&&this._imageHandle.isHovered()},setHovered:function(t){this._super(t)},isClickable:function(){return!0},_doPrepareValue:function(t){this._super(t),this._column=this.index().column(),this._column,this.setText(t.text());var e=t.subStyles();this.setSubFont(e.font()),this.setSubForeground(e.foreground()),this.setSubHoveredForeground(e.hoveredForeground()),this.setSubSelectedForeground(e.selectedForeground()),this.setSubTextAlignment(e.textAlignment()),this.setSubLineAlignment(e.lineAlignment()),this.setSubTextWrap(e.textWrap()),this.setSubText(t.subText()),this.setSubTextGap(t.subTextGap()),this.setSubLocation(t.subLocation()),this.setItemOffset(t.itemOffset()),this.setItemGap(t.itemGap()),this.setImageList(t.imageList()),this.setImageIndex(t.imageIndex()),this.setImageUrl(t.imageUrl()),this.setCheckLocation(t.checkLocation()),this.setImageLocation(t.imageLocation()),this.setChecked(t.isChecked()),this.setShowTooltip(t.isShowTooltip()),this.setTooltip(t.tooltip())},setBorderRight:function(t){var e=this._index&&this._index._column,i=this.grid().displayOptions().isDrawLastColumnRight();this._super(!i&&e&&e._isLastColumn?null:t)},tooltipWidth:function(t,e,i){var n,s=this.tooltip()||this.text();return!this._textWrap||this._textWrap!=Ms.NORMAL&&this._textWrap!=Ms.EXPLICIT?Rt(t.measureText(this.font(),s)+this.paddingHorz(),i):(n=new O(0,0,0,0),t.measureTextRect(this.font(),s,0,0,e,i,this._textAlign,this._lineAlign,this._textWrap,n),Rt(n.width+this.paddingHorz(),i))},_doPrepareElement:function(t){this._super(t)},_doLayoutHandles:function(){var t=this.grid(),e=this._column,i=this._getRenderRect(null),n=i.right()-4,s=i.y,i=i.height;this._handleWidth=0;var r=t.columnHeaderOptions().popupMenuWidth(),r=isNaN(r=parseInt(r))?7:r;r+=4,this.$_canPopupHandleVisible(t,e)?(this._popupHandle.setVisible(!0),this._popupHandle.setMouseEnabled(!0),this._popupHandle.setBounds(n-r,s,r,i),this._popupHandle.invalidate(),n-=r,this._handleWidth+=r):this._popupHandle.setVisible(!1),t&&e instanceof M&&(this.$_canFilterHandleVisible(t,e)?(this._filterHandle.setVisible(!0),this._filterHandle.setMouseEnabled(!0),this._filterHandle.setBounds(n-12,s,12,i),this._filterHandle.invalidate(),n-=12,this._handleWidth+=12):this._filterHandle.setVisible(!1),r=t.sortingOptions(),this.$_canSortHandleVisible(r,e)?(t=11+(r._showSortOrder?12:0),this._sortHandle.setSortOrder(e.sortOrder()),this._sortHandle.setSortDir(e.sortDirection()),this._sortHandle.setVisible(!0),this._sortHandle.setBounds(n-t,s,t,i),this._sortHandle.invalidate(),this._handleWidth+=t,n-=t):this._sortHandle.setVisible(!1),this._handleWidth+=0<this._handleWidth?4:0,this._checkHandle.setMouseEnabled(!0))},$_renderEdgedItems:function(t,e){var i,n,s,r=this._checkLocation,o=this._imageLocation,a=this._checkHandle,h=this._imageHandle,l=0;switch(r){case P.LEFT_EDGE:l=1;break;case P.RIGHT_EDGE:l=2;break;case P.TOP_EDGE:l=3;break;case P.BOTTOM_EDGE:l=4}if(l){switch(l){case 1:e.leftBy(this._itemOffset),a.setBounds(e.x,e.y+(e.height-12)/2,12,12),e.leftBy(12);break;case 2:e.rightBy(-this._itemOffset),a.setBoundsI(e.right()-12,e.y+(e.height-12)/2,12,12),e.rightBy(-12);break;case 3:e.topBy(this._itemOffset),a.setBoundsI(e.x+(e.width-12)/2,e.y,12,12),e.topBy(12);break;case 4:e.bottomBy(-this._itemOffset),a.setBoundsI(e.x+(e.width-12)/2,e.bottom()-12,12,12),e.bottomBy(-12)}a.setChecked(this._checked),a.setVisible(!0)}if(o!=P.NONE)if(h||(h=this._imageHandle=new Ua(this.$_dom,this),this.addElement(h)),(i=this._imageUrl&&this.grid().getImage(this._imageUrl))&&0<(n=i.width)&&0<(s=i.height)){var d=!1;switch(o){case P.LEFT_EDGE:1==l?e.leftBy(this._itemGap):e.leftBy(this._itemOffset),h.setBoundsI(e.x,e.y+(e.height-s)/2,n,s),e.leftBy(n),d=!0;break;case P.RIGHT_EDGE:2==r?e.rightBy(-this._itemGap):e.rightBy(-this._itemOffset),h.setBoundsI(e.right()-n,e.y+(e.height-s)/2,n,s),e.rightBy(-n),d=!0;break;case P.TOP_EDGE:3==r?e.topBy(this._itemGap):e.topBy(this._itemOffset),h.setBoundsI(e.x+(e.width-n)/2,e.y,n,s),e.topBy(s),d=!0;break;case P.BOTTOM_EDGE:4==r?e.bottomBy(-this._itemGap):e.bottomBy(-this._itemOffset),h.setBoundsI(e.x+(e.width-n)/2,e.bottom()-s,n,s),e.bottomBy(-s),d=!0}h.setImage(i),h.setVisible(d)}else i=null;return i},$_renderCenteredItems:function(t,e,i){var n,s,r,o,a,h=this._checkLocation,l=this._imageLocation,d=this._checkHandle,u=this._imageHandle;if(i?(r=i.width,o=i.height):l=P.NONE,h==P.CENTER){if(l==P.NONE||u.isVisible())e.x+=(e.width-12)/2,e.y+=(e.height-12)/2;else{switch(u||(u=this._imageHandle=new Ua(this.$_dom,this),this.addElement(u)),a=e.clone(),l){case P.RIGHT:case P.CENTER:e.x+=(e.width-12-r-this._itemGap)/2,e.y+=(e.height-12)/2,n=e.x+12+this._itemGap,s=a.y+(a.height-o)/2;break;case P.LEFT:e.x+=(e.width-12-r-this._itemGap)/2+r+this._itemGap,e.y+=(e.height-12)/2,n=e.x-this._itemGap-r,s=a.y+(a.height-o)/2;break;case P.TOP:e.x+=(e.width-12)/2,e.y+=(e.height-12-o-this._itemGap)/2+o+this._itemGap,n=a.x+(a.width-r)/2,s=e.y-this._itemGap-o;break;case P.BOTTOM:e.x+=(e.width-12)/2,e.y+=(e.height-12-o-this._itemGap)/2,n=a.x+(a.width-r)/2,s=e.y+12+this._itemGap}u.setBoundsI(n,s,r,o),u.setVisible(!0)}d.setChecked(this._checked),d.setVisible(!0),d.setBoundsI(e.x,e.y,12,12)}else{if(l!=P.CENTER)return!1;if(h==P.NONE||d&&d.isVisible())e.x+=(e.width-r)/2,e.y+=(e.height-o)/2;else{switch(a=e.clone(),h){case P.LEFT:case P.CENTER:e.x+=(e.width-r-12-this._itemGap)/2+r+this._itemGap,e.y+=(e.height-o)/2,n=e.x-this._itemGap-12,s=a.y+(a.height-12)/2;break;case P.RIGHT:e.x+=(e.width-r-12-this._itemGap)/2,e.y+=(e.height-o)/2,n=e.x+r+this._itemGap,s=a.y+(a.height-12)/2;break;case P.TOP:e.x+=(e.width-r)/2,e.y+=(e.height-o-12-this._itemGap)/2+12+this._itemGap,n=a.x+(a.width-12)/2,s=e.y-this._itemGap-12;break;case P.BOTTOM:e.x+=(e.width-r)/2,e.y+=(e.height-o-12-this._itemGap)/2,n=a.x+(a.width-12)/2,s=e.y+12+this._itemGap;break;default:P.NONE;e.x+=(e.width-r)/2,e.y+=(e.height-o)/2}d.setChecked(this._checked),d.setVisible(!0),d.setBoundsI(n,s,12,12)}u.setBoundsI(e.x,e.y,r,o),u.setVisible(!0)}return!0},$_calcTextRect:function(t,e,i,n){if(n&&i.wrap==Ms.NORMAL)return t.getExplicitTextRect(i.font,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);switch(i.wrap){case Ms.EXPLICIT:return t.getExplicitTextRect(i.font,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);case Ms.NORMAL:return t.getWrapTextRect(i.font,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);default:return t.getTextRect(i.font,i.text,e.x,e.y,e.width,e.height,i.align,i.valign)}},$_renderText:function(t,e,i){switch(i.wrap){case Ms.EXPLICIT:t.drawTextBoundsExplicit(i.font,i.fill,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);break;case Ms.NORMAL:t.drawTextBoundsWrap(i.font,i.fill,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);break;case Ms.ELLIPSE:t.drawTextBoundsEllipse(i.font,i.fill,i.text,e.x,e.y,e.width,e.height,i.align,i.valign);break;default:t.drawTextBounds(i.font,i.fill,i.text,e.x,e.y,e.width,e.height,i.align,i.valign)}},$_renderTexts:function(t,e,i,L,A){var n,s,r,o,a,h,l,d,u,c,_,f,m,g,p,w,v=this._checkHandle,C=this._imageHandle,y=v&&v.isVisible()?P.NONE:this._checkLocation,V=i&&!C.isVisible()?this._imageLocation:P.NONE,x=this._text,I=this._subText,b=(x&&(r=(r=!(r=L?this._hoveredForeground:r)&&A?this._selectedForeground:r)||this._foreground,n={text:x,font:this._font,fill:r,wrap:this._textWrap,align:this._textAlign,valign:this._lineAlign}),I&&(r=null,r=(r=!(r=L?this._subHoveredForeground:r)&&A?this._subSelectedForeground:r)||this._subForeground,s={text:I,font:this._subFont,fill:r,wrap:this._subTextWrap,align:this._textAlign,valign:this._lineAlign}),this._itemGap),E=this._subTextGap,R=i?i.width:0,S=i?i.height:0,T=0,k=0,D=0,B=0,O=0,M=0,F=0,N=0;switch(y){case P.LEFT:T=12+b;break;case P.RIGHT:k=12+b;break;case P.TOP:D=12+b;break;case P.BOTTOM:B=12+b}switch(V){case P.LEFT:O=i.width+b;break;case P.RIGHT:M=i.width+b;break;case P.TOP:F=i.height+b;break;case P.BOTTOM:N=i.height+b}if((x||I)&&(e.leftBy(T+O),e.rightBy(-k-M),e.topBy(D+F),e.bottomBy(-B-N),o=x&&this.$_calcTextRect(t,e,n),_=x&&this.$_calcTextRect(t,e,n,!0),o&&o.width>e.width&&"center"==n.align&&"none"==n.wrap&&(n.align="near",o=this.$_calcTextRect(t,e,n)),a=I&&this.$_calcTextRect(t,e,s),f=I&&this.$_calcTextRect(t,e,s,!0),a)&&a.width>e.width&&"center"==s.align&&"none"==s.wrap&&(s.align="near",a=this.$_calcTextRect(t,e,s)),x&&I)switch(this._subLocation){case Os.LOWER:if((l=o.height+E+a.height)<=e.height){switch(n.valign){case"middle":l=e.y+(e.height-l)/2;break;case"bottom":l=e.bottom()-a.height-E-o.height;break;default:l=e.y}o.y=l,this.$_renderText(t,o,n),a.y=o.bottom()+E,this.$_renderText(t,a,s),c=(d=o).height+a.height,h=Math.min(o.x,a.x),u=Math.max(o.right(),a.right())-h}else u=o.height<=e.height?(o.y=e.y,this.$_renderText(t,o,n),a.y=o.bottom()+E,this.$_renderText(t,a,s),c=(d=e).height,h=Math.min(o.x,a.x),Math.max(o.right(),a.right())-h):(this.$_renderText(t,e,n),a=null,c=(d=e).height,h=o.x,o.width);(T||k)&&(g=d.y+(c-12)/2),(O||M)&&(w=d.y+(c-S)/2),(D||B)&&(m=h+(u-12)/2),(F||N)&&(p=h+(u-R)/2);break;case Os.UPPER:if((l=o.height+E+a.height)<=e.height){switch(n.valign){case"middle":l=e.y+(e.height-l)/2;break;case"bottom":l=e.bottom()-a.height-E-o.height;break;default:l=e.y}a.y=l,this.$_renderText(t,a,s),o.y=a.bottom()+E,this.$_renderText(t,o,n),d=a,c=o.height+a.height,h=Math.min(o.x,a.x),u=Math.max(o.right(),a.right())-h}else u=o.height<=e.height?(o.y=e.bottom()-o.height,this.$_renderText(t,o,n),a.y=o.y-E-a.height,this.$_renderText(t,a,s),c=(d=e).height,h=Math.min(o.x,a.x),Math.max(o.right(),a.right())-h):(this.$_renderText(t,o,n),a=null,c=(d=e).height,h=o.x,o.width);(T||k)&&(g=d.y+(c-12)/2),(O||M)&&(w=d.y+(c-S)/2),(D||B)&&(m=h+(u-12)/2),(F||N)&&(p=h+(u-R)/2);break;case Os.RIGHT:if((h=o.width+E+a.width)<=e.width){switch(n.align){case"center":h=e.x+(e.width-h)/2;break;case"right":h=e.right()-a.width-E-o.width;break;default:h=e.x}o.x=h,this.$_renderText(t,o,n),a.x=o.right()+E,this.$_renderText(t,a,s),u=(d=o).width+a.width,l=Math.min(o.y,a.y),c=Math.max(o.bottom(),a.bottom())-l}else o.width<=e.width?(o.x=e.x,this.$_renderText(t,o,n),a.x=o.right()+E,this.$_renderText(t,a,s),u=(d=e).width,l=Math.min(o.y,a.y),c=Math.max(o.bottom(),a.bottom())-l):(this.$_renderText(t,e,n),u=(d=e).width,l=o.y,c=o.height,a=null);(T||k)&&(g=l+(c-12)/2),(O||M)&&(w=l+(c-S)/2),(D||B)&&(m=d.x+(u-12)/2),(F||N)&&(p=d.x+(u-R)/2);break;case Os.LEFT:if((h=o.width+E+a.width)<=e.width){switch(n.align){case"center":h=e.x+(e.width-h)/2;break;case"right":h=e.right()-a.width-E-o.width;break;default:h=e.x}a.x=h,this.$_renderText(t,a,s),o.x=a.right()+E,this.$_renderText(t,o,n),d=e,l=Math.min(o.y,a.y),c=Math.max(o.bottom(),a.bottom())-l,u=o.width+a.width}else o.width<=e.width?(o.x=e.right()-o.width,this.$_renderText(t,o,n),a.x=o.x-E-a.width,this.$_renderText(t,a,s),u=(d=e).width,l=Math.min(o.y,a.y),c=Math.max(o.bottom(),a.bottom())-l):(this.$_renderText(t,o,n),u=(d=e).width,l=o.y,c=o.height,a=null);(T||k)&&(g=l+(c-12)/2),(O||M)&&(w=l+(c-S)/2),(D||B)&&(m=d.x+(u-12)/2),(F||N)&&(p=d.x+(u-R)/2);break;default:this.$_renderText(t,e,n)}else(x||I)&&(e=x?(this.$_renderText(t,e,n),o):(this.$_renderText(t,e,s),a),(T||k)&&(g=e.y+(e.height-12)/2),(O||M)&&(w=e.y+(e.height-S)/2),(D||B)&&(m=e.x+(e.width-12)/2),F||N)&&(p=e.x+(e.width-R)/2);(T||O)&&(h=o&&a?Math.min(o.x,a.x):(o||a||e).x,T&&O?m=(p=h-b-R)-b-12:T?m=h-b-12:O&&(p=h-b-R)),k+M&&(h=o&&a?Math.max(o.right(),a.right()):(o||a||e).right(),k&&M?p=(m=h+b)+12+b:k?m=h+b:M&&(p=h+b)),(D||F)&&(l=o&&a?Math.min(o.y,a.y):(o||a||e).y,D&&F?g=(w=l-b-S)-b-12:D?g=l-b-12:F&&(w=l-b-S)),(B||N)&&(l=o&&a?Math.max(o.bottom(),a.bottom()):(o||a||e).bottom(),B&&N?w=(g=l+b)+12+b:B?g=l+b:N&&(w=l+b)),0<T+k+D+B&&(v.setChecked(this._checked),v.setVisible(!0),v.setBoundsI(m,g,12,12)),0<O+M+F+N&&(C.setImage(i),C.setVisible(!0),C.setBoundsI(p,w,R,S)),this._calcWidth=Tt(this._subLocation,Os.RIGHT,Os.LEFT)&&x&&I?_.width+E+f.width:0,this._calcWidth=(x||I)&&Math.max(_&&_.width,f&&f.width,u||0,this._calcWidth)||e.width,this._calcWidth=Math.max(u||0,this._calcWidth)+(y==P.LEFT||y==P.RIGHT?12+b:0)+(V==P.LEFT||V==P.RIGHT?R+b:0)+this._handleWidth+this.paddingHorz()+(this._drawRect?this._drawRect.x:2)},_doRender:function(t,e){var i,n=null,s=this.grid().itemCount(),r=this.isHovered(),s=((n=(n=!(n=r?this.hoveredBackground():n)&&(i=0<s&&(this.isFocused()||this.isSelected()))?this.selectedBackground():n)||this.background())&&t.drawRect(n,null,e),this.text(),this.subText(),this._checkLocation,this._imageLocation,this._checkHandle),n=this._imageHandle;s&&s.setVisible(!1),n&&n.setVisible(!1),e.width-=this._handleWidth,this.deflatePadding2(e),0<e.width&&(s=e.clone(),n=this.$_renderEdgedItems(t,s),this.$_renderCenteredItems(t,s,n)||this.$_renderTexts(t,s,n,r,i)),this.inflatePadding2(e),e.width+=this._handleWidth,this._drawBorders(t,e)},$_canPopupHandleVisible:function(t,e){return!!e._header._popupMenuName},$_canFilterHandleVisible:function(t,e){var i=this.isShowHandles()&&e&&e.hasFilters()&&(!e.isFilterIconVisible||e.isFilterIconVisible());if(i)switch(t.filteringOptions().handleVisibility()){case fs.HIDDEN:i=!1;break;case fs.HOVERED:i=this.isHovered()||t.isFilterSelecting(e)}return i},$_canSortHandleVisible:function(t,e){var i=this.isShowHandles()&&e;if(i)switch(t.handleVisibility()){case fs.VISIBLE:i=0<=e.sortOrder();break;case fs.HOVERED:i=this.isHovered()&&0<=e.sortOrder();break;case fs.HIDDEN:i=!1}return i},$_canCheckHandleVisible:function(t,e){var i=this.isShowHandles()&&e;if(i)switch(t.handleVisibility()){case fs.VISIBLE:i=0<=e.sortOrder();break;case fs.HOVERED:i=this.isHovered();break;case fs.HIDDEN:i=!1}return i}})),Ja=e("HeaderGroupCellElement",qa,{init:function(t){this._super(t,"headerGroupCellView")},focused:!1,_prepareCells:function(t){var e,i=this.group(),n=(this.$_createCells(i),this._fillUnit=B(this.height()/Math.max(1,i.headerLevel())),!0);this._grid.header().heightFill()==$s.FIXED&&(this.$_calculateFillLevel(i,e={levels:0,fixHeight:0}),this._fillLevels=e.levels,!i.parent().header()._notHeightFixed&&e.fixHeight<=this.height()-3*this._fillLevels&&(0!=e.levels||e.fixHeight==this.height())&&(n=!1,0<e.levels)&&(this._fillUnit=B((this.height()-e.fixHeight)/e.levels)),this.$_prepareHeight(i,n)),i.header()._notHeightFixed=n},_layoutCells:function(t){var e,i,n,s,r,o,a=new O,h=this.group(),l=this.width(),d=this.height(),u=h.visibleCount(),c=h.header();if(c.isVisible()&&(f=this._cells[h.$_hash])&&(a.set(0,0,l,d),a.height=0<c.fixedHeight()&&!c._notHeightFixed?c.fixedHeight():this._fillUnit,f.setRect(a),f.layoutContent(t)),!h.isHideChildHeaders())if(e=a.bottom(),h.isVertical())for(i=this._fillUnit,n=0;n<u;n++){var _,f,m=(_=h.getVisibleItem(n)).header();(f=this._cells[_.$_hash])&&(s=0,n==u-1?s=d-e:f instanceof Ja?s=0<m._fillHeight&&!c._notHeightFixed?m._fillHeight:i*f.group().headerLevel():s+=0<m.fixedHeight()&&!c._notHeightFixed?m.fixedHeight():i,f.setBounds(0,e,l,s),f.layoutContent(t),e+=s,f instanceof Ja)&&f._layoutCells(t)}else for(n=r=0;n<u;n++)_=h.getVisibleItem(n),(f=this._cells[_.$_hash])&&(o=n==u-1?l-r:_.displayWidth(),f.setBounds(r,e,o,d-e),f.layoutContent(t),r+=o,f instanceof Ja)&&f._layoutCells(t)},$_calculateFillLevel:function(t,e){var i=t.header();if(i.isVisible()&&(0<i.fixedHeight()?e.fixHeight+=i.fixedHeight():e.levels++),!t._hideChildHeaders){var n,s,r,o,a=t.visibleCount(),h=0,l=0;if(0<a)if(t.isHorizontal()){for(n=0;n<a;n++)(r=t.getVisibleItem(n))instanceof R?(this.$_calculateFillLevel(r,o={levels:0,fixHeight:0}),o.levels>h&&(h=o.levels,l=o.fixHeight)):0<(s=r.header().fixedHeight())&&(h=0,l=Math.max(l,s));e.levels+=h=0==l?1:h,e.fixHeight+=l}else for(n=0;n<a;n++)(r=t.getVisibleItem(n))instanceof R?(this.$_calculateFillLevel(r,o={levels:0,fixHeight:0}),e.levels+=o.levels,e.fixHeight+=o.fixHeight):(i=r.header(),0<(s=r.header().fixedHeight())?e.fixHeight+=s:e.levels++)}},$_prepareHeight:function(t,e){var i,n=t.visibleCount(),s=0;if(!t._hideChildHeaders&&0<n)if(t.isHorizontal())for(var r,o,a=0,h=0;h<n;h++)s=(o=t.getVisibleItem(h))instanceof R?Math.max(s,this.$_prepareHeight(o,e)):0<(r=o.header().fixedHeight())&&!e||0<a?(a=Math.max(a,r),Math.max(s,a)):Math.max(s,this._fillUnit);else for(h=0;h<n;h++)(o=t.getVisibleItem(h))instanceof R?s+=this.$_prepareHeight(o,e):s+=0<(i=o.header()).fixedHeight()&&!e?i.fixedHeight():this._fillUnit;return(i=t.header()).isVisible()&&(s+=0<i.fixedHeight()&&!e?i.fixedHeight():this._fillUnit),i._fillHeight=s},$_createCells:function(t){this.hideAll();var e,i,n,s,r,o=this.grid(),a=o.header();if(t.header().isVisible()&&((n=this._cells[t.$_hash])||(this.$_setCell(t,n=new Za(o,this._dom)),this.addElement(n)),n.setVisible(!0),s=a.getCell($.temp(o,-1,t)),n.updateCell(s)),!t.isHideChildHeaders())for(e=0,r=t.visibleCount();e<r;e++)i=t.getVisibleItem(e),(n=this._cells[i.$_hash])||(n=i instanceof R?new Ja(this._dom):new Za(o,this._dom),this.$_setCell(i,n),this.addElement(n)),n.setVisible(!0),s=a.getCell($.temp(o,-1,i)),n.updateCell(s),0 instanceof Za,i instanceof R&&n.$_createCells(i)}}),Qa=e("SummaryCellElement",Ss,{init:function(t,e){this._super(t,e),this._value=NaN,this._error=null,this._errorDetail=null},text:null,column:function(){return this.index().C()},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},_doPrepareValue:function(t){this._super(t),this._value=t.value();var e,i,n=null;null!=(n=this._value!==I?t.index().column()instanceof M&&t.index().column().valueType()==S.DATETIME?this._value instanceof Date&&(e=this.datetimeWriter())?e.getText(this._value):this._value||t.displayText():(i=Number(this._value),!isNaN(i)&&(e=this.numberFormatter())?e.format(i):this._value||t.displayText()):t.displayText())&&((e=this.prefix())&&(n=e+n),e=this.suffix())&&(n+=e),this.setText(n),this._error=t.error()},_doPrepareElement:function(t){this._super(t)},_doLayoutHandles:function(){},_doRender:function(t,e){var i=this.background(),i=(i&&t.drawRectI(i,null,e),this.text());i&&(this.inflatePadding(e),"string"==typeof i?t.drawTextBoundsExplicit(this._font,this._foreground,i,e.x,e.y,e.width,e.height,this._textAlign):t.drawTextRect(this._font,this._foreground,i,e,this._textAlign),this.deflatePadding(e)),this._drawBorders(t,e)},canHovering:function(){return!1},_doMeasure:function(t,e,i){var n,s=this.text(),t=t._container._defContext._graphics;return(n=s?"string"==typeof s?t.getExplicitTextRect(this._font,s,0,0,e,i,this._textAlign):t.getTextRect(this._font,s,0,0,e,i,this._textAlign):n)&&(n.width+=this.paddingLeft()+this.paddingRight()),n}}),th=e("FooterCellElement",Qa,{init:function(t){this._super(t,"footerCellView")}}),eh=e("HeaderSummaryCellElement",Qa,{init:function(t){this._super(t,"summaryCellView")}}),ih=e("SummaryGroupCellElement",qa,{init:function(t,e){this._super(t,e)},layoutContent:function(t,e){return this._doLayoutContent(t,e)},_doLayoutContent:function(t,e){this._prepareCells(t,e),this._layoutCells(t,e)},_prepareCells:function(t,e){this.$_createCells(this.group(),e)},_layoutCells:function(t,e){var i,n,s,r,o=this.group(),a=new O,h=this.width(),l=this.height(),d=o.visibleCount();if(o.isVertical())for(n=a.bottom(),s=B(l/o.dataLevel()),f=0;f<d;f++)v=o.getVisibleItem(f),(m=this._getCell(v))&&(i=0,f==d-1?i=l-n:m instanceof ih?i=s*m.group().dataLevel():i+=s,m.setBounds(0,n,h,i),m.layoutContent(t,e),n+=i,m instanceof ih)&&m._layoutCells(t,e);else{this.grid();for(var u=this.$_getMergeManager(),c=0<u.count(),_=0,f=0;f<d;f++)v=o.getVisibleItem(f),(m=this._getCell(v))&&(r=f==d-1?h-_:v.displayWidth(),m.setBounds(_,0,r,l),m.layoutContent(t,e),_+=r,m instanceof ih)&&m._layoutCells(t,e);if(c)for(f=0;f<d;f++){var m,g,p,w,v=o.getVisibleItem(f);(w=u.findRoomBy(v))&&(m=this._getCell(v),g=this._getCell(w.baseColumn()),p=this._getCell(w.startColumn()),w=this._getCell(w.lastColumn()),a=p.getBounds(),p=g.getBounds(),w=w.getBounds(),p.x=a.x,p.width=w.right()-a.x,g.setRect(p))}}},canHovering:function(){return!1},$_createCells:function(t,e){this.hideAll();for(var i,n,s,r=this.grid(),o=this.$_getSummaryModel(),a=this.$_getMergeManager(),h=0<a.count(),l=0,d=t.visibleCount();l<d;l++)i=t.getVisibleItem(l),s=a.findRoomBy(i),(n=this._getCell(i))||(n=i instanceof R?this.$_createGroupCellElement():this.$_createCellElement(),this.$_setCell(i,n),this.addElement(n)),n.setVisible(!h||!s||s.baseColumn()==i),s=o.getCell($.temp(r,-1,i),e),n.updateCell(s),i instanceof R&&n.$_createCells(i)}}),nh=e("FooterGroupCellElement",ih,{init:function(t){this._super(t,"fooerGroupCellView")},$_getSummaryModel:function(){return this.grid().footer()},$_getMergeManager:function(){return this.grid()._footerMergeManager},$_createCellElement:function(){return new th(this._dom)},$_createGroupCellElement:function(){return new nh(this._dom)}}),sh=e("HeaderSummaryGroupCellElement",ih,{init:function(t){this._super(t,"headerSummaryGroupCellView")},$_getSummaryModel:function(){return this.grid().header().summary()},$_getMergeManager:function(){return this.grid().headerSummaryMergeManager()},$_createCellElement:function(){return new eh(this._dom)},$_createGroupCellElement:function(){return new sh(this._dom)}}),rh=e("GroupFooterCellElement",Ss,{init:function(t){this._super(t,"groupFooterCellElement"),this._value=I,this._error=null},text:null,textVisible:!0,value:function(){return this._value},error:function(){return this._error},_doPrepareValue:function(t){this._super(t),this._value=t.value();var e,i,n=null;null!=(n=this._value!==I?t.index().column()instanceof M&&t.index().column().valueType()==S.DATETIME?this._value instanceof Date&&(e=this.datetimeWriter())?e.getText(this._value):t.displayText():(i=Number(this._value),!isNaN(i)&&(e=this.numberFormatter())?e.format(i):this._value||t.displayText()):t.displayText())&&((e=this.prefix())&&(n=e+n),e=this.suffix())&&(n+=e),this.setText(n),this._error=t.error()},_doPrepareElement:function(t){this._super(t)},_doLayoutHandles:function(){},_doRender:function(t,e){var i=this.background(),i=(i&&t.drawRect(i,null,e),this.text());i&&this._textVisible&&(this.inflatePadding(e),"string"==typeof i?t.drawTextBoundsExplicit(this._font,this._foreground,i,e.x,e.y,e.width,e.height,this._textAlign):t.drawTextRect(this._font,this._foreground,i,e,this._textAlign),this.deflatePadding(e)),this._drawBorders(t,e)},clip:function(t){this.getClientRect(this._drawRect);var e=this._drawRect.clone(),i=this.grid(),n=i.layoutManager(),s=n._nonfixedBounds,r=this.boundsBy();r.x<s.x&&!this._index._column.isFixed()&&(s=s.x-r.x+i._x,e.leftBy(s)),this._shiftLeft&&e.leftBy(-this._shiftLeft),r.right()>n._rfixedBounds.x&&!this._index._column.isRightFixed()&&e.rightBy(n._rfixedBounds.x-r.right()+1),t.clipRect(e)}}),oh=e("GroupFooterGroupCellElement",qa,{init:function(t){this._super(t,"groupFooterGroupCellView")},_prepareCells:function(t){this.$_createCells(this.group())},_layoutCells:function(t){var e,i,n,s,r,o,a,h,l=this.group(),d=new O,u=this.width(),c=this.height(),_=l.visibleCount();if(l.isVertical())for(s=d.bottom(),r=B(c/l.dataLevel()),e=0;e<_;e++)a=l.getVisibleItem(e),(h=this._getCell(a))&&(i=0,e==_-1?i=c-s:h instanceof oh?i=r*h.group().dataLevel():i+=r,h.setBounds(0,s,u,i),s+=i),h instanceof oh&&h._layoutCells(t);else for(e=n=0;e<_;e++)a=l.getVisibleItem(e),(h=this._getCell(a))&&(o=e==_-1?u-n:a.displayWidth(),h.setBounds(n,0,o,c),n+=o),h instanceof oh&&h._layoutCells(t)},$_createCells:function(t){this.hideAll();for(var e,i,n,s=this.grid(),r=s.rowGroup(),o=0,a=t.visibleCount();o<a;o++)e=t.getVisibleItem(o),(i=this._getCell(e))||(e instanceof zl?i=new rh(this._dom):e instanceof R&&(i=new oh(this._dom)),this.$_setCell(e,i),i&&this.addElement(i)),i&&(i.setVisible(!0),n=r.getFooterCell($.temp(s,this.index().I(),e)),i.updateCell(n),e instanceof M||0 instanceof R),e instanceof R&&i.$_createCells(e)}}),Qa=e("SectionHeadFootElement",Ya,{init:function(t,e){this._super(t,e)},text:null,image:null,_renderCell:function(t,e){var i,n;this._image?(i=Math.min(this._image.width,e.width),n=Math.min(this._image.height,e.height),t.drawImage(this._image,(e.width-i)/2,(e.height-n)/2,i,n)):this._text&&(stroke=this.foreground())&&(this.inflatePadding(e),t.drawTextBoundsExplicit(this._font,stroke,this._text,e.x,e.y,e.width,e.height,this._textAlign,this._lineAlign),this.deflatePadding(e))}}),ah=e("IndicatorHeadElement",Qa,{init:function(t){this._super(t,"indicatorHeadView")},_doUpdateContent:function(t){this._super(t);t=this.grid().indicator();this._text=t.headText(),this._image=t.headImage()},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this._renderCell(t,e),this._drawBorders(t,e)}}),hh=e("IndicatorFootElement",Qa,{init:function(t,e){this._super(t,e||"indicatorFootView")},renderer:null,_doUpdateContent:function(t){this._super(t);t=this.grid().indicator();this._text=t.footText(),this._image=t.footImage()},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i;!this._renderer||this._text||this._image?((i=this.background())&&t.drawRect(i,null,e),this._renderCell(t,e)):this._renderer.render(this,t,e),this._drawBorders(t,e)}}),lh=e("FooterHeadRenderer",null,{init:function(){this._super()},render:function(t,e,i){var n=t.background();n&&e.drawRect(n,null,i),this.$_drawSigma(t,e,i)},$_drawSigma:function(t,e,i){var n,t=t.figureBackground();t&&(n=i.x+(i.width-11)/2,i=i.y+(i.height-11)/2,e.drawPolygonArray(t,null,[n+2,i+1,n+2,i+2.5,n+4,i+5,n+1,i+8.5,n+1,i+10,n+9,i+10,n+9,i+6.5,n+8,i+8.5,n+2,i+8.5,n+5,i+5,n+3,i+2.5,n+9,i+2.5,n+10,i+4.5,n+10,i+1]))}}),dh=e("IndicatorSummaryElement",hh,{init:function(t){this._super(t,"indicatorSummaryView")},_doUpdateContent:function(t){this._super(t);t=this.grid().indicator();this._text=t.summaryText()||t.footText(),this._image=t.summaryImage()||t.footImage()}}),uh=e("StateBarHeadElement",Qa,{init:function(t){this._super(t,"stateBarHeadView")},_doUpdateContent:function(t){this._super(t);t=this.grid().stateBar();this._text=t.headText(),this._image=t.headImage()},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this._renderCell(t,e),this._drawBorders(t,e)}}),ch=e("StateBarFootElement",Qa,{init:function(t,e){this._super(t,e||"stateBarFootView")},_doUpdateContent:function(t){this._super(t);t=this.grid().stateBar();this._text=t.footText(),this._image=t.footImage()},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this._renderCell(t,e),this._drawBorders(t,e)}}),_h=e("StateBarSummaryElement",ch,{init:function(t){this._super(t,"stateBarSummaryView")},_doUpdateContent:function(t){this._super(t);t=this.grid().stateBar();this._text=t.summaryText()||t.footText(),this._image=t.summaryImage()||t.footImage()}}),fh=e("CheckBarHeadElement",Qa,{init:function(t){this._super(t,"checkBarHeadView")},showCheck:!0,checked:!1,_doUpdateContent:function(t){this._super(t);var t=this.grid(),e=t.checkBar();this.setShowCheck(e.isShowAll()&&!e.isExclusive()&&0<t.itemCount()),this._text=e.headText(),this._image=e.headImage(),t.itemCount()<=0&&this.setChecked(!1)},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this.isShowCheck()?this.$_drawCheck(t,e):this._renderCell(t,e),this._drawBorders(t,e)},$_drawCheck:function(t,e){e=this._getRenderRect(e);var i,n,s,r=this.grid(),o=r.checkBar(),o=this.isChecked()?o.headCheckImageUrl():o.headUnCheckImageUrl();(o=o&&r.getImage(o))&&0<(r=o.width)&&0<(i=o.height)?(n=m(e.x+(e.width-r)/2),s=m(e.y+(e.height-i)/2),t.drawImage(o,n,s,r,i)):(o=this.isChecked()?this.figureBackground():this.figureInactiveBackground())&&(s=(n=this.figureSize())?n.getDimension(e.height):12,Be(t,o,e,s))}}),mh=e("CheckBarFootElement",Qa,{init:function(t,e){this._super(t,e||"checkBarFootView")},_doUpdateContent:function(t){this._super(t);t=this.grid().checkBar();this._text=t.footText(),this._image=t.footImage()},_doMeasure:function(t,e,i){},_doRender:function(t,e){var i=this.background();i&&t.drawRect(i,null,e),this._renderCell(t,e),this._drawBorders(t,e)}}),gh=e("CheckBarSummaryElement",mh,{init:function(t){this._super(t,"checkBarSummaryView")},_doUpdateContent:function(t){this._super(t);t=this.grid().checkBar();this._text=t.summaryText()||t.footText(),this._image=t.summaryImage()||t.footImage()}}),ph=e("IndicatorCellElement",ja,{init:function(t){this._super(t,"indicatorCellView")},text:null,itemState:H.NORMAL,setItemState:function(t){t!=this._itemState&&(this._itemState=t,this.invalidate())},_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t),this.setItemState(t.itemState()),this.setText(t.displayText())},_doRender:function(t,e){var i=this.itemState(),n=null,s=this.grid().indicator(),r=s.mark(),s=s.stateImages();(n=(n=(n=this.isHovered()?this.hoveredBackground():n)||!this.isSelected()&&i==H.NORMAL?n:this.selectedBackground())||this.background())&&t.drawRect(n,null,e),n=this.figureBackground(),r===Gs.IMAGE&&s&&i!=H.NORMAL&&s[i]?ja.drawImageUrl(this.grid(),t,e,s[i]):r&&r!==Gs.DEFAULT||!n||i==H.NORMAL?r!=Gs.NONE&&(s=this.text())&&(n=null,n=(n=!(n=this.isSelected()?this.selectedForeground():n)&&this.isHovered()?this.hoveredForeground():n)||this.foreground())&&(this.inflatePadding(e),t.drawTextRect(this._font,n,s,e,this._textAlign),this.deflatePadding(e)):i==H.INSERTING||i==H.APPENDING?this.$_drawInsert(t,n,e):i==H.UPDATING?this.$_drawEdit(t,n,e):i==H.FOCUSED&&this.$_drawArrow(t,n,e),this._drawBorders(t,e)},_hoveredChanged:function(){this.invalidate()},$_drawArrow:function(t,e,i){var n=i.x+(i.width-11)/2,i=i.y+(i.height-11)/2;t.drawPolygonArray(e,null,[n+4,i+2,n+7.5,i+5.5,n+4,i+9,n+5,i+10,n+9.5,i+5.5,n+5,i+1])},$_drawEdit:function(t,e,i){var n=i.x+(i.width-11)/2,i=i.y+(i.height-11)/2;t.drawPolygonArray(e,null,[n+9,i+0,n+3,i+6,n+3,i+8,n+5,i+8,n+11,i+2]),t.drawPolygonArray(e,null,[n+0,i+9,n+0,i+11,n+11,i+11,n+11,i+9])},$_drawInsert:function(t,e,i){var n=i.x+(i.width-11)/2,i=i.y+(i.height-11)/2;t.drawPolygonArray(e,null,[n+0,i+0,n+0,i+11,n+5,i+11,n+5,i+9,n+2,i+9,n+2,i+2,n+9,i+2,n+9,i+5,n+11,i+5,n+11,i+0]),t.drawPolygonArray(e,null,[n+7,i+5,n+7,i+7,n+5,i+7,n+5,i+9,n+7,i+9,n+7,i+11,n+9,i+11,n+9,i+9,n+11,i+9,n+11,i+7,n+9,i+7,n+9,i+5])}}),wh=e("StateBarCellElement",ja,{init:function(t){this._super(t,"stateBarCellView")},rowState:v.NONE,mark:Gs.DEFAULT,stateTexts:null,stateImages:null,_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t),this.setRowState(t.index().item().rowState());var t=this.grid().stateBar();this._mark=t.mark();(t=t.stateTexts())&&this.setStateTexts(t)},_doRender:function(t,e){var i=this.rowState(),n=null,s=this.grid(),s=s&&s._stateBar&&s._stateBar._stateStyles[i];if((n=(n=this.isHovered()?this.hoveredBackground():n)||s&&s.background()||this.background())&&t.drawRect(n,null,e),i!=v.NONE&&this._mark!=Gs.NONE)if(this._mark==Gs.TEXT){var r=this._stateTexts[i],o=s&&s.font()||this.font();(n=(n=this.isHovered()?this.hoveredForeground():null)||s&&s.foreground()||this.foreground())&&(this.inflatePadding(e),t.drawTextRect(o,n,r,e,this._textAlign),this.deflatePadding(e))}else{o=this.grid().stateBar().stateImages();if(this._mark===Gs.IMAGE&&o[i])ja.drawImageUrl(this.grid(),t,e,o[i]);else if(n=s&&s.figureBackground()||this.figureBackground()){var a=this._getRenderRect(e),r=this.figureSize(),o=r?r.getDimension(a.width):14,s=r?r.getDimension(a.width):10,r=(a.width-o)/2,h=(a.height-s)/2;switch(a.set(B(r),B(h),o,s),i){case v.CREATED:this.$_drawCreated(t,n,a);break;case v.DELETED:this.$_drawDeleted(t,n,a);break;case v.UPDATED:this.$_drawUpdated(t,n,a);break;case v.CREATE_AND_DELETED:this.$_drawCreateAndDeleted(t,n,a)}}}this._drawBorders(t,e)},$_drawCreated:function(t,e,i){var n=i.x,s=i.y,r=i.width,i=i.height;t.drawPolygonArray(e,null,[n+6*r/14,s+0*i/10,n+6*r/14,s+2*i/10,n+4*r/14,s+2*i/10,n+4*r/14,s+4*i/10,n+6*r/14,s+4*i/10,n+6*r/14,s+6*i/10,n+8*r/14,s+6*i/10,n+8*r/14,s+4*i/10,n+10*r/14,s+4*i/10,n+10*r/14,s+2*i/10,n+8*r/14,s+2*i/10,n+8*r/14,s+0*i/10]),t.drawPolygonArray(e,null,[n+ +r/14,s+9*i/10,n+ +r/14,s+10*i/10,n+13*r/14,s+10*i/10,n+13*r/14,s+9*i/10])},$_drawUpdated:function(t,e,i){var n=i.x,s=i.y,r=i.width,i=i.height;t.drawPolygonArray(e,null,[n+2*r/14,s+ +i/10,n+2*r/14,s+5*i/10,n+3*r/14,s+5*i/10,n+3*r/14,s+2*i/10,n+9*r/14,s+2*i/10,n+9*r/14,s+4*i/10,n+7*r/14,s+4*i/10,n+7*r/14,s+5*i/10,n+8*r/14,s+5*i/10,n+8*r/14,s+6*i/10,n+9*r/14,s+6*i/10,n+9*r/14,s+7*i/10,n+10*r/14,s+7*i/10,n+10*r/14,s+6*i/10,n+11*r/14,s+6*i/10,n+11*r/14,s+5*i/10,n+12*r/14,s+5*i/10,n+12*r/14,s+4*i/10,n+10*r/14,s+4*i/10,n+10*r/14,s+ +i/10]),t.drawPolygonArray(e,null,[n+ +r/14,s+9*i/10,n+ +r/14,s+10*i/10,n+13*r/14,s+10*i/10,n+13*r/14,s+9*i/10])},$_drawDeleted:function(t,e,i){var n=i.x,s=i.y,r=i.width,i=i.height;t.drawPolygonArray(e,null,[n+4*r/14,s+2*i/10,n+4*r/14,s+4*i/10,n+10*r/14,s+4*i/10,n+10*r/14,s+2*i/10]),t.drawPolygonArray(e,null,[n+0*r/14,s+9*i/10,n+0*r/14,s+10*i/10,n+2*r/14,s+10*i/10,n+2*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+3*r/14,s+9*i/10,n+3*r/14,s+10*i/10,n+5*r/14,s+10*i/10,n+5*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+6*r/14,s+9*i/10,n+6*r/14,s+10*i/10,n+8*r/14,s+10*i/10,n+8*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+9*r/14,s+9*i/10,n+9*r/14,s+10*i/10,n+11*r/14,s+10*i/10,n+11*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+12*r/14,s+9*i/10,n+12*r/14,s+10*i/10,n+14*r/14,s+10*i/10,n+14*r/14,s+9*i/10])},$_drawCreateAndDeleted:function(t,e,i){var n=i.x,s=i.y,r=i.width,i=i.height;t.drawPolygonArray(e,null,[n+3*r/14,s+0*i/10,n+3*r/14,s+2*i/10,n+ +r/14,s+2*i/10,n+ +r/14,s+3*i/10,n+3*r/14,s+3*i/10,n+3*r/14,s+5*i/10,n+4*r/14,s+5*i/10,n+4*r/14,s+3*i/10,n+6*r/14,s+3*i/10,n+6*r/14,s+2*i/10,n+4*r/14,s+2*i/10,n+4*r/14,s+0*i/10]),t.drawPolygonArray(e,null,[n+7*r/14,s+2*i/10,n+7*r/14,s+4*i/10,n+13*r/14,s+4*i/10,n+13*r/14,s+2*i/10]),t.drawPolygonArray(e,null,[n+0*r/14,s+9*i/10,n+0*r/14,s+10*i/10,n+2*r/14,s+10*i/10,n+2*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+3*r/14,s+9*i/10,n+3*r/14,s+10*i/10,n+5*r/14,s+10*i/10,n+5*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+6*r/14,s+9*i/10,n+6*r/14,s+10*i/10,n+8*r/14,s+10*i/10,n+8*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+9*r/14,s+9*i/10,n+9*r/14,s+10*i/10,n+11*r/14,s+10*i/10,n+11*r/14,s+9*i/10]),t.drawPolygonArray(e,null,[n+12*r/14,s+9*i/10,n+12*r/14,s+10*i/10,n+14*r/14,s+10*i/10,n+14*r/14,s+9*i/10])}}),vh=new f("rgba(170, 170, 170, 0.7)"),Ch=new f(4278190080,2,[1,1]),yh=new g(4293848814),xh=new f("rgba(170, 170, 170, 0.35)"),Ih=e("CheckBarCellElement",ja,{init:function(t){this._super(t,"checkBarCellView")},markVisible:!0,exclusive:!1,checked:!1,checkable:!0,drawCheckBox:!0,radioImageUrl:null,unCheckRadioImageUrl:null,_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t);t=t.index().item();this.setCheckable(t.isCheckable()),this.setChecked(t.isChecked())},_doRender:function(t,e){var i=null;(i=(i=this.isHovered()?this.hoveredBackground():i)||this.background())&&t.drawRect(i,null,e),this._markVisible&&(this._exclusive?this.$_drawRadio(t,e):this.$_drawCheck(t,e)),this._drawBorders(t,e)},$_drawCheck:function(t,e){e=this._getRenderRect(e);var i,n=this.figureSize()?this.figureSize().getDimension(e.height):12,s=m(n-2),r=m(e.x+(e.width-s)/2),o=m(e.y+(e.height-s)/2),a=this.line(),h=this.figureInactiveBackground(),l=this.grid().checkBar().getCheckImage(this.isChecked(),this.isCheckable());this.isCheckable()?(i=this.grid()._focusedCheckIndex)&&i.itemIndex()==this._index.itemIndex()?t.drawBounds(null,Ch,r,o,s,s):this.isDrawCheckBox()&&t.drawBoundsI(null,a||vh,r,o,s,s):!this.isDrawCheckBox()&&l||t.drawBoundsI(h||yh,a||xh,r,o,s,s),l?l&&0<(i=l.width)&&0<(h=l.height)&&(r=m(e.x+(e.width-i)/2),o=m(e.y+(e.height-h)/2),t.drawImage(l,r,o,i,h)):this.isChecked()&&(a=this.figureBackground(),Be(t,a,e,n))},$_drawRadio:function(t,e){e=this._getRenderRect(e);var i,n,s,r,o,a,h=((this.figureSize()?this.figureSize().getDimension(e.height):12)-2)/2,l=m(e.x+e.width/2),d=m(e.y+e.height/2),u=this.line(),c=this.figureInactiveBackground();this.isCheckable()?(i=this.grid()._focusedCheckIndex)&&i.itemIndex()==this._index.itemIndex()?t.drawCircle(null,Ch,l,d,h):this.isChecked()?this._radioImageUrl||t.drawCircle(null,u||vh,l,d,h):this._unCheckRadioImageUrl?(n=this.grid().getImage(this._unCheckRadioImageUrl))&&0<(s=n.width)&&0<(r=n.height)&&(o=m(e.x+(e.width-s)/2),a=m(e.y+(e.height-r)/2),t.drawImage(n,o,a,s,r)):t.drawCircle(null,u||vh,l,d,h):t.drawCircle(c||yh,u||xh,l,d,h),this.isChecked()&&(this._radioImageUrl?(n=this.grid().getImage(this._radioImageUrl))&&0<(s=n.width)&&0<(r=n.height)&&(o=m(e.x+(e.width-s)/2),a=m(e.y+(e.height-r)/2),t.drawImage(n,o,a,s,r)):(h-=2,i=this.figureBackground(),t.drawCircle(i,null,l,d,h)))}}),bh=e("DataCellElement",Ss,{init:function(t,e){this._super(t,e||"dataCellView"),this._dataColumn=null,this._cellStyles=null,this._error=null,this._errorLevel=Is.IGNORE,this._leftButtonsWidth=0,this._buttonWidth=0,this._imageButtonWidth=0,this._editWidth=0,this._errorWidth=0,this._buttonHovered=!1,this._buttonPressed=!1,this._buttonIndex=void 0,this._editButtonHovered=!1,this._editButtonPressed=!1,this._expandHandle=null},contentFit:Ns.NONE,iconIndex:0,iconLocation:Fs.NONE,iconAlignment:D.NEAR,iconOffset:0,iconPadding:0,writable:!0,renderer:null,text:null,value:I,blankState:Ds.NONE,button:Cs.NONE,buttonVisibility:ys.DEFAULT,editButtonVisibility:ys.DEFAULT,expanderVisible:!1,innerIndex:-1,hoverIndex:I,setInnerIndex:function(t){t!=this._innerIndex&&(this._innerIndex=t,this.$_resetButtonVisible(),this.invalidate())},mergeRoom:function(){return null},expanderVisible_:function(){return null!=this._expandHandle},setExpanderVisible:function(t){t!=this.isExpanderVisible()&&(this._expandHandle?(this.contains(this._expandHandle)&&this.removeChild(this._expandHandle),this._expandHandle=null):this._expandHandle=new Ka(this._dom,this),this.invalidate())},group:function(){var t=this.mergeRoom();return t?t.group():this.index().item().parent()},layoutTreeContent:function(t){this._doLayoutHandles()},ptInCell:function(t,e){return t>this._leftButtonsWidth&&t<this.width()-this._imageButtonWidth-this._buttonWidth-this._editWidth-this._errorWidth},ptInButton:function(t,e){var i=this._buttonWidth,n=this.width()-i-this._imageButtonWidth;return 0<i&&n<=t&&t<this.width()-this._imageButtonWidth&&0<=e&&e<=this.height()&&this.grid().delegate().getCellButtonRenderer(this.index()).hitTest(i,this.height(),t-n,e)},getPtInButtonIndex:function(t,e){var i=this._buttonWidth,n=this.width()-i-this._imageButtonWidth;return this.grid().delegate().getCellButtonRenderer(this.index()).getButtonIndex(i,this.height(),t-n,e)},ptInEditButton:function(t,e){var i=this._editWidth,n=this.width()-i-this._buttonWidth-(this._isLeftImageButton?0:this._imageButtonWidth);return 0<i&&n<=t&&t<n+i&&0<=e&&e<=this.height()&&this.grid().delegate().getCellEditButtonRenderer(this.index()).hitTest(i,this.height(),t-n,e)},ptInDataButton:function(t,e){var i=this._renderer;return!(!i||!i.isButton())&&i.ptInButton(this,t,e)},getPtInDataButtonIndex:function(t,e){var i=this._renderer;if(i&&i.isButton())return i.ptInButtonIndex(this,t,e)},setButtonState:function(t,e,i){this._buttonHovered==t&&this._buttonPressed==e&&i==this._buttonIndex||(this._buttonHovered=!(!this._buttonPressed||e||!this._buttonHovered)||t,this._buttonPressed=e,this._buttonIndex=i,this.invalidate(!1,!0))},setEditButtonState:function(t,e){this._editButtonHovered==t&&this._editButtonPressed==e||(this._editButtonHovered=t,this._editButtonPressed=e,this.invalidate())},getButtonsWidth:function(){return(this.$_imageButtonWidth()||this.$_buttonWidth())+this.$_editButtonWidth()+this.$_errorWidth()-1},getLeftButtonsWidth:function(){return this._isLeftImageButton?this.$_imageButtonWidth():0},getValueOf:function(t){var e=this.index().item(),t=e.dataSource().getFieldIndex(t);if(0<=t)return e.getData(t)},canHovering:function(t){if(t){if(this.button()!=Cs.NONE||0<this.$_editButtonWidth()||this._expandHandle||this._error||0<this.$_imageButtonWidth())return!0}else if(this._leftButtonsWidth+this._buttonWidth+this._editWidth+this._errorWidth+this._imageButtonWidth!=0)return!0;return!1},_hoveredChanged:function(){var t=this.renderer();t&&t.isHoveredUnderline&&(this._hovered&&t.isHoveredUnderline(this.index())?(this._fontUnderline=this._font.underline,this._font.underline=!0):(this._font.underline=null==this._fontUnderline?this._font.underline:this._fontUnderline,this._hoverIndex=void 0),this.invalidate(!1,!0))},_doLayoutHandles:function(){var t;this._super(),this._expandHandle&&(t=bh.EXPANDER_SIZE,this._expandHandle.setBounds(2,2,t,t),this._expandHandle.setExpanded(this.group&&this.group()&&this.group().isExpanded()),this.contains(this._expandHandle)||(this.addElement(this._expandHandle),this._expandHandle.invalidate()))},_doPrepareValue:function(t){this._super(t),this._dataColumn=this._index.dataColumn(),this.setValue(t.value()),this._error=t.error(),this._errorLevel=t.errorLevel();var e=null,i=this._dataColumn;if(this._numberFormatter&&(null!=i._displayMinusZero?this._numberFormatter.setDisplayMinusZero(!!i._displayMinusZero):this._numberFormatter.setDisplayMinusZero(!0)),i)switch(i.valueType()){case S.TEXT:e=t.displayText();break;case S.NUMBER:var n=Number(this._value),e=isNaN(n)?i.nanText():0==n&&null!=i.zeroText()?i.zeroText():this._numberFormatter?this._numberFormatter.format(n):t.displayText();break;case S.DATETIME:e=this._value instanceof Date&&this.datetimeWriter()?this.datetimeWriter().getText(this._value):t.displayText();break;case S.BOOLEAN:e=this._boolFormatter?this._boolFormatter.formatValue(this._value):t.displayText();break;case S.OBJECT:var s,r=i.getField(),o=this._index.dataRow(),a=i._objectKey,h=i._objectCallback;if(n=this._value)switch(e=n=h&&"function"==typeof h?h(r.orgFieldName(),o,n):a&&n.hasOwnProperty(a)?n[a]:t.displayText(),typeof n){case"stirng":break;case"number":e=(s=this._numberFormatter)?s.format(n):n;break;case"boolean":e=(s=this._boolFormatter)?s.formatValue(n):n;break;default:e=n instanceof Date&&(s=this.datetimeWriter())?s.getText(n):n}break;default:e=t.displayText()}this.setText(e)},_doPrepareElement:function(t){this._super(t),this.setContentFit(t.contentFit()),this.setIconIndex(t.iconIndex()),this.setIconLocation(t.iconLocation()),this.setIconAlignment(t.iconAlignment()),this.setIconOffset(t.iconOffset()),this.setIconPadding(t.iconPadding());var e=null,t=t.renderer(),e=(e=t?this.grid().dataCellRenderers().getRenderer(t):e)||this._index.column().rendererObj();this.setRenderer(e)},_doUpdateContent:function(t){this._super(t);var e=this._dataColumn;this._cellStyles=t._cellStyles,this.setInnerIndex(-1),this.setBlankState(t.blankState()),e?(t=(t=(t=this._grid.$_editOptionsWritable)&&(this._cellStyles?this._cellStyles.calcWritable(e.isEditable(),e.isReadOnly()):e.isWritable()&&(this._grid.$_fixedRowCount<1||this._grid.$_fixedRowEditable||this._index.itemIndex()>=this._grid.$_fixedRowCount)))&&this._renderer&&this._renderer.canEditable(),this.setWritable(t),this.setButton(e.button()),this.setButtonVisibility(e.buttonVisibility()),this.setEditButtonVisibility(e.editButtonVisibility())):this.setWritable(!1)},_doMeasure:function(t,e,i){t=this.renderer().measure(t,this,e,i);return t.width+=this._borderLeft?this._borderLeft.width():0,t.width+=this._borderRight?this._borderRight.width():0,t},_doMeasureHeight:function(t,e,i){t=this.renderer().measureHeight(t,this,e,i);return t.height+=this._borderTop?this._borderTop.width():0,t.height+=this._borderBottom?this._borderBottom.width():0,t},_doRender:function(t,e){var i,n,s,r=this._background,r=(r?t.drawRectI(r,null,e):t.drawRectI(g.WHITE,null,e),this._getRenderRect(e)),o=(this._imageButtonWidth=this.$_imageButtonWidth(),this._leftButtonsWidth=this.$_leftButtonsWidth(r),this._isLeftImageButton=this._renderer&&this._renderer instanceof qc&&this._renderer.alignment()===D.NEAR,this._buttonWidth=0<this._imageButtonWidth?0:this.$_buttonWidth(),this._editWidth=this.$_editButtonWidth(),this._errorWidth=this.$_errorWidth(),0<this._buttonWidth||0<this._editWidth||0<this._errorWidth||0<this._imageButtonWidth);!this._renderer||this._blankState!=Ds.NONE&&this._blankState!=Ds.HEAD&&this._index.itemIndex()!==this._grid._topIndex||(o||0<this._leftButtonsWidth?(r.leftBy(this._leftButtonsWidth+(this._isLeftImageButton?this._imageButtonWidth:0)),r.rightBy(-this._buttonWidth-this._editWidth-this._errorWidth-(this._isLeftImageButton?0:this._imageButtonWidth)),t.save(),t.clipRect(r),this._renderer.applyDynamicStyles(this),this._renderer.render(this,t,r),t.restore(),r.rightBy(this._buttonWidth+this._editWidth+this._errorWidth+(this._isLeftImageButton?0:this._imageButtonWidth)),r.leftBy(-this._leftButtonsWidth-(this._isLeftImageButton?this._imageButtonWidth:0))):(this._renderer.applyDynamicStyles(this),this._renderer.render(this,t,r))),o&&(o=r.clone(),this._dataColumn&&(i=this._dataColumn._editButtonVisibility===ys.ROWFOCUSED||this._dataColumn._buttonVisibility===ys.ROWFOCUSED),(0<=this._innerIndex||0<=this._hoverIndex||i)&&this._mergeRoom&&(n=this.grid(),this.isFocused()?s=n.layoutManager().getItemRect(n._focusedIndex.itemIndex()-n.topIndex()):this.isHovered()?s=n.layoutManager().getItemRect(this._mergeRoom.headItem()+this._hoverIndex-n.topIndex()):i&&(s=n.layoutManager().getItemRect(n._focusedIndex.itemIndex()-n.topIndex())),s)&&(o.y=s.y-this.topBy(n,0),o.height=s.height),0<this._buttonWidth&&this._imageButtonWidth<=0&&(o.setLeft(o.right()-this._buttonWidth),this.$_drawButton(t,o)),0<this._imageButtonWidth&&this._renderer&&this._renderer.doDrawButton&&this._renderer.doDrawButton(this,t,o),0<this._editWidth&&(o.set(r.x,o.y,r.width,o.height),o.rightBy(-this._buttonWidth-(this._isLeftImageButton?0:this._imageButtonWidth)),o.setLeft(o.right()-this._editWidth),this.$_drawEditorButton(t,o)),0<this._errorWidth)&&(o.set(r.x,o.y,r.width,o.height),o.rightBy(-this._buttonWidth-this._editWidth-(this._isLeftImageButton?0:this._imageButtonWidth)),o.setLeft(o.right()-this._errorWidth),this.$_drawError(t,o)),this._drawBordersWithBlank(t,e,this._blankState)},$_leftButtonsWidth:function(t,e){return!this._expandHandle||t.height>3*bh.EXPANDER_SIZE?0:16},_getButtonVisible:function(t){if("function"==typeof t)var e=t(this._grid.getHandler(),this.index().proxy(),this._focused,this._mouseEntered);else switch(t){case ys.ALWAYS:e=!0;break;case ys.HIDDEN:e=!1;break;case ys.VISIBLE:e=this._focused;break;case ys.ROWFOCUSED:e=this._grid&&this._grid.focusedIndex()&&this._grid.focusedIndex()._itemIndex==this._index._itemIndex||this._mouseEntered;break;default:ys.DEFAULT;e=this._focused||this._mouseEntered}return e},$_resetButtonVisible:function(){var t=this._dataColumn;t&&(this.setButton(t.button()),this.setButtonVisibility(t.buttonVisibility()),this.setEditButtonVisibility(t.editButtonVisibility()))},$_editButtonWidth:function(){var t,e,i=0,n=this.grid(),s=this._index.clone();return this instanceof Xh&&(0<=this._innerIndex?s.setItemIndex(s.itemIndex()+this._innerIndex):0<=this._hoverIndex&&s.setItemIndex(s.itemIndex()+this._hoverIndex)),i=n.canEdit(s)&&this._dataColumn&&(!this._renderer||this._renderer.canEditable())&&n._delegate.hasEditorButton(s)&&(t=!1,(t=$.areEquals(n.focusedIndex(),s)?!!(e=n.delegate().getCellEditor(s))&&e.isListing():t)||this._getButtonVisible(this._editButtonVisibility))&&(e=n._delegate.getCellEditButtonRenderer(s))?e.measure(s,0,this.height()).width:i},$_imageButtonWidth:function(){return this._renderer instanceof qc&&this._getButtonVisible(this._buttonVisibility)?this._renderer.measure(this._grid,this,0,this.height()).width:0},$_buttonWidth:function(){var t,e,i,n=0,s=this.grid();return n=this.button()!=Cs.NONE&&(t=this.isFocused(),e=this.index(),i=s.focusedIndex(),0<this._innerIndex&&(i=i.clone()).incRow(-this._innerIndex),i=$.areEquals(i,e),t?i||(this._focused=!1):i&&(this._focused=!0),this._getButtonVisible(this._buttonVisibility))&&(t=s.delegate().getCellButtonRenderer(e))?t.measure(e,0,this.height()).width:n},getButtonWidth:function(){if(this._renderer instanceof qc)return this._renderer.measure(this._grid,this,0,this.height()).width;if(this.button()!=Cs.NONE){var t=this.index(),e=this.grid().delegate().getCellButtonRenderer(t);if(e)return e.measure(t,0,this.height()).width}return 0},$_errorWidth:function(){var t;return this._error&&(t=bh.getErrorIcon(this.grid(),this._errorLevel))?t.width+4:0},$_drawEditorButton:function(t,e){this._grid._delegate.getCellEditButtonRenderer(this._index).render(this._index,t,e,this._editButtonHovered,this._editButtonPressed,this._focused)},$_drawButton:function(t,e){this.grid().delegate().getCellButtonRenderer(this.index()).render(this.index(),t,e,this._buttonHovered,this._buttonPressed,this._focused,this._buttonIndex),this._buttonIndex=void 0},$_drawError:function(t,e){var i,n,s,r=bh.getErrorIcon(this.grid(),this._errorLevel);r&&0<(i=r.width)&&0<(n=r.height)&&(s=B(e.x+(e.width-i)/2),e=B(e.y+(e.height-n)/2),t.drawImage(r,s,e,i,n))},cursor:function(t,e){var i,n;return this.ptInButton(t,e)?(i=this.getPtInButtonIndex(t,e),n=this._dataColumn.buttonCursor(),this._button===Cs.IMAGE&&this._dataColumn._imageButtonsRenderer&&(n=this._dataColumn._imageButtonsRenderer.getCursor(i)||n)):this.ptInDataButton(t,e)?(i=this.getPtInDataButtonIndex(t,e),n=this._renderer&&this._renderer.getCursor&&this._renderer.getCursor(i)):this._renderer&&this._renderer.getCursor&&(n=this._renderer.getCursor(this.index())),n||(e=(t=this.grid()).displayOptions().cursorCallback())&&(n=e(t.getHandler(),this.index().proxy(),this._focused,this._mouseEntered)),n||this._dataColumn&&this._dataColumn.cursor()}},{},function(t){var n={};t.getErrorIcon=function(t,e){var i=n[e];return i||(i=t.getImage(Y+X+"error_"+e+".png"))&&(n[e]=i),i}}),Eh=(bh.EXPANDER_SIZE=12,e("DataGroupCellElement",qa,{init:function(t){this._super(t,"dataGroupCellView")},layoutTreeContent:function(t){this._layoutTreeCells(t)},_layoutColumnRects:function(t){var e,i,n,s,r,o,a,h=this.grid(),l=this.group(),d=l.visibleCount(),u=l._layoutRect.width,c=this._height;if(l.isVertical())for(e=n=0;e<d;e++)o=l.getVisibleItem(e),a=this._cells[o.$_hash],r=1==h.getDataLevel()?c:o.measuredHeight(),o._layoutRect.set(0,n,u,r),n+=r,a instanceof Eh&&a._layoutColumnRects(t);else for(r=c,e=i=0;e<d;e++)o=l.getVisibleItem(e),a=this._cells[o.$_hash],s=e==d-1?u-i:o.displayWidth(),o._layoutRect.set(i,0,s,r),i+=s,a instanceof Eh&&a._layoutColumnRects(t)},_prepareCells:function(t){this.$_createCells(this.group())},_layoutCells:function(t){var e,i,n,s,r,o,a,h=this._width,l=this._height,d=this.group(),u=d.visibleCount();if(d.isVertical())for(e=a=0;e<u;e++)s=d.getVisibleItem(e),r=this._cells[s.$_hash],n=1==this.grid().getDataLevel()?l:s.measuredHeight(),r&&r.setBounds(0,a,h,n),a+=n,r instanceof Eh&&r._layoutCells(t);else for(n=l,e=o=0;e<u;e++)s=d.getVisibleItem(e),r=this._cells[s.$_hash],i=e==u-1?h-o:s.displayWidth(),r&&r.setBounds(o,0,i,n),o+=i,r instanceof Eh&&r._layoutCells(t)},_layoutTreeCells:function(t){var e,i,n,s,r,o,a,h=this._width,l=this._height,d=this.group(),u=d.visibleCount();if(d.isVertical())for(e=a=0;e<u;e++)s=d.getVisibleItem(e),r=this._cells[s.$_hash],n=s.measuredHeight(),s._layoutRect.set(0,a,h,n),r.setBounds(0,a,h,n),a+=n,r instanceof Eh&&r._layoutTreeCells(t);else for(o=0,n=l,e=u-1;0<=e;e--)s=d.getVisibleItem(e),r=this._getCell(s),o+=i=0==e?Math.max(0,h-o):Math.min(h,s.displayWidth()),s._layoutRect.set(h-o,0,i,n),r.setBounds(h-o,0,i,n),r instanceof Eh&&r._layoutTreeCells(t)},$_createCells:function(t){this.hideAll();for(var e,i,n,s=this.grid(),r=s.body(),o=this.index().I(),a=s._layoutManager,h=(a.leftPos(),0),l=t.visibleCount();h<l;h++)e=t.getVisibleItem(h),this._edgeColumn,(i=this._cells[e.$_hash])||(i=new(e instanceof M?bh:e instanceof Yl?Rh:Eh)(this._dom),this.$_setCell(e,i),this.addElement(i)),n=$.temp(s,o,e),e instanceof zl&&e.canMerge()&&a.getMergedCell(n)?i.setVisible(!1):i.setVisible(!0),n=r.getCell(n),i.updateCell(n),i.setMouseEntered(!1),i instanceof bh&&i.setFocused(!1),e instanceof zl||e instanceof R&&(i._edgeColumn=this._edgeColumn,i.$_createCells(e))}})),Rh=e("SeriesCellElement",bh,{init:function(t,e){this._super(t,e||"seriesCellView"),this._values=null},_doPrepareValue:function(t){this._super(t)},value:function(){return this._values},setValue:function(t){ue(t,this._values)||(this._values=t,this.invalidate())}}),Qa=e("ItemElement",Ra,{init:function(t,e){this._super(t,e),this._item=null},item:function(){return this._item},index:function(){return this._item.index()},itemIndex:function(){return this._item.index()},updateElement:function(t,e){this._item=t,this._doUpdateElement(e)},propertyChanged:function(t,e){this.invalidate()},_doLayoutContent:function(t){this._doLayoutHandles()},_doRender:function(t,e){},_doUpdateElement:function(t){}},{}),Sh=e("RowElement",Qa,{init:function(t,e){this._super(t,e),this._cells={}},fixed:!1,rightFixed:!1,findCell:function(t){if(t){var e=t.root(),i=this._cells[e.$_hash];if(i&&i.isVisible())return i=e!=t?i.findCell(t):i}return null},checkMerged:function(t){for(var e=t.firstCol(this._fixed,this.rightFixed),i=t.lastCol(this._fixed,this.rightFixed),n=e;n<=i;n++){var s=this._cells[t.getColumn(n).$_hash];s&&(t.getMergedCell(s.index())?s.setVisible(!1):s.setVisible(!0))}},_doUpdateElement:function(t){this._super(t)},_doMesasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t),0==this._layoutIndex&&this._layoutColumnRects(t)},_doRender:function(t,e){},_getCellView:function(t){return this._cells[t.$_hash]},_getFirstCell:function(t){var e=t.firstCol(this._fixed,this._rightFixed);return this._cells[t.getColumn(e).$_hash]},_clearChildren:function(){this.clear(),this._cells={}},_prepareCells:function(t){var e,i,n,s,r,o,a,h,l,d=this.grid(),u=d.body(),c=d.rowGroup(),_=(t.fixedColCount(),d.isHorzScrolling()),f=t.isColumnMerged(),m=c.isMergeExpander(),g=c.expandedAdornments()==A.BOTH,p=this.item().dataId(),w=H.isEditing(this.item().itemState());for(l in d.isColumnLayoutChanged()&&(this._clearChildren(),this._cells={}),this._cells)this._cells[l]._recycling=!1;if(_)for(s=t.prevFirst(this._fixed,this._rightFixed),r=t.prevLast(this._fixed,this._rightFixed),e=s;e<r;e++)i=t.getColumn(e),(n=this._cells[i.$_hash])&&(n instanceof Eh&&(n.x()<=t._leftPos||n.right()>=t._leftPos+t._nonfixedBounds.width)||n.index().dataId()!==p||d._updateRows&&0<=d._updateRows.indexOf(p)?n._recycling=!1:n._recycling=!0);for(this.hideAll(),s=t.firstCol(this._fixed,this._rightFixed),r=t.lastCol(this._fixed,this._rightFixed),e=s;e<=r;e++)i=t.getColumn(e),o=$.temp(d,this._item.index(),i),i instanceof zl&&t.getMergedCell(o)?((n=d.getCellView(d._mergeView,o))&&n.setFocused(!1),u.getCell(o)):(o=u.getCell(o),(n=this._cells[i.$_hash])||(n=new(i instanceof R?Eh:i instanceof Yl?Rh:bh)(this._dom),this._cells[i.$_hash]=n,this.addElement(n)),n.setVisible(!0),n instanceof bh&&(a=!1,f&&m&&i instanceof M&&i.isMergeGrouped()&&(a=1<(h=this._item.parent()).count()-(g?0:1)&&h.firstItem()==this._item),n.setExpanderVisible(a)),(this.grid()._dataChanged||w||!_||!n._recycling||n instanceof Rh)&&n.updateCell(o),n.setMouseEntered(!1),n instanceof bh&&n.setFocused(!1))},_layoutColumnRects:function(t){for(var e,i,n=this.grid().isHorzScrolling(),s=t.firstCol(this._fixed,this._rightFixed),r=t.lastCol(this._fixed,this._rightFixed),o=s;o<=r;o++)(e=this._cells[t.getColumn(o).$_hash])&&e.isVisible()&&((i=t.getColumnBounds(o)).height=this.height(),e.index().column()._layoutRect.copy(i),!(e instanceof Eh)||n&&e._recycling||e._layoutColumnRects(t))},_layoutCells:function(t){var e,i,n=this.grid().isHorzScrolling(),s=t.firstCol(this._fixed,this._rightFixed),r=t.lastCol(this._fixed,this._rightFixed),o=s;for(t.leftPos();o<=r;)(e=this._cells[t.getColumn(o).$_hash])&&e.isVisible()&&(e._fixed=this._fixed,(i=t.getColumnBounds(o)).height=this.height(),e.setRect(i),e instanceof Eh&&(e._fixed||o!=s&&o!=r?e._edgeColumn=!1:e._edgeColumn=!0),n&&e._recycling||e.layoutContent(t)),o++}},{}),Th=e("RowGroupBarCellElement",Ya,{init:function(t,e){this._super(t,e)},level:0,_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)}}),kh=e("RowGroupBarElement",ss,{init:function(t){this._super(t,"rowGroupBarView"),this._level=0,this._cells=[]},setLevel:function(t){this._level=t},$_checkCapacity:function(t){for(;this._cells.length<t;)this._cells.push(new Th(this._dom,"rowGroupBarCell"))},$_addCell:function(t,e,i,n,s){this.$_checkCapacity(e+1);e=this._cells[e],e.setBounds(0,i,n,s),e.setLevel(this._level),this.addElement(e),i=t.rowGroup().getBarCell(this._level);e.updateCell(i),e.invalidate()},$_isBarItem:function(t){return t instanceof Vr||t instanceof Pr&&t.isExpandable()},layoutCells:function(t,e){this.clear();var i=this.container().gridView(),n=0,s=0,r=this.width(),o=this.height();if(0<e.fixedItemCount()&&(s=e.itemBounds(e.fixedItemCount()-1).bottom(),this.$_addCell(i,n,0,r,s),n++),!(o<=s)){var a=i.topIndex(),h=t.length;if(h<1)this.$_addCell(i,n,s,r,o-s);else{var l,d,u,c,_=t[0];for((_.level()<=this._level||_.displayLevel()<=this._level)&&(d=_.index(),u=e.itemBounds(d-a),d>i.topItem())&&(this.$_addCell(i,n,s,r,u.y-s),n++),l=0;l<h-1;l++)_=t[l],!this.$_isBarItem(_)||_.level()!=this._level&&_.displayLevel()!=this._level||(c=t[l+1].index(),d=_.index(),d=(u=e.itemBounds(d-a)).bottom(),c=(u=e.itemBounds(c-a)).y,this.$_addCell(i,n,d,r,c-d),n++);_=t[l=h-1],this.$_isBarItem(_)&&(_.level()<=this._level||_.displayLevel()<=this._level)&&(d=_.index(),(u=e.itemBounds(d-a)).bottom()<this.y()+o)&&this.$_addCell(i,n,u.bottom(),r,this.y()+o-u.bottom())}}}}),Dh=e("RowGroupExpandHandle",Kr,{init:function(t,e){this._super(t,e,"rowGroupExpandHandle")},expanded:!1,background:null,isClickable:function(){return!0},_doDraw:function(t){var e,i,n,s,r,o=this.clientRect();this.isExpanded()?(e=t,i=o,n=9,s=this.background(),r=i.x+(i.width-n)/2,i=i.y+(i.height-n)/2,n/=9,e.drawPolygonArray(s,null,[r+0*n,i+2.75*n,r+4.5*n,i+7.25*n,r+9*n,i+2.75*n,r+8*n,i+1.75*n,r+4.5*n,i+5.25*n,r+n,i+1.75*n])):(e=t,s=o,r=9,i=this.background(),n=s.x+(s.width-r)/2,s=s.y+(s.height-r)/2,r/=9,e.drawPolygonArray(i,null,[n+1.75*r,s+r,n+5.25*r,s+4.5*r,n+1.75*r,s+8*r,n+2.75*r,s+9*r,n+7.25*r,s+4.5*r,n+2.75*r,s+0*r]))}}),Bh=e("RowGroupExpanderElement",Ya,{init:function(t,e){this._super(t,e),this._handle=new Dh(t,this),this.addElement(this._handle)},setHandleVisible:function(t){this._handle.setVisible(t)},_doUpdateContent:function(t){this._super(t);var e=t.styles(),e=(this._handle.setBackground(e.figureBackground()),t.index().item()instanceof C?t.index().item().isExpanded():t.index().item()instanceof Pr&&t.index().item().parent().isExpanded());this._handle.setExpanded(e)},_doLayoutContent:function(t){this._handle.setRect(this.clientRect())},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)}}),Oh=e("RowGroupItemBarElement",Ra,{init:function(t,e){this._super(t,e),this._index=0,this._expander=new Bh(t,"RowGroup expander"),this.addElement(this._expander)},setExpanderVisible:function(t){this._expander.setHandleVisible(t)},setIndex:function(t){this._index=t},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){var e=this.grid(),e=e.getItem(this._index)instanceof C?e.rowGroup().getHeaderBarCell($.temp(e,this._index)):e.rowGroup().getFooterBarCell($.temp(e,this._index)),i=this._expander;i.updateCell(e),i.setRect(this.clientRect()),i.layoutContent(t)},_doRender:function(t,e){t.drawRectI(g.WHITE,null,e)}}),Mh=e("RowGroupHeadCellElement",Ya,{init:function(t,e){this._super(t,e)},_doUpdateContent:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,t.header().minHeight())},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)}}),Fh=e("RowGroupFootCellElement",Ya,{init:function(t,e){this._super(t,e)},_doUpdateContent:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,t.footer().minHeight())},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)}}),Nh=e("RowGroupSummaryCellElement",Ya,{init:function(t,e){this._super(t,e)},_doUpdateContent:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,t.header().summary().minHeight())},_doRender:function(t,e){var i=this.background();i&&t.drawRectI(i,null,e),this._drawBorders(t,e)}}),Ss=e("RowGroupItemElement",Qa,{init:function(t,e){this._super(t,e)}}),Lh=e("RowGroupHeaderCellElement",Ya,{init:function(t){this._super(t,"rowGroupHeaderCellElement")},text:null,borderLeft:function(){return null},_doPrepareValue:function(t){this._super(t),this.setText(t.displayText())},_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,i)},_doRender:function(t,e){var i=this.background(),i=(i&&t.drawRect(i,null,e),this._getRenderRect(e)),i=this.inflatePadding(i);t.drawTextRect(this.font(),this.foreground(),this.text(),i,this.textAlign()),this._drawBorders(t,e)}}),Ah=e("RowGroupHeaderElement",Ss,{init:function(t){this._super(t,"rowGroupHeaderView"),this._cellView=new Lh(t),this.addElement(this._cellView)},cellView:function(){return this._cellView},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this._cellView.updateCell(this.grid().rowGroup().getHeaderCell(this.index())),this._cellView.setBounds(0,0,this.width(),this.height())},_doRender:function(t,e){}}),Vh=e("RowGroupFooterElement",Ss,{init:function(t){this._super(t,"rowGroupFooterView"),this._fixed=!1,this._rightFixed=!1,this._cells={}},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},setFixed:function(t){this._fixed=t},setRightFixed:function(t){this._rightFixed=t},getCell:function(t){return null},_doUpdateElement:function(t){this._super(t);t=this.item().parent();this._level=t.level()},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},_doRender:function(t,e){var i,n,s,r;this.isFixed()&&(i=(s=(r=this.grid().fixedOptions()).colBarStyles()).background(),n=s.borderRight(),s=s.borderLeft(),r=r.colBarWidth(),this.isRightFixed()?e.setRight(r):e.setLeft(e.right()-r),i&&t.drawRectI(i,null,e),n&&(r=e.right()-1,e.bottom(),t.drawVertLineI(n,r.y,e.bottom(),e.x)),s)&&this._rightFixed&&t.drawVertLineI(s,e.y,e.bottom(),e.x)},_doDraw:function(t){},_prepareCells:function(t){var e=this.grid(),i=(this._rowGroup=e.rowGroup(),this.isFixed()),n=this.isRightFixed(),s=t.firstCol(i,n),r=t.lastCol(i,n),o=e.groupFooterMergeManager(),a=0<o.count();for(e.isColumnLayoutChanged()&&(this.clear(),this._cells={}),this.hideAll(),d=s;d<=r;d++){var h=a&&o.findRoom(this._level,d);this._prepareCell(t,d,h)}if(a)for(var l=o.getRoomNames(this._level),d=0;d<l.length;d++)(h=o.getRoom(this._level,l[d]))&&(s>h.base()&&s<=h.last()||r<h.base()&&r>=h.start())&&this._prepareCell(t,h.base(),h)},_prepareCell:function(t,e,i){var n=this.grid(),s=this._rowGroup,t=t.getColumn(e),r=b(this._cells[t.$_hash],Ya),i=(r||(r=new(t instanceof R?oh:rh)(this._dom),this._cells[t.$_hash]=r,this.addElement(r)),r.setVisible(!i||i.base()==e),t instanceof zl&&r.setTextVisible(!i||i.base()==e),$.temp(n,this.index(),t)),e=s.getFooterCell(i);r.updateCell(e)},_layoutCells:function(t){var e,i,n,s,r=this.grid().leftPos(),o=this.height(),a=this.isFixed(),h=this.isRightFixed(),l=t.firstCol(a,h),d=t.lastCol(a,h),u=this.grid().groupFooterMergeManager(),c=0<u.count(),_=(this.grid(),this.grid()._items._groupedProvider),_=this._item._parent.isExpanded()?_._expandedAdornments==A.SUMMARY:A.isFooterOnly(_._collapsedAdornments),f=0<t.fixedColCount(),m=this._rowGroup.levelIndent(),g=(t.rowGroupLevels()-this._item.level()+1)*m,p=_&&(f&&a||!f)&&!h;for(v=l;v<=d;v++)(e=this._cells[t.getColumn(v).$_hash])._shiftLeft=0,(i=t.columnBounds(v)).height=o,c&&(C=u.findRoom(this._level,v))?(n=t.columnBounds(C.start()),s=t.columnBounds(C.last()),i.width=s.right()-n.x,i.x=n.x,p&&(l==C.start()?i.width+=g:i.x+=g,e._shiftLeft=g)):p&&(v==l?(i.width+=g,e._shiftLeft=g):i.x+=g),a||h||(i.x-=r),e.setRect(i),e.layoutContent(t);if(c)for(var w=u.getRoomNames(this._level),v=0;v<w.length;v++){var C=u.getRoom(this._level,w[v]);C&&(l>C.base()&&l<=C.last()||d<C.base()&&d>=C.start())&&(i=n=t.columnBounds(C.start()),s=t.columnBounds(C.last()),i.width=s.right()-n.x,p&&(l==C.start()?i.width+=g:i.x+=g,e._shiftLeft=g),i.height=o,a||h||(i.x-=r),(e=this._cells[t.getColumn(C.base()).$_hash]).setRect(i),e.layoutContent(t))}}}),Ph=e("RowGroupElement",Rs,{init:function(t,e){this._super(t,"rowGroupView",e),this._headElement=new ss(t,"rowGroupHeadContainer"),this.addElement(this._headElement),this._bodyElement=new ss(t,"rowGroupBodyContainer",!0),this.addElement(this._bodyElement),this._headerBarElement=new ss(t,"rowGroupHeaderBarContainer"),this.addElement(this._headerBarElement),this._footerBarElement=new ss(t,"rowGroupFooterBarContainer"),this.addElement(this._footerBarElement),this._barElement=new ss(t,"rowGroupBarContainer"),this.addElement(this._barElement),this._footElement=new ss(t,"rowGroupFootContainer"),this.addElement(this._footElement),this._summaryElement=new ss(t,"rowGroupSummaryContainer"),this.addElement(this._summaryElement),this._headerBuff=[],this._footerBuff=[],this._fixedFooterBuff=[],this._rfixedFooterBuff=[],this._heads=[],this._foots=[],this._headerBars=[],this._footerBars=[],this._bars=[],this._headers=[],this._footers=[],this._fixedFooters=[],this._rfixedFooters=[],this._tmpItems=[],this._headerItems=[],this._footerItems=[],this._headerViews=[],this._footerViews=[],this._fixedFooterViews=[],this._rfixedFooterViews=[],this._summarys=[],this.setWidth(200),this.setHeight(200)},destroy:function(){this._destroying=!0,this._headerBuff=null,this._footerBuff=null,this._fixedFooterBuff=null,this._rfixedFooterBuff=null,this._heads=null,this._foots=null,this._headerBars=null,this._footerBars=null,this._bars=null,this._headers=null,this._footers=null,this._fixedFooters=null,this._rfixedFooters=null,this._tmpItems=null,this._headerItems=null,this._footerItems=null,this._headerViews=null,this._footerViews=null,this._fixedFooterViews=null,this._rfixedFooterViews=null,this._summarys=null,this._super()},model:function(){return this._model},levelCount:function(){return this.grid().layoutManager().rowGroupLevels()},barCount:function(){return this._bars.length},getBar:function(t){return ne(0<=t&&t<this._bars.length,"rowgroup indicator index is invalid: "+t),this._bars[t]},clearBody:function(){this._headerItems=[],this._footerItems=[]},clearFooterViews:function(){this.$_clearFooterViews()},addHeader:function(t){this._headerItems.push(t)},addFooter:function(t){this._footerItems.push(t)},getCellView:function(t,e,i){var n,s,r=t.item(),o=this._bodyElement,a=o.childCount();if(r instanceof C||r instanceof Pr)for(n=0;n<a;n++){if((s=b(o.getChild(n),Ah))&&s.isVisible()&&s.index()==t.I())return s.cellView();if((s=b(o.getChild(n),Vh))&&s._fixed==e&&s._rightFixed==i&&s.isVisible()&&s.index()==t.I())return s}return null},isLayer:function(){return!0},isClickable:function(){return!1},_doMeasure:function(t,e,i){return this._prepareHeads(),this._prepareFoots(),this._prepareSummarys(),this._prepareBars(),new l(this.levelCount()*t.rowGroup().levelIndent(),i)},_doLayoutContent:function(t){var e,i,n,s,r,o,a,h=this.grid(),l=this.model().levelIndent(),d=(this._headElement.setBounds(0,0,this.width(),t.headerBounds().height),this._layoutHeads(t),t.footerBounds().height);for(this._footElement.setBounds(0,this.height()-d,this.width(),d),this._layoutFoots(t),this._summaryElement.setBounds(0,t.headerBounds().height,this.width(),t.summaryBounds().height),this._layoutSummarys(t),this._layoutBars(t),this._bodyElement.setBounds(0,t.headerBounds().height+t.summaryBounds().height,this.width(),this.height()-t.headerBounds().height-t.footerBounds().height-t.summaryBounds().height),this._layoutHeaders(t),this._prepareHeaderBars(),e=0,i=this._headerItems.length;e<i;e++)n=this._headerBars[e],s=this._headerItems[e],n.setIndex(s.index()),(r=t.itemBounds(s.index()-h.topIndex())).setLeft((s.level()-1)*l),r.width=l,this._headerBarElement.addElement(n),n.setRect(r),n.setExpanderVisible(!0),n.layoutContent(t);for(this._layoutFooters(t),this._prepareFooterBars(),e=0,i=this._footerItems.length;e<i;e++)(o=this._footerItems[e]).displayLevel()<=t.rowGroupLevels()&&((n=this._footerBars[e]).setIndex(o.index()),(r=t.itemBounds(o.index()-h.topIndex())).setLeft((o.displayLevel()-1)*l),r.width=o.isExpandable()?l:(t.rowGroupLevels()-o.displayLevel()+1)*l,this._footerBarElement.addElement(n),n.setRect(r),n.setExpanderVisible(o.isExpandable()),n.layoutContent(t));for(this._prepareBars(),e=0,i=t.rowGroupLevels();e<i;e++)(a=this._bars[e]).setBounds(e*l,0,l,this._barElement.height()),a.setLevel(e+1),this._barElement.addElement(a),this.$_collectItems(t,e+1),a.layoutCells(this._tmpItems,t)},_doDraw:function(t){},_prepareHeads:function(){for(var t,e=this.levelCount();this._heads.length<e;)t=new Mh(this._dom,"rowGroupHeadCell"),this._heads.push(t);for(;this._headElement.childCount()<e;)this._headElement.addElement(this._heads[this._headElement.childCount()]);for(;this._headElement.childCount()>e;)this._headElement.removeChildAt(this._headElement.childCount()-1)},_prepareFoots:function(){for(var t,e=this.levelCount();this._foots.length<e;)t=new Fh(this._dom,"rowGroupFootCell"),this._foots.push(t);for(;this._footElement.childCount()<e;)this._footElement.addElement(this._foots[this._footElement.childCount()]);for(;this._footElement.childCount()>e;)this._footElement.removeChildAt(this._footElement.childCount()-1)},_prepareSummarys:function(){for(var t,e=this.levelCount();this._summarys.length<e;)t=new Nh(this._dom,"rowGroupSummaryCell"),this._summarys.push(t);for(;this._summaryElement.childCount()<e;)this._summaryElement.addElement(this._summarys[this._summaryElement.childCount()]);for(;this._summaryElement.childCount()>e;)this._summaryElement.removeChildAt(this._summaryElement.childCount()-1)},_prepareHeaderBars:function(){var t;for(this._headerBarElement.clear();this._headerBars.length<this._headerItems.length;)t=new Oh(this._dom,"rowGroupHeaderBar"),this._headerBars.push(t)},_prepareFooterBars:function(){var t;for(this._footerBarElement.clear();this._footerBars.length<this._footerItems.length;)t=new Oh(this._dom,"rowGroupFooterBar"),this._footerBars.push(t)},$_collectItems:function(t,e){var i,n,s=this.grid(),r=s.topItem(),o=t.itemCount();for(this._tmpItems.splice(0,this._tmpItems.length),i=0;i<o;)(n=s.getItem(i+r)).displayLevel()<=e&&this._tmpItems.push(n),i++},_prepareBars:function(){var t,e=this.levelCount();for(this._barElement.clear();this._bars.length<e;)t=new kh(this._dom,"rowGroupBar"),this._bars.push(t)},$_removeHeaderView:function(t){var e=this._bodyElement.getChildIndex(t);0<=e&&(this._bodyElement.removeChildAt(e),t.validate(!0),this._headerBuff.push(t))},$_borrowHeaderView:function(t){t=0<this._headerBuff.length?this._headerBuff.pop():this.grid().delegate().borrowItemView(t,!1,!1);return t.recycling=!1,t},_layoutHeaders:function(t){for(var e,i,n,s,r=this.grid(),o=this.model(),a=o.levelIndent(),h=this._headerViews.length,l=0;l<h;l++)this._headerViews[l].recycling=!1;for(;h<this._headerItems.length;)e=this.$_borrowHeaderView(this._headerItems[h++]),this._bodyElement.addElement(e),this._headerViews.push(e);for(;h>this._headerItems.length;)this.$_removeHeaderView(this._headerViews[--h]),this._headerViews.pop();for(l=0;l<h;l++)s=this._headerItems[l],i=(e=this._headerViews[l]).item!==s,e.updateElement(s,o.headerStyles()),n=t.itemBounds(s.index()-r.topIndex()),s=s.level()*a,n.setLeft(s),n.width=this.width()-s-r.leftPos(),e.setRect(n),!i&&e.recycling||e.layoutContent(t)},$_removeFooterView:function(t){var e=this._bodyElement.getChildIndex(t);0<=e&&(this._bodyElement.removeChildAt(e),t.validate(!0),this._footerBuff.push(t))},$_removeFixedFooterView:function(t){var e=this._bodyElement.getChildIndex(t);0<=e&&(this._bodyElement.removeChildAt(e),t.validate(!0),this._fixedFooterBuff.push(t))},$_removeRightFixedFooterView:function(t){var e=this._bodyElement.getChildIndex(t);0<=e&&(this._bodyElement.removeChildAt(e),t.validate(!0),this._rfixedFooterBuff.push(t))},$_borrowFooterView:function(t){t=0<this._footerBuff.length?this._footerBuff.pop():this.grid().delegate().borrowItemView(t,!1,!1);return t.recycling=!1,t},$_borrowFixedFooterView:function(t){t=0<this._fixedFooterBuff.length?this._fixedFooterBuff.pop():this.grid().delegate().borrowItemView(t,!0,!1);return t.recycling=!1,t},$_borrowRightFixedFooterView:function(t){t=0<this._rfixedFooterBuff.length?this._rfixedFooterBuff.pop():this.grid().delegate().borrowItemView(t,!0,!0);return t.recycling=!1,t},$_clearFooterViews:function(){function t(t,e){for(var i,n=t.length-1;0<=n;n--)i=t[n],0<=(i=e.getChildIndex(i))&&e.removeChildAt(i),t.pop()}var e=this._bodyElement;t(this._footerViews,e),t(this._fixedFooterViews,e),t(this._rfixedFooterViews,e),this._footerBuff=[],this._rfixedFooterBuff=[],this._fixedFooterBuff=[]},_layoutFooters:function(t){for(var e,i,n,s,r,o,a=this.grid(),h=this.width(),l=this.model(),d=l.levelIndent(),u=0<t.fixedColCount(),c=(t.rfixedColCount(),this.levelCount(),a.rowGroup().isFooterCellMerge(),a._items._groupedProvider),_=this._footerViews.length,f=0;f<_;f++)this._footerViews[f].recycling=!1;for(;_<this._footerItems.length;)e=this.$_borrowFooterView(this._footerItems[_]),this._bodyElement.addElement(e),this._footerViews.push(e),_++;for(;_>this._footerItems.length;)this.$_removeFooterView(this._footerViews[--_]),this._footerViews.pop();for(f=0;f<_;f++)o=((i=this._footerItems[f])._parent.isExpanded()?c._expandedAdornments==A.SUMMARY:A.isFooterOnly(c._collapsedAdornments))&&!u,(e=this._footerViews[f])._fixed=!1,n=e.item!==i,e.updateElement(i,l.footerStyles()),s=t.itemBounds(i.index()-a.topIndex()),r=o?(i.level()-1)*d:t.rowGroupLevels()*d+t.fixedWidth(),s.setLeft(r),s.width=o?h-r-a.leftPos()+(i.level()-2)*d:h-r-a.leftPos(),e.setRect(s),!n&&e.recycling||e.layoutContent(t);for(_=this._fixedFooterViews.length,f=0;f<_;f++)this._fixedFooterViews[f].recycling=!1;for(;_<this._footerItems.length;)e=this.$_borrowFixedFooterView(this._footerItems[_]),this._bodyElement.addElement(e),this._fixedFooterViews.push(e),_++;for(;_>this._footerItems.length;)this.$_removeFixedFooterView(this._fixedFooterViews[--_]),this._fixedFooterViews.pop();for(f=0;f<_;f++)o=((i=this._footerItems[f])._parent.isExpanded()?c._expandedAdornments==A.SUMMARY:A.isFooterOnly(c._collapsedAdornments))&&u,(e=this._fixedFooterViews[f])._fixed=!0,n=e.item!==i,e.updateElement(i,l.footerStyles()),s=t.itemBounds(i.index()-a.topIndex()),r=o?(i.level()-1)*d:t.rowGroupLevels()*d,s.setLeft(r),s.width=o?t.fixedWidth()-a.fixedOptions().colBarWidth()+(t.rowGroupLevels()-i.level()+1)*d:t.fixedWidth()-a.fixedOptions().colBarWidth(),e.setRect(s),!n&&e.recycling||e.layoutContent(t);for(_=this._rfixedFooterViews.length,f=0;f<_;f++)this._rfixedFooterViews[f].recycling=!1;for(;_<this._footerItems.length;)e=this.$_borrowRightFixedFooterView(this._footerItems[_]),this._bodyElement.addElement(e),this._rfixedFooterViews.push(e),_++;for(;_>this._footerItems.length;)this.$_removeRightFixedFooterView(this._rfixedFooterViews[--_]),this._rfixedFooterViews.pop();a.fixedOptions().colBarWidth();for(f=0;f<_;f++)i=this._footerItems[f],(e=this._rfixedFooterViews[f])._fixed=!0,e._rightFixed=!0,n=e.item!==i,e.updateElement(i,l.footerStyles()),s=t.itemBounds(i.index()-a.topIndex()),r=t.rfixedLeft()-this._x,s.setLeft(r),s.width=t.rfixedWidth(),e.setRect(s),!n&&e.recycling||e.layoutContent(t)},_layoutHeads:function(t){for(var e=this.grid(),i=0,n=e.rowGroup().levelIndent(),s=t.headerBounds().height,r=0,o=this._headElement.childCount();r<o;r++){var a=this._heads[r],h=(a.setBounds(i,0,n,s),i+=n,e.rowGroup().getHeadCell(r+1));a.updateCell(h),a.layoutContent(t)}},_layoutFoots:function(t){for(var e=this.grid().rowGroup(),i=0,n=e.levelIndent(),s=t.footerBounds().height,r=0,o=this._footElement.childCount();r<o;r++){var a=this._foots[r],h=(a.setBounds(i,0,n,s),i+=n,e.getFootCell(r+1));a.updateCell(h),a.layoutContent(t)}},_layoutSummarys:function(t){for(var e=this.grid().rowGroup(),i=0,n=e.levelIndent(),s=t.summaryBounds().height,r=0,o=this._summaryElement.childCount();r<o;r++){var a=this._summarys[r],h=(a.setBounds(i,0,n,s),i+=n,e.getSummaryCell(r+1));a.updateCell(h),a.layoutContent(t)}},_layoutBars:function(t){var e=t.headerBounds().height+t.summaryBounds().height,i=this.grid().rowGroup().levelIndent()*t.rowGroupLevels(),t=t.indicatorBounds().height;this._barElement.setBounds(0,e,i,t),this._headerBarElement.setBounds(0,e,i,t),this._footerBarElement.setBounds(0,e,i,t)}}),Hh=e("GridMergeRule",null,{init:function(){this._super()},parseInit:function(t,e,i,n,s){a()},parseBounds:function(t,e,i,n,s){a()}}),Gh=e("RowGroupMergeRule",Hh,{init:function(){this._super(),this._level=0,this._mergeMode=!1},parseInit:function(t,e,i,n,s){var r=t.itemCount();(n=Math.min(r-i,n))<1||(this._mergeMode?this.$_parseMerged(t,e,i,n,s):this.$_parseNormal(t,e,i,n,s))},parseBounds:function(t,e,i,n,s){var r,o=t.itemCount();if(!(o<1)){for(i=Math.max(0,i);0<=i&&s[i]<=0&&(r=t.getItem(i))!=this.$_getAncestor(r,this._level);)i--;for(;i<=n&&0<s[i];)i++;i<=n&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,n,s):this.$_parseNormalBounds(t,e,i,n,s))}},$_getAncestor:function(t,e){for(var i=(i=b(t,C))||t.parent();i.level()>e;)i=i.parent();return i},$_parseNormal:function(t,e,i,n,s){var r=t.itemCount();if(!(r<1)){var o=t.getItem(i),a=o,h=i,l=h+1;for(s[h]=h+1;l<r;)((o=t.getItem(l)).level()!=a.level()||o.constructor!==a.constructor||o instanceof Pr||o instanceof Vr)&&(h=l),s[l]=h+1,l++,a=o}},$_parseMerged:function(t,e,i,n,s){var r=t.itemCount();if(!(r<1))for(var o,a=t.getItem(i),h=this.$_getAncestor(a,this._level),l=i,d=s[l]=l+1;d<r;){if(a=t.getItem(d),(o=this.$_getAncestor(a,this._level))!=h){if(n<=d)break;h=o,l=d}s[d]=l+1,d++}},$_parseNormalBounds:function(t,e,i,n,s){var r=t.itemCount();if(!(r<1)){var o=t.getItem(i),a=o,h=i,l=h+1;for(s[h]=h+1;l<r;)(o=t.getItem(l)).level()==a.level()&&o.constructor===a.constructor||(h=l),s[l]=h+1,l++,a=o}},$_parseMergedBounds:function(t,e,i,n,s){var r=t.itemCount();if(!(r<1)){var o,a=t.getItem(i),h=this.$_getAncestor(a,this._level),l=i,d=l+1;for(s[l]=l+1;d<r;){if(a=t.getItem(d),(o=this.$_getAncestor(a,this._level))!=h){if(n<d)break;h=o,l=d}s[d]=l+1,d++}}}}),$h=(Gh.$_default=new Gh,Gh.INIT_COUNT=200,Gh.getDefault=function(t,e){var i=Gh.$_default;return i._level=t,i._mergeMode=e,i},e("ColumnMergeRule",Hh,{init:function(t){this._super(),$h.$_runtime=$h.$_runtime||new mc,this._runtime=$h.$_runtime,this._exprNode=null,this.setCriteria(t)},criteria:null,setCriteria:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?ni.Default.parse(t,null):null,this._changed())},$_isRow:function(t,e){var i=t instanceof Ar&&!(t instanceof Xr);return i=i&&!e?(e=t.parent()).isExpanded()||e.firstItem()!=t:i},parseInit:function(t,e,i,n,s){var r=t.itemCount(),o=t.dataSource()._values.length;if(!((n=Math.min(r-i,n))<1||o<=0)){this._runtime.setDataSource(t.dataSource()),this._runtime.setColumn(this._column);for(var a=null,h=i;h<r&&(a=t.getItem(h),!this.$_isRow(a,!1));)s[h]=h+1,h++;if(!(r<=h)){var l,d="$$_EMPTY_TEXT_VALUE",u=this._exprNode.isIdentifier("value"),c=i=h;if(s[c]=c+1,!(a._dataRow>=o))for(d=u?a.getData(e):(this._runtime.setItem(a,e),this._exprNode.evaluate(this._runtime)),h=i+1;h<r;h++)if(a=t.getItem(h),this.$_isRow(a,!1)){if(a._dataRow>=o)break;if((l=u?a.getData(e):(this._runtime.setItem(a,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&d instanceof Date?+l!=+d:l!=d){if(n<=h)break;c=h,d=l}s[h]=c+1}else{if(n<=h)break;d="$$_EMPTY_TEXT_VALUE",s[c=h]=c+1}}}},parseBounds:function(t,e,i,n,s){var r=t.itemCount();if(!(r<1)){var o,a,h,l,d=this._exprNode.isIdentifier("value"),u=I,c=Math.max(0,i),_=c,f=-1;if(this._runtime.setDataSource(t.dataSource()),this._runtime.setColumn(this._column),0<c&&s[c]<=0)if(o=t.getItem(c),this.$_isRow(o,!1)){for(a=d?t.getItem(c).getData(e):(this._runtime.setItem(o,e),this._exprNode.evaluate(this._runtime)),c--;0<=c&&(o=t.getItem(c),this.$_isRow(o,!1))&&((u=d?o.getData(e):(this._runtime.setItem(o,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&a instanceof Date?+u==+a:u==a);)c--;for(h=_-1;c<h;h--)s[h]=c+2;c<_-1&&(f=c+1)}else{for(s[c]=c+1,h=_-1;c<h;h--)s[h]=c+2;for(c+1<_-1&&(f=c+2),c--;0<=c&&s[c]<=0&&!this.$_isRow(t.getItem(c),!1);)s[c]=c+1,c--}for(c=Math.max(0,i);c<=n&&0<s[c];)c++;for(;c<=n&&!this.$_isRow(t.getItem(c),!1);)s[c]=c+1,c++;if(c<n){for(_=c,o=t.getItem(c),a=d?o.getData(e):(this._runtime.setItem(o,e),this._exprNode.evaluate(this._runtime)),c++;c<r;)if(o=t.getItem(c),this.$_isRow(o,!1)){if((u=d?o.getData(e):(this._runtime.setItem(o,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&a instanceof Date?+u!=+a:u!=a){for(l=_,0<=f&&(l=f,f=-1),h=_;h<c;h++)s[h]=l+1;if(n<=c)break;a=u,_=c}else s[c]=_+1;c++}else{for(l=_,0<=f&&(l=f,f=-1),h=_;h<c;h++)s[h]=l+1;for(s[c]=c+1,c++;c<r&&!this.$_isRow(t.getItem(c),!1);)s[c]=c+1,c++;if(n<=(_=c))break}if(c==r&&u instanceof Date&&a instanceof Date?+u==+a:u==a)for(l=0<=f?f:_,h=_;h<c;h++)s[h]=l+1}}},_changed:function(){}},{INIT_COUNT:200,createRule:function(t){return t&&t.criteria?new $h(t.criteria):null}},function(t){t.$_runtime=null})),Uh=e("ColumnMergeRoom",e("GridMergeRoom",null,{init:function(){this._super()},scope:function(){},group:function(){},headItem:function(){return-1},tailItem:function(){return-1},getHead:function(t){},getTail:function(t){},isHead:function(t){},isTail:function(t){},contains:function(t){}}),{init:function(t){this._super(),this._column=t.C1(),this._head=t.top(),this._tail=t.bottom(),this._group=null},column:function(){return this._column},head:function(){return this._head},tail:function(){return this._tail},scope:function(){return this._column},group:function(){return this._group},setGroup:function(t){this._group=t},headItem:function(){return this._head},tailItem:function(){return this._tail},getHead:function(t){return t?t.set(this._head,this._column):t=this._column.grid().getIndex(this._head,this._column),t},getTail:function(t){return t?t.set(this._tail,this._column):t=this._column.grid().getIndex(this._tail,this._column),t},isHead:function(t){return t.column()==this._column&&t.I()==this._head},isTail:function(t){return t.column()==this._column&&t.I()==this._tail},contains:function(t){return t.column()==this._column&&t.I()>=this._head&&t.I()<=this._tail}},{$_rooms:[],$_roomCount:0,borrow:function(t){var e=Uh.$_rooms.pop();return e?(e._head=t.top(),e._tail=t.bottom()):(e=new Uh(t),_t("########### M E R G E R O O M: "+ ++Uh.$_roomCount)),e},returnTo:function(t){if(t){for(var e=Uh.$_rooms,i=0,n=e.length;i<n;i++)if(e[i]===t)return;e.push(t)}}}),Wh=e("ColumnMergeManager",null,{init:function(t){this._super(),this._column=t,this._flags=null,this._rooms=[],this._inited=!1},count:function(){return this._rooms.length},clear:function(){this._flags=null,this._rooms.splice(0,this._rooms.length),this._inited=!1},initialize:function(t){if(!this._inited){var e=this._column.grid(),i=(e.rowGroup(),e.itemSource()),n=b(this._column,M),s=e.getGroupLevel(n.dataIndex()),s=e.isGroupedColumn(n)?Gh.getDefault(s,e.rowGroup().isMergeMode()):this._column.mergeRule();if(s){for(var r=this._flags=new Array(i.itemCount()),o=i.itemCount();o--;)r[o]=0;s._column=n,s.parseInit(i,n.dataIndex(),e.fixedOptions().rowCount(),t,r)}this._inited=!0}},refresh:function(t,e){this._inited&&this._flags&&!(e<t)||this.initialize($h.INIT_COUNT);var i,n,s,r,o=this._column.grid(),a=o.layoutManager().fixedItemCount(),h=o.itemSource(),l=b(this._column,M),d=o.getGroupLevel(l.dataIndex()),u=0<d?Gh.getDefault(d,o.rowGroup().isMergeMode()):this._column.mergeRule(),c=t,_=o.displayOptions().isEditItemMerging();for(this._rooms.length=0,u&&(u._column=l,u.parseBounds(h,l.dataIndex(),t,e,this._flags));c<=e;)if(i=this.$_checkMerge(h,this._column,c,0==this._rooms.length,a)){if(d<1)(s=h.getItem(i.R2()))instanceof Kh||s instanceof zh||(n=new Uh(i),this._rooms.push(n));else if((s=(_?h.source():h).getItem(i.top())).level()>=d){for(r=s instanceof C?s:s.parent();r.level()>d;)r=r.parent();(n=new Uh(i)).setGroup(r),this._rooms.push(n)}c=i.R2()+1}else c+=1},getRooms:function(){return this._rooms.slice()},scroll:function(t){},getRoom:function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},findRoom:function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(t>=e[i]._head&&t<=e[i]._tail)return e[i];return null},$_checkMerge:function(t,e,i,n,s){if(t&&e&&0<=i){var r=i,o=this._flags[r],a=t.getItem(r),h=e.grid().displayOptions().isEditItemMerging();if(o<=0||H.isEditing(a.itemState())&&!h)return null;if(n)for(;s<r&&!(this._flags[r-1]<o||H.isEditing(t.getItem(r-1).itemState()));)r--;for(var l,d,u=t.itemCount(),c=i+1;c<u;){if(d=H.isEditing(t.getItem(c).itemState()),this._flags[c]>o||this._flags[c]<=0||d&&!h)return r+1<c||(a=t.getItem(r),l=e instanceof M?e.groupLevel():-1,a instanceof Kh&&a.isCollapsed())||a instanceof zh&&a.parent().level()==l&&(c==i+1||a.parent().isCollapsed())||(a instanceof Kh||a instanceof zh)&&a.parent().level()>l?ir.createRange(r,e,c-1,e):null;c++}if(r<c)return r+1<c||(a=t.getItem(r),l=e instanceof M?e.groupLevel():-1,a instanceof Kh&&a.isCollapsed())||a instanceof zh&&a.parent().level()==l&&(c==i+1||a.parent().isCollapsed())||(a instanceof Kh||a instanceof zh)&&a.parent().level()>l?ir.createRange(r,e,c-1,e):null}return null}},{MERGE_ROOMS:"mergeRooms"}),zh=e("MergedGroupFooter",Pr,{init:function(){this._super()},isMerged:function(){return!0}}),Kh=e("MergedGroupHeader",C,{init:function(t){this._super(),this._groupField=t,this._footer=null,this._hasFooter=!0},groupField:function(){return this._groupField},footer:function(){return this._footer},isMerged:function(){return!0},_addChild:function(t,e){this._super(t,e),t instanceof Pr&&(this._footer=t)}}),Yh=e("MergedDataCell",ga,{init:function(t){this._super(t||"mergedDataCell")},value:function(){var t=this.index(),e=t.item();return e instanceof Ar?this._super():(e=(e instanceof C?e:e.parent()).firstItem()).getData(t.dataField())}}),Xh=(e("MergedSeriesCell",ra,{init:function(){this._super("mergedSeriesCell")},displayText:function(){return null},value:function(){return I}}),e("MergedDataCellElement",bh,{init:function(t){this._super(t,"mergedDataCellView"),this._values=null,this._mergeRoom=null,this._topIndex=-1,this._bottomIndex=-1},mergeRoom:function(){return this._mergeRoom},setFocused:function(t){t!=this._focused&&(this._focused=t,this._doLayoutHandles&&this._doLayoutHandles(),this.invalidate(!1,!0))},invalidate:function(t,e){this._super(t,!0)},$_setMergeRoom:function(t){this._mergeRoom=t},_getButtonVisible:function(t){var e=this.grid(),i=-1,n=this._mergeRoom,s=e.focusedIndex()?e.focusedIndex().I():-1,r=t===ys.ROWFOCUSED?(n?s>=n.head()&&s<=n.tail():s==this.index().I())||this.isHovered():this._super(t);if(r){if(this.isFocused())i=e.focusedIndex().I();else if(this.isHovered())i=n?n.head()+this.hoverIndex():this.index().I();else if(t===ys.ROWFOCUSED)i=s;else if(t===ys.ALWAYS)return!n._group||n._group.isExpanded();return(r=e.getItem(i))&&r instanceof Ar&&r.canEdit()}return!1},_doPrepareValue:function(t){this._super(t)},_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t)},_doRender:function(t,e){this._super(t,e)},_drawBordersWithBlank:function(t,e,i){this._super(t,e,Ds.NONE)},clip:function(t){var e,i,n,s=this.grid();0<s.fixedOptions().colCount()?this._super(t):(n=s.layoutManager()._gridBounds,e=this.boundsBy(),this.getClientRect(this._drawRect),i=this._drawRect.clone(),e.x<n.x&&(n=n.x-e.x+s._x,i.x+=n,i.width-=n),t.clipRect(i))}})),qh=e("MergedSeriesCellElement",Rh,{init:function(t){this._super(t,"mergedSeriesCellElement"),this._values=null,this._mergeRoom=null,this._topIndex=-1,this._bottomIndex=-1},value:function(){return this._values},setValue:function(t){k(t)&&!function(t,e){if(k(t)&&k(e)){var i=t.length;if(e.length==i){for(var n=0;n<i;n++)if(t[n]!=e[n])return;return 1}}}(t,this._values)&&(this._values=t,this.invalidate())},mergeRoom:function(){return this._mergeRoom},$_setMergeRoom:function(t){this._mergeRoom=t}}),jh=e("MergedHeaderElement",Qa,{init:function(t){this._super(t,"mergedHeaderView"),this._cellView=new Lh(t),this.addElement(this._cellView)},setFixed:function(t){},setRightFixed:function(t){},_doUpdateElement:function(t){this._super(t)},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this._cellView.updateCell(this.grid().rowGroup().getHeaderCell(this.index())),this._cellView.setRect(this.clientRect())},_doRender:function(t,e){}}),Zh=e("MergedFooterElement",Qa,{init:function(t,e){this._super(t,"mergedFooterView"),this._fixed=e,this._cells=[]},destroy:function(){this._destroying=!0,this._cells=null,this._super()},fixed:!1,rightFixed:!1,setFixed:function(t){this._fixed=t},setRightFixed:function(t){this._rightFixed=t},_doUpdateElement:function(t){this._super(t),this._level=this.item().parent().level()},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this.$_prepareCells(t),this.$_layoutCells(t)},_doRender:function(t,e){},$_prepareCells:function(t){var e=this.grid(),i=Math.max(this._level,t.firstCol(this._fixed,this._rightFixed)),n=t.lastCol(this._fixed,this._rightFixed),s=(this._rowGroup=e.rowGroup(),e.groupFooterMergeManager()),r=0<s.count();for(e.isColumnLayoutChanged()&&(this.clear(),this._cells=[]),this.hideAll(),h=i;h<=n;h++){var o=r&&s.findRoom(this._level,h);this.$_prepareCell(t,h,o)}if(r)for(var a=s.getRoomNames(this._level),h=0;h<a.length;h++)(o=s.getRoom(this._level,a[h]))&&(i>o.base()&&i<=o.last()||n<o.base()&&n>=o.start())&&this.$_prepareCell(t,o.base(),o)},$_prepareCell:function(t,e,i){var n=this.grid(),s=this._rowGroup,t=t.getColumn(e),r=b(this._cells[t.$_hash],Ya),i=(r||(r=new(t instanceof R?oh:rh)(this._dom),this._cells[t.$_hash]=r,this.addElement(r)),r.setVisible(!i||i.base()==e),t instanceof zl&&r.setTextVisible(!i||i.base()==e),$.temp(n,this.index(),t)),e=s.getFooterCell(i);r.updateCell(e)},$_layoutCells:function(t){t.fixedColCount();for(var e,i,n=Math.max(this._level,t.firstCol(this._fixed,this._rightFixed)),s=t.lastCol(this._fixed,this._rightFixed),r=this.x(),o=this.height(),a=this.grid().groupFooterMergeManager(),h=0<a.count(),l=n;l<=s;l++){var d=this._cells[t.getColumn(l).$_hash],u=t.columnBounds(l);h&&(_=a.findRoom(this._level,l))&&(e=t.columnBounds(_.start()),i=t.columnBounds(_.last()),u.width=i.right()-e.x,u.x=e.x),u.x-=r,u.height=o,d.setRect(u),d.layoutContent(t)}if(h)for(var c=a.getRoomNames(this._level),l=0;l<c.length;l++){var _=a.getRoom(this._level,c[l]);_&&(n>_.base()&&n<=_.last()||s<_.base()&&s>=_.start())&&(u=e=t.columnBounds(_.start()),i=t.columnBounds(_.last()),u.width=i.right()-e.x,u.height=o,u.x-=r,(d=this._cells[t.getColumn(_.base()).$_hash]).setRect(u),d.layoutContent(t))}}}),Jh=e("GridMergeHeaderElement",Rs,{init:function(t){this._super(t,"mergedGroupHeadersContainer",null),this._views=[],this._headerMap={},this._headIndex=null,this._tailIndex=null},destroy:function(){this._destroying=!0,this._views=null,this._headerMap=null,this._headIndex=null,this._tailIndex=null,this._super()},clearHeaders:function(){var t,e;for(this._views=[],this._headerMap={},t=this.childCount()-1;0<=t;t--)(e=this.getChild(t)).setVisible(!1),this._views.push(e)},addHeader:function(t){var e=this._headerMap[t._id];e||((e=0<this._views.length?this._views.pop():null)||(e=new jh(this._dom),this.addElement(e),_t("########### M E R G E H E A D E R: "+this.childCount())),e._item=t,this._headerMap[t._id]=e),e.setVisible(!0)},getHeaderView:function(t){return this._headerMap[t._id]},getCellView:function(t){t=b(t.item(),Kh);return t?this._headerMap[t._id]:null},isLayer:function(){return!0},_doAttached:function(t){this._super(t),this._headIndex=new $(this.grid()),this._tailIndex=new $(this.grid())},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this.$_layoutHeaders(t)},_doDraw:function(t){},$_layoutHeaders:function(t){var e,i=this.grid(),n=i.rowGroup().headerStyles(),s=t.leftPos(),r=i.topIndex(),o=t.fixedColCount(),a=t.fixedItemCount(),h=t.fixedWidth(),l=this.width();for(e in this._headerMap){var d=this._headerMap[e],u=d.item(),c=u.index(),c=(d.updateElement(u,n),t.itemBounds(c<a?c:c-r)),u=(c.width=l,u.level()-1),_=t.columnBounds(u).right();0<o?o<=u?_=Math.max(_+h-s,h):u==o-1&&(_=h):0==o&&(_-=s),c.setLeft(_),c.width-=s,d.setRectI(c),d.layoutContent(t)}this._views=null}}),Qh=e("GridMergeElement",Rs,{init:function(t,e,i){this._super(t,"mergeLayer",null),this._fixed=e,this._rightFixed=i,this._footerLayer=new ss(t,"mergedFooterLayer"),this.addElement(this._footerLayer),this._cellLayer=new ss(t,"mergedCellLayer"),this.addElement(this._cellLayer),this._roomMap={},this._scopeViews={},this._footerMap={},this._footerViews=[]},destroy:function(){this._destroying=!0,this._roomMap=null,this._scopeViews=null,this._footerMap=null,this._footerViews=null,this._super()},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},clearFooters:function(){this._footerViews=[],this._footerMap={};for(var t=this._footerLayer.childCount()-1;0<=t;t--){var e=this._footerLayer.getChild(t);e.setVisible(!1),this._footerViews.push(e)}},addFooter:function(t){var e=this._footerMap[t._id];e||((e=this._footerViews.pop())||(e=new Zh(this._dom,this._fixed,this._rightFixed),this._footerLayer.addElement(e),_t("########### M E R G E F O O T E R: "+this._footerLayer.childCount())),e._item=t,this._footerMap[t._id]=e),e.setVisible(!0)},clearRooms:function(){this._roomMap={};for(var t=this._cellLayer.childCount()-1;0<=t;t--){var e=this._cellLayer.getChild(t),i=(e.setVisible(!1),e.mergeRoom()),i=this.$_getViews(i.scope());i.indexOf(e)<0&&i.push(e)}},addColumnRooms:function(t,e){for(var i=this.$_getViews(t),n=e.length-1;0<=n;n--){var s,r=e[n];0<i.length?s=i.pop():(s=this._createElement(r),this._cellLayer.addElement(s),_t("########### M E R G E C E L L: "+this._cellLayer.childCount())),s.setVisible(!0),s.$_setMergeRoom(r),this._roomMap[r.$_hash]=s}},getCellView:function(t){for(var e in this._roomMap){e=this._roomMap[e];if(e.mergeRoom().contains(t))return e&&e.isVisible()?e:null}var i=t.item();return i instanceof zh?this._footerMap[i._id]:null},getFooterView:function(t){return this._footerMap[t._id]},isLayer:function(){return!0},_doAttached:function(t){this._super(t);t=this.grid();this._headIndex=new $(t),this._tailIndex=new $(t)},_doMeasure:function(t,e,i){return new l(e,i)},_doLayoutContent:function(t){this.$_layoutCells(t),this.$_layoutFooters(t)},_doDraw:function(t){},$_getViews:function(t){var e=this._scopeViews[t.$_hash];return e||(this._scopeViews[t.$_hash]=e=[]),e},_createElement:function(t){var e=null;return t instanceof Uh&&((t=t.column())instanceof Yl?e=new qh(this._dom):t instanceof M&&(e=new Xh(this._dom))),e},$_layoutFooters:function(t){var e,i=this.grid().rowGroup(),n=i.footerStyles(),s=t.fixedColCount(),r=t.rfixedStartCol(),o=t.fixedItemCount(),a=t.topIndex(),h=t.itemCount(),l=this.isFixed(),d=this.isRightFixed();0<s&&t.leftPos(),i.isFooterCellMerge();for(e in this._footerMap){var u=this._footerMap[e],c=u._item,_=c.index();if(u.updateElement(c,n),(_=_<o?_:_-a)<0||h+o<=_)throw new Error("Invalid MergedGroupFooter index: "+_);_=t.itemBounds(_,l,d),c=(c=d?Math.max(r,c.parent().level()):l?c.parent().level():Math.max(s,c.parent().level()),t.columnBounds(c).x),_.setLeft(c),u.setRect(_),u.setFixed(this._fixed),u.setRightFixed(this._rightFixed),u.layoutContent(t)}this._footerViews=null},$_layoutCells:function(t){var e,i=this.grid(),n=i.rowGroup().isMergeMode(),s=i.rowGroup().isMergeExpander(),r=i.topItem(),o=i.topIndex(),a=t.itemCount(),h=t.fixedItemCount();for(e in this._roomMap){var l,d,u,c,_,f,m=this._roomMap[e],g=m.mergeRoom();g.getHead(this._headIndex),this._headIndex.I()-r>a-1?(m.setVisible(!1),(f=this.$_getViews(g.column())).indexOf(m)<0&&f.push(m)):(g.getTail(this._tailIndex),f=this._headIndex.column(),l=i.body().getCell(this._headIndex,!0),m.updateCell(l),d=(l=f.parent()instanceof Hu?t.columnBounds(f.displayIndex()):t.dataColumnBounds(f)).x,u=l.width,c=Math.min(h+a-1,Math.max(h,this._headIndex.I()-o)),l=t.itemBounds(c),m._topIndex=c,c=l.y,_=this._tailIndex.I(),g=g.group(),_=Math.min(h+a-1,Math.max(h,_-o)),m._bottomIndex=_,_=(l=t.itemBounds(_)).bottom()-c,m.setBoundsI(d,c,u,_),m instanceof Xh&&m.setExpanderVisible(n&&s&&null!=g),m.layoutContent(t))}}}),tl=e("FooterMergeRoom",null,{init:function(t,e,i,n,s){this._super(),this._name=t,this._base=e,this._start=i,this._count=n,this._colMap=s},name:null,base:-1,start:-1,count:0,last:function(){return this._start+this._count-1},startColumn:function(){return this._colMap[this._start]},lastColumn:function(){return this._colMap[this.last()]},containsColumn:function(t){for(var e in this._colMap)if(this._colMap[e].$_hash==t.$_hash)return t;return null},baseColumn:function(){return this._colMap.base}}),el=e("RowGroupFooterMergeRoom",tl,{init:function(t,e,i,n,s){this._super(e,i,n,s),this._groupLevel=t},groupLevel:-1}),il=e("FooterMergeManager",null,{init:function(){this.clearRooms()},clearRooms:function(){this._footerRooms={},this._length=0},count:function(){return this._length},getRoom:function(t){return this._footerRooms[t]},getRoomNames:function(){return Object.keys(this._footerRooms)},findRoomBy:function(t){for(var e in this._footerRooms){e=this._footerRooms[e];if(e.containsColumn(t))return e}},findRoom:function(t){for(var e in this._footerRooms){e=this._footerRooms[e];if(t>=e.start()&&t<=e.last())return e}return null},addRoom:function(t,e,i,n,s){this._footerRooms[t]=new tl(t,e,i,n,s),this._length++},setRoom:function(t,e,i,n){var s=this._footerRooms[t];s?(s._base=e,s._start=i,s._count=n):this.addFooter(t,e,i,n)},buildRooms:function(t,e){this.clearRooms();var i,n=t.fixedOptions().colCount();if(e)for(var s=0,r=e.length;s<r;s++){var o=t.columnByName(e[s][0]);if(o&&!(o instanceof R)){var a=o.displayIndex(),h=o.root().displayIndex()<n,l=o.isRightFixed(),d=o.group();if(!d||d.orientation()!=cs.VERTICAL){var u=[],c={};u.push(a),c.base=o,c[a]=o;for(var _,f=1,m=e[s].length;f<m;f++)(i=t.columnByName(e[s][f]))&&(_=i.root().displayIndex()<n,i)&&i.group()==d&&h==_&&l==i.isRightFixed()&&i instanceof zl&&(_=i.displayIndex(),u.push(_),c[_]=i);if(1<u.length){for(var g=a,p=a,o=(u.sort(function(t,e){return t-e}),u.indexOf(a)),f=o-1;0<=f&&u[f]==u[f+1]-1;f--)g=u[f];for(f=o+1;f<u.length&&u[f]==u[f-1]+1;f++)p=u[f];if(g<p){for(var f=0,w=u.length;f<w;f++)(u[f]<g||p<u[f])&&delete c[u[f]];this.addRoom(e[s][0],a,g,p-g+1,c)}}}}}}}),nl=e("RowGroupFooterMergeManager",null,{init:function(){this.clearRooms()},destroy:function(){this._groupFooterRooms=null,this._super()},clearRooms:function(){this._groupFooterRooms=[]},count:function(){return this._groupFooterRooms.length},getRoom:function(t,e){return this._groupFooterRooms[t]?this._groupFooterRooms[t][e]:null},getRoomNames:function(t){return this._groupFooterRooms[t]?Object.keys(this._groupFooterRooms[t]):[]},findRoom:function(t,e){if(this._groupFooterRooms[t])for(var i in this._groupFooterRooms[t]){i=this._groupFooterRooms[t][i];if(e>=i.start()&&e<=i.last())return i}return null},addRoom:function(t,e,i,n,s){this._groupFooterRooms[t]||(this._groupFooterRooms[t]={}),this._groupFooterRooms[t][e]=new el(t,e,i,n,s)},setRoom:function(t,e,i,n,s){var r=this._groupFooterRooms[t][i];r?(r._start=n,r._count=s):this.addGroupFooter(t,e,i,n,s)},buildRooms:function(t){var e,i=t.rowGroup(),n=t.fixedOptions().colCount();if(this.clearRooms(),i&&i.isFooterCellMerge()){var s=i.isMergeMode(),r=t.getGroupByFields(),o=t.dataSource();if(r&&o)for(var a=[],h=0;h<r.length;h++)a.push(o.getOrgFieldName(r[h]));var l=s?1:0,d=0,u=[];if(a)for(var h=0,c=t.getVisibleColumnCount();h<c;h++){var _=t.getVisibleColumn(h),_=_.fieldName&&_.fieldName();if(_&&-1<(e=a.indexOf(_)))0==u.length&&(d=h),u.push({name:_,col:h,level:e+1});else if(0<u.length)break}d+=l;for(h=0;h<u.length;h++){var f=s?d+h:d,m=s?u.length-h-1:u.length;1<(m=f<n?Math.min(n-f,m):m)&&u[h].col+l<f+m&&this.addRoom(u[h].level,u[h].name,u[h].col+l,f,m)}}}}),sl=e("GridBaseOptions",null,{init:function(t){this._super(),this._grid=t},destroy:function(){for(var t in this._destroying=!0,this._grid=null,this)(this[t]instanceof d||this[t]instanceof f||this[t]instanceof g)&&(this[t]=null);this._super()},grid:function(){return this._grid},_invalidateOwner:function(){this._grid&&this._grid.invalidate()},_layoutOwner:function(){this._grid&&this._grid.invalidateLayout()},_refreshOwner:function(){this._grid&&this._grid.refreshView()},_invalidateEditor:function(){this._grid&&this._grid.editController().invalidateEditor(),this._grid&&this._grid.editController().reprepareEditor(this._grid.focusedIndex())}}),rl=e("RowHoverMask",null,{init:function(t){this._super(t),this._visible=!1,this._styles=t&&t._body&&t._body._rowHoverStyles,this._hoverMask=Us.ROW},destroy:function(){this._destroying=!0,this._styles=null},visible:!1,hoverMask:Us.ROW,styles:null,setStyles:function(t){t!=this._styles&&(t?this._styles.extend(t):this._styles.clearValues())}}),ol=e("RowBlockMask",null,{init:function(t){this._super(t),this._visible=!1,this._styles=new d(this,"rowHoverStyles",u.Default&&u.Default.bodyRowHover()),this._BlockMask=Us.ROW,this._startIndex=-1,this._endIndex=-1},destroy:function(){this._destroying=!0,this._styles=null},visible:!1,blockMask:Us.ROW,styles:null,startIndex:null,endIndex:null,setStyles:function(t){t!=this._styles&&(t?this._styles.extend(t):this._styles.clearValues())}}),al=e("RowFocusOption",sl,{init:function(t){this._super(t),this._visible=!1,this._styles=t&&t._body&&t._body._rowFocusStyles,this._rowFocusMask=Us.ROW},destroy:function(){this._destroying=!0,this._styles=null},visible:!1,rowFocusMask:null,styles:null,setStyles:function(t){t!=this._styles&&(t?this._styles.extend(t):this._styles.clearValues())},assign:function(t){this._super(t);t=this._grid.displayOptions();t._rowFocusVisible=this._visible,t._rowFocusBackgroundBrush=this._styles.background(),t._rowFocusMask=this._rowFocusMask,t._refreshOwner()}}),hl=e("DisplayOptions",sl,{init:function(t){this._super(t),this._focusPen=new f(this._focusColor,this._focusBorderWidth),this._innerFocusPen=new f(this._innerFocusColor,1,[1,1]),this._focusActivePen=new f(this._focusActiveColor,this._focusBorderWidth),this._focusBackgroundBrush=new g(this._focusBackground),this._rowFocusBackgroundBrush=new g(this._rowFocusBackground),this._rowHoverMask=new rl(t),this._rowBlockMask=new ol(t),this._rowFocusOption=new al(t),this._scrollBarStyles=new d(this,"scrollBarStyles",u.Default&&u.Default.scrollBar()).addListener(this),this._scrollThumbStyles=new d(this,"scrollThumbStyles",u.Default&&u.Default.scrollThumb()).addListener(this),this._scrollButtonStyles=new d(this,"scrollButtonStyles",u.Default&&u.Default.scrollButton()).addListener(this),this._hscrollBarVisibility=js.DEFAULT,this._vscrollBarVisibility=js.DEFAULT,t.setWatchTimer(this._watchDisplayChange=!0)},destroy:function(){this._heightMeasurer=null,this._super()},columnResizable:!0,columnMovable:!0,parentChangable:!1,defaultColumnWidth:120,fitStyle:Es.NONE,rowResizable:!1,eachRowResizable:!1,rowHeight:0,minRowHeight:4,maxRowHeight:0,hscrollBar:!0,vscrollBar:!0,liveScroll:!0,horizLiveScroll:!0,scrollDuration:0,hscrollDuration:0,hintDuration:0,emptyShowTooltip:!1,rowChangeDelay:0,horzScrollStep:8,emptyMessage:"이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",showEmptyMessage:!1,heightMeasurer:null,fitWhenResized:!0,focusVisible:!0,rowFocusOption:null,rowFocusVisible:!1,rowFocusMask:Us.ROW,rowFocusBackground:null,wheelEnabled:!0,wheelScrollLines:3,wheelScrollHorz:16,wheelAccelDelay:0,wheelAccelScroll:null,wheelEventPropagate:!0,rightClickable:!0,editItemMerging:!1,showInnerFocus:!0,toastZIndex:3e3,focusBackground:null,focusColor:"#ff333333",innerFocusColor:"#ff333333",focusActiveColor:"#ff5292f7",focusBorderWidth:2,rowHoverMask:null,rowBlockMask:null,useCssStyleProgress:!1,popupDropdownCount:0,drawBorderTop:!0,drawBorderBottom:!0,drawBorderLeft:!0,drawBorderRight:!0,drawLastColumnRight:!0,scrollBarStyles:null,scrollThumbStyles:null,scrollButtonStyles:null,scrollMessageCallback:null,cursorCallback:null,watchDisplayChange:!0,hscrollBarVisibility:js.DEFAULT,vscrollBarVisibility:js.DEFAULT,setFitStyle:function(t){t!=this._fitStyle&&(this._grid._columnWidthsDirty=this._grid._columnWidthsDirty||t===Es.NONE,this._fitStyle=t,this._refreshOwner())},setRowHeight:function(t){isNaN(t)||(t=Math.max(0,t))!=this._rowHeight&&(this._rowHeight=t,this._refreshOwner())},setMinRowHeight:function(t){(t=Math.max(0,t))!=this._minRowHeight&&(this._minRowHeight=t,this._refreshOwner())},setMaxRowHeight:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._refreshOwner())},setHeightMeasurer:function(t){t!=this._heightMeasurer&&("fixed"==(this._heightMeasurer=t)?this._grid.setHeightMeasurer(Ql.Default):this._grid.setHeightMeasurer(null))},setFitWhenResized:function(t){t!=this._setFitWhenResized&&(this._setFitWhenResized=t,this._refreshOwner())},setFocusVisible:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._refreshOwner())},setShowInnerFocus:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._refreshOwner())},setRowResizable:function(t){t!=this._rowResizable&&(this._rowResizable=t,this._refreshOwner())},setEachRowResizable:function(t){t!=this._eachRowResizable&&(this._eachRowResizable=t,this._refreshOwner())},setFocusColor:function(t){t&&t!=this._focusColor&&(this._focusColor=t,this._focusPen=new f(t,this._focusBorderWidth),this._refreshOwner())},setInnerFocusColor:function(t){t&&t!=this._innerFocusColor&&(this._innerFocusColor=t,this._innerFocusPen=new f(t,1,[1,1]),this._refreshOwner())},setFocusBackground:function(t){t!=this._focusBackground&&(this._focusBackground=t,this._focusBackgroundBrush=new g(t),this._refreshOwner())},setHscrollBarVisibility:function(t){t!=this._hscrollBarVisibility&&(this._hscrollBarVisibility=t,this._refreshOwner())},setVscrollBarVisibility:function(t){t!=this._vscrollBarVisibility&&(this._vscrollBarVisibility=t,this._refreshOwner())},$_changeEditorBorder:function(t,e){var i,n=this.grid(),s=n&&n.delegate(),r=s&&s._cellEditors;for(i in r)r[i]._displayOptions=n.displayOptions()},setFocusActiveColor:function(t){t&&t!=this._focusActiveColor&&(this._focusActiveColor=t,this._focusActivePen=new f(t,this._focusBorderWidth),this.$_changeEditorBorder())},setFocusBorderWidth:function(t){t&&!isNaN(t)&&t!=this._focusBorderWidth&&(this._focusBorderWidth=t,this._focusPen=new f(this._focusColor,t),this._focusActivePen=new f(this._focusActiveColor,t),this.$_changeEditorBorder())},setHintDuration:function(t){var e;t!=this._hintDuration&&(this._hintDuration=t,(e=this.grid()).toolTipManager)&&e.toolTipManager()&&(e.toolTipManager()._hintDuration=t)},setRowFocusBackground:function(t){t!=this._rowFocusBackground&&(this._rowFocusBackground=t,this._rowFocusBackgroundBrush=null,t&&(this._rowFocusBackgroundBrush=new g(this._rowFocusBackground)),this._refreshOwner()),this._rowFocusOption.styles().background(this._rowFocusBackgroundBrush)},setRowFocusVisible:function(t){t!=this._rowFocusVisible&&(this._rowFocusVisible=t,this._refreshOwner()),this._rowFocusOption._visible=this._rowFocusVisible},setRowFocusMask:function(t){t!=this._rowFocusMask&&(this._rowFocusMask=t,this._refreshOwner()),this._rowFocusOption._rowFocusMask=this._rowFocusMask},propertyChanged:function(){this._refreshOwner()},setRowHoverMask:function(t){t!=this._rowHoverMask&&this._rowHoverMask.assign(t)},setRowBlockMask:function(t){var e=this._grid.activeTool();t!=this._rowBlockMask&&(this._rowBlockMask.assign(t),e)&&e.setRowBlockView(this._rowBlockMask._startIndex,this._rowBlockMask._endIndex)},setRowFocusOption:function(t){t!=this._rowFocusOption&&this._rowFocusOption.assign(t)},setUseCssStyleProgress:function(t){var e=this._grid._progressManager;t!=this._useCssStyleProgress&&(this._useCssStyleProgress=t)&&e&&e.setUseCssStyleProgress(t)},setPopupDropdownCount:function(t){var e=this._grid.popupMenuManager();e&&t!=e.dropdownCount()&&(this._popupDropdownCount=t,e.setDropdownCount(t))},setCursorCallback:function(t){this._cursorCallback=t=t&&"function"==typeof t?t:null},setScrollBarStyles:function(t){t!=this._scrollBarStyles&&(t?this._scrollBarStyles.extend(t):this._scrollBarStyles.clearValues()),this._refreshOwner()},setScrollThumbStyles:function(t){t!=this._scrollThumbStyles&&(t?this._scrollThumbStyles.extend(t):this._scrollThumbStyles.clearValues()),this._refreshOwner()},setScrollButtonStyles:function(t){t!=this._scrollButtonStyles&&(t?this._scrollButtonStyles.extend(t):this._scrollButtonStyles.clearValues()),this._refreshOwner()},setWatchDisplayChange:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this._grid.setWatchTimer(t))},proxy:function(){var t=this._super();return t.hasOwnProperty("rowHeight")&&t.rowHeight<=0&&this._grid._layoutManager._heightMeasurer&&(t.rowHeight=this._grid._layoutManager._heightMeasurer._itemHeight),t},onVisualStylesChanged:function(){this._refreshOwner()}}),ll=e("EditOptions",sl,{init:function(t){this._super(t)},readOnly:!1,editable:!_e(),checkable:!0,updatable:!0,appendable:!1,insertable:!1,deletable:!1,revertable:!1,editWhenFocused:!1,commitWhenNoEdit:!1,commitWhenExitLast:!1,crossWhenExitLast:!1,validateOnEdited:!0,validateOnExit:!1,hintOnError:!0,deleteRowsMessage:window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",invalidFormatMessage:window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",showInvalidFormatMessage:!0,deleteRowsConfirm:!0,confirmWhenDelete:!0,editWhenClickFocused:!1,commitLevel:Is.IGNORE,useTabKey:!0,useArrowKeys:!0,skipReadOnly:!1,skipReadOnlyCell:!1,verticalMovingStep:Hs.DEFAULT,enterToTab:!1,enterToNextRow:!1,enterToEdit:!1,maxLengthToNextCell:!1,forceInsert:!1,forceAppend:!1,checkDiff:!1,checkCellDiff:!1,strictDiff:!1,deletableWhenEdit:!0,showCommitError:!0,firstCellWhenInsert:!1,appendWhenInsertKey:!1,appendWhenExitLast:!1,showOnlyValidationMessage:!0,displayEmptyEditRow:!1,checkWhenSpace:!1,buttonClickWhenSpace:!1,exitGridWhenTab:null,innerDraggable:!1,exceptDataClickWhenButton:!1,deleteRowsConfirm_:function(){return this._confirmWhenDelete},setDeleteRowsConfirm:function(t){this.setConfirmWhenDelete(t)},setReadOnly:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())},setEditable:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())},isWritable:function(){return this._editable&&!this._readOnly},canUpdate:function(t){return!this._readOnly&&(t||this._updatable)},canInsert:function(){return!this._readOnly&&this._insertable},canAppend:function(){return!this._readOnly&&this._appendable},canDelete:function(){return!this._readOnly&&this._deletable},setAppendable:function(t){this._appendable=t,this.setDisplayEmptyEditRow(this._displayEmptyEditRow)},setDisplayEmptyEditRow:function(t){var e=this.grid();e&&e instanceof X_?this._displayEmptyEditRow=!1:(this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?this._grid._items.appendDummy():this._grid._items.cancelDummy(),this._refreshOwner())}}),dl=e("EditorOptions",sl,{init:function(t){this._super(t),this._titleExprStatement=null,this._titleExprRuntime=new Ic,this._holidayCollection=null},yearDisplayFormat:window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",monthDisplayFormat:window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",months:null,weekDays:null,viewGridInside:!1,useCssStyle:!1,useCssStyleDropDownList:!1,useCssStyleDatePicker:!1,useCssStylePopupMenu:!1,useCssStyleMultiCheck:!1,applyCellFont:!1,titleStatement:null,holidays:null,editorZIndex:2e3,listZIndex:3e3,setTitleStatement:function(t){t!=this._titleStatement&&((this._titleStatement=t)?this._titleExprStatement?this._titleExprStatement.setSource(t):this._titleExprStatement=new _r(t):this._titleExprStatement=null)},setHolidays:function(t){t!=this._holidays&&((this._holidays=t)?(this._holidayCollection=this._holidayCollection||new Rd,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear())}}),ul=e("FixedOptions",sl,{init:function(t){this._super(t),this._styles=new d(this,"fixedBody"),this._rowBarStyles=new d(this,"fixedRowBar"),this._colBarStyles=new d(this,"fixedColumnBar")},destroy:function(){this._destroying=!0,this._styles=null,this._rowBarStyles=null,this._colBarStyles=null,this._super()},colCount:0,rightColCount:0,rowCount:0,exceptFromFiltering:!0,exceptFromSorting:!0,editable:!0,rowEditable:!0,resizable:!1,rowResizable:!1,movable:!1,colBarWidth:3,rowBarHeight:3,ignoreColumnStyles:!1,ignoreDynamicStyles:!1,styles:null,rowBarStyles:null,colBarStyles:null,onStyleChanged:null,setColCount:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this._grid&&this._grid.$_rowGroupFooterMergeChanged(),this._grid&&this._grid.$_footerMergeChanged(),this._grid&&this._grid.$_headerSummaryMergeChanged(),this._refreshOwner())},setRightColCount:function(t){(t=Math.max(0,t))!=this._rightColCount&&(this._rightColCount=t,this._grid&&this._grid.$_rowGroupFooterMergeChanged(),this._grid&&this._grid.$_footerMergeChanged(),this._grid&&this._grid.$_headerSummaryMergeChanged(),this._refreshOwner())},setRowCount:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},setEditable:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},setRowEditable:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},setExceptFromFiltering:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},setExceptFromSorting:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},setIgnoreColumnStyles:function(t){t!=this._ignoreColumnStyles&&(this._ignoreColumnStyles=t,this._refreshOwner())},setIgnoreDynamicStyles:function(t){t!=this._ignoreDynamicStyles&&(this._ignoreDynamicStyles=t,this._refreshOwner())},setColBarWidth:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},setRowBarHeight:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},$_resetItemSource:function(){var t=this.grid();t&&(t=t.itemSource())&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},stylesChanged:function(t){this._refreshOwner()}}),cl=e("SelectOptions",sl,{init:function(t){this._super(t),this._maskStyles=new d(this,"selectMask"),this._mobileStyles=new d(this,"mobileSelection",{background:new g(268435456),border:new f(4281545523,2),figureBackground:new g(4281545523),figureBorder:new f(4292730333,1)})},destroy:function(){this._destroying=!0,this._maskStyles=null,this._mobileStyles=null,this._super()},rangeSelect:!0,mode:{init:ks.SINGLE,set:function(t){this._mode=t,this.grid().clearSelection()}},style:{init:G.BLOCK,set:function(t){var e;t!=this._style&&(0<(e=this.grid().selections()).count()&&(e.getItem(0).getBounds(),e.clear()),this._style=t,this._refreshOwner())}},maskStyles:{set:function(t){t!==this._maskStyles&&(this._maskStyles.extend(t),this._refreshOwner())}},mobileStyles:{set:function(t){t!==this._mobileStyles&&(this._mobileStyles.extend(t),this._refreshOwner())}},proxy:function(){var t=this._super();return t.mobileStyles={background:d.getFillText(this._mobileStyles.background()),border:d.getStrokeText(this._mobileStyles.border()),figureBackground:d.getFillText(this._mobileStyles.figureBackground()),figureBorder:d.getStrokeText(this._mobileStyles.figureBorder())},t}}),_l=e("SortHandleImageOptions",null,{init:function(t){this._super(),t&&this.assign(t)},ascending:null,descending:null,hoveredAscending:null,hoveredDescending:null,none:null,hoveredNone:null,loadImages:function(t){t.getImage(this._ascending),t.getImage(this._descending),t.getImage(this._hoveredAscending),t.getImage(this._hoveredDescending),t.getImage(this._none),t.getImage(this._hoveredNone)}}),fl=e("SortingOptions",sl,{init:function(t){this._super(t),this._toast=new Do,this._toast._visible=!1,this._toast._message="Sorting...",this._handleImages=new _l,this._sortOrderStyles=new d(this,"sortOrderStyles",{textAlignment:"near"})},destroy:function(){this._destroying=!0,this._toast=null,this._handleImages=null,this._sortOrderStyles=null,this._destroy()},enabled:!0,style:gs.EXCLUSIVE,handleVisibility:fs.VISIBLE,handleColor:void 0,handleNoneColor:void 0,hoveredHandleColor:void 0,hoveredHandleNoneColor:void 0,handleBorderColor:void 0,imageHandle:!1,handleImages:null,commitBeforeSorting:!0,toast:null,keepFocusedRow:!1,textCase:ws.SENSITIVE,showSortOrder:!1,sortOrderStyles:void 0,pageSorting:!1,setHandleVisibility:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},setHandleColor:function(t){t!=this._handleColor&&(this._handleColor=t,this._handleFill=t?new g(t):g.GRAY,this._refreshOwner())},setHandleNoneColor:function(t){t!=this._handleNoneColor&&(this._handleNoneColor=t,this._handleNoneFill=t?new g(t):g.EMPTY,this._refreshOwner())},setHoveredHandleColor:function(t){t!=this._hoveredHandleColor&&(this._hoveredHandleColor=t,this._hoveredHandleFill=t?new g(t):g.GRAY,this._refreshOwner())},setHoveredHandleNoneColor:function(t){t!=this._hoveredHandleNoneColor&&(this._hoveredHandleNoneColor=t,this._hoveredHandleNoneFill=t?new g(t):g.GRAY,this._refreshOwner())},setHandleBorderColor:function(t){t!=this._handleBorderColor&&(this._handleBorderColor=t,this._handleBorderPen=t?new f(t):f.GRAY,this._refreshOwner())},setShowSortOrder:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._refreshOwner())},setSortOrderStyles:function(t){t!==this._sortOrderStyles&&(this._sortOrderStyles.extend(t),this._refreshOwner())},handleFill:function(){return this._handleFill},handleNoneFill:function(){return this._handleNoneFill},setToast:function(t){t!=this._toast&&this._toast.assign(t)},setHandleImages:function(t){this._handleImages.assign(t)},setPageSorting:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._grid)&&this._grid.setPageSorting(t)}}),ml=e("FilterSelectorOptions",null,{init:function(t){this._super(),this._styles=new d(this,"filterSelectorStyles"),t&&this.assign(t)},destroy:function(){this._destroying=!0,this._styles=null,this._super()},minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,styles:null,closeWhenClick:!1,useCssStyle:!1,showButtons:!1,showSearchInput:!1,acceptText:null,cancelText:null,userFilterAddCallback:null,viewGridInside:!0,enterCallback:!1,setMinWidth:function(t){this._minWidth=t?pn.createFrom(t):void 0},setMaxWidth:function(t){this._maxWidth=t?pn.createFrom(t):void 0},setMinHeight:function(t){this._minHeight=t?pn.createFrom(t):void 0},setMaxHeight:function(t){this._maxHeight=t?pn.createFrom(t):void 0},getMinWidth:function(t){return this._minWidth?this._minWidth.getSize(t):void 0},getMaxWidth:function(t){return this._maxWidth?this._maxWidth.getSize(t):void 0},getMinHeight:function(t){return this._minHeight?this._minHeight.getSize(t):void 0},getMaxHeight:function(t){return this._maxHeight?this._maxHeight.getSize(t):void 0}}),gl=e("FilterHandleImageOptions",null,{init:function(t){this._super(),t&&this.assign(t)},none:null,fill:null,hoveredNone:null,hoveredFill:null,loadImages:function(t){t.getImage(this._none),t.getImage(this._fill),t.getImage(this._hoveredNone),t.getImage(this._hoveredFill)}}),pl=e("FilteringOptions",sl,{init:function(t){this._super(t),this._selector=new ml,this._handleImages=new gl,this._toast=new Do,this._toast._visible=!1,this._toast._message="Filtering..."},destroy:function(){this._destroying=!0,this._selector=null,this._handleImages=null,this._toast=null,this._super()},enabled:!0,handleVisibility:fs.VISIBLE,handleColor:void 0,handleNoneColor:void 0,hoveredHandleColor:void 0,hoveredHandleNoneColor:void 0,handleBorderColor:void 0,imageHandle:!1,handleImages:null,commitBeforeFiltering:!0,selector:null,toast:null,addParentNodeOnFiltering:!0,clearWhenSearchCheck:!0,setSelector:function(t){this._selector.assign(t)},setToast:function(t){this._toast.assign(t)},setHandleImages:function(t){this._handleImages.assign(t)},setHandleColor:function(t){t!=this._handleColor&&(this._handleColor=t,this._handleFill=t?new g(t):g.GRAY,this._refreshOwner())},setHandleNoneColor:function(t){t!=this._handleNoneColor&&(this._handleNoneColor=t,this._handleNoneFill=t?new g(t):g.GRAY,this._refreshOwner())},setHoveredHandleColor:function(t){t!=this._hoveredHandleColor&&(this._hoveredHandleColor=t,this._hoveredHandleFill=t?new g(t):g.GRAY,this._refreshOwner())},setHoveredHandleNoneColor:function(t){t!=this._hoveredHandleNoneColor&&(this._hoveredHandleNoneColor=t,this._hoveredHandleNoneFill=t?new g(t):g.GRAY,this._refreshOwner())},setHandleBorderColor:function(t){t!=this._handleBorderColor&&(this._handleBorderColor=t,this._handleBorderPen=t?new f(t):f.GRAY,this._refreshOwner())},setAddParentNodeOnFiltering:function(t){var e,i;t!=this._addParentNodeOnFiltering&&(this._addParentNodeOnFiltering=t,e=this.grid())&&e instanceof X_&&(i=e._items)&&i instanceof P_&&(i._addParentNodeOnFiltering=t,e.applyFilters())}}),wl=e("HeaderCheckImageOptions",null,{init:function(t){this._super(),t&&this.assign(t)},none:void 0,fill:void 0,hoveredNone:void 0,hoveredFill:void 0,loadImages:function(t){t.getImage(this._none),t.getImage(this._fill),t.getImage(this._hoveredNone),t.getImage(this._hoveredFill)}}),vl=e("ColumnHeaderOptions",sl,{init:function(t){this._super(t),this._checkImages=new wl},destroy:function(){this._destroying=!0,this._checkImages=null,this._super(),this._popupMenuWidth=7},checkVisibility:fs.ALWAYS,imageCheckHandle:!1,checkImages:null,checkColor:void 0,checkNoneColor:void 0,hoveredCheckColor:void 0,hoveredCheckNoneColor:void 0,checkBorderColor:void 0,popupMenuColor:void 0,hoveredPopupMenuColor:void 0,popupMenuWidth:void 0,setCheckVisibility:function(t){t!=this._checkVisibility&&(this._checkVisibility=t,this._refreshOwner())},setCheckImages:function(t){this._checkImages.assign(t)},setCheckColor:function(t){t!=this._checkColor&&(this._checkColor=t,this._checkFill=t?new g(t):g.GRAY,this._refreshOwner())},setCheckNoneColor:function(t){t!=this._checkNoneColor&&(this._checkNoneColor=t,this._checkNoneFill=t?new g(t):g.GRAY,this._refreshOwner())},setHoveredCheckColor:function(t){t!=this._hoveredCheckColor&&(this._hoveredCheckColor=t,this._hoveredCheckFill=t?new g(t):g.GRAY,this._refreshOwner())},setHoveredCheckNoneColor:function(t){t!=this._hoveredCheckNoneColor&&(this._hoveredCheckNoneColor=t,this._hoveredCheckNoneFill=t?new g(t):g.GRAY,this._refreshOwner())},setCheckBorderColor:function(t){t!=this._checkBorderColor&&(this._checkBorderColor=t,this._checkBorderPen=t?new f(t):f.GRAY,this._refreshOwner())},setPopupMenuColor:function(t){t!=this._popupMenuColor&&(this._popupMenuColor=t,this._popupMenuPen=t?new f(t):f.GRAY,this._refreshOwner())},setHoveredPopupMenuColor:function(t){t!=this._hoveredPopupMenuColor&&(this._hoveredPopupMenuColor=t,this._hoveredPopupMenuPen=t?new f(t):SoildPen.DKGRAY,this._refreshOwner())},propertyChanged:function(){this._refreshOwner()}}),Cl=e("GroupRemoveButton",null,{init:function(t){this._super(t),this._grid=t,this._visible=!1,this._fill=g.DKGRAY,this._hoveredFill=g.DKGRAY,this._color=g.DKGRAY.toText(),this._hoveredColor=g.DKGRAY.toText(),this._size=12},visible:!1,color:null,hoveredColor:null,size:0,buttonGap:4,setColor:function(t){t!=this._color&&(this._color=t,this._fill=t?new g(t):g.DKGRAY)},setHoveredColor:function(t){t!=this._hoveredColor&&(this._hoveredColor=t,this._hoveredFill=t?new g(t):g.DKGRAY)},fill:function(){return this._fill},hoveredFill:function(){return this._hoveredFill},assign:function(t){this._super(t),this._grid&&this._grid.refreshView()},proxy:function(){return this._super()}}),yl=e("GroupingOptions",sl,{init:function(t){this._super(t),this._toast=new Do,this._toast._visible=!1,this._toast._message="Grouping...",this._removeButton=new Cl(t)},destroy:function(){this._destroying=!0,this._toast=null,this._super()},enabled:!0,prompt:window.RG_CONST&&window.RG_CONST.GROUPINGPROMPT?window.RG_CONST.GROUPINGPROMPT:"컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",linear:!1,expandWhenGrouping:!0,summarizing:!0,commitBeforeGrouping:!0,commitBeforeExpand:!0,commitBeforeCollapse:!0,fixMergedColumns:!0,toast:null,removeIncludeLower:!1,removeButton:null,setToast:function(t){t!=this._toast&&this._toast.assign(t)},propertyChanged:function(){this.grid().groupingOptionsChanged(),this._layoutOwner()},setRemoveButton:function(t){this._removeButton&&this._removeButton.assign(t)}}),xl=e("CopyOptions",null,{init:function(){this._super(),this._dateWriter=null,this._boolWriter=null},enabled:!0,singleMode:!1,datetimeFormat:null,booleanFormat:null,lookupDisplay:!1,copyDisplayText:!1,includeHeaderText:!1,cutReadOnlyCell:!1,dateWriter:function(){return this._dateWriter},boolWriter:function(){return this._boolWriter},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateWriter=t?new Re(t):null)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolWriter=t?new Fe(t):null)}}),Il=e("PasteOptions",null,{init:function(){this._super(),this._boolReader=null,this._dateReaders=null,this._numberCharExp=null,this._numberCharExpOfCols=null},enabled:!0,singleMode:!1,startEdit:!0,commitEdit:!0,enableAppend:!0,fillFieldDefaults:!1,fillColumnDefaults:!1,forceRowValidation:!1,forceColumnValidation:!1,datetimeFormats:null,booleanFormat:null,numberChars:null,numberSeparator:null,numberCharsOfCols:{},numberSeparatorOfCols:{},selectionBase:!1,selectBlockPaste:!1,stopOnError:!0,noEditEvent:!1,noDataEvent:!1,eventEachRow:!1,checkReadOnly:!1,checkDomainOnly:!1,convertLookupLabel:!1,applyNumberFormat:!1,applyEditMask:!1,applyMaxLength:!1,throwValidationError:!0,applyInputChars:!1,setDatetimeFormats:function(t){if(t!=this._datetimeFormats)if(k(t)?this._datetimeFormats=t.concat():this._datetimeFormats=t?[t]:null,this._datetimeFormats){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new Te(this._datetimeFormats[e]))}else this._dateReaders=null},dateReaders:function(){return this._dateReaders},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t?new Ee(t):null)},boolReader:function(){return this._boolReader},setNumberChars:function(t){if(t!=this._numberChars)if((this._numberChars=t)&&0<t.length){for(var e="[",i=0;i<t.length;i++){var n=t[i];e+="\\"==n?"\\"+n:n}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},setNumberCharsOfCols:function(t){if(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t)for(var e in t){var i=t[e];if(i instanceof Array&&0<i.length){for(var n="[",s=0,r=i.length;s<r;s++){var o=i[s];n+="\\"==o?"\\"+o:o}n+="]",this._numberCharExpOfCols[e]=new RegExp(n,"g")}else this._numberCharExpOfCols[e]=null}},numberCharExp:function(){return this._numberCharExp},numberCharExpOfCol:function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},numberSeparatorOfCol:function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator}}),bl=e("MobileOptions",sl,{init:function(t){this._super(t),this._longTapDuration=500,this._doubleTapInterval=300,this._tapThreshold=4},longTapDuration:null,doubleTapInterval:null,tapThreshold:null,showEditCommander:!0,showTooltip:!1,scrollOnEditing:qs.CANCEL,headerToScroll:!0,assign:function(t){this._super(t);t=this.grid(),t=t.activeTool()&&t.activeTool()._touchManager;t&&(t._longTapDuration=isNaN(parseInt(this._longTapDuration))||0==parseInt(this._longTapDuration)?500:parseInt(this._longTapDuration),t._doubleTapInterval=isNaN(parseInt(this._doubleTapInterval))||0==parseInt(this._doubleTapInterval)?300:parseInt(this._doubleTapInterval),t._tapThreshold=isNaN(parseInt(this._tapThreshold))||0==parseInt(this._tapThreshold)?4:parseInt(this._tapThreshold))}}),Ss=e("ColumnSummary",n,{init:function(t){this._super(),this._column=t,this._styles=new d(this,"columnSummaryStyles"),this._groupStyles=new d(this,"columnRowGroupSummaryStyles"),this._dynamicStyles=new Co(this),this._groupDynamicStyles=new Co(this),this._exprNode=void 0,this._groupExprNode=void 0,this._dirty=!1,this._eachStyles=null,this._eachDynamicStyles=null},destroy:function(){this._destroying=!0,this._column=null,this._styles=null,this._groupStyles=null,this._dynamicStyles=null,this._groupDynamicStyles=null,this._super()},stylesChanged:function(t){this._changed()},styles:null,groupStyles:null,text:null,expression:null,groupText:null,groupExpression:null,dynamicStyles:null,groupDynamicStyles:null,callback:null,groupCallback:null,value:null,column:function(){return this._column},isDirty:function(){return this._dirty},setValue:function(t){this._value!==t&&(this._value=t)},setText:function(t){if(t!=this._text){if(t instanceof Array){this._text=[];for(var e=0;e<t.length;e++)this._text.push(t[e])}else this._text=t;this._changed()}},setGroupText:function(t){t!=this._groupText&&(this._groupText=t,this._changed())},getStyles:function(t){return this._eachStyles&&this._eachStyles[t]?this._eachStyles[t]:this._styles},getDynamicStyles:function(t){return this._eachDynamicStyles&&this._eachDynamicStyles[t]?this._eachDynamicStyles[t]:this._dynamicStyles},setStyles:function(t){var e,i,n;if(t)if(xt(t))for(this._eachStyles=[],e=0,i=t.length;e<i;e++)n=new d(this,"columnSummaryStyles"),this._eachStyles.push(n),n.setSysDefault(this.$_getSysDefaultStyles()),n.extend(t[e]);else this._eachStyles=null,this._styles.extend(t);else this._eachStyles=null,this._styles.clearValues()},setDynamicStyles:function(t){if(t)if(xt(t)&&xt(t[0])){var e,i,n=t.length;u.Default;for(this._eachDynamicStyles=[],e=0;e<n;e++)(i=new Co(this)).setItems(t[e]),this._eachDynamicStyles.push(i)}else this._eachDynamicStyles=null,this._dynamicStyles.setItems(t);else this._dynamicStyles.setItems(t);this._changed()},setExpression:function(t){if((t="string"==typeof t?Ut(t):t)!=this._expression){if(t instanceof Array){this._expression=[],this._exprNode=[];for(var e=0;e<t.length;e++)this._expression.push(t[e]),t[e]?this._exprNode.push(ni.Default.parse(t[e])):this._exprNode.push(null)}else this._expression=t,this._exprNode=t?ni.Default.parse(t):void 0;this._changed()}},setGroupExpression:function(t){(t=Ut(t))!=this._groupExpression&&(this._groupExpression=t,this._groupExprNode=t?ni.Default.parse(t):void 0,this._changed())},setGroupStyles:function(t){t!==this._groupStyles&&this._groupStyles.extend(t)},setGroupDynamicStyles:function(t){this._groupDynamicStyles.setItems(t),this._changed()},clean:function(){this._dirty=!1},capitalIndexers:function(){return null},evaluate:function(t,e){if(this._exprNode)return this._exprNode instanceof Array?void 0!==e&&this._exprNode[e]?this._exprNode[e].evaluate(t):void 0:this._exprNode.evaluate(t)},evaluateGroup:function(t){return this._groupExprNode&&this._groupExprNode.evaluate(t)},$_getSysDefaultStyles:function(){return u.Default.footer()},_changed:function(){this._dirty||(this.dirty=!0,this._column&&this._column._footerChanged&&this._column._footerChanged())}}),El=e("ColumnHeader",n,{init:function(t){zo.init.call(this),this._column=t,this._summary=new Sl(this),this._styles=new d(this,"columnHeaderStyles"),this._subStyles=new d(this,"columnHeaderSubStyles"),this._popupMenu=null,this._popupMenuName=null,this._dirty=!1},destroy:function(){this._destroying=!0,this._column=null,this._summary=null,this._styles=null,this._subStyles=null,this._super()},stylesChanged:function(){this._changed()},summary:null,styles:null,subStyles:null,text:null,subText:null,subTextGap:void 0,itemOffset:void 0,itemGap:void 0,subTextLocation:void 0,imageIndex:-1,imageUrl:null,checkLocation:P.NONE,imageLocation:P.NONE,clickBehavior:Ji.NONE,showTooltip:!0,tooltip:null,fixedHeight:0,popupMenu:null,column:function(){return this._column},setSummary:function(t){t!=this._summary&&(this._summary.assign(t),this._changed())},setStyles:function(t){t!==this._styles&&this._styles.extend(t)},setSubStyles:function(t){t!==this._subStyles&&this._subStyles.extend(t)},setText:function(t){t!==this._text&&(this._text=null==t?t:String(t),this._changed())},displayText:function(){var t,e=this._text;return e=(e=!e&&this._column instanceof M?(t=this._column.getField())?t.header()||t.orgFieldName():this._column.fieldName():e)||this._column.name()},clean:function(){this._dirty=!1},_changed:function(){this._dirty||(this.dirty=!0,this._column&&this._column._headerChanged())},setPopupMenu:function(t){t!=this._popupMenu&&("string"==typeof t?(this._popupMenu=null,this._popupMenuName=t):(k(t)||vt(t)?this._popupMenu=t:this._popupMenu=null,this._popupMenuName=null),this._changed(),this._popupMenuChanged=!0)},resetPopupMenu:function(t){var e;(e=this._popupMenu)&&!this._popupMenuName&&(this._popupMenuName="$$_columnHeader_popup"+dt+++"menu",e=k(e)?e:[e],t.addMenu(this._popupMenuName,e,!0))}}),Rl=e("ColumnFooter",Ss,{init:function(t){this._super(t)},$_getSysDefaultStyles:function(){return u.Default.footer()}}),Sl=e("ColumnHeaderSummary",Ss,{init:function(t){this._super(t._column)},$_getSysDefaultStyles:function(){return u.Default.headerSummary()}}),Tl=e("Column",null,{init:function(t){this._super(),this._initColumn(),t&&this.assign(t)},destroy:function(){this._destroying=!0,this._styles=null,this._header=null,this._states=null,this._layoutRect=null,this._super()},_initColumn:function(){this._header=this._createHeader(),this._styles=new d(this,"columnStyles"),this._index=-1,this._layoutRect=new O,this._orgWidth=NaN,this._groupWidth=NaN,this._displayOffset=NaN,this._displayWidth=NaN,this._fitOffset=NaN,this._fitWidth=NaN,this._measuredHeight=-1,this._dataRoot=null,this._distance=0,this._value=I,this._states={},this._parent=null,this.$_grid=null,this.$_fixed=!1,this.$_rightFixed=!1},stylesChanged:function(t){this._changed()},header:null,styles:null,dirty:!1,name:null,tag:null,visible:!0,width:100,height:0,saveWidth:NaN,fillWidth:0,fillHeight:0,thickness:1,resizable:!0,movable:!0,styleName:null,displayIndex:-1,checked:!1,minWidth:-1,maxWidth:-1,grid:function(){return this.$_grid||(this._parent?this._parent.grid():null)},parent:function(){return this._parent},setParent:function(t){t!=this._parent&&(this._parent&&this._parent._removeInternal(this),t&&t._addInternal(this),t=this.grid())&&t._columnsReset()},isParentVisible:function(){for(var t=this;t;){if(!t.isVisible())return!1;t=t._parent}return!0},group:function(){return this._parent instanceof Hu?null:this._parent},root:function(){var t=this.group();return t?t.root():this},isRoot:function(){return this===this.root()},dataRoot:function(){return this._dataRoot},isDataRoot:function(){return this._dataRoot===this},isDirty:function(){return this._dirty||this._header._isDirty},setHeader:function(t){this._header.assign(t="string"==typeof t?{text:t}:t)},setVisible:function(t){t!=this._visible&&(this._visible=t,this._invalidateSize(),t=this.stateFor(Wh.MERGE_ROOMS),this.isVisible()&&this.canMerge&&this.canMerge()?t&&(t.clear(),this instanceof M&&this.isMergeGrouped()?0<(level=this.grid().getGroupLevel(this.dataIndex()))&&t.initialize(Gh.INIT_COUNT):t.initialize($h.INIT_COUNT)):t&&t.clear(),this._invalidateVisible())},setWidth:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.group()&&!isNaN(this._groupWidth)||(this._displayWidth=this._groupWidth=t),this._invalidateSize())},setHeight:function(t){(t=Math.max(0,B(t)))!=this._height&&(this._height=t,this._changed())},setFillWidth:function(t){(t=Math.max(0,B(t)))!=this._fillWidth&&(this._fillWidth=t,this._changed())},setFillHeight:function(t){(t=Math.max(0,B(t)))!=this._fillHeight&&(this._fillHeight=t,this._changed())},groupWidth:function(){return this._groupWidth},displayOffset:function(){return isNaN(this._fitOffset)?this._displayOffset:this._fitOffset},displayWidth:{get:function(){return isNaN(this._fitWidth)?this._displayWidth:B(this._fitWidth)},set:function(t){t=Math.max(0,t);var e=this.displayWidth();isNaN(e)&&(e=0),isNaN(t)||t==e||R.changeWidth(this,t-e)}},saveWidth_:function(){return isNaN(this._fitWidth)?this._groupWidth:this._fitWidth},setSaveWidth:function(t){this._saveWidth=t},measuredHeight:function(){return this._measuredHeight},index:function(){return this._index},displayIndex_:function(){return this._visible?this._displayIndex:-1},setDisplayIndex:function(t){this._parent&&(t<0?this.setVisible(!1):(t=Math.min(t,this._parent.visibleCount()-1),this._parent.setVisibleIndex(this,t)))},setStyles:function(t){t!==this._styles&&(this._styles.extend(t),this._changed())},setChecked:function(t){t!=this._checked&&(this._checked=t,this._changed(),t=this.grid())&&t._columnCheckedChanged(this)},distance:function(){return this._distance},displayText:function(){return this._name||(this.header()?this.header().text():"col:"+this._index)},isFixed:function(){return this.$_fixed},isRightFixed:function(){return this.$_rightFixed},prepare:function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rightFixed=i,this._header._popupMenuChanged&&(e=t.popupMenuManager(),this._header.resetPopupMenu(e),this._header._popupMenuChanged=!1)},clean:function(){this._dirty=!1,this._header.clean()},$_getOffset:function(){for(var t=0,e=this,i=e.group();i;)t+=e.displayOffset(),i=(e=i).group();return t},stateFor:function(t){return this._states[t]},setState:function(t,e){this._states[t]=e},propertyChanged:function(){this._changed()},_setParent:function(t){t!=this._parent&&(t&&t._columnRemoved(this),(this._parent=t)&&t._columnAdded(this),this._parentChanged())},_parentChanged:function(){var t,e,i,n=this.grid&&this.grid();n&&this._header&&(t=this._header._styles)&&!this._header._styles._parent&&(i=(e=n._header.styles()).sysDefault(),t.setParentAndDefault(e,i),t=this._header._subStyles)&&!this._header._subStyles._parent&&(i=(e=n._header.subStyles()).sysDefault(),t.setParentAndDefault(e,i))},_createHeader:function(){return new El(this)},_headerChanged:function(){this._changed()},_invalidateSize:function(){var t=this.grid();t&&(this._dirty=!0,t.invalidateColumnWidths())},_invalidateVisible:function(){var t=this.grid();t&&t._columnVisibleIndexChanged(this)},_changed:function(){var t;!this._dirty&&(this._dirty=!0,t=this.grid())&&t.invalidateColumns()},checkGroupExist:function(t){for(var e=this.group();e;){if(!t||e.orientation()===t)return!0;e=e.group()}return!1}},{compareLoc:function(t,e){var i,n;return null==t||null==e?0:null==t?-1:null==e?1:((i=t.root().displayIndex())==(n=e.root().displayIndex())&&(n=(t.group()==e.group()?(i=t.displayIndex(),e):(i=t.dataRoot().displayIndex(),e.dataRoot())).displayIndex()),i-n)}}),kl=(Tl.MIN_WIDTH=2,Tl.prototype),Dl=e("ColumnGroupHeader",El,{init:function(t){this._super(t),this._fillHeight=0},stylesChanged:function(t){this._changed()},visible:!0,group:function(){return this._column}}),R=e("ColumnGroup",Tl,{init:function(t){this._super(t)},destroy:function(){this._destroying=!0,this._headerLevel=null,this._columns&&!this._columns.destroying&&this._columns.destroy&&this._columns.destroy(),this._columns=null,this._dataLevel=null,this._super()},_initColumn:function(){this._super(),this._columns=new Wl(this),this._sum=I},orientation:cs.HORIZONTAL,hideChildHeaders:!1,columns:null,setOrientation:function(t){(t=t==cs.VERTICAL?t:cs.HORIZONTAL)!=this._orientation&&(this._orientation=t,this.resetGroupWidths(),this._changed(),this.grid())&&this.grid()._resetColumnPositions()},columns_:function(){return this._columns.items()},setColumns:function(t){var e,i,n,s,r=this._columns,o=this.grid();if(r.clear(),t&&0<(i=t.length)){for(e=0;e<i;e++)(n=t[e])instanceof Tl&&r.indexOf(n)<0?this._columns.add(n):0<=n.$_hash&&o&&(s=o.columnByHash(n.$_hash))?(s.assign(n),T.applyGridMapper(s,n),this._columns.add(s)):n instanceof Tl||(n=T.createColumn(n),this._columns.add(n));this.$_attachChildren()}this.grid()&&this.grid()._columnsReset(this)},visibleItems:function(){return this._columns.visibleItems()},getOrderedColumns:function(){return this._columns.getOrderedColumns()},dataLevel:function(){return this._dataLevel},headerLevel:function(){return this._headerLevel},count:function(){return this._columns.count()},visibleCount:function(){return this._columns.visibleCount()},isVertical:function(){return this._orientation==cs.VERTICAL},isHorizontal:function(){return this._orientation!=cs.VERTICAL},first:function(){return Ll(this)||this},last:function(){return Al(this)||this},getItem:function(t){return this._columns.getItem(t)},getVisibleItem:function(t){if(t<0||t>=this._columns.visibleCount())throw"Invalid visible index: "+t;return this._columns.getVisibleItem(t)},getOrderedItem:function(t){return this._columns.getOrderedItem(t)},isAncestorOf:function(t){if(t&&t!==this)for(var e=t._parent;e;){if(e===this)return!0;e=e._parent}return!1},setChildrenProperty:function(t,e,i,n){this._columns.setChildrenProperty(t,e,i,n)},calcHeaderLevels:function(t,e,i){t=arguments.length<1||t,e=arguments.length<2?[]:e,i=arguments.length<3?[]:i;var n=this.header().isVisible()?1:0;if(!this._hideChildHeaders){var s,r,o=t&&e.length<1?this.visibleCount():this._columns.count(),a=0;if(0<o)if(this.isHorizontal())for(s=a=0;s<o;s++)r=t&&e.length<1?this.getVisibleItem(s):this.getItem(s),((!t||r.isVisible())&&i.indexOf(r.name())<0||!r.isVisible()&&0<=e.indexOf(r.name()))&&(a=r instanceof R?Math.max(a,r.calcHeaderLevels(t,e,i)):Math.max(a,1));else for(s=0;s<o;s++)r=t&&e.length<1?this.getVisibleItem(s):this.getItem(s),((!t||r.isVisible())&&i.indexOf(r.name())<0||!r.isVisible()&&0<=e.indexOf(r.name()))&&(r instanceof R?a+=r.calcHeaderLevels(t,e,i):a++);n=0===a?0:n+a}return this._headerLevel=n},calcDataLevels:function(t,e,i){t=arguments.length<1||t,e=arguments.length<2?[]:e,i=arguments.length<3?[]:i;var n,s,r=t&&e.length<1?this.visibleCount():this.count(),o=0;if(0<r)if(this.isHorizontal())for(n=o=0;n<r;n++)s=t&&e.length<1?this.getVisibleItem(n):this.getItem(n),((!t||s.isVisible())&&i.indexOf(s.name())<0||!s.isVisible()&&0<=e.indexOf(s.name()))&&(o=s instanceof R?Math.max(o,s.calcDataLevels(t,e,i)):Math.max(o,1));else for(n=0;n<r;n++)s=t&&e.length<1?this.getVisibleItem(n):this.getItem(n),((!t||s.isVisible())&&i.indexOf(s.name())<0||!s.isVisible()&&0<=e.indexOf(s.name()))&&(s instanceof R?o+=s.calcDataLevels(t,e,i):o++);return this._dataLevel=0+o},calcHorz:function(t,e,i){t=arguments.length<1||t,e=arguments.length<2?[]:e,i=arguments.length<3?[]:i;var n,s,r=t&&e.length<1?this.visibleCount():this.count(),o=1;if(1<=r)if(this.isVertical())for(s=o=0;s<r;s++)n=t&&e.length<1?this.getVisibleItem(s):this.getItem(s),((!t||n.isVisible())&&i.indexOf(n.name())<0||!n.isVisible()&&0<=e.indexOf(n.name()))&&(o=n instanceof R?Math.max(o,n.calcHorz(t,e,i)):Math.max(o,1));else for(s=o=0;s<r;s++)n=t&&e.length<1?this.getVisibleItem(s):this.getItem(s),((!t||n.isVisible())&&i.indexOf(n.name())<0||!n.isVisible()&&0<=e.indexOf(n.name()))&&(n instanceof R?o+=Math.max(1,n.calcHorz(t,e,i)):o++);return o},right:function(t){if(this.isHorizontal())try{var e=this._checkVisible(t);if(e<this.visibleCount()-1)return t=Vl(this,e+1)}catch(t){}return null},left:function(t){if(this.isHorizontal())try{var e=this._checkVisible(t);if(0<e)return t=Pl(this,e-1)}catch(t){}return null},next:function(t){try{var e=this._checkVisible(t);if(e<this.visibleCount()-1)return t=Hl(this,e+1)}catch(t){}return null},prev:function(t){try{var e=this._checkVisible(t);if(0<e)return t=Gl(this,e-1)}catch(t){}return null},lower:function(t){if(this.isVertical())try{var e=this._checkVisible(t);if(e<this.count()-1)return t=$l(this,e+1)}catch(t){}return null},upper:function(t){if(this.isVertical())try{var e=this._checkVisible(t);if(0<e)return t=Ul(this,e-1)}catch(t){}return null},getDataColumn:function(t){for(var e=0,i=this.count();e<i;e++){var n=this.getItem(e);if(n instanceof M){if(n.dataIndex()==t)return n}else if(n instanceof R&&(n=n.getDataColumn(t)))return n}return null},columnAtPoint:function(t,e){var i,n,s,r=this.visibleCount();if(this.isVertical()){for(i=0;i<r;i++)if(e<(n=this.getVisibleItem(i))._layoutRect.bottom())return(s=b(n,R))?(e-=n._layoutRect.y,s.columnAtPoint(t,e)):n}else for(i=0;i<r;i++)if(t<(n=this.getVisibleItem(i))._layoutRect.right())return(s=b(n,R))?(t-=n._layoutRect.x,s.columnAtPoint(t,e)):n;return this},_addInternal:function(t,e){return!(t=t instanceof Tl?t:T.createColumn(t))||t instanceof R&&t.isAncestorOf(this)||t.parent()===this?null:(this._columns.add(t,e),t)},add:function(t,e){t=this._addInternal(t,e);return t&&(e=this.grid())?(e._columnsReset(this),t):null},_removeInternal:function(t){var e=this._columns.indexOf(t);if(0<=e){this._columns.removeAt(e);for(var e=this.grid(),i=e._summaryView,n=i&&i.findCell(this),s=(n&&n instanceof ih&&(n._elements,n.removeElement(n.findCell(t)),n._cells)&&delete n._cells[t.$_hash],e._footerView),r=0,o=e.footer().count();r<o;r++)(n=s&&s.findCell(r,this))&&n instanceof nh&&(n._elements,n.removeElement(n.findCell(t)),n._cells)&&delete n._cells[t.$_hash];return!0}return!1},remove:function(t){return!!this._removeInternal(t)&&((t=this.grid())&&t._columnsReset(this),!0)},removeAt:function(t){return 0<=t&&t<this.count()&&(this._columns.removeAt(t),(t=this.grid())&&t._columnsReset(this),!0)},clear:function(){var t;0<this.count()&&(this._columns.clear(),t=this.grid())&&t._columnsReset(this)},setChildIndex:function(t,e){var i=this.grid();t&&t.parent()===this&&t.index()!=e&&this._columns.move(t,e)&&i&&i._columnIndexChanged(t)},setVisibleIndex:function(t,e){var i=this.grid();t&&t.parent()===this&&this._columns.moveVisible(t,e)&&i&&i._columnVisibleIndexChanged(t)},initGroupWidths:function(){var t=this._columns.count();if(!(t<1))for(var e=0;e<t;e++){var i=this._columns.getItem(e);i._displayWidth=i._groupWidth=NaN,i instanceof R&&i.initGroupWidths()}},restoreGroupWidths:function(){var t=this._columns.count();if(!(t<1)){var e,i,n,s,r,o=this._groupWidth;if(this.isVertical())for(n=0;n<t;n++)(e=this._columns.getItem(n))._displayWidth=e._groupWidth=o,e._displayOffset=0;else{for(n=i=0;n<t;n++)i+=(e=this._columns.getItem(n))._displayWidth=isNaN(e._saveWidth)?e._groupWidth:e._saveWidth;for(n=r=0;n<t-1;n++)s=(e=this._columns.getItem(n))._displayWidth*o/i,e._groupWidth=s,e._displayOffset=B(r),e._displayWidth=B(r+=s)-e._displayOffset;(e=this._columns.getItem(t-1))._groupWidth=s=o-r,e._displayOffset=B(r),e._displayWidth=B(r+s)-e._displayOffset}for(n=0;n<t;n++)(e=this._columns.getItem(n))instanceof R&&e.restoreGroupWidths()}},resetGroupWidths:function(){var t=this._columns.visibleCount();if(!(t<1)){var e,i,n,s,r,o,a,h=0,l=this._groupWidth,d=this.grid().displayOptions().fitStyle()===Es.FILL;if(this.isVertical())for(e=0;e<t;e++)(i=this._columns.getVisibleItem(e))._displayWidth=i._groupWidth=l,i._displayOffset=0;else{for(e=n=0;e<t;e++)(i=this._columns.getVisibleItem(e))._displayWidth=i._width,d&&0<i.fillWidth()?h+=i.fillWidth():n+=i._displayWidth;if(o=r=0,d&&0<h)for(n=l-n,e=0;e<t;e++)(i=this._columns.getVisibleItem(e))._displayOffset=B(r),0<(a=i.fillWidth())?r+=i._groupWidth=B(n*a/h):r+=i._groupWidth=i._fitWidth||i._displayWidth,i._displayWidth=B(r)-i._displayOffset;else{for(e=0;e<t-1;e++)o+=(i=this._columns.getVisibleItem(e))._displayWidth,s=B(l*o/n)-r,i._groupWidth=s,i._displayOffset=B(r),i._displayWidth=B(r+=s)-i._displayOffset;(i=this._columns.getVisibleItem(t-1))._groupWidth=s=l-r,i._displayOffset=B(r),i._displayWidth=B(r+s)-i._displayOffset}}for(e=0;e<t;e++)(i=this._columns.getVisibleItem(e))instanceof R&&i.resetGroupWidths()}},collectColumns:function(t,e,i,n){for(var s=n?this._columns.getOrderedColumns():this._columns.items(),r=0,o=s.length;r<o;r++){var a=s[r];i&&!a.isVisible()||(e&&a instanceof R||t.push(a),a instanceof R&&a.collectColumns(t,e,i,n))}},collectGroups:function(t){for(var e=0,i=this._columns.count();e<i;e++){var n=b(this._columns.getItem(e),R);n&&(t.push(n),n.collectGroups(t))}},collectColumnNames:function(t,e,i,n){for(var s=n?this._columns.getOrderedColumns():this._columns.items(),r=0,o=s.length;r<o;r++){var a,h=s[r];!h||!(a=h.name())||e&&h instanceof R||i&&!h.isVisible()||t.push(a),h instanceof R&&h.collectColumnNames(t,e,i,n)}return t},collectGroupNames:function(t){for(var e=0,i=this._columns.count();e<i;e++){var n,s=this._columns.getItem(e);s instanceof R&&((n=s.name())&&t.push(n),s.collectGroupNames(t))}return t},clearMergeGrouped:function(){for(var t,e=this._columns.count(),i=0;i<e;i++)(t=this._columns.getItem(i))instanceof M&&t._setMergeGrouped(!1),t instanceof R&&t.clearMergeGrouped()},columnByName:function(t){return this._columns.columnByName(t)},valueColumnByName:function(t){return this._columns.valueColumnByName(t)},columnByField:function(t){if(0<=t)for(var e,i=this._columns.count(),n=0;n<i;n++){if((e=this._columns.getItem(n))instanceof M&&e.fieldName()&&e.dataIndex()==t)return e;if(e instanceof R&&(e=e.columnByField(t)))return e}return null},columnByFieldName:function(t){if(t)for(var e,i=t.toLowerCase(),n=this._columns.count(),s=0;s<n;s++){if((e=this._columns.getItem(s))instanceof M&&e.fieldName()&&e.fieldName().toLowerCase()==i)return e;if(e instanceof R&&(e=e.columnByFieldName(t)))return e}return null},collectColumnsByFieldName:function(t,e){if(t)for(var i,n=t.toLowerCase(),s=this._columns.count(),r=0;r<s;r++)(i=this._columns.getItem(r))instanceof M&&i.fieldName()&&i.fieldName().toLowerCase()==n&&e.push(i),i instanceof R&&i.collectColumnsByFieldName(t,e)},columnByTag:function(t){if(t)for(var e,i=this._columns.count(),n=0;n<i;n++){if((e=this._columns.getItem(n)).tag()==t)return e;if(e instanceof R&&(e=e.columnByTag(t)))return e}return null},collectColumnsByTag:function(t,e){if(t)for(var i,n=this._columns.count(),s=0;s<n;s++)(i=this._columns.getItem(s)).tag()==t&&e.push(i),i instanceof R&&i.collectColumnsByTag(t,e)},getLeafItems:function(t){var e=[];return Ol(this,e,t=!(0<arguments.length)||t),e},getHorzColumns:function(t,e){var i=[];return Ml(this,i,t,null!=t&&null!=e?t+e-1:void 0),i},getValueColumns:function(t){var e=[];return Fl(this,e,t=!(0<arguments.length)||t),e},getDataColumns:function(t){var e=[];return Nl(this,e,t=!(0<arguments.length)||t),e},clearFitWidths:function(){this._columns.$_clearFitWidths()},resetFitWidths:function(){var t=this._columns.visibleCount();if(!(t<1)){var e,i,n,s,r,o,a=0,h=0,l=0,d=this._fitWidth,u=this.grid().displayOptions().fitStyle()===Es.FILL;if(this.isHorizontal()){for(e=0;e<t;e++)s=this._columns.getVisibleItem(e),u&&0<s._fillWidth?(l+=s._fillWidth,o=s):a+=s._groupWidth;if(h=n=0,u&&0<l){for(a=d-a,e=0;e<t;e++)0<(s=this._columns.getVisibleItem(e)).fillWidth()?h+=i=s._fitWidth=B(a*s._fillWidth/l):i=s._fitWidth=s._groupWidth;for(e=0;e<t;e++)(s=this._columns.getVisibleItem(e))._fitOffset=n,o===s&&(s._fitWidth+=a-h),n+=s._fitWidth}else{for(e=0;e<t-1;e++)(s=this._columns.getVisibleItem(e))._fitOffset=n,h+=s._groupWidth,i=B(h*d/a)-n,n+=s._fitWidth=i;(s=this._columns.getVisibleItem(t-1))._fitWidth=i=d-n,s._fitOffset=n}}else for(e=0;e<t;e++)(s=this._columns.getVisibleItem(e))._fitWidth=this._fitWidth,s._fitOffset=0;for(e=0;e<t;e++)(r=b(this._columns.getVisibleItem(e),R))&&r.resetFitWidths()}},_createHeader:function(){return new Dl(this)},clean:function(){this._super();for(var t=this.count();t--;)this.getItem(t).clean()},$_attachChildren:function(){for(var t,e=this.count(),i=0;i<e;i++)(t=this.getItem(i))._setParent(this),t instanceof R&&t.$_attachChildren()},_columnAdded:function(t){},_columnRemoved:function(t){},_parentChanged:function(){this._super();for(var t=this.columns(),e=0;e<t.length;e++)t[e]._parentChanged()},initVisibles:function(){this._columns.$_initVisibles()},resetVisibles:function(){this._columns.$_resetVisibles()},resetStates:function(){this._columns.$_resetStates(this.grid())},resetIndicies:function(t){this._columns.$_resetIndicies(t)},_checkVisible:function(t){var e;if(!t||(e=t._displayIndex)<0||t!==this.getVisibleItem(e))throw new Error("Column is not a visible group member");return e},_clearSavedWidths:function(){for(var t=0,e=this.count();t<e;t++){var i=this.getItem(t);i._saveWidth=NaN,i instanceof R&&i._clearSavedWidths()}},_saveOrgWidths:function(){for(var t=0,e=this.count();t<e;t++){var i=this.getItem(t);i._orgWidth=i.saveWidth(),i instanceof R&&i._saveOrgWidths()}},_restoreOrgWidths:function(){for(var t=0,e=this.count();t<e;t++){var i=this.getItem(t);i._saveWidth=i._orgWidth,i instanceof R&&i._restoreOrgWidths()}}},{getRight:function(t){var e=t&&t._parent;return e?(t=e.right(t))||R.getRight(e):null},getLeft:function(t){var e=t&&t._parent;return e?(t=e.left(t))||R.getLeft(e):null},getNext:function(t){var e=t&&t._parent;return e?(t=e.next(t))||R.getNext(e):null},getPrev:function(t){var e=t&&t._parent;return e?(t=e.prev(t))||R.getPrev(e):null},getLower:function(t){var e=t&&t._parent;return e?(t=e.lower(t))||R.getLower(e):null},getUpper:function(t){var e=t&&t._parent;return e?(t=e.upper(t))||R.getUpper(e):null},getTop:function(t){for(var e,i=null;t;){if(R.isTop(t)){i=t;break}if(!(e=R.getUpper(t))){i=t;break}t=e}return i?(i.group(),i):null},getBottom:function(t){for(var e,i=null;t;){if(R.isBottom(t)){i=t;break}if(!(e=R.getLower(t))){i=t;break}t=e}return i?(i.group(),i):null},isTop:function(t){for(var e=t&&t._parent;e;){if(e.isVertical()&&1<e.visibleCount()&&0<t._displayIndex)return!1;e=(t=e)._parent}return!0},isBottom:function(t){for(var e=t&&t._parent;e;){if(e.isVertical()&&1<e.visibleCount()&&t._displayIndex<e.visibleCount()-1)return!1;e=(t=e)._parent}return!0},isLeft:function(t){for(var e=t&&t._parent;e;){if(e.isHorizontal()&&1<e.visibleCount()&&0<t._displayIndex)return!1;e=(t=e)._parent}return!0},isRight:function(t){for(var e=t&&t._parent;e;){if(e.isVertical()&&1<e.visibleCount()&&t._displayIndex<e.visibleCount()-1)return!1;e=(t=e)._parent}return!0},getAncestors:function(t,e){e?e.length=0:e=[];for(var i=t._parent;i&&!(i instanceof Hu);)e.push(i),i=i._parent;return e},getFirstDataRoot:function(t){var e,i=t.visibleCount();return i<1||t.isVertical()&&1<i?e=t:(e=t.getVisibleItem(0))instanceof R&&(e=R.getFirstDataRoot(e)),e},getLastDataRoot:function(t){var e,i=t.visibleCount();return i<1||t.isVertical()&&1<i?e=t:(e=t.getVisibleItem(t.visibleCount()-1))instanceof R&&(e=R.getLastDataRoot(e)),e},changeWidth2:function(t,e,i,n){if(t&&0!=e){n=isNaN(n)?0:Math.max(0,n);var s,r,o=t.parent(),a=0,h=e;if(i){for(var l=0,a=0,d=0,u=o.visibleCount();d<u;d++)a+=o.getVisibleItem(d)._groupWidth,l+=o.getVisibleItem(d)._fitWidth;h=e*(a/l),h=0<e?Math.max(1,h):Math.min(-1,h)}if(t.group()){t._groupWidth=Math.max(n,t._groupWidth+h),t instanceof R&&t.resetGroupWidths();var c,_,f=R.getAncestors(t);for(d=0,u=f.length;d<u;d++){if((_=f[d]).isVertical())for(_._groupWidth=t._groupWidth,c=0,r=_.count();c<r;c++)(s=_.getItem(c))!==t&&(s._groupWidth=t._groupWidth,s instanceof R)&&s.resetGroupWidths(),s._displayOffset=0;else{for(c=a=0,r=_.visibleCount();c<r;c++)(s=_.getVisibleItem(c))._displayOffset=B(a),a+=s._groupWidth;_._groupWidth=a}_==t.root()?_.setWidth(_._groupWidth):t=_}}else t&&t.setWidth(Math.max(0,t._width+h))}},changeWidth:function(t,e,i,n,s){if(t&&e&&(n=isNaN(n)?2:Math.max(0,n),!(t.displayWidth()+e<n))){var r,o,a=t.parent(),h=0,l=e;if(i){for(var d=0,h=0,u=0,c=a.visibleCount();u<c;u++)h+=a.getVisibleItem(u)._groupWidth,d+=a.getVisibleItem(u)._fitWidth;l=e*(h/d),l=0<e?Math.max(1,l):Math.min(-1,l)}if(r=t.group()){var _=R.getAncestors(t);if(!r.isVertical()){if(o=0<t._groupWidth?t._width*l/t._groupWidth:0,B(t._width+o)<=0&&s)return;t.setWidth(Math.max(0,t._width+o))}for(u=0;u<_.length-1;u++)o=0<(r=_[u])._groupWidth?r._width*l/r._groupWidth:0,r.setWidth(Math.max(n,r._width+o));for((r=_[_.length-1]).setWidth(Math.max(n,B(r._width+l))),u=_.length;u--;)(r=_[u]).resetGroupWidths();t instanceof R&&t.resetGroupWidths()}else t&&t.setWidth(Math.max(n,t._width+l))}}}),Bl=R.prototype,Ol=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r._columns?Ol(r,e,i):e.push(r)}},Ml=function(t,e,i,n){if(t.isHorizontal()){var s=t.visibleCount();i=null==i?0:i,n=null==n?s-1:n;for(var r,o=0;o<s;o++)i<=o&&o<=n&&((r=t.getVisibleItem(o))._columns?Ml(r,e):e.push(r))}},Fl=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r instanceof zl?e.push(r):r instanceof R&&Fl(r,e,i)}},Nl=function(t,e,i){for(var n=i?t.visibleCount():t.count(),s=0;s<n;s++){var r=i?t.getVisibleItem(s):t.getItem(s);r instanceof M?e.push(r):r instanceof R&&Nl(r,e,i)}},Ll=function(t){for(var e=t.visibleCount(),i=0;i<e;i++){var n=t.getVisibleItem(i);if(n instanceof zl)return n;if(n instanceof R&&(n=Ll(n))instanceof zl)return n}return null},Al=function(t){for(var e=t.visibleCount()-1;0<=e;e--){var i=t.getVisibleItem(e);if(i instanceof zl)return i;if(i instanceof R&&(i=Al(i))instanceof zl)return i}return null},Vl=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof zl)return s;if(s instanceof R&&(s=s.first())instanceof zl)return s}return null},Pl=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof zl)return n;if(n instanceof R&&(n=n.last())instanceof zl)return n}return null},Hl=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof zl)return s;if(s instanceof R&&(s=s.first())instanceof zl)return s}return null},Gl=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof zl)return n;if(n instanceof R&&(n=n.last())instanceof zl)return n}return null},$l=function(t,e){for(var i=e,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);if(s instanceof zl)return s;if(s instanceof R&&(s=s.first())instanceof zl)return s}return null},Ul=function(t,e){for(var i=e;0<=i;i--){var n=t.getVisibleItem(i);if(n instanceof zl)return n;if(n instanceof R&&(n=n.last())instanceof zl)return n}return null},Wl=e("ColumnCollection",null,{init:function(t){this._super(),this._owner=t,this._items=[],this._visibles=[],this._orderedColumns=[]},destroy:function(){this._destroying=!0,this._items=null,this._visibles=null,this._orderedColumns=null,this._super()},owner:function(){return this._owner},grid:function(){return this._owner&&this._owner.grid()},count:function(){return this._items.length},items:function(){return this._items.slice()},setItems:function(t){var e=this._items,i=this._orderedColumns;if(e.length=i.length=0,t){for(var n=0,s=t.length;n<s;n++)e.push(t[n]),t[n]._setParent(this._owner);e.slice()}},visibleItems:function(){return this._visibles.slice()},getOrderedColumns:function(){return this._orderedColumns.slice()},visibleCount:function(){return this._visibles.length},getItem:function(t){return this._items[t]},getVisibleItem:function(t){return this._visibles[t]},getOrderedItem:function(t){return this._orderedColumns[t]},clear:function(){this._items.length=this._visibles.length=this._orderedColumns.length=0},indexOf:function(t){return this._items.indexOf(t)},add:function(t,e){if(null==t)throw new Error("column is null");if(0<=this.indexOf(t))throw new Error("column is already contained");return e=null==e?this._items.length:e,this._items.splice(e,0,t),t._setParent(this._owner),this._orderedColumns.splice(e,0,t),this._items.length},removeAt:function(t){if(t<0||t>=this._items.length)throw new Error("index is invalid: "+t);var e=this._items[t],t=(this._items.splice(t,1),this._orderedColumns.indexOf(e));0<=t&&this._orderedColumns.splice(t,1),e._setParent(null)},move:function(t,e){if(null==t)throw new Error("column is null");if(e<0||e>=this._items.length)throw new Error("newIndex is invalid: "+e);return t._parent===this._owner&&t._index!=e&&(this._items.splice(t.index,1),this._items.splice(e,0,t),!0)},moveVisible:function(t,e){if(null==t)throw new Error("column is null");if(!(e<0||e>=this._items.length)&&t._parent===this._owner&&t._visible){if(!this.$_isVisible(t))return this.$_resetVisibles(!1),!0;var i,n=this._visibles,s=t._displayIndex;if(s!=e)return n.splice(s,1),n.splice(e,0,t),0<e&&(i=n[e-1]),0<=(n=(s=this._orderedColumns).indexOf(t))&&s.splice(n,1),i&&(e=s.indexOf(i)+1),s.splice(e,0,t),this.$_resetVisibles(!1),this._owner instanceof R&&(n=this._owner.grid&&this._owner.grid())&&(n._columnWidthsDirty=!0),!0}return!1},columnByName:function(t){if(t)for(var e=0,i=this._items.length;e<i;e++){var n=this._items[e];if(n.name()==t)return n;if(n instanceof R&&(n=n._columns.columnByName(t)))return n}return null},valueColumnByName:function(t){if(t)for(var e=0,i=this._items.length;e<i;e++){var n=this._items[e];if(n instanceof R){if(n=n._columns.valueColumnByName(t))return n}else if(n.name()==t)return n}return null},setChildrenProperty:function(t,e,i,n){for(var s=n?this._visibles:this._items,r=s.length;r--;){var o=s[r];o.setProperty(t,e),o instanceof R&&o.setProperty(t,e,!0,!0)}},$_isVisible:function(t){return 0<=this._visibles.indexOf(t)},$_initVisibles:function(){for(var t,e=this._items,i=0,n=e.length;i<n;i++)(t=e[i])._displayIndex=i,t instanceof R&&t.initVisibles()},$_resetVisibles:function(t){arguments.length<1&&(t=!0);for(var e,i,n,s=function(t,e){for(var i,n=-1,s=0,r=t.length;s<r;s++)if(t[s]._visible&&n++,t[s]===e)return i=this.grid(),e._parent instanceof Hu&&!(e instanceof M&&i.isGroupedColumn(e))?(i=i.isMergedRowGrouped&&i.isMergedRowGrouped()?i.rowGroupFields().length:0,Math.max(n,i)):n;return-1}.bind(this),r=this._items,o=this._visibles,a=(this._orderedColumns,o.length-1);0<=a;a--)(!(n=o[a])._visible||r.indexOf(n)<0)&&o.splice(a,1);for(a=0,e=r.length;a<e;a++)(n=r[a])._visible&&!this.$_isVisible(n)&&(0<=(i=0<=(i=s(this._orderedColumns,n))?i:n._displayIndex)?o.splice(Math.min(o.length,i),0,n):o.push(n));for(a=o.length;a--;)(n=o[a])._displayIndex=a,n._isLastColumn=n._parent._isLastColumn&&(a==o.length-1||n._parent instanceof R&&n._parent.isVertical()),n instanceof R&&t&&n.resetVisibles()},$_clearFitWidths:function(){for(var t=this._items.length;t--;){var e=this._items[t];e._fitWidth=NaN,e._fitOffset=NaN,e instanceof R&&e.clearFitWidths()}},$_resetStates:function(t){for(var e,i,n,s,r=this._items,o=r.length,a=t.itemSource(),h=0;h<o;h++)(i=r[h])instanceof M&&i._setSortOrder(-1);if(a&&(n=t.getSortFields()))for(s=t.getSortDirections(),h=0;h<n.length;h++)for(e=0;e<o;e++)(i=r[e])instanceof M&&i.dataIndex()==n[h]&&(i._setSortOrder(h),i.setSortDirection(s[h]));for(h=0;h<o;h++)(i=r[h])instanceof R&&i.resetStates()},$_resetIndicies:function(t){for(var e,i=t.itemSource(),n=i&&i.dataSource(),s=this._items.length,r=0;r<s;r++)(e=this._items[r])._index=r,e instanceof M?(e._resetDataIndex(n),e._resetImages(t)):e instanceof Yl?e.resetIndicies(n):e instanceof R&&e.resetIndicies(t)}}),zl=e("ValueColumn",Tl,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._footer=new Rl(this),this._rendererChanged=!1,this._rendererObj=null},footer:null,renderer:null,mergeRule:null,cursor:null,ignoreDefaultDynamicStyles:!1,blankWhenCopy:!1,blankWhenExport:!1,textInputCase:ds.NORMAL,exceptRowHeight:!1,setFooter:function(t){this._footer.assign(t)},rendererObj:function(){return this._rendererObj||this._defaultRenderer()},setRenderer:function(t){this._renderer=t,this._rendererChanged=!0,this._changed()},setMergeRule:function(t){t!=this._mergeRule&&(t instanceof Hh||(t=$h.createRule(t)),this._mergeRule=t,t=this.grid())&&t._columnMergeRuleChanged(this)},isWritable:function(){return!1},canMerge:function(){return null!==this._mergeRule},assign:function(t){this._super(t)},prepare:function(t,e,i){kl.prepare.call(this,t,e,i);e=t.delegate();this._rendererChanged&&(this._rendererObj=e.createRenderer(this._renderer),this._rendererChanged=!1)},clean:function(){this._super(),this._footer.clean()},_footerChanged:function(){this._changed()},_defaultRenderer:function(){return Lc.Default}}),Kl=zl.prototype,M=e("DataColumn",zl,{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._dataIndex=-1,this._baseIndex=-1,this._valueType=S.TEXT,this._sortOrder=-1,this._menu=null,this._images=null,this._lookupSource=null,this._lookupKeyFields=null,this._lookupKeyFieldIds=null,this._lookupMap=null,this._labelFieldIndex=-1,this._mergeGrouped=!1,this._editorOptions=null,this._filters=new So(this),this._filters.addListener(this),this._filterActions=[],this._dynamicStyles=new Co(this),this._validations=new Ao,this._imageButtonsRenderer=null,this._displayRegExpObj=null,this._excelFormulaStatement=null,this._equalBlankExpression=null,this._equalBlankRuntime=null},destroy:function(){this._destroying=!0,this._filters.removeListener(this),this._filters&&!this._filters._destroying&&this._filters.destroy&&this._filters.destroy(),this._filterActions=null,this._filters=null,this._dynamicStyles=null,this._validations=null,this._displayRegExpObj=null,this._excelFormulaStatement=null,this._equalBlankRuntime=null,this._super()},capitalIndexers:function(){return M.CAPITAL_INDEXERS},fieldIndex:-1,fieldName:null,editable:!0,readOnly:!1,sortable:!0,filterable:!0,filterIconVisible:!0,sortDirection:ps.ASCENDING,sortByLabel:!1,groupable:!0,button:Cs.NONE,buttonCursor:null,alwaysShowButton:!1,alwaysShowEditButton:!1,buttonVisibility:ys.DEFAULT,editButtonVisibility:ys.DEFAULT,popupMenu:null,imageButtons:null,defaultValue:I,required:!1,requiredMessage:null,requiredLevel:Is.ERROR,nanText:null,zeroText:null,dynamicStyles:null,validations:null,autoFilter:!1,lookupDisplay:!1,lookupCase:xs.SENSITIVE,lookupValues:null,lookupLabels:null,lookupData:null,labelField:null,lookupSourceId:null,lookupKeyFields:null,valueSeparator:null,textOfInvalid:void 0,editor:null,imageList:null,equalBlank:!1,equalBlankExpression:null,groupLevel:-1,filters:null,filterActions:null,error:null,errorLevel:Is.IGNORE,excelFormat:void 0,excelFormulaStatement:null,displayRegExp:null,displayReplace:null,displayCallback:null,editorOptions:null,displayMinusZero:null,setLookupData:function(t){var e,i,n={};if(this._lookupData=t){k(t)?n.list=t:n=t,this._lookupLabels=[],this._lookupValues=[],this._lookupMap=null;for(var s=n.hasOwnProperty("value")?n.value:"value",r=n.hasOwnProperty("label")?n.label:"label",o=0,a=n.list.length;o<a;o++)null!=(i=null!=(e=n.list[o])[s]?e[s]:e.code)&&this._lookupValues.push(null!=e[s]?e[s]:e.code),null!=i&&this._lookupLabels.push(null!=e[r]?e[r]:null!=e.text?e.text:i)}else this._lookupLabels=null,this._lookupValues=null,this._lookupMap=null;this._changed()},setEditable:function(t){t!=this._editable&&(this._editable=t,t=this.grid())&&t._dataColumnChanged(this)},setReadOnly:function(t){t!=this._readOnly&&(this._readOnly=t,t=this.grid())&&t._dataColumnChanged(this)},setDisplayRegExp:function(t){t?(this._displayRegExp=t,this._displayRegExpObj="string"==typeof t?new RegExp(t):t):(this._displayRegExp=null,this._displayRegExpObj=null)},getDisplayRegExp:function(){return this._displayRegExpObj},setDisplayMinusZero:function(t){t!=this._displayMinusZero&&(this._displayMinusZero=t,this._numberFormatter)&&this._numberFormatter.setDisplayMinusZero(t)},alwaysShowButton_:function(){return this._buttonVisibility==ys.ALWAYS},setAlwaysShowButton:function(t){t?this.setButtonVisibility(ys.ALWAYS):this._buttonVisibility==ys.ALWAYS&&this.setButtonVisibility(ys.DEFAULT)},alwaysShowEditButton_:function(){return this._editButtonVisibility==ys.ALWAYS},setAlwaysShowEditButton:function(t){t?this.setEditButtonVisibility(ys.ALWAYS):this._editButtonVisibility==ys.ALWAYS&&this.setEditButtonVisibility(ys.DEFAULT)},getImageButtonRenderer:function(){return this._imageButtonsRenderer},setImageButtons:function(t){t&&"object"==typeof t&&t.hasOwnProperty("images")?(this._imageButtons=t,this._imageButtonsRenderer||(this._imageButtonsRenderer=new kc),this._imageButtonsRenderer.assign(t),t.hasOwnProperty("width")&&this._imageButtonsRenderer.setImageWidth(t.width),t.hasOwnProperty("height")&&this._imageButtonsRenderer.setImageHeight(t.height),this._imageButtonsRenderer.setImageUrls(t.images)):this._imageButtonsRenderer=null},dataIndex:function(){return this._dataIndex},baseIndex:function(){return this._baseIndex},valueType:function(){return this._valueType},sortOrder:function(){return this._sortOrder},setValidations:function(t){this._validations.assign(t)},getFilters:function(){return this._filters.items()},hasFilters:function(){return 0<this._filters.count()||0<this._filterActions.length},isFiltered:function(){return 0<this._filters.activeCount()},filters_:function(){return this._filters.items()},setFilters:function(t){var e=this.grid();e&&!e.canFiltering()||this._filters.assign(t)},filterActions_:function(){return this._filterActions.concat()},setFilterActions:function(t){if(t!=this._filterActions){if(t!==this._filterActions&&(this._filterActions=[],t))for(var e,i=0,n=(t=k(t)?t:[t]).length;i<n;i++)t[i]&&((e=new ko(this)).assign(t[i]),this._filterActions.push(e));var s=this.grid();s&&s.$_columnFilterActionsChanged(this)}},hasFilterAction:function(){return 0<this._filterActions.length},setLookupValues:function(t){t!=this._lookupValues&&(this._lookupValues=t&&t.slice(),this._lookupMap=null,this._changed())},setLookupLabels:function(t){t!=this._lookupLabels&&(this._lookupLabels=t&&t.slice(),this._lookupMap=null,this._changed())},setValueSeparator:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},labelFieldIndex:function(){return this._labelFieldIndex},lookupSource:function(){return this._lookupSource},setLookupKeyFields:function(t){t!=this._lookupKeyFields&&(t&&!xt(t)&&(t=[t]),this._lookupKeyFields=t,this._changed())},lookupKeyFieldIds:function(){return this._lookupKeyFieldIds},setDynamicStyles:function(t){this._dynamicStyles.setItems(t),this._changed()},setEditor:function(t){if("string"==typeof t)this._editor=t;else if(t)for(var e in t.hasOwnProperty("type")&&(this._editor=t.type),this._editorOptions=this._editorOptions||{},t){var i=t[e];k(i)?this._editorOptions[e]=i.slice():this._editorOptions[e]=i}},hasDomain:function(){return this._lookupValues&&this._lookupLabels},setImageList:function(t){t!=this._imageList&&(this._imageList=t,t=this.grid())&&(this._images=t.getImageList(this._imageList))},images:function(){return this._images},_resetImages:function(t){this._imageList?this._images=t.getImageList(this._imageList):this._images=null},getImages:function(){return this._images},isMergeGrouped:function(){return this._mergeGrouped},_setMergeGrouped:function(t){this._mergeGrouped=t},getField:function(){var t=this._dataIndex;if(0<=t){var e=this.grid().dataSource();if(e)return e.getField(t)}return null},getLookupLabel:function(t){if(!this._lookupMap){var e=this._lookupValues,i=this._lookupLabels;if(e&&0<e.length){this._lookupMap={};for(var n=0;n<e.length;n++)i&&i.length>n?this._lookupMap[e[n]]=i[n]:this._lookupMap[e[n]]=e[n]}}var s;if(t&&this._valueSeparator){for(var r=t.split(this._valueSeparator),o=[],n=0,a=r.length;n<a;n++)o.push(this._lookupMap&&this._lookupMap[r[n]]?this._lookupMap[r[n]]:r[n]);if(o.length<=0)return"";s=o.join(this._valueSeparator)}else s=this._lookupMap?this._lookupMap[t]:void 0;return s||(null!=this.textOfInvalid()?this.textOfInvalid():t)},getLookupIndex:function(t){if(this._lookupValues&&0<this._lookupValues.length)for(var e=0,i=this._lookupValues.length;e<i;e++)if(this._lookupValues[e]==t)return e;return-1},getLookupIndices:function(t){var e=[];if(t&&this._lookupValues&&0<this._lookupValues.length)for(var i=k(t)?t:t.split(this._valueSeparator),n=0,s=i.length;n<s;n++)0<=this._lookupValues.indexOf(i[n])&&e.push(this._lookupValues.indexOf(i[n]));return e},getLookupValue:function(t){if(this._lookupValues&&0<this._lookupValues.length)return this._lookupValues[t]},getLookupValues:function(t){var e=[];if(this._lookupValues&&0<this._lookupValues.length)for(var i=0,n=t.length;i<n;i++)0<=t[i]&&t[i]<this._lookupValues.length&&e.push(this._lookupValues[t[i]]);return e},getSourceValue:function(t){var e=this._lookupValues,i=this._lookupLabels;if(i&&e){i=i.indexOf(t);if(0<=i&&e.length>i)return e[i];if(0<=(i=e.indexOf(t)))return e[i]}},getSourceValues:function(t){var e=this._lookupValues,i=this._lookupLabels;if(i&&e){for(var n,s=[],r=this._valueSeparator,o=0,a=(t=k(t)?t:r&&t?t.split(r):[t]).length;o<a;o++)0<=(n=i.indexOf(t[o]))&&e.length>n?s.push(e[n]):s.push(t[o]);if(0<s.length&&r)return s.join(r);if(0<s.length)return s.join()}},clearFilters:function(){this.setFilters(null)},addFilters:function(t,e){var i;!t||(i=this.grid())&&!i.canFiltering()||this._filters.addItems(bt(t),e)},removeFilters:function(t){var e;!t||(e=this.grid())&&!e.canFiltering()||this._filters.removeItems(bt(t))},activateFilters:function(t,e){var i;!t||(i=this.grid())&&!i.canFiltering()||this._filters.activateItems(bt(t),e)},activateAllFilters:function(t){var e=this.grid();e&&!e.canFiltering()||this._filters.activateAll(t)},hideColumnFilters:function(t,e){this._filters.hideFilters(bt(t),e)},hideAllColumnFilters:function(t){this._filters.hideAllFilters(t)},toggleFilters:function(t){var e;!t||(e=this.grid())&&!e.canFiltering()||this._filters.toggleItems(bt(t))},toggleAllFilters:function(){var t=this.grid();t&&!t.canFiltering()||this._filters.toggleAll()},getFilter:function(t){return this._filters.getItem(t)},getActiveFilters:function(t){return this._filters.getActiveItems(t)},assign:function(t){this._super(t)},canMerge:function(){return this._mergeGrouped||this._super()},prepare:function(t,e,i){Kl.prepare.call(this,t,e,i),this._menu=t.popupMenuManager().getMenu(this.popupMenu());var n,s,r=t.dataSource();if(this._saveFieldName==this._fieldName&&this._saveLabelField==this._labelField||this._resetDataIndex(r),this._lookupKeyFields&&0<(s=this._lookupKeyFields.length)){for(this._lookupKeyFieldIds=new Array(s),n=0;n<s;n++)this._lookupKeyFieldIds[n]=r.getFieldIndex(this._lookupKeyFields[n]);this._lookupSourceId?this._lookupSource=t.lookupProvider().getSource(this._lookupSourceId):this._lookupSource=null}else this._lookupKeyFieldIds=null,this._lookupSource=null;this._imageButtonsRenderer&&this._imageButtonsRenderer.prepare(t),this._rendererObj&&this._rendererObj.prepare&&this._rendererObj.prepare(t)},getAdapter:function(t){return t===So?this._filters:this._super(t)},isWritable:function(){var t=this._editable&&!this._readOnly;return t=t&&this.$_grid?!this.$_fixed||!this.$_rightFixed||this.$_grid.$_fixedColEditable:t},menu:function(){return this._menu},_setSortOrder:function(t){this._sortOrder=t},_resetDataIndex:function(t){var e;this._dataIndex=-1,this._baseIndex=-1,this._labelFieldIndex=-1,this._objectKey=this._objectCallback=void 0,t&&(this._fieldName?this._dataIndex=t.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex&&(e=t.getField(this._dataIndex),this._baseIndex=t.getBaseField(this._dataIndex),this._valueType=t.getValueType(this._dataIndex),this._objectKey=e._objectKey,this._objectCallback=e._objectCallback),this._labelFieldIndex=t.getFieldIndex(this._labelField),this._saveFieldName=this._fieldName,this._saveLabelField=this._labelField)},$_filterActionClick:function(t,e,i){this.grid()&&this.grid().$_columnFilterActionClicked(t,e,i)},onColumnFilterChanged:function(t,e){this.grid()&&this.grid().$_columnFiltersChanged(t,e)},setExcelFormulaStatement:function(t){t!=this._excelFormulaStatement&&((this._excelFormulaStatement=t)?this._excelFormulaExprStatement?this._excelFormulaExprStatement.setSource(t):this._excelFormulaExprStatement=new _r(t):this._excelFormulaExprStatement=null)},setEqualBlankExpression:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?ni.Default.parse(t):void 0,this._changed())}},{CAPITAL_INDEXERS:["value","values"]}),Yl=e("SeriesColumn",e("DerivedColumn",zl,{init:function(t){this._super(t)},_initColumn:function(){this._super()}}),{init:function(t){this._super(t)},_initColumn:function(){this._super(),this._fieldArray=[],this._fields=null},fieldNames:null,setFieldNames:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[])},fields:function(){return this._fields},resetIndicies:function(t){if(this._fields=[],t)for(var e,i,n,s,r,o,a=this._fieldArray.length,h=0;h<a;h++)if(1<(n=(e=this._fieldArray[h]).split("..")).length){if(i=t.getFieldIndex(n[0]),n=t.getFieldIndex(n[1]),0<=i&&0<=n)for(s=Math.min(i,n),r=Math.max(i,n),o=s;o<=r;o++)this._fields.push(o)}else 0<=(o=t.getFieldIndex(e))&&this._fields.push(o)},_defaultRenderer:function(){return jc.Default}}),Xl=e("ColumnGroupProxy",R,{init:function(t){Bl.init.call(this),this._items=null,t&&(this.assignProps(t,["name","tag","saveWidth","width","fillWidth","fillHeight","visible","resizable","movable","styles","orientation","hideChildHeaders"]),"string"==typeof(t=t.header)?this.header().setText(t):t&&this.header().assign(t))},build:function(t){t=Xl.buildColumns(t,this._items);Bl.setColumns.call(this,t)},setColumns:function(t){this._items=t}},{buildColumns:function(t,e){var i=[];if(e)for(var n,s,r=0,o=e.length;r<o;r++)(n=e[r])instanceof Xl?(n.build(t),i.push(n)):n instanceof Tl?i.push(n):"string"==typeof n?(s=t.layoutColumnByName(n))&&i.push(s):n&&n.name&&(s=t.layoutColumnByName(n.name))&&(s.assignProps(n,["tag","saveWidth","width","fillWidth","fillHeight","visible","resizable","movable","styles"]),i.push(s));return i}}),ql=e("ColumnLayout",null,{init:function(t){re.init.call(this),this._name=t},name:null,items:null,build:function(t){t=Xl.buildColumns(t,this._items);return this.$_validate(t),t},$_validate:function(t){t&&0<t.length&&this.$_validateColumns(t,[])},$_validateColumns:function(t,e){for(var i=t.length-1;0<=i;i--){var n=t[i];if(0<=e.indexOf(n))throw new Error("Column is dupulicated: "+n.name());e.push(n),n instanceof R&&this.$_validateColumns(n.columns(),e)}}},{create:function(t){if(t){var e=k(t)?t:t.columns;if(e=ql.$_parseColumns(e,{}))return(t=new ql(k(t)?null:t.name)).setItems(e),t}return null},$_parseColumns:function(t,e){var i=[];if(t)for(var n=0,s=t.length;n<s;n++){var r=t[n],o=null;"string"==typeof r?e.hasOwnProperty(r)||(e[r]=1,o=r):r&&("group"==r.type||r.hasOwnProperty("columns")&&k(r.columns)&&0<r.columns.length?o=ql.$_parseGroup(r,e):r.name&&!e.hasOwnProperty(r.name)&&(e[r.name]=1,o=r)),o&&i.push(o)}return i},$_parseGroup:function(t,e){var i=new Xl(t),t=t.columns;return t&&(t=ql.$_parseColumns(t,e),i.setColumns(t)),i}}),jl=e("ColumnLayoutCollection",null,{init:function(){re.init.call(this),this._layouts=[]},items:function(){return this._layouts.concat()},count:function(){return this._layouts.length},getItem:function(t){if(t<0||t>=this._layouts.length)throw"Invalid ColumnLayoutCollection index: "+t;return this._layouts[t]},find:function(t){for(var e=0,i=this._layouts.length;e<i;e++)if(this._layouts[e].name()==t)return this._layouts[e];return null},clear:function(){this._layouts=[]},load:function(t){var e;if(t)if(k(t))for(var i=0,n=t.length;i<n;i++)(e=ql.create(t[i]))&&this._layouts.push(e);else(e=ql.create(t))&&this._layouts.push(e)}}),Zl=e("GridDelegate",null,{init:function(t){this._super(),this._grid=t,this._dom=t._dom,this._defaultEditor=null,this._defaultButtonRenderer=new Rc,this._defaultEditButtonRenderer=new Tc,this._cellEditors={},this._selectionViews=[],this._rowViews=[],this._groupHeaderViews=[],this._groupFooterViews=[],this._mergedHeaderViews=[],this._mergedFooterViews=[],this._footerHeadRenderer=new lh},destroy:function(){for(var t in this._destroying=!0,this._cellEditors)this._cellEditors[t]&&!this._cellEditors[t]._destroying&&this._cellEditors[t].destroy&&this._cellEditors[t].destroy(),this._cellEditors[t]=null,delete this._cellEditors[t];this._cellEditors=null,this._grid=null,this._cellEditors=null,this._selectionViews=null,this._rowViews=null,this._groupHeaderViews=null,this._groupFooterViews=null,this._mergedHeaderViews=null,this._mergedFooterViews=null,this._defaultEditor=null,this._super()},isFixed:function(){return this._fixed},prepareResources:function(){this._defaultButtonRenderer.prepare(this._grid)},createRenderer:function(t){var e=null;if(t){var i,n=null;switch("string"==typeof t?i=t:(i=t.type||"text",n=t),i){case"text":e=new Lc;break;case"bar":e=new Ac;break;case"check":e=new Vc;break;case"icon":e=new Gc;break;case"shape":e=new Pc;break;case"signal":e=new Hc;break;case"image":e=new Uc;break;case"link":e=new Yc;break;case"imageButton":e=new Xc;break;case"imageButtons":e=new qc;break;case"code39":e=new Wc;break;case"code128":e=new zc;break;case"seriesText":e=new jc;break;case"sparkLine":e=new Jc;break;case"sparkColumn":e=new Qc;break;case"sparkWinLoss":e=new t_;break;case"actualTargetBullet":e=new e_;break;case"actualTargetText":e=new i_;break;case"multiIcon":e=new $c}e&&n&&e.assign(n)}return e},borrowItemView:function(t,e,i){var n=null;return t instanceof Ar?((n=this._rowViews.pop()||new Sh(this._dom)).setFixed(e),n.setRightFixed(i)):t instanceof Vr?n=this._groupHeaderViews.pop()||new Ah(this._dom):t instanceof zh?((n=this._mergedFooterViews.pop()||new Zh(this._dom)).setFixed(e),n.setRightFixed(i)):t instanceof Pr?((n=this._groupFooterViews.pop()||new Vh(this._dom)).setFixed(e),n.setRightFixed(i)):t instanceof Kh&&((n=this._mergedHeaderViews.pop()||new jh(this._dom)).setFixed(e),n.setRightFixed(i)),n},returnItemView:function(t){t instanceof Sh&&this._rowViews.indexOf(t)<0?this._rowViews.push(t):t instanceof Ah&&this._groupHeaderViews.indexOf(t)<0?this._groupHeaderViews.push(t):t instanceof Vh&&this._groupFooterViews.indexOf(t)<0?this._groupFooterViews.push(t):t instanceof jh&&this._mergedHeaderViews.indexOf(t)<0?this._mergedHeaderViews.push(t):t instanceof Zh&&this._mergedFooterViews.indexOf(t)<0&&this._mergedFooterViews.push(t)},borrowSelectionView:function(t){return this._selectionViews.pop()||new(_e()?Bu:wu)(this._dom)},returnSelectionView:function(t){t&&this._selectionViews.indexOf(t)<0&&this._selectionViews.push(t)},getDefaultCellRenderer:function(){return Lc.Default},getCellButtonRenderer:function(t){t=t.column();return t&&t.button()==Cs.IMAGE?t.getImageButtonRenderer():this._defaultButtonRenderer},createDefaultCellEditor:function(){var t=this._grid._container._container,t=this._defaultEditor=new ud(this._grid,t);return(this._cellEditors.null=t).setController(this._grid._editController),t},getDefaultCellEditor:function(){var t;return this._defaultEditor||(t=this._grid._container._container,this._defaultEditor=new ud(this._grid,t),this._cellEditors.null=this._defaultEditor,this._defaultEditor.setController(this._grid._editController)),this._defaultEditor},getCellEditor:function(t){var t=this.$_getCellEditorType(t),e=this._grid._container._container,i=this._cellEditors[t];if(!i){switch(t){case"dropdown":i=new gd(this._grid,e);break;case"multiline":i=new _d(this._grid,e);break;case"number":i=new xd(this._grid,e);break;case"date":i=new Sd(this._grid,e);break;case"btdate":i=new Dd(this._grid,e);break;case"search":i=new Cd(this._grid,e);break;case"multicheck":i=new wd(this._grid,e);break;case"password":i=new cd(this._grid,e);break;default:i=this.getDefaultCellEditor()}(this._cellEditors[t]=i)&&i.setController(this._grid._editController)}return i},hasEditorButton:function(t){t=this.$_getCellEditorType(t);if(t)switch(t){case"dropdown":case"date":case"btdate":case"search":case"multicheck":return!0;default:return!1}return!1},getCellEditButtonRenderer:function(t){var e=null;return t.dataColumn()&&(t=this.$_getCellEditorType(t),e=this._defaultEditButtonRenderer,"date"==t||"btdate"==t?e.setButtonType(Sc.CALENDAR):e.setButtonType(Sc.COMBO)),e},getFooterHeadRenderer:function(){return this._footerHeadRenderer},getRowHeaderSummaryRenderer:function(){return this._footerHeadRenderer},createGridEventHandler:function(){return null},containElement:function(t){for(var e=Object.keys(this._cellEditors),i=0;i<e.length;i++){var n=this._cellEditors[e[i]];if(n&&n.containElement(t))return!0}},$_getCellEditorType:function(t){var e=this._grid.getCellEditor(t);return e?"string"==typeof e?e.toLowerCase():e.type||"text":(e=t.dataColumn())&&e.editor()?e.editor().toLowerCase():null}}),Rs=e("HeightMeasurer",null,{init:function(){this._super(),this._itemHeight=0,this._headerHeight=0,this._footerHeight=0,this._summaryHeight=0},destroy:function(){return!1},itemHeight:function(){return this._itemHeight},headerHeight:function(){return this._headerHeight},footerHeight:function(){return this._footerHeight},summaryHeight:function(){return this._summaryHeight},calculate:function(t,e,i,n,s){t.calcGroupLevels(),this._itemHeight=e?this.$_calcItemHeights(t,t.getDataLevel()):0,this._headerHeight=i?this.$_calcHeaderHeights(t,t.getHeaderLevel()):0,this._footerHeight=n?this.$_calcFooterHeights(t,t.getDataLevel()):0,this._summaryHeight=s?this.$_calcSummaryHeights(t,t.getDataLevel()):0},_calcItemLine:function(t){var e=t.body().styles(),i=e.fontSize()+3,n=t.indicator(),t=t.stateBar();return n.isVisible()&&(i=Math.max(i,n.styles().fontSize()+3)),i=(i=t.isVisible()?Math.max(i,t.styles().fontSize()+3):i)+Math.max(1,e.borderTopWidth())+Math.max(1,e.borderBottomWidth())+Math.max(1,e.paddingTop())+Math.max(1,e.paddingBottom()),B(i)},_calcHeaderLine:function(t){t=t.header().styles(),t=t.fontSize()+3+Math.max(1,t.borderTopWidth())+Math.max(1,t.borderBottomWidth())+Math.max(1,t.paddingTop())+Math.max(1,t.paddingBottom());return B(t)},_calcFooterLine:function(t){t=t.footer().styles(),t=t.fontSize()+3+Math.max(1,t.borderTopWidth())+Math.max(1,t.borderBottomWidth())+Math.max(1,t.paddingTop())+Math.max(1,t.paddingBottom());return B(t)},_calcSummaryLine:function(t){t=t.header().summary().styles(),t=t.fontSize()+3+Math.max(1,t.borderTopWidth())+Math.max(1,t.borderBottomWidth())+Math.max(1,t.paddingTop())+Math.max(1,t.paddingBottom());return B(t)},_setMeasuredHeight:function(t,e){t._measuredHeight=e},_getRootColumn:function(t){return t._rootGroup()},$_calcHeaderHeights:function(t,e){var i=t.header(),n=B(i.height());return n<=0&&(n=e*this._calcHeaderLine(t)),n=B(Math.max(i.minHeight(),n))},$_calcFooterHeights:function(t,e){var i=t.footer(),n=B(i.height());return n<=0&&(n=e*this._calcFooterLine(t)),n=B(Math.max(i.minHeight(),n))},$_calcSummaryHeights:function(t,e){var i=t.header().summary(),n=B(i.height());return n<=0&&(n=e*this._calcSummaryLine(t)),n=B(Math.max(i.minHeight(),n))}}),Jl=e("SimpleHeightsMeasurer",Rs,{init:function(){this._super()},calculate:function(t,e,i,n,s){this._super(t,e,i,n,s)},$_arrangeItemHeights:function(t,e){var i,n,s=0,r=t.visibleCount();if(t.isVertical())for(var o=B(e/t.dataLevel()),a=0;a<r;a++)n=t.getVisibleItem(a),a==r-1?i=Math.max(0,e-s):n instanceof R?s+=i=o*n.dataLevel():s+=i=o,this._setMeasuredHeight(n,i),n instanceof R&&this.$_arrangeItemHeights(n,i);else for(a=0;a<r;a++)n=t.getVisibleItem(a),this._setMeasuredHeight(n,e),n instanceof R&&this.$_arrangeItemHeights(n,e)},$_calcItemHeights:function(t,e){var i,n=t.displayOptions(),s=B(n.rowHeight()),e=(s<=0&&(s=e*(i=this._calcItemLine(t))),s=B(Math.max(n.minRowHeight(),s)),0<(i=n.maxRowHeight())&&i<s&&(s=i),this._getRootColumn(t));return this.$_arrangeItemHeights(e,s),s}}),Ql=(Jl.Default=new Jl,e("FixedHeightsMeasurer",Rs,{init:function(){this._super()},calculate:function(t,e,i,n,s){this._super(t,e,i,n,s)},$_checkHeight:function(t,e){for(var i=t.visibleCount(),n=0;n<i;n++){var s=t.getVisibleItem(n);s._value=0<s.height()?s.height():e,s instanceof R&&this.$_checkHeight(s,e)}},$_calcGroupHeight:function(t){var e,i=0,n=t.visibleCount();if(t.isVertical())for(var s=0;s<n;s++)(e=t.getVisibleItem(s))instanceof R?i+=this.$_calcGroupHeight(e):i+=e._value;else for(s=0;s<n;s++)i=(e=t.getVisibleItem(s))instanceof R?Math.max(i,this.$_calcGroupHeight(e)):Math.max(i,e._value);return t._sum=i},$_arrangeHeights:function(t,e){var i,n,s=t.visibleCount();if(t.isVertical()){var r=0;if(t._sum>e)for(l=0;l<s;l++){var o=t.getVisibleItem(l);l<s-1?r+=i=B(e*o._value/t._sum):i=Math.max(0,e-r),this._setMeasuredHeight(o,i),o instanceof R&&this.$_arrangeHeights(o,i)}else if(t._sum<e){var a=0;for(l=0;l<s;l++)0<(n=(o=t.getVisibleItem(l)).fillHeight())&&(a+=n);if(0<a)for(var h=e-t._sum,l=0;l<s;l++)o=t.getVisibleItem(l),l<s-1?(i=o._value,0<(n=o.fillHeight())&&(i+=B(h*n/a)),r+=i):i=Math.max(0,e-r),this._setMeasuredHeight(o,i),o instanceof R&&this.$_arrangeHeights(o,i);else for(l=0;l<s;l++)o=t.getVisibleItem(l),l<s-1?r+=i=B(e*o._value/t._sum):i=Math.max(0,e-r),this._setMeasuredHeight(o,i),o instanceof R&&this.$_arrangeHeights(o,i)}else for(l=0;l<s;l++)o=t.getVisibleItem(l),l<s-1?r+=i=o._value:i=Math.max(0,e-r),this._setMeasuredHeight(o,i),o instanceof R&&this.$_arrangeHeights(o,o._value)}else for(l=0;l<s;l++)o=t.getVisibleItem(l),this._setMeasuredHeight(o,e),o instanceof R&&this.$_arrangeHeights(o,e)},$_calcItemHeights:function(t,e){var i=this._calcItemLine(t),n=this._getRootColumn(t),i=(this.$_checkHeight(n,i),t.displayOptions()),t=this.$_calcGroupHeight(n),s=B(i.rowHeight());return 0<s&&(t=s),t=B(Math.max(t,i.minRowHeight())),0<(s=B(i.maxRowHeight()))&&s<t&&(t=s),this.$_arrangeHeights(n,t),t}})),td=(Ql.Default=new Ql,new O),ed=e("GridLayoutManager",null,{init:function(t){this._super(),this._grid=t,this._options=null,this._items=null,this._panelBounds=null,this._indicatorBounds=null,this._stateBarBounds=null,this._checkBarBounds=null,this._rowGroupBounds=null,this._rowGroupBarWidth=0,this._fixedBounds=null,this._nonfixedBounds=null,this._headerBounds=null,this._fixedHeaderBounds=null,this._summaryBounds=null,this._fixedSummaryBounds=null,this._editBarBounds=null,this._footerBounds=null,this._fixedFooterBounds=null,this._bodyBounds=null,this._gridBounds=null,this._scrollBounds=null,this._columnGrouped=!1,this._columnCount=0,this._columns=[],this._fixedColumnPoints=[],this._rfixedColumnPoints=[],this._columnPoints=[],this._fixedItemCount=0,this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,this._fixedItemPoints=[],this._itemPoints=[],this._itemHeights={},this._fixedCols=0,this._rfixedCols=0,this._fixedRows=0,this._fixedWidth=0,this._fixedHeight=0,this._rfixedWidth=0,this._focusIndex=null,this._columnFitted=!1,this._columnsLength=0,this._prevFirst=0,this._prevLast=0,this._firstCol=0,this._lastCol=0,this._clientRect=null,this._leftPos=0,this._topIndex=0,this._hscrollBar=!1,this._vscrollBar=!1,this._heightMeasurer=null,this._columnMerged=!1},destroy:function(){this._destroying=!0,this._columns=null,this._fixedColumnPoints=null,this._rfixedColumnPoints=null,this._columnPoints=null,this._fixedItemPoints=null,this._itemPoints=null,this._itemHeights=null,this._grid=null,this._topIndex=null,this._leftPos=null,this._heightMeasurer=null,this._super()},heightMeasurer:null,grid:function(){return this._grid},isColumnGrouped:function(){return this._columnGrouped},isColumnMerged:function(){return this._columnMerged},itemCount:function(){return this._itemCount},fullItemCount:function(){return this._fullItemCount},columnCount:function(){return this._columnCount},isHscrollBar:function(){return this._hscrollBar},isVscrollBar:function(){return this._vscrollBar},columnsLength:function(){return this._columnsLength},topIndex:function(){return this._topIndex},leftPos:function(){return this._leftPos},prevFirst:function(t,e){return t?e?this.rfixedStartCol():0:this._prevFirst},prevLast:function(t,e){return t?e?this._columnCount-1:this._fixedCols-1:this._prevLast},firstCol:function(t,e){return t?e?this.rfixedStartCol():0:this._firstCol},lastCol:function(t,e){return t?e?this._columnCount-1:this._fixedCols-1:this._lastCol},fixedItemCount:function(){return this._fixedItemCount},fixedColCount:function(){return this._fixedCols},rfixedColCount:function(){return this._rfixedCols},rfixedStartCol:function(){return this._columnCount-this._rfixedCols},fixedRowCount:function(){return this._fixedRows},isRowGrouped:function(){return!1},rowGroupLevels:function(){return 0},panelBounds:function(){return this._panelBounds.clone()},indicatorBounds:function(){return this._indicatorBounds.clone()},stateBarBounds:function(){return this._stateBarBounds.clone()},checkBarBounds:function(){return this._checkBarBounds.clone()},rowGroupBounds:function(){return this._rowGroupBounds.clone()},headerBounds:function(){return this._headerBounds.clone()},fixedHeaderBounds:function(){return this._fixedHeaderBounds.clone()},summaryBounds:function(){return this._summaryBounds.clone()},fixedSummaryBounds:function(){return this._fixedSummaryBounds.clone()},editorBounds:function(){return this._editorBounds.clone()},footerBounds:function(){return this._footerBounds.clone()},fixedFooterBounds:function(){return this._fixedFooterBounds.clone()},fixedBounds:function(){return this._fixedBounds.clone()},rfixedBounds:function(){return this._rfixedBounds.clone()},nonfixedBounds:function(){return this._nonfixedBounds.clone()},bodyBounds:function(){return this._bodyBounds.clone()},gridBounds:function(){return this._gridBounds.clone()},clientRect:function(){return this._clientRect.clone()},fixedWidth:function(){return this._fixedWidth},rfixedLeft:function(){return this._rfixedBounds.x},rfixedWidth:function(){return this._rfixedWidth},fixedHeight:function(){return this._fixedHeight},setHeightMeasurer:function(t){this._heightMeasurer=t},cellIsVisible:function(t){var e,i=t.I(),n=this._fixedItemCount;if(n<=i){if(i<this._topIndex+n)return!1;if(0==this._fullItemCount&&i==this._topIndex+n)return!0;if(i>=this._topIndex+n+this._fullItemCount)return!1}var s=t.column(),r=s.root(),i=r.displayIndex();if(this._fixedCols<=i){for(e=this.columnBounds(i).x;s!=r;)e+=s.displayOffset(),s=s.parent();if(e<this._leftPos)return!1;if(e+t.column().displayWidth()-this._leftPos>this._nonfixedBounds.width)return!1}return!0},makeCellVisible:function(t){this._focusIndex=t.clone()},getColumn:function(t){return this._columns[t]},getColumnBounds:function(t){return this.columnBounds(t)},columnBounds:function(t){var e,i=this.rfixedStartCol();return t<this._fixedCols?e=new O(this._fixedColumnPoints[t],0,this._fixedColumnPoints[t+1]-this._fixedColumnPoints[t],0):i<=t?(e=new O(this._rfixedColumnPoints[t-i],0,this._rfixedColumnPoints[t-i+1]-this._rfixedColumnPoints[t-i],0)).offset(this._grid.fixedOptions().colBarWidth(),0):(i=t-this._fixedCols,e=new O(this._columnPoints[i],0,this._columnPoints[1+i]-this._columnPoints[i],0)),e},getDataColumnBounds:function(t){return this.dataColumnBounds(t)},dataColumnBounds:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnBounds(e.displayIndex());return i!==e&&(n.x+=t.$_getOffset(i),n.width=isNaN(i._fitWidth)?i.groupWidth():B(i._fitWidth)),n},yU:function(){return this._grid._feedbackLayer},getColumnRect:function(t){return this.columnRect(t)},columnRect:function(t){var e,i,n=this.rfixedStartCol(),n=t<this._fixedCols?(e=this._gridBounds.x,new O(this._fixedColumnPoints[i=t]+e,0,this._fixedColumnPoints[i+1]-this._fixedColumnPoints[i],0)):n<=t?(e=this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth(),new O(this._rfixedColumnPoints[i=t-n]+e,0,this._rfixedColumnPoints[i+1]-this._rfixedColumnPoints[i],0)):(e=this._bodyBounds.x,i=t-this._fixedCols,new O(this._columnPoints[i]+e,0,this._columnPoints[i+1]-this._columnPoints[i],0));return n},getDataColumnRect:function(t){return this.dataColumnRect(t)},dataColumnRect:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnBounds(e.displayIndex());return i!==e&&(n.leftBy(t.$_getOffset(i)),n.width=i.groupWidth()),n},dataRootBounds:function(t){var e=t.root(),t=t.dataRoot(),i=this.columnBounds(e.displayIndex());return t!=e&&(this._getColumnRectInRoot(t,td),i.leftBy(td.x),i.setWidth(t.displayWidth())),i},dataRootRect:function(t){var e=t.root(),i=t.dataRoot(),n=this.columnRect(e.displayIndex());if(i!=e){for(var s=t.parent(),r=t.displayOffset();s;){var o=s.displayOffset();if(r+=isNaN(o)?0:o,(s=s.parent())instanceof Hu)break}n.setLeft(n.x+r),n.width=i.displayWidth()}return n},itemBounds:function(t,e,i){i=i?this._rfixedBounds:e?this._fixedBounds:this._bodyBounds;return t<this._fixedItemCount?new O(0,this._fixedItemPoints[t],i.width,this._fixedItemPoints[t+1]-this._fixedItemPoints[t]):new O(0,this._itemPoints[t-this._fixedItemCount],i.width,this._itemPoints[t-this._fixedItemCount+1]-this._itemPoints[t-this._fixedItemCount])},getItemBounds:function(t,e){return this.itemBounds(t,e)},itemRect:function(t,e){var e=e?this._fixedBounds:this._bodyBounds,i=e.y;return t<this._fixedItemCount?new O(0,this._fixedItemPoints[t]+i,e.width,this._fixedItemPoints[t+1]-this._fixedItemPoints[t]):new O(0,this._itemPoints[t-this._fixedItemCount]+i,e.width,this._itemPoints[t-this._fixedItemCount+1]-this._itemPoints[t-this._fixedItemCount])},getItemRect:function(t,e){return this.itemRect(t,e)},dataCellRect:function(t){var e,i,n,s,r=this._grid;return!r.isValid(t)||this._fixedItemCount+this._itemCount<1?new O:(i=(e=t.C()).group()?e.root():t.C(),n=this.columnRect(i.displayIndex()),s=null,t.I()<this._fixedItemCount?(s=this.getItemBounds(t.I()),n.y=s.y+this._bodyBounds.y,n.height=s.height):(t=t.I()-r.topIndex())<0||t>=this._itemCount+this._fixedItemCount?(n.y=this.getItemBounds(0).y+this._bodyBounds.y,n.height=0):(s=this.getItemBounds(t),n.y=s.y+this._bodyBounds.y,n.height=s.height),e!==i&&(s=s||new O,this._getColumnRectInRoot(e,s),s.offset(n.x,n.y),n.copy(s)),n)},mouseToIndex:function(t,e,i){if(i.itemIndex(-1),i.column(null),!(this._columnCount<1)){var n=-1,s=this.grid(),r=this._summaryBounds.bottom();if(r<=e&&e<this._footerBounds.y){for(l=0;l<this._fixedItemCount;l++)if(e>=r+this._fixedItemPoints[l]&&e<r+this._fixedItemPoints[l+1]){n=l,e-=r+this._fixedItemPoints[l];break}if(n<0&&0<this._itemCount){for(l=0;l<this._itemCount;l++)if(e>=r+this._itemPoints[l]&&e<r+this._itemPoints[l+1]){n=l,e-=r+this._itemPoints[l];break}0<=n&&(n+=s.topItem())}}else e>=this._footerBounds.y?n=-2:e<this._headerBounds.y?n=-3:e>this._summaryBounds.y&&e<this._summaryBounds.bottom()&&(n=-4);i.itemIndex(n);var o=-1,a=this._gridBounds.x;if(a<=t&&t<=this._clientRect.width){for(t-=a,l=0;l<this._fixedCols;l++)if(t>=this._fixedColumnPoints[l]&&t<this._fixedColumnPoints[l+1]){o=l,t-=this._fixedColumnPoints[l];break}if(o<0&&0<this._rfixedCols)for(var h=t-this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth()+a,l=0;l<this._rfixedCols;l++)if(h>=this._rfixedColumnPoints[l]&&h<this._rfixedColumnPoints[l+1]){o=l+this.rfixedStartCol(),t=h-=this._rfixedColumnPoints[l];break}if(o<0)for(t=t-this._fixedWidth+this._leftPos,l=this._firstCol;l<=this._lastCol;l++)if(t>=this._columnPoints[l-this._fixedCols]&&t<this._columnPoints[l-this._fixedCols+1]){o=l,t-=this._columnPoints[l-this._fixedCols];break}}return 0<=o&&o<s.visibleColumnCount()?(i.column(s.getVisibleColumn(o)),(a=b(i.column().root(),R))&&i.column(a.columnAtPoint(t,e))):(i.column(null),i.itemIndex(-1)),i}},mouseToIndexEx:function(t,e,i){if(!(this._columnCount<1)){var n=0,s=this.grid(),r=this._topIndex+this._fixedItemCount,o=this._bodyBounds.y;if(e<o)n=-1;else if(e>=this._bodyBounds.bottom()&&e<this._footerBounds.y)n=r+this._fullItemCount;else if(e>=this._footerBounds.y)n=r+this._fullItemCount;else{for(n=-1,l=0;l<this._fixedItemCount;l++)if(e>=o+this._fixedItemPoints[l]&&e<o+this._fixedItemPoints[l+1]){n=l;break}if(n<0&&0<this._itemCount){for(l=0;l<this._itemCount;l++)if(e>=o+this._itemPoints[l]&&e<o+this._itemPoints[l+1]){n=l;break}0<=n&&(n+=r)}}i.itemIndex(n);var a=-1,r=this._gridBounds.x;if(t<r)a=Math.max(0,this._firstCol-1);else if(t>=this._bodyBounds.right()&&t<this._clientRect.right())a=s.visibleColumnCount()-1;else if(t>this._clientRect.right())a=Math.min(s.visibleColumnCount()-1,this._lastCol+1);else{for(t-=r,l=0;l<this._fixedCols;l++)if(t>=this._fixedColumnPoints[l]&&t<this._fixedColumnPoints[l+1]){a=l;break}if(a<0&&0<this._rfixedCols)for(var h=t-this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth()+r,l=0;l<this._rfixedCols;l++)if(h>=this._rfixedColumnPoints[l]&&h<this._rfixedColumnPoints[l+1]){a=l+this.rfixedStartCol();break}if(a<0)for(t=t-this._fixedWidth+this._leftPos,l=this._firstCol;l<=this._lastCol;l++)if(t>=this._columnPoints[l-this._fixedCols]&&t<this._columnPoints[l-this._fixedCols+1]){a=l;break}}0<=a&&a<s.visibleColumnCount()?i.column(s.getVisibleColumn(a)):i.column(null)}return i},measure:function(t,e,i,n,s){this._items=this._grid.itemSource(),this._options=this._grid.displayOptions(),this._leftPos=e,this._topIndex=i,this._columnMerged=!1,this._focusIndex&&!this._grid.isValid(this._focusIndex)&&this._focusIndex.setItemIndex(Math.max(0,Math.min(this._focusIndex.I(),this._grid.itemCount()-1))),this._doMeasure(t,n,s),this._focusIndex=null},layout:function(t){this._doLayout(t)},fitColumnWidth:function(t,e,i,n){t instanceof R?this._doFitGroupWidth(t,e,i,n):t instanceof zl&&this._doFitColumnWidth(t,e,i,n,!1)},fitRowHeight:function(t,e,i,n){var s=this.grid(),r=s.displayOptions().maxRowHeight(),o=this._items.getItem(t),o=o&&o.dataId?o.dataId():-1;if(this._heightMeasurer&&!(o<0)){delete this._itemHeights[o];var a=this._heightMeasurer.$_calcItemHeights(s,1),h=Math.max(a,t<this._fixedItemCount?this._gridBounds.height-3:this._gridBounds.height-this._fixedHeight-3),h=r&&r<h?r:h;e=e?Math.min(Math.max(a,e),h):h;for(var l,d,u=s.getLeafColumns(!0),c=a,_=u.length;_--;)d=(l=u[_]).displayWidth(),(!i||l.rendererObj&&l.rendererObj()instanceof Lc)&&(c=(l=this.$_dofitCellHeight(t,l,d,e)).height?Math.max(c,l.height):c);a<c&&(this._itemHeights[o]=c),n&&s.refreshView()}},fitRowHeightAll:function(t,e){if(this._heightMeasurer){var i,n,s,r,o=this.grid(),a=o.displayOptions().maxRowHeight(),h=this._heightMeasurer.$_calcItemHeights(o,1),l=o.getLeafColumns(!0);this._itemHeights={};for(var d=0,u=o.itemCount();d<u;d++)if((r=o.getItem(d))&&(r instanceof Ar||r instanceof L)&&r.dataId&&!((r=r.dataId())<0)){i=Math.max(h,d<this._fixedItemCount?this._gridBounds.height-3:this._gridBounds.height-this._fixedHeight-3),i=a&&a<i?a:i,t=t?Math.min(Math.max(h,t),i):i;for(var c=h,_=l.length;_--;)n=(s=l[_]).displayWidth(),(!e||s.rendererObj&&s.rendererObj()instanceof Lc)&&(c=(s=this.$_dofitCellHeight(d,s,n,t)).height?Math.max(c,s.height):c);h<c?this._itemHeights[r]=c:delete this._itemHeights[r]}o.refreshView()}},$_dofitCellHeight:function(t,e,i,n){var s=this._grid,r=s.body(),o=new(e instanceof Yl?nd:id)(s),i=new O(0,0,i,n);return e.isExceptRowHeight()?(i.height=0,i):(o.updateCell(r.getCell($.temp(s,t,e))),i=o._getRenderRect(i),o.inflatePadding(i),o.measureHeight(s,i.width,n))},setRowHeight:function(t,e,i){var n,s,t=this._items.getItem(t);!t.dataId||t.dataId()<0||(s=this.grid().displayOptions()).isEachRowResizable()&&(n=s.minRowHeight(),s=s.maxRowHeight(),this.$_doSetRowHeight(t,e,n,s,i))},getRowHeight:function(t){var e=this.grid(),i=e.delegate();return this.$_calcItemHeight(e,i,t)},$_doSetRowHeight:function(t,e,i,n,s){var r=this.grid(),e=(e=Math.min(e,this._gridBounds.height-this._fixedHeight),Math.max(e,i)),i=t.dataId();this._itemHeights[i]=e,s&&r.refreshView()},clearRowHeights:function(t){var e=this.grid();this._itemHeights={},t&&e.refreshView()},isMergedCell:function(t){var e=this._grid;if(e.rowGroup().isMergeMode()&&e.isGroupedColumn(t.dataColumn()))return!0;e=t.column();if(e instanceof zl&&e.canMerge()){e=e.stateFor(Wh.MERGE_ROOMS);if(e)return null!=e.getRoom(t)}return!1},getMergedCell:function(t){var e=t.column();if(e instanceof zl&&e.canMerge()){e=e.stateFor(Wh.MERGE_ROOMS);if(e)return e.getRoom(t)}return null},scrollToNextColumn:function(){for(var t=0,e=this._columnPoints.length;t<e;t++)if(this._columnPoints[t]>this._leftPos)return this._columnPoints[t];return this._leftPos},scrollToPrevColumn:function(){for(var t=this._columnCount-1;0<=t;t--)if(this._columnPoints[t]<this._leftPos)return this._columnPoints[t];return this._leftPos},positionToColumn:function(t){for(var e=0;e<this._columnCount;e++)if(this._columnPoints[e+1]>t)return e;return-1},_isColumnsDirty:function(){return this._grid._isColumnsDirty()},_isHeaderDirty:function(){return this._grid._isStylesDirty()||this._grid.header().isDirty()||this._grid._isColumnsDirty()},_isFooterDirty:function(){return this._grid._isStylesDirty()||this._grid.footer().isDirty()||this._grid._isColumnsDirty()},_getFixedRowCount:function(){var t=this._grid.itemSource();return t?Math.min(t.fixedCount(),t.itemCount()):0},_getItem:function(t){return this._items.getItem(t)},_doMeasure:function(t,e,i){var n=this._grid,s=t.clone(),r=(this._hscrollBar=this._vscrollBar=!1,this._prevFirst=this._firstCol,this._prevLast=this._lastCol,this._firstCol=0,this._lastCol=-1,this.$_checkColumnGrouping(),this.$_calcFixedColumnPoints(),this.$_calcColumnPoints(),this.$_calcRightFixedColumnPoints(),this._heightMeasurer.calculate(n,!0,n.header().isVisible(),n.footer().isVisible(),n.header().summary().isVisible()),this._panelBounds=s.clone(),o=n.panel().isVisible()&&(r=n.panelView())?(r.setModel(n.panel()),r.measure(n,s.width,s.height)):l.EMPTY,n._panel._realHeight=o.height,this._panelBounds.height=o.height,s.topBy(o.height),this._indicatorBounds=s.clone(),o=n.indicator().isVisible()?(r=n.indicatorView()).measure(n,s.width,s.height):l.EMPTY,n._indicator._realWidth=o.width,this._indicatorBounds.width=o.width,s.leftBy(o.width),this._stateBarBounds=s.clone(),o=n.stateBar().isVisible()?(r=n.stateBarView()).measure(n,s.width,s.height):l.EMPTY,this._stateBarBounds.width=o.width,s.leftBy(o.width),this._checkBarBounds=s.clone(),o=n.checkBar().isVisible()?(r=n.checkBarView()).measure(n,s.width,s.height):l.EMPTY,this._checkBarBounds.width=o.width,s.leftBy(o.width),this._rowGroupBounds=s.clone(),o=this.isRowGrouped()?n.rowGroupView().measure(n,s.width,s.height):l.EMPTY,this._rowGroupBounds.width=o.width,s.leftBy(o.width),this._fixedBounds=s.clone(),this._fixedBounds.width=this._fixedWidth,s.leftBy(this._fixedWidth),this._rfixedBounds=s.clone(),this._rfixedBounds.x=Math.min(s.x+this._columnsLength+this._rfixedWidth,s.right())-this._rfixedWidth,this._rfixedBounds.width=this._rfixedWidth,s.width-=this._rfixedWidth,this._headerBounds=s.clone(),n.header().isVisible()?(o=(r=n.headerView()).measure(n,s.width,s.height)).height=Math.max(o.height,this._heightMeasurer.headerHeight()):o=l.EMPTY,n._header._realHeight=o.height,this._headerBounds.height=o.height,this._headerBounds.width=o.width,this._fixedHeaderBounds=new O(this._fixedBounds.x,this._headerBounds.y,this._fixedBounds.width,this._headerBounds.height),this._rfixedHeaderBounds=new O(this._rfixedBounds.x,this._headerBounds.y,this._rfixedBounds.width,this._headerBounds.height),s.topBy(o.height),this._summaryBounds=s.clone(),n.header().summary().isVisible()?(o=(r=n.summaryView()).measure(n,s.width,s.height)).height=Math.max(o.height,this._heightMeasurer.summaryHeight()):o=l.EMPTY,n._header._summary._realHeight=o.height,this._summaryBounds.height=o.height,this._summaryBounds.width=o.width,this._fixedSummaryBounds=new O(this._fixedBounds.x,this._summaryBounds.y,this._fixedBounds.width,this._summaryBounds.height),this._rfixedSummaryBounds=new O(this._rfixedBounds.x,this._summaryBounds.y,this._rfixedBounds.width,this._summaryBounds.height),this._editBarBounds=s.clone(),this._editBarBounds.y+=this._summaryBounds.height,n.editBar().isVisible()?((r=n.editBarRenderer()).setModel(n.getEditBar()),(o=r.measure(n,s.width,s.height)).height=Math.max(o.height,this._heightMeasurer.itemHeight(0))):o=l.EMPTY,this._editBarBounds.height=o.height,this._editBarBounds.width=o.width,this._footerBounds=s.clone(),n.footer().isVisible()?(o=(r=n.footerView()).measure(n,s.width,s.height)).height=Math.max(o.height,this._heightMeasurer.footerHeight()):o=l.EMPTY,n._footer._realHeight=o.height,this._footerBounds.y=s.bottom()-o.height,this._footerBounds.width=o.width,this._footerBounds.height=o.height,this._fixedFooterBounds=new O(this._fixedBounds.x,this._footerBounds.y,this._fixedBounds.width,this._footerBounds.height),this._rfixedFooterBounds=new O(this._rfixedBounds.x,this._footerBounds.y,this._rfixedBounds.width,this._footerBounds.height),this._gridBounds=new O(this._fixedBounds.x,this._editBarBounds.bottom(),t.right()-this._fixedBounds.x,this._footerBounds.y-this._editBarBounds.bottom()),new O(this._headerBounds.x,this._editBarBounds.bottom(),this._headerBounds.width,this._footerBounds.y-this._editBarBounds.bottom()+1)),o=(this.$_calcHorzScroll(i,r,this._gridBounds),this._hscrollBar&&r.bottomBy(-i),this._calcItemPoints(r),this._bodyBounds=r.clone(),this.$_updateScrollInfo(t,e,i),this.$_checkColumnMerging(),this._vscrollBar&&this._rfixedBounds.right()>this._gridBounds.right()&&(this._rfixedBounds.x=this._gridBounds.right()-this._rfixedWidth,this._rfixedHeaderBounds.x=this._rfixedFooterBounds.x=this._rfixedSummaryBounds.x=this._rfixedBounds.x),this._fixedBounds.y=this._rfixedBounds.y=this._bodyBounds.y,this._fixedBounds.height=this._rfixedBounds.height=this._bodyBounds.height,this._nonfixedBounds=this._gridBounds.clone(),this._nonfixedBounds.setLeft(this._nonfixedBounds.x+this._fixedWidth),this._nonfixedBounds.rightBy(-this._rfixedWidth),0<this._fixedHeight&&this._nonfixedBounds.setTop(this._nonfixedBounds.y+this._fixedHeight+n.fixedOptions().rowBarHeight()),this.$_measureFitting(this._nonfixedBounds,this._vscrollBar?e:0),this._columnFitted?(this.$_fitColumns(this._nonfixedBounds.width),this._bodyBounds.width=this._columnsLength,this._rfixedBounds.x=s.x+this._columnsLength,this._rfixedBounds.width=this._rfixedWidth,this._rfixedHeaderBounds=new O(this._rfixedBounds.x,this._headerBounds.y,this._rfixedBounds.width,this._headerBounds.height),this._rfixedSummaryBounds=new O(this._rfixedBounds.x,this._summaryBounds.y,this._rfixedBounds.width,this._summaryBounds.height),this._rfixedFooterBounds=new O(this._rfixedBounds.x,this._footerBounds.y,this._rfixedBounds.width,this._footerBounds.height)):this._clearFitWidths(),this.$_calcLeftPos(),this.isRowGrouped()&&(this._rowGroupBounds.setRight(this._bodyBounds.right()+this._rfixedWidth),this._rowGroupBounds.setTop(this._headerBounds.y),this._rowGroupBounds.setBottom(this._footerBounds.bottom())),this._bodyBounds.x-=this._leftPos,this._bodyBounds.width+this._rfixedWidth);this._panelBounds.setRight(this._bodyBounds.right()+this._rfixedWidth),this._headerBounds.x=this._bodyBounds.x,this._headerBounds.width=o,this._summaryBounds.x=this._bodyBounds.x,this._summaryBounds.width=o,this._editBarBounds.x=this._bodyBounds.x,this._editBarBounds.width=o,this._footerBounds.x=this._bodyBounds.x,this._footerBounds.width=o,r=Math.min(this._footerBounds.y,this._bodyBounds.bottom()),this._indicatorBounds.y=this._bodyBounds.y,this._indicatorBounds.setBottom(r),this._stateBarBounds.y=this._bodyBounds.y,this._stateBarBounds.setBottom(r),this._checkBarBounds.y=this._bodyBounds.y,this._checkBarBounds.setBottom(r)},$_calcHorzScroll:function(t,e,i){this._hscrollBar=this._options.fitStyle()!=Es.EVEN_FILL,this._hscrollBar&&(this._fixedWidth+this._rfixedWidth>=i.width?this._hscrollBar=0<this._columnsLength:this._hscrollBar=this._columnsLength>i.width-this._fixedWidth-this._rfixedWidth),e.width=this._columnsLength},$_updateScrollInfo:function(t,e,i){var n,s,r=this._options,o=r.fitStyle()==Es.EVEN_FILL,a=r.vscrollBarVisibility()===js.ALWAYS,r=r.hscrollBarVisibility()===js.ALWAYS,h=this.grid(),l=this._bodyBounds,d=l.right()+this._rfixedWidth,u=this._footerBounds,c=r||!o&&0<this._columnsLength&&(0<this._leftPos||d>t.right()),_=a||0<this._itemCount&&(0<this._topIndex||l.bottom()>u.y);if((c=c&&this._columnsLength<this._gridBounds.width-this._fixedBounds.width-this._rfixedBounds.width-(_?e:0)?r:c)!=_&&(c?_=a||0<this._itemCount&&l.bottom()>u.y-i:c=r||!o&&0<this._columnsLength&&d>t.right()-(_?e:0)),c){if(!this._hscrollBar&&0<this._itemCount&&((o=l.clone()).setBottom(u.y-i),this._calcItemPoints(o),0<this._itemCount)&&(l.height=this._itemPoints[this._itemCount]),this._rfixedFooterBounds.y=this._fixedFooterBounds.y=u.y-=i,l.setBottom(Math.min(l.bottom(),u.y)),this._gridBounds.setBottom(u.y),0<this._itemCount){for(v=this._fullItemCount;0<v&&l.y+this._itemPoints[v]>u.y;)this._fullItemCount--,v--;for(v=this._itemCount;0<v&&l.y+this._itemPoints[v-1]>u.y;)this._itemCount--,this._itemPoints.pop(),v--}}else this._leftPos=0;if(n=l.bottom(),0<this._itemCount&&n<this._fixedFooterBounds.y)if(h.displayOptions().isEachRowResizable()&&1==h._rootColumn._dataLevel){for(var f,m,g,p=this._itemPoints,w=this._itemHeights[m]||this._heightMeasurer.itemHeight(0);0<this._topIndex&&n<this._fixedFooterBounds.y&&(g=this._topIndex-1,m=(f=this._getItem(g+this._fixedItemCount))&&f.dataId(),n+(w=this._itemHeights[m]||this._heightMeasurer.itemHeight(0))<this._fixedFooterBounds.y);){l.bottomBy(w),n=l.bottom(),p.splice(1,0,p[0]+w);for(var v=2;v<p.length;v++)p[v]+=w;this._topIndex=g,this._itemCount++,this._fullItemCount++}_&&0==this._topIndex&&n<this._fixedFooterBounds.y&&(_=a,c=c&&(r||d>t.right()-(_?e:0)))}else{for(w=this._heightMeasurer.itemHeight(0),s=B((this._fixedFooterBounds.y-n)/w),this._availableItemCount=this._fullItemCount+s;0<this._topIndex&&0<s;)this._topIndex--,this._itemCount++,this._fullItemCount++,this._itemPoints.push(this._itemPoints[this._itemPoints.length-1]+w),l.bottomBy(w),s--;_&&0==this._topIndex&&this._availableItemCount>=this._fullItemCount&&(_=a,c=c&&(r||d>t.right()-(_?e:0)))}else this._availableItemCount=this._fullItemCount;this._clientRect=t.clone(),this._clientRect.width-=_?e:0,this._clientRect.height-=c?i:0,this._gridBounds.setRight(this._clientRect.right()),this._gridBounds.setBottom(this._footerBounds.y),this._hscrollBar=c,this._vscrollBar=_},$_calcLeftPos:function(){var t,e,i,n,s,r=this._leftPos;if(0<this._leftPos&&(i=this._columnPoints.length-1,0<(n=this._nonfixedBounds.width-(this._columnPoints[i]-this._leftPos)))&&(this._leftPos=Math.max(0,this._leftPos-n)),this._focusIndex&&(t=this._focusIndex.column())&&(i=(e=t.root()).displayIndex())>=this._fixedCols&&i<this.rfixedStartCol()){for(s=this._columnPoints[i-this._fixedCols];t!=e;)s+=t.displayOffset(),t=t.parent();s<this._leftPos?this._leftPos=s:0<(n=s+this._focusIndex.column().displayWidth()-this._leftPos-this._nonfixedBounds.width)&&(this._leftPos=Math.min(s,this._leftPos+n))}var o=this._leftPos,a=this._clientRect.width;for(this._firstCol=this._fixedCols,this._lastCol=-1,i=this._fixedCols;i<this._columnCount;i++)if(this._columnPoints[i+1-this._fixedCols]>o){this._firstCol=i;break}for(i=this._columnCount-this._rfixedCols-1;i>=this._fixedCols;i--)if(this._columnPoints[i-this._fixedCols]-o<a-this._headerBounds.x){this._lastCol=i;break}r!=this._leftPos&&this._focusIndex&&(this.grid()._horzScrolling=!0)},_doLayout:function(t){var e,i=this._gridBounds,n=this._grid,s=n.header(),r=s.summary(),o=n.footer(),a=n.indicator(),h=n.stateBar(),l=n.checkBar(),d=0<this._fixedCols,u=0<this._rfixedCols,t=((c=n.panelView())&&(c.setVisible(n.panel().isVisible()),c.isVisible())&&(c.setRect(this._panelBounds),c.layoutContent(this)),(c=n.indicatorView()).setVisible(a.isVisible()),c.isVisible()&&(c.setRect(this._indicatorBounds),c.layoutContent(this)),(c=n.stateBarView()).setVisible(h.isVisible()),c.isVisible()&&(c.setRect(this._stateBarBounds),c.layoutContent(this)),(c=n.checkBarView()).setVisible(l.isVisible()),c.isVisible()&&(c.setRect(this._checkBarBounds),c.layoutContent(this)),(c=n.rowGroupView()).setVisible(this.isRowGrouped()),c.isVisible()&&(c.setRect(e=this._rowGroupBounds),c.setClipBounds(e.x,e.y,i.right()-e.x,e.height)),(c=n.headerView()).setVisible(s.isVisible()),c.isVisible()&&(c.setRect(this._headerBounds),c.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,t.height),c.layoutContent(this)),(c=n.fixedHeaderView()).setVisible(d&&s.isVisible()),c.isVisible()&&(c.setRect(this._fixedHeaderBounds),c.layoutContent(this)),(c=n.rfixedHeaderView()).setVisible(u&&s.isVisible()),c.isVisible()&&(c.setRect(this._rfixedHeaderBounds),c.layoutContent(this)),(c=n.summaryView()).setVisible(r.isVisible()),c.isVisible()&&(c.setRect(this._summaryBounds),c.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,t.height),c.layoutContent(this)),(c=n.fixedSummaryView()).setVisible(d&&r.isVisible()),c.isVisible()&&(c.setRect(this._fixedSummaryBounds),c.layoutContent(this)),(c=n.rfixedSummaryView()).setVisible(u&&r.isVisible()),c.isVisible()&&(c.setRect(this._rfixedSummaryBounds),c.layoutContent(this)),(c=n.indicatorHeadView()).setVisible(a.isVisible()&&s.isVisible()),c.isVisible()&&(c.updateCell(a.getHeadCell()),c.setBounds(this._indicatorBounds.x,this._headerBounds.y,this._indicatorBounds.width,this._headerBounds.height),c.layoutContent(this)),(c=n.stateBarHeadView()).setVisible(h.isVisible()&&s.isVisible()),c.isVisible()&&(c.updateCell(h.getHeadCell()),c.setBounds(this._stateBarBounds.x,this._headerBounds.y,this._stateBarBounds.width,this._headerBounds.height),c.layoutContent(this)),(c=n.checkBarHeadView()).setVisible(l.isVisible()&&s.isVisible()),c.isVisible()&&(c.updateCell(l.getHeadCell()),c.setBounds(this._checkBarBounds.x,this._headerBounds.y,this._checkBarBounds.width,this._headerBounds.height),c.layoutContent(this)),(c=n.footerView()).setVisible(o.isVisible()),c.isVisible()&&(c.setRect(this._footerBounds),c.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,this._footerBounds.bottom()),c.layoutContent(this)),(c=n.fixedFooterView()).setVisible(d&&o.isVisible()),c.isVisible()&&(c.setRect(this._fixedFooterBounds),c.layoutContent(this)),(c=n.rfixedFooterView()).setVisible(u&&o.isVisible()),c.isVisible()&&(c.setRect(this._rfixedFooterBounds),c.layoutContent(this)),(c=n.indicatorFootView()).setVisible(a.isVisible()&&o.isVisible()),c.isVisible()&&(c.updateCell(a.getFootCell()),c.setBounds(this._indicatorBounds.x,this._footerBounds.y,this._indicatorBounds.width,this._footerBounds.height),c.layoutContent(this)),(c=n.stateBarFootView()).isVisible=h.isVisible&&o.isVisible,c.isVisible()&&(c.updateCell(h.getFootCell()),c.setBounds(this._stateBarBounds.x,this._footerBounds.y,this._stateBarBounds.width,this._footerBounds.height),c.layoutContent(this)),(c=n.checkBarFootView()).setVisible(l.isVisible()&&o.isVisible()),c.isVisible()&&(c.updateCell(l.getFootCell()),c.setBounds(this._checkBarBounds.x,this._footerBounds.y,this._checkBarBounds.width,this._footerBounds.height),c.layoutContent(this)),(c=n.indicatorSummaryView()).setVisible(a.isVisible()&&r.isVisible()),c.isVisible()&&(c.updateCell(a.getSumCell()),c.setBounds(this._indicatorBounds.x,this._summaryBounds.y,this._indicatorBounds.width,this._summaryBounds.height),c.layoutContent(this)),(c=n.stateBarSummaryView()).isVisible=h.isVisible&&r.isVisible,c.isVisible()&&(c.updateCell(h.getSumCell()),c.setBounds(this._stateBarBounds.x,this._summaryBounds.y,this._stateBarBounds.width,this._summaryBounds.height),c.layoutContent(this)),(c=n.checkBarSummaryView()).setVisible(l.isVisible()&&r.isVisible()),c.isVisible()&&(c.updateCell(l.getSumCell()),c.setBounds(this._checkBarBounds.x,this._summaryBounds.y,this._checkBarBounds.width,this._summaryBounds.height),c.layoutContent(this)),n.fixedBodyView()),s=n.rfixedBodyView(),c=n.bodyView();0<this._fixedItemCount+this._itemCount?(0<this._fixedCols?(t.setVisible(!0),t.setRect(this._fixedBounds),t.setClipBounds(this._fixedBounds.x,this._gridBounds.y,this._fixedBounds.width,this._gridBounds.height)):t.setVisible(!1),0<this._rfixedCols?(s.setVisible(!0),s.setRect(this._rfixedBounds),s.setClipBounds(this._rfixedBounds.x,this._gridBounds.y,this._rfixedBounds.width,this._gridBounds.height)):s.setVisible(!1),c.setRect(this._bodyBounds),c.setClipBounds(this._nonfixedBounds.x,this._gridBounds.y,this._nonfixedBounds.width,this._gridBounds.height),this.$_layoutItems(c,this._bodyBounds),t.setEmpty(!1),s.setEmpty(!1),c.setEmpty(!1)):(t.setBounds(0,this._fixedBounds.y,this._fixedBounds.width,this._footerBounds.y-this._bodyBounds.y),s.setBounds(0,this._rfixedBounds.y,this._rfixedBounds.width,this._footerBounds.y-this._bodyBounds.y),c.setBounds(0,this._bodyBounds.y,this._bodyBounds.width,this._footerBounds.y-this._bodyBounds.y),this.$_layoutItems(c,this._bodyBounds),t.setEmpty(!0),s.setEmpty(!0),c.setEmpty(!0)),(c=n.fixedMergeView()).setVisible(d),d&&(e=this._fixedBounds,c.setRect(e),c.setClipBounds(e.x,e.y,Math.min(e.width,i.right()-e.x),Math.min(e.height,i.bottom()-e.y))),(c=n.rfixedMergeView()).setVisible(u),u&&(e=this._rfixedBounds,c.setRect(e),c.setClipBounds(e.x,e.y,Math.min(e.width,i.right()-e.x),Math.min(e.height,i.bottom()-e.y))),c=n.mergeView(),(e=this._bodyBounds.clone()).width+=this._rfixedWidth,c.setRect(e),d&&(e.x=Math.max(e.x,this._fixedBounds.right())),c.setClipBounds(e.x,e.y,Math.min(e.width,i.right()-e.x),Math.min(e.height,i.bottom()-e.y)),e=this._fixedBounds,n.mergeHeaderView().setBounds(e.x,e.y,e.width+this._bodyBounds.width+this._rfixedWidth,e.height),n.mergeHeaderView().setClipBounds(e.x,e.y,Math.min(e.width+this._bodyBounds.width+this._rfixedWidth,i.right()-e.x),Math.min(e.height,i.bottom()-e.y)),this.$_layoutMerges()},$_checkColumnGrouping:function(){var t,e,i=this._grid;for(this._columnGrouped=!1,t=0,e=i.visibleColumnCount();t<e;t++)if(i.getVisibleColumn(t)instanceof R){this._columnGrouped=!0;break}},$_calcFixedColumnPoints:function(){var t,e,i,n=this._grid,s=n.fixedOptions();if(this._columnCount=n.visibleColumnCount(),this._fixedCols=Math.min(s.colCount(),this._columnCount),this._rfixedCols=Math.min(s.rightColCount(),this._columnCount-this._fixedCols),this._columns=[],this._fixedColumnPoints=[],(this._fixedWidth=0)<this._fixedCols){for(this._fixedColumnPoints.push(e=0),t=0;t<this._fixedCols;t++)i=n.getVisibleColumn(t),this._columns.push(i),e+=i.width(),this._fixedColumnPoints.push(e);this._fixedWidth=this._fixedColumnPoints[this._fixedCols]+n.fixedOptions().colBarWidth()}},$_calcRightFixedColumnPoints:function(){var t,e,i=this._grid;i.fixedOptions();if(this._rfixedColumnPoints=[],(this._rfixedWidth=0)<this._rfixedCols){var n=0,s=this._columnCount;for(this._rfixedColumnPoints.push(n),t=s-this._rfixedCols;t<s;t++)e=i.getVisibleColumn(t),this._columns.push(e),n+=e.width(),this._rfixedColumnPoints.push(n);var r=i.fixedOptions().colBarWidth();this._rfixedWidth=n+r}},$_calcColumnPoints:function(){var t,e,i,n,s=this._grid;if(this._columnsLength=0,this._columnPoints=[],!((t=s.visibleColumnCount()-this._fixedCols-this._rfixedCols)<1)){for(this._columnPoints.push(i=0),e=0;e<t;e++)n=s.getVisibleColumn(e+this._fixedCols),this._columns.push(n),i+=n.width(),this._columnPoints.push(i);this._columnsLength=i}},$_measureFitting:function(t){this.grid();if(this._columnFitted=this._options.fitStyle()!=Es.NONE,this._columnFitted){var e=this._columnPoints.length;if(0<e){var i=t.width;if(this._options.fitStyle()==Es.EVEN_FILL){for(var n=1;n<e;n++)this._columnPoints[n]=this._columnPoints[n]*i/this._columnsLength;this._columnPoints[e-1]=i,this._columnsLength=i}else this._columnFitted=0<i-this._columnPoints[e-1]}else this._columnFitted=!1}},$_fitColumns:function(t){if(this._columnFitted){var e,i,n,s,r=this._columnsLength,o=this._columnPoints.length,a=(this.grid(),this._options.fitStyle());if(0<o){if(a==Es.EVEN||a==Es.EVEN_FILL)for(l=1;l<o;l++)this._columnPoints[l]=B(this._columnPoints[l]*t/r);else if(a==Es.FILL){for(l=s=n=0;l<o-1;l++)0<(e=this._columns[this._fixedCols+l].fillWidth())?s+=e:n+=this._columns[this._fixedCols+l].width();if(0<s)for(n=t-n,l=1;l<o;l++)0<(e=this._columns[this._fixedCols+l-1].fillWidth())?this._columnPoints[l]=B(this._columnPoints[l-1]+e*n/s):this._columnPoints[l]=B(this._columnPoints[l-1]+this._columns[this._fixedCols+l-1].width());else for(l=1;l<o;l++)this._columnPoints[l]=B(this._columnPoints[l]*t/r)}for(var h=0,l=1;l<o-1;l++){var d=this._columnPoints[l]-this._columnPoints[l-1];d<Tl.MIN_WIDTH?(h=Tl.MIN_WIDTH-d,this._columnPoints[l]+=Tl.MIN_WIDTH-d):0<h&&d>Tl.MIN_WIDTH+h&&(this._columnPoints[l]-=h,h=0)}for(l=0;l<o-1;l++)i=this._columns[this._fixedCols+l],this._setFitWidth(i,this._columnPoints[l+1]-this._columnPoints[l])}this._columnPoints[o-1]=t,this._columnsLength=t}},$_calcItemHeight:function(t,e,i){var i=this._items.getItem(i),n=e.borrowItemView(i,!1,!1),s=null,s=(n instanceof Ah&&i instanceof C?s=t.rowGroup().headerStyles():i instanceof Lr&&(s=t.body().styles()),n.updateElement(i,s),this._heightMeasurer.itemHeight(0)),i=(t.displayOptions().isEachRowResizable()&&1==t._rootColumn._dataLevel&&(i=i.dataId(),this._itemHeights[i])&&(s=this._itemHeights[i]),n.measure(t,1e4,s));return e.returnItemView(n),i.height},$_compensateItems:function(t){var e,i,n,s,r=this.grid(),o=r.delegate(),a=this._focusIndex?this._focusIndex.I():-1,h=r.displayOptions().isEachRowResizable()&&1==r._rootColumn._dataLevel;if(a>=this._topIndex+this._fixedItemCount+this._fullItemCount){if(i=0<this.fixedItemCount()?this._fixedHeight+r.fixedOptions().rowBarHeight():0,h){if((n=this.$_calcItemHeight(r,o,a))>=t.height-this._fixedHeight)this._topIndex=a-this._fixedItemCount;else for(e=a-1;e>=this._fixedItemCount;e--)if((n+=this.$_calcItemHeight(r,o,e))>=t.height-i){this._topIndex=Math.max(e-this._fixedItemCount+1,0);break}}else this._topIndex=a-this._fixedItemCount-Math.max(0,this._fullItemCount-1);for(this._itemPoints=[i],this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,s=r.itemCount()-this._fixedItemCount,e=this._topIndex;e<s&&i<t.height;e++)i+=n=this.$_calcItemHeight(r,o,e+this._fixedItemCount),this._itemCount++,this._itemPoints.push(i);return this._fullItemCount=this._itemCount-(i>=t.height?1:0),i}return-1},_calcItemPoints:function(t){var e,i,n,s,r,o=this._grid,a=o.delegate(),h=0;if(this._fixedRows=this._getFixedRowCount(),this._fixedItemCount=0,this._fixedHeight=0,this._fixedItemPoints=[],0<this._fixedRows){for(this._fixedItemPoints.push(h),e=0;e<this._fixedRows&&h<t.height;e++)h+=n=this.$_calcItemHeight(o,a,e),this._fixedItemPoints.push(h),this._fixedItemCount++;this._fixedHeight=h,h+=o.fixedOptions().rowBarHeight()}if(i=o.itemCount()-this._fixedItemCount,this._itemPoints=[],this._itemCount=0,this._fullItemCount=0,(this._availableItemCount=0)<i&&h<t.height){for(this._itemPoints.push(h),s=this._topIndex,e=s=this._focusIndex&&(r=this._focusIndex.I())>=this._fixedItemCount&&r<s+this._fixedItemCount?this._topIndex=r-this._fixedItemCount:s;e<i&&h<t.height;e++)h+=n=this.$_calcItemHeight(o,a,e+this._fixedItemCount),this._itemCount++,this._itemPoints.push(h);this._fullItemCount=this._itemCount-(h>=t.height?1:0),0<=(n=this.$_compensateItems(t))&&(h=n)}t.height=h},$_checkColumnMerging:function(){var i,n,s,r,o,t=this._grid,e=t.mergeView(),a=t.fixedMergeView(),h=t.rfixedMergeView(),l=this._fixedItemCount+this._topIndex,d=Math.min(t.itemCount()-1,this._fixedItemCount+this._topIndex+this._itemCount-1),u=0<this._fixedCols,c=0<this._rfixedCols,_=(e.clearRooms(),u&&a.clearRooms(),c&&h.clearRooms(),t.getDataColumns().slice());function f(t,e){for(i=0,n=t.length;i<n;i++)s=t[i],0<=_.indexOf(s)&&_.splice(_.indexOf(s),1),s instanceof zl&&s.canMerge()&&((r=s.stateFor(Wh.MERGE_ROOMS))||(r=new Wh(s),s.setState(Wh.MERGE_ROOMS,r)),r.refresh(l,d),o=r.getRooms(),e.addColumnRooms(s,o),this._columnMerged=!0)}var m=t.getHorzColumns(0,this._fixedCols);for(f.call(this,m,a),m=t.getHorzColumns(this.rfixedStartCol(),this._rfixedCols),f.call(this,m,h),m=t.getHorzColumns(this._fixedCols,this._columns.length-this._fixedCols-this._rfixedCols),f.call(this,m,e),e.clearFooters(),u&&a.clearFooters(),c&&h.clearFooters(),t.mergeHeaderView().clearHeaders(),i=0,n=_.length;i<n;i++)(r=_[i].stateFor(Wh.MERGE_ROOMS))&&r.clear()},$_layoutItems:function(t,e){var i,n,s,r=this._grid,o=this._grid instanceof X_,a=r.rowGroupView(),h=r.bodyView(),l=r.fixedBodyView(),d=r.rfixedBodyView(),u=0<this._fixedCols,c=0<this._rfixedCols;for(a.clearBody(),h.clearItems(),l.clearItems(),d.clearItems(),i=0;i<this._fixedItemCount;i++)(n=this._items.getItem(i))instanceof Vr?a.addHeader(n):n instanceof Pr?a.addFooter(n):n.isMerged()||(h.addItem(n),u&&l.addItem(n),c&&d.addItem(n));for(s=this._topIndex+this._fixedRows,i=0;i<this._itemCount;i++)(n=this._items.getItem(i+s))instanceof Vr?a.addHeader(n):n instanceof Pr?a.addFooter(n):n.isMerged()||(h.addItem(n),u&&l.addItem(n),c&&d.addItem(n));h.layoutContent(this),(u||0<l.childCount()&&!o)&&l.layoutContent(this),(c||0<d.childCount()&&!o)&&d.layoutContent(this),(this.isRowGrouped()||0<a.childCount()&&!o)&&a.layoutContent(this)},$_layoutMerges:function(){for(var t,e,i,n,s=this._grid,r=0<this._fixedCols,o=0<this._rfixedCols,a=s.mergeView(),h=this._topIndex+this._fixedRows,l=0;l<this._itemCount;l++)(t=this._items.getItem(l+h))instanceof zh&&a.addFooter(t);if(a.layoutContent(this),r){for(e=s.fixedMergeView(),l=0;l<this._itemCount;l++)(t=this._items.getItem(l+h))instanceof zh&&e.addFooter(t);e.layoutContent(this)}if(o){for(i=s.rfixedMergeView(),l=0;l<this._itemCount;l++)(t=this._items.getItem(l+h))instanceof zh&&i.addFooter(t);i.layoutContent(this)}for(n=s.mergeHeaderView(),l=0;l<this._itemCount;l++)(t=this._items.getItem(l+h))instanceof Kh&&n.addHeader(t);n.layoutContent(this)},_doFitGroupWidth:function(t,e,i,n){var s=this._grid,r=(s.itemCount(),0),o=0,s=s._headerView.findCell(t);s instanceof Ja&&(o=(s=s._getCell(t))?s._calcWidth||0:o);for(var a=t.visibleCount();a--;){var h=t.getVisibleItem(a),l=h instanceof R?this._doFitGroupWidth(h,e,0,0):this._doFitColumnWidth(h,e,0,0,!0);t.orientation()==cs.HORIZONTAL?(R.changeWidth(h,l-h.groupWidth(),!1),r+=l):r=Math.max(r,l)}return(t.orientation()==cs.VERTICAL||r<o||0<i||0<n)&&(r=Math.max(o,r),0<n&&(r=Math.min(r,n)),0<i&&(r=Math.max(r,i)),r=Math.max(r,Tl.MIN_WIDTH),R.changeWidth(t,r-t.groupWidth(),!1)),r},_doFitColumnWidth:function(t,e,i,n,s){var r,o=2,a=this._grid,h=a.body(),l=this._options.defaultColumnWidth(),d=a.itemCount();if(s||t.isParentVisible()){var u,c,_,f,m=0,g=0,p=0,w=0,v=0,C=this instanceof W_&&a.getFirstColumn()===t,y=(C&&(g=(u=a.treeOptions()).expanderWidth(),p=(u.isShowCheckBox()?u.checkBoxSize():0)+u.expanderStyles().paddingRight(),w=u.iconWidth()),a.header().isVisible()&&(c=a.header(),!(y=(y=t.isFixed()?a.fixedHeaderView():t.isRightFixed()?a.rfixedHeaderView():a.headerView())&&y.findCell(t,!0))&&t instanceof M&&(c=c.getCell($.temp(a,-1,t)))&&((y=new sd(a)).updateCell(c),c=a.measureText(y.font(),y.text())+y.paddingHorz()+(y._handleWidth||0),y._calcWidth=c),o=(c=y&&y._calcWidth)?Math.max(o,c):o,a.header().summary().isVisible())&&(o=(f=(_=a._summaryView.findCell(t))&&_.measure(a,o,at))&&f.width?Math.max(o,f.width):o),_=new(t instanceof Yl?nd:id)(a),0),x=d;if(e&&(x=(y=a.topItem())+this.itemCount(),0<(d=this.fixedItemCount())))for(r=0;r<d;r++)_.updateCell(h.getCell($.temp(a,r,t))),f=_.measure(a,l,at),o=Math.max(o,f.width);for(r=y;r<x;r++){var I=$.temp(a,r,t);-1<I.dataRow()&&(_.updateCell(h.getCell(I)),f=_.measure(a,l,at),C&&((I=a.getItem(r))&&(v=I.level(),w<=0)&&u.icons()&&(I=a.getTreeIcon(I))&&(w=I.width),m=g*v+p+w),o=Math.max(o,f.width+m))}if(0<n&&(o=Math.min(o,n)),0<i&&(o=Math.max(o,i)),a.footer().isVisible())for(r=a.footer().count()-1;0<=r;r--){var b=(_=a._footerView.findCell(r,t))&&_.measure(a,o,at);o=b&&b.width?Math.max(o,b.width):o}return!s&&t.isParentVisible()&&R.changeWidth(t,o-t.groupWidth(),!1),o}},_getColumnRectInRoot:function(t,e){var i=t.root(),n=t.parent();for(e.copy(t.layoutRect());n!=i;)e.offset(n.layoutRect().x,n.layoutRect().y),n=n.parent()},_clearFitWidths:function(){this.grid()._clearFitWidths()},_getColumnWidth:function(t){var e=this.rfixedStartCol();return t<this._fixedCols?this._fixedColumnPoints[t+1]-this._fixedColumnPoints[t]:t>=rfixedStart?this._rfixedColumnPoints[t-e+1]-this._rfixedColumnPoints[t-e]:this._columnPoints[t-this._fixedCols+1]-this._columnPoints[t-this._fixedCols]},_setFitWidth:function(t,e){t._fitWidth=e;e=b(t,R);e&&e.resetFitWidths()}}),id=e("TestDataCellElement",bh,{init:function(t){this._super(),this._grid=t},grid:function(){return this._grid}}),nd=e("TestSeriesCellElement",Rh,{init:function(t){this._super(),this._grid=t},grid:function(){return this._grid}}),sd=e("TestHeaderCellelement",Za,{init:function(t,e){this._super(t,e),this._grid=t},grid:function(){return this._grid}}),rd=en?1:0,od="Tahoma",ad="10pt",hd=e("CellEditor",le,{init:function(t,e){this._super(),this._grid=t,this._options=t.editorOptions(),this._displayOptions=t.displayOptions(),this._editorBorder="2px solid rgb(82, 146, 247)",this._editorShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",this._parentElement=e,this._editor=this._createEditor(e),(this._editor.$_owner=this)._editIndex=new $,this._controller=null,this._started=!1,this._oldValue=void 0,this._dateConverter=Se.Default,this._saveDateConverter=null,this._boolConverter=Ee.Default,this._saveBoolConverter=null,this._cellBounds=new O,this._isEmptyTextValue=null,this._onfocus=function(t){this._grid.$_setEditFocused(!0,t)},this._onfocusin=function(t){this._grid.$_setEditFocused(!0,t)},this._onblur=function(t){_e()&&setTimeout(function(){this._grid.commitEditor(!0)}.bind(this),50),this._grid.$_setEditFocused(!1,t)},this._onfocusout=function(t){this._grid.$_setEditFocused(!1,t)},this._editor&&(this._editor.addEventListener("focus",this._onfocus.bind(this)),this._editor.addEventListener("focusin",this._onfocusin.bind(this)),this._editor.addEventListener("blur",this._onblur.bind(this)),this._editor.addEventListener("focusout",this._onfocusout.bind(this))),this.setVisible(!1,!0),this.setEditorId(this._editor)},destroy:function(){this._destroying=!0,this._editor&&(this._editor.removeEventListener("focus",this._onfocus.bind(this)),this._editor.removeEventListener("focusin",this._onfocusin.bind(this)),this._editor.removeEventListener("blur",this._onblur.bind(this)),this._editor.removeEventListener("focusout",this._onfocusout.bind(this)),this._editor._inputHandlerStock=null),this._defMaxLength=null,this._editorShadow=null,this._editorBorder=null,E.clearElements(this._container),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._editor=null,this._container=null,this._grid=null,this._oldValue=null,this._super()},emptyValue:void 0,textCase:ds.DEFAULT,fontFamily:null,fontSize:null,datetimeFormat:null,todayChar:null,nowChar:null,booleanFormat:null,visible:!1,editorZIndex:void 0,listZIndex:void 0,setDatetimeFormat:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._saveDateConverter||(this._saveDateConverter=new Se(t)),this._saveDateConverter.setFormatString(t),this._dateConverter=this._saveDateConverter):this._dateConverter=Se.Default)},setBooleanFormat:function(t){t!=this._booleanFormat&&((this._booleanFormat=t)?(this._saveBoolConverter||(this._saveBoolConverter=new Ee(t)),this._saveBoolConverter.setFormat(t),this._boolConverter=this._saveBoolConverter):this._boolConverter=Ee.Default)},setEditorZIndex:function(t){t!=this._editorZIndex&&(this._editorZIndex=t)},getEditorZIndex:function(){var t=this._grid.editorOptions();return null!=this._editorZIndex?this._editorZIndex:null!=t.editorZIndex?t._editorZIndex:2e3},setListZIndex:function(t){},getListZIndex:function(){var t=this._grid.editorOptions();return null!=this._listZIndex?this._listZIndex:null!=t.listZIndex?t._listZIndex:3e3},editor:function(){return this._editor},visible_:function(){return parseInt(this._container.style.width)>rd&&parseInt(this._container.style.height)>rd},containElement(t){return!1},setVisible:function(t,e){var i;t&&((i=this._fontFamily||od)!=this._editor.style.fontFamily&&(this._editor.style.fontFamily=i),(i=this._fontSize||ad)!=this._editor.style.fontSize&&(this._editor.style.fontSize=i),this._container.style.zIndex=this.getEditorZIndex()),t&&this._isEmptyTextValue?this._editor.value="":t||null!=this._editor.value&&null!=this._editor.value&&""!=this._editor.value||(this._isEmptyTextValue=!0,this._grid.$_editFocused&&this.selectAll()),t||E.setSize(this._container,rd,rd)},isEditing:function(){return this._started},editIndex:function(){return this._editIndex},hasButton:function(){return!1},initOptions:function(){this._emptyValue=void 0,this.setBooleanFormat(null),this._todayChar=null,this._nowChar=null,this.setDatetimeFormat(null),this._textCase=ds.DEFAULT,this._fontFamily=null,this._fontSize=null,this._checkHangeul=!1,this._editorZIndex=null,this._listZIndex=null},applyOptions:function(t){t&&this.assign(t)},setController:function(t){this._controller=t},beginEdit:function(t,e){this._started||(this._started=this._doBeginEdit(),t&&this.clear(),e&&this.selectAll())},endEdit:function(){this._started&&(this._doEndEdit(),this._started=!1)},caretToLast:function(){},commit:function(){this._doCommit()},setEditIndex:function(t){this._editIndex.assign(t)},setReadOnly:function(t){},getEditValue:function(t,e){},setEditValue:function(t){this._oldValue=t},setCellEditValue:function(t,e){!this.isReadOnly()&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},getEditText:function(){return""},clear:function(){this._editor.value="",this._isEmptyTextValue=!0},setFocus:function(){this._editor.focus({preventScroll:!0})},selectAll:function(){this._grid.$_editFocused&&this._selectAll()},setEditorTitle:function(t){var e,i=t.grid(),n=i.editorOptions();!i._loading&&this._editor&&t&&0<=t.I()&&n&&n._titleExprStatement&&(this._editor.title="",(e=t.item())instanceof Ar||e instanceof L)&&(e=i._body.getCellSimple(t))instanceof ga&&(i=n._titleExprRuntime,t=e.value()instanceof Date?this._dateConverter.getText(e.value()):e.displayText(),i.setCell(e),i.setValue(t),e=n._titleExprStatement.evaluate(n._titleExprRuntime),this._editor.title=e)},setEditorId:function(t){var e,i=this._grid.container()._containerDiv.id;i&&t&&t instanceof HTMLElement&&(e="_"+(this.$name&&0<this.$name.indexOf("CellEditor")?this.$name.substr(0,this.$name.indexOf("CellEditor")):"input"),t.id=i+e.toLowerCase())},setBounds:function(t,e,i,n){},setCellBounds:function(t,e,i,n){this._cellBounds.set(t,e,i,n)},closeList:function(t){},dropDownList:function(t){},buttonClicked:function(t){},_createEditor:function(t){return null},_selectAll:function(){},_editField:function(){return this._grid.dataSource()?this._grid.dataSource().getField(this._editIndex.dataField()):null},_isDateEditor:function(){return!1},_doBeginEdit:function(){return!0},_doEndEdit:function(){},_requestStart:function(){return this._started||(this.selectAll(),this._controller.onEditorStart(this))},$_valToStr:function(e){var t=this.editIndex(),i="";try{if(e!==I||this._mask){var n=t.grid().dataSource().getField(t.dataField());if(n)switch(n.dataType()){case S.DATETIME:e&&(i=this._dateConverter.getText(e)),this._mask&&(i=this._mask.writeBuffer(i));break;case S.BOOLEAN:i=this._boolConverter.toText(e);break;case S.NUMBER:isNaN(e)||(i=kt(e));break;case S.OBJECT:var s=t.column(),r=t.dataRow(),o=s._objectKey,a=s._objectCallback;e&&(i=a&&"function"==typeof a?a(n.orgFieldName(),r,e):o&&e.hasOwnProperty(o)?e[o]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:i=this._mask?this._mask.writeBuffer(e):e}else i=e}}catch(t){mt(t),i=e}return null===i?"":i},$_strToVal:function(t){t=kt(t);var e=this._editIndex,i=e.dataColumn()&&this._textCase==ds.DEFAULT?e.dataColumn().textInputCase():this._textCase;try{var n=e.grid().dataSource().getField(e.dataField());if(n){var s,r,o=n.dataType();if(o==S.DATETIME||t&&this._isDateEditor()&&o==S.TEXT)return s=o==S.DATETIME,r=null,!(r=t&&t==this._nowChar?new Date:r)&&t&&t==this._todayChar&&(r=new Date).setHours(0,0,0,0),r||(this._mask&&(t=this._mask.getStripValue(t)),r=this._dateConverter.getDate(t)),s?!r||isNaN(r.getFullYear())?void 0:r:r?this._dateConverter.getText(r):void 0;if(o==S.BOOLEAN)return this._boolConverter.toBoolEx(t);if(o==S.NUMBER)return parseFloat(t);o==S.TEXT&&this._mask&&(t=this._mask.getStripValue(t))}return i===ds.UPPER?t&&t.toLocaleUpperCase():i===ds.LOWER?t&&t.toLocaleLowerCase():t}catch(t){mt(t)}},_dispatchKeyDown:function(t,e,i,n){return this._controller,this._controller.onEditorKeyDown(this,t,e,i,n)},_dispatchKeyPress:function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},_dispatchKeyUp:function(t,e,i,n){return this._controller,this._controller.onEditorKeyUp(this,t,e,i,n)},_dispatchChange:function(){this._controller.onEditorChange(this)},_dispatchSearch:function(t){this._controller.onEditorSearch(this,t)},_dispatchSearchCellButtonClick:function(t){return this._controller.onSearchCellButtonClick(this,t)},_dispatchCommit:function(){this._controller.onEditorCommit(this)},_sendToParent:function(t,e,i){var n=Zi&&t.metaKey||!Zi&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t.keyCode||t.which))return t.preventDefault&&t.preventDefault(),!0}else if(3==e){if(this._dispatchKeyUp(t.keyCode,n,t.shiftKey,t.altKey))return t.preventDefault&&t.preventDefault(),!0;try{var s=this._controller._grid,r=s.editOptions();if(r.isMaxLengthToNextCell()){var o=r.isSkipReadOnly(),a=s.activeTool&&s.activeTool(),h=this.maxLength&&this.maxLength(),l=this.editIndex().clone(),d=Tt(t.keyCode,p.UP,p.PAGEUP,p.DOWN,p.PAGEDOWN,p.F2,p.TAB,p.ENTER);if(!this._checkHangeul&&!d&&!n&&!t.altKey&&s&&s.isEditing(l)&&0<h&&!this._composing&&47<t.keyCode){var u=this._editor.value;if(this._mask?u=this._mask.getStripValue(this._editor.value,!0):this instanceof xd&&this._maxLengthExceptComma&&(u=this.getEditValue(!0),isNaN(u)&&null==u||(u=String(u))),u&&u.length>=h)return l.right(),o&&a.checkReadOnly(l)&&(a.skipReadOnly(l,1)||(l=this.editIndex().clone())),$.areEquals(l,this.editIndex())||a.setFocused(l,!0),!0}}}catch(t){if(t instanceof Zr)throw t;return!0}}else if(this._dispatchKeyDown(t.keyCode,n,t.shiftKey,t.altKey))return t.preventDefault&&t.preventDefault(),!0;return!1}},{Unselected:{},InvalidFormat:{}}),ld=e("EditMask",null,{init:function(t,e){this._super(!0),this._definitions=new Jr,this._tests=[],this._placeHolder=void 0,this._buffer=void 0,this._defBuffer=[],this._editMask=void 0,this._editor=t,this._caretTimer=void 0,this._showInvalidFormatMessage=!0,this._overWrite=!1,this.setOptions(e)},includedFormat:!1,placeHolder:void 0,editMask:void 0,definitions:void 0,invalidFormatMessage:void 0,showInvalidFormatMessage:!0,overWrite:!1,allowEmpty:!1,restrictNull:!1,destroy:function(){this._destroying=!0,this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,this._super()},clickHandler:function(t){this.isRestrictNull()&&this._moveCaret()},_moveCaret:function(t,e){for(var i=this._editor._editor,n=t=0<arguments.length?t:i.selectionStart,s=e=1<arguments.length?e:i.selectionEnd,r=t-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){n=r+1;break}n=r}for(r=e-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){s=r+1;break}s=r}if(n==t&&s==e)return n!=t||s!=e;for(r=n;r<=t&&!this._tests[r];r++)n++;for(r=s;r<=e&&!this._tests[r];r++)s++;return i.setSelectionRange(n,s),!0},clearBuffer:function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},writeBuffer:function(t,e){var i;if(t){e&&this.clearBuffer();for(var n=0,s=0,r=this._tests.length;n<r;n++)if(this._tests[n]&&this._tests[n]instanceof RegExp)for(;i=t[s++];)if(this._tests[n].test(i)){this._buffer[n]=i,this._defBuffer[n]=i;break}}return this._buffer&&this._buffer.join("")},getStripValue:function(t,e){e="boolean"==typeof e&&e;var i,n=[],s=[];this.isAllowEmpty();if(""==this._defBuffer.join(""))return null;if(this.isIncludedFormat()&&!e)for(var r=0,o=this._buffer.length;r<o;r++)i=this._buffer[r],!this._tests[r]||this._tests[r].test(i)?n.push(i):i==this.$_getPlaceHolder(r)&&this._tests[r].test(" ")&&n.push(" ");else for(r=0,o=this._buffer.length;r<o;r++)(this._tests[r]&&this._tests[r]instanceof RegExp&&this._tests[r].test(this._buffer[r])||this._tests[r]&&"function"==typeof this._tests[r])&&(0<s.length&&(n=n.concat(s),s=[]),n.push(this._buffer[r]));return n.join("")},setOptions:function(t){"string"==typeof t?this.$_parseMask(t):(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overWrite&&(this._overWrite=!!t.overWrite),null!=t.allowEmpty&&(this._allowEmpty=!!t.allowEmpty),void 0!==t.restrictNull&&(this._restrictNull=!!t.restrictNull),this._restrictNull&&!(t=this._editor._editor).onclick&&(t.onclick=this.clickHandler.bind(this)))},$_setCaret:function(t,e){this._editor._editor.setSelectionRange(t,e)},checkValid:function(t){var e,i,n=[];if(this.isAllowEmpty()){for(e=0,i=this._tests.length;e<i;e++)n[e]=this.$_getPlaceHolder(e);if(n.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var s=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(s)&&s==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},$_parseDefinitions:function(t){for(def in t)"string"==typeof t[def]&&(this._definitions[def]=new RegExp(t[def]))},$_parseMask:function(t){var e=this._tests=[],i=this._definitions,n=t.split("");this._editMask=t,this._buffer=[];for(var s=0,r=n.length;s<r;s++)e.push(i[n[s]]),this._buffer.push(i[n[s]]?this.$_getPlaceHolder(s):n[s])},$_getPlaceHolder:function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:!this._tests[t]&&this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},$_seekPrev:function(t){for(;0<=--t&&!this._tests[t];);return t},$_seekNext:function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},$_shiftL:function(t,e){var i,n,s=this._editMask.length,r=this._buffer;if(0<=t)for(i=t,n=this.$_seekNext(e);i<s;i++)if(this._tests[i]){if(!(n<s&&this._tests[i].test(r[n])))break;r[i]=r[n],this._defBuffer[i]=this._defBuffer[n],r[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}},$_shiftR:function(t){for(var e,i,n=this._editMask.length,s=this._buffer,r=t,o=this.$_getPlaceHolder(t);r<n;r++)if(this._tests[r]){if(e=this.$_seekNext(r),i=s[r],this._defBuffer[r]=o,s[r]=o,!(e<n&&this._tests[e].test(i)))break;o=i}},keydown:function(t){var e=this._editor._editor;if(!e.readOnly){var t=t.which||t.keyCode,i=e.selectionStart,n=e.selectionEnd;if(46===t||8===t)i==n&&(i=46!==t?this.$_seekPrev(i):n=this.$_seekNext(i-1),n=46===t?this.$_seekNext(n):n),this.clearBuffer(i,n),this._overWrite||this.$_shiftL(i,n-1),e.value=this.writeBuffer(),this._editor._isEmptyTextValue=!1,this.$_setCaret(Math.max(0,i),Math.max(0,i));else if(t===p.RIGHT||t===p.END)return this._moveCaret();this._pStart=e.selectionStart}},keyPress:function(t){var e,i,n=this._editor._editor;n.readOnly||(this.isRestrictNull()&&this._moveCaret(),e=n.selectionStart,i=n.selectionEnd,t=t.which||t.keyCode,this.clearBuffer(e,i),e!==i&&this.$_shiftL(e,i-1),i=this.$_seekNext(e-1),this._editMask&&this._editMask.length>i&&this._tests[i]&&this._tests[i].test(t=String.fromCharCode(t))&&(this._overWrite||this.$_shiftR(e),this._buffer[i]=t,this._defBuffer[i]=t,n.value=this.writeBuffer(),this._editor._isEmptyTextValue=!1,i=this.$_seekNext(i),this.$_setCaret(Math.max(0,i),Math.max(0,i))),this._pStart=n.selectionStart)},input:function(t){var e,i=this._editor._editor;i.readOnly||(i.selectionStart,i.selectionEnd,e=i.value,/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(e)&&(i.value=i.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),this._editor._isEmptyTextValue=!1,null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart))}}),dd=e("TextCellEditor",hd,{init:function(t,e){this._super(t,e),this._borderable=!0,this._modified=!1,this._inputValue=void 0,this._keydowned=!1,this._mask=void 0},readOnly:!1,maxLength:0,mask:null,textAlignment:void 0,setMask:function(t){this._mask=null,t&&(this._mask=new ld(this,t))},text:function(){return this._editor.value},setAlignment:function(t){this._container.style.textAlign="left"},setText:function(t){!this._editor||t==this._editor.value&&t==this._controller._getData(this._editIndex)||(this._editor.value=t,this._isEmptyTextValue=!1,this._doChanged())},setTextAlignment:function(t){t!=this._textAlignment&&(this._textAlignment=t,this.$_resetStyle())},initOptions:function(){this._super(),this._editor.readOnly=this._readOnly=!1,this._maxLength=0,this._mask&&(this._mask.destroy(),this._mask=null),this.setTextAlignment(D.NEAR)},setReadOnly:function(t){this._editor.readOnly=this._readOnly=t},containElement:function(t){return this._container.contains(t)},_selectAll:function(){this._editor.select&&this._editor.select()},_doBeginEdit:function(t,e){return this._modified=!1,this.isVisible()&&!this._editor.value&&this._editor.setSelectionRange(0,0),!0},_doEndEdit:function(){this._modified=!1},caretToLast:function(){var t=kt(this._editor.value).length;this._editor.setSelectionRange(t,t)},_doCommit:function(){},setEditIndex:function(t){this._super(t);t&&t.grid();t=t.valueColumn();if(t){switch(this._textCase==ds.DEFAULT?t.textInputCase():this._textCase){case ds.LOWER:this._editor.style.textTransform="lowercase";break;case ds.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=0<this._maxLength?this._maxLength:this._defMaxLength}},setEditValue:function(t){this._super(t),this._editor.value=this.$_valToStr(t),this._isEmptyTextValue=!1},setCellEditValue:function(t,e){this._super(t,e)},getEditValue:function(e,t){e=!(0<arguments.length)||e;var i=this._editField(),n=this._emptyValue;try{var s=i.dataType(),r=this._editor.value;if(s==S.TEXT)r||void 0===this._emptyValue||(r=this._emptyValue),void 0===(n=this.$_strToVal(r))&&(n="");else if(yt(r))if(void 0!==this._emptyValue)n=this.$_strToVal(this._emptyValue);else switch(s){case S.NUMBER:isNaN(this._oldValue)&&(n=NaN);break;case S.DATETIME:null===this._oldValue&&(n=null);break;case S.BOOLEAN:}else n=this.$_strToVal(r);if(n===hd.InvalidFormat)return n;n=i.readValue(n)}catch(t){if(e)throw t;n=this._emptyValue}return n},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(t,e){if(this._super(t,e),t&&this._borderable?(e=this._displayOptions?this._displayOptions._focusActivePen.css():this._editorBorder,this._container.style.border=e,this._container.style["box-shadow"]=this._editorShadow):(this._container.style.border="none",this._container.style["box-shadow"]="none",this._keydowned=!1),nn){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},_createContainer:function(){var t=document.createElement("div");return t.spellcheck=!1,t.style.outline="none",t.style.position="absolute",t.style["z-index"]=2e3,t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.border="none",t.style.width="0px",t.style.height="0px",t.style.padding="0px",t.style.margin="0px",t.style.border=this._editorBorder,t.style.boxShadow=this._editorShadow,t.style.resize="none",t},_createEditor:function(t){this._container=this._createContainer(),t.appendChild(this._container);t=document.createElement("input");return t.autocomplete="off",t.style.position="absolute",t.style.margin="0px",t.style.padding="0px",t.style.fontFamily=od,t.style.fontStyle="normal",t.style.fontVariant="normal",t.style.fontWeight="normal",t.style.fontSize=ad,t.style.lineHeight="normal",t.style.wordWrap="normal",t.style.overflow="hidden",t.style.resize="none",t.style.border="none",t.style.outline="none",t.style.textAlign="left",t.style.color="rgb(68, 84, 106)",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.imeMode="auto",t.style.cursor="text",t.style["-webkit-user-modify"]="read-write-plaintext-only",t.style["white-space"]="pre-wrap",t.style["-webkit-transform"]="translateZ(0)",t.tabIndex=-1,t.onkeydown=this._keyDownHandler.bind(this),t.onkeyup=this._keyUpHandler.bind(this),t.onkeypress=this._keyPressHandler.bind(this),t.onchange=this._changeHandler.bind(this),t.oninput=this._inputHandlerStock=this._inputHandler.bind(this),t.onpaste=this._pasteHandler.bind(this),t.oncopy=this._copyHandler.bind(this),t.oncut=this._cutHandler.bind(this),t.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),t.addEventListener("compositionupdate",this._compositionupdateHandler.bind(this)),t.addEventListener("compositionend",this._compositionendHandler.bind(this)),t.addEventListener("text",this._textHandler.bind(this)),this._container.appendChild(t),this._defMaxLength=0<t.maxLength?t.maxLength:1e6,t},_focusHandler:function(){},_keyDownHandler:function(t){var e,i=this._editor,n=t.keyCode;if((sn||rn)&&!this.isVisible()&&t.ctrlKey&&n==p.Z)return!1;if(sn&&t.ctrlKey&&t.keyCode==p.V&&i.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(sn&&t.ctrlKey&&""===this._editor.value&&!this.isEditing()&&(t.keyCode===p.C||t.keyCode===p.INSERT||t.keyCode===p.X))return t.preventDefault(),t.keyCode===p.X?(this._editor.value="cut",this._editor.setSelectionRange(0,4),document.execCommand("cut",!0,null),this._editor.value=""):document.execCommand("copy"),!1;switch(this._inputValue=i.value,this._keydowned=!0,n){case p.BACK:case p.DELETE:this._sendToParent(t)||(!this.isVisible()&&this._requestStart()?!this._editor.readOnly&&this._controller._getData(this._editIndex)&&(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.setText("")):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),n===p.BACK&&this._editor.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case p.TAB:return!this._sendToParent(t);case p.LEFT:if(!this.isVisible()||0==i.selectionEnd&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(this._editor.readOnly&&tn)return!this._sendToParent(t);break;case p.RIGHT:if(!this.isVisible()||i.selectionEnd==i.value.length&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(this._editor.readOnly&&tn)return!this._sendToParent(t);t.altKey||t.ctrlKey||t.shiftKey||!this._mask||!this._mask.isRestrictNull()||(e=this._editor.selectionStart,this._mask._moveCaret(e+1,e+1)&&(t.preventDefault(),t.stopImmediatePropagation()));break;case p.HOME:if(!this.isVisible())return!this._sendToParent(t);t.stopImmediatePropagation();break;case p.END:if(!this.isVisible())return!this._sendToParent(t);this._mask&&this._mask.isRestrictNull()&&(e=this._editor.value?this._editor.value.length-1:0,this._mask._moveCaret(e,e))&&(t.preventDefault(),t.stopImmediatePropagation()),t.stopImmediatePropagation();break;case p.SPACE:if(this.isVisible())break;return!this._sendToParent(t);case p.UP:case p.DOWN:case p.PAGEUP:case p.PAGEDOWN:case p.ENTER:case p.ESCAPE:case p.F2:case p.INSERT:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return Qi&&!t.ctrlKey&&!t.altKey&&(0==n||32<=n)&&(n<112||130<n)&&this._requestStart(),!0},_keyUpHandler:function(t){var e=t.keyCode;switch(e!=p.BACK&&e!=p.DELETE||an&&this.isVisible()&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case p.LEFT:case p.RIGHT:case p.HOME:case p.END:case p.SPACE:this.isVisible()||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}},_keyPressHandler:function(t){var e=t.which||t.keyCode;this._sendToParent(t,2),Qi?t.ctrlKey||t.altKey||!(0==e||32<=e)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):en&&t.metaKey&&(e===p.c||e===p.v||e===p.z||e===p.y)?e!==p.z&&e!==p.y||t.preventDefault():32<=e&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(t){this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0)},_compositionupdateHandler:function(t){this._composing=!0},_compositionendHandler:function(t){this._composing=!1},_changeHandler:function(t){},_inputHandler:function(t){if(sn){if(this._isEmptyTextValue&&!this._keydowned)return;if((null==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}this._mask&&this._mask.input(t),this._doChanged()},_pasteHandler:function(t){var e,i,n=!((n=t)instanceof KeyboardEvent)&&(n=(n.originalEvent||n).clipboardData)?n.getData("text/plain"):window.clipboardData.getData("text"),s=new vu(n),r=this._mask,o=this._grid,o=o&&o._pasteOptions;if(this.isVisible())r&&(t.preventDefault(),n=s.get(0)[0],s=this._editor.value,e=this._editor.selectionStart,i=this._editor.selectionEnd,s=s.substr(0,e)+n+s.substr(i),this._editor.value=r.writeBuffer(s,!0)),this._doChanged();else{t.preventDefault();try{null!=n&&this._grid.pasteFromClipboard(n,t)}catch(t){if(t instanceof Zr){if(!o||o.isThrowValidationError())throw t}else if(t instanceof Zt)alert(t.message);else if(t)throw t}}},$_copyProc:function(t,e){return null!=e&&(W.clipboardData?W.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()},_copyHandler:function(t){var e;this.isEditing()||(e=this._grid.copyToClipboard(t),this.$_copyProc(t,e))},_cutHandler:function(t){var e;this.isEditing()||(e=this._grid.cutToClipboard(t),this.$_copyProc(t,e))},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange())},setBounds:function(t,e,i,n){E.setBounds(this._container,t,e,i,n)},$_resetStyle:function(){var t="left";switch(this._textAlignment){case D.FAR:t="right";break;case D.CENTER:t="center"}this._editor.style["text-align"]=t}}),ud=e("LineCellEditor",dd,{init:function(t,e){this._super(t,e)},inputCharacters:void 0,ignoreCharacters:void 0,_pStart:null,_createEditor:function(t){t=this._super(t);return t.tabIndex=_e()?-1:0,t},initOptions:function(){this._super(),this._inputCharacters=this._ignoreCharacters=void 0},_keyDownHandler:function(t){this._pStart=this._editor.selectionStart,this._super(t)},_inputHandler:function(t){this.$_resetValue(),this._super(t)},$_resetValue:function(){var t,e,i=this._editor,n=i.value;this.isVisible()&&((t=this.inputCharacters())&&(e=new RegExp("[^"+t+"]","g")).test(n)&&(i.value=i.value.replace(e,""),null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart),(t=this.ignoreCharacters())&&(e=new RegExp("["+t+"]","g")).test(n)&&(i.value=i.value.replace(e,""),null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart),this._pStart=null)}}),cd=e("PasswordCellEditor",dd,{init:function(t,e){this._super(t,e)},_createEditor:function(t){t=this._super(t);return t.setAttribute("type","password"),t.tabIndex=_e()?-1:0,t}}),_d=e("MultiLineCellEditor",hd,{init:function(t,e){this._super(t,e),this._modified=!1},readOnly:!1,maxLength:0,minHeight:0,altEnterNewLine:!1,text:function(){return this._editor.value},setAlignment:function(t){this._container.style.textAlign="left"},initOptions:function(){this._super(),this._editor.readOnly=this._readOnly=!1,this._maxLength=0,this._minHeight=0},setReadOnly:function(t){this._editor.readOnly=this._readOnly=t},containElement:function(t){return this._container.contains(t)},_selectAll:function(){this._editor.select()},_doBeginEdit:function(t,e){return this._modified=!1,this.isVisible()&&!this._editor.value&&this._editor.setSelectionRange(0,0),!0},_doEndEdit:function(){this._modified=!1},_doCommit:function(){},setEditIndex:function(t){this._super(t);t&&t.grid();switch(this._textCase==ds.DEFAULT?t.dataColumn().textInputCase:this._textCase){case ds.LOWER:this._editor.style.textTransform="lowercase";break;case ds.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=0<this._maxLength?this._maxLength:2e9},setEditValue:function(t){this._super(t),this._editor.value=this.$_valToStr(t),this._isEmptyTextValue=!1},setCellEditValue:function(t){this._super(t)},getEditValue:function(e,t){e=!(0<arguments.length)||e;var i=this._editField(),n=i.nullValue;try{var s=i.dataType(),r=this._editor.value;if(s==S.TEXT)r||void 0===this._emptyValue||(r=this._emptyValue),void 0===(n=this.$_strToVal(r))&&(n="");else if(yt(r))if(void 0!==this._emptyValue)n=this.$_strToVal(this._emptyValue);else switch(s){case S.NUMBER:isNaN(this._oldValue)&&(n=NaN);break;case S.DATETIME:null===this._oldValue&&(n=null);break;case S.BOOLEAN:}else n=this.$_strToVal(r);n=i.readValue(n)}catch(t){if(e)throw t}return n},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(t,e){if(this._super(t,e),t?(e=this._displayOptions?this._displayOptions._focusActivePen.css():this._editorBorder,this._container.style.border=e,this._container.style["box-shadow"]=this._editorShadow):(this._container.style.border="none",this._container.style["box-shadow"]="none",this._keydowned=!1),nn){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},_createContainer:function(){var t=document.createElement("div");return t.spellcheck=!1,t.style.position="absolute",t.style["z-index"]=2e3,t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.border="none",t.style.width="0px",t.style.height="0px",t.style.padding="0px",t.style.margin="0px",t.style.backgroundColor="#fff",t.style.border="none",t.style.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",t.style.resize="none",t},_createEditor:function(t){this._container=this._createContainer(),t.appendChild(this._container);t=document.createElement("textarea");return t.autocomplete="off",t.style.position="absolute",t.style.margin="0px",t.style.padding="0px",t.style.fontFamily=od,t.style.fontStyle="normal",t.style.fontVariant="normal",t.style.fontWeight="normal",t.style.fontSize=ad,t.style.lineHeight="normal",t.style.wordWrap="normal",t.style.overflow="hidden",t.style.resize="none",t.style.border="none",t.style.outline="none",t.style.textAlign="left",t.style.color="rgb(68, 84, 106)",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.imeMode="auto",t.style.cursor="text",t.style["-webkit-user-modify"]="read-write-plaintext-only",t.style["white-space"]="pre",t.style["-webkit-transform"]="translateZ(0)",t.tabIndex=-1,t.onkeydown=this._keyDownHandler.bind(this),t.onkeyup=this._keyUpHandler.bind(this),t.onkeypress=this._keyPressHandler.bind(this),t.oninput=this._inputHandler.bind(this),t.onpaste=this._pasteHandler.bind(this),t.oncopy=this._copyHandler.bind(this),t.oncut=this._cutHandler.bind(this),t.addEventListener&&(t.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),t.addEventListener("compositionupdate",this._compositionupdateHandler.bind(this)),t.addEventListener("compositionend",this._compositionendHandler.bind(this)),t.addEventListener("text",this._textHandler.bind(this))),this._container.appendChild(t),t},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(){ft("########## COMPOSITION START: "),this._composing=!0,this._requestStart()},_compositionendHandler:function(){this._composing=!1},_compositionupdateHandler:function(){this._composing=!0},_keyDownHandler:function(t){ft("########## EDITOR KEYDOWN: "+t.keyCode);var e,i,n=this._editor,s=t.keyCode;if((sn||rn)&&!this.isVisible()&&t.ctrlKey&&s==p.Z)return!1;if(sn&&t.ctrlKey&&(t.keyCode===p.C||t.keyCode===p.INSERT)&&""===this._editor.value&&!this.isEditing())return t.preventDefault(),document.execCommand("copy"),!1;switch(this._keydowned=!0,s){case p.BACK:case p.DELETE:this._sendToParent(t)||!this.isVisible()&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly)&&this._controller._getData(this._editIndex)&&(this._editor.value="",this._isEmptyTextValue=!1,this._modified=!0,this._dispatchChange());break;case p.TAB:return!this._sendToParent(t);case p.LEFT:if(!this.isVisible()||0==n.selectionEnd&&n.selectionEnd==n.selectionStart)return!this._sendToParent(t);break;case p.RIGHT:if(!this.isVisible()||n.selectionEnd==n.value.length&&n.selectionEnd==n.selectionStart)return!this._sendToParent(t);break;case p.HOME:case p.END:if(!this.isVisible())return!this._sendToParent(t);t.stopImmediatePropagation();break;case p.UP:case p.PAGEUP:if(!this.isVisible())return!this._sendToParent(t);t.stopImmediatePropagation();break;case p.DOWN:case p.PAGEDOWN:if(!this.isVisible())return!this._sendToParent(t);t.stopImmediatePropagation();break;case p.SPACE:if(this.isVisible())break;return!this._sendToParent(t);case p.ENTER:if(this.isAltEnterNewLine()){if(!(t.altKey&&this.isEditing()||t.shiftKey))return!this._sendToParent(t)}else if(!(t.ctrlKey&&this.isEditing()||t.shiftKey))return!this._sendToParent(t);(this.isAltEnterNewLine()&&t.altKey||!this.isAltEnterNewLine()&&t.ctrlKey)&&!t.shiftKey&&(t.preventDefault(),t.stopImmediatePropagation(),i=n.value)&&(e=n.selectionEnd,i=i.substring(0,e)+"\r\n"+i.substring(e),n.value=i,this._isEmptyTextValue=!1,n.setSelectionRange(e+1,e+1),this._doChanged());break;case p.ESCAPE:case p.F2:case p.INSERT:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0},_keyUpHandler:function(t){var e=t.keyCode;switch(e!=p.BACK&&e!=p.DELETE||an&&this.isVisible()&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case p.LEFT:case p.RIGHT:case p.HOME:case p.END:case p.SPACE:this.isVisible()||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}},_keyPressHandler:function(t){zt(t)||32<=t.keyCode&&(this._requestStart()||t.preventDefault())},_inputHandler:function(t){this._doChanged()},_pasteHandler:function(t){if(this.isVisible())this._doChanged();else{t.preventDefault();try{var e=(t.originalEvent||t).clipboardData,i=this._grid&&this._grid._pasteOptions,n=e?e.getData("text/plain"):window.clipboardData.getData("text");null!=n&&this._grid.pasteFromClipboard(n,t)}catch(t){if(t instanceof Zr){if(!i||i.isThrowValidationError())throw t}else if(t instanceof Zt)alert(t.message);else if(t)throw t}}},$_copyProc:function(t,e){return null!=e&&(W.clipboardData?W.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()},_copyHandler:function(t){var e;this.isEditing()||(e=this._grid.copyToClipboard(t),this.$_copyProc(t,e))},_cutHandler:function(t){var e;this.isEditing()||(e=this._grid.cutToClipboard(t),this.$_copyProc(t,e))},setBounds:function(t,e,i,n){E.setBounds(this._container,t,e,i,n),t>Pu.x&&this.$_resetBounds()},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange(),this.$_resetBounds())},$_resetBounds:function(){var t=E.getBounds(this._container),e=t.cx,i=t.cy,n=t.width,s=Math.round(t.height),r=this._isEmptyTextValue,r=(!r&&this._editor.scrollWidth>n&&(n=this._editor.scrollWidth+6),!r&&this._editor.scrollHeight>s&&(s=this._editor.scrollHeight+6),isNaN(parseInt(this._minHeight))?0:parseInt(this._minHeight));0<r&&(s=Math.max(s,r)),t=E.getBounds(this._parentElement),n=Math.min(t.width,n),s=Math.min(t.height,s),e+n>t.width&&(e=t.width-n),i+s>t.height&&(i=t.height-s),E.setBounds(this._container,Math.max(e,0),Math.max(i,0),n,s)}}),fd=t({BUTTON:"button",EDITOR:"editor"}),md=t({NONE:"none",ASCENDING:"ascending",DESCENDING:"descending"}),gd=e("DropDownCellEditor",dd,{init:function(t,e){this._super(t,e),this._list=new pd(t._container,this._options&&(this._options._useCssStyle||this._options._useCssStyleDropDownList)),this._list.addListener(this),this._items=null,this._values=[],this._labeling=!1,this._lookup=!1,this._domain=null,this._closing=!1,this._value=void 0,this._selectedIndex=-1,this._borderable=!1,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this)},destroy:function(){return this._destroying=!0,this._list&&!this._list._destroying&&this._list.destroy&&this._list.destroy()&&(this._list=null),this._globalMouseHandler=null,this._items=null,this._values=null,this._labels=null,this._value=null,this._super()},values:null,items:null,labels:null,displayLabels:null,domainOnly:!1,textReadOnly:!1,dropDownWidth:-1,dropDownPosition:fd.BUTTON,dropDownCount:8,itemSortStyle:md.NONE,caseSensitive:!1,partialMatch:!1,commitOnSelect:!0,dropDownWhenClick:!1,trimLabelText:!0,separator:null,itemColumned:!1,setMask:function(t){this._mask=null},setValues:function(t){this._values=t?t.slice():[]},setItems:function(t){this.setValues(t)},items_:function(){return this._value},setLabels:function(t){this._labels=t?t.slice():[]},isListing:function(){return this._list.isListing()},containElement:function(t){var e=this._super(t);return e=!e&&this.isListing()?this._list._element.contains(t):e},dropDown:function(t){if(!this.isReadOnly()&&!this.isListing()&&!this._closing&&(this._refreshItems(),t||this._items&&0<this._items.length))return this._list.setViewGridInside(this._options&&this._options._viewGridInside),this._list.setDisplayLabels(this.displayLabels()),this._list.setSeparator(this.separator()),this._list.setItemColumned(this.isItemColumned()),this._list.setItems(this._items),t=E.getBounds(this._container),this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,this._list.setCaseSensitive(this._caseSensitive),this._list.setPartialMatch(this._partialMatch),this._list.setDropDownCount(this._dropDownCount),this._list.setDropDownWidth(this._dropDownWidth),this._list.setDropDownPosition(this._dropDownPosition),this._list.setSortStyle(this._itemSortStyle),this._list.setValueIndex(this._selectedIndex),this._list.setTrimLabelText(this._trimLabelText),this._list.setListZIndex(this.getListZIndex()),this._list.show(z.documentElement,t.cx-1,t.cy+t.height,this._cellBounds.width,E.getBounds(this._editor)),this._selectedIndex<0&&this._list.$_search(this._editor.value,!0),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler),!0;return!1},closeUp:function(t){if(this.isListing()){this._closing=!0;try{var e;it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler),this.setFocus(),this._list.hide(),t&&this._list.isSelected()&&0<=(e=this._list.itemIndex())&&this._items&&this._items.length>e?(this._selectedIndex=this._list.valueIndex(),this._editor.value=this._labeling?this._items[e].label:this._items[e].value,this._selectedIndex==this._saveIndex&&this._editor.value==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit()):this._selectedIndex=-1}finally{this._closing=!1}return!0}return!1},hasButton:function(){return!0},initOptions:function(){this._super(),this._values=[],this._labels=[],this._displayLabels=Ys.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=fd.BUTTON,this._dropDownCount=8,this._itemSortStyle=md.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기"},setEditIndex:function(t){this._super(t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},setEditValue_2:function(t){this._super(t),this._value=t,this._editor.value=this.$_valToStr(t)},setEditValue:function(t){var e,i,n,s=-1;if(this._value=t,this._lookup){var r=this._domain;r?n=0<=(e=s=r.keys?r.keys.indexOf(t):-1)&&r.values&&r.values.length>e?r.values[e]:t:s=this._editIndex.dataColumn().getLookupIndex(t),this._labeling?(n=r?0<=s&&r.values&&r.values.length>s?r.values[s]:t:0<=s?this._editIndex.dataColumn().getLookupLabel(t):t,this._super(n)):this._super(t)}else if(this._values){for(e=0,i=this._values.length;e<i;e++)if(t==this._values[e]){s=e;break}this._labeling&&this._labels&&(s<0||this._labels.length>s)?(n=0<=s?this._labels[e]:t,this._super(n)):this._super(t)}else this._super(t);this._selectedIndex=s},isEdited:function(){var t=this._super();return t=t&&this.isDomainOnly()?void 0!==this.$_getEditValue(!1):t},setCellEditValue:function(t,e){this._super(t,e)},getEditValue:function(t,e){return!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},_createContainer:function(){var t=this._super();return t.style.border="none",t.style.boxShadow="none",t},setBounds:function(t,e,i,n){this._super(t+=2,e+=2,i-=4,n-=4)},_createEditor:function(t){return this._super(t)},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(t){this._super(t)},_keyDownHandler:function(t){var e=this._list;switch(t.keyCode){case p.BACK:case p.DELETE:if(!t.ctrlKey&&this.isTextReadOnly())return this._requestStart(),t.preventDefault(),!0;break;case p.SPACE:if(this.isListing()&&e.currentIsMore())return e.addMoreItems(),t.preventDefault(),!0;break;case p.ENTER:if(this.isListing()&&e.currentIsMore())return e.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0))return!this._sendToParent(t);break;case p.ESCAPE:if(this.closeUp(!1))return t.preventDefault(),!0;break;case p.DOWN:if(t.altKey&&!this.isListing())return this._requestStart(),t.preventDefault(),!0;if(this.isListing())return this._list.setItemIndex(Math.min(e.itemCount()-1,e.itemIndex()+1)),t.preventDefault(),!0;break;case p.PAGEDOWN:if(this.isListing())return this._list.setItemIndex(Math.min(e.itemCount()-1,e.itemIndex()+e.dropDownCount())),t.preventDefault(),!0;break;case p.UP:if(t.altKey&&this.isListing())return this.closeUp(!1),t.preventDefault(),!0;if(this.isListing())return this._list.setItemIndex(Math.max(0,e.itemIndex()-1)),t.preventDefault(),!0;break;case p.PAGEUP:if(this.isListing())return this._list.setItemIndex(Math.max(0,e.itemIndex()-e.dropDownCount())),t.preventDefault(),!0}return this._super(t)},_keyPressHandler:function(t){this._super(t),zt(t)||t.keyCode&&this.isTextReadOnly&&this.isTextReadOnly()&&t.preventDefault()},_inputHandler:function(t){return this.isTextReadOnly&&this.isTextReadOnly()&&(t.target.value=this._oldValue||""),this._super(t)},_pasteHandler:function(t){return this._super(t)},_copyHandler:function(t){return this._super(t)},_requestStart:function(t){return!!this._super()&&(!1!==t&&this.dropDown(),!0)},_doChanged:function(){this._super(),this.isListing()&&(this._list.$_search(this._editor.value),this._selectedIndex=-1)},dropDownList:function(t){this.dropDown(t)},closeList:function(t){this.closeUp(t)},buttonClicked:function(t){this.isListing()?this.closeUp(!1):this.dropDown()},$_setItems:function(t,e){this._items=[];for(var i=0,n=t.length;i<n;i++)this._items.push({value:t[i],label:(e&&e.length>i?e:t)[i]})},_refreshItems:function(t,e){var i=this.editIndex(),n=i.item();if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels),this._labeling=!1!==this.displayLabels()&&this.displayLabels()!==Ys.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn()&&i.item()&&(0<=i.dataRow()||H.isEditing(n.itemState()))){e=i.dataColumn();if(e.lookupSource()){for(var s=e.lookupKeyFieldIds(),r=[],o=0;o<s.length-1;o++)r.push(n.getData(s[o]));var i=e.lookupSource().getTextDomain(r);i&&i.values&&0<i.values.length&&(this.$_setItems(i.keys,i.values),this._labeling=!0,this._lookup=!0,this._domain=i)}else e.lookupValues()&&0<e.lookupValues().length&&(this.$_setItems(e.lookupValues(),e.lookupLabels()),this._labeling=!1!==this.displayLabels()&&this.displayLabels()!==Ys.VALUE&&e.lookupLabels()&&e.lookupLabels().length>=e.lookupValues().length,this._lookup=!0)}t&&this.isListing()&&(this._list.setItems(this._items),i=E.getBounds(this._container),this._list.$_resetItems(i.cx-1,i.cy+i.height,this._cellBounds.width,E.getBounds(this._editor)))},$_getEditValue:function(t,e){var i,n=this.text(),t=dd.prototype.getEditValue.call(this,t,e),e=t,s=this._editIndex.dataColumn(),r=this._selectedIndex,o=0<=r;if(this._lookup){if(this._domain){if(this._labeling&&(e=0<=(i=o?r:this._domain.values?this._domain.values.indexOf(n):-1)&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:e),this.isDomainOnly()&&(!this._domain.keys||this._domain.keys.indexOf(e)<0))return hd.Unselected}else if(this._labeling&&void 0===(e=o?s.getLookupValue(r):s.getSourceValue(n))&&(e=t),this.isDomainOnly()&&(!s.lookupValues()||s.lookupValues().indexOf(e)<0))return hd.Unselected}else if(this._labeling&&0<=(i=o?r:this._labels?this._labels.indexOf(n):-1)&&i<this._values.length&&(e=this._values[i]),this.isDomainOnly()&&(!this._values||this._values.indexOf(e)<0))return hd.Unselected;return e},onDropDownListCloseUp:function(t,e){this.closeUp(e),_e()||this.setFocus()},onDropDownListEditorFocus:function(){this.setFocus()}}),pd=e("DropDownList",le,{init:function(t,e){this._super(),this._useCssStyle=e,this._container=t,this._containerElement=null,this._dom=new E(this._element=this.$_createList()),this._element.tabIndex=-1,this._selected=!1,this._initCount=0,this._mouseoverHandler=function(t){t=this._currDiv=t.currentTarget;E.getChildIndex(t)!=this._itemIndex&&(t.style.background="rgba(0, 255, 0, 0.2)")}.bind(this),this._mouseoutHandler=function(t){t=this._currDiv=t.currentTarget;E.getChildIndex(t)!=this._itemIndex&&(t.style.background="")}.bind(this),this._clickHandler=function(t){t=t.currentTarget,t=E.getChildIndex(t);0<=t&&(this._itemIndex=t,this._selected=!0,this.fireEvent(pd.CLOSE_UP,!0))}.bind(this),this._nextClickHandler=function(t){t=t.currentTarget;this.$_addMoreItems(t)}.bind(this)},destroy:function(){return this._destroying=!0,this._container=null,this._containerElement=null,this._items=null,this._dom=null,E.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,this._super()},minWidth:0,maxWidth:0,dropDownCount:8,caseSensitive:!1,partialMatch:!1,sortStyle:md.NONE,items:null,itemIndex:-1,dropDownPosition:fd.BUTTON,dropDownWidth:-1,displayLabels:null,separator:null,itemColumned:!1,viewGridInside:!1,trimLabelText:!0,initCount:0,moreItemCount:25,moreText:null,listZIndex:3e3,isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},setItems:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})},setItemIndex:function(t,e,i){t=Math.max(-1,t);var n=this._element.childNodes;t<this._items.length&&(e||t!=this._itemIndex||t>=n.length-1)&&(i&&t>=n.length-1&&(e=n[n.length-1]).isMoreButton&&(i=t-(n.length-1),i=(Math.floor(i/this.moreItemCount())+1)*this.moreItemCount(),this.$_addMoreItems(e,i)),this._itemIndex=t,this.isListing()&&this.$_refreshItems(),this._selected=0<=t)},itemCount:function(){return 0==this.initCount()?this._items&&this._items.length:this._element.children.length},valueIndex:function(){var t=this._items,e=this._itemIndex;return t&&0<=e&&e<t.length?t[e].index:-1},setValueIndex:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,0<=t)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.isListing()&&this.$_refreshItems(),this._selected=!0},isSelected:function(){return this._selected},show:function(t,e,i,n,s){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=md.NONE&&this.$_sortItems(),this.$_show(e,i,n,s)},hide:function(){this._dom.detach(),this._containerElement=null},$_createList:function(){var t=document.createElement("div");return this._useCssStyle&&(t.className="rg-dropdownlist"),t.onkeydown=function(t){27==t.keyCode&&this.fireEvent(pd.CLOSE_UP,!1)}.bind(this),t},$_sortItems:function(){this._sortStyle==md.ASCENDING?this._items.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}):this._items.sort(function(t,e){return t.label>e.label?-1:t.label<e.label?1:0})},$_show:function(t,e,i,n){var s=this._element;s&&(s=this._dom.element(),this._dom.setStyles({position:"absolute",float:"none",clear:"both",boxSizing:"border-box",minWidth:"20px",minHeight:"10px",overflow:"auto",zIndex:this._listZIndex}),this._useCssStyle||this._dom.setStyles({background:"#fff",border:"1px solid rgb(50, 50, 50)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"0px",margin:"0px"}),this._dom.clearChildren(),this._dom.disableSelection(),this._containerElement.appendChild(s),this._cellWidth=i,this._editBounds=n,s.style.width=s.style.height="10px",this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(i),this.$_resetPosition(t,e,i,n),this._selected=!1)},$_resetHeight:function(){var t=this._dom.element(),e=t.children;0<this._dropDownCount&&e.length>this._dropDownCount?(e=E.getBounds(e[this._dropDownCount]),t.style.height=Math.max(10,e.cy)+"px"):t.style.removeProperty("height")},$_resetWidth:function(t){var e=this._dom.element(),i=(E.getBounds(e),this._dropDownWidth),n=this._dropDownWidth,s=e.offsetWidth?e.offsetWidth+(an&&"border-box"===e.style.boxSizing?17:0):0,r=(n<0?n=t:0==n&&(n=10),e.style.width=n+"px",0);if(0<e.childElementCount){for(var o=e.children,t=window.getComputedStyle(o[0]),a=parseInt(t.marginLeft.replace("px","")),a=isNaN(a)?0:a,t=parseInt(t.marginRight.replace("px","")),t=isNaN(t)?0:t,h=0;h<o.length;h++)r=Math.max(r,o[h].scrollWidth);r+=e.offsetWidth-e.clientWidth+a+t+2}i<0&&(r=Math.max(r,n)),a=fn(),n=r=Math.min(r,a.width),an&&(0<=i||n<r)&&(n+=20),n<a.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(n,s)+"px"},$_resetPosition:function(t,e,i,n){var s=fn(),r=E.getBounds(this._containerElement),o=E.getBounds(this._container._container),a=s.width,s=s.height,h=this._dom.getBounds(),l=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(s-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=o.left-r.left,e+=o.top-r.top,(dn||an||hn)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+h.height>s+d&&(e=e-n.height-h.height)<0&&(e=s-h.height-2),this._dropDownPosition!=fd.EDITOR?t=Math.max(0,t+i-h.width):t+h.width>a+l&&(t=a-h.width),this._viewGridInside&&(e=n.bottom-r.top+2,r.bottom<n.bottom+h.height||s+d<n.bottom+h.height)&&(e=n.top-h.height-r.top-2),this._dom.move(Math.max(0,t),Math.max(0,e))},$_resetItems:function(t,e,i,n){this._dom.clearChildren(),this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(i),this.$_resetPosition(t,e,i,n)},$_buildItems:function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:0;var i,n,s=0,r=this._container._defContext._graphics,o=(addValue=function(t,e){var e=e&&e.value?e.value.toString():"",i=E.createElement("span");return i.style.whiteSpace="pre",i.innerHTML=e?E.htmlEncode(e):"&nbsp;",i.tabIndex=-1,E.disableSelection(i),t.appendChild(i),i}.bind(this),addLabel=function(t,e,i){var e=e&&e.label?e.label.toString():"",e=this._trimLabelText?e.trim():e,n=E.createElement("span");return this._trimLabelText||(n.style.whiteSpace="pre"),n.innerHTML=e?E.htmlEncode(e):"&nbsp;",n.tabIndex=-1,E.disableSelection(n),t.appendChild(n),n}.bind(this),addSeparator=function(t,e){var i=E.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?E.htmlEncode(e):"&nbsp;",i.tabIndex=-1,E.disableSelection(i),t.appendChild(i)}.bind(this),calcWidth=function(t){var e;return i||(e=window.getComputedStyle(t),i={font:e.fontSize+" "+e.fontFamily,size:parseInt(e.fontSize)}),Math.max(s,r.getTextWidth(i,t.innerText))}.bind(this),this._items),a=e||(0<this._element.children.length?this.moreItemCount():this.initCount());if(o&&!(o.length<1)){for(var h=t,l=o.length;h<l;h++){if(this._initCount&&a<=h-t&&h<l){var d=E.createElement("div",{position:"relative",float:"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"2px",paddingRight:"2px",whiteSpace:"nowrap",cursor:"pointer",textAlign:"center"});E.disableSelection(d),d.nextIndex=h,d.onmouseover=this._useCssStyle?null:this._mouseoverHandler,d.onmouseout=this._useCssStyle?null:this._mouseoutHandler,d.onclick=this._nextClickHandler,d.isMoreButton=!0,d.className="rg-dropdown-more",addLabel(d,{label:this.moreText()}),this._element.appendChild(d);break}var u=o[h],d=E.createElement("div",{position:"relative",float:"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"2px",paddingRight:"2px",whiteSpace:"nowrap",cursor:"default"});switch(this._useCssStyle||(d.style.background=h==this._itemIndex?"#333":""),this._useCssStyle||(d.style.color=h==this._itemIndex?"#fff":""),this._useCssStyle&&(d.className=h==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item"),E.disableSelection(d),this._element.appendChild(d),d.onmouseover=this._useCssStyle?null:this._mouseoverHandler,d.onmouseout=this._useCssStyle?null:this._mouseoutHandler,d.onclick=this._clickHandler,n=null,this.displayLabels()){case!0:case Ys.LABEL:addLabel(d,u);break;case!1:case Ys.VALUE:addValue(d,u);break;case Ys.LABEL_VALUE:n=addLabel(d,u,!0),addSeparator(d,this._separator),addValue(d,u);break;case Ys.VALUE_LABEL:n=addValue(d,u,!0),addSeparator(d,this._separator),addLabel(d,u)}n&&this._itemColumned&&(s=Math.max(s,calcWidth(n)))}if(this._itemColumned&&s)for(h=0,l=this._element.childNodes.length;h<l;h++)(n=this._element.childNodes[h].firstChild).style.display="inline-block",n.style.width=s+"px"}},currentIsMore:function(t){t=this._element.childNodes[null!=t?t:this._itemIndex];return t&&t.isMoreButton},$_addMoreItems:function(t,e){var i=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this.$_buildItems(i,e),this.$_resetWidth(this._cellWidth),this.fireEvent(pd.EDITOR_FOCUS)},addMoreItems:function(){var t;this.currentIsMore()&&(t=this._element.childNodes[this._itemIndex],this.$_addMoreItems(t))},$_refreshItems:function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)i=t[e],this._useCssStyle?i.className=e==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item":(i.style.background=e==this._itemIndex?"#333":"",i.style.color=e==this._itemIndex?"#fff":"");var i,n=this._itemIndex;0<=n&&n<t.length&&((i=t[n]).offsetTop<this._element.scrollTop?this._element.scrollTop=i.offsetTop:(n=i.offsetTop+E.getSize(i).height)>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight))},hangulToChosungAll:function(t){var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],n="";for(i=0;i<t.length;i++){var s=t.charCodeAt(i)-44032;n+=-1<s&&s<11172?e[Math.floor(s/588)]:t[i]}return n},hangulToChosung:function(t){var e,i,n={};return/[ㄱ-힝]/.test(t)?(e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i=t.charCodeAt(0)-44032,n.cho=e[((i-(e=i%28))/28-(i=(i-e)/28%21))/21]||t,["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"][i]&&(n.org=t)):(n.cho=t,n.org=t),n},$_search:function(t,e){try{if(this._items&&0<this._items.length&&t){for(var i,n,s=this._items,r=s.length,o=this._caseSensitive?t:t.toLowerCase(),a=[],h=0;h<r;h++){if(i=s[h].label.toString())if(i=this._caseSensitive?i:i.toLowerCase(),this._partialMatch){for(var l="",d=0;d<i.length;d++)c=this.hangulToChosung(i[d]),l+=this.hangulToChosung(o[d]).org?c.org:c.cho;if(l==o)return void this.setItemIndex(h,e,!0)}else if(i==o)return void this.setItemIndex(h,e,!0);a.push(i)}for(h=0;h<r;h++)if(i=a[h],this._partialMatch){for(var u=!1,d=0;d<o.length;d++){if(!((n=this.hangulToChosung(i[d])).org&&n.org==o[d]||n.cho&&n.cho==o[d])){u=!1;break}u=!0}if(u)return void this.setItemIndex(h,e,!0)}else if(i&&0==i.indexOf(o))return void this.setItemIndex(h,e,!0);for(h=0;h<r;h++)if(i=a[h],this._partialMatch){var c,_=this.hangulToChosungAll(i),f=this.hangulToChosungAll(o),m=_.indexOf(f);if(l=i.substr(0,m),~m)for(var d=0,g=m,p=o.length;d<p;d++,g++)c=this.hangulToChosung(i[g]),l+=this.hangulToChosung(o[d]).org?c.org:c.cho;if(l&&0<l.indexOf(o))return void this.setItemIndex(h,e,!0)}else if(i&&0<i.indexOf(o))return void this.setItemIndex(h,e,!0)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}}}),wd=(pd.CLOSE_UP="onDropDownListCloseUp",pd.EDITOR_FOCUS="onDropDownListEditorFocus",e("MultiCheckCellEditor",gd,{init:function(t,e){dd.prototype.init.apply(this,[t,e]),this._list=new vd(t._container,this._options&&(this._options._useCssStyle||this._options._useCssStyleMultiCheck)),this._list.addListener(this),this._items=null,this._values=[],this._labeling=!1,this._lookup=!1,this._domain=null,this._closing=!1,this._value=void 0,this._selectedIndices=[],this._saveIndices=[],this._borderable=!1,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this)},destroy:function(){return this._destroying=!0,this._globalMouseHandler=null,this._saveText=null,this._super()},showButtons:!0,acceptText:window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"accept",cancelText:window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"cancel",allCheckText:window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"all",showAllCheck:!1,setMask:function(t){this._mask=null},dropDown:function(t){if(!this.isReadOnly()&&!this.isListing()&&!this._closing&&(this._refreshItems(),t||this._items&&0<this._items.length))return this._list.setViewGridInside(this._options&&this._options._viewGridInside),this._list.setDisplayLabels(this.displayLabels()),this._list.setSeparator(this.separator()),this._list.setItemColumned(this.isItemColumned()),this._list.setItems(this._items),t=E.getBounds(this._container),this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,this._list.setCaseSensitive(this._caseSensitive),this._list.setDropDownCount(this._dropDownCount),this._list.setDropDownWidth(this._dropDownWidth),this._list.setDropDownPosition(this._dropDownPosition),this._list.setButtonOptions(this._acceptText,this._cancelText,this._showButtons,this._showAllCheck,this._allCheckText),this._list.setSortStyle(this._itemSortStyle),this._list.setValueIndices(this._selectedIndices),this._list.setTrimLabelText(this._trimLabelText),this._list.setListZIndex(this.getListZIndex()),this._list.show(z.documentElement,t.cx-1,t.cy+t.height,this._cellBounds.width,E.getBounds(this._editor)),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler),!0;return!1},getCheckValues:function(t,e){for(var i=[],n=0,s=t.length;n<s;n++)0<=t[n]&&t[n]<e.length&&i.push(this._labeling?e[t[n]].label:e[t[n]].value);return i},closeUp:function(t){if(this.isListing()){this._closing=!0;try{var e=this.editIndex&&this.editIndex().dataColumn();it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler),this._list.hide(),t&&this._list.isSelected()?(this._selectedIndices=this._list.valueIndices(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(e.valueSeparator()),ue(this._saveIndices,this._selectedIndices)&&this._editor.value==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit()):this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},initOptions:function(){this._super(),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"all"},setEditValue:function(t){var e,i=[],n=[],s=-1,r=k(t)?t:t?t.split(this._editIndex.dataColumn().valueSeparator()):[];if(this._value=t,this._lookup){var o=this._domain;if(o)for(var a=0,h=r.length;a<h;a++)0<=(s=o.keys.indexOf(r[a]))&&(i.push(s),n.push(s<o.values.length?o.values[s]:r[a]));else i=this._editIndex.dataColumn().getLookupIndices(t);this._labeling?(e=o?n.join(this._editIndex.dataColumn().valueSeparator()):0<i.length?this._editIndex.dataColumn().getLookupLabel(t):t,this._super(e)):this._super(t)}else if(this._values){for(a=0,h=r.length;a<h;a++)0<=(s=this._values.indexOf(r[a]))&&(i.push(s),n.push(this._labels&&0<=s&&this._labels.length>s?this._labels[s]:r[a]));this._labeling&&this._labels?(e=n.join(this._editIndex.dataColumn().valueSeparator()),this._super(e)):this._super(t)}else this._super(t);this._selectedIndices=i},setCellEditValue:function(t,e){this._super(t,e)},getEditValue:function(t,e){return this.isEdited()||this._list.isSelected()?this.$_getEditValue(t,e):this._value},_keyDownHandler:function(t){var e=this._list;if(t.ctrlKey&&t.keyCode==p.A&&this.isListing())return t.preventDefault(),this._list._allCheck.checked=!this._list._allCheck.checked,this._list.$_toggleAllCheck(),!0;if(t.keyCode===p.SPACE)if(this.isListing())return this._list.changeCheckIndex(e.itemIndex(),null,!0),t.preventDefault(),!0;return this._super(t)},$_getEditValue:function(t,e){function i(t,e,i,n,s){var r=[],o=e&&e.split(s.valueSeparator());if(o&&0<o.length)for(l=0,a=o.length;l<a;l++)0<=n.indexOf(o[l])&&n.indexOf(o[l])<i.length||0<=i.indexOf(o[l])?r.push(i[l]):t.isDomainOnly()||r.push(o[l]);return r}var a,n=this.text(),t=dd.prototype.getEditValue.call(this,t,e),s=t,r=this._editIndex.dataColumn(),o=this._selectedIndices.slice(),h=[],e=this._list._selected;if(this._lookup){if(this._domain){if(this._labeling){if(e)for(l=0,a=o.length;l<a;l++)o[l]<this._domain.keys.length&&h.push(this._domain.keys[o[l]]);else n&&(h=i(this,n,this._domain.keys,this._domain.values,r));s=h.join(r.valueSeparator())}}else if(this._labeling&&void 0===(s=e?r.getLookupValues(o):r.getSourceValues(n))&&(s=t),this.isDomainOnly()){if(!r.lookupValues())return hd.Unselected;for(var l=(s=k(s)?s:s&&s.split?s.split(r.valueSeparator()):[s]).length-1;0<=l;l--)r.lookupValues().indexOf(s[l])<0&&s.splice(l,1)}}else{if(this._labeling){if(e)for(l=0,a=o.length;l<a;l++)o[l]<this._values.length&&h.push(this._values[o[l]]);else n&&(h=i(this,n,this._values,this._labels,r));s=h.join(r.valueSeparator())}if(this.isDomainOnly()){if(!r.lookupValues())return hd.Unselected;for(l=(s=k(s)?s:s&&s.split?s.split(r.valueSeparator()):[s]).length-1;0<=l;l--)r.lookupValues().indexOf(s[l])<0&&s.splice(l,1)}}return s},onMultiCheckListCloseUp:function(t,e){this.setFocus(),this.closeUp(e)},onMultiCheckListCheckClick:function(t){this._editor.value=this.getCheckValues(this._list._selectItemIndices,this._items).join(this.editIndex().dataColumn().valueSeparator()),this._selectedIndices=this._list._selectItemIndices.slice(),this._saveIndices=this._list._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),this._editor.focus({preventScroll:!0})},onMultiCheckListCancel:function(){this.setFocus(),this._controller.cancelEditor()}})),vd=e("MultiCheckList",pd,{init:function(t,e){this._super(t,e),this._dom=new E(this._listElement),this._selected=!1,this._selectItemIndices=[],this._acceptText=null,this._cancelText=null,this._showButtons=null,this._showAllCheck=!1,this._acceptClickHandler=function(t){this.fireEvent(vd.CLOSE_UP,!0)}.bind(this),this._cancelClickHandler=function(t){this.fireEvent(vd.CANCEL,!1)}.bind(this),this._acceptMouseoverHandler=function(t){t.currentTarget.style.background="rgba(9, 211, 140, 0.5)"}.bind(this),this._acceptMouseoutHander=function(t){t.currentTarget.style.background=""}.bind(this),this._cancelMouseoverHandler=function(t){t.currentTarget.style.background="#888"}.bind(this),this._cancelMouseoutHandler=function(t){t.currentTarget.style.background=""}.bind(this),this._mouseoverHandler=function(t){var t=this._currDiv=t.currentTarget,e=E.getChildIndex(t),e=0<=e&&e<this._items.length?this._items[e].index:e;this._selectItemIndices.indexOf(e)<0&&(t.style.background="rgba(0, 255, 0, 0.2)",t.style.color="")}.bind(this),this._mouseoutHandler=function(t){var t=this._currDiv=t.currentTarget,e=E.getChildIndex(t),i=0<=e&&e<this._items.length?this._items[e].index:e;this._selectItemIndices.indexOf(i)<0&&(t.style.background=e==this._itemIndex?"#888":"",t.style.color=e==this._itemIndex?"#fff":"")}.bind(this),this._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var i,t=E.getChildIndex(e),n=e.getElementsByTagName("input"),s=0,r=n.length;s<r;s++)if("checkbox"==n[s].type){i=n[s];break}i&&(i.checked=!i.checked),this.$_changeCheckIndex(e,t,i.checked,!0)}}.bind(this),this._checkClickHandler=function(t){t.stopImmediatePropagation();var e,i=t.currentTarget.parentNode;i&&(e=E.getChildIndex(i),t=t.currentTarget.checked,this.$_changeCheckIndex(i,e,t,!0))}.bind(this),this._allCheckMouseoverHandler=function(t){t=t.currentTarget;t.style.background="rgba(0, 255, 0, 0.2)",t.style.color=""}.bind(this),this._allCheckMouseoutHandler=function(t){t=this._currDiv=t.currentTarget;t.style.background="",t.style.color=""}.bind(this),this._allCheckClickHandler=function(t){t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement?(this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck()):2==t.eventPhase&&t.currentTarget==this._allCheck&&this.$_toggleAllCheck()}.bind(this)},$_toggleAllCheck:function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,i=0;i<t;i++)this.changeCheckIndex(i,e,!1);this.fireEvent(vd.CHECK_CLICK,!1)},valueIndices:function(){return this._selectItemIndices.slice()},setValueIndices:function(t){this._selectItemIndices=[],null!=t&&(t=k(t)?t:[t],this._selectItemIndices=t.slice(),this.isListing()&&this.$_refreshItems(),this._selected=!1)},show:function(t,e,i,n,s){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=md.NONE&&this.$_sortItems(),this._itemIndex=-1,this.$_show(e,i,n,s)},hide:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._containerElement=null},changeCheckIndex:function(t,e,i){var n=this._listElement.childNodes;if(0<=t&&t<n.length){for(var s=(n=n[t]).getElementsByTagName("input"),r=0,o=s.length;r<o;r++)if("checkbox"==s[r].type){check=s[r];break}check&&(check.checked=null!=e?e:!check.checked,this.$_changeCheckIndex(n,t,check.checked,i))}},$_changeCheckIndex:function(t,e,i,n){var s,r=this._selectItemIndices;e<0||e>=this._items.length||(s=this._items[e].index,i?r.indexOf(s)<0&&r.push(s):0<=r.indexOf(s)&&r.splice(r.indexOf(s),1),this._useCssStyle||(t.style.background=i?"#aaa":this._itemIndex==e?"#888":""),this._useCssStyle||(t.style.color=i||this._itemIndex==e?"#fff":""),this._useCssStyle&&(t.className=i?"rg-multicheck-select":"rg-multicheck-item"),this._selected=!0,n&&this.fireEvent(vd.CHECK_CLICK,!1))},$_createList:function(){var t=document.createElement("div"),e=(this._useCssStyle&&(t.className="rg-multicheck"),document.createElement("div")),e=(this._useCssStyle&&(e.className="rg-multicheck-allcheck"),this._allCheckElement=e,E.setStyles(e,{paddingLeft:"2px"}),E.disableSelection(e),t.appendChild(e),document.createElement("div")),e=(this._useCssStyle&&(e.className="rg-multicheck-list"),this._listElement=e,t.appendChild(e),document.createElement("div"));return e.tabIndex=-1,this._useCssStyle||E.setStyles(e,{textAlign:"center"}),this._useCssStyle&&(e.className="rg-multicheck-button"),this._buttonElement=e,E.setStyles(e,{margin:"2px",paddingLeft:"2px"}),E.disableSelection(e),t.appendChild(e),t.onkeydown=function(t){27==t.keyCode&&this.fireEvent(vd.CLOSE_UP,!1)}.bind(this),t},$_show:function(t,e,i,n){var s=this._element;s&&(E.setStyles(s,{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",minWidth:"20px",minHeight:"10px",overflow:"visible",zIndex:this._listZIndex}),this._useCssStyle||E.setStyles(s,{background:"#fff",border:"1px solid rgb(50, 50, 50)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"0px",margin:"0px"}),this._dom.setStyles({position:"relative",float:"none",clear:"both",boxSizing:"border-box",minWidth:"20px",minHeight:"10px",overflow:"auto"}),this._useCssStyle||this._dom.setStyles({background:"#fff",fontSize:"10pt",padding:"0px",margin:"0px"}),E.setStyles(this._buttonElement,{position:"relative",float:"none",clear:"both",boxSizing:"border-box",marginLeft:"0px",marginRight:"0px"}),this._dom.clearChildren(),this._dom.disableSelection(),this._containerElement.appendChild(this._element),this.$_buildItems(),this.$_buildButtons(),this.$_resetHeight(),this.$_resetWidth(i),this.$_resetPosition(t,e,i,n),0<this._selectItemIndices.length&&this._itemIndex<0&&this.setItemIndex(this._selectItemIndices[0]),this._selected=!1)},$_resetWidth:function(t){var e=this._dom.element(),i=(E.getBounds(e),this._dropDownWidth),n=this._dropDownWidth,s=(n<0?n=t:0==n&&(n=10),e.style.width=n+"px",0);if(0<e.childElementCount){for(var r=e.children,t=window.getComputedStyle(r[0]),o=parseInt(t.marginLeft.replace("px","")),o=isNaN(o)?0:o,t=parseInt(t.marginRight.replace("px","")),t=isNaN(t)?0:t,a=0;a<r.length;a++)s=Math.max(s,r[a].scrollWidth);s+=e.offsetWidth-e.clientWidth+o+t}i<0&&(s=Math.max(s,n)),o=fn(),n=s=Math.min(s,o.width),an&&(0<=i||n<s)&&(n+=20),n<o.width?e.style.overflowX="hidden":e.style.overflowX="auto",s=parseInt(this._buttonElement.getBoundingClientRect().width),isNaN(s)||(n=Math.max(n,s)),e.style.width=n+"px"},$_resetPosition:function(t,e,i,n){var s=fn(),r=E.getBounds(this._containerElement),o=E.getBounds(this._container._container),a=s.width,s=s.height,h=E.getBounds(this._element),l=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(s-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=o.left-r.left,e+=o.top-r.top,(dn||an||hn)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+h.height>s+d&&(e=e-n.height-h.height)<0&&(e=s-h.height-2),this._dropDownPosition!=fd.EDITOR?t=Math.max(0,t+i-h.width):t+h.width>a+l&&(t=a-h.width),this._viewGridInside&&(e=n.bottom-r.top+2,r.bottom<n.bottom+h.height||s+d<n.bottom+h.height)&&(e=n.top-h.height-r.top-2),E.move(this._element,Math.max(0,t),Math.max(0,e))},$_resetItems:function(t,e,i,n){this._dom.clearChildren(),this.$_buildItems(),this.$_buildButtons(),this.$_resetHeight(),this.$_resetWidth(i),this.$_resetPosition(t,e,i,n)},$_buildItems:function(){var i,t,n=0,s=this._container._defContext._graphics,e=(addValue=function(t,e,i){var e=e?e.value.toString():"",n=E.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=e?E.htmlEncode(e):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,E.disableSelection(n),t.appendChild(n),n}.bind(this),addLabel=function(t,e,i){var e=e?e.label.toString():"",e=this._trimLabelText?e.trim():e,n=E.createElement("label");return this._trimLabelText||(n.style.whiteSpace="pre"),n.innerHTML=e?E.htmlEncode(e):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,E.disableSelection(n),t.appendChild(n),n}.bind(this),addSeparator=function(t,e){var i=E.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?E.htmlEncode(e):"&nbsp;",i.tabIndex=-1,E.disableSelection(i),t.appendChild(i)}.bind(this),calcWidth=function(t){var e;return i||(e=window.getComputedStyle(t),i={font:e.fontSize+" "+e.fontFamily,size:parseInt(e.fontSize)}),Math.max(n,s.getTextWidth(i,t.innerText))}.bind(this),this._items);if(e&&!(e.length<1)){for(var r=0,o=e.length;r<o;r++){var a=e[r],h=E.createElement("div",{position:"relative",float:"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"2px",paddingRight:"2px",whiteSpace:"nowrap",cursor:"default"}),l=(h.tabIndex=-1,0<=this._selectItemIndices.indexOf(e[r].index)),d=(this._useCssStyle||(h.style.background=l?"#aaa":""),this._useCssStyle||(h.style.color=l?"#fff":""),this._useCssStyle&&(h.className=l?"rg-multicheck-select":"rg-multicheck-item"),E.disableSelection(h),this._listElement.appendChild(h),h.onmouseover=this._useCssStyle?null:this._mouseoverHandler,h.onmouseout=this._useCssStyle?null:this._mouseoutHandler,h.onclick=this._clickHandler,E.createElement("input"));switch(d.id="$multiCheck_item_"+vd.$_checkId++,d.type="checkBox",d.onclick=this._checkClickHandler,d.checked=l,h.appendChild(d),t=null,this.displayLabels()){case!0:case Ys.LABEL:addLabel(h,a,d);break;case!1:case Ys.VALUE:addValue(h,a,d);break;case Ys.LABEL_VALUE:t=addLabel(h,a,d),addSeparator(h,this._separator),addValue(h,a,d);break;case Ys.VALUE_LABEL:t=addValue(h,a,d),addSeparator(h,this._separator),addLabel(h,a,d)}t&&this._itemColumned&&(n=Math.max(n,calcWidth(t)),h._firstItem=t)}if(this._itemColumned&&n)for(r=0,o=this._listElement.childNodes.length;r<o;r++)(t=this._listElement.childNodes[r]._firstItem)&&(t.style.display="inline-block"),t&&(t.style.width=n+"px")}},setButtonOptions:function(t,e,i,n,s){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=n,this._allCheckText=s,this.$_buildButtons()},$_buildButtons:function(){var t,e,i;this._buttonElement&&(this._buttonElement.style.display=this._showButtons?"":"none",E.clearChildren(this._buttonElement),(t=document.createElement("label")).innerHTML=this._acceptText,t.onclick=this._acceptClickHandler,t.onmouseover=this._useCssStyle?null:this._acceptMouseoverHandler,t.onmouseout=this._useCssStyle?null:this._acceptMouseoutHander,this._useCssStyle&&(t.className="rg-multicheck-accept"),E.setStyles(t,{padding:"0px 3px",marginRight:"0px",marginLeft:"2px",cursor:"pointer"}),this._useCssStyle||E.setStyles(t,{border:"1px solid #0a3c59",borderRadius:"3px",color:"#06426c",borderWidth:"1px"}),E.disableSelection(t),this._buttonElement.appendChild(t),(t=document.createElement("label")).innerHTML=this._cancelText,t.onclick=this._cancelClickHandler,t.onmouseover=this._useCssStyle?null:this._cancelMouseoverHandler,t.onmouseout=this._useCssStyle?null:this._cancelMouseoutHandler,this._useCssStyle&&(t.className="rg-multicheck-cancel"),E.setStyles(t,{padding:"0px 1px",marginRight:"0px",marginLeft:"2px",cursor:"pointer"}),this._useCssStyle||E.setStyles(t,{border:"1px solid #0a3c59",borderRadius:"3px",color:"#06426c",borderWidth:"1px"}),E.disableSelection(t),this._buttonElement.appendChild(t),(t=this._allCheckElement).onmouseover=this._useCssStyle?null:this._allCheckMouseoverHandler,t.onmouseout=this._useCssStyle?null:this._allCheckMouseoutHandler,t.onclick=this._allCheckClickHandler,E.clearChildren(t),this._showAllCheck?(t.style.display="",(e=document.createElement("input")).type="checkbox",e.id="$multiCheck_item_"+vd.$_checkId++,e.onclick=this._allCheckClickHandler,this._allCheck=e,t.appendChild(e),(i=E.createElement("label")).innerHTML=this._allCheckText,i.htmlFor=e.id,i.tabIndex=-1,E.disableSelection(i),t.appendChild(i)):t.style.display="none")},$_refreshItems:function(){for(var t,e,i=this._listElement.childNodes,n=-1,s=0;s<i.length;s++)n=s<this._items.length?this._items[s].index:-1,e=i[s],s==this._itemIndex?this._useCssStyle?e.classList.add("rg-multicheck-selectitem"):(e.style.background="#888",e.style.color="#fff"):this._useCssStyle?e.className=0<=this._selectItemIndices.indexOf(n)?"rg-multicheck-select":"rg-multicheck-item":(e.style.background=0<=this._selectItemIndices.indexOf(n)?"#aaa":"",e.style.color=0<=this._selectItemIndices.indexOf(n)?"#fff":"");0<=(n=this._itemIndex)&&n<i.length&&((e=i[n]).offsetTop<this._listElement.scrollTop?this._listElement.scrollTop=e.offsetTop:(t=e.offsetTop+E.getSize(e).height)>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=t-this._listElement.clientHeight))}},{$_checkId:0}),Cd=(vd.CLOSE_UP="onMultiCheckListCloseUp",vd.CANCEL="onMultiCheckListCancel",vd.CHECK_CLICK="onMultiCheckListCheckClick",e("SearchCellEditor",gd,{init:function(t,e){this._super(t,e),this._searchKey=null,this._timer=void 0},searchLength:1,searchDelay:1e3,useCtrlEnterKey:!1,useEnterKey:!1,initCount:0,moreItemCount:25,moreText:null,reInquery:!0,fillItems:function(t,e,i){return!(!this.isListing()||t!=this.getEditText()||(this.setValues(e),this.setLabels(i),this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),0))},_keyDownHandler:function(t){var e=t.keyCode==p.ENTER;return(e=e&&(t.ctrlKey?this.isUseCtrlEnterKey():this.isUseEnterKey()&&(!this._items||this._items.length<1)))&&this.isEditing()?(t.preventDefault(),t.stopImmediatePropagation(),this.$_stopTimer(),(e=this.getEditText())&&e!=this._searchKey&&(this._searchKey=e,this._dispatchSearch(e)),!0):this._super(t)},_keyUpHandler:function(t){this._super(t),tn&&this.$_search()},_inputHandler:function(t){this._super(t),tn||this.$_search()},_doEndEdit:function(){this._super(),this.$_stopTimer(),this._searchKey=null},dropDown:function(){var t=this._list;t&&(t.setInitCount(this.initCount()),t.setMoreItemCount(this.moreItemCount()),t.setMoreText(this.moreText())),this._super(!0)},buttonClicked:function(t){var e,i;this.isListing()?this.closeUp(!1):(this.dropDown(),e=this.getEditText(),(i=this._dispatchSearchCellButtonClick(e))&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels))},$_search:function(){var t=this.getEditText();t&&!this._isEmptyTextValue&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},$_startTimer:function(){this.$_stopTimer(),!this.isReInquery()&&this.isListing()&&0<this._list._items.length||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},$_stopTimer:function(){this._timer&&clearInterval(this._timer)}})),yd=(Cd.SEARCH="onSearchCellEditorSearch",/[ㄱ-ㅎㅏ-ㅣ가-힝]/g),xd=e("NumberCellEditor",dd,{init:function(t,e){this._super(t,e),this._regxAll=/[0-9]|,|\.|\-|\+|e|E/,this._regxPos=/[0-9]|,|\.|\+|e|E/,this._regxInt=/[0-9]|,|\+|\-/,this._regxPosInt=/[0-9]|,|\+/,this._regx=this._regxAll,this._editor.style.imeMode="disabled",this._editor.style["-webkit-ime-mode"]="disabled",this._editor.style["-moz-ime-mode"]="disabled",this._editor.style["-ms-ime-mode"]="disabled",this._decSep=xe,this._groupSep=Ie,this._editFormat=void 0,this._decLen=void 0,this._decimalFormatter=void 0,this._numValue=void 0,this._multipleChar=null,this._addString="000",this._isMultiple=!1,this._maxIntegerLength=0},setMask:function(t){this._mask=null},positiveOnly:!1,integerOnly:!1,decSep:void 0,groupSep:void 0,editFormat:void 0,multipleChar:void 0,addString:void 0,maxLengthExceptComma:!1,maxIntegerLength:void 0,blankWhenSpace:!1,setEditFormat:function(t){this._editFormat!=t&&((this._editFormat=t)?(t=this._decimalFormatter=new Me(t))&&(this._decSep=t._seperator||xe,this._groupSep=t._groupSep||Ie,this._decLen=Math.max(t._minDigits,t._maxDigits)):(this._decimalFormatter=void 0,this._decSep=xe,this._groupSep=Ie,this._decLen=void 0))},setPositiveOnly:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},setIntegerOnly:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},initOptions:function(){this._super(),this._decSep=xe,this._groupSep=Ie,this.setEditFormat(void 0),this.setPositiveOnly(!1),this.setIntegerOnly(!1),this.setBlankWhenSpace(!1),this.setMaxIntegerLength(0),this.setMaxLengthExceptComma(!1),this._composing=!1},setEditIndex:function(t){this._super(t),this._editor.maxLength=this.isMaxLengthExceptComma()||this._maxLength<=0?this._defMaxLength:this._maxLength},_pasteHandler:function(t){return this._super(t)},$_strToNum:function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),n="-"===t[0];return t=t.replace(i,"").replace(e,"."),isNaN(t)?NaN:n?-Math.abs(parseFloat(t)):parseFloat(t)},$_formatNum:function(t,e,i){var n=t<0||0==t&&1/t==-1/0?"-":"",i=isNaN(i=Math.max(e,i))?2:i,s=parseInt(t=Math.abs(+t||0).toFixed(i))+"",r=3<(r=s.length)?r%3:0;if(0<=t.indexOf(".")){for(var o=t.split(".")[1].split("");0<o.length&&"0"===o[o.length-1]&&o.length>e;)o.splice(o.length-1,1);t=o.join(""),i=o.length}return n+(r?s.substr(0,r)+this._groupSep:"")+s.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(i?this._decSep+t:"")},$_editFormatting:function(t){var e,i=(r=t.target.value)&&r[r.length-1]==this._decSep,n=t.target.selectionStart,s=t.target.selectionEnd,r=this._isMultiple&&this._addString?r.replace(/\+/g,this._addString):r,o=(this._isMultiple&&this._addString&&(n+=this._addString.length,s+=this._addString.length),r.split(this._decSep)),a=0,o=(1<o.length&&(o.length=2,o[1]=o[1].substr(0,this._decimalFormatter._maxDigits),a=o[1].length,r=o.join(this._decSep)),a=2==o.length?Math.min(o[1].length,null!=this._decLen?this._decLen:99):0,this.$_strToNum(r));isNaN(o)||((0<this.maxLength()||0<this.maxIntegerLength())&&(e=String(o).split("."),0<this.maxIntegerLength()&&(e[0]=e[0].substr(0,this.maxIntegerLength())),e=e.join("."),0<this.maxLength()&&(e=e.substr(0,this.maxLength())),o=1/o==-1/0?-parseFloat(e):parseFloat(e)),r=this.$_formatNum(o,a,this._decimalFormatter._maxDigits),e=(r=i&&this._decLen&&r.indexOf(this._decSep)<0?r+this._decSep:r).length,o=t.target.value.length,1==Math.abs(e-o)&&(o<e?(n++,s++):r.indexOf(this._decSep)>=n&&(n--,s--)),t.target.value=r,t.target.setSelectionRange(n,s))},_inputHandler:function(t){t.data&&t.data.match(yd)?t.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(t),this._super(t))},_keyPressHandler:function(t){var e,i,n,s,r,o,a;Qi&&(t.ctrlKey||0===t.charCode)?this._super(t):zt(t)||(e=!0,i=String.fromCharCode(t.keyCode||t.charCode),this._regx.test(i)&&!(t.target.value&&0<=t.target.value.indexOf(this._decSep)&&i==this._decSep)||this._multipleChar&&i===this._multipleChar||(e=!1,this.isBlankWhenSpace()&&" "===i)||t.preventDefault(),n=t.target.selectionStart,a=t.target.selectionEnd,s=t.target.value,r=new RegExp("\\"+this._groupSep,"g"),(o=s?s.split(""):[]).splice(n,a-n,i===this._multipleChar?this._addString:i),o=o.join("").replace(r,""),0<this._maxLength&&e&&this.isMaxLengthExceptComma()&&s&&o.length>this._maxLength&&t.preventDefault(),0<this._maxIntegerLength&&i!==this._decSep&&(a=parseInt(this.$_strToNum(o)),isNaN(a)||(e=Math.abs(a).toString().length,this._maxIntegerLength<e&&t.preventDefault())),this._isMultiple=i==this._multipleChar,this._super(t))},_keyDownHandler:function(t){var e=t.keyCode||t.charCode;if(this._isMultiple=!1,(8===e||46===e)&&this.isEditing()&&this._editFormat){var i=t.target,n=i.value,s=n.length,r=n&&n.split(""),o=i.selectionStart,a=i.selectionEnd;if(o!==a)return void this._super(t);var h=n[8===e?o-1:o];h!==this._groupSep&&h!==this._decSep||h===this._decSep&&o===(8===e?n.length:n.length-1)||(r.splice(8===e?o-2:o+1,1),i.value=r.join(""),this.$_editFormatting(t),n=i.value,h=s-(8===e?n.length:s),i.setSelectionRange(o-h,a-h),this._doChanged(),t.preventDefault())}this._super(t)},_compositionstartHandler:function(t){this._requestStart(),this._checkHangeul=!1},_compositionupdateHandler:function(t){this._composing=!1},$_resetValue:function(){var t,e,i;this.isVisible()&&(t=this._editor.selectionStart,e=this._editor.selectionEnd,i=this._editor.value?this._editor.value.length:0,this._editor.value=this._editor.value.replace(yd,"").trim(),(this._editor.value?this._editor.value.length:0)==i?this._editor.setSelectionRange(t,e):this._editor.setSelectionRange(e,e))},_dispatchChange:function(){this.isVisible()&&(this.$_resetValue(),this._super())},setEditValue:function(t){t=parseFloat(t);isNaN(t)?this._editor.value="":this._editFormat&&"number"==typeof t?this._editor.value=this.$_formatNum(t,this._decimalFormatter._minDigits,this._decimalFormatter._maxDigits):this._editor.value=t,this._isEmptyTextValue=!1},getEditValue:function(e,t){this.$_resetValue();var i=this._editField().nullValue;try{var n,s,r=this._editor.value;(r=r&&r.trim())&&(n=new RegExp("\\"+this._groupSep,"g"),s=new RegExp("[\\"+this._decSep+"]+","g"),r=(r=(r=(r=(r=(r=r.replace(n,"")).replace(s,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")),i=r?parseFloat(r):void 0}catch(t){if(e)throw t}return i},setCellEditValue:function(t){this.isReadOnly()||!this._requestStart()||"string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged())},$_resetRistrict:function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll}}),Id=e("Holiday",null,{init:function(t){this._super(),this._owner=t,this._tooltips=[],this._items=[],this._styles=new d(this,"holidayStyles"),this._styles.setSysDefault(Id.$_defaultStyle,!1)},destroy:function(){this._owner=null,this._tooltips=[],this._items=[],this._styles=null,this._super()},tooltips:null,items:null,styles:null,enabled:!0,load:function(t){this.clear(),t&&(null===t.styles?this._styles.clearValues():this._styles.extend(t.styles))},clear:function(){this._items=[],this._tooltips=[]},count:function(){return this._items&&this._items.length},contains:function(t){return!1},getTooltip:function(t){return null}},null,function(t){t.$_defaultStyle=new d(null,"default HolidayStyles",{background:"#f5f5f5",foreground:"#333"})}),bd=e("DateHoliday",Id,{init:function(t,e){this._super(t),e&&this.load(e)},destroy:function(){this._super()},load:function(t){if(this._super(t),t){var e=k(t.dates)?t.dates:t.dates?[t.dates]:[];t.tooltips=k(t.tooltips)?t.tooltips:t.tooltips?[t.tooltips]:[];for(var i=0,n=e.length;i<n;i++){var s,r=e[i];if(r instanceof Date)(s=new Date(r)).setHours(0,0,0,0);else if("number"==typeof r)(s=new Date(r)).setHours(0,0,0,0);else if("string"==typeof r){var o=(r=4!==r.length&&8!==r.length||!/^[0-9]*$/.test(r)?r:4===r.length?r.replace(/(\d{2})(\d{2})/,"$1/$2"):r.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3")).split(/[.//-]/);if(2==o.length)try{s=parseInt(o[0]).toString()+"/"+parseInt(o[1]).toString()}catch(t){}else 3==o.length&&(s=Se.getSimpleDateNull(r))}s&&(this._items.push(s),t.tooltips[i])&&this._tooltips.push(t.tooltips[i])}this._enabled=!!t.enabled}},getItemIndex:function(t){for(var e,i=0,n=this._items.length;i<n;i++){if((e=this._items[i])instanceof Date&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())return i;if(e===t.getMonth()+1+"/"+t.getDate())return i}return-1},contains:function(t){return 0<=this.getItemIndex(t)},getTooltip:function(t){t=this.getItemIndex(t);return 0<=t?this._tooltips[t]:null}}),Ed=e("DayHoliday",Id,{init:function(t,e){this._super(t),e&&this.load(e)},destroy:function(){this._super()},load:function(t){this._super(t),t&&(this._items=k(t.days)?t.days:t.days?[t.days]:[],this._tooltips=k(t.tooltips)?t.tooltips:t.tooltips?[t.tooltips]:[],this._enabled=!!t.enabled)},contains:function(t){return t instanceof Date?0<=this._items.indexOf(t.getDay()):"number"==typeof t?0<=this._items.indexOf(t):void 0},getTooltip:function(t){t=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return 0<=t?this._tooltips[t]:null}}),Rd=e("HolidayCollection",null,{init:function(){this._super(),this._items=[],this._count=-1},destroy:function(){this._editor=null,this._items=[],this._super()},items:null,setEditor:function(t){this._editor=t},isNull:function(){return-1==this._count},setNull:function(){this._count=-1},getDateConvert:function(){return this._editor&&this._editor._dateConverter},count:function(){return this._count},clear:function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},load:function(t){if(this.clear(),t){for(var e,i,n=0,s=(t=k(t)?t:[t]).length;n<s;n++){switch((e=t[n]).type){case"day":i=new Ed(this,e);break;case"date":i=new bd(this,e)}0<i.count()&&this._items.push(i)}this._count=this._items.length}else this._count=-1},contains:function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null}}),Sd=e("DateCellEditor",dd,{init:function(t,e){this._super(t,e),this._yearDisplayFormat=this._options.yearDisplayFormat(),this._monthDisplayFormat=this._options.monthDisplayFormat(),this._months=this._options.months(),this._weekDays=this._options.weekDays(),this._list=new Td(t._container,this,this._options&&(this._options._useCssStyle||this._options._useCssStyleDatePicker)),this._list.addListener(this),this._closing=!1,this._date=void 0,this._borderable=!1,this._regx=/[0-9]|\.|\-|\/|a|A|p|P|m| |:/,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._dom._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this),this._holidayCollection=new Rd},destroy:function(){return this._destroying=!0,this._globalMouseHandler=null,this._super()},editFormat:null,minDate:new Date(1970,0,1),maxDate:new Date(2100,11,31),yearNavigation:!1,textReadOnly:!1,dropDownPosition:fd.BUTTON,dropDownWhenClick:!1,showToday:!0,yearDisplayFormat:"{Y}년",monthDisplayFormat:"{M}월",months:null,weekDays:null,showWeeks:!1,startWeek:0,weekSelectable:!1,weekSeparator:"",commitOnSelect:!1,defaultShowDate:null,holidays:null,setMinDate:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},setMaxDate:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},setStartWeek:function(t){(t=null==t||isNaN(t=parseInt(t))?0:t)!==this._startWeek&&(this._startWeek=t)},setDefaultShowDate:function(t){if(t!=this._defaultShowDate){switch(t){case Xs.TODAY:case Xs.NORMAL:case Xs.TODAY_WHEN_NULL:break;default:t=("string"==typeof t?this._dateConverter.getDateNull(t):t instanceof Date?t:null)||"normal"}this._defaultShowDate=t}},setHolidays:function(t){(this._holidays=t)?(this._holidayCollection=this._holidayCollection||new Rd,this._holidayCollection.setEditor(this),this._holidayCollection.load(t)):this._holidayCollection.setNull()},containElement:function(t){var e=this._super(t);return e=!e&&this.isListing()?this._list.containElement(t):e},editFormat_:function(){return this._datetimeFormat},setEditFormat:function(t){this.setDatetimeFormat(t)},isListing:function(){return this._list.isListing()},isMonthListing:function(){return this._list.isMonthListing()},dropDown:function(){var t,e;return!(this.isReadOnly()||this._controller._readOnly||this.isListing()||this._closing||(t=this._list,e=E.getBounds(this._container),t.setViewGridInside(this._options&&this._options._viewGridInside),t.setYearNavigation(this._yearNavigation),t.setDropDownPosition(this._dropDownPosition),t.setShowToday(this._showToday),t.setYearDisplayFormat(this._yearDisplayFormat),t.setMonthDisplayFormat(this._monthDisplayFormat),t.setMonths(this._months),t.setMinDate(this._minDate),t.setMaxDate(this._maxDate),t.setShowWeeks(this._showWeeks),t.setStartWeek(this._startWeek||0),t.setWeekSelectable(this.isWeekSelectable()),t.setWeekSeparator(this._weekSeparator),t.setListZIndex(this.getListZIndex()),t.setHolidays((this._holidayCollection.isNull()?this._options:this)._holidayCollection),this._weekDays&&0<this._weekDays.length&&t.setWeekDays(this._weekDays),this.$_setListDate(),t.show(z.documentElement,e.cx-1,e.cy+e.height,this._cellBounds.width,E.getBounds(this._editor)),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler),0))},closeUp:function(t){if(this.isListing()){this._closing=!0;try{it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler),this._list.hide(),t&&this._list.isSelected()&&(this.$_selectDate(this._list.date()),this._commitOnSelect)&&this._dispatchCommit()}finally{this._closing=!1}return!0}return!1},initOptions:function(){this._super(),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate="normal",this._holidayCollection&&this._holidayCollection.setNull()},_isDateEditor:function(){var t=this._editField().dataType();return t==S.DATE||t==S.DATETIME||!this.isWeekSelectable()},hasButton:function(){return!0},setEditIndex:function(t){this._super(t);t=this._editField().dataType();this._weekSelectable=this._weekSelectable&&t!==S.DATE&&t!==S.DATETIME},setEditValue:function(t){this._super(t),this.isWeekSelectable()?this._date=Qr(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_valToStr(t)},setCellEditValue:function(t,e){this._super(t,e)},getEditValue:function(t,e){var t=this._super(t),i=this._editField().dataType();return t&&e&&(i==S.DATE||i==S.DATETIME)&&(t=this._minDate?Math.max(this._minDate,t):t,t=(t=this._maxDate?Math.min(this._maxDate,t):t)&&new Date(t)),t},_createContainer:function(){var t=this._super();return t.style.border="none",t.style.boxShadow="none",t},_createEditor:function(t){return this._super(t)},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(t){this._requestStart(t)},_keyDownHandler:function(t){var e=this._list;if(e.isMonthListing())return t.keyCode==p.ESCAPE&&(this.closeMonthList(),t.preventDefault(),t.stopImmediatePropagation(),!0);var i=this.isListing()&&e.isFocused();switch(t.keyCode){case p.ENTER:if(this.closeUp(!0))return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);break;case p.ESCAPE:if(this.closeUp(!1))return t.preventDefault(),t.stopImmediatePropagation(),!0;break;case p.HOME:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.firstDay()),!0;break;case p.END:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.lastDay()),!0;break;case p.LEFT:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incDay(-1)),!0;break;case p.RIGHT:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incDay(1)),!0;break;case p.PAGEUP:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(-1)),!0;break;case p.PAGEDOWN:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(1)),!0;break;case p.DOWN:if(t.altKey&&!this.isListing())return this._requestStart(),t.preventDefault(),t.stopImmediatePropagation(),!0;if(this.isListing())return t.preventDefault(),t.stopImmediatePropagation(),i?this.$_selectDate(e.incDay(7)):(this._list.setFocused(!0),this.$_setListDate()),!0;break;case p.UP:if(t.altKey&&this.isListing())return this.closeUp(!1),t.preventDefault(),t.stopImmediatePropagation(),!0;if(this.isListing())return t.preventDefault(),t.stopImmediatePropagation(),!i||e.date().getDate()<=7?this._list.setFocused(!1):this.$_selectDate(e.incDay(-7)),!0;break;case p.T:(t.altKey||t.altKey&&t.ctrlKey)&&this.isListing()&&(t.preventDefault(),t.stopImmediatePropagation(),this._list.setDate(new Date),this.$_selectDate(this._list._date))}return this._super(t)},_keyPressHandler:function(t){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar()){if(t.preventDefault(),t.stopImmediatePropagation(),this.isListing())return e.setFocused(!0),this.$_selectDate(e.today()),!0}else{if(Qi&&(t.ctrlKey||0===t.charCode))return void this._super(t);if(zt(t))return;if(!this._regx.test(i))return void t.preventDefault()}this._super(t),t.keyCode&&this.isTextReadOnly&&this.isTextReadOnly()&&t.preventDefault()},$_resetValue:function(){var t,e,i;this.isVisible()&&(t=this._editor.selectionStart,e=this._editor.selectionEnd,i=this._editor.value?this._editor.value.length:0,this._editor.value=this._editor.value.replace(yd,""),(this._editor.value?this._editor.value.length:0)==i?this._editor.setSelectionRange(t,e):this._editor.setSelectionRange(e,e))},_dispatchChange:function(){this.isVisible()&&(this.$_resetValue(),this._super())},_changeHandler:function(t){return this._super(t)},_pasteHandler:function(t){return this._super(t)},_copyHandler:function(t){return this._super(t)},_requestStart:function(t){return!!this._super()&&(!1!==t&&this.dropDown(),!0)},setBounds:function(t,e,i,n){this._super(t+=2,e+=2,i-=4,n-=4)},_doChanged:function(){this._started||this._requestStart(),this._started&&!this._controller._readOnly&&this._controller._editable&&(this._modified=!0,this._dispatchChange())},dropDownList:function(t){this.dropDown(t)},closeList:function(t){this.closeUp(t)},closeMonthList:function(){this._list.closeMonth()},buttonClicked:function(t){this.isListing()?this.closeUp(!1):this.dropDown()},$_selectDate:function(t){t&&t!=this._date&&(this._date=t,this.containsRange(t))&&(t=this.isWeekSelectable()?to(t,this._startWeek,this._weekSeparator):this._dateConverter.getText(this._date),this._mask&&(t=this._mask.writeBuffer(t)),this._editor.value=t,this._doChanged())},$_setListDate:function(){var t,e=this._editor.value;switch(e&&this._mask&&(e=this._mask.getStripValue(e)),t=this.isWeekSelectable()?Qr(e):this._dateConverter.getDateNull(e),this._defaultShowDate){case Xs.TODAY:t=new Date;break;case Xs.NORMAL:break;case Xs.TODAY_WHEN_NULL:t=t||new Date;break;default:t=t||("string"==typeof this._defaultShowDate?this._dateConverter.getDateNull(e):this._defaultShowDate instanceof Date?this._defaultShowDate:null)}t&&this._list.setDate(t)},onDatePickerCloseUp:function(t,e){this.closeUp(e),_e()||this.setFocus()},containsRange:function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)}},{}),Td=e("DatePicker",le,{init:function(t,e,i){this._super(),this._useCssStyle=i,this._editor=e,this._container=t,this._containerElement=null,this._headerElement=null,this._headElement=null,this._todayElement=null,this._yearDisplayFormat=e.yearDisplayFormat(),this._monthDisplayFormat=e.monthDisplayFormat(),this._months=e.months(),this._weekDays=Nt,this._date=new Date,this._currDate=null,this._today=null,this._selected=!1,this._cellBackground="#f5f5f5",this._todayBackground="#d5d5d5",this._focusedBackground="rgba(255, 255, 0, 0.3)",this._hoveredBackground="",this._prevBackground="",this._cellBorder="1px solid #eee",this._nullBorder="1px solid #fff",this._focusedBorder="1px solid #aaa",this._todayBorder="1px solid #aaa",this._hoveredBorder="1px solid #000",this._cellColor="#333",this._nullColor="#ccc",this._prevColor="#565656",this._focused=!0,this._mouseoverHandler=function(t){var t=t.currentTarget,e=this.$_getCellDate(this._currDate,t.$_day+1),i=this._editor.containsRange(e),n=this._holidays&&this._holidays.contains(e);t.style.background=n&&i?n.styles().background().css():i?this._hoveredBackground:"",i&&n&&(t.style.color=n.styles().foreground().css()),t.style.border=i?this._hoveredBorder:this._nullBorder,i&&n&&n.getTooltip(e)&&(t.title=n.getTooltip(e))}.bind(this),this._mouseoutHandler=function(t){var e=this._currDate,i=e.getFullYear(),e=e.getMonth(),i=Lt[At(i)?1:0][e],e=t.currentTarget,t=e.$_day,n=this.$_getCellDate(this._currDate,e.$_day+1),s=this._editor.containsRange(n),n=this._holidays&&this._holidays.contains(n);t<0||i<=t?(e.style.background="",e.style.border=this._nullBorder,e.style.color=s?this._prevColor:this._nullColor):this.$_isFocusedDay(this._currDate,t+1)?(e.style.background=this._focusedBackground,e.style.border=this._focusedBorder,e.style.color=s?this._cellColor:this._nullColor):this.$_isToday(this._currDate,t+1)?(e.style.background=this._todayBackground,e.style.border=this._todayBorder,e.style.color=s?this._cellColor:this._nullColor):(e.style.background=s&&n?n.styles().background().css():this._cellBackground,e.style.border=this._cellBorder,e.style.color=s?n?n.styles().foreground().css():this._cellColor:this._nullColor)}.bind(this),this._yearWeekmouseoverHandler=function(t){var e=t.currentTarget,t=this._editor.containsRange(Qr(t.currentTarget.$_yearWeek));e.style.background=t?this._hoveredBackground:"",e.style.border=t?this._hoveredBorder:this._nullBorder,e.style.color=t?this._cellColor:this._nullColor}.bind(this),this._yearWeekmouseoutHandler=function(t){var e=t.currentTarget,i=this._editor.containsRange(Qr(t.currentTarget.$_yearWeek)),t=this.$_isFocusedWeek(this._currDate,t.currentTarget.$_yearWeek);e.style.background=t?this._focusedBackground:this._cellBackground,e.style.border=t?this._focusedBorder:i?this._cellBorder:this._nullBorder,e.style.color=i?this._cellColor:this._nullColor}.bind(this),this._clickHandler=function(t){var e,t=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);!this._editor.containsRange(t)||(e=this._holidays&&this._holidays.contains(t))&&!e.isEnabled()||(this._date=new Date(t),this._selected=!0,this.fireEvent(Td.CLOSE_UP,!0))}.bind(this),this._yearWeekClickHandler=function(t){var e,t=t.currentTarget.$_yearWeek;(e=t?Qr(t):e)&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0,this.fireEvent(Td.CLOSE_UP,!0))}.bind(this),this._dom=new E(this._element=this.$_createPicker()),this._monthPicker=new kd(e,this._element,this._useCssStyle),this._monthPicker.addListener(this)},minWidth:0,maxWidth:0,minDate:null,maxDate:null,yearNavigation:!1,dropDownPosition:fd.BUTTON,showToday:!0,yearDisplayFormat:null,monthDisplayFormat:null,months:null,viewGridInside:!1,showWeeks:!1,startWeek:0,weekSelectable:!1,weekSeparator:"",holidays:null,listZIndex:3e3,date:function(){return this._date},$_getCellDate:function(t,e){t=new Date(t);return t.setDate(e),t},setDate:function(t){return t.getTime()!=this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.isListing())&&this.$_buildCalendar(),this._date},setWeekDays:function(t){t!=this._weekDays&&(k(t)&&7<=t.length?this._weekDays=t:this._weekDays=Nt)},setHolidays:function(t){this._holidays=t},isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},isMonthListing:function(){return this._monthPicker.isListing()},closeMonth:function(){this._monthPicker.hide(0)},isSelected:function(){return this._selected},isFocused:function(){return this._focused},setFocused:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=t?"1.0":"0.5",this._useCssStyle||(this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8"))},show:function(t,e,i,n,s){this._containerElement=this._viewGridInside?this._container._container:t,this.$_show(e,i,n,s)},hide:function(){this.setFocused(!1),this._monthPicker.hide(),this._dom.detach(),this._containerElement=null},today:function(){return this.setDate(new Date)},incDay:function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.setDate(e)},incMonth:function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&Vt(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.setDate(e)},firstDay:function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.setDate(t)},lastDay:function(){var t,e,i=new Date(this._currDate);return this._date&&(e=i.getFullYear(),t=i.getMonth(),e=Lt[At(e)?1:0][t],i.setDate(e)),this.setDate(i)},containElement:function(t){return this._element.contains(t)||this.isMonthListing&&this._monthPicker._dom._element.contains(t)},$_createPicker:function(){var t=E.createElement("div",{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",margin:"0px",overflow:"auto",zIndex:3e3});return this._useCssStyle?t.className="rg-calendar":E.setStyles(t,{cursor:"default",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",padding:"0px"}),this._header=this.$_createHeader(),t.tabIndex=-1,t.appendChild(this._header),this._calendar=this.$_createCalendar(),t.appendChild(this._calendar),t.addEventListener("keydown",function(t){27==t.keyCode&&(this.isMonthListing()?this.closeMonth():this.fireEvent(pd.CLOSE_UP,!1))}.bind(this)),t.addEventListener("mouseup",function(t){this._editor.setFocus()}.bind(this)),t},$_createHeader:function(){var e=this,t=this._headerElement=E.createElement("div",{position:"relative"}),i=(this._useCssStyle?t.className="rg-cal-header":E.setStyles(t,{paddingLeft:"4px",paddingRight:"4px",paddingTop:"4px",paddingBottom:"0px",fontSize:"12px",backgroundColor:"#e8e8e8",margin:"0px"}),E.createElement("span",{position:"absolute",left:"4px",minWidth:"17px",minHeight:"17px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"})),i=(this._useCssStyle?i.className="rg-cal-prev-month":E.setStyles(i,{top:"3px",backgroundImage:U("cal_prev.png")}),t.appendChild(t.$_prev=i),i.onclick=function(t){this._useCssStyle||E.setStyles(t.currentTarget,{backgroundImage:U("cal_prev_hover.png")}),Vt(this._currDate,-1),this.$_buildCalendar()}.bind(this),i.onmouseover=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_prev_hover.png")})},i.onmousedown=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_prev_active.png")})},i.onmouseout=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_prev.png")})},E.createElement("span",{position:"absolute",right:"4px",minWidth:"17px",minHeight:"17px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"})),i=(this._useCssStyle?i.className="rg-cal-next-month":E.setStyles(i,{top:"3px",backgroundImage:U("cal_next.png")}),t.appendChild(t.$_next=i),i.onclick=function(t){this._useCssStyle||E.setStyles(t.currentTarget,{backgroundImage:U("cal_next_hover.png")}),Vt(this._currDate,1),this.$_buildCalendar()}.bind(this),i.onmouseover=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_next_hover.png")})},i.onmousedown=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_next_active.png")})},i.onmouseout=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_next.png")})},this._todayElement=E.createElement("span",{position:"absolute",right:"18px",top:"2px"})),i=(this._useCssStyle?i.className="rg-cal-today-button":E.setStyles(i,{padding:"2px",fontSize:"10px",border:"1px solid transparent",borderRadius:"3px"}),t.appendChild(i),i.innerHTML="Today",i.onclick=function(t){new Date;e.setFocused(!0),e.setDate(new Date),e._editor.$_selectDate(e._currDate)},i.onmouseover=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff",textDecoration:"underline"})},i.onmouseup=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff"})},i.onmousedown=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{color:"#800",backgroundColor:"#eee"})},i.onmouseout=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{color:"",border:"1px solid transparent",backgroundColor:"",textDecoration:""})},E.createElement("div",{position:"relative",textAlign:"center",marginLeft:"20px",marginRight:"50px"})),n=(t.appendChild(t.$_title=i),this._useCssStyle&&(i.className="rg-cal-yearmonth"),E.createElement("span",{position:"relative",verticalAlign:"top",height:"16px"})),n=(this._useCssStyle&&(n.className="rg-cal-year"),i.appendChild(i.$_year=n),n.innerHTML="2015년",n.onclick=function(t){},this.$_createYearSpin()),n=(i.appendChild(i.$_yearSpin=n),E.createElement("span",{position:"relative",verticalAlign:"top"}));return this._useCssStyle&&(n.className="rg-cal-month"),i.appendChild(i.$_month=n),n.innerHTML="1월",n.onmousedown=function(t){t.preventDefault(),t.stopImmediatePropagation();t=E.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,t.x,t.y,this._viewGridInside)}.bind(this),t},$_createYearSpin:function(){var t=E.createElement("div",{display:"inline-block",visibility:"hidden",position:"relative",width:"15px",height:"16px",marginLeft:"-4px",marginRight:"2px"}),e=E.createElement("span",{position:"absolute",top:"0px",left:"0px",width:"15px",height:"9px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),e=(this._useCssStyle?e.className="rg-cal-next-year":E.setStyles(e,{backgroundImage:U("cal_up.png")}),t.appendChild(e),e.onclick=function(t){this._useCssStyle||E.setStyles(t.currentTarget,{backgroundImage:U("cal_up_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this),e.onmouseover=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_up_hover.png")})},e.onmousedown=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_up_active.png")})},e.onmouseout=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_up.png")})},E.createElement("span",{position:"absolute",top:"7px",left:"0px",width:"15px",height:"9px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}));return this._useCssStyle?e.className="rg-cal-prev-year":E.setStyles(e,{backgroundImage:U("cal_down.png")}),t.appendChild(e),e.onclick=function(t){this._useCssStyle||E.setStyles(t.currentTarget,{backgroundImage:U("cal_down_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),e.onmouseover=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_down_hover.png")})},e.onmousedown=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_down_active.png")})},e.onmouseout=this._useCssStyle?null:function(t){E.setStyles(t.currentTarget,{backgroundImage:U("cal_down.png")})},t},$_createCalendar:function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],n=E.createElement("table",{margin:"2px"}),s=(n.cellSpacing=3,this._useCssStyle&&(n.className="rg-cal-days-table"),this._headElement=E.createElement("thead",{})),r=(this._useCssStyle&&(s.className="rg-cal-weeks"),n.appendChild(n.$_head=s),E.createElement("tr")),o=(s.appendChild(r),e=[],E.createElement("th",{minWidth:"20px",textAlign:"center"})),a=(this._useCssStyle&&(o.className="rg-cal-week-year-week"),r.appendChild(o),E.createElement("span",{}));for(o.appendChild(a),s.$_weeks=o,t=0;t<7;t++){o=E.createElement("th",{minWidth:"20px",textAlign:"center"});this._useCssStyle&&(o.className="rg-cal-week-"+i[t]),r.appendChild(o),(a=E.createElement("span",{})).innerHTML=E.htmlEncode(this._weekDays[t]),o.appendChild(a),e.push(a)}s.$_cells=e;for(var h=E.createElement("tbody",{}),l=(this._useCssStyle?h.className="rg-cal-days":E.setStyles(h,{fontSize:"10px"}),n.appendChild(n.$_body=h),h.$_rows=[]),d=h.$_yearweeks=[],u=0;u<6;u++){var r=E.createElement("tr",{}),c=(h.appendChild(r),l.push(r),r.$_cells=e=[],E.createElement("td",{padding:"1px"}));for(this._useCssStyle?c.className="rg-cal-day rg-cal-year-weeks":E.setStyles(c,{textAlign:"center",color:this._cellColor,background:"#f0f0f0",borderRadius:"1px",fontSize:"8px"}),r.appendChild(c),c.onmouseover=this._useCssStyle?null:this._yearWeekmouseoverHandler,c.onmouseout=this._useCssStyle?null:this._yearWeekmouseoutHandler,a=E.createElement("span",{}),c.appendChild(c.$_span=a),d.push(c),t=0;t<7;t++){c=E.createElement("td",{padding:"1px"});this._useCssStyle?c.className="rg-cal-day rg-cal-week-"+i[(t+this._startWeek)%7]:E.setStyles(c,{textAlign:"right",color:this._cellColor,background:"#f0f0f0",borderRadius:"1px"}),r.appendChild(c),c.onmouseover=this._useCssStyle?null:this._mouseoverHandler,c.onmouseout=this._useCssStyle?null:this._mouseoutHandler,c.onclick=this._clickHandler,a=E.createElement("span",{}),c.appendChild(c.$_span=a),e.push(c)}}return n},$_show:function(t,e,i,n){this.setFocused(!1),this._selected=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"50px":"20px";var s=this._date,s=(s instanceof Date&&"Invalid Date"!=s||(s=null),this._currDate=s?new Date(s):new Date,this._today=new Date,this.$_buildCalendar(),this._dom.disableSelection(),this._dom.setStyles({zIndex:this._listZIndex}),this._containerElement.appendChild(this._dom.element()),fn()),r=E.getBounds(this._containerElement),o=E.getBounds(this._container._container),a=s.width,s=s.height,h=this._dom.getBounds(),l=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(s-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=o.left-r.left,e+=o.top-r.top,(dn||an||hn)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+h.height>s+d&&(e=e-n.height-h.height)<0&&(e=s-h.height-2),this._dropDownPosition!=fd.EDITOR?t=Math.max(0,t+i-h.width):t+h.width>a+l&&(t=a-h.width),this._viewGridInside&&(e=n.bottom-r.top+2,r.bottom<n.bottom+h.height||s+d<n.bottom+h.height)&&(e=n.top-h.height-r.top-2),this._dom.move(Math.max(0,t),Math.max(0,e))},$_checkFocusedWeek:function(t,e,i){t=this.$_isFocusedWeek(t,e.$_yearWeek);this._useCssStyle?e.className="rg-cal-week-year-focusweek":E.setStyles(e,{background:t?this._focusedBackground:this._cellBackground,border:t?this._focusedBorder:this._cellBorder,color:i?this._cellColor:this._nullColor})},$_isFocusedWeek:function(t,e){return t&&e&&to(t,this._startWeek)==e},$_isFocusedDay:function(t,e){var i=Et(this._date);return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},$_isToday:function(t,e){var i=Et(this._today);return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},$_buildCalendar:function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],n=this._header,s=this._currDate,r=n.$_prev,o=n.$_next,n=n.$_title,a=s.getFullYear(),h=s.getMonth();for(n.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",a):a+"년")+"&nbsp;",this._months&&0<this._months.length?n.$_month.innerHTML=this._months[h]:n.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",h+1):h+1+"월",r.title=0==h?a-1+"/12":a+"/"+Dt(h),o.title=11==h?a+1+"/01":a+"/"+Dt(h+2),w=this._calendar.$_head.$_cells,y=0;y<7;y++){var l=w[(y+7-this._startWeek)%7];l.innerHTML=E.htmlEncode(this._weekDays[y]),this._useCssStyle&&(l.parentElement.className="rg-cal-week-"+i[y])}this._calendar.$_head.$_weeks.style.display=this.isShowWeeks()?"":"none";var n=this._calendar.$_body,d=n.$_yearweeks;for(y=0,t=d.length;y<t;y++)d[y].style.display=this.isShowWeeks()?"":"none",d[y].onclick=this.isWeekSelectable()?this._yearWeekClickHandler:null;var u,c,_=n.$_rows,f=Lt[At(a)?1:0][h],m=new Date(s),g=(m.setDate(1),(m.getDay()+7-this._startWeek)%7),p=(30==f&&6==g||31==f&&5<=g?E.addChild(n,_[5]):E.removeChild(n,_[5]),28==f&&0==g?E.removeChild(n,_[4]):E.addChild(n,_[4]),0),w=_[0].$_cells,v=d[0];if(0<g)for(var r=a,o=h-1,C=(o<0&&(r--,o=11),Lt[At(r)?1:0][o]),y=0;y<g;y++)(u=w[y]).removeAttribute("title"),m=new Date(this._currDate),u.$_day=y-g,m.setDate(u.$_day+1),c=this._editor.containsRange(m),0===y&&(v.$_yearWeek=to(m,this._startWeek),v.$_span.innerText=v.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,v,c)),u.$_span.innerHTML=C-g+y+1,this._useCssStyle?u.className="rg-cal-day rg-cal-prev-day "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._prevBackground,border:this._nullBorder,color:c?this._prevColor:this._nullColor});for(y=g;y<7;y++)(u=w[y]).removeAttribute("title"),u.$_day=p++,u.$_span.innerHTML=p,(m=new Date(this._currDate)).setDate(p),c=this._editor.containsRange(m),0===y&&(v.$_yearWeek=to(m,this._startWeek),v.$_span.innerText=v.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,v,c)),this.$_isFocusedDay(s,p)?this._useCssStyle?u.className="rg-cal-day rg-cal-focusday "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._focusedBackground,border:this._focusedBorder,color:c?this._cellColor:this._nullColor}):this.$_isToday(s,p)?this.useCssStyle?u.className="rg-cal-day rg-cal-today "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._todayBackground,border:this._todayBorder,color:c?this._cellColor:this._nullColor}):(e=this._holidays&&this._holidays.contains(m),this._useCssStyle?u.className="rg-cal-day "+(c?"":"rg-cal-disable-day ")+(e?"rg-cal-holiday ":"")+"rg-cal-week-"+i[(y+this._startWeek)%7]:e&&c?E.setStyles(u,{background:e.styles().background().css(),border:this._cellBorder,color:e.styles().foreground().css()}):E.setStyles(u,{background:this._cellBackground,border:this._cellBorder,color:c?this._cellColor:this._nullColor}));for(var x=1;x<6&&p<f;x++)for(w=_[x].$_cells,v=d[x],y=0;y<7;y++)if(p<f)(u=w[y]).removeAttribute("title"),u.$_day=p++,(m=new Date(this._currDate)).setDate(p),c=this._editor.containsRange(m),0===y&&(v.$_yearWeek=to(m,this._startWeek),v.$_span.innerText=v.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,v,c)),u.$_span.innerHTML=p,this.$_isFocusedDay(s,p)?this._useCssStyle?u.className="rg-cal-day rg-cal-focusday "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._focusedBackground,border:this._focusedBorder,color:c?this._cellColor:this._nullColor}):this.$_isToday(s,p)?this._useCssStyle?u.className="rg-cal-day rg-cal-today "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._todayBackground,border:this._todayBorder,color:c?this._cellColor:this._nullColor}):(e=this._holidays&&this._holidays.contains(m),this._useCssStyle?u.className="rg-cal-day "+(c?"":"rg-cal-disable-day ")+(e?"rg-cal-holiday ":"")+"rg-cal-week-"+i[(y+this._startWeek)%7]:e&&c?E.setStyles(u,{background:e.styles().background().css(),border:this._cellBorder,color:e.styles().foreground().css()}):E.setStyles(u,{background:this._cellBackground,border:this._cellBorder,color:c?this._cellColor:this._nullColor}));else for(var I=1;y<7;y++)(u=w[y]).removeAttribute("title"),u.$_day=p++,(m=new Date(this._currDate)).setDate(p),c=this._editor.containsRange(m),u.$_span.innerHTML=I++,this._useCssStyle?u.className="rg-cal-day rg-cal-next-day "+(c?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(y+this._startWeek)%7]:E.setStyles(u,{background:this._prevBackground,border:this._nullBorder,color:c?this._prevColor:this._nullColor})},$_refreshItems:function(){},$_search:function(t){},onMonthPickerCloseUp:function(t,e){e-=this._currDate.getMonth();e&&(Vt(this._currDate,e),this.$_buildCalendar()),this._editor.setFocus()}}),kd=(Td.CLOSE_UP="onDatePickerCloseUp",e("MonthPicker",le,{init:function(t,e,i){this._super(),this._useCssStyle=i,this._mouseoverHandler=function(t){t=t.currentTarget;t.style.background="rgba(0, 0, 0, 0.9)",t.style.color="#fff"}.bind(this),this._mouseoutHandler=function(t){t=t.currentTarget;t.style.background="",t.style.color=""}.bind(this),this._clickHandler=function(t){t.preventDefault(),t.stopImmediatePropagation();t=t.currentTarget,t=E.getChildIndex(t);0<=t&&(this._month=t,this.fireEvent(kd.CLOSE_UP,this._month)),this.hide()}.bind(this),this._months=t._months,this._dom=new E(this.$_createPicker()),this._container=null,this._listElement=e},month:-1,listElement:null,show:function(t,e,i,n){var s;(this._container=t)&&(t.appendChild(this._dom._element),t=this._dom.getBounds(),s=E.getScrolled(),n&&this._listElement&&(n=this._listElement.getBoundingClientRect().width,e=B(this._listElement.style.left.replace("px",""))+n/2,i=B(this._listElement.style.top.replace("px",""))),e=Math.max(s.sx,e-t.width-2),i=Math.max(s.sy,i-t.height/2+13),this._dom.move(e,i))},hide:function(){this._dom.detach(),this._container=null},isListing:function(){return this._container&&this._container.contains(this._dom._element)},$_createPicker:function(){var t=E.createElement("div",{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",zIndex:3001});this._useCssStyle?t.className="rg-cal-month-picker":E.setStyles(t,{margin:"0px",cursor:"default",background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"}),t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),t.tabIndex=-1;for(var e=1;e<=12;e++){var i=E.createElement("div",{position:"relative",float:"none"}),n=(this._useCssStyle?i.className="rg-cal-month-picker-item":E.setStyles(i,{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",fontFamily:"Verdana",fontSize:"11px",textAlign:"center",cursor:"default"}),i.tabIndex=-1,E.disableSelection(i),t.appendChild(i),i.onclick=this._clickHandler,i.onmouseup=this._clickHandler,i.onmouseover=this._useCssStyle?null:this._mouseoverHandler,i.onmouseout=this._useCssStyle?null:this._mouseoutHandler,E.createElement("span"));n.innerHTML=E.htmlEncode((this._months?this._months[e-1]:e)+" "),n.tabIndex=-1,E.disableSelection(n),i.appendChild(n)}return t}})),Dd=(kd.CLOSE_UP="onMonthPickerCloseUp",e("BTDateCellEditor",dd,{init:function(t,e){this._super(t,e),this._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,this._date=null,this._closing=!1,this._borderable=!1,this._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}.bind(this)},destroy:function(){return this._destroying=!0,this._globalMouseHandler=null,this._super()},list:null,btOptions:null,textReadOnly:!1,editFormat:null,minDate:new Date(1970,0,1),maxDate:new Date(2100,11,31),dropDownPosition:fd.BUTTON,dropDownWhenClick:!1,commitOnSelect:!1,setMinDate:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},setMaxDate:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},editFormat_:function(){return this._datetimeFormat},setEditFormat:function(t){this.setDatetimeFormat(t)},$_listDestroy:function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),this._editor.focus({preventScroll:!0}),t.removeChild(this._list._element),this._list.destroy(),delete this._list)},initOptions:function(){this._super(),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},_isDateEditor:function(){return!0},setEditValue:function(t){this._super(t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_valToStr(t)},setCellEditValue:function(t,e){this._super(t,e)},getEditValue:function(t,e){var t=this._super(t),i=this._editField().dataType();return t&&e&&(i==S.DATE||i==S.DATETIME)&&(t=this._minDate?Math.max(this._minDate,t):t,t=(t=this._maxDate?Math.min(this._maxDate,t):t)&&new Date(t)),t},isListing:function(){return!!this._list&&this._list.isListing()},hasButton:function(){return!0},containElement:function(t){return this.isListing()&&this._list._element.contains(t)},dropDown:function(){var t,e;return!(this.isReadOnly()||this._controller._readOnly||this.isListing()||this._closing||(t=this._grid,e=this._options._useCssStyle||this._options._useCssStyleDatePicker,(t=this._list=new Bd(t._container,this,e,this._btOptions)).addListener(this),e=E.getBounds(this._container),t.setViewGridInside(this._options&&this._options._viewGridInside),t.setDropDownPosition(this._dropDownPosition),t.setMinDate(this._minDate),t.setMaxDate(this._maxDate),this._weekDays&&0<this._weekDays.length&&t.setWeekDays(this._weekDays),this.$_setListDate(),t.setListZIndex(this.getListZIndex()),t.show(z.documentElement,e.cx-1,e.cy+e.height,this._cellBounds.width,E.getBounds(this._editor)),it?W.addEventListener("mousedown",this._globalMouseHandler):W.attachEvent("onmousedown",this._globalMouseHandler),0))},closeUp:function(t){if(this.isListing()){this._closing=!0;try{it?W.removeEventListener("mousedown",this._globalMouseHandler):W.detachEvent("onmousedown",this._globalMouseHandler),t&&this._list.isSelected()&&(this.$_selectDate(this._list.date()),this._commitOnSelect)&&this._dispatchCommit()}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},buttonClicked:function(t){this.isListing()?this.closeUp(!1):this.dropDown()},dropDownList:function(t){this.dropDown(t)},closeList:function(t){this.closeUp(t)},$_setListDate:function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue(t)),(t=this._dateConverter.getDateNull(t))&&this._list.setDate(t)},selectDate:function(t){this.$_selectDate(t)},$_selectDate:function(t){var e;t&&t!=this._date?(this._date=t,this.containsRange(t)&&(e=this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged())):void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer()):"",this._doChanged())},containsRange:function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},_requestStart:function(t){return!!this._super()&&(!1!==t&&this.dropDown(),!0)},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(t){this._requestStart(t)},_keyDownHandler:function(t){var e=this._list,i=this.isListing()&&e.isFocused();switch(t.keyCode){case p.ENTER:if(this.closeUp(!0))return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);break;case p.ESCAPE:if(this.closeUp(!1))return t.preventDefault(),t.stopImmediatePropagation(),!0;break;case p.HOME:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.firstDay()),!0;break;case p.END:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.lastDay()),!0;break;case p.LEFT:case p.RIGHT:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this._list&&this._list.keydown(t),!0;break;case p.PAGEUP:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(-1)),!0;break;case p.PAGEDOWN:if(i)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(1)),!0;break;case p.DOWN:if(t.altKey&&!this.isListing())return this._requestStart(),t.preventDefault(),t.stopImmediatePropagation(),!0;if(this.isListing())return t.preventDefault(),t.stopImmediatePropagation(),i?this._list&&this._list.keydown(t):(this._list.setFocused(!0),this.$_setListDate()),!0;break;case p.UP:if(t.altKey&&this.isListing())return this.closeUp(!1),t.preventDefault(),t.stopImmediatePropagation(),!0;if(this.isListing())return t.preventDefault(),t.stopImmediatePropagation(),!i||e.date().getDate()<=7?this._list.setFocused(!1):this._list&&this._list.keydown(t),!0;break;case p.T:(t.altKey||t.altKey&&t.ctrlKey)&&this.isListing()&&(t.preventDefault(),t.stopImmediatePropagation(),this._list.setDate(new Date),this.$_selectDate(this._list._date))}return this._super(t)},_keyPressHandler:function(t){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar()){if(t.preventDefault(),t.stopImmediatePropagation(),this.isListing())return e.setFocused(!0),this.$_selectDate(e.today()),!0}else{if(Qi&&(t.ctrlKey||0===t.charCode))return void this._super(t);if(zt(t))return;if(!this._regx.test(i))return void t.preventDefault()}this._super(t),t.keyCode&&this.isTextReadOnly&&this.isTextReadOnly()&&t.preventDefault()},$_resetValue:function(){var t,e,i;this.isVisible()&&(t=this._editor.selectionStart,e=this._editor.selectionEnd,i=this._editor.value?this._editor.value.length:0,this._editor.value=this._editor.value.replace(yd,""),(this._editor.value?this._editor.value.length:0)==i?this._editor.setSelectionRange(t,e):this._editor.setSelectionRange(e,e))},setBounds:function(t,e,i,n){this._super(t+=2,e+=2,i-=4,n-=4)},_doChanged:function(){this._started&&this._requestStart(),this._started&&!this._controller._readOnly&&this._controller._editable&&(this._modified=!0,this._dispatchChange())},_dispatchChange:function(){this.isVisible()&&(this.$_resetValue(),this._super())},onDatePickerCloseUp:function(t,e){this.closeUp(e),this.setFocus()}})),Bd=e("BTCalendarList",le,{init:function(t,e,i,n){window.jQuery,this._super(),this._editor=e,this._container=t,this._containerElement=null,this._useCssStyle=i,this._date=new Date,this._btOptions=n,this._dom=new E(this._element=this.$_createList())},destroy:function(){this._editor=null,this._container=null,this._containerElement=null,this._super()},dropDownPosition:fd.BUTTON,date:null,minDate:null,maxDate:null,viewGridInside:!1,listZIndex:3e3,setDate:function(t){return t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.isListing())&&(t=t instanceof Date?new Date(t.getFullYear(),t.getMonth(),t.getDate()):t)&&window.jQuery&&jQuery(this._dom._element).datepicker("update",t),this._date},$_destroy:function(){window.jQuery&&jQuery(this._dom._element).datepicker("destroy")},isSelected:function(){return this._selected},isFocused:function(){return this._focused},setFocused:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._useCssStyle)},keydown:function(t){window.jQuery&&(jQuery(this._dom._element).datepicker("keydown",t),(t=jQuery(this._dom._element).data("datepicker").viewDate)instanceof Date)&&(this.setDate(t),this._editor)&&this._editor.selectDate(this._date)},$_createList:function(){var t=E.createElement("div",{position:"absolute",float:"none",clear:"both",boxSizing:"border-box",margin:"0px",overflow:"auto",zIndex:3e3});return t.tabIndex=-1,this._useCssStyle?t.className="rg-calendar":E.setStyles(t,{cursor:"default",background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",padding:"0px"}),t},isListing:function(){return window.jQuery&&jQuery(this._dom._element).data("datepicker")},show:function(t,e,i,n,s){if(this._containerElement=this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,n,s)},$_createCalendar:function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!window.jQuery&&(jQuery(e).datepicker&&jQuery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){t=t.date;t&&!this._editor.containsRange(t)||(this._date=t?new Date(t):void 0,this._selected=!0,this.fireEvent(Td.CLOSE_UP,!0))}.bind(this)),!0)},$_show:function(t,e,i,n){this.setFocused(!1),this._selected=!1,this._dom.setStyles({zIndex:this._listZIndex}),this._containerElement.appendChild(this._dom.element());var s=this._date,s=(s instanceof Date&&"Invalid Date"!=s||(s=null),this._currDate=s?new Date(s):new Date,fn()),r=E.getBounds(this._containerElement),o=E.getBounds(this._container._container),a=s.width,s=s.height,h=this._dom.getBounds(),l=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(s-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=o.left-r.left,e+=o.top-r.top,(dn||an||hn)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+h.height>s+d&&(e=e-n.height-h.height)<0&&(e=s-h.height-2),this._dropDownPosition!=fd.EDITOR?t=Math.max(0,t+i-h.width):t+h.width>a+l&&(t=a-h.width),this._viewGridInside&&(e=n.bottom-r.top+2,r.bottom<n.bottom+h.height||s+d<n.bottom+h.height)&&(e=n.top-h.height-r.top-2),this._dom.move(Math.max(0,t),Math.max(0,e))},today:function(){return this.setDate(new Date)},incDay:function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.setDate(e)},incMonth:function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&Vt(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.setDate(e)},firstDay:function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.setDate(t)},lastDay:function(){var t,e,i=new Date(this._currDate);return this._date&&(e=i.getFullYear(),t=i.getMonth(),e=Lt[At(e)?1:0][t],i.setDate(e)),this.setDate(i)}}),Od=e("DefaultEditController",null,{init:function(t){this._super(),this._grid=t,this._editIndex=new $,this._editors=[],this._starting=!1,this._editRow=-1,this._editor=null,this._editState=I,this._modified=!1,this._commiting=!1,this._canceling=!1,this._resetting=!1,this._dirty=!1,this._editable=!1,this._readOnly=!1,this.$_editFocused=!1,this._defaultEditor=t.delegate().createDefaultCellEditor(),this._defaultEditor.setController(this),this._internalHideEditor(this._defaultEditor),this._showEditorTimer=null},destroy:function(){this._destroying=!0,this._grid=null,this._defaultEditor=null,this._editor=null,this._editors=null,this._super()},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return this._editor&&this._editor.isEditing()},setFocus:function(t){this.$_focusToEditor(t)},resetEditor:function(t){if(this.isEditing())if(this._grid.isValid(this._editIndex)){if(this._resetBounds(!1),t&&this.isEditing()){t=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(t),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor()},reprepareEditor:function(t){$.areEquals(t,this._editIndex)&&(this.isEditing()?this._editor.selectAll():this._prepareEditor(t))},invalidateEditor:function(){this._dirty=!0},closeList:function(t){this._editor&&this._editor.closeList(t)},focusedIndexChanging:function(){return!this.isEditing()||(this.closeList(!0),this.commitEditor(!0))},focusedIndexChanged:function(t,e){this._hideEditor(),this._grid.isValid(e)&&this._prepareEditor(e)},dataColumnChanged:function(t){t&&this._editor&&this._editIndex&&this._editIndex.dataColumn()===t&&(t=!t.isEditable()||t.isReadOnly())!=(!this._editable||this._readOnly)&&(this.isEditing()?this._editor.setReadOnly(t):this._prepareEditor(this._editIndex))},showEditor:function(t,e){var i=this._grid;if(i&&i.isValid(t)){if(this._editor&&this._editor.isEditing())return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.isEditing())return this._showEditorTimer||this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)}return!1},caretToLast:function(){this._editor&&this._editor.caretToLast()},hideEditor:function(){if(this.isEditing()){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},commitEditor:function(t,e){if(!this.isEditing()||this._commiting)return!0;var i,n,s,r=this._grid.editOptions(),o=this._editIndex,a=o.dataColumn(),h=!0,l=this._editor,d=l&&l._mask;this._commiting=!0;try{if(l.commit(),(this._modified||l.isEdited())&&a&&0<=a.dataIndex())try{try{(s=d&&!d.checkValid()?hd.InvalidFormat:l.getEditValue(!0,!0))===hd.InvalidFormat?(h=!1,r.isShowInvalidFormatMessage()&&d&&d.isShowInvalidFormatMessage()&&alert(d&&d.invalidFormatMessage()||r.invalidFormatMessage())):h=s===hd.Unselected?!(this._modified=!1):(n={text:l.getEditText(),value:s},this._grid.getEditValue(l,o,n),s=n.value,this._grid.editorCommit(l,o,this._getData(o),s))}catch(t){_t(t.message||t),h=!1}this._grid.isItemEditing()?h&&s!==hd.Unselected&&(this._setData(o,s),this._grid.isItemEditing(o.item())&&(s=this._getData(o),this._grid.validateCellCommit(o,s)),this._modified=!1):this._modified=!1}catch(t){i=t,h=!1}if(this._resetting=!0,t)try{this._internalHideEditor(l),this._prepareEditor(o)}finally{this._resetting=!1}if(i){if(_t(i.message||i),e)throw i;alert(i.message||i)}}finally{this._commiting=!1}return h},cancelEditor:function(t){if(this.isEditing()){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}}},fillSearchItems:function(t,e,i,n){this.isEditing()&&this._editIndex.column()===t&&this._editor instanceof Cd&&this._editor.fillItems(e,i,n)},buttonClicked:function(t){this._editor&&$.areEquals(this._editIndex,t)&&this._editor.hasButton()&&this._editor.buttonClicked(this._editIndex)},$_focusToEditor:function(t){(t||this._grid.$_editFocused)&&(this._grid._container._setFocusAndScroll(this._editor||this._defaultEditor),this.isEditing()||this._editor&&this._editor.selectAll())},$_focusToContainer:function(){},_internalHideEditor:function(t){this.closeList(!1),t.setVisible(!1),t.endEdit(),this._grid._loading||this._grid._fireHideEditor(t._editIndex)},$_hideEdit:function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},$_getCellEditor:function(t){t=this._grid.delegate().getCellEditor(t);return t&&t.setController(this),t},getCellEditor2:function(t){var e=this._grid,i=t.column(),n=this._grid.delegate().getCellEditor(t),e=(t.item()&&e.body().getCell(t),e.getCellEditorOptions(t)||i.editorOptions());return n.initOptions(),e&&this._editor.applyOptions(e),n},_prepareEditor:function(t){var e,i,n,s,r,o,a,h;this._dirty=!1,this._grid.isValid(t)&&(this._hideEditor(),this._editor=this.$_getCellEditor(t),this._editor)&&(this._editIndex.assign(t),this._editor.setReadOnly(!1),i=(e=this._grid).editOptions(),s=e.editorOptions(),a=t.dataColumn(),h=(n=t.item()).itemState(),o=H.isInserting(h)?-1:t.dataRow(),o=e.itemSource().getCellStyle(o,t.dataField()),r=e.canEdit(t),o&&(r=o.isEditable(r)),s._titleExprStatement&&this._editor.setEditorTitle(t),r?(s=o?o.isReadOnly():void 0,r=jt(null,a.editorOptions(),e.getCellEditorOptions(t)),void 0===s&&void 0===(s=e.getCellReadOnly(t))&&(s=i.isReadOnly()||a.isReadOnly()||!H.isInserting(h)&&!e.canUpdate(n,t.dataField())),this._editor.initOptions(),r&&this._editor.applyOptions(r),a=(o=n.dataSource())?o.getField(t.dataField()):null,this._readOnly=s||!a||!a.isUpdatable()||!t.dataColumn()||a.dataType()==S.OBJECT,this._editor.setEditIndex(t),this._editable=!0,this._editor.clear(),h=this._getData(t),this._editor.setEditValue(h),this._editor.selectAll(),i.isEditWhenFocused()&&!this._editor.isEditing()?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||(this._showEditorTimer=setTimeout(function(){e.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),this.$_focusToEditor()):this.$_hideEdit(t,this._editor))},_applyCellFont:function(){var t=this._grid;t.editorOptions().isApplyCellFont()&&(t=t.body().getCell(this._editIndex).styles(),this._editor.setFontFamily(t.fontFamily()),this._editor.setFontSize(t.fontSize()+"px"))},_hideEditor:function(){if(this._editor)try{this._editor.clear(),this._editor.setVisible(!1)}finally{this._editor.endEdit(),this._editor=null,this._editable=!1,this.$_focusToEditor()}},_initEditor:function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var n=this._editor;n&&(n.endEdit(),this._applyCellFont(),this._resetBounds(),n.setVisible(!0),n.beginEdit(t,e),t&&n.clear(),e&&n.selectAll(),i&&n.dropDownList&&n.dropDownList(),this.$_focusToEditor(!0))},_setEditAttribute:function(t){var e=this._editor;if(e){for(var i in t)"callback"!==i&&e._editor.setAttribute(i,t[i]);t.callback&&"function"==typeof t.callback&&t.callback()}},_editorActivated:function(t){this._grid.editorActivated(t)},_activateEditor:function(t,e,i){var n=this._grid,s=this._editor,r=this._editIndex,o={};return!(!this._editable||!s||s.isEditing()||!n.canShowEditor(r,o)||(s.isTextReadOnly&&s.isTextReadOnly()?s.isTextReadOnly&&s.isTextReadOnly()&&s._editor&&(s._editor.readOnly=s.isTextReadOnly()):s.setReadOnly(this._readOnly),this._initEditor(t,e,i),this._modified=!1,this._editorActivated(this._editor),this._setEditAttribute(o),0))},_resetBounds:function(){var t;this._editor&&((t=this._grid.getEditBounds(this._editIndex)).x--,t.y--,t.width++,t.height++,sn&&t.right()>this._grid.width()+3?this._editor.setBounds(t.x+1e4,t.y,0,0):this._editor.setBounds(t.x,t.y,t.width,t.height),t=this._grid.getEditCellBounds(this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0)&&(this._resetFocused=!0)},_getData:function(t){var e=t.item();if(e){t=t.column().dataIndex();if(0<=t)return e.getData(t)}},_setData:function(t,e){var i=t.item();if(i){t=t.column().dataIndex();if(0<=t)return i.setData(t,e)}},_isEditKey:function(t){return 8==t||46<=t&&t<=90||96<=t&&t<=111||186<=t&&t<=222||t==p.ENTER&&this._grid.editOptions().isEnterToEdit()},onEditorStart:function(t){if(!t.isVisible()&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},onEditorKeyDown:function(t,e,i,n,s){return this._editor&&(this._editor.isTextReadOnly&&this._editor.isTextReadOnly()||i||s||!this._isEditKey(e)?this._editor.isTextReadOnly&&this._editor.isTextReadOnly()?this._editor._editor.readOnly=this._editor.isTextReadOnly():229==e&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool().keyDown(e,i,n,s)},onEditorKeyUp:function(t,e,i,n,s){return this._grid.activeTool().keyUp(e,i,n,s)},onEditorKeyPress:function(t,e){return this._grid.activeTool().keyPress(e)},onEditorChange:function(t){this._modified||(this._modified=!0,this._grid._editorStarted(this._editor,this._editIndex)),this.isEditing()&&(this._grid.makeCellVisible(this._editIndex),this._grid._editorChange(this._editor,this._editIndex,this._editor.getEditValue(!1,!1)))},onEditorSearch:function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},onSearchCellButtonClick:function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},onEditorCommit:function(t){this.commitEditor(!0)}}),Ji=e("GridTool",os,{init:function(t,e){this._super(t,e),this._grid=t.gridView(),this._focusView=new Nd(this.grid()._dom,this._grid.displayOptions()),this._rowFocusView=new Ld(this.grid()._dom,this._grid.displayOptions()),this._innerFocusView=null,this._tipCell=null,this._tipIndex=null,this._tipButton=-1,this._tipOptions=new Mo,this._touchManager=new hs(t),this._tapTracker=null,this._swipeTimer=null,this._swipeDistance=0,this._swipeDuration=0,this._swipeStarted=null,this._swipePrev=void 0,this._swipeAmount=0,this._tapX=this._tapY=NaN,this._touchManager.setTouchHandler(function(t,e,i){return this.onTouch(t,e,i)}.bind(this)),this._touchManager.setTapHandler(function(t,e){return this.onTap(t,e)}.bind(this)),this._touchManager.setDoubleTapHandler(function(t,e){return this.onDoubleTap(t,e)}.bind(this)),this._touchManager.setLongTapHandler(function(t,e){return this.onLongTap(t,e)}.bind(this)),this._touchManager.setDragStartHandler(function(t,e,i,n){return this.onDragStart(t,e,i,n)}.bind(this)),this._touchManager.setDragHandler(function(t,e,i,n){return this.onDrag(t,e,i,n)}.bind(this)),this._touchManager.setSwipeHandler(function(t,e,i){return this.onSwipe(t,e,i)}.bind(this))},destroy:function(){this._destroying||(this._destroying=!0,this._grid=null,this._focusView&&this._focusView.destroy(),this._focusView=null,this._rowFocusView&&this._rowFocusView.destroy(),this._rowFocusView=null,this._innerFocusView&&this._innerFocusView.destroy(),this._innerFocusView=null,this._tipCell=null,this._tipIndex=null,this._tipOptions&&this._tipOptions.destroy(),this._tipOptions=null,this._touchManager&&this._touchManager.destroy(),this._touchManager=null,this._super())},focused:null,grid:function(){return this._grid},touchManager:function(){return this._touchManager},focused_:function(){return this._grid.focusedIndex()},setFocused:function(t,e){var i,n;return!!this._grid.isValid(t)&&(n=(i=this._grid).getItem(t.itemIndex()),!i.isEditing()&&n instanceof Xr&&i.append(),this._grid.setFocusedIndex(t,e,!0))},_doKeyDown:function(t,e,i,n,s){ft("selectionTool K E Y: "+t);var r=this.grid(),o=r.layoutManager(),a=r.editOptions(),h=a.isSkipReadOnly(),l=a.isSkipReadOnlyCell(),d=this.focused(),u=a.verticalMovingStep(),c=(d._verticalStep=u,d.clone());if(!r._fireKeyDown(t,e,i,n))return!0;if(!r._focusedCheckIndex&&Fc.consumeKey(c,t,e,i))return!0;if(r.closeFilterSelector(),a&&a.isCheckWhenSpace()&&t==p.SPACE&&r._focusedCheckIndex){n=r.checkBar().getCell(r._focusedCheckIndex);if(n)return this._checkCellClicked(n),_e()&&s.preventDefault&&s.preventDefault(),!0}r._focusedCheckIndex&&(r._focusedCheckIndex=void 0,(f=r.checkBar())._dirty=!0,f.invalidate());n=r.popupMenuManager();if(n.isShow()&&Tt(t,p.LEFT,p.UP,p.DOWN,p.RIGHT,p.ENTER,p.SPACE))return n.keyDown(t),!0;if(t==p.ESCAPE)r.closePopups(),this._doCancel(r);else{if(t==p.ENTER)return this._doEnter(r,a,c);if(t==p.TAB)return this._doTab(r,a,c,e,i,s);if(t==p.F2)!r.isEditing()&&c&&c.dataColumn()&&r.showEditor(c,i);else if(t==p.INSERT)a.isAppendWhenInsertKey()||0==r.itemCount()?r.append():r.insert(c.item(),i,e);else{if(t==p.DELETE)return e&&i?(r.revertSelection(),!0):!!e&&(r.deleteSelection(),!0);if(t==p.BACK)return!1;if(Tt(t,p.HOME,p.END,p.RIGHT,p.LEFT,p.DOWN,p.UP,p.PAGEDOWN,p.PAGEUP)){n=r.itemCount();if(_e()&&s&&s.preventDefault&&s.preventDefault(),t==p.DOWN&&0==n)return void r.append();if(r.isValid(c)){if(!((Tt(t,p.DOWN,p.PAGEDOWN)||t==p.END&&e)&&c.isBottom()&&this.$_checkAppending(c)||(Tt(t,p.UP,p.PAGEUP)||t==p.HOME&&e)&&c.isTop()&&this.$_checkAppending(c,!0))){switch(t){case p.HOME:if(e){var _=c.clone();if(c.first(),h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnlyCell(c,1,_)){c.assign(d);break}}else c.home(),this.$_skipReadOnly(c,1);break;case p.END:if(e){_=c.clone();if(c.last(),h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnlyCell(c,-1,_)){c.assign(d);break}}else c.end(),this.$_skipReadOnly(c,-1);break;case p.RIGHT:c.right(),h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnly(c,1)&&c.assign(d);break;case p.LEFT:if(c.left(),a&&a.isCheckWhenSpace()&&$.areEquals(c,d)){var f,m=(f=r.checkBar())&&f.getCell(c);if(m&&m.index().item().isCheckable()){r._focusedCheckIndex=m?m._index.clone():null,f._dirty=!0,f.invalidate();break}}h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnly(c,-1)&&c.assign(d);break;case p.DOWN:try{if(c.I()!=r.itemCount()-1||!c.isBottom()&&u!=Hs.ROW){if(e)return r.setTopIndex(r.topIndex()+1),!0}else{if(c.isBottom()&&this.$_commitCancel(c.item(),a))return!0;r.append()}c.down(r.isItemEditing(c.item()))}finally{l&&this.$_checkReadOnly(c)&&(this.$_skipReadOnlyCell(c,1)||c.assign(d))}break;case p.UP:try{if(0==c.I()&&c.isTop()){if(this.$_commitCancel(c.item(),a))return!0;c.up()}else{if(e)return r.setTopIndex(r.topIndex()-1),!0;c.up(r.isItemEditing(c.item()))}}finally{l&&this.$_checkReadOnly(c)&&(this.$_skipReadOnlyCell(c,-1)||c.assign(d))}break;case p.PAGEUP:if(e)return r.setTopIndex(r.topIndex()-o.fullItemCount()),!0;_=c.clone();c.incRow(-o.fullItemCount()),h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnlyCell(c,1,_)&&c.assign(d);break;case p.PAGEDOWN:if(c.I()==r.itemCount()-1&&c.isBottom()&&H.isInserting(c.item().itemState()))return r.commit(a.isForceAppend()),!0;if(e)return r.setTopIndex(r.topIndex()+o.fullItemCount()),!0;_=c.clone();c.incRow(o.fullItemCount()),h&&this.$_checkReadOnly(c)&&!this.$_skipReadOnlyCell(c,-1,_)&&c.assign(d)}i&&0<r.selections().count()?(this.setFocused(c,!1),r.selections().getItem(0).resizeTo(c)):this.setFocused(c,!0)}}else c.normalize(r),this.setFocused(c,!0);return!0}c.item()instanceof Xr&&r.append()}}return!1},_doKeyUp:function(t,e,i,n){ft("selectionTool KeyUp KEY: "+t+",ctrl="+e+",shift="+i+",alt="+n),this.grid()._fireKeyUp(t,e,i,n)},_doKeyPress:function(t){ft("selectionTool KeyPress"),this.grid()._fireKeyPress(t)},_stopTapTracker:function(t){if(this._tapTracker)try{t?this._tapTracker.drop(x,y):this._tapTracker.cancel()}finally{this._tapTracker=null}},onTouch:function(t,e,i){clearInterval(this._swipeTimer),this._stopTapTracker(!1),this._hideTooltip();var n=this._grid,t=(_e()&&t.target===n._container._canvas&&!n.$_editFocused&&n._container._canvas.focus(),n.closePopups(),this._clickCell=this._clickHandle=null,this._clickElement=this.findElementAt(e,i,!1));return this._clickHandle=b(t,Va),this._clickCell=b(t,Ya),t instanceof sc?new Lu(n,t):t instanceof nc?new hc(t):void(0 instanceof ic)},onTap:function(t,e){if(on&&this._touchManager){var i=gt();if(this._touchManager._touchEndt+50>i)return}var n,s,r,o,a,h,l,d,i=this._grid,u=i.selectOptions().mode(),c=i.selectOptions().style(),_=i._selections,f=this._clickCell,m=this._clickElement,g=f?f.index():null,p=f?g.column():null;this._hideTooltip(),_.clear(),i.closeFilterSelector(),f instanceof bh?(g.normalize(i),this.setFocused(g,!0),o=f.mouseX(),a=f.mouseY(),n=-1,h=f.isFocused(),r=f._renderer,h&&(f.ptInButton(o,a)?(n=f.getPtInButtonIndex(o,a),d=this.cellButtonClicked.bind(this)):f.ptInDataButton(o,a)?(n=f.getPtInDataButtonIndex(o,a),s=r&&r instanceof qc&&r._images[n]?r._images[n].name:void 0,d=this.imageButtonClicked.bind(this)):f.ptInEditButton(o,a)?d=this.editButtonClicked.bind(this):r&&(r instanceof Yc||r instanceof Vc)&&this._performRendererClick(g,f,t,e,!1,!0)),h&&d&&d(g,n,s),r.isShowTooltip()&&this._grid.mobileOptions().isShowTooltip()&&(l=this._grid.toolTipManager())&&(0<l._hintDuration?(l._showTimer&&clearTimeout(l._showTimer),l._showTimer=setTimeout(function(){this._showTooltip2(f)}.bind(this),l._hintDuration)):this._showTooltip2(f)),this.dataCellClicked(g)):m instanceof za?(o=i.popupMenuManager(),(h=(a=this._clickElement.parent()).column().header()._popupMenuName)&&o.show(h,a,t,e,0,0)):m instanceof Ua?this._columnHeaderImageClicked(m.cellView().column()):m instanceof $a?m.cellView().column().setChecked(!m.cellView().column().isChecked()):f instanceof Za&&f.isClickable()?(f.parent()instanceof ka||f.parent()instanceof Ja?this._columnHeaderClicked(f.index().column()):f.parent()instanceof qu&&this._rowGroupPanelClicked(f.index().column()),!i.isEmpty()&&p instanceof M&&p.isSortable()&&i.sortingOptions().isEnabled()?i.sortColumn(p):this._grid.mobileOptions().isShowTooltip()&&(l=this._grid.toolTipManager())&&(0<l._hintDuration?(l._showTimer&&clearTimeout(l._showTimer),l._showTimer=setTimeout(function(){self._showHeaderTooltip2(f)}.bind(self),l._hintDuration)):this._showHeaderTooltip2(f))):m instanceof Su?m.model&&m.model().run(i,g):m instanceof ph?(this._indicatorCellClicked(g.I()),i.indicator().isSelectable()&&(null==(d=$.temp(i,g.I(),g.column())).C()&&d.item()instanceof Ar&&(p=i.focusedIndex()&&i.focusedIndex().C(),d.column(p||i.getFirstColumn())),g.assign(d),this.setFocused(g,!0),u!=ks.NONE)&&c!=G.NONE&&_.add(g,g,G.ROWS)):m instanceof ah?this._indicatorCellClicked(-1):m instanceof hh?this._indicatorCellClicked(-2):m instanceof Ih?this._checkCellClicked(m):m instanceof fh?this._checkAllClicked(m):m instanceof mh?this._checkBarFootClicked(f):m instanceof wh?this._stateBarCellClicked(f.index().itemIndex()):m instanceof uh?this._stateBarCellClicked(-1):m instanceof ch?this._stateBarCellClicked(-2):m instanceof Mh?this._rowGroupHeadClicked():m instanceof Fh?this._rowGroupFootClicked():m instanceof Lh?this._rowGroupHeaderFooterClicked(-1,m.index()):m instanceof rh?this._rowGroupHeaderFooterClicked(-2,m.index()):m instanceof Th?this._rowGroupBarClicked(m.level()):m instanceof Dh?this._rowGroupBarClicked(-1):m instanceof Bh?this._rowGroupBarClicked(-2):m instanceof qu?this._panelClicked(0):m instanceof th?this._footerCellClicked(m.index().column()):m instanceof Ga&&i.filteringOptions().isEnabled()?(p=m.parent().column(),i.isFilterSelecting(p)?i.closeFilterSelector():i.selectColumnFilters(m.parent())):m instanceof Du||(m instanceof Wa?i.removeGroupBy(m.cellView().column()):null==m&&this._bodyEmptyClicked())},onLongTap:function(t,e){var i=this._grid,n=this._clickCell,s=this._clickElement,r=n?n.index():null,o=n?r.column():null;if(s instanceof bh||s instanceof Du){if(s instanceof Du&&(n=i.getFocusedCellView(),o=(r=i.focusedIndex()).column()),o.button()!=Cs.NONE&&n._getButtonVisible(o.buttonVisibility()))return this.cellButtonClicked(r),!1;(a=o.rendererObj())&&(a instanceof Yc||a instanceof Vc)&&this._performRendererClick(r,n,t,e,!1,!0)}else if(s instanceof Za&&s.parent()instanceof qu&&i.groupingOptions().isEnabled()&&r.dataColumn()&&r.dataColumn().isGroupable()&&i.panel().isVisible()){var a=i.panelView();if(a)return a.setState(Ku.UNGROUPING),i.isGrouped(o)&&i.removeGroupBy(o),a.setState(Ku.NORMAL),!1}return!0},onDoubleTap:function(t,e){var i,n=this.focused();this._clickElement instanceof bh?(this.dataCellDblClicked(this._clickElement.index()),(i=this._clickElement.index()).isValid()&&!this._grid.isEditing()&&this._clickCell instanceof bh&&$.areEquals(i,n)&&this._grid&&this._grid.showEditor(i.clone())):this._clickElement instanceof Lh?(n=b(this._clickElement.item(),Vr))&&n.setExpanded(!n.isExpanded()):this._clickElement instanceof Za?this._clickElement.parent()instanceof ka?this._grid._fireColumnHeaderDblClicked(this._clickElement.index().column()):this._grid._fireRowGroupPanelDblClicked(this._clickElement.index().column()):this._clickCell instanceof th?this._clickCell.error()?this._grid.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._grid._fireFooterCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof rh&&this._clickCell.error()?this._grid.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._clickCell instanceof ah?this._grid._fireIndicatorCellDblClicked(-1):this._clickCell instanceof hh?this._grid._fireIndicatorCellDblClicked(-2):this._clickCell instanceof uh?this._grid._fireStateBarCellDblClicked(-1):this._clickCell instanceof ch?this._grid._fireStateBarCellDblClicked(-2):this._clickCell instanceof wh?this._grid._fireStateBarCellDblClicked(this._clickCell.index().itemIndex()):this._clickCell instanceof mh?this._grid._fireCheckBarFootDblClicked(-2):this._clickCell instanceof Mh?this._grid._fireRowGroupHeadDblClicked():this._clickCell instanceof Fh?this._grid._fireRowGroupFootDblClicked():this._clickCell instanceof Lh?this._grid._fireRowGroupHeaderFooterDblClicked(-1,this._clickCell.index()):this._clickCell instanceof rh?this._grid._fireRowGroupHeaderFooterDblClicked(-2,this._clickCell.index()):this._clickCell instanceof Th?this._grid._fireRowGroupBarDblClicked(this._clickCell.level()):this._clickCell instanceof Dh?this._grid._fireRowGroupBarDblClicked(-1):this._clickCell instanceof Bh?this._grid._fireRowGroupBarDblClicked(-2):this._clickElement instanceof qu?this._grid._firePanelDblClicked(0):null==this._clickElement&&this._grid._fireBodyEmptyDblClicked()},onDragStart:function(e,i,n,s){var t=this._clickElement,r=null,o=this._grid,a=o.selectOptions().mode(),h=o.selectOptions().style(),l=o.mobileOptions().isHeaderToScroll();if(t instanceof bh||t instanceof Za&&l){let t=!0;Math.abs(e-n)<Math.abs(i-s)&&(i-s<0?t=0<o.getTopItem():0<i-s&&(t=o.getTopItem()+o._layoutManager.fullItemCount()<o.itemCount())),r=t&&new Ou(this._grid)}else t instanceof ph&&o.indicator().isSelectable()&&a!=ks.NONE&&h!=G.NONE&&h!=G.SINGLE_ROW?(null==(l=this._clickElement.index().clone()).C()&&l.item()instanceof Ar&&(a=o.focusedIndex()&&o.focusedIndex().C(),l.column(a||o.getFirstColumn())),this.setFocused(l,!0),r=new Mu(this._grid,t)):t instanceof Za?r=new Fu(this._grid,t):t instanceof Du?r=new Nu(this._grid,t):0 instanceof sc;return r&&r.start(e,i,n,s)&&(this._tapTracker=r),this._tapTracker},onDrag:function(t,e,i,n){var s,r=this._tapTracker;return r&&!(s=r.drag(t,e,i,n))&&(r.cancel(),this._tapTracker=null),s},onSwipe:function(t,e,i){if(this._clickElement instanceof bh){var n=this._grid,s=1;switch(i){case"right":n.setLeftPos(n.leftPos()-e/20);break;case"left":n.setLeftPos(n.leftPos()+e/20);break;case"bottom":s=-1;case"top":this._swipeDistance=s*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=gt(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},$_scrollRow:function(){var t,e=gt();e-this._swipeStarted<this._swipeDuration?(t=gt()-this._swipePrev,t=(this._swipeDistance-this._swipeAmount)*t/this._swipeDuration,this._swipeAmount-=t,this._swipePrev=e,this._grid.setTopIndex(this._grid.topIndex()+t)):clearInterval(this._swipeTimer)},layoutChanged:function(){this._doLayoutChanged&&this._doLayoutChanged()},resetFocused:function(){this._resetFocusedView()},focusedIndexChanging:function(t){this._doFocusedIndexChanging&&this._doFocusedIndexChanging(t)},focusedIndexChanged:function(t,e){this._doFocusedIndexChanged&&this._doFocusedIndexChanged(t,e)},columnHeaderDblClicked:function(t){this._grid._fireColumnHeaderDblClicked(t)},footerCellDblClicked:function(t){this._grid._fireFooterCellDblClicked(t)},headerSummaryCellDblClicked:function(t){this._grid._fireHeaderSummaryCellDblClicked(t)},checkBarFootDblClicked:function(){this._grid._fireCheckBarFootDblClicked()},indicatorCellDblClicked:function(t){this._grid._fireIndicatorCellDblClicked(t)},stateBarCellDblClicked:function(t){this._grid._fireStateBarCellDblClicked(t)},rowGroupHeadDblClicked:function(){this.grid()._fireRowGroupHeadDblClicked()},rowGroupFootDblClicked:function(){this.grid()._fireRowGroupFootDblClicked()},rowGroupHeaderFooterDblClicked:function(t,e){this.grid()._fireRowGroupHeaderFooterDblClicked(t,e)},rowGroupBarDblClicked:function(t){this.grid()._fireRowGroupBarDblClicked(t)},panelDblClicked:function(){this.grid()._firePanelDblClicked()},rowGroupPanelDblClicked:function(t){this.grid()._fireRowGroupPanelDblClicked(t)},bodyEmptyDblClicked:function(){this.grid()._fireBodyEmptyDblClicked()},dataCellClicked:function(t){this._grid._fireDataCellClicked(t)},dataCellDblClicked:function(t){this._grid._fireDataCellDblClicked(t)},cellButtonClicked:function(t,e){var i=t.dataColumn(),n=this._grid;if(i){var s=n.layoutManager().getMergedCell(t)?n.getCellView(n._mergeView,t,t.isFixedCol()):b(n.getCellView(null,t),Ya);switch(t=t.clone(),s instanceof Xh&&t.setItemIndex(t.I()+s.innerIndex()),i.button()){case Cs.POPUP:var r=i.menu();r&&s&&n.popupMenuManager().show(r,s);break;case Cs.ACTION:n._fireCellButtonClicked(t);break;case Cs.IMAGE:var r=i._imageButtonsRenderer;r&&0<=e&&e<r._count&&(r=r._images[e].name,n._fireImageButtonClicked(t,e,r))}}},editButtonClicked:function(t){this._grid._fireEditButtonClicked(t)},imageButtonClicked:function(t,e,i){this._grid._fireImageButtonClicked(t,e,i)},_doSetFocus:function(){this.grid().editController().setFocus(!0)},_resetFocusedView:function(){var t,e,i,n,s,r,o,a,h,l,d,u=this._grid,c=u.displayOptions(),_=c.isShowInnerFocus(),f=this.focused(),m=!1,g=!1,p=!1,w=u.layoutManager();c.isFocusVisible()&&u.isValid(f)&&(t=u.getFocusedCellView(f))&&(r=w.fixedColCount(),e=u.isEditing(),i=t.boundsBy(u),t instanceof Vh&&(l=(d=w._rowGroupBounds).x+t._level*u.rowGroup().levelIndent(),i.setLeft(l),i.width=d.width-u.leftPos()-t._level*u.rowGroup().levelIndent()),t instanceof Zh&&(l=t._level-1,h=w.getColumnBounds(l).right()+w.fixedBounds().x,n=w.fixedWidth(),s=u.leftPos(),o=w._editBarBounds,0<r?r<=l?h=Math.max(h+n-s,n+w.fixedBounds().x):l==r-1&&(h=n+w.fixedBounds().x):0==r&&(h-=s),i.x=h,i.width=o.width+o.x-h),0<i.width)&&0<i.height&&(u._container.$_rich&&(i.x++,i.y++),this._focusView.setRect(i),m=!0,t instanceof Xh&&(this._innerFocusView||(this._innerFocusView=new Ad(u._dom,u.displayOptions()),u.addFocusElement(this._innerFocusView)),l=w.itemBounds(t._topIndex),d=w.itemBounds(f.I()-u.topIndex()),t.setInnerIndex(f.I()-t.mergeRoom().headItem()),i.y+=d.y-l.y,i.height=d.height,e||(i.x+=2,i.y+=2,i.width-=5,i.height-=5),_)&&this._innerFocusView&&(this._innerFocusView.setRect(i),this._innerFocusView.setEditing(e,t.getButtonWidth?t.getButtonWidth():0,t._isLeftImageButton),p=!0),p?this._focusView.setEditing(!1,0):this._focusView.setEditing(e,t.getButtonWidth?t.getButtonWidth():0,t._isLeftImageButton)),w._gridBounds&&c.isRowFocusVisible()&&u.isValid(f)&&(n=f.I(),s=u.topIndex(),r=w.fixedItemCount(),o=w.itemCount(),g=n<r||s<=n&&n<=s+o)&&(h=0<r?w.fixedHeight()+u.fixedOptions().rowBarHeight():0,l=w.gridBounds(),n<r?a=w.itemBounds(Math.max(0,n)):(a=w.itemBounds(Math.max(0,n-s))).y=Math.max(a.y,h),a.y+=l.y,a.x=0,a.width=l.x+l.width,u._container.$_rich&&(a.x++,a.y++),this._rowFocusView.setRect(a)),this._focusView.setVisible(m),this._rowFocusView.setVisible(g),this._innerFocusView&&this._innerFocusView.setVisible(p),this._focusView.isVisible()&&u._resetFocusMask(),this._rowFocusView.isVisible()&&u._resetRowFocusMask(),c._rowHoverMask.isVisible()&&(!(d=this._rowHoverView)||!this._rowFocusView.isVisible()||d.$_hoverRow&&d.$_hoverRow.itemIndex()!=f.I()?this._resetRowHoverView():d.setVisible(!1))},$_checkAppending:function(t,e,i){var n=this.grid();if(t.I()==n.itemCount()-1&&H.isInserting(t.item().itemState())){var s=t.I();if(!i||i.index().I()!=s){try{n.commit(n.editOptions().isForceAppend(),!0)?((t=t.clone()).itemIndex(s),n.isValid(t)||t.itemIndex(n.getItemIndexOfRow(n.dataSource().rowCount()-1)),this.setFocused(t,!0)):e&&n.cancel(!0)}catch(t){if(t instanceof Zr)return(t=n._fireValidationFail(s,t.column,t))&&alert(n._editOptions.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof Zt)return!0;throw t}return!0}}return!1},$_checkReadOnly:function(t){var e,i,n,s=this.grid();return!(s.isValid(t)&&(e=t.dataColumn(),"boolean"==typeof(i=s.getCellWritable(t))?i:(n=H.isInserting(t.item().itemState())?-1:t.dataRow(),(s=b(s.itemSource().getCellStyle(n,t.dataField()),Io))&&(n=s.isEditable(),i=s.isReadOnly(),null!=n||null!=i)?(null==n||n)&&!i:e.isWritable())))},checkReadOnly:function(t){return this.$_checkReadOnly(t)},$_skipReadOnly:function(t,e){var i=!1;if(this.grid().editOptions().isSkipReadOnly()){var n=this._skipIndex;if(n.assign(t),!(i=!this.$_checkReadOnly(n)))if(0<e){for(;n.next();)if(!this.$_checkReadOnly(n)){t.assign(n),i=!0;break}}else for(;n.prev();)if(!this.$_checkReadOnly(n)){t.assign(n),i=!0;break}}return i},skipReadOnly:function(t,e){return this.$_skipReadOnly(t,e)},$_skipReadOnlyCell:function(t,e,i){var n=this.grid(),s=t.column(),r=s.checkGroupExist(cs.VERTICAL),o=!s.isWritable()&&!r;if(!o&&n.editOptions().isSkipReadOnlyCell()){var a=this._skipIndex;if(a.assign(t),!(o=!this.$_checkReadOnly(a)))if(0<e)for(;a.lower(n.isItemEditing(a.item()));){if(-1==a.itemIndex||!this.$_checkReadOnly(a)){t.assign(a),o=!0;break}if($.areEquals(a,i)){o=!1;break}}else for(;a.upper(n.isItemEditing(a.item()));){if(-1==a.itemIndex||!this.$_checkReadOnly(a)){t.assign(a),o=!0;break}if($.areEquals(a,i)){o=!1;break}}}return o},_doTab:function(e,i,t,n,s,r){var o=t.clone();if(e.isValid(o)){if(i.isUseTabKey()){var a=i.exitGridWhenTab();if(s){if(i.isCrossWhenExitLast()&&(o.isFirst()||i.isSkipReadOnly()&&o.isEditableFirst())&&0<o.itemIndex()?(o.up(),o.end()):o.prev(),i.isSkipReadOnly()&&!this.$_skipReadOnly(o,-1)&&o.assign(t),$.areEquals(o,t)&&a){switch(a){case"row":e._exiting=!0;break;case"grid":e._exiting=o.itemIndex()<=0}if(e._exiting)return _e()||e._container._canvas.setAttribute("tabindex","-1"),!1}}else{if(i.isCrossWhenExitLast()&&(o.isLast()||i.isSkipReadOnly()&&o.isEditableLast())&&o.I()<e.itemCount()-1)o.down(null,i.isSkipReadOnly()&&o.isEditableLast()&&i.isCrossWhenExitLast()),o.home();else if(i.isCommitWhenExitLast()&&o.isLast()){try{e.commit(i.isCommitWhenNoEdit())}catch(t){throw t instanceof Zr&&(t=e._fireValidationFail(item._index,t.column,t))&&alert(i.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),t}i.isAppendWhenExitLast()&&(e.append(),e.isItemEditing())&&(o.down(),o.home())}else o.next();if(i.isSkipReadOnly()&&!this.$_skipReadOnly(o,1)&&o.assign(t),$.areEquals(o,t)&&a){switch(a){case"row":e._exiting=!0;break;case"grid":e._exiting=o.itemIndex()>=e.itemCount()-1}if(e._exiting)return!1}}return $.areEquals(o,t)||this.setFocused(o,!0),_e()&&r&&r.preventDefault&&r.preventDefault(),!0}}else o.normalize(e),this.$_skipReadOnly(o,1);return e._exiting=!0,s&&!_e()&&e._container._canvas.setAttribute("tabindex","-1"),!1},$_commitCancel:function(e,i){var n=this.grid();try{switch(e.itemState()){case H.INSERTING:return n.commit(i.isForceInsert())||n.cancel(!0),!0;case H.APPENDING:return n.commit(i.isForceAppend())||n.cancel(!0),!0;case H.UPDATING:return n.commit(i.isCommitWhenNoEdit())||n.cancel(!0),!0}}catch(t){if(t instanceof Zr)return(t=n._fireValidationFail(e._index,t.column,t))&&alert(i.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Zt)return!1;throw t}return!1},_doCancel:function(t){t.closeFilterSelector(),t.isEditing()?t.cancelEditor(!0):t.itemEditCancel()&&t.cancel()},_doEnter:function(e,i,t){var n=e.isEditing();if(n&&!i.isEnterToTab())e.commitEditor(!0);else{var s=t.clone(),r=i.isSkipReadOnly(),o=i.isSkipReadOnlyCell();if(e.isValid(s))if(i.isEnterToNextRow()&&s.I()<e.itemCount()-1)s.down(),o&&this.$_checkReadOnly(s)&&(this.$_skipReadOnlyCell(s,1)||s.assign(t));else if((!n||i.isEnterToTab())&&i.isCrossWhenExitLast()&&(s.isLast()||i.isSkipReadOnly()&&s.isEditableLast())&&s.I()<e.itemCount()-1)s.down(),s.home(),r&&this.$_skipReadOnly(s,1);else if((!n||i.isEnterToTab())&&i.isCommitWhenExitLast()&&s.isLast()){try{e.commit(i.isCommitWhenNoEdit())}catch(t){throw t instanceof Zr&&(t=e._fireValidationFail(item._index,t.column,t))&&alert(i.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),t}i.isAppendWhenExitLast()&&(e.append(),e.isItemEditing())&&(s.down(),s.home())}else i.isEnterToTab()&&(n||this.$_checkReadOnly(s))?(n&&e.commitEditor(!0),s.next(),r&&!this.$_skipReadOnly(s,1)&&s.assign(t)):i.isEnterToEdit()||(s.next(),r&&!this.$_skipReadOnly(s,1)&&s.assign(t));else s.normalize(e);$.areEquals(s,t)?e.isValid(s)&&i.isEnterToEdit()&&(!n&&t&&t.dataColumn()&&!this.$_checkReadOnly(t)?e.showEditor(t):this.resetFocused()):this.setFocused(s,!0)}return!0},_showTooltip:function(t,e,i){var n,s,r=this.grid(),o=r.toolTipManager(),a=r.layoutManager(),h=r.pointToIndex(r.mouseX(),r.mouseY(),!0);o.isVisible()&&this._tipCell==t&&$.areEquals(h,this._tipIndex)&&this._tipButton==i||(this._hideTooltip(),t&&e&&(s=(n=t.boundsBy()).x,n=n.y,s=t._dataColumn&&t._dataColumn.isFixed()?s:Math.max(s,a.nonfixedBounds().x),t instanceof Xh?h?n+=(h.I()-Math.max(t.index().I(),r.topIndex())+1)*r._layoutManager.$_calcItemHeight(r,r._delegate,h.I()):n=r.mouseY()+8:n+=t._height,o.show(e,s,n,t),this._tipCell=t,this._tipIndex=h.clone(),this._tipButton=i))},_showTooltip2:function(t){var e=this.grid(),i=t.index(),n=i.dataColumn(),s=i.dataId(),r=-1,s=e._validationManager._validateCellList[s]&&e._validationManager._validateCellList[s][n.dataIndex()];if(e.editOptions().isHintOnError()&&n&&e.isItemEditing(i.item())&&n.error()||s)s?this._tipOptions.setMessage(s.message):this._tipOptions.setMessage(n.error().message||n.error()),this._tipOptions.setStyles({background:"#eeffcc99"}),this._showTooltip(t,this._tipOptions);else{s=t.renderer();if(s&&t instanceof Xh&&(i=e.pointToIndex(e.mouseX(),e.mouseY(),!0)),(s instanceof qc||s instanceof Xc)&&(r=s.ptInButtonIndex(t,t.mouseX(),t.mouseY())),s&&(!$.areEquals(i,this._tipIndex)||this._tipButton!=r)){n=s.getTooltip(t,i,r);if(s.isShowTooltip()&&(n||e._displayOptions.isEmptyShowTooltip())){if(s.isTooltipEllipseTextOnly())if(s.measure(e,t,0,0).width<Math.min(s._rect.width,t.width()))return;e=this._grid._fireShowTooltip(i,n),s={background:"#eeffffff"};if(e&&"object"==typeof e)this._tipOptions.setMessage(e.message),this._tipOptions.setStyles(e.styles||s);else{if(!e||"string"!=typeof e)return;this._tipOptions.setMessage(e),this._tipOptions.setStyles(s)}this._showTooltip(t,this._tipOptions,r)}}}},_showHeaderTooltip:function(t,e){var i,n=this.grid(),s=n.toolTipManager(),r=n.layoutManager();s.isVisible()&&this._tipCell==t||(this._hideTooltip(),t&&e&&(n=this.grid(),r=t instanceof Xu?(i=n.mouseX()+8,n.mouseY()):(n=t.boundsBy(),i=t._column.isFixed()?n.x:Math.max(n.x,r.nonfixedBounds().x),n.y+n.height),s.show(e,i,r,t),this._tipCell=t))},_showHeaderTooltip2:function(t){var e=this.grid();if(e.header().isShowTooltip()&&this._tipCell!=t){t=b(t,Za);if(t.isShowTooltip()){var i=t._tooltip||t._text;if(e.header().isTooltipEllipseTextOnly())if(t.tooltipWidth(e,t.width(),t.height()).width<=Math.min(t._calcWidth||t.width(),t.width()))return;if(i){e=e._fireShowHeaderTooltip(t._column,i),i={background:"#eeffffff"};if(e&&"object"==typeof e)this._tipOptions.setMessage(e.message),this._tipOptions.setStyles(e.styles||i);else{if(!e||"string"!=typeof e)return;this._tipOptions.setMessage(e),this._tipOptions.setStyles(i)}this._showHeaderTooltip(t,e)}}}},_hideTooltip:function(t,e){this.grid().toolTipManager().close(t,e),this._tipCell=null,this._tipIndex=null,this._tipButton=-1},_doMouseWheel:function(t){var e,i,n,s,r,o=this._grid.displayOptions();return!!o.isWheelEnabled()&&(this._super(t),(t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==o.wheelScrollHorz()?(s=this._grid.leftPos(),e=Math.abs(o.wheelScrollHorz()||16)*(0<t.wheelDelta?-1:1),this._grid.setLeftPos(s+e),sn||rn||!o.isWheelEventPropagate()||s!=this._grid.leftPos()):(e=this._grid.topIndex(),s=Math.abs(o.wheelScrollLines()),i=Date.now(),s=s||3,0<o.wheelAccelDelay()&&(i>this._prevScroll+300?this._checkScroll=i:this._checkScroll+o.wheelAccelDelay()<i&&(n=this._grid.itemCount(),(r=o.wheelAccelScroll())&&!isNaN(r)?s=parseInt(r):"string"==typeof r&&0<(r=r.trim()).indexOf("%")&&(n=this._grid.itemCount(),s=parseInt(r.substr(0,r.length-1))/100*n))),this._prevScroll=i,this._grid.setTopIndex(this._grid.topIndex()+(0<t.wheelDelta?-s:s)),!o.isWheelEventPropagate()||e!=this._grid.topIndex()))}}),Md=e("GridScrollTool",null,{init:function(t){this._super(t,"gridScrollTool"),this._scrollTimer=null},isScrolling:function(){return null!=this._scrollTimer},stop:function(t,e){this._scrollTimer&&(this._scrollTimer.stop(t,e),this._scrollTimer=null)},start:function(t,e,i){return t instanceof nc?(t.isEnabled()&&(this._scrollTimer=new hc(t),this._scrollTimer.start()),!0):!!(t instanceof ic&&(t.ptInTrack(e,i,!0)?this._scrollTimer=new lc(t,!0):t.ptInTrack(e,i,!1)&&(this._scrollTimer=new lc(t,!1)),this._scrollTimer))&&(this._scrollTimer.start(),!0)},move:function(t,e){this._scrollTimer.move(t,e)}}),Fd=e("GridSelectionTool",Ji,{init:function(t){this._super(t,"selectionTool"),this._clickPos=mn.empty(),this._clickElement=null,this._clickHandle=null,this._clickCell=null,this._reclickCell=null,this._tmpIndex=this._grid.getIndex(),this._skipIndex=this._grid.getIndex(),this._scrollTool=new Md,this._rightClicked=null,this._prevElt=null,this._rowHoverView=new Vd(!1,this._grid&&this._grid._displayOptions),this._rowBlockView=new Pd(!1,this._grid&&this._grid._displayOptions),this._checkScroll=this._prevScroll=Date.now()},destroy:function(){this._destroying=!0,this._clickPos=null,this._clickElement=null,this._clickHandle=null,this._clickCell=null,this._reclickCell=null,this._tmpIndex=null,this._skipIndex=null,this._scrollTool=null,this._rightClicked=null,this._prevElt=null,this._rowHoverView=null,this._rowBlockView=null,this._super()},hoveredCell:null,setHoveredCell:function(t,e,i){t!=this._hoveredCell?(this._hideTooltip(),this._hoveredCell&&this._hoveredCell.setMouseEntered(!1),this._hoveredCell=t,this._hoveredCell&&this._hoveredCell.setMouseEntered(!0)):t instanceof bh&&t.renderer()instanceof qc&&(s=t.getPtInDataButtonIndex(t.mouseX(),t.mouseY()),this._tipButton!==s)&&this._hideTooltip();var n,s=this.grid(),r=t,o=this,t=s.toolTipManager();r instanceof bh&&s.canHovering()?(t&&(0<t._hintDuration?(t._showTimer&&clearTimeout(t._showTimer),t._showTimer=setTimeout(function(){o._showTooltip2(r)}.bind(o),t._hintDuration)):this._showTooltip2(r)),(n=r.cursor&&r.cursor(r.mouseX(),r.mouseY())||s.getCellCursor(r._index))&&s.setCursor(n)):r instanceof Za&&s.canHovering()&&t&&(0<t._hintDuration?(t._showTimer&&clearTimeout(t._showTimer),t._showTimer=setTimeout(function(){o._showHeaderTooltip2(r)}.bind(o),t._hintDuration)):this._showHeaderTooltip2(r))},isEditing:function(){return this._grid.isEditing()},_doActivate:function(){this._super(),this._grid.addFocusElement(this._focusView),this._innerFocusView&&this._grid.addFocusElement(this._innerFocusView),this._grid.addRowFocusElement(this._rowFocusView),this._grid.addFeedbackElement(this._rowHoverView),this._grid.addFeedbackElement(this._rowBlockView)},_doDeactivate:function(){this._grid.removeFocusElement(this._focusView),this._innerFocusView&&this._grid.removeFocusElement(this._innerFocusView),this._grid.removeRowFocusElement(this._rowFocusView),this._grid.removeFeedbackElement(this._rowHoverView),this._grid.removeFeedbackElement(this._rowBlockView),this._super()},_doClick:function(t,e){var i,n,s,r;this.isDragging()||(i=this._grid,(r=this.focused().clone())&&(this.findElementAt(t,e,!0)||this._clickElement)==this._clickElement&&(this._clickElement instanceof bh?(this.dataCellClicked(r),i.isEditing()||(r.column()instanceof M&&(n=r.dataColumn(),s=i.editController()._editor,!n.isReadOnly())&&s&&(s instanceof gd||s instanceof Sd)&&s._dropDownWhenClick&&(i.makeCellVisible(),i.showEditor(r))&&i.editorButtonClick(r),this._reclickCell?this._performRendererClick(r,this._reclickCell,t,e,!1,!1):this._performRendererClick(r,this._clickElement,t,e,!1,!0))):this._clickElement instanceof ph?this._indicatorCellClicked(r.itemIndex()):this._clickElement instanceof za&&(n=(i=this.grid()).popupMenuManager(),r=(s=this._clickElement.parent()).column().header()._popupMenuName)&&n.show(r,s,t,e,0,0)))},$_calcInnerCellIndex:function(t,e,i,n){if(t instanceof Xh){var s=this._grid,r=s.layoutManager();s.containerToElement(i,n);n-=r.bodyBounds().y;for(var o=t._topIndex;o<=t._bottomIndex;o++){var a=r.itemBounds(o);if(n>=a.y&&n<a.bottom()){e.itemIndex(o+s.topIndex());break}}}},_doDblClick:function(t,e){var i,n,s,r,o,a,h;this.isDragging()||(i=this._grid,n=this.focused(),(s=this.findElementAt(t,e,!0))===this._clickElement&&((o=this._getEditRequest(this._clickElement,t,e,!1,!1))instanceof Xd&&(a=o.itemIndex()+i.topIndex(),i.layoutManager().fitRowHeight(a,0,!1,!0)),this._clickElement instanceof bh&&(r=this._clickCell.index(),this._clickCell instanceof Xh&&(r=r.clone(),this.$_calcInnerCellIndex(this._clickCell,r,t,e)),this.dataCellDblClicked(r)),this._clickElement instanceof Lh?(((a=this._clickElement.item())instanceof Vr||a instanceof Kh)&&a.isExpanded&&a.setExpanded&&(h=!a.isExpanded(),a.setExpanded(h)),h=$.temp(i,this._clickElement.index().itemIndex(),i.columnByField(a._groupField)),this.rowGroupHeaderFooterDblClicked(-1,h)):this._clickCell instanceof rh?this.rowGroupHeaderFooterDblClicked(-2,this._clickCell.index()):this._clickElement instanceof Za?(o=this._getEditRequest(this._clickElement,t,e,!1,!1))instanceof Hd?(a=this._clickElement.index().column(),h=Math.max(a.minWidth(),Tl.MIN_WIDTH),t=a.maxWidth(),i.layoutManager().fitColumnWidth(a,!1,h,t),i._fireColumnPropertyChanged(a,"width",a.width())):this._clickElement.parent()instanceof ka||this._clickElement.parent()instanceof Ja?this.columnHeaderDblClicked(this._clickElement.index().column()):s.parent()instanceof qu&&this.rowGroupPanelDblClicked(this._clickElement.index().column()):n.isValid()&&!i.isEditing()&&this._clickCell instanceof bh?$.areEquals(r,n)&&i.showEditor(r):this._clickCell instanceof th?this._clickCell.error()?i.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this.footerCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof eh?this._clickCell.error()?i.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this.headerSummaryCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof rh&&this._clickCell.error()?i.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._clickCell instanceof ah?this.indicatorCellDblClicked(-1):this._clickCell instanceof hh?this.indicatorCellDblClicked(-2):this._clickCell instanceof ph?this.indicatorCellDblClicked(s.index().itemIndex()):this._clickCell instanceof uh?this.stateBarCellDblClicked(-1):this._clickCell instanceof ch?this.stateBarCellDblClicked(-2):this._clickCell instanceof wh?this.stateBarCellDblClicked(s.index().itemIndex()):this._clickCell instanceof mh?this.checkBarFootDblClicked():this._clickCell instanceof Mh?this.rowGroupHeadDblClicked():this._clickCell instanceof Fh?this.rowGroupFootDblClicked():this._clickCell instanceof Th?this.rowGroupBarDblClicked(this._clickCell.level()):this._clickCell instanceof Dh?this.rowGroupBarDblClicked(-1):this._clickCell instanceof Bh?this.rowGroupBarDblClicked(-2):this._clickElement instanceof qu?this.panelDblClicked():null==this._clickElement&&this.bodyEmptyDblClicked()))},_doMouseDown:function(t,e,i,n,s,r){var o,a,h=this._grid,l=(this._hideTooltip(),h.closePopups(),h._buttonClicked=!1,this._scrollTool.stop(),this._clickElement=null),d=this._clickCell=null;if(this._reclickCell=null,this._clickHandle=null,this._rightClicked=1<s,h._focusedCheckIndex&&(h._focusedCheckIndex=null,h._checkBar)&&(h._checkBar._dirty=!0),0==s||h.displayOptions().isRightClickable()){if(l=this._clickElement=this.findElementAt(t,e,!1),this._scrollTool.start(l,t,e))return;if(this._clickHandle=b(l,Va),d=this._clickCell=b(l,Ya),this._clickPos.set(t,e),this._clickHandle&&this._clickHandle.isClickable())return void this.$_handleClicked(this._clickHandle)}if(d instanceof bh&&this.$_checkAppending(h.focusedIndex(),!0,d))this._clickElement=null,this._clickCell=null;else{if(d){var u,c,_=!1,f=null,m=null,g=d.index().clone();if(d instanceof Xh&&this.$_calcInnerCellIndex(d,g,t,e),(!(a=this._getEditRequest(d,t,e,i,n))||a.isSelectable())&&(n||this._rightClicked&&h._selections.contains(g)||(d instanceof ph&&h.indicator().isSelectable()||d instanceof Lh||null!=(f=this.$_getGroupFooterView(d))||null!=(m=this.$_getMergedFooterView(d)))&&h._selections.clear(),d instanceof bh?($.areEquals(g,this.focused())&&(this._reclickCell=this._clickCell),a instanceof $d||!this._reclickCell||!h.editOptions().isEditWhenClickFocused()?_=!0:(h.showEditor(g),setTimeout(function(){h._editController._editor.selectAll(),h._editController._editor.setFocus()},100))):d instanceof ph?h.indicator().isSelectable()&&((u=this._tmpIndex).assign(h.focusedIndex()),u.itemIndex(g.I()),null==u.C()&&u.item()instanceof Ar&&u.column(h.getFirstColumn()),g=u,_=!0):d instanceof Lh?(g.setColumn(h.getVisibleColumn(g.item().level())),_=!0):f?((u=this.focused().clone()).itemIndex(f.item().index()),g=u,_=!0):m&&(_=!0),_)&&!n){g.normalize(h);var i=!this._rightClicked||!h._selections.contains(g),p=h._editController._editor;if(!this.setFocused(g,i))return;G.isSingle(h._selectOptions.style())&&h._selections.count()<1&&h.clearSelection(),o=h._editController._editor}0==s&&(c=this._getDragTracker(a,t,e),this.setDragTracker(c),h._selections.count()<1)&&((h._selectOptions.style()!=G.ROWS||c instanceof cu)&&(h._selectOptions.style()!=G.COLUMNS||c instanceof _u)||h.clearSelection())}else l&&(a=this._getEditRequest(l,t,e,!1,!1))&&this.setDragTracker(this._getDragTracker(a,t,e));(c=this.dragTracker())&&c.isStartWhenCreated()&&(c instanceof du&&n?(this._startDragTracker(t,e,n),f=d.index().clone(),d instanceof Xh&&this.$_calcInnerCellIndex(d,f,t,e),c._item&&c._item.resizeTo(f)):this._startDragTracker(t,e)),p&&o&&p!=o&&o instanceof _d&&r&&r.preventDefault&&(Qi||r.preventDefault())}},_doMouseMove:function(t,e,i,n,s){var r,o=this._grid;if(o&&!o._destroying)if(this._scrollTool.isScrolling())this._scrollTool.move(t,e);else if(this.dragTracker())this._hideTooltip();else{for(var a=null,h=(o.setCursor(rs.DEFAULT),a=this.findElementAt(t,e,!0),o.canHovering()?this.setHoveredCell(b(a,Ya),t,e):this._hideTooltip(),this._prevElt&&(this._prevElt.setButtonState(!1,!1),this._prevElt.setEditButtonState(!1,!1),this._prevElt=null),o.displayOptions().rowHoverMask()),l=this._rowHoverView,d=o._bodyView._elements,u=parseInt(e)-o._bodyView.bounds().y,c=d?d.length:0,_=0;_<c;_++){if(d[_].y()<=u&&d[_].bottom()>=u){r=d[_];break}if(d[_].y()>u)break}a&&(a instanceof bh||a.paretnAs&&a.parentAs(Sh))&&h&&h.isVisible()?r instanceof Sh&&(l._rowHoverPos!=r.y()||"cell"==h.hoverMask()&&l.$_hoverCell!=a)?this._rowFocusView&&this._rowFocusView.isVisible()&&this.focused()&&this.focused().itemIndex()==r.itemIndex()?(l._rowHoverPos=-1,l.$_hoverCell=null,l.$_hoverRow=null,l.setVisible(!1)):(l.setVisible(!0),this.$_updateRowHoverView(o,r,a),l._hoverMouseY=Math.max(0,u-1)):r instanceof Sh||(l._rowHoverPos=-1,l.$_hoverCell=null,l.$_hoverRow=null,l.setVisible(!1)):(l._rowHoverPos=-1,l.$_hoverCell=null,l.$_hoverRow=null,l.setVisible(!1));var f,h=this._getEditRequest(a,t,e,i,n);h&&h.cursor()?o.setCursor(h.cursor()):a instanceof bh&&(t=a.mouseX(),e=a.mouseY(),a instanceof Xh&&(l=a.hoverIndex(),r?l+a.mergeRoom().head()!=r.index()&&(a.setHoverIndex(r.index()-a.mergeRoom().head()),a.invalidate()):a.setHoverIndex(void 0)),a.ptInDataButton(t,e)?(f=a.getPtInDataButtonIndex(t,e),a.setButtonState(!0,!1,f)):a.ptInButton(t,e)?(f=a.getPtInButtonIndex(t,e),a.setButtonState(!0,!1,f),this._prevElt=a):a.ptInEditButton(t,e)?(a.setEditButtonState(!0,!1),this._prevElt=a):(a.setButtonState(!1,!1),a.setEditButtonState(!1,!1)))}},_doMouseUp:function(t,e,i){var n=this._grid,s=this.findElementAt(t,e,!0);s&&!Tt(s.$name,"CheckBarCellElement","ScrollBar","ScrollButton","ScrollThumb")&&delete this._prevCheckIndex,this._scrollTool.isScrolling()?this._scrollTool.stop(t,e):this.dragTracker()&&this.dragTracker().isCompleted()||s!=this._clickElement||(s instanceof Za&&s.isClickable()?(t=this._getEditRequest(this._clickElement,t,e,!1,!1))&&t.isDblClickable()||(s.parent()instanceof ka||s.parent()instanceof Ja?this.$_columnHeaderClicked(s.index().column(),this._rightClicked,i):s.parent()instanceof qu&&this._rowGroupPanelClicked(s.index().column())):s instanceof Ua?this.$_columnHeaderImageClicked(s.cellView().column()):s instanceof $a?s.cellView().column().setChecked(!s.cellView().column().isChecked()):s instanceof Wa?n.removeGroupBy(s.cellView().column()):s instanceof Ih?(this._checkCellClicked(s,i),this._prevCheckIndex=s.index().clone()):s instanceof fh?this._checkAllClicked(s):s instanceof mh?this._checkBarFootClicked():s instanceof ph?this._indicatorCellClicked(s.index().itemIndex()):s instanceof ah?(n.filteringOptions().isEnabled(),this._indicatorCellClicked(-1)):s instanceof hh?this._indicatorCellClicked(-2):s instanceof wh?this._stateBarCellClicked(s.index().itemIndex()):s instanceof uh?this._stateBarCellClicked(-1):s instanceof ch?this._stateBarCellClicked(-2):s instanceof Mh?this._rowGroupHeadClicked():s instanceof Fh?this._rowGroupFootClicked():s instanceof Lh?(e=n.columnByField(s.item()._groupField),t=$.temp(n,s.index().itemIndex(),e),this._rowGroupHeaderFooterClicked(-1,t)):s instanceof rh?this._rowGroupHeaderFooterClicked(-2,s.index()):s instanceof Th?this._rowGroupBarClicked(s.level()):s instanceof Dh?this._rowGroupBarClicked(-1):s instanceof Bh?this._rowGroupBarClicked(-2):s instanceof qu?this._panelClicked(0):s instanceof th?this._footerCellClicked(s.index().column()):s instanceof eh?this._headerSummaryCellClicked(s.index().column()):s&&s.isClickable()?this.$_elementClicked(s):null==s&&this._bodyEmptyClicked()),this.setDragTracker(null)},_doMouseOutside:function(){this._hoveredCell&&(this._hoveredCell.setMouseEntered(!1),this._hoveredCell=null),this._grid._validateScrollBars(),this._grid._toolTipManager&&this._grid._toolTipManager._active&&this._grid._toolTipManager.close()},_doMouseEnter:function(t,e){},_doMouseLeave:function(t,e){this._hideTooltip(t,e)},_doMouseOver:function(t,e){},_doLayoutChanged:function(t,e){this._resetFocusedView(),this.$_resetRowBlockView()},_doFocusedIndexChanging:function(t){},_doFocusedIndexChanged:function(t,e){this._resetFocusedView()},editButtonClicked:function(t){var e=this.grid();e.makeCellVisible(),e.showEditor(t)&&e.editorButtonClick(t),this._super(t)},$_getGroupFooterView:function(t){for(var e=t.parent();e;){if(e instanceof Vh)return e;e=e.parent()}return null},$_getMergedFooterView:function(t){for(var e=t.parent();e;){if(e instanceof Zh)return e;e=e.parent()}return null},_getEditRequest:function(t,e,i,n,s){var r,o=this._grid;if(t instanceof sc)return new rc(t);if(o.visibleColumnCount()<1)return null;if(!(t instanceof Ya))return null;if(h=this.$_getRowResizeRequest(r=t,e,i))return h;if(o.header().isResizable()&&(h=this.$_getHeaderResizeRequest(e,i)))return h;if(o.header().summary().isResizable()&&(h=this.$_getHeaderSummaryResizeRequest(e,i)))return h;if(o.footer().isResizable()&&(h=this.$_getFooterResizeRequest(e,i)))return h;var a,h=o.layoutManager(),l=o.selectOptions().mode(),d=o.selectOptions().style(),u=r.localToContainer(mn.EMPTY),c=o.displayOptions(),_=o.editOptions();if(u.x+=r.width(),r instanceof ph){if(o.indicator().isSelectable()&&l!=ks.NONE&&d!=G.NONE&&d!=G.SINGLE_ROW)return new lu(o.selections(),r,G.ROWS)}else if(r instanceof Za)if(n){if(l!=ks.NONE&&d!=G.NONE&&d!=G.SINGLE_COLUMN)return new lu(o.selections(),r,G.COLUMNS)}else{if(m=r.index().column(),c.isColumnResizable()&&m.isResizable()&&(o.fixedOptions().isResizable()||m.root().displayIndex()>=h.fixedColCount()&&m.root().displayIndex()<h.rfixedStartCol())&&e>=u.x-3&&e<=u.x+3)return new Hd(r);if(c.isColumnMovable()&&m.isMovable()&&(!m.isRoot()||o.canMoveIndex(m.root().displayIndex())))return new Gd(r)}else if(r instanceof Lh||this.$_getGroupFooterView(r)||this.$_getMergedFooterView(r)){if(l!=ks.NONE&&d!=G.NONE&&!G.isSingle(d)){if(0<o.selections().count()&&s)return new lu(o.selections(),r,o.selections().itemStyle());if(d!=G.NONE)return new lu(o.selections(),r,d)}}else if(r instanceof bh){if(_.isInnerDraggable()){var f,m=o.selectOptions().style()==G.NONE?(f=$.areEquals(o._focusedIndex,r.index())&&r.boundsByContainer(),new mu(o._selections,r.index(),r.index())):(u=new O,(c=o.selections().getItem(0))&&o.$_getSelectionRangeRect(h,c,u),f=u&&u.clone(),o.selections().getItem(0));if(f instanceof O){_=f.x,h=f.x+f.width,c=f.y,u=f.y+f.height;if(f&&(_-3<=e&&e<=_+3||h-3<e&&e<h+3)&&c<i&&i<u||(c-3<=i&&i<=c+3||u-3<i&&i<u+3)&&_<e&&e<h||n&&f.contains(e,i)){c=o._fireShowInnerDragCursor(m);if(c)return new qd(m,c)}}}if(e=r.mouseX(),i=r.mouseY(),!s&&r.ptInDataButton(e,i))return a=r.getPtInDataButtonIndex(e,i),new Wd(r,a);if(!s&&r.ptInButton(e,i))return a=r.getPtInButtonIndex(e,i),new $d(r,a);if(!s&&r.ptInEditButton(e,i))return new Ud(r);if(l!=ks.NONE&&d!=G.NONE&&!G.isSingle(d)){if(0<o.selections().count()&&s)return new lu(o.selections(),r,o.selections().itemStyle());if(d!=G.NONE)return new lu(o.selections(),r,d)}}return this._super(t,e,i,n,s)},$_getHeaderResizeRequest:function(t,e){var i=this._grid.layoutManager(),n=i.indicatorBounds().width;return!((n=(n=(n=n<=0?i.stateBarBounds().width:n)<=0?i.checkBarBounds().width:n)<=0&&(0<i.fixedColCount()||0<i.columnCount())?20:n)<=0||n<=t)&&e>(n=i.headerBounds()).bottom()-3&&e<=n.bottom()?new zd:null},$_getHeaderSummaryResizeRequest:function(t,e){var i=this._grid.layoutManager(),n=i.indicatorBounds().width;return!((n=(n=(n=n<=0?i.stateBarBounds().width:n)<=0?i.checkBarBounds().width:n)<=0&&(0<i.fixedColCount()||0<i.columnCount())?20:n)<=0||n<=t)&&e>(n=i.summaryBounds()).bottom()-3&&e<=n.bottom()?new Kd:null},$_getFooterResizeRequest:function(t,e){var i=this._grid.layoutManager(),n=i.indicatorBounds().width;return!((n=(n=(n=n<=0?i.stateBarBounds().width:n)<=0?i.checkBarBounds().width:n)<=0&&(0<i.fixedColCount()||0<i.columnCount())?20:n)<=0||n<=t)&&e>=(n=i.footerBounds()).y&&e<=n.y+3?new Yd:null},$_getRowResizeRequest:function(t,e,i){var n,s,r,o=this._grid,a=o.layoutManager(),h=a.fixedItemCount(),l=-1,d=o.displayOptions().isEachRowResizable()&&1==o._rootColumn._dataLevel;if(t instanceof ph?l=t.index().I():t instanceof wh?o.indicator().isVisible()||(l=t.index().I()):t instanceof Ih?o.indicator().isVisible()||o.stateBar().isVisible()||(l=t.index().I()):t instanceof bh&&!o.indicator().isVisible()&&!o.stateBar().isVisible()&&!o.checkBar().isVisible()&&e<50&&(l=t.index().I()),!(l<0||(n=t.localToContainer(mn.EMPTY),(t=t.width())<=0)||e<n.x||e>=n.x+t)){if(o.fixedOptions().isRowResizable())for(_=0;_<h;_++)if(o.getItem(_).isResizable()){if(l!=_&&!d)break;if(i>=(s=a.getItemRect(_)).bottom()-2&&i<=s.bottom()+2)return new Xd(_);if(r=a.footerBounds(),s.bottom()>=r.y&&i>=r.y-2&&i<=r.y+2)return new Xd(_)}if(o.displayOptions().isRowResizable()||d){if((0==a.itemCount()&&0<a.fixedItemCount()||1==a.itemCount()&&0==a.fullItemCount())&&(s=a.getItemRect(0),r=a.footerBounds(),s.bottom()>=r.y)&&i>=r.y-4&&i<=r.y+2)return new Xd(0);for(var u=a.itemCount(),c=o.topIndex(),_=0;_<u;_++)if(o.getItem(_+h+c).isResizable()){if(l-c!=_+h&&!d)break;if(i>=(s=a.getItemRect(_+h)).bottom()-2&&i<=s.bottom()+2)return new Xd(_+h);if(r=a.footerBounds(),s.bottom()>=r.y&&i>=r.y-2&&i<=r.y+2)return new Xd(_+h)}}}return null},$_updateRowHoverView:function(t,e,i){var n=this._rowHoverView,s=t._layoutManager,r=e.boundsBy(t._rootElement).clone(),o=s._gridBounds,a=t._displayOptions._rowHoverMask&&t._displayOptions._rowHoverMask.hoverMask(),h=n._rowHoverMask._styles;h&&h.border()&&h.border()._width;switch(n._rowHoverPos=e.y(),n.$_hoverCell=null,a){case Us.CELL:if(!i)return;r=i.boundsBy(t._rootElement),n.$_hoverCell=i;break;case Us.DATA:r.x=o.x,r.width=s.rfixedBounds().right()-o.x;break;case Us.FILL:r.x=0,r.width=o.right();break;default:r.x=0,r.width=s.rfixedBounds().right()}n.$_hoverRow=e,h.border()&&(r.y--,r.x--),n.setRectI(r),(e=r.clone()).x=e.y=0,a==Us.CELL&&(e.setLeft(Math.max(0,s.fixedBounds().right()-r.x)),e.width=e.width-Math.max(0,r.right()-s.rfixedBounds().left())),e.height=Math.min(r.height,s.gridBounds().bottom()-r.y),h.border()&&(e.y--,e.x--,e.width+=2,e.height+=2),n._mask=e,n.invalidate()},_resetRowHoverView:function(t,e){if(!this._scrollTool.isScrolling()){var n=this.grid(),s=n._layoutManager,r=this._rowHoverView;if(!n._displayOptions._rowHoverMask._visible||s._bodyBounds.bottom()<n.container().mouseY())r&&r.setVisible(!1);else{var o,a=n._bodyView._elements,h=parseInt(n._container.mouseY())-n._bodyView.bounds().y,l=a?a.length:0;for(i=0;i<l;i++){if(a[i].y()<=h&&a[i].bottom()>=h){o=a[i];break}if(a[i].y()>h)break}o&&o instanceof Sh?(r.setVisible(!0),this.$_updateRowHoverView(n,o,r.$_hoverCell)):r.setVisible(!1)}}},$_resetRowBlockView:function(){var t=this._rowBlockView,e=this.grid();if(!e._loading){var i=e.displayOptions().rowBlockMask(),n=e._layoutManager,s=n._gridBounds;if(t&&i.isVisible()){var r=Math.max(0,t._startIndex-e.topIndex()),e=Math.min(n.itemCount()+n.fixedRowCount()-1,t._endIndex-e.topIndex()),o=n.itemBounds(r),r=n.itemBounds(e),e=i.blockMask(),o=o.union(r);switch(e){case Us.DATA:o.x=s.x,o.width=n.rfixedBounds().right()-s.x;break;case Us.FILL:o.x=0,o.width=s.right();break;default:o.x=0,o.width=n.rfixedBounds().right()}o.offset(0,n.bodyBounds().y),t.setRectI(o);i=o.clone();i.x=i.y=0,i.height=Math.min(o.height,n.gridBounds().bottom()-o.y),t._mask=i,t.setVisible(!0),t.invalidate()}else t&&t.setVisible(!1)}},setRowBlockView:function(t,e){var i=this._rowBlockView;i._startIndex=t,i._endIndex=e,this.$_resetRowBlockView()},_getDragTracker:function(t,e,i){if(t instanceof Hd)return new jd(t,e,i);if(t instanceof Gd)return new(this._grid.displayOptions().isParentChangable()?iu:eu)(t,e,i);if(t instanceof zd)return new Jd(this._grid,t,e,i);if(t instanceof Kd)return new Qd(this._grid,t,e,i);if(t instanceof Yd)return new tu(this._grid,t,e,i);if(t instanceof Xd)return new Zd(this._grid,t,e,i);if(t instanceof lu)switch(t.selectStyle()){case G.ROWS:return new cu(t,e,i);case G.COLUMNS:return new _u(t,e,i);case G.BLOCK:return new uu(t,e,i)}else{if(t instanceof Wd)return new ou(t);if(t instanceof Ud)return new ru(t);if(t instanceof $d)return new su(t);if(t instanceof rc)return new oc(t,e,i);if(t instanceof qd)return new au(t,e,i)}return null},editorActivated:function(t){this._resetFocusedView()},$_columnHeaderClicked:function(t,e,i){e=1<arguments.length&&e,this.grid()._fireColumnHeaderClicked(t,e,i),this._doColumnHeaderClicked(t,e,i)},$_columnHeaderImageClicked:function(t,e,i){rightClicked=1<arguments.length&&rightClicked,this.grid()._fireColumnHeaderImageClicked(t,rightClicked,i)},_doColumnHeaderClicked:function(t){},_checkCellClicked:function(t,e){var i=this.grid();if(i.editOptions().isCheckable()){var n=i.checkBar(),s=t.item();if(e&&e.shiftKey&&this._prevCheckIndex&&!n.isExclusive()){for(var t=this._prevCheckIndex.item(),e=Math.min(t._index,s._index),r=Math.max(t._index,s._index),o=[],a=e;a<=r;a++)(s=i.getItem(a)).isCheckable()&&0<=s.dataRow()&&o.push(s);0<o.length&&i.itemSource().checkItems(o,t.isChecked(),!0)}else s.isCheckable()&&(n.isShowGroup()||0<=s.dataRow())&&(i.makeItemVisible(s.index()),i.itemSource().checkItem(s,!s.isChecked(),n.isExclusive(),!0))}},_checkAllClicked:function(t){var e=this.grid(),i=e.checkBar();!e.isEmpty()&&e.editOptions().isCheckable()&&(i.isShowAll()&&!i.isExclusive()?(t.setChecked(!t.isChecked()),e.itemSource().checkAll(t.isChecked(),i.isVisibleOnly(),i.isCheckableOnly(),!0,i.isShowGroup())):this._checkBarHeadClicked())},_footerCellClicked:function(t){this.grid()._fireFooterCellClicked(t)},_headerSummaryCellClicked:function(t){this.grid()._fireHeaderSummaryCellClicked(t)},_checkBarHeadClicked:function(){this.grid()._fireCheckBarHeadClicked()},_checkBarFootClicked:function(){this.grid()._fireCheckBarFootClicked()},_indicatorCellClicked:function(t){this.grid()._fireIndicatorCellClicked(t)},_stateBarCellClicked:function(t){this.grid()._fireStateBarCellClicked(t)},_rowGroupHeadClicked:function(){this.grid()._fireRowGroupHeadClicked()},_rowGroupFootClicked:function(){this.grid()._fireRowGroupFootClicked()},_rowGroupHeaderFooterClicked:function(t,e){this.grid()._fireRowGroupHeaderFooterClicked(t,e)},_rowGroupBarClicked:function(t){this.grid()._fireRowGroupBarClicked(t)},_panelClicked:function(){this.grid()._firePanelClicked()},_rowGroupPanelClicked:function(t){this.grid()._fireRowGroupPanelClicked(t)},$_elementClicked:function(t){this._doElementClicked(t)},_bodyEmptyClicked:function(){this.grid()._fireBodyEmptyClicked()},_doElementClicked:function(t){},$_handleClicked:function(t){this._doHandleClicked(t)},_doHandleClicked:function(t){var e=this.grid();t instanceof Ga&&e.filteringOptions().isEnabled()&&e.selectColumnFilters(t.parent())},_performRendererClick:function(t,e,i,n,s,r){var o=this.grid(),a=e instanceof Xh?e.index().I()+e.innerIndex():e.index().I();!o.isEditing()&&t.isValid()&&e&&t.I()==a&&t.column()==e.index().column()&&t.dataColumn()&&(a=e.renderer(),e.ptInCell(e.mouseX(),e.mouseY()))&&(o.isReadOnly(t)||!(!s&&a.isEditable()||s&&a.isDblClickEditable())||r&&!a.isStartEditOnClick()?!s&&t.I()==(e instanceof Xh?e.index().I()+e.innerIndex():e.index().I())&&a.isClickable(t)&&a.performClick(e,i,n):(r=t.item(),(o.isItemEditing(r)||o.canUpdate(r,t.dataField()))&&o.canWrite(t)&&o.edit(t)&&a.performEdit(t)))}}),Nd=e("FocusView",ss,{init:function(t,e){this._super(t,"focusView"),this._options=e,this._editing=!1},setEditing:function(t,e,i){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this._isLeftImageButton=i,this.invalidate())},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0),i=this._editing?0:1,n=-1+(this._editing&&this._isLeftImageButton?this._buttonWidth:0);t.drawBoundsI(this._options._focusBackgroundBrush,this._editing?this._options._focusActivePen:this._options._focusPen,n,-1,e-i,this.height()-1)}}),Ld=e("RowFocusView",ss,{init:function(t,e){this._super(t,"rowFocusView"),this._options=e,this._editing=!1},_doDraw:function(t){var e=this._options._rowFocusOption.styles(),i=e.border(),n=(n=i&&i.width())?Math.round(n/2):0;t.drawBoundsI(e.background(),i,-1-n,-1-n,this.width(),this.height()-1+n)}}),Ad=e("InnerFocusView",ss,{init:function(t,e){this._super(t,"innerFocusView"),this._options=e,this._editing=!1},setEditing:function(t,e,i){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this._isLeftImageButton=i,this.invalidate())},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0),i=this._editing?0:1,n=-1+(this._editing&&this._isLeftImageButton?this._buttonWidth:0);t.drawBoundsI(null,this._editing?this._options._focusActivePen:this._options._innerFocusPen,n,-1,e-i,this.height()-1)}}),Vd=e("RowHoverView",ss,{init:function(t,e){this._super(t,"rowHoverView"),this._rowHoverMask=e&&e.rowHoverMask(),this._visible=!1,this.$_hoverCell=null,this.$_hoverRow=null},visible:!1,_doDraw:function(t){var e=this._rowHoverMask&&this._rowHoverMask.styles(),i=e&&e.border();t.drawBoundsI(e.background(),i,0,0,this.width(),this.height())}}),Pd=e("RowBlockView",ss,{init:function(t,e){this._super(t,"rowBlockView"),this._rowBlockMask=e&&e.rowBlockMask(),this._visible=!1,this._startIndex=-1,this._endIndex=-1},visible:!1,_doDraw:function(t){var e=this._rowBlockMask&&this._rowBlockMask.styles(),i=e&&e.border();t.drawBoundsI(e.background(),i,0,0,this.width(),this.height())}}),Ss=e("GridDragTracker",as,{init:function(t,e){this._super(t.container(),e),this._grid=t},destroy:function(){this._destroying=!0,this._grid=null,this._super()},grid:function(){return this._grid},isStartWhenCreated:function(){return!1},checkScrolling:function(){return this._grid.checkScrolling()},checkHScrolling:function(){return this._grid.checkHSCrolling()}}),xs=e("CellRequest",_n,{init:function(t){this._super(),this._cell=t},cell:function(){return this._cell},cursor:function(){return null},source:function(){return this._cell},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),Hd=e("ColumnResizeRequest",xs,{init:function(t){this._super(t)},delta:0,headerCell:function(){return this._cell},cursor:function(){return rs.HORZ_RESIZE},isSelectable:function(){return!1},isDblClickable:function(){return!0}}),Gd=e("ColumnMoveRequest",xs,{init:function(t){this._super(t)}}),$d=e("CellButtonRequest",e("DataCellRequest",_n,{init:function(t){this._super(),this._index=t},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),{init:function(t,e){this._super(t.index()),this._cell=t,this._buttonIndex=e},cell:function(){return this._cell},buttonIndex:function(){return this._buttonIndex}}),Ud=e("EditButtonRequest",$d,{init:function(t){this._super(t)}}),Wd=e("DataButtonRequest",$d,{init:function(t,e){this._super(t,e)}}),Rs=e("GridEditRequest",_n,{init:function(t){this._super()},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),zd=e("HeaderResizeRequest",Rs,{init:function(t){this._super(t)},cursor:function(){return rs.VERT_RESIZE}}),Kd=e("HeaderSummaryResizeRequest",Rs,{init:function(t){this._super(t)},cursor:function(){return rs.VERT_RESIZE}}),Yd=e("FooterResizeRequest",Rs,{init:function(t){this._super(t)},cursor:function(){return rs.VERT_RESIZE}}),Xd=e("RowResizeRequest",Rs,{init:function(t){this._super(),this._itemIndex=t},itemIndex:function(){return this._itemIndex},cursor:function(){return rs.VERT_RESIZE},isSelectable:function(){return!1}}),qd=e("DragNDropRequest",xs,{init:function(t,e){this._super(t),this._selectCells=t,this._cursor="boolean"==typeof e?rs.move:"string"==typeof e?e:rs.MOVE},selectCells:function(){return this._selectCells},cursor:function(){return this._cursor||rs.MOVE},isSelectable:function(){return!1}}),jd=e("ColumnResizeTracker",Ss,{init:function(t){this._super(t.cell().grid(),"columnResizeTracker");var t=(this._request=t).headerCell(),e=t.index().column();e.group()?this._cell=qa.getRootOf(t):this._cell=t,this._startWidth=e.displayWidth(),this._offset=this.container().mouseX()-this._startWidth},_doStart:function(t,e){return!0},_doDrag:function(t,e){var i=this._request.headerCell().index().column(),n=Math.max(i._minWidth,Tl.MIN_WIDTH),s=i.maxWidth(),r=i.displayWidth(),o=r-(t=this.container().mouseX()-this._offset);if(o<0&&-1<s&&s<t||0<o&&n>=Tl.MIN_WIDTH&&t<=n)if(o<0){if(!(r<s))return;t=s}else{if(!(n<r))return;t=n}return 2<=t&&(o=this.grid()&&this.grid().layoutManager()._columnFitted,R.changeWidth(i,t-this._startWidth,!1,Tl.MIN_WIDTH,o),this._startWidth=t),!0},_doEnded:function(){var t=this._request.headerCell(),e=this.grid(),t=t.index().column();e._fireColumnPropertyChanged(t,"width",t.width())}}),Zd=e("RowResizeTracker",Ss,{init:function(t,e,i,n){this._super(t,"rowResizeTracker"),this._request=e;e=t.layoutManager().getItemBounds(e.itemIndex());e.x+=t.x(),e.y+=t.y(),this._rowTop=e.y,this._rowBottom=e.bottom(),this._offset=n-e.bottom()},_doStart:function(t,e){return!0},_doDrag:function(t,e){var i,n,s,r,e=e-this._offset-this._rowTop;return 2<=e&&(s=this._request,(r=(i=this.grid()).displayOptions()).isEachRowResizable()&&1==i._rootColumn._dataLevel?s&&0<=s.itemIndex()&&(n=i.layoutManager(),s=s._itemIndex>=n._fixedItemCount?s._itemIndex+i._topIndex:s._itemIndex,s=n._items.getItem(s),e=(r=r.maxRowHeight())&&r<e?r:e,r=s.dataId(),n._itemHeights[r]=e,i.refreshView()):i.displayOptions().setRowHeight(e)),!0}}),Jd=e("HeaderResizeTracker",Ss,{init:function(t,e,i,n){this._super(t,"headerResizeTracker"),this._request=e;e=t.layoutManager().headerBounds();this._headerTop=e.y,this._headerBottom=e.bottom(),this._offset=n-e.bottom()},_doStart:function(t,e){return!0},_doDrag:function(t,e){return!(this._grid.footer().isVisible()&&e>=this._grid.layoutManager().footerBounds().y||e>=this._grid.layoutManager().gridBounds().bottom()||(2<=(e=e-this._offset-this._headerTop)&&this._grid.header().setHeight(e),0))}}),Qd=e("HeaderSummaryResizeTracker",Ss,{init:function(t,e,i,n){this._super(t,"headerResizeTracker"),this._request=e;e=t.layoutManager().summaryBounds();this._summaryTop=e.y,this._summaryBottom=e.bottom(),this._offset=n-e.bottom()},_doStart:function(t,e){return!0},_doDrag:function(t,e){return!(this._grid.footer().isVisible()&&e>=this._grid.layoutManager().footerBounds().y||e>=this._grid.layoutManager().gridBounds().bottom()||(2<=(e=e-this._offset-this._summaryTop)&&this._grid.header().summary().setHeight(e),0))}}),tu=e("FooterResizeTracker",Ss,{init:function(t,e,i,n){this._super(t,"footerResizeTracker"),this._request=e;e=t.layoutManager().footerBounds();this._footerTop=e.y,this._footerBottom=e.bottom(),this._offset=n-e.y},_doStart:function(t,e){return!0},_doDrag:function(t,e){return!(this._grid.header().isVisible()&&e<this._grid.layoutManager().headerBounds().bottom()||this._grid.panel()&&this._grid.panel().isVisible()&&e<this._grid.layoutManager().panelBounds().bottom()||e<0||(2<=(e=this._footerBottom-e+this._offset)&&this._grid.footer().setHeight(e),0))}}),eu=e("ColumnMoveTracker2",Ss,{init:function(t,e,i){this._super(t.cell().grid(),"columnMoveTracker2"),this._request=t,this._sourceFeedback=new Za(this._grid,this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new nu(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.5),this._timer=null,t.cell().index().column().parent().isHorizontal()?(this._startPos=e,this._orgPos=t.cell().boundsByContainer().x):(this._startPos=i,this._orgPos=t.cell().boundsByContainer().y)},_canAccept:function(t,e){return b(this._request.cell(),Za)!=this._target},_doStart:function(t,e){var i=this._request.cell(),n=this.grid(),s=i.boundsBy(n);return n.addFeedbackElement(this._sourceFeedback),n.addFeedbackElement(this._targetFeedback),this._sourceFeedback.setBounds(s.x,s.y,i.width(),i.height()),this._sourceFeedback.updateCell(n.header().getCell(i.index())),this.$_setTarget(null),!0},_doDrag:function(t,e){var i,n,s,r,o=this.grid(),a=o.layoutManager();return!(o.panel().isVisible()&&e>=a.panelBounds().y&&e<a.panelBounds().bottom()||(this._currx=t=o.containerToGridX(t),t<a.gridBounds().x||t>a.clientRect().right()?this._startTimer():(this._stopTimer(),a=null,(i=this._request.cell().index().column()).group()?(a=this._request.cell(),i instanceof R&&(a=a.parent()),i.parent().isHorizontal()?this._sourceFeedback.setX(this._orgPos+(this._currentX-this._startPos)):this._sourceFeedback.setY(this._orgPos+(this._currentY-this._startPos)),t-=(n=(r=b(a.parent(),Ja)).boundsByContainer()).x,e-=n.y,a=r.getCellAt(t,e)):(i.parent().isHorizontal()?this._sourceFeedback.setX(this._orgPos+(t-this._startPos)):this._sourceFeedback.setY(this._orgPos+(e-this._startPos)),(s=(r=o.rfixedHeaderView())&&r.isVisible()&&r.containsInBounds(t,e)||(r=o.fixedHeaderView())&&r.isVisible()&&r.containsInBounds(t,e)||(r=o.headerView())&&r.containsInBounds(t,e)?r:s)&&(t-=(n=s.boundsByContainer()).x,e-=n.y,a=s.getCellAt(t,e))),r=a?a.index().column():null,(a=a&&r.isRoot()&&!o.canMoveToIndex(r.root().displayIndex())?null:a)&&r.group()!=i.group()||this.$_setTarget(a)),0))},_doCanceled:function(){this._stopTimer()},_doCompleted:function(){this._stopTimer(),this._target&&b(this._request.cell(),Za).index().column().setDisplayIndex(this._target.index().column().displayIndex())},_doEnded:function(){this._stopTimer();var t,e=this.grid();e.removeFeedbackElement(this._targetFeedback),e.removeFeedbackElement(this._sourceFeedback),this._completed&&(t=(t=this._request.cell())&&t.index&&t.index().column(),e._fireColumnPropertyChanged(t,"displayIndex",t.displayIndex()))},_startTimer:function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),60))},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},_timerHandler:function(){var t=this._grid,e=this._currx,i=t.layoutManager(),n=0;e>i.clientRect().right()?(n=Math.max(0,Math.min(3,(e-i.clientRect().right())/40)),this._interval=4-n,this._colLoop++):e<i.gridBounds().x&&(n=Math.max(0,Math.min(3,(i.gridBounds().x-e)/40)),this._interval=4-n,this._colLoop++),0<n&&(this._interval=4-n),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect().right()?t.setLeftCol(t.leftCol()+1):e<i.gridBounds().left()&&0<t.leftPos()&&t.setLeftCol(t.leftCol()-1)),this.$_setTarget(null)},getNextRequest:function(t,e){this._stopTimer();var i=this.grid(),n=this._request.cell().index();return i.groupingOptions().isEnabled()&&n.dataColumn()&&n.dataColumn().isGroupable()&&i.panel().isVisible()&&(e-=i.y())<i.layoutManager().headerBounds().y&&0<=e?new ju(this._request.cell()):null},$_setTarget:function(t){var e,i,n,s,r;t!=this._target&&(s=(e=this._request.cell()).index().column(),i=b(s,R),(t=this._target=t)?(n=(r=this.grid()).leftPos(),r.makeCellVisible(t.index()),r.leftPos()!=n&&(r.refreshView(),r.container().updateNow()),n=t.boundsBy(r),t===e?this._targetFeedback._direction="none":i&&i===t.index().column()?this._targetFeedback.direction="none":!s.group()||s.group().isHorizontal()?(r=t.boundsByContainer().x,s=(i?e.parent():e).boundsByContainer().x,this._targetFeedback._direction="horz",this._targetFeedback._reversed=s<r):(s=t.y(),r=(i?e.parent():e).y(),this._targetFeedback._direction="vert",this._targetFeedback._reversed=r<s),this._targetFeedback.setBounds(n.x,n.y,t.width(),t.height()),this._targetFeedback.setVisible(!0),this._targetFeedback.invalidate()):this._targetFeedback.setVisible(!1))}}),iu=e("ColumnMoveTracker3",Ss,{init:function(t,e,i){this._super(t.cell().grid(),"columnMoveTracker3"),this._request=t,this._sourceFeedback=new Za(this._grid,this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new nu(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.5),this._startX=i,this._startY=i;i=t.cell().boundsByContainer();this._orgX=i.x,this._orgY=i.y,this._target=null,this._dir=null,this._timer=null},_canAccept:function(t,e){return b(this._request.cell(),Za)!=this._target},_doStart:function(t,e){var i=this._request.cell(),n=this.grid(),s=i.boundsBy(n);return n.addFeedbackElement(this._sourceFeedback),n.addFeedbackElement(this._targetFeedback),this._sourceFeedback.setBounds(s.x,s.y,i.width(),i.height()),this._sourceFeedback.updateCell(n.header().getCell(i.index())),this.$_setTarget(null),!0},_doDrag:function(t,e){var i,n,s=this.grid(),r=s.layoutManager();return!(s.panel().isVisible()&&e>=r.panelBounds().y&&e<r.panelBounds().bottom()||(this._request.cell().index().column().parent().count()<2||(this._currx=t=s.containerToGridX(t),t<r.gridBounds().x||t>r.clientRect().right()?this._startTimer():(this._stopTimer(),this._sourceFeedback.setX(t),this._sourceFeedback.setY(e),(i=(r=s.rfixedHeaderView())&&r.isVisible()&&r.containsInBounds(t,e)||(r=s.fixedHeaderView())&&r.isVisible()&&r.containsInBounds(t,e)||(r=s.headerView())&&r.containsInBounds(t,e)?r:i)&&(t-=(r=i.boundsByContainer()).x,e-=r.y,n=i.getCellAt(t,e,!0)),r=n?n.index().column():null,n&&r.isRoot()&&!s.canMoveToIndex(r.root().displayIndex())&&(n=null),this.$_setTarget(n))),0))},_doCanceled:function(){this._stopTimer()},_doCompleted:function(){var t,e;this._stopTimer(),this._target&&(t=b(this._request.cell(),Ya).index().column(),(e=this._target.index().column()).parent()===t.parent()?t.setDisplayIndex(e.displayIndex()):(t.setParent(e.parent()),t.setDisplayIndex(e.displayIndex()+("r"==this._dir?1:0))))},_doEnded:function(){this._stopTimer();var t,e=this.grid();e.removeFeedbackElement(this._targetFeedback),e.removeFeedbackElement(this._sourceFeedback),this._completed&&(t=(t=this._request.cell())&&t.index&&t.index().column(),e._fireColumnPropertyChanged(t,"displayIndex",t.displayIndex()))},getNextRequest:function(t,e){var i=this.grid(),n=this._request.cell().index();return this._stopTimer(),i.groupingOptions().isEnabled()&&n.dataColumn()&&n.dataColumn().isGroupable()&&i.panel().isVisible()&&(e-=i.y())<i.layoutManager().headerBounds().y&&0<=e?new ju(this._request.cell()):null},_startTimer:function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),60))},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},_timerHandler:function(){var t=this._grid,e=this._currx,i=t.layoutManager(),n=0;e>i.clientRect().right()?(n=Math.max(0,Math.min(3,(e-i.clientRect().right())/40)),this._interval=4-n,this._colLoop++):e<i.gridBounds().x&&(n=Math.max(0,Math.min(3,(i.gridBounds().x-e)/40)),this._interval=4-n,this._colLoop++),0<n&&(this._interval=4-n),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect().right()?t.setLeftCol(t.leftCol()+1):e<i.gridBounds().left()&&0<t.leftPos()&&t.setLeftCol(t.leftCol()-1),this.$_setTarget(null))},$_setTarget:function(t){var e,i,n,s,r,o,a,h,l=this.currentX(),d=this.currentY(),u=this._request.cell(),c=u.index().column(),_=t?t.index().column():null;c instanceof R&&c.isAncestorOf(_)||(e=t==this._target,(t=this._target=t)?(s=(i=this.grid()).leftPos(),e||(i.makeCellVisible(t.index()),i.leftPos!=s&&(i.refreshView(),i.updateNow())),s=t.boundsBy(i),t===u?this._targetFeedback._direction="none":!_.group()||_.group().isHorizontal()?(this._targetFeedback._direction="horz",_.parent()!=c.parent()||_ instanceof R?(n=(r=t.width()/2)<(o=l-s.x)?"r":"n",e&&n==this._dir||(this._dir=n,_ instanceof R&&(s.height=t.parent().height()),this._targetFeedback._reversed="r"==n)):e||(r=t.boundsByContainer().x,o=(c instanceof R?u.parent():u).boundsByContainer().x,this._targetFeedback._reversed=o<r)):(this._targetFeedback._direction="vert",_.parent()!=c.parent()||_ instanceof R?(n=(a=t.height()/2)<(h=d-s.y)?"r":"n",e&&n==this._dir||(this._dir=n,_ instanceof R&&(s.width=t.parent().width(),s.height=t.parent().height()),this._targetFeedback._reversed="r"==n)):(a=t.y(),h=(c instanceof R?u.parent():u).y(),this._targetFeedback._reversed=h<a)),this._targetFeedback.setRect(s),this._targetFeedback.setVisible(!0)):this._targetFeedback.setVisible(!1))}}),nu=e("ColumnMoveFeedback",is,{init:function(t,e){this._super(t,e),this._direction="none",this._reversed=!1,this._lineNone=new f("rgba(0, 0, 0, 0.7)",2),this._fillNone=new g("rgba(0, 0, 0, 0.2)"),this._line=new f("rgba(0, 0, 0, 1)",2),this._fill=new g(4278190080)},_doDraw:function(t){var e,i,n=this.clientRect();switch(this._direction){case"horz":this._reversed?(e=n.width,i=n.height-2,t.drawBoundsI(this._fill,null,e-3,1,3,i),t.drawLineI(this._line,e-1,1,e-7,1),t.drawLineI(this._line,e-1,i,e-7,i)):(i=n.height-2,t.drawBoundsI(this._fill,null,0,1,3,i),t.drawLineI(this._line,1,1,7,1),t.drawLineI(this._line,1,i,7,i));break;case"vert":this._reversed?(e=n.width-2,i=n.height,t.drawBoundsI(this._fill,null,1,i-3,e,3),t.drawLineI(this._line,1,i-1,1,i-7),t.drawLineI(this._line,e,i-1,e,i-7)):(w=n.width-2,t.drawBoundsI(this._fill,null,1,0,w,3),t.drawLineI(this._line,1,1,1,7),t.drawLineI(this._line,w,1,w,7));break;default:t.drawRectI(this._fillNone,this._lineNone,n)}}}),su=e("CellButtonTracker",Ss,{init:function(t){this._super(t.cell().grid(),"cellButtonTracker"),this._request=t,this._buttonIndex=t.buttonIndex(),this._clickIndex=t.cell().index().clone()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setButtonState(!0,!0,this._buttonIndex),!0},_doDrag:function(t,e){var i=this._request.cell(),n=i.ptInButton(i.mouseX(),i.mouseY());return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).setButtonState(n,n),!0},_canAccept:function(t,e){var i=this._request.cell(),t=i.containerToElement(t,e);return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).ptInButton(t.x,t.y)},_doCanceled:function(){},_doCompleted:function(){var t=this.grid(),e=this._clickIndex?t.getFocusedCellView(this._clickIndex):this._request.cell();t.activeTool().cellButtonClicked(e.index(),this._buttonIndex)},_doEnded:function(){var t=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):this._request.cell();t&&t.setButtonState(!1,!1,this._buttonIndex)}}),ru=e("EditButtonTracker",Ss,{init:function(t){this._super(t.cell().grid(),"editButtonTracker"),this._request=t,this._clickIndex=t.cell().index().clone()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setEditButtonState(!0,!0),!0},_doDrag:function(t,e){var i=this._request.cell(),n=i.ptInButton(i.mouseX(),i.mouseY());return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).setEditButtonState(n,n),!0},_canAccept:function(t,e){var i=this._request.cell(),t=i.containerToElement(t,e);return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).ptInEditButton(t.x,t.y)},_doCanceled:function(){},_doCompleted:function(){var t=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):this._request.cell(),e=t.index().clone();t instanceof Xh&&0<=t.innerIndex()&&e.setItemIndex(e.itemIndex()+t.innerIndex()),t.grid().activeTool().editButtonClicked(e)},_doEnded:function(){(this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):this._request.cell()).setEditButtonState(!1,!1)}}),ou=e("DataButtonTracker",Ss,{init:function(t){this._super(t.cell().grid(),"dataButtonTracker"),this._request=t,this._buttonIndex=t.buttonIndex(),this._clickIndex=t.cell().index().clone()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._request.cell().setPressed(!0),!0},_doDrag:function(t,e){var i=this._request.cell(),n=i.ptInDataButton(i.mouseX(),i.mouseY());return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).setPressed(n),!0},_canAccept:function(t,e){var i=this._request.cell(),t=i.containerToElement(t,e);return(i=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):i).ptInDataButton(t.x,t.y)},_doCanceled:function(){},_doCompleted:function(t,e){var i=this.grid(),i=this._clickIndex?i.getFocusedCellView(this._clickIndex):this._request.cell(),n=i._renderer,s=(null==this._buttonIndex?i:this)._buttonIndex,r=i.index().clone();i instanceof Xh&&r.setItemIndex(r.itemIndex()+i.innerIndex()),n=n&&n instanceof qc&&n._images[s]?n._images[s].name:void 0,i.grid().activeTool().imageButtonClicked(r,s,n)},_doEnded:function(){var t=this._clickIndex?this.grid().getFocusedCellView(this._clickIndex):this._request.cell();t&&t.setPressed(!1)}}),au=e("DragNDropTracker",Ss,{init:function(t){this._super(t.selectCells()._grid,"DragNDropTracker"),this._request=t,this._dragCells=t.selectCells(),this._targetFeedback=new hu(this._grid._dom,"DragMoveTargetFeedback"),this._targetFeedback.setAlpha(.5),this._timer=null},_doStart:function(t,e){var i=this.grid();if(i._fireInnerDragStart(this._dragCells))return i.addFeedbackElement(this._targetFeedback),this.$_setTarget(null),!0},_doDrag:function(t,e){if(this._dragCells){var i=this.grid(),n=i.layoutManager(),s=null;if(this._currx=t=i.containerToGridX(t),this._curry=e=i.containerToGridY(e),e>n.footerBounds().y||e<n.gridBounds().y||t<n.gridBounds().x||t>n.clientRect().right())this._startTimer();else if(this._stopTimer(),(s=i.findChildAt(t,e,!0))instanceof bh){n=i._fireInnerDragOver(s.index(),this._dragCells);if(!1===n)return void this.$_setTarget(null);this.$_setTarget(s,n)}}return!0},_canAccept:function(t,e){return!!this._target},_doCanceled:function(){this.$_setTarget(null)},_doCompleted:function(t,e){var i,n;this._target&&(i=this._target&&this._target instanceof bh&&this._target.index(),n=this._target&&this._target._grid)&&i&&n._fireInnerDrop(i,this._dragCells)},_doEnded:function(){var t=this.grid();this._stopTimer(),t.removeFeedbackElement(this._targetFeedback),t.setCursor(rs.DEFALUT)},_startTimer:function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),30))},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},_timerHandler:function(){var t=this._grid,e=this._currx,i=this._curry,n=t.layoutManager(),s=0,r=0,o=(i>n.footerBounds().y?(r=Math.max(0,Math.min(3,(i-n.footerBounds().y)/40)),this._interval=4-r,this._rowLoop++):i<n.gridBounds().y&&(r=Math.max(0,Math.min(3,(n.gridBounds().y-i)/40)),this._interval=4-r,this._rowLoop++),e>n.clientRect().right()?(s=Math.max(0,Math.min(3,(e-n.clientRect().right())/40)),this._interval=4-s,this._colLoop++):e<n.gridBounds().x&&(s=Math.max(0,Math.min(3,(n.gridBounds().x-e)/40)),this._interval=4-s,this._colLoop++),!1);0<Math.max(s,r)&&(this._interval=4-Math.max(s,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>n.footerBounds().y?t.topItem()+n.fullItemCount()<t.itemCount()&&(t.setTopIndex(t.topIndex()+1),o=!0):i<n.gridBounds().y&&t.topItem()>n.fixedItemCount()&&(t.setTopIndex(t.topIndex()-1),o=!0)),o||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>n.clientRect().right()?t.setLeftCol(t.leftCol()+1):e<n.gridBounds().left()&&0<t.leftPos()&&t.setLeftCol(t.leftCol()-1))},$_setTarget:function(t,e){var i,n;t!=this._target&&((t=this._target=t)?((n=this.grid()).body(),i=n._layoutManager,n=t.boundsBy(n),this._targetFeedback.setBounds(n.x,n.y,t.width(),t.height()),e&&(e.background&&this._targetFeedback.setBackground(e.background),e.line)&&this._targetFeedback.setLine(e.line),(t=n.clone()).x=t.y=0,t.setLeft(Math.max(0,i.fixedBounds().right()-n.x)),t.width=t.width-Math.max(0,n.right()-i.rfixedBounds().left()),t.height=Math.min(n.height,i.gridBounds().bottom()-n.y),this._targetFeedback._mask=t,this._targetFeedback.setVisible(!0)):this._targetFeedback.setVisible(!1),this._targetFeedback.invalidate())}}),hu=e("DragMoveFeedback",is,{init:function(t,e){this._super(t,e),this._line=new f("rgba(0, 0, 0, 1.0)",2,[1,1]),this._fill=new g("rgba(0, 0, 0, 0.2)")},setBackground:function(t){t!=this._fill.toText()&&(this._fill=new g(t))},setLine:function(t){t!=this._line.toText()&&(t=t.trim().split(","),this._line=new f(t[0],t[1]))},_doDraw:function(t){var e=this.clientRect();t.drawRectI(this._fill,this._line,e)}}),lu=e("SelectRequest",xs,{init:function(t,e,i){this._super(e),this._manager=t,this._style=i},manager:function(){return this._manager},selectStyle:function(){return this._style}}),du=e("SelectTracker",Ss,{init:function(t,e){this._super(t.cell().grid(),e),this._request=t},isStartWhenCreated:function(){return!(this._request.cell()instanceof rh||this._request.cell()instanceof Lh)},_doEnded:function(){var t=this._getItem();t&&this.grid()._fireSelectionEnded(t)},_getItem:function(){return null}}),uu=e("BlockSelectTracker",du,{init:function(t){this._super(t,"blockSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._rowPrevLoop=0,this._rowLoop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){var n=this.container().activeTool(),s=this._request.manager(),r=s&&s._grid&&s._grid.layoutManager(),n=n&&n instanceof zu?n.findElementAt(t,e,!1).index():this.grid().pointToIndex(B(t),B(e),!0);return r.isMergedCell(n)&&(n=this.grid().pointToIndex(B(t),B(e),!0)),s.setItemStyle(G.BLOCK),i?this._item=0<s.count()&&s.getItem(0):(s.clear(),this._item=s.add(n,n,G.BLOCK)),Boolean(this._item)},_doDrag:function(t,e){var i,n;return!!this._item&&(n=(i=this.grid()).layoutManager(),this._currx=t=i.containerToGridX(t),this._curry=e=i.containerToGridY(e),e>n.footerBounds().y||e<n.gridBounds().y||t<n.gridBounds().x||t>n.clientRect().right()?this._startTimer():(this._stopTimer(),(i=this.grid().pointToIndex(t,e,!0)).column()&&0<=i.I()&&this._item.resizeTo(i)),!0)},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t=this._grid,e=this._currx,i=this._curry,n=t.layoutManager(),s=0,r=0,o=(i>n.footerBounds().y?(r=Math.max(0,Math.min(3,(i-n.footerBounds().y)/40)),this._interval=4-r,this._rowLoop++):i<n.gridBounds().y&&(r=Math.max(0,Math.min(3,(n.gridBounds().y-i)/40)),this._interval=4-r,this._rowLoop++),e>n.clientRect().right()?(s=Math.max(0,Math.min(3,(e-n.clientRect().right())/40)),this._interval=4-s,this._colLoop++):e<n.gridBounds().x&&(s=Math.max(0,Math.min(3,(n.gridBounds().x-e)/40)),this._interval=4-s,this._colLoop++),!1);0<Math.max(s,r)&&(this._interval=4-Math.max(s,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>n.footerBounds().y?t.topItem()+n.fullItemCount()<t.itemCount()&&(t.setTopIndex(t.topIndex()+1),o=!0):i<n.gridBounds().y&&t.topItem()>n.fixedItemCount()&&(t.setTopIndex(t.topIndex()-1),o=!0)),o||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>n.clientRect().right()?(t.setLeftCol(t.leftCol()+1),o=!0):e<n.gridBounds().left()&&0<t.leftPos()&&(t.setLeftCol(t.leftCol()-1),o=!0)),o&&(s=t.pointToIndex(this._currx,this._curry,!1)).column()&&(s.itemIndex(Math.min(Math.max(0,s.I(),t.topIndex()),t.itemCount()-1)),this._item.resizeTo(s))}}),cu=e("RowsSelectTracker",du,{init:function(t){this._super(t,"rowsSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){var n=this.container().activeTool(),s=this._request.manager(),r=s&&s._grid&&s._grid.layoutManager(),n=n&&n instanceof Fd?n.findElementAt(t,e,!1).index():this.grid().pointToIndex(B(t),B(e),!0);return r.isMergedCell(n)&&(n=this.grid().pointToIndex(B(t),B(e),!0)),s.setItemStyle(G.ROWS),i?this._item=0<s.count()&&s.getItem(0):(s.clear(),this._item=s.add(n,n,G.ROWS)),Boolean(this._item)},_doDrag:function(t,e){var i,n;return!!this._item&&(n=(i=this.grid()).layoutManager(),this._currx=t=i.containerToGridX(t),this._curry=e=i.containerToGridY(e),e>n.footerBounds().y||e<n.gridBounds().y||t<0||t>n.clientRect().right()?this._startTimer():(this._stopTimer(),0<=(n=i.pointToIndex(t,e,!1)).I()&&this._item.resizeTo(n)),!0)},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t,e,i=this._grid,n=this._currx,s=this._curry,r=i.layoutManager();s>r.footerBounds().y?(e=Math.max(0,Math.min(3,(s-r.footerBounds().y)/40)),this._interval=4-e,this._loop++):s<r.gridBounds().y&&(e=Math.max(0,Math.min(3,(r.gridBounds().y-s)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,s>r.footerBounds().y?i.setTopIndex(i.topIndex()+1):s<r.gridBounds().y&&i.setTopIndex(i.topIndex()-1),(t=i.pointToIndex(this._currx,this._curry,!1)).itemIndex(Math.min(Math.max(0,t.I(),i.topIndex()),i.itemCount()-1)),this._item.resizeTo(t)):(n>r.clientRect().right()?(e=Math.max(0,Math.min(3,(n-r.clientRect().right())/40)),this._interval=4-e,this._colLoop++):n<0&&(e=Math.max(0,Math.min(3,(r.gridBounds().x-n)/40)),this._interval=4-e,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,n>r.clientRect().right()?i.setLeftCol(i.leftCol()+1):n<r.gridBounds().x&&0<i.leftPos()&&i.setLeftCol(i.leftCol()-1),0<=(t=i.pointToIndex(this._currx,this._curry,!1)).I())&&(t.itemIndex(Math.min(Math.max(0,t.I(),i.topIndex()),i.itemCount()-1)),this._item.resizeTo(t)))}}),_u=e("ColumnsSelectTracker",du,{init:function(t){this._super(t,"columnsSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._rowPrevLoop=0,this._rowLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(t,e,i){var n=this.container().activeTool(),n=n&&n instanceof zu?n.findElementAt(t,e,!1).index():this.grid().pointToIndex(B(t),B(e),!0),t=this._request.manager();return t.setItemStyle(G.COLUMNS),i?this._item=0<t.count()&&t.getItem(0):(t.clear(),this._item=t.add(n,n,G.COLUMNS)),Boolean(this._item)},_doDrag:function(t,e){var i,n;return!!this._item&&(n=(i=this.grid()).layoutManager(),this._currx=t=i.containerToGridX(t),this._curry=e=i.containerToGridY(e),t<n.gridBounds().x||t>n.clientRect().right()||e>n.footerBounds().y||e<0?this._startTimer():(this._stopTimer(),(n=i.pointToIndex(t,e,!1)).column()&&this._item.resizeTo(n)),!0)},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var t,e,i=this._grid,n=this._currx,s=this._curry,r=i.layoutManager();n>r.clientRect().right()?(e=Math.max(0,Math.min(3,(n-r.clientRect().right())/40)),this._interval=4-e,this._loop++):n<r.gridBounds().x&&(e=Math.max(0,Math.min(3,(r.gridBounds().x-n)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,n>r.clientRect().right()?i.setLeftCol(i.leftCol()+1):n<r.gridBounds().x&&0<i.leftPos()&&i.setLeftCol(i.leftCol()-1),(t=i.pointToIndex(this._currx,this._curry,!1)).column&&this._item.resizeTo(t)):(s>r.footerBounds().y?(e=Math.max(0,Math.min(3,(s-r.footerBounds().y)/40)),this._interval=4-e,this._rowLoop++):s<0&&(e=Math.max(0,Math.min(3,(r.gridBounds().y-s)/40)),this._interval=4-e,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,s>r.footerBounds().y?i.setTopIndex(i.topIndex()+1):s<r.gridBounds().y&&i.setTopIndex(i.topIndex()-1),(t=i.pointToIndex(this._currx,this._curry,!1)).column())&&this._item.resizeTo(t))}}),as=e("SelectionItem",null,{init:function(t){this._super(),this._manager=t},style:function(){a()},isSingleCell:function(){return!1},getBounds:function(){return null},contains:function(t){return!1},inflate:function(t,e){switch(t){case"left":return this._inflateLeft(e);case"right":return this._inflateRight(e);case"top":return this._inflateTop(e);case"bottom":return this._inflateBottom(e)}return!1},resizeTo:function(t){},intersectsWith:function(t){a()},mergeWith:function(t){a()},getData:function(t){a()},_resized:function(){this._manager&&this._manager._itemResized(this)},_inflateLeft:function(t){},_inflateRight:function(t){},_inflateTop:function(t){},_inflateBottom:function(t){},proxy:function(){var t=this._grid,e=this.getBounds(),i=t.getItem(e.R1()),t=t.getItem(e.R2());return{style:this.style(),startItem:e.R1(),startRow:i?i.dataRow():-1,startColumn:e.C1().name(),endItem:e.R2(),endRow:t?t.dataRow():-1,endColumn:e.C2().name()}}}),fu=e("SelectionManager",le,{init:function(t){this._super(),this._grid=t,this._items=[],this._locked=!1},destroy:function(){this._destroying=!0,this._grid=null,this._items=null,this._super()},exclusiveMode:!0,itemStyle:G.BLOCK,setExclusiveMode:function(t){t!=this._exclusive&&(this._exclusive=t,this.clear())},setItemStyle:function(t){t!=this._itemStyle&&(this._itemStyle=t,this.clear())},count:function(){return this._items.length},isSingleCell:function(){return 1==this._items.length&&this._items[0].isSingleCell()},lock:function(){this._locked=!0},unlock:function(){this._locked=!1},getItem:function(t){return this._items[t]},add:function(t,e,i,n){if(this._locked)return null;if(i==G.NONE)return this.clear(),null;this._exclusiveMode&&i!=this._style&&this.clear();var s=null;switch(i){case G.COLUMNS:s=new pu(this,t.column(),e.column());break;case G.SINGLE_COLUMN:s=new pu(this,t.column(),t.column());break;case G.ROWS:s=new gu(this._grid,t.I(),e.I());break;case G.SINGLE_ROW:s=new gu(this._grid,t.I(),t.I());break;case G.BLOCK:s=new mu(this,t,e);break;case G.SINGLE:s=new mu(this,t,t)}return this._addItem(s,n)},remove:function(t){var e;this._locked||0<=(e=this._items.indexOf(t))&&(this._items.splice(e,1),this.fireEvent(fu.REMOVED,t))},clear:function(t){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(fu.CLEARED,t))},containsItem:function(t){return!1},containsColumn:function(t){return!1},contains:function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return!0;return!1},normalize:function(){},_addItem:function(t,e){if(t)return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(fu.ADDED,t,e)),t;throw new Error("item is null")},_itemResized:function(t){this.fireEvent(fu.RESIZED,t)}}),mu=(fu.CHANGED="onSelectionChanged",fu.ADDED="onSelectionAdded",fu.REMOVED="onSelectionRemoved",fu.CLEARED="onSelectionCleared",fu.RESIZED="onSelectionResized",fu.ENDED="onSelectionEnded",e("BlockSelection",as,{init:function(t,e,i){this._super(t),this._grid=e.grid(),this._startIndex=e.clone(),this._endIndex=i.clone()},startIndex:function(){return this._startIndex},endIndex:function(){return this._endIndex},style:function(){return G.BLOCK},isSingleCell:function(){return $.areEquals(this._startIndex,this._endIndex)},getBounds:function(){var t,e;return this._startIndex.normalize(this._grid),this._endIndex.normalize(this._grid),$.areEquals(this._startIndex,this._endIndex)?ir.create(this._startIndex):(t=this._startIndex.C()?this._startIndex.C().dataRoot():null,e=this._endIndex.C()?this._endIndex.C().dataRoot():null,ir.createRange(this._startIndex.I(),t,this._endIndex.I(),e))},contains:function(t){return this.getBounds().containsIndex(t)},_inflateLeft:function(t){this._startIndex.C().distance()<=this._endIndex.C().distance()?t.C()!==this._startIndex.C()&&(this._startIndex.column(t.C()),this._resized()):t.C()!==this._endIndex.C()&&(this._endIndex.column(t.C()),this._resized())},_inflateRight:function(t){this._startIndex.C().distance()>this._endIndex.C().distance()?t.C()!==this._startIndex.C()&&(this._startIndex.column(t.C()),this._resized()):t.C()!==this._endIndex.C()&&(this._endIndex.column(t.C()),this._resized())},_inflateTop:function(t){t=Math.max(0,Math.min(this._grid.itemCount()-1,t.I()));this._startIndex.I()<=this._endIndex.I()?t!==this._startIndex.I()&&(this._startIndex.itemIndex(t),this._resized()):t!==this._endIndex.I()&&(this._endIndex.itemIndex(t),this._resized())},_inflateBottom:function(t){t=Math.max(0,Math.min(this._grid.itemCount()-1,t.I()));this._startIndex.I()>this._endIndex.I()?t!==this._startIndex.I()&&(this._startIndex.itemIndex(t),this._resized()):t!==this._endIndex.I()&&(this._endIndex.itemIndex(t),this._resized())},resizeTo:function(t){this._grid.isValid(t)&&!$.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},intersectsWith:function(t){return this.getBounds().intersectsWith(t.getBounds())},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e,i=this._grid,n=i.collectDataColumns(this._startIndex.C(),this._endIndex.C());if(!n||(e=n.length)<1)return null;for(var s,r,o,a,h=Math.min(this._startIndex.I(),this._endIndex.I()),l=Math.max(this._startIndex.I(),this._endIndex.I()),d=[],u=h;u<=l;u++)if(r=i instanceof Uu?b(i.getItem(u),Ar):i instanceof X_?b(i.getItem(u),L):null){for(s={},o=0;o<e;o++)s[(a=n[o]).fieldName()]=r.getData(a.dataIndex());if(d.push(s),0<t&&d.length==t)break}return d}})),gu=e("RowSelection",as,{init:function(t,e,i){this._super(t.selections()),this._grid=t,this._startRow=Math.min(e,i),this._endRow=Math.max(e,i)},startRow:function(){return this._startRow},endRow:function(){return this._endRow},topRow:function(){return Math.min(this._startRow,this._endRow)},bottomRow:function(){return Math.max(this._startRow,this._endRow)},style:function(){return G.ROWS},getBounds:function(){var t=this._grid.itemCount();return this._startRow=Math.max(0,Math.min(t-1,this._startRow)),this._endRow=Math.max(0,Math.min(t-1,this._endRow)),this._startRow<=this._endRow?ir.createRange(this._startRow,this._grid.getVisibleColumn(0),this._endRow,this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1)):ir.createRange(this._endRow,this._grid.getVisibleColumn(0),this._startRow,this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1))},contains:function(t){return t.I()>=this.topRow()&&t.I()<=this.bottomRow()},_inflateTop:function(t){t=t.I();t!=this.topRow()&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this._grid.itemCount()-1,t)):this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,t)),this._resized())},_inflateBottom:function(t){t=t.I();t!=this.bottomRow()&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this._grid.itemCount()-1,t)):this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,t)),this._resized())},resizeTo:function(t){t=Math.max(0,t.I());t!=this._endRow&&(this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,t)),this._resized())},intersectsWith:function(t){return this.getBounds().intersectsWith(t.getBounds())},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e=this._grid,i=e.collectDataColumns(e.getVisibleColumn(0),e.getVisibleColumn(e.visibleColumnCount()-1));if(!i)return null;var n,s,r,o,a=i.length;if(a<1)return null;for(var h=Math.max(0,Math.min(this._startRow,this._endRow)),l=Math.min(this._grid.itemCount()-1,Math.max(this._startRow,this._endRow)),d=[],u=h;u<=l;u++)if(n=e instanceof Uu?b(e.getItem(u),Ar):e instanceof X_?b(e.getItem(u),L):null){for(s={},r=0;r<a;r++)s[(o=i[r]).fieldName()]=n.getData(o.dataIndex());if(d.push(s),0<t&&d.length==t)break}return d}}),pu=e("ColumnSelection",as,{init:function(t,e,i){this._super(t),Tl.compareLoc(e,i)<=0?(this._startColumn=e,this._endColumn=i):(this._startColumn=i,this._endColumn=e)},startColumn:function(){return this._startColumn},endColumn:function(){return this._endColumn},leftColumn:function(){return this._startColumn.distance()<=this._endColumn.distance()?this._startColumn:this._endColumn},rightColumn:function(){return this._startColumn.distance()>this._endColumn.distance()?this._startColumn:this._endColumn},style:function(){return G.COLUMNS},getBounds:function(){return this._startColumn.distance()<=this._endColumn.distance()?ir.createRange(0,this._startColumn,this._startColumn.grid().itemCount()-1,this._endColumn):ir.createRange(0,this._endColumn,this._endColumn.grid().itemCount()-1,this._startColumn)},contains:function(t){t=t.column();return 0<=Tl.compareLoc(t,this._startColumn)&&Tl.compareLoc(t,this._endColumn)<=0},_inflateLeft:function(t){t=t.column();t!==this.leftColumn()&&(this._startColumn.distance()<=this._endColumn.distance()?this._startColumn=t:this._endColumn=t,this._resized())},_inflateRight:function(t){t=t.column();t!==this.rightColumn()&&(this._startColumn.distance()>this._endColumn.distance()?this._startColumn=t:this._endColumn=t,this._resized())},resizeTo:function(t){t.column()!==this._endColumn&&(this._endColumn=t.column(),this._resized())},intersectsWith:function(t){return this.getBounds().intersectsWith(t.getBounds())},mergeWith:function(t){},getData:function(t){if(0==(t=0<arguments.length?t:-1))return null;var e,i,n,s,r=this._startColumn.grid(),o=r.collectDataColumns(this._startColumn,this._endColumn);if(!o)return null;for(var a=r.itemCount(),h=[],l=0;l<a;l++)if(e=r instanceof Uu?b(r.getItem(l),Ar):r instanceof X_?b(r.getItem(l),L):null){for(i={},n=0,s=o.length;n<s;n++)i[o[n].fieldName()]=e.getData(o[n].dataIndex());if(h.push(i),0<t&&h.length==t)break}return h}}),wu=e("SelectionView",ss,{init:function(t){this._super(t,"selectionView"),this._item=null,this._background=wu.$$_defBackground,this._border=wu.$$_defBorder},background:null,border:null,setBackground:function(t){t!==this._background&&(this._background=t,this.invalidate())},setBorder:function(t){t!=this._border&&(this._border=t,this.invalidate())},updateElement:function(t,e){this._item=t,this.setBackground(e.background()),this.setBorder(e.border())},_doDraw:function(t){var e=this.container().gridView(),i=e.layoutManager().gridBounds(),i=e.translateBy(this,i);t.clipRectEx(i),t.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())}}),_n=(wu.$$_defBackground=new g(790532351),wu.$$_defBorder=new f(2854129919,1),e("ClipboardData",null,{init:function(){this._super()},lastColumn:function(){a()},getText:function(t,e,i){a()},getCellText:function(t,e,i){a()},getRows:function(t,e,i){a()},getCell:function(t,e,i){a()}})),vu=e("ClipboardSource",null,{init:function(t,e){this._super(),this._lines=[],this._colCount=0,this._blockPaste=!1,this.$_parseQuoted(t,e)},rowCount:function(){return this._lines.length},colCount:function(){return this._colCount},isEmpty:function(){return 0==this._lines.length||0==this._colCount},isSingle:function(){return 1==this._lines.length&&1==this._colCount},isBlockPaste:function(){return this._blockPaste},get:function(t){return this._lines[t]},$_parseQuoted:function(t,e){var i,n,s,r,o=this._lines,a=[],h=t.length,l=0,d="";if(""===t)a.push(t),o.push(a),this._colCount=1;else{for(;l<h;)r=!1,C=t.charAt(l),i=l<h-1?t.charAt(l+1):"",'"'==C?s?n&&'"'==i?(d+=C,l++):n?n=!1:d+=C:n=s=!0:n||"\r"!=C&&"\n"!=C&&"\t"!=C?(s=!0,d+=C):("\t"==C&&(a.push(d),r=!0),"\r"!=C&&"\n"!=C||(a.push(d),this._colCount=Math.max(this._colCount,a.length),o.push(a),a=[],"\r"==C&&"\n"==i&&l++),d="",s=!1),l++;(0<(d=n?'"'+d:d).length||r)&&a.push(d),0<a.length&&(this._colCount=Math.max(this._colCount,a.length),o.push(a))}if(e&&e instanceof mu&&!e.isSingleCell()){var u=e._startIndex,c=e._endIndex;if(u&&c){for(var _=e._grid._dataRoots._dataRoots,f=u.C(),m=c.C(),f=(f instanceof R?f.first():f).dataRoot(),m=(m instanceof R?m.last():m).dataRoot(),g=Math.min(_.indexOf(f),_.indexOf(m)),p=Math.max(_.indexOf(f),_.indexOf(m)),w=0,v=(r1=Math.min(u.I(),c.I()),r2=Math.max(u.I(),c.I()),0),C=g;C<=p;C++)v+=!(_[C]instanceof M)&&_[C]instanceof R?_[C].calcHorz():1,w=Math.max(w,!(_[C]instanceof M)&&_[C]instanceof R?_[C].dataLevel():1);for(var w=(r2-r1+1)*w,l=0,y=o.length,x=0;x<y;x++){for(var I=o[x].slice(),b=I.length;b<v;b++)o[x].push(I[l]),l=l>=I.length?0:l;this._colCount=Math.max(this._colCount,o[x].length)}l=0;for(x=o.length;x<w;x++)o.push(o[l++]),l=l>=o.length?0:l}this._blockPaste=!0,this._startIndex=$.temp(e._grid,r1,_[g]instanceof M?_[g]:_[g].first())}}}),Cu=e("DefaultClipboardData",_n,{init:function(){this._super(),this._columns=null},lastColumn:function(){return this._columns?this._columns[this._columns.length-1]:null},getText:function(t,e,i){var n=t.grid(),s=this.$_rangeToCells(t,null,e),r=[];if(n.copyOptions().isIncludeHeaderText())for(var o=0,a=s.length;o<a;o++){for(var h=[],l=0,d=(g=s[o]).length;l<d;l++)(f=b(g[l],M))?(m=f.header().displayText(),h.push(m)):h.push("");r.push(h.join("\t"))}for(var u=e.R1();u<=e.R2();u++){var c=n.getItem(u);if(0<=c.dataRow()||H.isInserting(c.itemState()))for(var _=0;_<s.length;_++){for(var f,m,g=s[_],h=[],p=0;p<g.length;p++)(f=b(g[p],M))&&!f._blankWhenCopy?(m=t.getData(u,f,i),h.push(m)):h.push("");var w=h.join("\t"),v=0<w.length;r.push(w)}}return r.join("\r\n")+(v?"":"\r\n")},getRange:function(t,e){for(var i,n=t.grid(),s=this.$_rangeToCells(t,null,e),r={},o=e.R1();o<=e.R2();o++){var a=n.getItem(o),h=a.dataRow(),l=[];if(0<=h||H.isInserting(a.itemState()))for(var d=0;d<s.length;d++)for(var u=s[d],c=0;c<u.length;c++){var _=b(u[c],M);_&&0<=_.dataIndex()&&(i=$.temp(n,a.index(),_),n.copyOptions().isCutReadOnlyCell()||n._editOptions.isWritable())&&t.$_cellWritable(i,null,null,!0)&&l.push(_.dataIndex())}r[h]=l}return r},getCellText:function(t,e,i){var n="";return t.grid().copyOptions().isIncludeHeaderText()&&(n=e.dataColumn().header().displayText()+"\r\n"),(null==(n+=t.getData(e.itemIndex(),e.dataColumn(),i))?"":n)+""},prepareData:function(t,e,i){return this._rows=this.$_getRows(t,e,i)},$_getRows:function(t,e,i){if(null==e)return null;var n=i.grid(),s=n.pasteOptions().isSelectBlockPaste()&&n.getSelection(),r=new vu(e,s);if(r.isEmpty())return null;if(r.isSingle())return r.get(0)[0];r.isBlockPaste()&&r._startIndex&&i.assign(r._startIndex);for(var o,a,h,l,d,u,c,e=t.getDataRoots(),s=new $(n,i.itemIndex(),i.column().dataRoot()),n=new $(n,i.itemIndex(),e[e.length-1]),i=ir.create(s,n),_=this.$_rangeToCells(t,r,i),f=[],m=0,g=r.rowCount();m<g;){for(o={columns:[],values:[]},a=0;a<_.length&&m<g;a++,m++)for(d=_[a],l=r.get(m),o.columns.push(d),o.values.push(c=[]),u=Math.min(l.length,d.length),h=0;h<u;h++)d[h]?c.push(l[h]):c.push("");f.push(o)}return f},getRows:function(t,e,i){return this._rows},getCell:function(t,e,i){return!e||(e=new vu(e)).isEmpty()?null:e.get(0)[0]},$_rangeToCells:function(t,e,i){i.normalizeData();var n,s,r,o,a,h,l,d,u=i.C1(),i=i.C2(),c=(u!=u.dataRoot()&&(u=u.dataRoot()),i!=i.dataRoot()&&(i=i.dataRoot()),[]),_=t.getDataRoots(),f=this._columns=[],t=_.indexOf(u),m=_.indexOf(i);if(t<0)throw u.name+" is not data root column.";if(m<0)throw i.name+" is not data root column.";for(s=t;s<=m;s++)f.push(_[s]);for(a=f.length,s=h=0;s<f.length;s++)if(h+=this.$_calcWidth(f[s]),e&&h>=e.colCount()){h=Math.min(h,e.colCount()),f.length=a=s+1;break}for(l=1,s=d=0;s<a;s++)r=f[s],l=Math.max(l,this.$_calcHeight(r,h-d)),d+=r instanceof R?r.$_dataWidth:1;for(n=0;n<l;n++)c.push([]);for(n=0;n<l;n++)for(o=0;o<h;o++)c[n].push(null);for(s=d=0;s<a;s++)r=f[s],this.$_setFields(r,c,d,0),d+=r instanceof R?r.$_dataWidth:1;return c},$_calcHeight:function(t,e){if(e<1)return 0;var i,n,s,r=1,o=b(t,R);if(o&&0<(n=o.visibleCount())){if(o.isVertical())for(i=r=0;i<n;i++)r+=this.$_calcHeight(o.getVisibleItem(i),e);else for(i=0;i<n&&0<e;i++)s=o.getVisibleItem(i),r=Math.max(r,this.$_calcHeight(s,e)),e-=s instanceof R?s.$_dataWidth:1;o.$_dataHeight=r}else o&&(o.$_dataHeight=1);return r},$_calcWidth:function(t){var e,i,n=1,s=b(t,R);if(s&&0<(i=s.visibleCount())){if(s.isHorizontal())for(e=n=0;e<i;e++)n+=this.$_calcWidth(s.getVisibleItem(e));else for(e=0;e<i;e++)n=Math.max(n,this.$_calcWidth(s.getVisibleItem(e)));s.$_dataWidth=n}else s&&(s.$_dataWidth=1);return n},$_setFields:function(t,e,i,n){var s,r,o,a,h=b(t,R);if(h)if(h.isVertical())for(s=n,o=0;o<h.visibleCount();o++)a=h.getVisibleItem(o),this.$_setFields(a,e,i,s),s+=a instanceof R?a.$_dataHeight:1;else for(r=i,o=0;o<h.visibleCount();o++)a=h.getVisibleItem(o),this.$_setFields(a,e,r,n),r+=a instanceof R?a.$_dataWidth:1;else e[n].length>i&&(e[n][i]=b(t,M))}}),yu=e("ClipboardItem",Lr,{init:function(){this._super(),this._dataSource=null,this._values=null,this._dataRow=-1},setValues:function(t){this._values=t},id:function(){return NaN},parent:function(){return null},root:function(){return this},childIndex:function(){return-1},level:function(){return 1},isLeaf:function(){return!0},isVisible:function(){return!0},provider:function(){return null},dataSource:function(){return this._dataSource},setDataSource:function(t){this._dataSource=t},dataRow:function(){return this._dataRow},dataId:function(){return this.dataSource().getRowId(this._dataRow)},setDataRow:function(t){this._dataRow=t},rowState:function(){return v.NONE},itemState:function(){return H.NORMAL},isChecked:function(){return!1},setChecked:function(t){},isCheckable:function(){return!0},setCheckable:function(t){},isEditable:function(){return!1},isReadOnly:function(){return!1},setReadOnly:function(t){},isResizable:function(){return!1},getRowData:function(){return null},getRowObject:function(){for(var t,e,i=this.dataSource(),n=i.fieldCount(),s={},r=0;r<n;r++)t=i.getOrgFieldName(r),e=this._values[r],s[t]=e;return s},canEdit:function(){return!1},makeVisible:function(){},getData:function(t){return this._values[t]}}),xu=e("ClipboardIndex",$,{init:function(t,e){this._super(),this._item=e},item:function(){return this._item}}),Iu=e("ClipboardManager",null,{init:function(t){this._super(),this._grid=t,this._data=new Cu,this._appendingItem=new yu,this._appendingIndex=new xu(t,this._appendingItem),this._pasting=!1},destroy:function(){this._destroying=!0,this._grid=null,this._data=null,this._appendingItem=null,this._appendingIndex=null,this._super()},grid:function(){return this._grid},dataSource:function(){return this._dataSource},copyEmptyToClipboard:function(){return""},copyToClipboard:function(t){return this._data.getText(this,t,!0)},cutToClipboard:function(t){return{data:this._data.getText(this,t,!0),rowFields:this._data.getRange(this,t)}},copyCellToClipboard:function(t){return this._data.getCellText(this,t,!0)},cutCellToClipboard:function(t){var e=t.dataRow(),i={},n=this.grid();return(n.copyOptions().isCutReadOnlyCell()||n._editOptions.isWritable())&&this.$_cellWritable(t,null,null,!0)?i[e]=[t.dataField()]:i[e]=[],{data:this._data.getCellText(this,t,!0),rowFields:i}},prepareRows:function(t,e){e=this._data.prepareData(this,e,t);return"string"==typeof e||1==e.length?1:e.length},pasteFromClipboard:function(t,e,i){var n=this._grid&&this._grid.dataSource(),n=(this._appendingItem.setDataSource(n),t.clone());(t=this.$_checkIndex(t))&&this._grid.isValid(t)&&(null!=e&&null!=(e=this._data.getRows(this,e,t))&&("string"==typeof e?this.$_pasteSingleCell(t,e,!0):1==e.length?this.$_pasteSingleLine(t,e[0],!0):1<e.length&&this.$_pasteMultiLines(t,e,!0,i)),$.areEquals(t,n)||this._grid.setFocusedIndex(n,!1,!1))},pasteCellFromClipboard:function(t,e){(t=this.$_checkIndex(t))&&this._grid.isValid(t)&&null!=e&&(e=this._data.getCell(this,e,t),this.$_pasteSingleCell(t,e,!0))},getDataRoots:function(){return this._grid.getDataRootColumns()},getData:function(i,n,t){function e(t){var e;return a._lookupDisplay&&(n.labelField()||n.isLookupDisplay())?(e=$.temp(h,i,n),h.body().getCellSimple(e).getTextFromItem(l)):t}var s,r,o,a,h=this._grid,l=h.getItem(i);if(l&&(H.isInserting(l.itemState())||0<=l.dataRow())&&n&&null!=(s=h.dataSource().getField(n.dataIndex()))){if(o=l.getData(n.dataIndex()),(a=this._grid.copyOptions()).isCopyDisplayText()){var d=$.temp(h,i,n),d=h._body.getCell(d),u=new bh(!1);if(u._parent=h,u.updateCell(d),u._renderer&&u._renderer instanceof Fc&&u._renderer._getText)return u._renderer._getText(u);if(u.text())return u.text()}if(t)switch(s.dataType()){case S.DATETIME:r=o?a.dateWriter()?a.dateWriter().getText(o):o:"";break;case S.BOOLEAN:r=void 0!==o?a.boolWriter()?a.boolWriter().formatValue(o):o:"";break;case S.NUMBER:r=void 0===o||isNaN(o)?"":o;break;case S.OBJECT:r=o&&"object"==typeof o?JSON.stringify(o):null==o?"":o;break;default:r=e(o)}else switch(s.dataType()){case S.DATETIME:r=o||"";break;case S.BOOLEAN:r=void 0!==o?o:"";break;case S.NUMBER:r=void 0===o||isNaN(o)?"":o;break;case S.OBJECT:r=o&&"object"==typeof o?JSON.stringify(o):"";break;default:r=e(o)}return r=(r=null!=r?String(r):"")&&(0<=r.indexOf("\n")||0<=r.indexOf("\r\n")||'"'==r.charAt(0))?'"'+(r=r.replace(/\"/g,'""'))+'"':r}return""},$_checkIndex:function(t){var e;return t&&(t.normalize(this._grid),this._grid.isValid(t))&&this._grid.pasteOptions().isSelectionBase()&&0<this._grid.selections().count()&&(e=this._grid.selections().getItem(0).getBounds().firstCell(),t.setColumn(e.column()instanceof R?e.column().first():e.column()),t.setItemIndex(e.itemIndex())),t},$_createDate:function(){return new Cu},$_readValue:function(t,e,i){var n=I;switch(t.getField(e.dataIndex()).dataType){case S.NUMBER:n=Number(i);break;case S.DATETIME:n=new Date(i);break;case S.BOOLEAN:n=Boolean(i);break;default:n=i}return n},$_convertValue:function(t,e,i,n,s){var r,o=I,a=i.dataIndex(),h=t.getField(a);switch(h.dataType()){case S.NUMBER:o=NaN;n?(l=i.name(),d=i.editorOptions(),e.isApplyNumberFormat()&&(u=d&&d.editFormat||i.styles&&i.styles().numberFormat())&&(p=new Me(u)),(u=e.numberCharExpOfCol(l))&&(n=n.replace(u,"")),(u=e.numberSeparatorOfCol(l))&&(n=n.replace(u,".")),o=p?+parseFloat(n).toFixed(p._maxDigits):parseFloat(n),e.isApplyMaxLength()&&(n=String(o).split("."),d&&0<d.maxIntegerLength&&(n[0]=n[0].substr(0,d.maxIntegerLength)),n=n.join("."),d&&0<d.maxLength&&(n=n.substr(0,d.maxLength)),o=parseFloat(n))):""==n&&(o=null);break;case S.DATETIME:if(o=null,r=e.dateReaders(),n&&r)for(C=0;C<r.length&&!(o=r[C].toDate(n));C++);null===(o=null===o&&(o=new Date(n),isNaN(o.getTime()))?null:o)&&(o=h.readValue(n));break;case S.BOOLEAN:o=void 0;var l=e.boolReader();void 0===(o=n&&l?l.toBoolStrict(n):o)&&(o=h.readValue(n));break;default:if(n=String(n)){var d=i.editorOptions&&i.editorOptions(),u=i.editor()&&i.editor().toLowerCase();if("dropdown"===u||"multicheck"===u){var c=e._checkDomainOnly&&d.domainOnly,_=e._convertLookupLabel,f=-1,m=[],g=[];if(c||_)if(d.values&&0<d.values.length)g=d.values,m=d.labels;else if(i.lookupSource()){for(var p=i.lookupSource(),w=i.lookupKeyFieldIds(),v=[],C=0;C<w.length-1;C++)v.push(s[w[C]]);l=p.getTextDomain(v),g=l&&l.keys,m=l&&l.values}else i._lookupValues&&0<i._lookupValues.length&&(g=i._lookupValues,m=i._lookupLabels);if("dropdown"===u)n=_&&g&&m&&g.indexOf(n)<0&&0<=(f=m.indexOf(n))?g[f]:n,n=!(g&&0<=g.indexOf(n))&&c?"":n;else if("multicheck"===u){for(var y=[],C=0,x=(o=k(n)?n:n&&n.split?n.split(i.valueSeparator()):[n]).length;C<x;C++)n=_&&g&&m&&g.indexOf(o[C])<0&&0<=(f=m.indexOf(o[C]))?g[f]:o[C],g&&0<=g.indexOf(n)?y.push(n):c||y.push(o[C]);n=y.join(i.valueSeparator())}}else e.isApplyMaxLength()&&d&&0<d.maxLength&&(n=n.substr(0,d.maxLength)),i.textInputCase()==ds.LOWER?n=n.toLocaleLowerCase():i.textInputCase()==ds.UPPER&&(n=n.toLocaleUpperCase())}o=n}return o},$_removeChars:function(t,e){if(e)for(;;){var i=t.replace(e,"");if(i.length==t.length)break;t=i}return t},$_fireRowsPasted:function(t){for(var e=this._grid,i=[],n=0;n<t.length;n++)i.push(e.getItemIndexOfRow(t[n]));0<i.length&&e.$_rowsPasted(i)},$_fireCellPasting:function(t,e){return this._grid.$_cellPasting(t,e)},$_cellWritable:function(t,e,i,n){var s=this._grid;if(n){if(s.copyOptions().isCutReadOnlyCell())return!0}else{n=this.$_fireCellPasting(t,i);if("boolean"==typeof n)return n;if(!s.pasteOptions().isCheckReadOnly())return!0}var r=!0,i=s.fixedOptions(),n=s.getDataCellStyle(t.dataRow(),t.dataField()),o=s.getCellWritable(t);if(n){if(void 0!==(r=n.calcWritable()))return r}else if(void 0!==o)return o;if(t.isFixedCol()&&!i.isEditable()||t.isFixedRow()&&!i.isRowEditable())return!1;n=t.item()&&t.item().itemState();switch(e||n){case H.NORMAL:case H.FOCUSED:case H.UPDATING:r=s.canUpdate(t.item(),t.dataField());break;case H.INSERTING:case H.APPENDING:r=!0}return r&&t.dataColumn().isEditable()&&!t.dataColumn().isReadOnly()},$_applyMaskValue:function(t,e){t=this.grid().editController().getCellEditor2(t);return(mask=t.mask&&t.mask())?(mask.clearBuffer(),mask.writeBuffer(e,!0),mask.checkValid()?mask.getStripValue():null):e},$_applyInputChars:function(t,e){var i,n,t=this.grid().editController().getCellEditor2(t);if((i=t.inputCharacters())&&(n=new RegExp("[^"+i+"]","g")).test(e))return e.replace(n,"");if((i=t.ignoreCharacters())&&(n=new RegExp("["+i+"]","g")).test(e))return e.replace(n,"");return e},$_pasteSingleCell:function(t,e,i){var n=this._grid,s=n.dataSource(),r=t.dataColumn(),o=n.pasteOptions();if(null!=e&&s&&r&&n._editOptions.isEditable()&&!n._editOptions.isReadOnly()&&t.item().canEdit()){(e=e.lastIndexOf("\r\n")==e.length-1?e.substr(0,e.length-2):e).lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1)),i=i?this.$_convertValue(s,o,r,e,t.item()&&t.item().getRowData()):this.$_readValue(s,r,e),i=o.isApplyEditMask()?this.$_applyMaskValue(t,i):i;i=o.isApplyInputChars()?this.$_applyInputChars(t,i):i;if(this.$_cellWritable(t,null,i))if(n.isItemEditing()||o.isStartEdit()&&n.edit(t)){var a,s=(a=t.item()).getData(t.dataField());n.setCellUpdateEventLock(o.isNoEditEvent());try{a.setData(r.dataIndex(),i)}finally{n.setCellUpdateEventLock(!1)}n.validateCellCommit(t,t.item().getData(t.dataField())),n.$_editRowPasted(a,[t.dataField()],[s],[i]),n.refreshView()}else{this._pasting=!0;try{var h,l=n.validationManager(),d=o.isForceRowValidation(),u=o.isForceColumnValidation(),c=(a=t.item(),(h=d||u?a.getRowData():[])[r.dataIndex()]=i,this._appendingItem.setValues(h),H.isInserting(a.itemState()));this._appendingItem.setDataRow(a.dataRow()),this._appendingItem.setIndex(a.index()),this._appendingIndex.setColumn(null),this._appendingIndex.setItemIndex(t.itemIndex()),d&&(n.validationManager().hasRowValidation()&&n.validationManager().validateRow(this._appendingItem,!1,!0),n._fireValidateRow(this._appendingItem,c,this._appendingItem.getRowObject())),u&&(this._appendingIndex.setColumn(r),l.validateCell(this._appendingIndex,!1),n._fireValidateCell(this._appendingIndex,!1,this._appendingItem.getData(r.dataIndex()))),n.updatePastedRow(a,h,!d)}finally{this._pasting=!1}}}},$_pasteSingleLine:function(t,e,i){var n,s,r,o=this._grid,a=(o.itemSource(),o.dataSource()),h=!1,l=o.pasteOptions(),d=o.editOptions();if(a&&d.isEditable()&&!d.isReadOnly()&&a){if(o.isItemEditing()||l.isStartEdit()&&o.edit(t)){for(var u=[],c=[],d=t.column(),_=t.item(),f=[],m=Math.min(e.columns.length,e.values.length),g=0;g<m;g++)for(s=e.columns[g],n=e.values[g],r=0;r<n.length;r++){var p=s[r],w=n[r];if(p){c.push(_.getData(p.dataIndex()));var v=$.temp(o,t.itemIndex(),p),C=i?this.$_convertValue(a,l,p,w,_&&_.getRowData()):this.$_readValue(a,p,w);C=l.isApplyEditMask()?this.$_applyMaskValue(v,C):C,C=l.isApplyInputChars()?this.$_applyInputChars(v,C):C,o.setCellUpdateEventLock(l.isNoEditEvent());try{(y=this.$_cellWritable(v,null,C))&&_.setData(p.dataIndex(),C)}finally{o.setCellUpdateEventLock(!1)}y&&(t.column(p),o.validateCellCommit(t,t.item().getData(p.dataIndex())),u.push(p.dataIndex()),f[p.dataIndex()]=C,h=!0)}}h&&(o.$_editRowPasted(_,u,c,f),t.column(d),o.refreshView())}else{this._pasting=!0;try{var y,x=o.validationManager(),I=l.isForceRowValidation(),b=l.isForceColumnValidation(),E=this._appendingItem;for(_=t.item(),E.setIndex(_.index()),E.setDataRow(_.dataRow()),f=I||b?_.getRowData():[],E.setValues(f),m=Math.min(e.columns.length,e.values.length),g=0;g<m;g++)for(s=e.columns[g],n=e.values[g],r=0;r<n.length;r++)(p=s[r])&&(v=$.temp(o,t.itemIndex(),p),C=i?this.$_convertValue(a,l,p,n[r],_,_.getRowData()):this.$_readValue(a,p,n[r]),C=l.isApplyEditMask()?this.$_applyMaskValue(v,C):C,C=l.isApplyInputChars()?this.$_applyInputChars(v,C):C,y=this.$_cellWritable(v,null,C))&&(f[p.dataIndex()]=C,h=!0);if(h){var R=H.isInserting(_.itemState());if(this._appendingItem.setValues(f),this._appendingItem.setIndex(_.index()),this._appendingItem.setDataRow(_.dataRow()),this._appendingIndex.setColumn(null),this._appendingIndex.setItemIndex(t.itemIndex()),I&&(x.hasRowValidation()&&x.validateRow(this._appendingItem,R,!0),o._fireValidateRow(this._appendingItem,R,this._appendingItem.getRowObject())),b)for(r=0;r<n.length;r++)this._appendingIndex.setColumn(s[r]),x.validateCell(this._appendingIndex,R),o._fireValidateCell(this._appendingIndex,R,this._appendingItem.getData(s[r].dataIndex()));o.updatePastedRow(_,f,!I)}}finally{this._pasting=!1}}o.selections().clear(),o.selections().add(t,new $(t.grid(),t.itemIndex(),this._data.lastColumn()),G.BLOCK)}},$_pasteMultiLines:function(e,t,i,n){var s=this._grid,r=s.dataSource();if(r){s.itemSource();var o=s.pasteOptions(),a=o.isCheckReadOnly();if(!a||s._editOptions.isEditable()&&!s._editOptions.isReadOnly()){var h,l,d,u,c,_,f,m=t.length,g=e.itemIndex(),L=r.fieldCount(),p=s.getDataColumns(!1),w=p.length,v=s.validationManager(),C=o.isForceRowValidation(),A=o.isForceColumnValidation(),y=this._appendingItem,x=this._appendingIndex,I=o.isEventEachRow(),b=[];o.isCommitEdit()&&s.commit(!1)||s.cancel(),c=s.itemCount(),y.setDataSource(r),n?r.beginUpdate():I||s.beginUpdate(),this._pasting=!0;try{for(h=0;h<m&&g<c;h++)try{if((d=s.getItem(g)).itemState()==H.APPENDING)break;for(;d&&d.dataRow()<0;)g++,d=s.getItem(g);if(null==d)break;var E,R,S=t[h],T=C||A?d.getRowData():[],k=!1,V=[],D=[];for(y.setValues(T),y.setIndex(d.index()),y.setDataRow(d.dataRow()),F=Math.min(S.columns.length,S.values.length),N=0;N<F;N++)for(f=S.columns[N],_=S.values[N],l=0;l<_.length;l++)(R=f[l])&&(V.push(d.getData(R.dataIndex())),O=$.temp(s,d.index(),R),E=i?this.$_convertValue(r,o,R,_[l],d&&d.getRowData()):this.$_readValue(r,R,_[l]),E=o.isApplyEditMask()?this.$_applyMaskValue(O,E):E,E=o.isApplyInputChars()?this.$_applyInputChars(O,E):E,M=this.$_cellWritable(O,null,E))&&(k=k||M||!a,T[R.dataIndex()]=E,D.push(R.dataIndex()));if(k)try{x.column(null),x.setItemIndex(d.index());var B=H.isInserting(d.itemState());if(C&&(v.hasRowValidation()&&v.validateRow(y,B,!0),s._fireValidateRow(y,B,y.getRowObject())),A)for(N=0;N<F;N++)for(f=S.columns[N],l=0;l<w;l++)R=p[l],x.column(R),v.validateCell(x,B),s._fireValidateCell(x,B,y.getData(R.dataIndex()));s.updatePastedRow(d,T,!C),!n&&I&&s.$_editRowPasted(d,D,V,T),b.push(d.dataRow())}catch(t){if(o.isStopOnError())throw t}g++}catch(t){throw g=Math.max(e.I(),g-1),s.setFocusedIndex(e,!1),s.selections().clear(),s.selections().add(e,new $(e.grid(),g,this._data.lastColumn()),G.BLOCK),t}if(h<m&&o.isEnableAppend()){for(;h<m;h++){S=t[h],T=[],y.setValues(T),y.setDataRow(-1),y.setIndex(-1);try{for(var O,M,D=[],F=Math.min(S.columns.length,S.values.length),N=0;N<F;N++){for(f=S.columns[N],_=S.values[N],l=0;l<_.length;l++)(R=f[l])&&(O=$.temp(s,-1,R),E=i?this.$_convertValue(r,o,R,_[l],T):this.$_readValue(r,R,_[l]),E=o.isApplyEditMask()?this.$_applyMaskValue(O,E):E,E=o.isApplyInputChars()?this.$_applyInputChars(O,E):E,M=this.$_cellWritable(O,H.APPENDING,E))&&(T[R.dataIndex()]=E,D.push(R.dataIndex()));if(o.isFillColumnDefaults())for(l=0;l<w;l++)void 0===T[(R=p[l]).dataIndex()]&&(T[R.dataIndex()]=R.defaultValue());if(o.isFillFieldDefaults())for(l=0;l<L;l++)void 0===T[l]&&(u=r.getField(l),T[l]=u.defaultValue())}try{if(this._appendingIndex.column(null),this._appendingIndex.setItemIndex(-1),C&&(v.hasRowValidation()&&v.validateRow(y,!0,!0),s._fireValidateRow(y,!0,y.getRowObject())),o.isForceColumnValidation())for(l=0;l<w;l++)R=p[l],this._appendingIndex.column(R),v.validateCell(this._appendingIndex,!0),s._fireValidateCell(x,!0,y.getData(R.dataIndex()));var P=s.appendPastedRow(T);!n&&I&&(d=s.getItem(s.getItemIndexOfRow(P)),s.$_editRowPasted(d,D,[],T)),b.push(P)}catch(t){if(o.isStopOnError())throw t}}catch(t){throw g=Math.max(e.I(),s.itemCount()-1),s.setFocusedIndex(e,!1),s.selections().clear(),s.selections().add(e,new $(e.grid(),g,this._data.lastColumn()),G.BLOCK),t}}g=n?-1:s.itemCount()}}catch(t){throw t}finally{this._pasting=!1,n?(r.endUpdate(),g<0&&(g=r.rowCount())):I||s.endUpdate(!0),!n&&I||this.$_fireRowsPasted(b)}s.setFocusedIndex(e,!1),s.selections().clear(),s.selections().add(e,new $(e.grid(),g-1,this._data.lastColumn()),G.BLOCK)}}}}),as=e("MobileSelectionTool",Ji,{init:function(t){this._super(t,"mobileSelectionTool"),this._clickElement=null,this._clickCell=null,this._clickHandle=null},destroy:function(){this._super()},_doActivate:function(){this._super(),this._grid.addFocusElement(this._focusView),this._grid.addRowFocusElement(this._rowFocusView)},_doDeactivate:function(){this._super(),this._grid.removeFocusElement(this._focusView),this._grid.removeRowFocusElement(this._rowFocusView)},_doMouseDown:function(t,e,i,n,s,r){(this._tracker=this.onTouch(r,t,e))&&this._tracker.start(t,e)},_doMouseMove:function(t,e,i,n,s){var r=this._grid,r=r&&r._editController;this._tracker?(s.cancelable&&s.preventDefault(),this._tracker.move(t,e)):r&&r._commander&&r._commander.isVisible()&&r._commander.invalidate(!1,!0)},_doMouseUp:function(t,e){this._tracker?(this._tracker.stop(t,e),this._tracker=null):this.onTap(t,e)},_doLayoutChanged:function(t,e){this._resetFocusedView()},_doFocusedIndexChanging:function(t){},_doFocusedIndexChanged:function(t,e){this._resetFocusedView()},_doDblClick:function(t,e){this.onDoubleTap(t,e)},_resetFocusedView:function(){var t,e,i,n,s,r=this._grid,o=this.focused(),a=r.layoutManager(),h=r.displayOptions();r.displayOptions().isFocusVisible()&&r.isValid(o)&&(i=this._grid.getFocusedCellView())&&0<(e=i.boundsBy(r)).width&&0<e.height?(r._container.$_rich&&(e.x++,e.y++),this._focusView.setRect(e),this._focusView.setEditing(r.isEditing(),i.getButtonWidth?i.getButtonWidth():0),this._focusView.setVisible(!0)):this._focusView.setVisible(!1),a._gridBounds&&h.isRowFocusVisible()&&r.isValid(o)&&(e=o.I(),i=r.topIndex(),h=a.fixedItemCount(),o=a.itemCount(),t=e<h||i<=e&&e<=i+o)&&(o=0<h?a.fixedHeight()+r.fixedOptions().rowBarHeight():0,s=a.gridBounds(),e<h?n=a.itemBounds(Math.max(0,e)):(n=a.itemBounds(Math.max(0,e-i))).y=Math.max(n.y,o),n.y+=s.y,n.x=0,n.width=s.x+s.width,r._container.$_rich&&(n.x++,n.y++),this._rowFocusView.setRect(n)),this._rowFocusView.setVisible(t),this._focusView.isVisible()&&r._resetFocusMask(),this._rowFocusView.isVisible()&&r._resetRowFocusMask()},_checkCellClicked:function(t){var e,i=this.grid();i.editOptions().isCheckable()&&(e=i.checkBar(),(t=t.item()).isCheckable())&&(e.isShowGroup()||0<=t.dataRow())&&(i.makeItemVisible(t.index()),i.itemSource().checkItem(t,!t.isChecked(),e.isExclusive(),!0))},_checkAllClicked:function(t){var e=this.grid(),i=e.checkBar();!e.isEmpty()&&e.editOptions().isCheckable()&&(i.isShowAll()&&!i.isExclusive()?(t.setChecked(!t.isChecked()),e.itemSource().checkAll(t.isChecked(),i.isVisibleOnly(),i.isCheckableOnly(),!0,i.isShowGroup())):this._checkBarHeadClicked())},_performRendererClick:function(t,e,i,n){var s,r,o=this.grid();!o.isEditing()&&t.isValid()&&e&&t.dataColumn()&&(s=e.renderer(),!o.isReadOnly(t)&&s.isEditable()?(r=t.item(),(o.isItemEditing(r)||o.canUpdate(r,t.dataField()))&&o.canWrite(t)&&o.edit(t)&&s.performEdit(t)):s.isClickable(t)&&s.performClick(e,i,n))},_columnHeaderClicked:function(t){this.grid()._fireColumnHeaderClicked(t)},_columnHeaderImageClicked:function(t){this.grid()._fireColumnHeaderImageClicked(t)},_footerCellClicked:function(t){this.grid()._fireFooterCellClicked(t)},_checkBarHeadClicked:function(t){this.grid()._fireCheckBarHeadClicked(t)},_checkBarFootClicked:function(t){this.grid()._fireCheckBarFootClicked(t)},_indicatorCellClicked:function(t){this.grid()._fireIndicatorCellClicked(t)},_stateBarCellClicked:function(t){this.grid()._fireStateBarCellClicked(t)},_rowGroupHeadFootClicked:function(){this.grid()._fireRowGroupHeadFootClicked()},_rowGroupHeaderFooterClicked:function(t,e){this.grid()._fireRowGroupHeaderFooterClicked(t,e)},_rowGroupBarClicked:function(t){this.grid()._fireRowGroupBarClicked(t)},_panelClicked:function(t){this.grid()._firePanelClicked(t)},_rowGroupPanelClicked:function(t){this.grid()._fireRowGroupPanelClicked(t)},_bodyEmptyClicked:function(){this.grid()._fireBodyEmptyClicked()},editorActivated:function(t){this._resetFocusedView()},editButtonClicked:function(t){var e=this.grid();e.makeCellVisible(),e.showEditor(t)&&e.editorButtonClick(t),this._super(t)}}),bu=e("MobileGridSelectionTool",as,{}),Eu=e("MobileTreeSelectionTool",as,{onTap:function(t,e){this._clickCell;var i,n,s=this._clickElement;s instanceof q_?(n=s.cellView().item())&&n.setExpanded(!n.isExpanded()):s instanceof Z_?(i=this.grid()).editOptions().isCheckable()&&(n=s.item())&&n.isCheckable()&&i.itemSource().checkItem(n,!n.isChecked(),i.checkBar().isExclusive(),!0):this._super(t,e)}}),Ru=(e("MobileFocusView",ss,{init:function(){this._super("mobileFocusView"),this._border=new f(4281545523,2),this._editBorder=new f(4283601655,2),this._editing=!1},setEditing:function(t,e){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this.invalidate())},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0);t.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,e-1,this.height()-1)}}),e("MobileContextMenu",ss,{init:function(){this._super("focusView"),this._border=new f(4281545523,2),this._editBorder=new f(4283601655,2),this._editing=!1},setMenu:function(t){},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0);t.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,e-1,this.height()-1)}}),e("MobileEditcommand",null,{init:function(t,e,i){this._super(),this._owner=t,this._name=e.name,this._label=e.label,this._styles=new d(t,"mobileEditCommand",{line:f.WHITE,figureBackground:g.WHITE}),e&&(this._callback=e.callback,this._renderer=e.renderer,e.styles)&&this._styles.extend(e.styles)},run:function(t,e){var i=this._callback;i?i(t,e):this._doRun(t,e)},_doRun:function(t,e){}})),Su=e("MobileEditCommandView",Ra,{init:function(t,e){this._super(t,"mobileEditCommandView"),this._model=e},model:function(){return this._model},_doRender:function(t,e){var i=this._model,n=i._styles,s=n.background(),r=n.line()||f.WHITE,n=n.figureBackground()||g.WHITE,i=i._renderer;t.drawRectI(s,r,e),i&&i(t,e,n)}}),Tu=e("MobileEditCommander",ss,{init:function(t,e,i){this._super(e._dom,"mobileEditCommander"),this._grid=e,this._owner=t,this._commands=[],this._views={},i&&this.addCommands(i)},destroy:function(){this._grid=null,this._owner=null,this._commands=null,this._views=null},itemWidth:30,itemHeight:25,addCommands:function(t){var e,i,n;if(k(t)&&0<(e=t.length)){for(i=0;i<e;i++)(n=t[i])&&n.name&&"function"==typeof n.callback&&"function"==typeof n.renderer&&(n=new Ru(this._grid,n),this._commands.push(n));this.updateElement()}},updateElement:function(){var t,e,i,n,s,r,o=this._views,a=this._commands.length;if(this.setVisible(0<a),this.isVisible()){for(this.clear(),n=this._itemWidth,s=this._itemHeight,t=r=0;t<a;t++)(i=o[(e=this._commands[t]).$_hash])||(i=new Su(this._dom,e),o[e.$_hash]=i),this.addChild(i),i.setBounds(r,0,n,s),r+=n;this.resize(r,s)}}}),ku=e("MobileEditController",Od,{init:function(t){this._super(t),this._grid=t,this._editIndex=new $,this._editor=null,this._commander=new Tu(this,t,[{name:"commit",callback:function(t,e){t.commitEditor()},renderer:function(t,e,i){Be(t,i,e,17)},styles:{background:"#080"}},{name:"cancel",callback:function(t){t.cancelEditor()},renderer:function(t,e,i){Oe(t,i,e,19)},styles:{background:"#F00"}}])},_hideEditor:function(){if(this._editor)try{this._editor.clear(),this._editor.setVisible(!1)}finally{var t=this._editor,e=document.activeElement;this._editor.endEdit(),this._editor=null,this._editable=!1,this._editorActivated(null),t&&t._editor==e&&this._grid._container._canvas.focus()}},_resetBounds:function(){this._super(),this.$_setCommanderPostion(this._commander)},$_setCommanderPostion:function(t){var e=this._grid.container(),i=this._grid.getEditCellBounds(this._editIndex),n=t.width(),s=t.height(),r=i.right()-n,o=i.y-s-5;o<0&&(e.width()-n>=i.right()?(r=Math.min(e.width()-n,i.right()+2),o=Math.max(0,i.y-2)):i.x>=n?(r=Math.max(0,i.x-n-2),o=Math.max(0,i.y-2)):e.height()-s>=i.bottom()&&(o=Math.min(e.height()-s,i.bottom()+2))),t.setPosition(r,o)},_editorActivated:function(t){this._super(t);var e=this._grid.container(),i=this._commander;t&&i&&this._grid.mobileOptions().isShowEditCommander()?(i._editIndex=t._editIndex,i.updateElement(),this.$_setCommanderPostion(i),e.addFeedback(i)):e.removeFeedback(i),this._grid.invalidate()}}),Du=e("MobileSelectionHandle",is,{init:function(t,e){this._super(t._dom,"mobileSelectionHandle"),this._view=t,this._dir=e,this.setWidth(21),this.setHeight(21)},view:function(){return this._view},dir:function(){return this._dir},propertyChanged:function(){this.invalidate()},_doDraw:function(t){t.drawBounds(this._background,this._border,5,5,11,11)}}),Bu=e("MobileSelectionView",ss,{init:function(t){this._super(t,"mobileSelectionView"),this._item=null,this._background=Bu.$$_defBackground,this._border=Bu.$$_defBorder,this.addElement(this._leftHandle=new Du(this,"left")),this.addElement(this._rightHandle=new Du(this,"right")),this.addElement(this._topHandle=new Du(this,"top")),this.addElement(this._bottomHandle=new Du(this,"bottom"))},background:null,border:null,item:function(){return this._item},setBackground:function(t){t!==this._background&&(this._background=t,this.invalidate())},setBorder:function(t){t!=this._border&&(this._border=t,this.invalidate())},setHandleBackground:function(t){this._leftHandle._background=t,this._rightHandle._background=t,this._topHandle._background=t,this._bottomHandle._background=t},setHandleBorder:function(t){this._leftHandle._border=t,this._rightHandle._border=t,this._topHandle._border=t,this._bottomHandle._border=t},updateElement:function(t,e){this._item=t,this.setBackground(e.background()),this.setBorder(e.border()),this.setHandleBackground(e.figureBackground()),this.setHandleBorder(e.figureBorder());var e=this.width(),i=this.height(),n=this._leftHandle.width(),s=this._leftHandle.height(),r=(e-n)/2,o=(i-s)/2,t=t.style(),a=t==G.BLOCK||t==G.SINGLE;this._leftHandle._context=this._context,this._rightHandle._context=this._context,this._topHandle._context=this._context,this._bottomHandle._context=this._context,this._leftHandle.setVisible(a||G.isColumn(t)),this._rightHandle.setVisible(this._leftHandle.isVisible()),this._topHandle.setVisible(a||G.isRow(t)),this._bottomHandle.setVisible(this._topHandle.isVisible()),this._leftHandle.isVisible()&&this._leftHandle.move(-n/2,o),this._rightHandle.isVisible()&&this._rightHandle.move(e-n/2,o),this._topHandle.isVisible()&&this._topHandle.move(r,-s/2),this._bottomHandle.isVisible()&&this._bottomHandle.move(r,i-s/2),this._leftHandle.invalidate(),this._rightHandle.invalidate(),this._topHandle.invalidate(),this._bottomHandle.invalidate()},_doDraw:function(t){var e=this.container().gridView(),i=e.layoutManager().gridBounds(),i=e.translateBy(this,i);t.clipRectEx(i),t.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())}}),_n=(Bu.$$_defBackground=new g(268435456),Bu.$$_defBorder=new f(4281545523,2),e("TapDragTracker",null,{init:function(t,e){this._super(),this._grid=t,this._name=e},grid:function(){return this._grid},name:function(){return this._name},start:function(t,e,i,n){return this._doStart(t,e,i,n)},stop:function(){},drag:function(t,e,i,n){return this._doDrag(t,e,i,n)},drop:function(t,e){this._doDrop(t,e)},cancel:function(){this._doCancel()},_doStart:function(t,e,i,n){return!0},_doDrag:function(t,e,i,n){return!0},_doDrop:function(t,e){},_doCancel:function(){}})),Ou=e("MobileScrollTracker",_n,{init:function(t){this._super(t,"mobileScrollTracker"),this._tapX=this._tapY=NaN,this._vertical=!0},_doStart:function(t,e,i,n){var t=i-t,e=n-e,s=this._grid;if(s.isEditing())switch(s.mobileOptions()._scrollOnEditing){case qs.CANCEL:s.cancelEditor(!0);break;case qs.COMMIT:s.commitEditor(!0);break;case qs.DEFAULT:}return this._vertical=Math.abs(e)>=Math.abs(t),this._vertical?this._grid.setTopIndex(this._grid.topIndex()+(0<e?-1:1)):this._grid.setLeftPos(this._grid.leftPos()-t),this._tapX=i,this._tapY=n,!0},_doDrag:function(t,e,i,n){var s=i-this._tapX,r=n-this._tapY,o=this._grid,a=Math.abs(r)>=Math.abs(s);if(a!=this._vertical&&(a&&Math.abs(r)>2*Math.abs(s)||!a&&Math.abs(s)>2*Math.abs(r))&&(this._vertical=a),this._vertical){if(5<Math.abs(r)){var a=o.topIndex(),h=o.layoutManager().fullItemCount(),r=0<r?-1:1;if(o.itemCount()<=a+h&&1==r||0==a&&-1==r)return!1;o.setTopIndex(o.topIndex()+r),this._tapY=n}}else o.setLeftPos(o.leftPos()-s),this._tapX=i;return!0}}),Mu=e("MobileRowSelectTracker",_n,{init:function(t,e){this._super(t,"mobileRowSelectTracker"),this._cell=e,this._item=null},_doStart:function(t,e,i,n){var s=this._grid._selections,r=this._cell.index();return s.clear(),this._item=s.add(r,r,G.ROWS),!0},_doDrag:function(t,e,i,n){i=this._grid.pointToIndex(i,n,!1);return 0<=i.I()&&this._item.resizeTo(i),!0}}),Fu=e("MobileColumnSelectTracker",_n,{init:function(t,e){this._super(t,"mobileColumnSelectTracker"),this._cell=e,this._item=null},_doStart:function(t,e,i,n){var s=this._grid,r=s._selections,s=s.selectOptions(),o=this._cell.index();return r.clear(),s.mode()!==ks.SINGLE||s.style()!==G.SINGLE_COLUMN&&s.style()!==G.COLUMNS?this._item=null:this._item=r.add(o,o,G.COLUMNS),!0},_doDrag:function(t,e,i,n){var s=this._grid,r=s.pointToIndex(i,n,!1);if(s.groupingOptions().isEnabled()&&r.dataColumn()&&r.dataColumn().isGroupable()&&s.panel().isVisible()&&n<s.layoutManager().headerBounds().y){n=s.panelView();if(n)return n.setState(Ku.GROUPING),s.isGrouped(r.column())||s.addGroupBy(n.groupingIndex(),r.column()),n.setState(Ku.NORMAL),!1}return r.column()&&this._item&&this._item.inflate(t<i?"right":"left",r),!0}}),Nu=e("MobileSelectHandleTracker",_n,{init:function(t,e){this._super(t,"mobileSelectHandleTracker"),this._handle=e},_doStart:function(t,e,i,n){return!0},_doDrag:function(t,e,i,n){i=this._grid.pointToIndex(i,n,!1);return 0<=i.I()&&this._handle.view().item().inflate(this._handle.dir(),i),!0}}),Lu=e("TabScrollThumbTracker",null,{init:function(t,e){this._super(),this._grid=t,this._thumb=e},start:function(t,e){this._thumb.setPressed(!0);var i=this._thumb.scrollBar(),t=i.containerToElement(t,e);i.isVertical()?this._offset=t.y-this._thumb.y():this._offset=t.x-this._thumb.x()},move:function(t,e){this.$_doScroll(t,e,tc.THUMB_TRACK)},stop:function(t,e){this._thumb.setPressed(!1),this.$_doScroll(t,e,tc.THUMB_END)},$_doScroll:function(t,e,i){var n=this._thumb.scrollBar(),s=n._maxPosition-n._min+1,r=n._buttonSize,t=n.containerToElement(t,e);n.isVertical()?(t.y-=this._offset,t.y=(t.y-r)*s/(n.height()-2*r-this._thumb.height()),n._doScroll(i,0,B(t.y))):(t.x-=this._offset,t.x=(t.x-r)*s/(n.width()-2*r-this._thumb.width()),n._doScroll(i,0,B(t.x)))}}),Au=(e("MobileResizer",ss,{init:function(){this._super("focusView"),this._border=new f(4281545523,2),this._editBorder=new f(4283601655,2),this._editing=!1},setEditing:function(t,e){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this.invalidate())},_doDraw:function(t){var e=this.width()-(this._editing?this._buttonWidth:0);t.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,e-1,this.height()-1)}}),e("GridContainer",cn,{init:function(t,e,i){this._super(t,e,i),this._createBackgroundElements(this.$_dom),this._gridView=this._createGridView(this.$_dom,this,i),this.addElement(this._gridView),this._prepareBorder(),this._prepareLayers(),this.setDefaultTool(this._createDefaultTool(),!0),this._sizeInfo=new O},destroy:function(){this._destroying=!0,this._watchTimer&&clearInterval(this._watchTimer),Q===this._gridView&&ut(null),this._gridView=null,this._super()},gridView:function(){return this._gridView},addFeedback:function(t){this._feedbackView.addElement(t)},removeFeedback:function(t){this._feedbackView.removeElement(t)},_createChildren:function(t){},_layoutChildren:function(t){this._sizeInfo.width=t.width,this._sizeInfo.height=t.height},setWatchTimer:function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},$_displayObserver:function(){var t=this._container.getBoundingClientRect(),e=parseInt(t.width),t=parseInt(t.height),i=this._sizeInfo;0<e&&0<t&&!this._container._resizeTimer&&(1<Math.abs(this._sizeInfo.width-e)||1<Math.abs(this._sizeInfo.height-t))&&(i.width=e,i.height=t,this.resetSize())},_beforeRender:function(t){this._gridView._beforeRender(t)},_afterRender:function(){this._super()},_doLayout:function(t){var e,i,t=t.clone();this._borderView&&(e=this._gridView._styles.border(),i=this._gridView.displayOptions(),this._borderView.setVisible(e&&0<e.width()),this._borderView.isVisible())&&(this._borderView._border=e,this._borderView.setRect(t),this._borderView.invalidate(),this._borderView.setDrawBorderTop(i.isDrawBorderTop()),this._borderView.setDrawBorderBottom(i.isDrawBorderBottom()),this._borderView.setDrawBorderLeft(i.isDrawBorderLeft()),this._borderView.setDrawBorderRight(i.isDrawBorderRight()),t.inflate(i.isDrawBorderLeft()?-e.width():0,i.isDrawBorderTop()?-e.width():0,i.isDrawBorderRight()?-e.width():0,i.isDrawBorderBottom()?-e.width():0)),this._gridView.setRect(t),this._feedbackView.setRect(t),t.x=t.y=0,this._gridView._doLayout(t)},_doDrawContainer:function(t,e){},_focusHandler:function(t){ut(this._gridView),this._gridView._exiting?delete this._gridView._exiting:this._gridView._focusHandler(t)},_focusinHandler:function(t){this._container.contains(t.target)&&this.gridView()&&this.gridView().isAccessbility()&&this._container.removeAttribute("aria-hidden"),this._super(t)},_focusoutHandler:function(t){this._container.contains(t.target)&&this.gridView()&&this.gridView().isAccessbility()&&this._container.setAttribute("aria-hidden","true"),this._super(t)},_createBackgroundElements:function(){},_createGridView:function(t,e,i){return new Uu(t,e,i)},_prepareBorder:function(){this.$_rich?(this._borderView=new Vu(this.$_dom),this.addElement(this._borderView)):this._container.style.border="1px solid #888"},_prepareLayers:function(){this._feedbackView=new ss(this.$_dom,"feedbackLayer"),this.addElement(this._feedbackView)},_createDefaultTool:function(){return new(xn&&_e()?bu:zu)(this)}})),Vu=e("GridBorderElement",ss,{init:function(t){this._super(t,"gridBorderView"),this._border=new f(4289374890),this.setMouseEnabled(!1)},drawBorderTop:!0,drawBorderBottom:!0,drawBorderLeft:!0,drawBorderRight:!0,_doDraw:function(t){var e=this._border.width(),i=B(e/2);this._drawBorderTop&&this._drawBorderBottom&&this._drawBorderLeft&&this._drawBorderRight?t.drawBoundsI(null,this._border,i,i,this.width()-e,this.height()-e):(this._drawBorderTop&&t.drawHorzLineI(this._border,0,this.width(),i),this._drawBorderBottom&&t.drawHorzLineI(this._border,0,this.width(),this.height()-Math.max(1,i)),this._drawBorderLeft&&t.drawVertLineI(this._border,0,this.height(),i),this._drawBorderRight&&t.drawVertLineI(this._border,0,this.height(),this.width()-Math.max(1,i)))}}),Pu=new O(-1e4,-1e4,100,100),T=e("GridBase",ss,{init:function(t,e,i){this._super(t,"gridView"),this._container=e,this._accessbility=i,this._shadowDom=e._shadowDom,this._offsetX=0,this._offsetY=0,e.$_rich&&(this._context=e._context,this._toolContext=new ts("toolContext",e),e.addContext(this._toolContext)),this._loading=!0,this._userMode=!1,this._userModeError=null,this._gridObjects=[],this._addGridObject(this._panel=this._createPanelModel()),this._addGridObject(this._header=new jo(this)),this._addGridObject(this._editBar=new Zo(this)),this._addGridObject(this._footer=this._createFooterModel()),this._addGridObject(this._indicator=new Jo(this)),this._addGridObject(this._stateBar=new Qo(this)),this._addGridObject(this._checkBar=new ta(this)),this._addGridObject(this._body=new ea(this)),this._addGridObject(this._rowGroup=new sa(this));var n,i=this._rootElement=new ss(t,"grid root view");this.addChild(i),(i=this._emptyView=this._createEmptyView(t)).setVisible(!1),this.addChild(i),i=this._debugView=new Aa(t,this),this.addChild(i),this._panelView=this._createPanelView(t,this._panel),this._bodyView=this._createBodyView(t,this._body,!1),this._fixedBodyView=this._createBodyView(t,this._body,!0),this._rfixedBodyView=this._createBodyView(t,this._body,!0,!0),this._mergeView=new Qh(t),this._fixedMergeView=new Qh(t,!0),this._rfixedMergeView=new Qh(t,!0,!0),this._mergeHeaderLayer=new Jh(t),this._headerView=new ka(t,this._header),this._fixedHeaderView=new ka(t,this._header,!0),this._rfixedHeaderView=new ka(t,this._header,!0,!0),this._summaryView=new Ba(t,this._header.summary()),this._fixedSummaryView=new Ba(t,this._header.summary(),!0),this._rfixedSummaryView=new Ba(t,this._header.summary(),!0,!0),this._indicatorView=new Oa(t,this._indicator),this._stateBarView=new Ma(t,this._stateBar),this._checkBarView=new Fa(t,this._checkBar),this._footerView=this._createFooterView(t,this._footer),this._fixedFooterView=new Da(t,this._footer,!0),this._rfixedFooterView=new Da(t,this._footer,!0,!0),this._rowGroupView=new Ph(t,this._rowGroup),this._indicatorHeadView=new ah(t),this._stateBarHeadView=new uh(t),this._checkBarHeadView=new fh(t),this._indicatorFootView=new hh(t),this._stateBarFootView=new ch(t),this._checkBarFootView=new mh(t),this._indicatorSummaryView=new dh(t),this._stateBarSummaryView=new _h(t),this._checkBarSummaryView=new gh(t),this._panelView&&this.addElement(this._panelView),this.addElement(this._summaryView),this.addElement(this._fixedSummaryView),this.addElement(this._rfixedSummaryView),this.addElement(this._mergeHeaderLayer),this.addElement(this._headerView),this.addElement(this._fixedHeaderView),this.addElement(this._rfixedHeaderView),this.addElement(this._indicatorView),this.addElement(this._stateBarView),this.addElement(this._checkBarView),this.addElement(this._indicatorHeadView),this.addElement(this._stateBarHeadView),this.addElement(this._checkBarHeadView),this.addElement(this._indicatorFootView),this.addElement(this._stateBarFootView),this.addElement(this._checkBarFootView),this.addElement(this._indicatorSummaryView),this.addElement(this._stateBarSummaryView),this.addElement(this._checkBarSummaryView),this.addElement(this._bodyView),this.addElement(this._fixedBodyView),this.addElement(this._rfixedBodyView),this.addElement(this._mergeView),this.addElement(this._fixedMergeView),this.addElement(this._rfixedMergeView),this.addElement(this._footerView),this.addElement(this._fixedFooterView),this.addElement(this._rfixedFooterView),this._addGroupView(),this._linesLayer=new La(t,this),this.addElement(this._linesLayer),this._selectionLayer=new ss(t,"selectionLayer"),this.addElement(this._selectionLayer),this._focusLayer=new ss(t,"focusLayer"),this.addElement(this._focusLayer),this._rowFocusLayer=new ss(t,"rowFocusLayer"),this.addElement(this._rowFocusLayer),this._scrollLayer=new ss(t,"scrollLayer"),this.addElement(this._scrollLayer),this._hscrollBar=null,this._vscrollBar=null,this._scrollCorner=null,this._scrolledTime=0,this._feedbackLayer=new ss(t,"feedbackLayer"),this.addElement(this._feedbackLayer),this.addFeedbackElement((e=t,(n=new yn).src="data:image/png;base64,"+ff,(e=new ss(e))._doDraw=function(t){t.aL(n,(this.width()-n.width)/2,(this.height()-n.height)/2,n.width,n.height)},e)),this._rootColumn=new Hu(this),this._dataRoots=new Gu,this._columnLayouts=new jl,this._columnLayout=null,this._orgColumns=[],this._orgColumned=!0,this._columnLayoutChanged=!1,this._columnsLock=!1,this._columnWidthsDirty=!1,this._columnsDirty=!1,this._itemProvider=null,this._lookupProvider=null,this._delegate=this._createDelegate(),this._eventHandler=this._delegate.createGridEventHandler(),this._eventHandler&&this.addListener(this._eventHandler),this._layoutManager=this._createLayoutManager(),this._heightMeasurer=null,this._toolTipManager=new No(this),this._clipboardManager=new Iu(this),this._progressManager=new ji(this._container._container),this._indicatorFootView.setRenderer(this._delegate.getFooterHeadRenderer()),this._indicatorSummaryView.setRenderer(this._delegate.getRowHeaderSummaryRenderer()),this._selections=new fu(this),this._selections.addListener(this),this._selectionViews=new he,this._editOptions=new ll(this),this._editorOptions=new dl(this),this._editController=this._createEditController(),this._validations=new Ao,this._validationManager=new Ho(this),this._columnSummaryRuntime=new pc,this._rowGroupSummaryRuntime=new wc,this._columnValidationRuntime=new Po,this._rowValidationRuntime=new Vo,this._displayOptions=new hl(this),this._copyOptions=new xl,this._pasteOptions=new Il,this._fixedOptions=new ul(this),this._selectOptions=new cl(this),this._sortingOptions=new fl(this),this._filteringOptions=new pl(this),this._groupingOptions=new yl(this),this._columnHeaderOptions=new vl(this),this._mobileOptions=new bl(this),this._styles=new d(this,"grid"),this._stylesDirty=!1,this.initStyles(),this._dataCellStyles=new bo(this),this._styleMap=null,this._resetting=!1,this._layouted=!1,this._focusing=!1,this._focusedIndex=new $,this._shadowIndex=new $,this._currentRow=-1,this._currentRowId=-1,this._vertScroll=0,this._horzScroll=0,this._imageLists={},this._delegate.prepareResources(),this._filterSelector=new To(this._container._container),this._toastManager=new Oo(this),this._popupMenuManager=new Sn(this.container()).addListener(this),this._contextMenu=null,this._dataCellRenderers=new Nc(this._delegate),this._groupFooterMergeManager=new nl,this._footerMergeManager=new il,this._headerSummaryMergeManager=new il,this._horzScrolling=!1,this._scrollTipView=null,this._topIndex=0,this._dataChanged=!1,this._cellUpdateEventLock=!1,this._updateLock=!1,this._rowChangeTimer=void 0,this._rowChangeTimerCallback=function(){this.$_checkCurrentRow(!0)}.bind(this),this.$_fixedColCount=this.$_fixedRowCount=0,this.$_fixedColEditable=this.$_fixedRowEditable=!0,this.$_editOptionsWritable=!1,this._tmpIndex=new $(this),this._productName="RealGridJS v1.0"},destroy:function(){for(var t in this._destroying=!0,this.closePopups(),this)this.hasOwnProperty(t)&&(this[t]instanceof Ko||this[t]instanceof Ya||this[t]instanceof Ra||this[t]instanceof sl||this[t]instanceof To)&&(this[t]=null);this._selectionViews=null,this._rowChangeTimerCallback=null,this._delegate&&!this._delegate._destroying&&this._delegate.destroy&&this._delegate.destroy(),this._delegate=null,this._debugView=null,this._footerView=null,this._selections=null,this._rowGroupView=null,this._summaryView=null,this._styles=null,this._dataCellRenderers=null,this._productName=null,this._imageLists=null,this._dataCellStyles=null,this._hscrollBar=null,this._vscrollBar=null,this._scrollCorner=null,this._prevLast=null,this._topIndex=null,this._prevTopIndex=null,this._leftPos=null,this._editController=null,this._shadowDom=null,this._heightMeasurer=null,$.$_temp._grid=null,$.$_temp._column=null,$.$_temp._itemIndex=null,this._scrollTipView=this._scrollTipView&&this._scrollTipView.destroy(),this._super()},stylesChanged:function(t){this._stylesDirty||(this._stylesDirty=!0,this.refreshView())},dataCellStyleAdded:function(t,e){e&&this.invalidateLayout()},dataCellStyleChanged:function(t,e){e&&this.invalidateLayout()},dataCellStyleRemoved:function(t,e,i){this.itemSource().removeCellStyle(e),i&&this.invalidateLayout()},dataCellStylesCleared:function(t){this.itemSource().clearCellStyles(),t&&this.invalidateLayout()},scrollBarWidth:16,scrollBarHeight:16,scrollThumbRadius:0,body:null,panel:null,header:null,editBar:null,footer:null,indicator:null,checkBar:null,stateBar:null,rowGroup:null,columnHeaderOptions:null,displayOptions:null,editOptions:null,editorOptions:null,copyOptions:null,pasteOptions:null,fixedOptions:null,selectOptions:null,sortingOptions:null,filteringOptions:null,groupingOptions:null,mobileOptions:null,styles:null,topIndex:0,leftPos:0,summaryMode:Ts.AGGREGATE,validations:null,sortMode:ms.AUTO,filterMode:vs.AUTO,userMode:!1,userModeError:null,changingMode:Ws.NORMAL,backgroundImage:null,keepNullFocus:!1,setUserMode:function(t){this._userMode=t},setUserModeError:function(t){this._userModeError=t},isAccessbility:function(){return this._accessbility},setStyles:function(t){t!==this._styles&&this._styles.extend(t)},setScrollBarWidth:function(t){(t=Math.max(4,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.refreshView())},setScrollBarHeight:function(t){(t=Math.max(4,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.refreshView())},setScrollThumbRadius:function(t){(t=Math.max(0,t))!=this._scrollThumbRadius&&(this._scrollThumbRadius=t,this.refreshView())},setChangingMode:function(t){t!=this._changingMode&&(t!==Ws.BEFORE_EDITCOMMIT&&(t=Ws.NORMAL),this._changingMode=t)},setPageSorting:function(t){},setBackgroundImage:function(t){if(t){this._backgroundImageElement&&(this.removeFeedbackElement(this._backgroundImageElement),this._backgroundImageElement.destroy(),this._backgroundImageElement=null);var r=new yn,t="object"==typeof t?t:{imageUrl:t};if(!t.imageUrl)return;r.src=t.imageUrl;var o=this._backgroundImageElement=new ss(this.$_dom,"backgroundImageLayer");o._grid=this,o._imageLocation=t.location||Ks.CENTER,o._paddingTop=t.padding||t.paddingTop||0,o._paddingBottom=t.padding||t.paddingBottom||0,o._paddingLeft=t.padding||t.paddingLeft||0,o._paddingRight=t.padding||t.paddingRight||0,o._alpha=null==t.alpha||isNaN(parseFloat(t.alpha))?.4:parseFloat(t.alpha),o._base=t.base||"grid",o._doDraw=function(t){this._padding;var e,i,n=this._grid,s="grid"==o._base?n.getBounds():n._layoutManager.gridBounds();switch(this._imageLocation){case Ks.LEFT:e=s.x+this._paddingLeft,i=s.y+(s.height-r.height)/2;break;case Ks.RIGHT:e=s.right()-r.width-this._paddingRight,i=s.y+(s.height-r.height)/2;break;case Ks.TOP:e=s.x+(s.width-r.width)/2,i=s.y+this._paddingTop;break;case Ks.BOTTOM:e=s.x+(s.width-r.width)/2,i=s.bottom()-r.height-this._paddingBottom;break;case Ks.LEFT_TOP:e=s.x+this._paddingLeft,i=s.y+this._paddingTop;break;case Ks.LEFT_BOTTOM:e=s.x+this._paddingLeft,i=s.bottom()-r.height-this._paddingBottom;break;case Ks.RIGHT_TOP:e=s.right()-r.width-this._paddingRight,i=s.y+this._paddingTop;break;case Ks.RIGHT_BOTTOM:e=s.right()-r.width-this._paddingRight,i=s.bottom()-r.height-this._paddingBottom;break;case Ks.CENTER:e=s.x+(s.width-r.width)/2,i=s.y+(s.height-r.height)/2}t.save();try{t.setAlpha(this._alpah),t.aL(r,e,i,r.width,r.height)}finally{t.restore()}},this.addFeedbackElement(this._backgroundImageElement)}else this.removeFeedbackElement(this._backgroundImageElement);this.invalidate()},dataCellRenderers:function(){return this._dataCellRenderers},getItemSource:function(){return this._itemProvider},itemSource:function(){return this._itemProvider},setItemSource:function(t){this._itemProvider&&this._itemProvider.removeListener(this),this._itemProvider=t,this._itemProvider&&this._itemProvider.addListener(this)},dataSource:function(){return this._itemProvider?this._itemProvider.dataSource():null},setDataSource:function(t){var e=this.dataSource();this._itemProvider&&this._itemProvider.setDataSource(t),this.dataSource()!==e&&this.dataSource()&&this.applyFilters()},maxItemCount:function(){return 0},setMaxItemCount:function(t){},activeTool:function(){return this.container().activeTool()},toolTipManager:function(){return this._toolTipManager},validationManager:function(){return this._validationManager},footerMergeManager:function(){return this._footerMergeManager},headerSummaryMergeManager:function(){return this._headerSummaryMergeManager},groupFooterMergeManager:function(){return this._groupFooterMergeManager},setValidations:function(t){this._validations.assign(t)},editController:function(){return this._editController},dataCellStyles:function(){return this._dataCellStyles},setBody:function(t){this._body.assign(t)},setPanel:function(t){this instanceof X_||this._panel&&this._panel.assign(t)},setIndicator:function(t){this._indicator.assign(t)},setStateBar:function(t){this._stateBar.assign(t)},setCheckBar:function(t){this._checkBar.assign(t)},setEditBar:function(t){this._editBar.assign(t)},setHeader:function(t){this._header.assign(t)},setFooter:function(t){this._footer.assign(t)},setRowGroup:function(t){this._rowGroup.assign(t)},panelView:function(){return this._panelView},mergeView:function(){return this._mergeView},fixedMergeView:function(){return this._fixedMergeView},rfixedMergeView:function(){return this._rfixedMergeView},mergeHeaderView:function(){return this._mergeHeaderLayer},indicatorView:function(){return this._indicatorView},stateBarView:function(){return this._stateBarView},checkBarView:function(){return this._checkBarView},headerView:function(){return this._headerView},fixedHeaderView:function(){return this._fixedHeaderView},rfixedHeaderView:function(){return this._rfixedHeaderView},summaryView:function(){return this._summaryView},fixedSummaryView:function(){return this._fixedSummaryView},rfixedSummaryView:function(){return this._rfixedSummaryView},footerView:function(){return this._footerView},fixedFooterView:function(){return this._fixedFooterView},rfixedFooterView:function(){return this._rfixedFooterView},rowGroupView:function(){return this._rowGroupView},summaryHeadView:function(){return this._summaryHeadView},indicatorHeadView:function(){return this._indicatorHeadView},indicatorFootView:function(){return this._indicatorFootView},indicatorSummaryView:function(){return this._indicatorSummaryView},stateBarHeadView:function(){return this._stateBarHeadView},stateBarFootView:function(){return this._stateBarFootView},stateBarSummaryView:function(){return this._stateBarSummaryView},checkBarHeadView:function(){return this._checkBarHeadView},checkBarFootView:function(){return this._checkBarFootView},checkBarSummaryView:function(){return this._checkBarSummaryView},bodyView:function(){return this._bodyView},fixedBodyView:function(){return this._fixedBodyView},rfixedBodyView:function(){return this._rfixedBodyView},delegate:function(){return this._delegate},layoutManager:function(){return this._layoutManager},popupMenuManager:function(){return this._popupMenuManager},selections:function(){return this._selections},columnSummaryRuntime:function(){return this._columnSummaryRuntime},rowGroupSummaryRuntime:function(){return this._rowGroupSummaryRuntime},columnValidationRuntime:function(){return this._columnValidationRuntime},rowValidationRuntime:function(){return this._rowValidationRuntime},setDisplayOptions:function(t){this._displayOptions.assign(t)},setSelectOptions:function(t){this._selectOptions.assign(t)},setEditOptions:function(t){this._editOptions.assign(t)},setEditorOptions:function(t){this._editorOptions.assign(t)},setCopyOptions:function(t){this._copyOptions.assign(t)},setPasteOptions:function(t){this._pasteOptions.assign(t)},setFixedOptions:function(t){this._fixedOptions.assign(t)},setSortingOptions:function(t){this._sortingOptions.assign(t),t&&t.handleImages&&this._sortingOptions.handleImages().loadImages(this._container)},setFilteringOptions:function(t){this._filteringOptions.assign(t),t&&t.handleImages&&this._sortingOptions.handleImages().loadImages(this._container)},setGroupingOptions:function(t){this._groupingOptions.assign(t)},setColumnHeaderOptions:function(t){this._columnHeaderOptions.assign(t),t&&t.checkImages&&this._columnHeaderOptions.checkImages().loadImages(this._container)},setMobileOptions:function(t){this._mobileOptions.assign(t)},setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_summaryModeChanged())},heightMeasurer:function(){return this._heightMeasurer||Jl.Default},setHeightMeasurer:function(t){this._heightMeasurer=t},setTopIndex:function(t,e){(t=Math.max(0,Math.min(parseInt(t),this.itemCount()-this._layoutManager._fixedRows-1,this._vscrollBar?this._vscrollBar.maxPosition():0)))!=this._topIndex&&(this._topIndex=t,this.refreshView(),e?this.closePopups2():this.closePopups())},topItem:function(){return this._topIndex+this.layoutManager().fixedItemCount()},getTopItem:function(){var t=this._items.itemCount();return t<=this.layoutManager().fixedItemCount()||t<=0?-1:this.topItem()},setTopItem:function(t){this.setTopIndex(t-this.layoutManager().fixedItemCount())},setLeftPos:function(t,e){t=isNaN(parseInt(t))?this.leftPos():parseInt(t),(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar.maxPosition():0)))!=this._leftPos&&(this._leftPos=t,this._horzScrolling=!!e,this.refreshView(),this.closePopups())},leftCol:function(){var t=this._layoutManager;return t?t.firstCol():0},setLeftCol:function(t){var e=this._layoutManager;e&&(t=Math.max(e.fixedColCount(),Math.min(t,e.columnCount()-1)),this.setLeftPos(e.columnBounds(t).x))},setRightCol:function(t){var e,i=this._layoutManager;i&&(t=Math.min(i.columnCount()-1,Math.max(0,i.columnCount()-t-1)),e=this._hscrollBar._max-this._hscrollBar.maxPosition(),i=Math.min(this._hscrollBar.maxPosition(),i.columnBounds(t).x+i._columns[t]._width-e),i=Math.max(i,0),this.setLeftPos(i))},isEmpty:function(){return 0==this.itemCount()||0==this.visibleColumnCount()},lookupProvider:function(){return this._lookupProvider},setLookupProvider:function(t){t!=this._lookupProvider&&(this._lookupProvider&&this._lookupProvider.removeListener(this),!t||t instanceof $o||(t=new Uo(t)),this._lookupProvider=t,this._lookupProvider&&this._lookupProvider.addListener(this),this.refreshView())},getHeaderLevel:function(){return this._rootColumn.headerLevel()},getDataLevel:function(){return this._rootColumn.dataLevel()},itemCount:function(){return this._itemProvider?this._itemProvider.itemCount():0},rowCount:function(){var t=this.dataSource();return t?t.rowCount():0},getColumn:function(t){return this._rootColumn.getItem(t)},columns:function(){return this._rootColumn.columns()},getOrderedColumns:function(){return this._rootColumn.getOrderedColumns()},setColumns:function(t){this._checkEditing(),this._columnsLock=!0;try{this._rootColumn.setColumns(t),this._orgColumns=this._rootColumn.columns(),this._orgColumned=!0,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsReset(this._rootColumn),this.dataSource()&&this.applyFilters()}},addColumn:function(t,e,i){var n;this._checkEditing();try{if((e=(e=e&&("string"==typeof e?this.columnByName(e):"object"==typeof e?this.columnByName(e.name):e))||this._rootColumn)instanceof R)return n=e.add(t,i),e!==this._rootColumn&&this._rootColumn._columnAdded(n),sf(n)}finally{n&&this.dataSource()&&this.applyFilters()}},removeColumn:function(t,e){var i=!1;this._checkEditing();try{return t=t&&("string"==typeof t?this.columnByName(t):"object"==typeof t?this.columnByName(t.name):t),i=(e=(e=e&&("string"==typeof e?this.columnByName(e):"object"==typeof e?this.columnByName(e.name):e))||this._rootColumn)instanceof R&&t?e.remove(t):i}finally{i&&this.dataSource()&&this.applyFilters()}},collectColumns:function(t,e,i){var n=[];return this._rootColumn.collectColumns(n,t,e,i),n},collectGroups:function(){var t=[];return this._rootColumn.collectGroups(t),t},getColumnNames:function(t,e,i){return this._rootColumn.collectColumnNames([],t,e,i)},columnByHash:function(t){return this._rootColumn._columnMap[t]},columnByName:function(t){return this._rootColumn.columnByName(t)},layoutColumnByName:function(t){for(var e=0,i=this._orgColumns.length;e<i;e++){var n=this._orgColumns[e];if(n instanceof R){if(n=n.valueColumnByName(t))return n}else if(n.name()==t)return n}return this._rootColumn.valueColumnByName(t)},columnByField:function(t){return this._rootColumn.columnByField(t)},columnByFieldName:function(t){return this._rootColumn.columnByFieldName(t)},columnsByFieldName:function(t){var e=[];return this._rootColumn.collectColumnsByFieldName(t,e),0<e.length?e:null},columnByTag:function(t){return this._rootColumn.columnByTag(t)},columnsByTag:function(t){var e=[];return this._rootColumn.collectColumnsByTag(t,e),0<e.length?e:null},getDataColumn:function(t){for(var e,i,n=this._rootColumn.count(),s=0;s<n;s++)if(e=b(this._rootColumn.getItem(s),M)){if(e.dataIndex()==t)return e}else if((i=b(this._rootColumn.getItem(s),R))&&(e=i.getDataColumn(t)))return e;return null},columnLayouts:function(){return this._columnLayouts.items()},setColumnLayouts:function(t){t!=this._columnLayouts&&(this._columnLayouts.clear(),this._columnLayouts.load(t))},columnLayout:function(){return this._columnLayout},setColumnLayout:function(t){this._checkEditing();var e=b(t,ql);if((e=e||("string"==typeof t?this._columnLayouts.find(t):ql.create(t)))!=this._columnLayout)if(this._columnLayout=e){this._columnsLock=!0;try{this._orgColumned&&(this._saveOrgWidths(),this._orgColumned=!1),this._rootColumn.setColumns(e.build(this)),this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore(),this._rootColumn._clearSavedWidths()}}else this.restoreColumns(!0)},restoreColumns:function(t){this._checkEditing(),this._columnsLock=!0;try{t&&this._restoreOrgWidths(),this._rootColumn.setColumns(this._orgColumns),this._orgColumned=!0,this._columnLayout=null,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore()}},_doColumnsReset:function(t){},_columnsReset:function(t){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndicies();for(var e=0,i=this._rootColumn.count();e<i;e++){var n=this._rootColumn.getItem(e);n instanceof R&&n.initGroupWidths()}this._columnWidthsDirty=!0,this._columnsDirty=!0,this.resetGrid(),this._doColumnsReset(t),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this._shadowDom&&this._shadowDom.setColumns(this,this.getLeafColumns())}},_columnsRestore:function(t){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndicies();for(var e,i=this._rootColumn.count(),n=0;n<i;n++)e=this._rootColumn.getItem(n),isNaN(e._saveWidth)||(e._width=e._displayWidth=e._groupWidth=e._saveWidth),e instanceof R&&0<e.count()&&e.restoreGroupWidths();this._columnWidthsDirty=!0,this._columnsDirty=!0,this.resetGrid(),this._doColumnsReset(t),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this._shadowDom&&this._shadowDom.setColumns(this,this.getLeafColumns())}},_saveOrgWidths:function(){for(var t=0,e=this._orgColumns.length;t<e;t++){var i=this._orgColumns[t];i._orgWidth=i.saveWidth(),i instanceof R&&i._saveOrgWidths()}},_restoreOrgWidths:function(){for(var t=0,e=this._orgColumns.length;t<e;t++){var i=this._orgColumns[t];i.setSaveWidth(i._orgWidth),i instanceof R&&i._restoreOrgWidths()}},linearizeColumns:function(n){var t,e=this.getLeafColumns(!0);if(e&&0<(t=e.length)){if(n&&0<n.length)for(r=0;r<n.length;r++)e.sort(function(t,e){var i=n[r],t=t.getProperty(i),e=e.getProperty(i);return t<e?1:e<t?-1:0});for(var i=[],s=new ql,r=0;r<t;r++){var o=e[r];o._saveWidth=o.width(),i.push(o)}s.setItems(i),this.setColumnLayout(s)}},$_setPosition:function(t,e){var i,n;if(t._layoutRect.y=e,t instanceof R&&0<(n=t.visibleCount()))if(t.isVertical())if(1<n)for(i=0;i<n;i++)this.$_setPosition(t.getVisibleItem(i),e+1);else this.$_setPosition(t.getVisibleItem(0),e);else for(i=0;i<n;i++)this.$_setPosition(t.getVisibleItem(i),e)},$_setRoot:function(t){var e,i,n;if(0==t._layoutRect.y)t._dataRoot=t;else{for(n=t.group();n&&0!=n._layoutRect.y;)n=n.group();t._dataRoot=n}if(t instanceof R)for(i=t.visibleCount(),e=0;e<i;e++)this.$_setRoot(t.getVisibleItem(e))},$_setDistance:function(t,e){t._distance=e;var i=1,n=b(t,R);if(n){var s,r,o=n.visibleCount();if(n.isVertical())for(s=0;s<o;s++)r=n.getVisibleItem(s),i=Math.max(i,this.$_setDistance(r,e));else for(s=i=0;s<o;s++)r=n.getVisibleItem(s),i+=this.$_setDistance(r,e+i)}return i},_resetColumnPositions:function(){for(var t,e=this.getVisibleColumnCount(),i=0;i<e;i++)t=this.getVisibleColumn(i),this.$_setPosition(t,0),this.$_setRoot(t),this.$_setDistance(t,1e6*i);this._dataRoots.collect(this._rootColumn)},_resetColumnIndicies:function(){this._rootColumn.resetIndicies(this),this._resetVisibleColumns(),this._resetColumnPositions(),this._resetColumnStates()},_resetVisibleColumns:function(){this._rootColumn.resetVisibles()},_resetColumnStates:function(){this._rootColumn.resetStates()},_resetFooterMerge:function(){this._footerMergeManager.buildRooms(this,this.footer()._mergeCells),this._groupFooterMergeManager.buildRooms(this)},_resetHeaderSummaryMerge:function(){this._headerSummaryMergeManager.buildRooms(this,this.header().summary()._mergeCells)},isColumnLayoutChanged:function(){return this._columnLayoutChanged},focusedIndex:function(){return this._shadowIndex.assign(this._focusedIndex)},setFocusedIndex:function(t,e,i){if(e=!(1<arguments.length)||e,i=2<arguments.length&&i,!this._focusing){this._focusing=!0;try{return this._doSetFocusedIndex(t,e,i)}finally{this._focusing=!1}}return!1},_doSetFocusedIndex:function(t,e,i){if(!t)return!1;if(t&&!this.isValid(t)&&(t=t.clone()).normalize(this,this.isKeepNullFocus()),t.column()instanceof R&&t.column(t.column().first()),!this.isValid(t)){var n=this.dataSource();if(n&&0!=n.rowCount()&&0!=this.itemCount()||(this._focusedIndex.itemIndex(-1),this._focusedIndex.column(this.getFirstColumn())),!(n&&0<n.rowCount()&&0<this.itemCount()&&this.isKeepNullFocus()))return!1}if(t&&$.areEquals(t,this._focusedIndex))i&&this.$_makeFocusIndexVisible();else{var s=this.editOptions(),n=this._focusedIndex.clone();if(this._changingMode===Ws.BEFORE_EDITCOMMIT&&!this._fireCurrentChanging(n,t))return!1;var r,o=this.itemSource(),a=this.container().activeTool(),h=this.layoutManager(),l=this.isEditing();if(this.closePopups2(),!this._editController.focusedIndexChanging())return!1;if(this._changingMode===Ws.NORMAL&&!this._fireCurrentChanging(n,t))return!1;if(!this.isValid(t))return!1;var d,u,c=n.item();if(!this.isItemEditing(c)||this.isItemEdited(c)||t.I()==n.I()||c.itemState()!==H.UPDATING||s.isCommitWhenNoEdit())if(o&&t.I()!=n.I())try{if(c)switch(c.itemState()){case H.INSERTING:if(this.commit(s.isForceInsert(),!0))break;return this.cancel(!0),!1;case H.APPENDING:return this.commit(s.isForceAppend()),this.cancel(!0),!1;case H.UPDATING:if(this.commit(s.isCommitWhenNoEdit(),!0))break;return this.cancel(!0),!1}}catch(t){if(t instanceof Zr)return(t=this._fireValidationFail(c._index,t.column,t))&&alert(s.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Zt)return!1;throw t}else c&&this.isItemEditing(c)&&s.isValidateOnExit()&&(this.$_validateCellValue(n,n.value),this.invalidateLayout());else this.cancel(!0);a.focusedIndexChanging(t),this.isValid(n)&&(d=h.getMergedCell(n),u=this.getCellView(d?this._mergeView:null,n))&&(l&&(c=this._body.getCell(u._index))&&u.updateCell(c),u.setFocused(!1),u.setMouseEntered(!1)),this._focusedIndex.assign(t),o instanceof jr&&o.setDiffs(this._editOptions.isCheckDiff(),this._editOptions.isCheckCellDiff(),this._editOptions.isStrictDiff()),this._editController.focusedIndexChanged(n,t),a.focusedIndexChanged(n,t),this.isValid(this._focusedIndex)&&(d=!(this._focusedIndex.item()instanceof Vr)&&h.getMergedCell(this._focusedIndex),u=this.getCellView(d?this._mergeView:null,this._focusedIndex))&&(u.setFocused(!0),u._renderer instanceof qc)&&(this._editController._editable=this._editController._editable&&u._renderer.canEditable()),e&&this.clearSelection(),this.isValid(this._focusedIndex)&&(this._indicatorView.isVisible()&&this._indicatorView.refresh(),this._headerView.isVisible()&&this._headerView.refresh(),this._fixedHeaderView.isVisible()&&this._fixedHeaderView.refresh(),this._rfixedHeaderView.isVisible())&&this._rfixedHeaderView.refresh(),(i||(r=!$.areEquals(this._focusedIndex,h._focusIndex)))&&(r=r||this.topIndex()!==h.topIndex(),this.$_makeFocusIndexVisible(r)),this._fireCurrentChanged(this._shadowIndex.assign(this._focusedIndex)),this.isValid(n)&&n.item()instanceof Ar&&this.$_refreshRow(n._itemIndex),this.isValid(this._focusedIndex)&&this._focusedIndex.item()instanceof Ar&&this.$_refreshRow(this._focusedIndex._itemIndex),this.$_checkCurrentRow()||this.$_checkLastCellCommit(n)}return!0},setCurrent:function(t,e){var i;t&&(i=this.getIndex(this._focusedIndex._itemIndex,this._focusedIndex._column),t.column?i._column=this.columnByName(t.column):t.fieldName?i._column=this.columnByFieldName(t.fieldName):void 0!==t.fieldIndex&&0<=t.fieldIndex&&(i._column=this.columnByField(t.fieldIndex)),void 0!==t.itemIndex&&0<=t.itemIndex?i._itemIndex=t.itemIndex:void 0!==t.dataRow&&0<=t.dataRow&&(i._itemIndex=this.getItemIndexOfRow(t.dataRow)),i._column&&i._itemIndex<0&&(i._itemIndex=0),0<=i._itemIndex&&!i._column&&(i._column=this.getFirstColumn()),this.setFocusedIndex(i,e,!0))},$_makeFocusIndexVisible:function(t){this.isValid(this._focusedIndex)&&this.makeCellVisible(this._focusedIndex,t)},cancelEditor:function(t){this._editController.cancelEditor(t=!(0<arguments.length)||t)},itemEditCancel:function(){return this._fireItemEditCancel(this._itemProvider._editingItem)},cancel:function(t){var e,i=this.editController(),n=(this.isEditing()&&(i.cancelEditor(!0),i.invalidateEditor()),this.focusedIndex());return!(!this.isValid(n)||!this.itemSource().isEditing(n.item())||(e=n.dataId(),n=n.clone(),this.itemSource().cancel(),this._validationManager._userValidations&&-1<e&&(this._validationManager.checkValidateCells(n.itemIndex()),this._setColumnErrors(n.item())),i._prepareEditor(i._editIndex),n.normalize(this),this.setFocusedIndex(n),t&&this.$_makeFocusIndexVisible(),0))},commitEditor:function(t){t=!(0<arguments.length)||t,this.editController().commitEditor(t)},commit:function(t,e){var i=this.focusedIndex();if(this.isValid(i)){var n=b(this.itemSource(),jr);if(n){this.isEditing()&&(this.editController().commitEditor(!0),this.editController().invalidateEditor());i=i.item();if(n.isEditing(i)&&(t||n.isEdited(i))){t=H.isInserting(i.itemState());try{this._validationManager.validateRow(i,t),this.$_validateRow(i,t)}catch(t){throw t instanceof Zr&&t.column&&t.column.setError&&(t.column.setError(t.message||t),t.column.setErrorLevel(t.level||Is.ERROR)),t}if(n.commit())return!0;if(e)throw new Zt}}}return!1},isScrolling:function(){return this._scrolling},isHorzScrolling:function(){return this._horzScrolling},toastManager:function(){return this._toastManager},setCellUpdateEventLock:function(t){this._cellUpdateEventLock=t},editorActivated:function(t){this.activeTool()&&this.activeTool().editorActivated(t)},onCurrentChanging:void 0,onCurrentChanged:void 0,onCurrentRowChanged:void 0,onValidateCell:void 0,onValidateRow:void 0,onColumnHeaderClicked:void 0,onColumnHeaderImageClicked:void 0,onColumnHeaderDblClicked:void 0,onFooterCellClicked:void 0,onFooterCellDblClicked:void 0,onHeaderSummaryCellClicked:void 0,onHeaderSummaryCellDblClicked:void 0,onCheckBarHeadClicked:void 0,onCheckBarFootClicked:void 0,onIndicatorCellClicked:void 0,onStateBarCellClicked:void 0,onRowGroupHeadClicked:void 0,onRowGroupFootClicked:void 0,onRowGroupHeaderFooterClicked:void 0,onRowGroupBarClicked:void 0,onCheckBarFootDblClicked:void 0,onIndicatorCellDblClicked:void 0,onStateBarCellDblClicked:void 0,onRowGroupHeadDblClicked:void 0,onRowGroupFootDblClicked:void 0,onRowGroupHeaderFooterDblClicked:void 0,onRowGroupBarDblClicked:void 0,onPanelClicked:void 0,onPanelDblClicked:void 0,onRowGroupPanelClicked:void 0,onRowGroupPanelDblClicked:void 0,onGridMenuItemClicked:void 0,onContextMenuItemClicked:void 0,onCellButtonClicked:void 0,onEditButtonClicked:void 0,onImageButtonClicked:void 0,onClickableCellClicked:void 0,onScrollToBottom:void 0,onDataCellClicked:void 0,onDataCellDblClicked:void 0,onRowsDeleting:void 0,onRowInserting:void 0,onUpdateStarted:void 0,onInsertStarted:void 0,onShowEditor:void 0,onHideEditor:void 0,onEditChange:void 0,onGetEditValue:void 0,onEditCommit:void 0,onEditCanceled:void 0,onEditSearch:void 0,onCellEdited:void 0,onEditRowChanged:void 0,onEditRowPasted:void 0,onRowsPated:void 0,onItemChecked:void 0,onItemsChecked:void 0,onItemAllChecked:void 0,onErrorClicked:void 0,onSorting:void 0,onSortingChanged:void 0,onFiltering:void 0,onFilteringChanged:void 0,onFilterActionClicked:void 0,getOptions:function(){var t={},e=this.itemSource();return t.summaryMode=this.summaryMode(),t.changingMode=this.changingMode(),t.keepNullFocus=this.isKeepNullFocus(),t.hideDeletedRows=e.isHideDeleted(),e.sortMode&&(t.sortMode=e.sortMode()),e.filterMode&&(t.filterMode=e.filterMode()),t},setOptions:function(t){var e;t&&(e=this.itemSource(),t.summaryMode!==I&&this.setSummaryMode(t.summaryMode),t.scrollBarWidth!==I&&this.setScrollBarWidth(t.scrollBarWidth),t.scrollBarHeight!==I&&this.setScrollBarHeight(t.scrollBarHeight),t.scrollThumbRadius!=I&&this.setScrollThumbRadius(t.scrollThumbRadius),t.changingMode!==I&&this.setChangingMode(t.changingMode),t.hideDeletedRows!==I&&e.setHideDeleted(t.hideDeletedRows),t.keepNullFocus!==I&&this.setKeepNullFocus(t.keepNullFocus),t.resizeDelay!==I&&this._container.setResizeDelay(t.resizeDelay),null!=t.sortMode&&e.setSortMode(t.sortMode),null!=t.filterMode&&e.setFilterMode(t.filterMode),t.filterOr!=I&&e.setFilterOr(t.filterOr),void 0!==t.backgroundImage&&this.setBackgroundImage(t.backgroundImage),t.display&&this.setDisplayOptions(t.display),t.fixed&&this.setFixedOptions(t.fixed),(e=St(t.editing,t.edit))&&this.setEditOptions(e),(e=St(t.selecting,t.select,t.selection))&&this.setSelectOptions(e),(e=St(t.sorting,t.sort))&&this.setSortingOptions(e),(e=St(t.filtering,t.filter))&&this.setFilteringOptions(e),t.grouping&&this.setGroupingOptions(t.grouping),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.body&&this.setBody(t.body),t.panel&&this.setPanel(t.panel),t.indicator&&this.setIndicator(t.indicator),t.stateBar&&this.setStateBar(t.stateBar),t.checkBar&&this.setCheckBar(t.checkBar),t.editBar&&this.setEditBar(t.editBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.rowGroup&&this.setRowGroup(t.rowGroup),t.columnHeader&&this.setColumnHeaderOptions(t.columnHeader),t.editor)&&this.setEditorOptions(t.editor)},loadStyles:function(t){fo.deserialize(t,this)},containerToGridRect:function(t){return t.x-=this._offsetX,t.y-=this._offsetY,t},containerToGridX:function(t){return t-this._offsetX},containerToGridY:function(t){return t-this._offsetY},setCursor:function(t){this.container().setCursor(t)},updateNow:function(){this.container().updateNow()},setColumnsProperty:function(t,e,i,n){this._rootColumn.setChildrenProperty(t,e,i,n)},invalidateColumnWidths:function(){this._columnWidthsDirty||(this._columnWidthsDirty=!0,this._columnsDirty=!0,this.refreshView())},invalidateColumns:function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},getItem:function(t){var e=this._clipboardManager,e=e._pasting&&e._appendingItem;return e&&e.index()===t?e:this._itemProvider.getItem(t)},getItemIndexOfRow:function(t){return this._itemProvider.getIndexOfRow(t)},getItemOfRow:function(t,e){return this._itemProvider.getItemOfRow(t,e)},getItemIndiciesOfRows:function(t){return this._itemProvider.getIndicesOfRows(t)},getAllItems:function(){return this._itemProvider?this._itemProvider.getAllItems():null},getPagingAllItems:function(){return this._itemProvider?this._itemProvider.getPagingAllItems():null},getIndex:function(t,e){return new $(this,t=0<arguments.length?t:-1,e=1<arguments.length?e:null)},isValid:function(t){return t&&t.grid()===this&&0<=t.I()&&t.I()<this.itemCount()&&t.column()&&t.column().grid()===this},isValidColumn:function(t){return t&&t.grid()===this&&t.column()&&t.column().grid()===this},isValidRow:function(t){return t&&t.grid()===this&&0<=t.I()&&t.I()<this.itemCount()},beginUpdate:function(){this._updateLock=!0,this._itemProvider.beginUpdate()},endUpdate:function(t){(t||this._updateLock)&&(this._updateLock=!1,this._itemProvider.endUpdate(),this.refreshView())},invalidateLayout:function(){this._updateLock||this._super()},refreshView:function(){this._loading||this._updateLock||(this.invalidateLayout(),this.setTopIndex(this.topIndex(),this._filterRunning),this.setLeftPos(this.leftPos()),this.setFocusedIndex(this.focusedIndex(),!0))},$_refreshRow:function(t){if(!(t<=-1||t>=this.itemCount()))for(var e=this.getDataColumns(),i=0,n=e.length;i<n;i++){var s=$.temp(this,t,e[i]);s&&(s=this.getFocusedCellView(s))&&s.invalidate(!0,!0)}},resetGrid:function(){this._resetting=!0,this.setTopIndex(0),this.setLeftPos(0),this.setFocusedIndex(this.getIndex(0,this.getFirstColumn()),!0),this.refreshView()},getFirstCell:function(){if(0<this.itemCount()){var t=-1;if(this.isKeepNullFocus())for(var e=this.topItem(),i=e,n=e+this.layoutManager().fullItemCount();i<n;i++)if(this.getItem(i)instanceof Ar){t=i;break}if(t<0)for(i=0,n=this.itemCount();i<n;i++)if(this.getItem(i)instanceof Ar){t=i;break}return new $(this,0<=t?t:0,this.getFirstColumn())}return null},getFirstColumn:function(){return this._rootColumn.first()},getVisibleColumnCount:function(){return this._rootColumn.visibleCount()},visibleColumnCount:function(){return this._rootColumn.visibleCount()},getVisibleColumn:function(t){return this._rootColumn.getVisibleItem(t)},getHorzColumns:function(t,e){return this._rootColumn.getHorzColumns(t,e)},getLeafColumns:function(t){return this._rootColumn.getLeafItems(t=!(0<arguments.length)||t)},getValueColumns:function(t){return this._rootColumn.getValueColumns(t=!(0<arguments.length)||t)},getDataColumns:function(t){return this._rootColumn.getDataColumns(t=!(0<arguments.length)||t)},getDataRootColumns:function(){return this._dataRoots.roots()},collectDataColumns:function(t,e){return this._dataRoots.collectDataColumns(t,e)},isCheckable:function(t){t=this.getItem(t);return t&&t.isCheckable()},setCheckable:function(t,e){t=this.getItem(t);t&&t.setCheckable(e)},isCheckedItem:function(t){t=this.getItem(t);return t&&t.isChecked()},isCheckedRow:function(t){t=this._itemProvider.getItemOfRow(t,!0);return t&&t.isChecked()},checkAll:function(t,e,i,n){var s=this._checkBar.isShowGroup();this._itemProvider.checkAll(t,e,i,n,s)},checkItem:function(t,e,i,n){t=this.getItem(t);t&&this._itemProvider.checkItem(t,e,i,n)},checkRow:function(t,e,i,n){var s,r=this.getItemIndexOfRow(t);(s=(s=-1<r?(s=this.getItem(r))&&(s instanceof qr?s:null):s)||this.getItemOfRow(t,!0))&&this._itemProvider.checkItem(s,e,i,n)},checkItems:function(t,e,i){t=this._itemProvider.getItemsByIndices(t);this._itemProvider.checkItems(t,e,i)},checkRows:function(t,e,i){t=this._itemProvider.getItemsByRows(t,!0);this._itemProvider.checkItems(t,e,i)},setAllCheck:function(t,e){this._checkBarHeadView.setChecked(t),e&&(e=this.checkBar(),this.checkAll(t,e.isVisibleOnly(),e.isCheckableOnly(),!1))},isAllChecked:function(){return this._checkBarHeadView.isChecked()},resetCheckables:function(){},applyaCheckables:function(){},addLookupSource:function(t){(this._lookupProvider||(this._lookupProvider=new Uo)).add(t)},removeLookupSource:function(t){this._lookupProvider&&this._lookupProvider.remove(t)},existsLookupData:function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(i)return k(e)||(e=[e]),i.exists(e);throw"Invalid lookup source id: "+t}return!1},fillLookupData:function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},clearLookupData:function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw"Invalid lookup source id: "+t;e.clear()}},getIndicatorIndex:function(t){return t.index()},canHovering:function(){return!this.isEditing()},calcGroupLevels:function(){this._rootColumn.calcHeaderLevels(),this._rootColumn.calcDataLevels()},showToast:function(t,e){this._toastManager.show(t,e)},hideToast:function(t){this._toastManager.close(),t&&"function"==typeof t&&setTimeout(t,0)},isEditing:function(t){return this._editController&&this._editController.isEditing()&&(!t||$.areEquals(t,this._editController.editIndex()))},isItemEditing:function(t){return(t=t||this.focusedIndex().item())&&this.itemSource()instanceof jr&&this.itemSource().isEditing(t)},isItemEdited:function(t){return(t=t||this.focusedIndex().item())&&this.itemSource()instanceof jr&&this.itemSource().isEdited(t)},canWrite:function(t){var e,i=this._editOptions.isEditable()&&this.isValid(t)&&0<this.visibleColumnCount()&&t.item().canEdit()&&!!t.dataColumn()&&(this.fixedOptions().isRowEditable()||t.itemIndex()>=this.layoutManager().fixedItemCount());return i=i&&(i=(e=this.getFocusedCellView(t))&&e.renderer()?!e.renderer().canEditable||e.renderer().canEditable():i,(e=t.C().root().displayIndex())<this._layoutManager.fixedColCount()||e>=this._layoutManager.rfixedStartCol())?i&&this.fixedOptions().isEditable():i},canEdit:function(t){var e=this.getCellEditable(t);return"boolean"==typeof e?this.canWrite(t)&&e:this.canWrite(t)&&t.dataColumn().isEditable()},canShowEditor:function(t,e){return!!this.isValid(t)&&(this._tmpIndex.assign(t),this._fireShowEditor(this._tmpIndex,e))},canUpdate:function(t,e){return this.editOptions().canUpdate(t.rowState()===v.CREATED)&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canUpdate(t,e)},canAppend:function(){var t=!this.isEditing()&&this.editOptions().canAppend()&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canAppend();if(t)try{if(!this._fireRowInserting(this.itemSource().itemCount(),-1))return!1}catch(t){return alert(t.message||t),!1}return t},canInsert:function(t,e,i){i=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions().canInsert()&&0<this.visibleColumnCount()&&this.itemSource()&&this.itemSource().canInsert(t);if(i)try{if(!this._fireRowInserting(t.index()+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return i},_doCanInsert:function(t,e,i){return!0},canDelete:function(t){return this.editOptions().canDelete()&&0<this.visibleColumnCount()&&this.itemSource()&&(this.isItemEditing(t)||this.itemSource().canDelete(t))},canCommit:function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions().isCommitWhenNoEdit())},canCancel:function(t){return this.isItemEditing(t)},_appendDummy:function(){var t=this._editOptions;t.isDisplayEmptyEditRow()&&t.isAppendable()&&this._items.appendDummy()},_cancelDummy:function(){this._items.cancelDummy()},append:function(){var t,e=this.itemSource();return!!(e instanceof jr&&e.dataSource()&&this.canAppend())&&(t=this.$_getInsertDefaults(null),this._cancelDummy(),e.append(t))},insertAt:function(t,e){return this.insert(this.getItem(t),e)},insert:function(t,e,i){var n;return!!(t=t||(this.focusedIndex()?this.focusedIndex().item():null))&&!!(this.itemSource()instanceof jr&&this.canInsert(t,e,i))&&(n=this.$_getInsertDefaults(null),this._cancelDummy(),this.itemSource().insert(t,n,e,i))},edit:function(t){return t=t||this.focusedIndex(),!(!(this.isValid(t)&&this.itemSource()instanceof jr)||t.dataColumn()&&!this.canUpdate(t.item(),t.dataField()))&&this.itemSource().edit(t.item())},fillEditSearchItems:function(t,e,i,n){this._editController.fillSearchItems(t,e,i,n)},showEditor:function(t,e,i){return t=t||this.focusedIndex(),!!this._editController.showEditor(t,i)&&(e&&this._editController.caretToLast(),!0)},editorButtonClick:function(t){this._editController.buttonClicked(t)},hideEditor:function(){this._editController.closeList(!1),this._editController.hideEditor()},reprepareEditor:function(){this._editController.reprepareEditor(this.focusedIndex())},isReadOnly:function(t){if(!this.isValid(t))return!1;var e=t.dataColumn();if(!e)return!0;var i,n=this.getDataCellStyle(t.dataRow(),t.dataField());if(n){if(null!=(i=n.isReadOnly()))return i}else if(null!=(i=this.getCellReadOnly(t)))return i;return e.isReadOnly()},getEditingItem:function(){var t=b(this.itemSource(),jr);return t?t.editingItem():null},getSortFields:function(){return null},getSortDirections:function(){return null},getSortCases:function(){return null},getLabelComparer:function(){return this._items.getLabelComparer()},setLabelComparer:function(t){this._items.setLabelComparer(t)},addFocusElement:function(t){return!(!t||this._focusLayer.contains(t)||(this._focusLayer.addElement(t,this._toolContext),0))},removeFocusElement:function(t){return!!this._focusLayer.contains(t)&&(this._focusLayer.removeElement(t),!0)},addRowFocusElement:function(t){return!(!t||this._rowFocusLayer.contains(t)||(this._rowFocusLayer.addElement(t,this._toolContext),0))},removeRowFocusElement:function(t){return!!this._rowFocusLayer.contains(t)&&(this._rowFocusLayer.removeElement(t),!0)},addFeedbackElement:function(t){return!(!t||this._feedbackLayer.contains(t)||(this._feedbackLayer.addElement(t,this._toolContext),0))},removeFeedbackElement:function(t){return!!this._feedbackLayer.contains(t)&&(this._feedbackLayer.removeElement(t),!0)},getEditCellBounds:function(t){var e,i=this.layoutManager(),n=i.getMergedCell(t),s=this.getCellView(n?this._mergeView:null,t);return s?((e=s.getBounds()).x=e.y=0,e=s.boundsByContainer(e),n&&((n=t.itemIndex())>=i.topIndex()+i.fixedRowCount()&&n<i.topIndex()+i.itemCount()+i.fixedRowCount()?(n=i.itemBounds(s._topIndex),s=i.itemBounds(t.I()-this._topIndex),e.y+=s.y-n.y,e.height=s.height):e=Pu.clone()),e):Pu.clone()},getEditBounds:function(t){var e,i=this.layoutManager(),n=i.getMergedCell(t),s=this.getCellView(n?this._mergeView:null,t,t.isFixedCol());return s?((e=s.getBounds()).x=e.y=0,s instanceof bh&&(e.width-=s.getButtonsWidth(),s._isLeftImageButton)&&(e.x+=s.getLeftButtonsWidth()),e=s.boundsByContainer(e),n&&((n=t.itemIndex())>=i.topIndex()+i.fixedRowCount()&&n<i.topIndex()+i.itemCount()+i.fixedRowCount()?(n=i.itemBounds(s._topIndex),s=i.itemBounds(t.I()-this._topIndex),e.y+=s.y-n.y,e.height=s.height):e=Pu.clone()),e):Pu.clone()},getCellView:function(t,e,i,n){var s=e._column;if(i=i||s.isFixed(),n=n||s.isRightFixed(),null==t||t instanceof Na){if((r=e.item())&&r.isEditable()){var r=r.index(),r=(n?this._rfixedBodyView:i?this._fixedBodyView:this._bodyView).findRowView(r);if(r&&r.isVisible())return r.findCell(s)}}else{if(t===this._rowGroupView)return this._rowGroupView.getCellView(e,!!i,!!n);if(t instanceof Qh)return(n?this._rfixedMergeView:i?this._fixedMergeView:this._mergeView).getCellView(e);if(t===this._mergeHeaderLayer)return this._mergeHeaderLayer.getCellView(e)}return null},getFocusedCellView:function(t){t=t||this._focusedIndex;this.layoutManager();var e=t.item(),i=e&&e.isMerged(),n=t.isFixedCol(),s=t.isRightFixedCol(),e=e instanceof Vr,s=e?null:s?this.getCellView(this._rfixedMergeView,t,!0):n?this.getCellView(this._fixedMergeView,t,!0):null;return s=(s=(s=!(s=s||n||e?s:this.getCellView(this._mergeView,t,!1))&&i?this.getCellView(this._mergeHeaderLayer,t):s)||this.getCellView(null,t,n))||i?s:(s=this.getCellView(this._rowGroupView,t,!1))||this.getCellView(this._rowGroupView,t,!0)},pointToIndex:function(t,e,i){var n=$.temp(this,-1,null);return i?this._layoutManager.mouseToIndex(t,e,n):this._layoutManager.mouseToIndexEx(t,e,n),n},getCellBounds:function(t,e){t=this.getEditCellBounds(t);return t=(t=-1e4==t.x?null:t)&&e?this.container().toScreen(t):t},getSelection:function(){return 0<this._selections.count()?this._selections.getItem(0):null},clearSelection:function(){var t=this.focusedIndex();this._selections.clear(),this.isValid(t)&&0<this.itemCount()&&0<this.visibleColumnCount()&&this._selections.add(t,t,this._selectOptions.style())},deleteSelection:function(r){function o(t,e){try{if(e&&0<e.length){for(var i,n=e.length,s=[],r=0;r<n;r++)(i=t.getItem(e[r]))&&0<=i.dataRow()&&s.push(i.dataRow());if(0<s.length&&!t._fireRowsDeleting(s))return!1}}catch(t){return alert(t),!1}return!0}function t(t,e){var i,n,s;if(0==e.count()||1==e.count()&&e.getItem(0).isSingleCell())return n=-1,0<=(n=0==e.count()?t.focusedIndex().itemIndex():e.getItem(0).getBounds().R1())&&t.canDelete(e=t.getItem(n))&&(r||!t.editOptions().isConfirmWhenDelete()||confirm(t.editOptions().deleteRowsMessage())&&(i=t,n=n,(s=[]).push(n),o(i,s)))&&(t.cancel(),H.isInserting(e.itemState())||t.itemSource().remove(e)),1}function e(t,e){for(var i=null,n=e.length;n--;){var s=t.getItem(e[n]),r=s.itemState();if(H.isEditing(r)){i=s,H.isInserting(r)&&e.splice(n,1);break}}var o=null;0<e.length&&(o=t.itemSource().getRemovableRows(e)),i&&t.cancel(),o&&t.itemSource().removeRows(o)}var i=this.editOptions(),n=this.selections(),s=this.itemSource();if((r||i.isDeletable())&&s instanceof jr)if(this.isItemEditing(null)&&!i.isDeletableWhenEdit())alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.");else if(this.commitEditor(!0),!t(this,n)){for(var a,h,l,d,u,c=n.count(),_=[],f=0;f<c;f++)if((a=n.getItem(f)).style()==G.ROWS||a.style()==G.BLOCK)for(a=a.getBounds(),h=Math.min(a.R1(),a.R2()),l=Math.max(a.R1(),a.R2()),d=h;d<=l;d++)(0<=(u=this.getItem(d)).dataRow()||u instanceof qr||u instanceof N_)&&_.push(d);for(_.sort(function(t,e){return e-e}),d=-1,f=_.length;f--;)_[f]==d?_.splice(f,1):d=_[f];0<_.length&&this.canDelete(this.getItem(_[0]))&&(r||!i.isConfirmWhenDelete()?o(this,_)&&(e(this,_),this.clearSelection()):confirm(i.deleteRowsMessage())&&o(this,_)&&(e(this,_),this.clearSelection()))}},revertSelection:function(t){var e=this.editOptions(),i=this.selections(),n=this.itemSource();if((t||e.isRevertable())&&n instanceof jr){this.commitEditor(!0),t=this,(0==(e=i).count()||1==e.count()&&e.getItem(0).isSingleCell())&&(n=-1,0<=(n=0==e.count()?t.focusedIndex().itemIndex():e.getItem(0).getBounds().R1()))&&t.itemSource().revert(n);for(var s,r,o,a,h,l=i.count(),d=[],u=0;u<l;u++)if((s=i.getItem(u)).style()==G.ROWS||s.style()==G.BLOCK)for(s=s.getBounds(),r=Math.min(s.R1(),s.R2()),o=Math.max(s.R1(),s.R2()),a=r;a<=o;a++)(0<=(h=this.getItem(a)).dataRow()||h instanceof qr||h instanceof N_)&&d.push(a);for(d.sort(function(t,e){return e-e}),a=-1,u=d.length;u--;)d[u]==a?d.splice(u,1):a=d[u];0<d.length&&this.itemSource().revertAll(d)}},registerImageList:function(t){t&&t.name()&&!this._imageLists.hasOwnProperty(t.name())&&((this._imageLists[t.name()]=t).addListener(this),this._assignImageList(t))},unregisterImageList:function(t){t&&t.name()&&this._imageLists.hasOwnProperty(t.name())&&(delete this._imageLists[t.name()],t.removeListener(this),this._assignImageList(t,!0))},getImageList:function(t){return t&&this._imageLists[t]},getListImage:function(t,e){return t instanceof fe?t.getImage(e):t?(t=this._imageLists[t])?t.getImage(e):null:void 0},_assignImageList:function(t,e){for(var i=this.getDataColumns(),n=0,s=i.length;n<s;n++){var r=i[n];r.imageList()==t.name()&&(r._images=e?null:t)}},getImage:function(t){return this._container.getImage(t)},getSummarizer:function(){return null},getSummary:function(t,e){var i=this.dataSource();if((e=e&&e.trim().toLowerCase())&&i){var n=this.getSummarizer();if(n){var s=isNaN(t)?i.getFieldIndex(t):t;if(0<=s&&s<i.fieldCount())switch(e){case"count":return n.getCount(s);case"sum":return n.getSum(s);case"max":return n.getMax(s);case"min":return n.getMin(s);case"avg":return n.getAvg(s);case"var":return n.getVar(s);case"varp":return n.getVarp(s);case"stdev":return n.getStdev(s);case"stdevp":return n.getStdevp(s);case"datacount":return n.getDataCount(s);case"dataavg":return n.getDataAvg(s)}}}return NaN},orderBy:function(t,e,i){if(!this.isItemEditing(null)){var n={};if(!t||t.length<1)this.setLabelComparer(n),this._sortItems([],[],[]);else{for(var s,r=[],o=[],a=[],h=t.length,l=0;l<h;l++)s=t[l],r.push(s.dataIndex()),s.isSortByLabel()&&s.isLookupDisplay()&&(n[s.dataIndex()]=new $u(s));e&&(o=e.concat()),i&&(a=i.concat()),this.setLabelComparer(n),this._sortItems(r,o,a)}}},orderByFields:function(t,e,i){if(!this.isItemEditing(null)){var n,s={};if(!t||t.length<1)this.setLabelComparer(s),this._sortItems([],[],[]);else{for(var r,o=t.length,a=this.dataSource(),h=[],l=[],d=[],u=0;u<o;u++)r=Number(t[u]),r=isNaN(r)?a.getFieldIndex(t[u]):r,(n=(n=this.columnsByFieldName(t[u]))&&1==n.length&&n[0])instanceof M&&n.isSortByLabel()&&n.isLookupDisplay()&&(s[r]=new $u(n)),h.push(r);e&&(l=e.concat()),i&&(d=i.concat()),this.setLabelComparer(s),this._sortItems(h,l,d)}}},sortColumn:function(t,e){t&&(this.sortingOptions().style()==gs.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(gs.INCLUSIVE,t):this.sortColumnWithStyle(gs.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions().style(),t))},unsortColumn:function(t){t&&this.unsortColumnWithStyle(this.sortingOptions().style(),t)},$$_addSort:function(t,e,i,n){for(var s=t.dataIndex(),r=this.getSortFields(),o=this.getSortDirections(),a=this.getSortCases(),h=this.getLabelComparer(),l=-1,d=r.length,u=0;u<d;u++)if(r[u]==s){l=u;break}0<=l?(o[l]=e,a[l]=i):n?(r.splice(0,0,s),o.splice(0,0,e),a.splice(0,0,i)):(r.push(s),o.push(e),a.push(i)),t.isSortByLabel()&&t.isLookupDisplay()?h[s]||(h[s]=new $u(t)):delete h[s],this._sortItems(r,o,a)},sortColumnWithStyle:function(t,e){if(!this.isItemEditing(null)){if(!e)throw new Error("column is null");var i;e.dataIndex()<0||(i=this._sortingOptions.textCase(),t==gs.EXCLUSIVE?e.sortOrder()<0?this.orderBy([e],[ps.ASCENDING],[i]):e.sortDirection()==ps.ASCENDING?this.orderBy([e],[ps.DESCENDING],[i]):this.isGroupedColumn(e)&&this._items._groupSorting?this.orderBy([e],[ps.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=gs.INCLUSIVE&&t!=gs.REVERSE||(e.sortOrder()<0?this.$$_addSort(e,ps.ASCENDING,i,t==gs.REVERSE):e.sortDirection()==ps.ASCENDING?this.$$_addSort(e,ps.DESCENDING,i,t==gs.REVERSE):this.isGroupedColumn(e)&&this._items._groupSorting?this.$$_addSort(e,ps.ASCENDING,i,t==gs.REVERSE):this.unsortColumnWithStyle(t,e)))}},unsortColumnWithStyle:function(t,e){if(!this.isItemEditing(null)&&e){for(var i=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),r=this.getLabelComparer(),o=-1,a=i.length,h=0;h<a;h++)if(i[h]==e.dataIndex()){o=h;break}o<0||(t==gs.EXCLUSIVE?this.orderBy([],[],[]):t!=gs.INCLUSIVE&&t!=gs.REVERSE||(i.splice(o,1),n.splice(o,1),s.splice(o,1),delete r[e.dataIndex()],this._sortItems(i,n,s)))}},canFiltering:function(){return this._fireFiltering()},applyFilters:function(t,e){return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions().toast(),!0,function(){this.$_doApplyFilters(t,e)}.bind(this)),!0)},$_doApplyFilters:function(t,e){var i=this._items.itemCount();this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters(this._rootColumn)}finally{this._items.endFiltering(t,e),this._filterRunning=!1}i!==this._items.itemCount()&&this.setTopIndex(0,!0)},$_addFilters:function(t){for(var e,i,n,s,r,o=t.count(),a=0;a<o;a++)if((e=t.getItem(a))instanceof M){if(i=e.filters())for(s=i.length,n=0;n<s;n++)(r=i[n]).isActive()&&this._items.addFilter(e.dataIndex(),r)}else e instanceof R&&this.$_addFilters(e)},isFiltered:function(t){return this._items.isFiltered(t&&t.dataIndex())},isGroupedColumn:function(t){return!1},getGroupLevel:function(t){return-1},getGroupLevels:function(){return 0},clearColumnMergeGrouped:function(){this._rootColumn.clearMergeGrouped()},$_makeRowInView:function(t){var e,i=this.layoutManager();t>=i.fixedItemCount()&&(t=t,0==(e=i.fullItemCount())?0<i.itemCount()?this.setTopItem(t):this.seTopIndex(0):t>=this.topItem()&&t<this.topItem()+e||(t>=this.topItem()+e&&(t=t-e+1),this.setTopItem(Math.max(0,t))))},$_makeColumnInView:function(t){var e,i,n=layoutManager(),s=t.root(),r=s.displayIndex();if(r>=n.fixedColCount()){for(i=n.columnBounds(r).x,e=t;e!=s;)i+=e.displayOffset(),e=e.parent();i<this.leftPos()?this.setLeftPos(i):0<(r=i+t.displayWidth()-this.leftPos()-n.nonfixedBounds().width)&&this.setLeftPos(Math.min(i,this.leftPos()+r))}},makeColumnVisible:function(t){t=this.getIndex(-1,t);this.makeCellVisible(t)},makeItemVisible:function(t){t=this.getIndex(t,null);this.makeCellVisible(t,!0)},makeCellVisible:function(t,e){e?(this.layoutManager().makeCellVisible(t),this.invalidateLayout()):this.isValid(t)?this.layoutManager().cellIsVisible(t)||(this.layoutManager().makeCellVisible(t),this.invalidateLayout()):t&&t.column()&&(this.layoutManager().makeCellVisible(t),this.invalidateLayout())},copyToClipboard:function(t,e,i){var n,s,r=this.focusedIndex();return i||this._copyOptions.isEnabled()?(i||(s=this.selections(),s=(n=this._copyOptions.isSingleMode()||0==s.count()||s.isSingleCell())?new mu(s,r,r):s.getItem(0),i=this._fireCopy(s,t)),i?n?this._clipboardManager.copyCellToClipboard(r):this._clipboardManager.copyToClipboard(e||s.getBounds()):null):this._clipboardManager.copyEmptyToClipboard()},cutToClipboard:function(t,e,i){var n,s=this.focusedIndex();if(i||this._copyOptions.isEnabled()){if(i||(n=this.selections(),n=(o=this._copyOptions.isSingleMode()||0==n.count()||n.isSingleCell())?new mu(n,s,s):n.getItem(0),i=this._fireCut(n,t)),!i)return null;t=o?this._clipboardManager.cutCellToClipboard(s):this._clipboardManager.cutToClipboard(e||n.getBounds());if(t){var r=this.dataSource();if(this.isItemEdited()){var i=this.getEditingItem(),o=i.dataRow(),s=t.rowFields;if(s&&s.hasOwnProperty(o)){var a={},h=s[o];for(let t=0;t<h.length;t++)a[r.getOrgFieldName(h[t])]=void 0;i.setValues(a)}}else r&&t.rowFields&&r.fillValue(t.rowFields,void 0);return t.data}}return{data:"",rowFields:null}},toClipboard:function(t,e){if(!this.isEmpty()){if(!(t&&t instanceof ir)){var i,n=t?(i=t.startColumn?this.columnByName(t.startColumn):this.getVisibleColumn(0),t.endColumn?this.columnByName(t.endColumn):this.getVisibleColumn(this.visibleColumnCount()-1)):(i=this.getVisibleColumn(0),this.getVisibleColumn(this.visibleColumnCount()-1));if(!i||!n)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),r=null==t.endItem?this.itemCount()-1:Math.min(t.endItem,this.itemCount()-1);t=ir.createRange(s,i,r,n)}var o,s=null==(s=this.copyToClipboard(null,t,!0))?"":s;if(!e)return s;window.clipboardData?window.clipboardData.setData("text",s):(o=document.createElement("textarea"),document.body.appendChild(o),o.value=s,o.select(),document.execCommand("copy"),setTimeout(function(){document.body.removeChild(o),o=null},100))}},pasteFromClipboard:function(i,t){function e(){try{var t,e;this._pasteOptions.isSingleMode()?this._clipboardManager.pasteCellFromClipboard(n,i):(t=this._pasteOptions.isNoDataEvent(),this._clipboardManager.pasteFromClipboard(n,i,t),n.item()&&H.isEditing(n.item().itemState())&&(e=n.item().getData(n.dataField()),this.validateCellCommit(n,e),this.refreshView()))}catch(t){throw t instanceof Zr&&(t=this._fireValidationFail(this._clipboardManager._appendingIndex.itemIndex(),t.column,t))&&alert(this._editOptions.isShowOnlyValidationMessage()&&t.userMessage?t.userMessage:t.toString()),t}finally{this._editController.reprepareEditor(n),this._firePasted()}}var n=this.focusedIndex().clone();n.normalize(this),this.isValid(n)&&n.dataColumn()&&this._pasteOptions.isEnabled()&&this._firePaste(n,t)&&(this._clipboardManager.prepareRows(n,i)<=1||this._pasteOptions.isSingleMode()?e.call(this):setTimeout(e.bind(this),30))},$_editRowPasted:function(t,e,i,n){this._fireEditItemPasted(t,e,i,n)},$_rowsPasted:function(t){this._fireItemsPasted(t)},$_cellPasting:function(t,e){return this._fireCellPasting(t,e)},selectColumnFilters:function(t){this.isItemEditing(null)||this._fireFiltering()&&this._filterSelector.show(t,this.filteringOptions().selector())},closeFilterSelector:function(){this._filterSelector.hide()},closePopups:function(){this._filterSelector.hide(),this._popupMenuManager.close(),this._editController.closeList()},closePopups2:function(){this._popupMenuManager.close(),this._editController.closeList()},isFilterSelecting:function(t){return this._filterSelector.isOpened()&&this._filterSelector.column()===t},getCellValue:function(t,e){t=this.getItem(t);if(t){if("string"==typeof e){var i=this.itemSource().dataSource();if(!i)return;e=i.getFieldIndex(e)}return t.getData(e)}},setCellValue:function(t,e,i){t=this.getItem(t);if(t){if("string"==typeof e){var n=this.itemSource().dataSource();if(!n)return;e=n.getFieldIndex(e)}t instanceof qr||t instanceof N_?t.setValue(e,i):t.setData(e,i)}},getEditCellValue:function(){if(this.isEditing())return this._editController._editor._editor.value},setEditCellValue:function(t,e,i){(this.isEditing()||e)&&this._editController._editor&&this._editController._editor.setCellEditValue(t,i)},searchItem:function(t,e,i,n,s,r){n=3<arguments.length?n:0,s=!(4<arguments.length)||s,r=5<arguments.length&&r,i=i instanceof Wn?i:i?new Wn(i):null;var o=-1;if(t&&0<t.length&&e&&0<e.length&&(h=this.itemSource())){for(var a,h,l=t.length,d=[],u=h.dataSource(),c=0;c<l;c++)a=parseFloat(t[c]),!isNaN(a)&&a|0==a?d.push(a):0<=(a=u.getFieldIndex(t[c]))&&d.push(a);0<=(o=0<d.length&&(l=h.itemCount(),(o=(n=Math.max(0,n))<l?h.findItem(d,e,i,n,l-1):-1)<0)&&s&&0<n?h.findItem(d,e,i,0,n-1):o)&&r&&(h=this.getIndex(o,St(this.focusedIndex().C(),this.getFirstColumn())),this.setFocusedIndex(h,!0,!0))}return o},searchCell:function(t,e,i,n,s,r,o){n=3<arguments.length?n:0,s=4<arguments.length?s:0,r=!(5<arguments.length)||r,o=6<arguments.length&&o,i=i instanceof zn?i:i?new zn(i):null;var a,h,l=t&&k(t)&&t.concat(),d=this.itemSource(),u=null,c=d&&d.dataSource();if(!l&&(a=i.columns))for(var l=[],_=0,f=a.length;_<f;_++){if(!((h=this.columnByName(a[_]))instanceof M))throw new Error("invalid search Column "+a[_]);if(!(h=h.getField()&&h.getField().orgFieldName()))throw new Error("invalid field name");l.push(h)}if(c){if(!l||l.length<1){l=[];for(var m=c.getFields(),_=0;_<m.length;_++)l.push(m[_].orgFieldName())}if(l&&0<l.length&&null!=e){for(var g,f=l.length,p=[],w=0;w<f;w++)g=parseFloat(l[w]),!isNaN(g)&&g|0==g?p.push(g):p.push(c.getFieldIndex(l[w]));0<p.length&&(f=d.itemCount(),n=Math.max(0,n),s=Math.max(0,s),u=!(u=n<f?d.findCell(p,e,i,n,f-1,s):null)&&r&&0<n?d.findCell(p,e,i,0,n-1,0):u)&&(u.fieldName=c.getOrgFieldName(u.fieldIndex)),u&&o&&(d=a?this.getIndex(u.itemIndex,St(this.columnByName(a[u.searchFieldIndex]),this.focusedIndex().C())):this.getIndex(u.itemIndex,St(this.columnByField(u.fieldIndex),this.focusedIndex().C())))&&this.setFocusedIndex(d,!0,!0)}}return u},$_setDataCellStyle:function(t,e,i,n){var s,e=Math.max(-1,e);if("string"==typeof i){if((s=t.getFieldIndex(i))<0)return}else s=i;this.itemSource().setCellStyle(e,s,n)},setDataCellStyle:function(t,e,i,n){var i=i?this._dataCellStyles.get(i):null;this.$_setDataCellStyle(this.dataSource(),t,e,i),n&&((i=this.focusedIndex())&&i.dataField()==e&&i.dataRow()==t&&this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout())},getDataCellStyle:function(t,e){return this.itemSource().getCellStyle(t,this.dataSource().getFieldIndexOf(e))},getDataCellStyleId:function(t,e){t=this.itemSource().getCellStyle(t,this.dataSource().getFieldIndexOf(e));return t?t.id():null},setDataCellStyles:function(t,e,i){var n,s,r,o,a=this.dataSource(),h=It(t),l=It(e),d=i?this._dataCellStyles.get(i):null;if(h&&l)for(o=l.length,n=0,s=h.length;n<s;n++)for(r=0;r<o;r++)this.$_setDataCellStyle(a,h[n],l[r],d);else if(h)for(n=0,s=h.length;n<s;n++)this.$_setDataCellStyle(a,h[n],e,d);else if(l)for(r=0,s=l.length;r<s;r++)this.$_setDataCellStyle(a,t,l[r],d);else this.$_setDataCellStyle(a,t,e,d);this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},setDataCellStyleRows:function(t,e){this.itemSource().setCellStyles(this._dataCellStyles,t,e),this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},clearDataCellStyles:function(){this.itemSource().clearCellStyles(),this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},setCellWritable:function(t,e){var i,n=t.dataRow(),s=t.column().$_hash;for(i in e){var r="setCell"+Kt(i),r=this.itemSource()[r];r&&r.call(this.itemSource(),n,s,e[i])}!this.isEditing(t)&&$.areEquals(this.focusedIndex(),t)&&this.reprepareEditor()},getCellEditable:function(t){var e=t.dataRow(),t=t.column().$_hash;return this.itemSource().getCellEditable(e,t)},getCellReadOnly:function(t){var e=t.dataRow(),t=t.column().$_hash;return this.itemSource().getCellReadOnly(e,t)},getCellWritable:function(t){var e=this.getCellEditable(t),t=this.getCellReadOnly(t);if(null!=e||null!=t)return(null==e||e)&&!t},getCellCursor:function(t){var e=t.dataRow(),t=t.column().$_hash;return this.itemSource().getCellCursor(e,t)},getCellEditor:function(t){var e=t.dataRow(),t=t.column().$_hash,e=this.itemSource().getCellEditor(e,t);return e&&("string"==typeof e?e:e.type||"text")},getCellEditorOptions:function(t){var e=t.dataRow(),t=t.column().$_hash,e=this.itemSource().getCellEditor(e,t);return e&&("string"==typeof e?null:e)},clearEditableMap:function(t){this.itemSource().clearEditableMap(t)&&!this.isEditing()&&this.reprepareEditor()},getStylesOf:function(t){var e=this._styleMap;return e||((e=this._styleMap={})[u.GRID]=e[u.DEFAULT]=this.styles(),e[u.PANEL]=this._panel.styles(),e[u.BODY]=this._body.styles(),e[u.BODY_EMPTY]=this._body.emptyStyles(),e[u.BODY_ROWHOVER]=this._body.rowHoverStyles(),e[u.BODY_ROWFOCUS]=this._body.rowFocusStyles(),e[u.FIXED]=this._fixedOptions.styles(),e[u.FIXED_COLBAR]=this._fixedOptions.colBarStyles(),e[u.FIXED_ROWBAR]=this._fixedOptions.rowBarStyles(),e[u.HEADER]=this._header.styles(),e[u.HEADER_GROUP]=this._header.groupStyles(),e[u.FOOTER]=this._footer.styles(),e[u.FOOTER_GROUP]=this._footer.groupStyles(),e[u.ROWGROUP_HEADER]=this._rowGroup.headerStyles(),e[u.ROWGROUP_FOOTER]=this._rowGroup.footerStyles(),e[u.ROWGROUP_HEAD]=this._rowGroup.headStyles(),e[u.ROWGROUP_FOOT]=this._rowGroup.footStyles(),e[u.ROWGROUP_SUMMARY]=this._rowGroup.summaryStyles(),e[u.ROWGROUP_BAR]=this._rowGroup.barStyles(),e[u.ROWGROUP_HEADER_BAR]=this._rowGroup.headerBarStyles(),e[u.ROWGROUP_FOOTER_BAR]=this._rowGroup.footerBarStyles(),e[u.ROWGROUP_PANEL]=this._rowGroup.panelStyles(),e[u.INDICATOR]=this._indicator.styles(),e[u.INDICATOR_HEAD]=this._indicator.headStyles(),e[u.INDICATOR_FOOT]=this._indicator.footStyles(),e[u.INDICATOR_SUMMARY]=this._indicator.summaryStyles(),e[u.CHECKBAR]=this._checkBar.styles(),e[u.CHECKBAR_HEAD]=this._checkBar.headStyles(),e[u.CHECKBAR_FOOT]=this._checkBar.footStyles(),e[u.CHECKBAR_SUMMARY]=this._checkBar.summaryStyles(),e[u.STATEBAR]=e.statusBar=this._stateBar.styles(),e[u.STATEBAR_HEAD]=e.statusBarHead=this._stateBar.headStyles(),e[u.STATEBAR_FOOT]=e.statusBarFoot=this._stateBar.footStyles(),e[u.STATEBAR_SUMMARY]=e.statusBarSummary=this._stateBar.summaryStyles(),e[u.SELECTION]=this._selectOptions.maskStyles(),e[u.SCROLLBAR]=this._displayOptions.scrollBarStyles(),e[u.SCROLLTHUMB]=this._displayOptions.scrollThumbStyles(),e[u.SCROLLBUTTON]=this._displayOptions.scrollButtonStyles(),this._treeOptions&&(e[u.TREE_EXPANDER]=this._treeOptions.expanderStyles())),"all"==t?e:e[t]},clearStyles:function(t){var e=this.getStylesOf(t);if("all"==t){for(var i in e)e[i]&&e[i].clearValues();this.refreshView()}else e&&(e.clearValues(),this.refreshView())},alertCellError:function(t,e){this._fireErrorClicked(t,e)},canMoveIndex:function(t){var e=this.layoutManager();return this.fixedOptions().isMovable()||t>=e.fixedColCount()&&t<e.rfixedStartCol()},canMoveToIndex:function(t){var e=this.layoutManager();return this._fixedOptions.isMovable()||t>=e.fixedColCount()&&t<e.rfixedStartCol()},showProgress:function(t){this._progressManager.show(null,null,t)},setProgress:function(t,e,i,n){this._progressManager.setProperties(t,e,i,n)},closeProgress:function(){this._progressManager.close()},beginExportProgress:function(t){this._progressManager.show(null,t,!1)},endExportProgress:function(){this._progressManager.close()},setExportProgress:function(t,e,i){this._progressManager.setProperties(0,t,e,i)},measureText:function(t,e){return this._container.measureText(t,e)},measureTextRect:function(t,e,i,n,s,r,o,a,h,l){return this._container.measureTextRect(t,e,i,n,s,r,o,a,h,l)},setContextMenu:function(t){return t?(this.$_contextMenuHandler||(this.$_contextMenuHandler=function(t){var e,i,n,s=this.activeTool();s&&s._tracker||(s=(t.target||t.srcElement).getBoundingClientRect(),e=t.clientX-s.left,s=t.clientY-s.top,i=(n=this._container.findElementAt(e,s))&&n.$name?(n.$name+"").replace("Element",""):i,n=this._fireContextMenuPopup(e,s,i),this._contextMenu&&(t.preventDefault(),n)&&this._popupMenuManager.showContext(this._contextMenu,e,s))}.bind(this),it?this._container._canvas.addEventListener("contextmenu",this.$_contextMenuHandler):this._container._canvas.attachEvent("contextmenu",this.$_contextMenuHandler)),this._contextMenu=new En("gridContextMenu",this,t)):(this._contextMenu=null,this.$_contextMenuHandler&&(it?this._container._canvas.removeEventListener("contextmenu",this.$_contextMenuHandler):this._container._canvas.detachEvent("contextmenu",this.$_contextMenuHandler),this.$_contextMenuHandler=null)),this._contextMenu},setWatchTimer:function(t){this._container.setWatchTimer(t)},container:function(){return this._container},addElement:function(t,e){this._rootElement.addElement(t,e)},invalidate:function(){this._container.invalidate()},containElement:function(t){var e=!1;return e=!(e=!(e=(e=this.container().containerElement().contains(t))&&this._filterSelector&&this._filterSelector.isOpened()?this._filterSelector.containElement(t):e)&&this._popupMenuManager&&this._popupMenuManager.isShow()?this._popupMenuManager.containElement(t):e)&&this._delegate?this._delegate.containElement(t):e},_beforeRender:function(t){this._linesLayer.invalidate()},$_setEditFocused:function(t,e){var i;t==this.$_editFocused||!(this.$_editFocused=t)||(i=this.focusedIndex())&&this.isValid(i)||(i=this.getFirstCell())&&this.setFocusedIndex(i),t&&"focusin"==e.type&&E.isAncestorOf(this._container._container,e.target)&&ut(this)},_resetFocusMask:function(){var t=this._layoutManager,e=t.gridBounds(),i=this._focusedIndex.item(),n=this.getFocusedCellView();!t.isRowGrouped()||this.isMergedRowGrouped()||i instanceof Ar?this.isValid(this._focusedIndex)&&(0<t.fixedColCount()||0<t.rfixedColCount())&&(n instanceof bh||i instanceof C||i instanceof Pr)&&(n=this._focusedIndex.column().root().displayIndex(),i instanceof zh||i instanceof Kh||(n<t.fixedColCount()?e.copyHorz(t.fixedBounds()):n>=t.rfixedStartCol()?e.copyHorz(t.rfixedBounds()):e.copyHorz(t.nonfixedBounds()))):e.setLeft(t.rowGroupBounds().x),this._focusLayer._mask=e},_resetRowFocusMask:function(){var t=this._layoutManager,e=t.gridBounds();switch(this.displayOptions().rowFocusMask()){case Us.DATA:e.width=t.bodyBounds().right()+t.rfixedWidth()-e.x;break;case Us.FILL:e.setLeft(-e.x);break;default:e.width=t.bodyBounds().right()+t.rfixedWidth(),e.x=0}this._rowFocusLayer._mask=e},_doDraw:function(t){var e,i,n=this.clientRect(),s=this._displayOptions,r=this._body.emptyStyles(),o=r.background(),a=u&&u.Default&&u.Default._bodyEmpty&&u.Default._bodyEmpty.background();t.clipRect(n),o&&o!=a&&(this._hscrollBar&&this._hscrollBar.isVisible()&&(n.height-=isNaN(this._scrollBarHeight)?0:this._scrollBarHeight),t.drawRectI(o,null,n)),this.isEmpty()&&s&&s._showEmptyMessage&&0<this._rootColumn.visibleCount()&&((a=this._bodyView.getBounds()).width=n.width,o=r.font(),n=r.foreground(),s=s._emptyMessage,e=r.textAlignment(),i=(i=r.lineAlignment())==D.FAR?"bottom":i==D.NEAR?"top":"middle",t.getExplicitTextRect(o,s,a.x,a.y,a.width,a.height,e,i,a),a.x-=r.paddingLeft(),a.y-=r.paddingTop(),a.width+=r.paddingLeft()+r.paddingRight(),a.height+=r.paddingTop()+r.paddingBottom(),t.drawTextRectExplicit(o,n,s,a,e,i))},setFocus:function(){this._editController.setFocus(!0),Q!==this&&ut(this)},_isColumnsDirty:function(){return this._columnsDirty},_isStylesDirty:function(){return this._stylesDirty},_rootGroup:function(){return this._rootColumn},_checkEditing:function(){if(this.itemSource()instanceof jr&&this.itemSource().isEditing())throw"Item is editing"},_focusHandler:function(t){this._editController.setFocus()},_validateScrollBars:function(){this._hscrollBar&&this._hscrollBar._mouseOut(),this._vscrollBar&&this._vscrollBar._mouseOut()},_addGroupView:function(){this.addElement(this._rowGroupView)},_addGridObject:function(t){this._gridObjects.push(t)},_cleanGridObjects:function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean();this._stylesDirty=!1},_visualObjectChanged:function(t){t instanceof Yo?this._panelView.invalidate():t instanceof ea?this._bodyView.invalidate():t instanceof Jo?this._indicatorView.invalidate():t instanceof Qo?this._stateBarView.invalidate():t instanceof ta?this._checkBarView.invalidate():t instanceof jo||t instanceof qo?(this._doHeaderSummaryMergeChanged(t),this._headerView.invalidate()):t instanceof Xo?(this._doFooterMergeChanged(t),this._footerView.invalidate()):0 instanceof Zo},_doLayout:function(t){this._resetting=!1;try{this.$_doLayout(t)}finally{this._loading&&(this._loading=!1),this._dataChanged=!1,this._updateRows=null}this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._rootColumn.clean()),this._columnLayoutChanged=!1;var e,t=this.layoutManager();0<t.itemCount()&&(t=(e=t.topIndex())+t.itemCount(),e!=this._prevTopIndex&&setTimeout(function(){this._fireTopIndexChanged(e)}.bind(this),0),this._prevTopIndex=e,t!=this._prevLast&&t==this.itemCount()&&setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=t),this.$_checkCurrentRow()},$_doLayout:function(t){ft(">>> GridBase.doLayout");var e,i,n,s=this._rootColumn.visibleCount(),r=this.$_fixedColCount=this._fixedOptions.colCount(),o=this.$_rfixedColCount=this._fixedOptions.rightColCount(),a=this._body.styles(),h=this._header.styles(),l=this._header.groupStyles(),d=this._header.subStyles(),u=this._header.summary().styles(),c=this._footer.styles(),_=a.sysDefault(),f=h.sysDefault(),m=d.sysDefault(),g=u.sysDefault(),p=c.sysDefault(),w=this._rowGroup,v=this._layoutManager,C=v.yU(),t=t.clone();if(this.$_fixedRowCount=this._fixedOptions.rowCount(),this.$_fixedColEditable=this._fixedOptions.isEditable(),this.$_fixedRowEditable=this._fixedOptions.isRowEditable(),this.$_editOptionsWritable=this._editOptions.isWritable(),this._body._prepareUpdate(),this.clearEditableMap(this._focusedIndex),s<1)this._rootElement.setVisible(!1),this._emptyView.setVisible(!0),this._emptyView.setSize(t.width,t.height),this._emptyView.invalidate();else{for(e=0;e<s;e++)(i=this._rootColumn.getVisibleItem(e)).prepare(this,e<r,s-o<=e),i.styles().setSysDefault(_),i instanceof zl?(i.styles().setParent(a,!1),i._header.styles().setParentAndDefault(h,f),i._header.subStyles().setParentAndDefault(d,m),i._header.summary().styles().setParentAndDefault(u,g),i._footer.styles().setParentAndDefault(c,p),i.rendererObj().prepareRuntime(this),0 instanceof M):i instanceof R&&this.$_setColumnGroupStyles(i,a,l,h,d,u,c);for(e=0,s=w.levelCount();e<s;e++)(n=w.getLevel(e)).headerStyles().setParent(w.headerStyles()),n.footerStyles().setParent(w.footerStyles()),n.barStyles().setParent(w.barStyles()),n.headerBarStyles().setParent(w.headerBarStyles()),n.footerBarStyles().setParent(w.footerBarStyles());this._linesLayer.invalidate(),this._columnWidthsDirty&&(this._columnWidthsDirty=!1,this.$_resetColumnWidths()),this._emptyView.setVisible(!1),this._rootElement.setVisible(!0),v.setHeightMeasurer(this.heightMeasurer()),v.measure(t,this._leftPos,this._topIndex,this._displayOptions.isVscrollBar()?this._scrollBarWidth:0,this._displayOptions.isHscrollBar()?this._scrollBarHeight:0),this._topIndex=v.topIndex();var y=this._leftPos=v.leftPos(),C=(v.layout(t),C.getChild(0).setSize(t.width,t.height),this.activeTool()&&this.activeTool().layoutChanged(),this._updateScrollBars(v,t),this._footerView.isVisible()&&(v.isRowGrouped()&&0<y?((t=v.footerBounds()).x=y,t.y=0,this._footerView.setMask(t)):this._footerView.setMask(null)),this._layoutSelectionViews(),this._layouted=!0,this.getCellView(null,this._focusedIndex));C&&C.setFocused(!0),this._editController.resetEditor(),this._debugView&&(this._debugView.setBounds(0,0,this._width,this._height),this._debugView.invalidate()),this._horzScrolling=!1}},groupingOptionsChanged:function(){this._doGroupingOptionsChanged()},_doGroupingOptionsChanged:function(){},_createEmptyView:function(t){return new Sa(t)},_createPanelModel:function(){return new Yo(this)},_createPanelView:function(t,e){return new Ta(t,e)},_createFooterModel:function(){return new Xo(this)},_createFooterView:function(t,e){return new Da(t,e)},_createBodyView:function(t,e,i,n){return new Na(t,e,i,n)},_createDelegate:function(){return new Zl(this)},_createLayoutManager:function(){return new ed(this)},_createEditController:function(){return new(_e()?ku:Od)(this)},_objectVisualChanged:function(t){this._shadowDom&&this._shadowDom.reset()},_columnIndexChanged:function(t){this.clearSelection(),this._resetColumnIndicies(),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this.refreshView(),this._shadowDom&&this._shadowDom.setColumns(this,this.getLeafColumns())},_columnVisibleIndexChanged:function(t){this.clearSelection(),this._resetVisibleColumns(),this._resetColumnPositions(),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this._populateMerges(),this.refreshView(),this._shadowDom&&this._shadowDom.setColumns(this,this.getLeafColumns())},_columnCheckedChanged:function(t){this._fireColumnCheckedChanged(t)},_dataColumnChanged:function(t){t._ignoreRefresh||this.refreshView(),this._editController&&this._editController.dataColumnChanged(t)},_updateScrollBars:function(t,e){var i,n=this.displayOptions();t._hscrollBar?(this._hscrollBar||(this._hscrollBar=new ic(this._dom,!1),this._scrollLayer.addElement(this._hscrollBar),this._hscrollBar.addListener(this)),i=t.bodyBounds().width,n=Math.min(e.width-t.gridBounds().x-t.fixedWidth()-t.rfixedWidth()-(t._vscrollBar&&n.isVscrollBar()?this._scrollBarWidth:0),t.columnsLength()-t.leftPos()),this._hscrollBar.setProperties(0,i,n),this._hscrollBar.setPosition(t.leftPos()),this._hscrollBar.setVisible(!0)):this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.setVisible(!1)),t._vscrollBar?(this._vscrollBar||(this._vscrollBar=new ic(this._dom,!0),this._scrollLayer.addElement(this._vscrollBar),this._vscrollBar.addListener(this)),n=(i=this.itemCount())-t.fixedItemCount(),i=Math.min(t.fullItemCount(),i-t.topIndex()),this._vscrollBar.setProperties(0,n,i),this._vscrollBar.setPosition(t.topIndex()),this._vscrollBar.setVisible(!0)):this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.setVisible(!1)),this._layoutScrollBars(t,e)},_layoutScrollBars:function(t,e){this._scrollLayer.setBounds(e.x,e.y,e.width,e.height);var i=this._displayOptions.isVscrollBar()?this._scrollBarWidth:0,n=this._displayOptions.isHscrollBar()?this._scrollBarHeight:0,s=this._hscrollBar,r=this._vscrollBar;t._hscrollBar&&(s.setBounds(e.x,e.bottom()-n,e.width-(t._vscrollBar?i:0),n),s.layoutContent(t)),t._vscrollBar&&(r.setBounds(e.right()-i,e.y,i,e.height-(t._hscrollBar?n:0)),r.layoutContent(t)),t._vscrollBar&&t._hscrollBar?(this._scrollCorner||(this._scrollCorner=new ec(this._dom),this._scrollLayer.addElement(this._scrollCorner),this._scrollCorner.addListener(this)),this._scrollCorner.setVisible(!0),this._scrollCorner.setBounds(e.right()-i,e.bottom()-n,i,n)):this._scrollCorner&&this._scrollCorner.setVisible(!1)},_addSelectionElement:function(t){return!(!t||this._selectionLayer.contains(t)||(this._selectionLayer.addElement(t,this._toolContext),0))},_removeSelectionElement:function(t){return!!this._selectionLayer.contains(t)&&(this._selectionLayer.removeElement(t),!0)},_addSelectionView:function(t){var e=null;return this._selectionViews.get(t)||(e=this._delegate.borrowSelectionView(t),this._selectionViews.set(t,e),this._addSelectionElement(e)),e},_clearSelectionViews:function(){this._selectionViews.each(function(t,e){this._removeSelectionElement(e),this._delegate.returnSelectionView(e)}.bind(this)),this._selectionViews.clear()},_layoutSelectionViews:function(){this._layouted&&!this._resetting&&this._selectionViews.each(function(t,e){var i,n,s=_e(),r=this.layoutManager();this._selections.isSingleCell()&&!s?e.setVisible(!1):(n=!1,i=new O,n=t instanceof gu?this.$_getSelectionRowsRect(r,t,i):t instanceof pu?this.$_getSelectionColumnsRect(r,t,i):this.$_getSelectionRangeRect(r,t,i),e.setVisible(n),e.isVisible()&&(1===e._border.width()&&(i.setLeft(i.x-1),i.setTop(i.y-1)),e.setRectI(i),e.updateElement(t,s?this._selectOptions.mobileStyles():this._selectOptions.maskStyles()),e.invalidate()))}.bind(this))},$_getSelectionRowsRect:function(t,e,i){var n,s,r,e=e.getBounds(),o=t.fixedItemCount(),a=this.topIndex();if(0<o){if(e.R1()>=a+o+t.itemCount()||e.R2()<0||e.R1()>=o&&e.R2()<a+o)return!1;r=t.fixedHeight()+this.fixedOptions().rowBarHeight(),e.R1()<o?n=t.itemBounds(Math.max(0,e.R1())):(n=t.itemBounds(Math.max(0,e.R1()-a))).y=Math.max(n.y,r),e.R2()<o?s=t.itemBounds(e.R2()):e.R1()<=o&&e.R2()<o+a?s=t.itemBounds(Math.min(o+a,o)-1):e.R2()>=a?(s=t.itemBounds(Math.min(t.itemCount()+o-1,e.R2()-a))).y=Math.max(s.y,r):s=n}else{if(!(0<t.itemCount()))return!1;if(e.R1()>=a+t.itemCount()||e.R2()<a)return!1;n=t.itemBounds(Math.max(0,e.R1()-a)),s=t.itemBounds(Math.min(t.itemCount()-1,e.R2()-a))}return i.copy(n.union(s)),i.offset(0,t.bodyBounds().y),i.setRight(t.bodyBounds().right()+t.rfixedWidth()),!0},$_getSelectionColumnsRect:function(t,e,i){var n,s,e=e.getBounds(),r=t.fixedColCount(),o=t.rfixedColCount(),a=t.rfixedStartCol(),h=e.C1().root().displayIndex(),l=e.C2().root().displayIndex(),d=this.fixedOptions().colBarWidth(),u=t.dataRootRect(e.C1()),e=t.dataRootRect(e.C2());return 0<r&&(n=(s=t.columnRect(r-1).right())+d,r<=h&&(u.setRight(Math.max(n,u.right())),u.setLeft(Math.max(n,u.x))),r<=l)&&(e.setRight(Math.max(h<r?s:n,e.right())),e.setLeft(Math.max(n,e.x))),0<o&&(s=(n=t.rfixedLeft())+d,h<a&&(u.setRight(Math.min(n,u.right())),u.setLeft(Math.min(a<=l?s:n,u.x))),l<a)&&(e.setRight(Math.min(n,e.right())),e.setLeft(Math.min(n,e.x))),i.setLeft(Math.min(u.x,e.x)),i.setRight(Math.max(u.right(),e.right())),e.setBottom(t.itemRect(t.itemCount()-1).bottom()),i.setTop(t.headerBounds().y),i.setBottom(e.bottom()),!0},$_getSelectionRangeRect:function(t,e,i){var n=new O;return!!this.$_getSelectionRowsRect(t,e,n)&&(i.setTop(n.y),i.setBottom(n.bottom()-1),this.$_getSelectionColumnsRect(t,e,n),i.setLeft(n.x),i.setRight(n.right()-1),!0)},initStyles:function(){var t=this.styles(),e=this.header().styles(),i=this.header().summary().styles(),n=this.footer().styles();this.panel().styles().setParent(t,!1),this.body().styles().setParent(t,!1),this.body().emptyStyles().setParent(t,!1),this.body().rowHoverStyles().setParent(t,!1),this.body().rowFocusStyles().setParent(t,!1),this.fixedOptions().styles().setParent(t,!1),this.fixedOptions().colBarStyles().setParent(t,!1),this.fixedOptions().rowBarStyles().setParent(t,!1),this.header().styles().setParent(t,!1),this.header().groupStyles().setParent(t,!1),this.header().subStyles().setParent(t,!1),this.header().summary().styles().setParent(t,!1),this.footer().styles().setParent(t,!1),this.footer().groupStyles().setParent(t,!1),this.indicator().styles().setParent(t,!1),this.indicator().headStyles().setParent(e,!1),this.indicator().footStyles().setParent(n,!1),this.indicator().summaryStyles().setParent(i,!1),this.checkBar().styles().setParent(t,!1),this.checkBar().headStyles().setParent(e,!1),this.checkBar().footStyles().setParent(n,!1),this.checkBar().summaryStyles().setParent(i,!1),this.stateBar().styles().setParent(t,!1),this.stateBar().headStyles().setParent(e,!1),this.stateBar().footStyles().setParent(n,!1),this.stateBar().summaryStyles().setParent(i,!1),this.rowGroup().headStyles().setParent(e,!1),this.rowGroup().footStyles().setParent(n,!1),this.rowGroup().summaryStyles().setParent(i,!1),this.rowGroup().headerStyles().setParent(t,!1),this.rowGroup().footerStyles().setParent(t,!1),this.rowGroup().panelStyles().setParent(e,!1),this.rowGroup().barStyles().setParent(this.rowGroup().headerStyles(),!1),this.rowGroup().headerBarStyles().setParent(this.rowGroup().headerStyles(),!1),this.rowGroup().footerBarStyles().setParent(this.rowGroup().footerStyles(),!1),this.selectOptions().maskStyles().setParent(null,!1),this.displayOptions().scrollBarStyles().setParent(null,!1),this.displayOptions().scrollThumbStyles().setParent(null,!1),this.displayOptions().scrollButtonStyles().setParent(null,!1),i=u.Default,this.styles().setSysDefault(i.getGrid(),!1),this.panel().styles().setSysDefault(i.panel(),!1),this.body().styles().setSysDefault(i.body(),!1),this.body().emptyStyles().setSysDefault(i.bodyEmpty(),!1),this.body().rowHoverStyles().setSysDefault(i.bodyRowHover(),!1),this.body().rowFocusStyles().setSysDefault(i.bodyRowFocus(),!1),this.fixedOptions().styles().setSysDefault(i.fixed(),!1),this.fixedOptions().colBarStyles().setSysDefault(i.fixedColBar(),!1),this.fixedOptions().rowBarStyles().setSysDefault(i.fixedRowBar(),!1),this.header().styles().setSysDefault(i.header(),!1),this.header().groupStyles().setSysDefault(i.headerGroup(),!1),this.header().subStyles().setSysDefault(i.headerSub(),!1),this.header().summary().styles().setSysDefault(i.headerSummary(),!1),this.footer().styles().setSysDefault(i.footer(),!1),this.footer().groupStyles().setSysDefault(i.footerGroup(),!1),this.indicator().styles().setSysDefault(i.indicator(),!1),this.indicator().headStyles().setSysDefault(i.indicatorHead(),!1),this.indicator().footStyles().setSysDefault(i.indicatorFoot(),!1),this.indicator().summaryStyles().setSysDefault(i.indicatorSum(),!1),this.checkBar().styles().setSysDefault(i.checkBar(),!1),this.checkBar().headStyles().setSysDefault(i.checkBarHead(),!1),this.checkBar().footStyles().setSysDefault(i.checkBarFoot(),!1),this.checkBar().summaryStyles().setSysDefault(i.checkBarSum(),!1),this.stateBar().styles().setSysDefault(i.stateBar(),!1),this.stateBar().headStyles().setSysDefault(i.stateBarHead(),!1),this.stateBar().footStyles().setSysDefault(i.stateBarFoot(),!1),this.stateBar().summaryStyles().setSysDefault(i.stateBarSum(),!1),this.rowGroup().headStyles().setSysDefault(i.rowGroupHead(),!1),this.rowGroup().footStyles().setSysDefault(i.rowGroupFoot(),!1),this.rowGroup().summaryStyles().setSysDefault(i.rowGroupSummary(),!1),this.rowGroup().headerStyles().setSysDefault(i.rowGroupHeader(),!1),this.rowGroup().footerStyles().setSysDefault(i.rowGroupFooter(),!1),this.rowGroup().panelStyles().setSysDefault(i.rowGroupPanel(),!1),this.rowGroup().barStyles().setSysDefault(i.rowGroupBar(),!1),this.rowGroup().headerBarStyles().setSysDefault(i.rowGroupHeaderBar(),!1),this.rowGroup().footerBarStyles().setSysDefault(i.rowGroupFooterBar(),!1),this.selectOptions().maskStyles().setSysDefault(i.selection(),!1),this.displayOptions().scrollBarStyles().setSysDefault(i.scrollBar(),!1),this.displayOptions().scrollThumbStyles().setSysDefault(i.scrollThumb(),!1),this.displayOptions().scrollButtonStyles().setSysDefault(i.scrollButton(),!1)},$_setColumnGroupStyles:function(t,e,i,n,s,r,o){var a=t.count(),h=e.sysDefault(),l=n.sysDefault(),d=s.sysDefault(),u=r.sysDefault(),c=o.sysDefault();t.styles().setParent(e,!1),t.header().styles().setParentAndDefault(i,i.sysDefault());for(var _=0;_<a;_++){var f,m=t.getItem(_);m.prepare(this,t.$_fixed,t.$_rightFixed),m.styles().setSysDefault(h),m instanceof zl?(f=m.header(),m.styles().setParent(e,!1),f.styles().setParentAndDefault(n,l),f.subStyles().setParentAndDefault(s,d),f.summary().styles().setParentAndDefault(r,u),m.footer().styles().setParentAndDefault(o,c),m.rendererObj().prepareRuntime(this),m instanceof M&&m.dynamicStyles().prepare()):m instanceof R&&this.$_setColumnGroupStyles(m,e,i,n,s,r,o)}},$_resetColumnWidths:function(){for(var t=this._rootColumn.visibleCount();t--;){var e=this._rootColumn.getVisibleItem(t);e._displayWidth=e._groupWidth=e._width=B(e.width()),e instanceof R&&e.resetGroupWidths()}},_canMerge:function(){return!1},_populateMerges:function(){if(this._canMerge())for(var t,e,i=this.getHorzColumns(),n=0,s=i.length;n<s;n++)(t=b(i[n],zl))&&t.canMerge()&&((e=t.stateFor(Wh.MERGE_ROOMS))||(e=new Wh(t),t.setState(Wh.MERGE_ROOMS,e)),e.clear(),t instanceof M&&t.isMergeGrouped()?0<this.getGroupLevel(t.dataIndex())&&e.initialize(Gh.INIT_COUNT):e.initialize($h.INIT_COUNT))},_sortItems:function(e,t,i){var n=e.concat(),s=t?t.concat():[],r=i?i.concat():[];this._fireSorting(n,s)&&this._toastManager.show(this.sortingOptions().toast(),!0,function(){var t=this.sortingOptions().isKeepFocusedRow()&&this.focusedIndex()?this.focusedIndex().dataRow():-1;this._doSortItems(e,s,r),0<=t&&(t=$.temp(this,this.getItemIndexOfRow(t),this.focusedIndex().C()),this.setFocusedIndex(t,!0,!0))}.bind(this))},_doSortItems:function(t,e,i){},_clearFitWidths:function(){this._rootColumn.clearFitWidths()},$_rowGroupMergeModeChanged:function(){this._doRowGroupMergeModeChanged()},_doRowGroupMergeModeChanged:function(){this.rowGroupView()&&this.rowGroupView().clearFooterViews()},$_rowGroupFooterMergeChanged:function(){this._doRowGroupFooterMergeChanged()},_doRowGroupFooterMergeChanged:function(){},$_footerMergeChanged:function(){this._doFooterMergeChanged()},_doFooterMergeChanged:function(){var t=this.footer();t._summaryMergeDirty&&(this._footerMergeManager.buildRooms(this,t._mergeCells),t._summaryMergeDirty=!1)},$_headerSummaryMergeChanged:function(){this._doHeaderSummaryMergeChanged()},_doHeaderSummaryMergeChanged:function(){var t=this.header().summary();t._summaryMergeDirty&&(this._headerSummaryMergeManager.buildRooms(this,t._mergeCells),t._summaryMergeDirty=!1)},$_rowGroupAdornmentsChanged:function(){this._doRowGroupAdornmentsChanged()},_doRowGroupAdornmentsChanged:function(){},$_summaryModeChanged:function(){this._doSummaryModeChanged()},_doSummaryModeChanged:function(){},$_groupSummaryModeChanged:function(){this._doGroupSummaryModeChanged()},_doGroupSummaryModeChanged:function(){},$_groupSortingChanged:function(){this._doGroupSortingChanged()},_doGroupSortingChanged:function(){},_columnMergeRuleChanged:function(t){this._populateMerges(),this.refreshView()},$_columnFiltersChanged:function(t,e){this._doColumnFiltersChanged(t,e)},_doColumnFiltersChanged:function(t,e){this._fireFilteringChanged()},$_columnFilterActionsChanged:function(t){this._doColumnFilterActionsChanged(t)},_doColumnFilterActionsChanged:function(t){this.invalidateLayout()},$_columnFilterActionClicked:function(t,e,i){this._fireFilterActionClicked(t,e,i)},_editorStarted:function(t,e){this.edit(e)},_editorChange:function(t,e,i){this._fireEditChange(e,i)},getEditValue:function(t,e,i){this._doGetEditValue(e,i)},_doGetEditValue:function(t,e){this._fireGetEditValue(t,e)},editorCommit:function(t,e,i,n){return this._doCellCommit(e,i,n)},_doCellCommit:function(t,e,i){return this._fireEditCommit(t,e,i)},editorCancel:function(t,e){this._doCellCancel(e)},editorCanceled:function(){this.activeTool().resetFocused()},_doCellCancel:function(t){return this._fireEditCanceled(t)},_editorSearch:function(t,e,i){this._fireEditSearch(e,i)},_searchCellButtonClick:function(t,e,i){return this._fireSearchCellButtonClick(e,i)},$_validateCell:function(e,t,i){try{this._fireValidateCell(e,i,t)}catch(t){throw t instanceof Zr&&t.level!==Is.IGNORE&&(t.column=e.column()),t}},$_validateRow:function(t,e){for(var i=this.getDataColumns(),n=0,s=i.length;n<s;n++){var r=i[n],o=$.temp(this,t.index(),r),r=t.getData(r.dataIndex());this.$_validateCell(o,r,e)}var a=t.getRowObject();try{this._fireValidateRow(t,e,a)}catch(t){throw t instanceof Zr&&t.level,t}},$_validateCellValue:function(e,t){try{var i=H.isInserting(e.item().itemState()),n=(this._validationManager.validateCell(e,i),this.$_validateCell(e,t,i),e.dataColumn().setError(null),e.dataColumn().setErrorLevel(Is.IGNORE),e.dataId()),s=e.dataColumn().dataIndex(),r=this._validationManager._validateCellList[n];return r&&r[s]&&delete r[s],!0}catch(t){if(!(t instanceof Zr))throw t;e.dataColumn().setError(t.message||t),e.dataColumn().setErrorLevel(t.level||Is.ERROR),this._validationManager._userValidations&&this._validationManager.addInvalidateCell(e,t)}return!1},validateCellCommit:function(t,e){this.editOptions().isValidateOnEdited()&&this.$_validateCellValue(t,e)},checkValidateCells:function(t,e){return this._validationManager.checkValidateCells(t,e)},getInvalidCellList:function(){return this._validationManager.getInvalidCellList()},clearInvalidCellList:function(){this._validationManager.clearInvalidCellList()},scrollRow:function(t){var e=this.topIndex();this.setTopIndex(e+t),t=this.topIndex()-e},$_getFieldDefaults:function(t){for(var e,i=this.dataSource().fieldCount(),n=[],s=0;s<i;s++)n.push(I);for(s=0;s<i;s++)(e=function t(e,i){for(var n=0;n<e.count();n++){var s,r=b(e.getItem(n),M);if(r&&r.dataIndex()==i)return s=(r=r.getField())&&r.defaultValue();if((r=b(e.getItem(n),R))&&(s=t(r,i))!=I)return s}return I}(this._rootColumn,s))&&(n[s]=e);return n},$_getColumnDefaults:function(t,e){for(var i=0,n=t.count();i<n;i++){var s=t.getItem(i);s instanceof M?null!=s.defaultValue()&&(e[s.dataIndex()]=s.defaultValue()):s instanceof R&&this.$_getColumnDefaults(s,e)}},$_getItemDefaults:function(t,e){},$_readDefaultValues:function(t){},$_getInsertDefaults:function(t){var e=this.$_getFieldDefaults(this.itemSource().dataSource());return this.$_getColumnDefaults(this._rootColumn,e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},_clearColumnErrors:function(){!function t(e){for(var i=0,n=e.count();i<n;i++){var s=e.getItem(i);s instanceof M?s.setError(null):s instanceof R&&t(s)}}(this._rootColumn)},_setColumnErrors:function(t){t=this._validationManager._validateCellList&&this._validationManager._validateCellList[t.dataId()];t&&!function t(e,i){for(var n=0,s=i.count();n<s;n++){var r,o=i.getItem(n);o instanceof M?(r=e[o.dataIndex()])&&(o.setError(r.message),o.setErrorLevel(r.level)):o instanceof R&&t(e,o)}}(t,this._rootColumn)},$_checkCurrentRow:function(t){if(this._focusedIndex){var e,i,n=this._focusedIndex.dataId(),s=this._focusedIndex.dataRow();if(t||n!=this._currentRowId)return clearTimeout(this._rowChangeTimer),e=this._currentRow,i=this._displayOptions.rowChangeDelay(),t=t||i<=0,this._currentRowId=n,this._currentRow=s,t?this._fireCurrentRowChanged(e,s):0<i&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(e,s)}.bind(this),i)),!0}return!1},$_checkLastCellCommit:function(t){t&&t.isLast()},$_syncHeadCheck:function(t,e){var i=this.checkBar();if(i.isSyncHeadCheck()){var n=i.isShowGroup();if((this._syncHeadCheck=!1)===e)this._checkBarHeadView.setChecked(e);else if(null==t)this._checkBarHeadView.setChecked(e);else{for(var s,r=0,o=i.isVisibleOnly(),a=o?this._items.itemCount():(s=this.getAllItems()).length,h=0;h<a;h++){var l=o?this._items.getItem(h):s[h];if((l instanceof Ar||l instanceof L||n)&&l.isCheckable()){if(!l.isChecked()){r=-1;break}r++}}this._checkBarHeadView.setChecked(0<r)}}},_fireCurrentChanging:function(t,e){return this.fireConfirmEvent(T.CURRENT_CHANGING,t,e)},_fireCurrentChanged:function(t){return this.fireEvent(T.CURRENT_CHANGED,t)},_fireCurrentRowChanged:function(t,e){return this.fireEvent(T.CURRENT_ROW_CHANGED,t,e)},_fireValidateCell:function(t,e,i){return this.fireEvent(T.VALIDATE_CELL,t,e,i)},_fireValidateRow:function(t,e,i){return this.fireEvent(T.VALIDATE_ROW,t,e,i)},_fireValidationFail:function(t,e,i){return this.fireObjectEvent(T.VALIDATION_FAIL,t,e,i)},_fireColumnHeaderClicked:function(t,e,i){return this.fireEvent(T.COLUMN_HEADER_CLICKED,t,e,i)},_fireColumnHeaderImageClicked:function(t){return this.fireEvent(T.COLUMN_HEADER_IMAGE_CLICKED,t)},_fireColumnHeaderDblClicked:function(t){return this.fireEvent(T.COLUMN_HEADER_DBL_CLICKED,t)},_fireColumnCheckedChanged:function(t){return this.fireEvent(T.COLUMN_CHECKED_CHANGED,t)},_fireFooterCellClicked:function(t){return this.fireEvent(T.FOOTER_CELL_CLICKED,t)},_fireFooterCellDblClicked:function(t){return this.fireEvent(T.FOOTER_CELL_DBL_CLICKED,t)},_fireHeaderSummaryCellClicked:function(t){return this.fireEvent(T.HEADERSUMMARY_CELL_CLICKED,t)},_fireHeaderSummaryCellDblClicked:function(t){return this.fireEvent(T.HEADERSUMMARY_CELL_DBL_CLICKED,t)},_fireCheckBarHeadClicked:function(){return this.fireEvent(T.CHECK_BAR_HEAD_CLICKED)},_fireCheckBarFootClicked:function(){return this.fireEvent(T.CHECK_BAR_FOOT_CLICKED)},_fireIndicatorCellClicked:function(t){return this.fireEvent(T.INDICATOR_CELL_CLICKED,t)},_fireStateBarCellClicked:function(t){return this.fireEvent(T.STATE_BAR_CELL_CLICKED,t)},_fireRowGroupHeadClicked:function(){return this.fireEvent(T.ROWGROUP_HEAD_CLICKED)},_fireRowGroupFootClicked:function(){return this.fireEvent(T.ROWGROUP_FOOT_CLICKED)},_fireRowGroupHeaderFooterClicked:function(t,e){return this.fireEvent(T.ROWGROUP_HEADER_FOOTER_CLICKED,t,e)},_fireRowGroupBarClicked:function(t){return this.fireEvent(T.ROWGROUP_BAR_CLICKED,t)},_fireCheckBarFootDblClicked:function(){return this.fireEvent(T.CHECK_BAR_FOOT_DBL_CLICKED)},_fireIndicatorCellDblClicked:function(t){return this.fireEvent(T.INDICATOR_CELL_DBL_CLICKED,t)},_fireStateBarCellDblClicked:function(t){return this.fireEvent(T.STATE_BAR_CELL_DBL_CLICKED,t)},_fireRowGroupHeadDblClicked:function(){return this.fireEvent(T.ROWGROUP_HEAD_DBL_CLICKED)},_fireRowGroupFootDblClicked:function(){return this.fireEvent(T.ROWGROUP_FOOT_DBL_CLICKED)},_fireRowGroupHeaderFooterDblClicked:function(t,e){return this.fireEvent(T.ROWGROUP_HEADER_FOOTER_DBL_CLICKED,t,e)},_fireRowGroupBarDblClicked:function(t){return this.fireEvent(T.ROWGROUP_BAR_DBL_CLICKED,t)},_firePanelClicked:function(){return this.fireEvent(T.PANEL_CLICKED)},_firePanelDblClicked:function(){return this.fireEvent(T.PANEL_DBL_CLICKED)},_fireRowGroupPanelClicked:function(t){return this.fireEvent(T.ROWGROUP_PANEL_CLICKED,t)},_fireRowGroupPanelDblClicked:function(t){return this.fireEvent(T.ROWGROUP_PANEL_DBL_CLICKED,t)},_fireBodyEmptyClicked:function(){return this.fireEvent(T.BODY_EMPTY_CLICKED)},_fireBodyEmptyDblClicked:function(){return this.fireEvent(T.BODY_EMPTY_DBL_CLICKED)},_fireMenuItemClicked:function(t,e){return this.fireEvent(T.MENU_ITEM_CLICKED,t,e)},_fireContextMenuPopup:function(t,e,i){return this.fireConfirmEvent(T.CONTEXT_MENU_POPUP,t,e,i)},_fireContextMenuItemClicked:function(t,e){return this.fireEvent(T.CONTEXT_MENU_ITEM_CLICKED,t,e)},_fireCellButtonClicked:function(t){return this._buttonClicked=!0,this.fireEvent(T.CELL_BUTTON_CLICKED,t)},_fireEditButtonClicked:function(t){return this.fireEvent(T.EDIT_BUTTON_CLICKED,t)},_fireImageButtonClicked:function(t,e,i){return this._buttonClicked=!0,this.fireEvent(T.IMAGE_BUTTON_CLICKED,t,e,i)},_fireScrollToBottom:function(){return this.fireEvent(T.SCROLL_TO_BOTTOM)},_fireTopIndexChanged:function(t){return this.fireEvent(T.TOPITEMINDEX_CHANGED,t)},_fireDataCellClicked:function(t){var e=this.editOptions().isExceptDataClickWhenButton();if(!e||!this._buttonClicked)return this.fireEvent(T.DATA_CELL_CLICKED,t)},_fireDataCellDblClicked:function(t){return this.fireEvent(T.DATA_CELL_DBL_CLICKED,t)},_fireRowsDeleting:function(t){return this.fireConfirmEvent(T.ROWS_DELETING,t)},_fireRowInserting:function(t,e){return this.fireConfirmEvent(T.ROW_INSERTING,t,e)},_fireItemCommit:function(t,e){return this.fireEvent(T.ITEM_COMMIT)},_fireSelectionChanged:function(){return this.fireEvent(T.SELECTION_CHANGED)},_fireSelectionAdded:function(t){return this.fireEvent(T.SELECTION_ADDED,t)},_fireSelectionRemoved:function(){return this.fireEvent(T.SELECTION_REMOVED)},_fireSelectionCleared:function(){return this.fireEvent(T.SELECTION_CLEARED)},_fireSelectionResized:function(){return this.fireEvent(T.SELECTION_RESIZED)},_fireSelectionEnded:function(t){return this.fireEvent(T.SELECTION_ENDED,t)},_fireUpdateStarted:function(t,e){return this.fireEvent(T.UPDATE_STARTED,t)},_fireInsertStarted:function(t,e){return this.fireEvent(T.INSERT_STARTED,t,e)},_fireShowEditor:function(t,e){return this.fireConfirmEvent(T.SHOW_EDITOR,t,e)},_fireHideEditor:function(t){return this.fireEvent(T.HIDE_EDITOR,t)},_fireEditChange:function(t,e){return this.fireEvent(T.EDIT_CHANGE,t,e)},_fireGetEditValue:function(t,e){return this.fireEvent(T.GET_EDIT_VALUE,t,e)},_fireEditCommit:function(t,e,i){return this.fireConfirmEvent(T.EDIT_COMMIT,t,e,i)},_fireEditCanceled:function(t){return this.fireEvent(T.EDIT_CANCELED,t)},_fireItemEditCancel:function(t){return this.fireConfirmEvent(T.ITEM_EDIT_CANCEL,t)},_fireItemEditCanceled:function(t){return this.fireEvent(T.ITEM_EDIT_CANCELED,t)},_fireEditSearch:function(t,e){this.fireEvent(T.EDIT_SEARCH,t,e)},_fireSearchCellButtonClick:function(t,e){return this.fireObjectEvent(T.SEARCH_BUTTON_CLICK,t,e)},_fireCellEdited:function(t,e){this.fireEvent(T.CELL_EDITED,t,e)},_fireEditRowChanged:function(t,e,i,n){this.fireEvent(T.EDIT_ROW_CHANGED,t,e,i,n)},_fireEditItemPasted:function(t,e,i,n){this.fireEvent(T.EDIT_ROW_PASTED,t,e,i,n)},_fireItemsPasted:function(t){this.fireEvent(T.ROWS_PASTED,t)},_fireCellPasting:function(t,e){return this.fireObjectEvent(T.CELL_PASTING,t,e)},_fireItemChecked:function(t){this.fireEvent(T.ITEM_CHECKED,t,t.isChecked())},_fireItemsChecked:function(t,e){this.fireEvent(T.ITEMS_CHECKED,t,e)},_fireItemAllChecked:function(t){this.fireEvent(T.ITEM_ALL_CHECKED,t)},_fireErrorClicked:function(t,e){this.fireEvent(T.ERROR_CLICKED,e)},_fireSorting:function(t,e){return this.fireConfirmEvent(T.SORTING,t,e)},_fireFiltering:function(){return this.fireConfirmEvent(T.FILTERING)},_fireFilterActionClicked:function(t,e,i){this.fireEvent(T.FILTER_ACTION_CLICKED,t,e,i)},_fireKeyDown:function(t,e,i,n){return this.fireConfirmEvent(T.KEY_DOWN,t,e,i,n)},_fireKeyPress:function(t){this.fireEvent(T.KEY_PRESS,t)},_fireKeyUp:function(t,e,i,n){this.fireEvent(T.KEY_UP,t,e,i,n)},_fireShowTooltip:function(t,e){return this.fireObjectEvent(T.SHOW_TOOLTIP,t,e)},_fireShowHeaderTooltip:function(t,e){return this.fireObjectEvent(T.SHOW_HEADER_TOOLTIP,t,e)},_fireColumnPropertyChanged:function(t,e,i){return this.fireEvent(T.COLUMN_PROPERTY_CHANGED,t,e,i)},_fireShowInnerDragCursor:function(t){return this.fireObjectEvent(T.SHOW_INNER_DRAG_CURSOR,t)},_fireInnerDragStart:function(t){return this.fireConfirmEvent(T.INNER_DRAG_START,t)},_fireInnerDragOver:function(t,e){return this.fireObjectEvent(T.INNER_DRAG_OVER,t,e)},_fireInnerDrop:function(t,e){return this.fireConfirmEvent(T.INNER_DROP,t,e)},_fireGridActivated:function(){return this.fireEvent(T.GRID_ACTIVATED)},_fireGridFocusChanged:function(t,e){return this.fireEvent(T.GRID_FOCUS_CHANGED,t,e)},_fireApplyCallback:function(){var t=Array.prototype.slice.call(arguments,0);return t.splice(0,1,T.APPLY_CALLBACK),this.fireEvent.apply(this,t)},_fireCopy:function(t,e){return this.fireConfirmEvent(T.COPY,t,e)},_fireCut:function(t,e){return this.fireConfirmEvent(T.CUT,t,e)},_firePaste:function(t,e){return this.fireConfirmEvent(T.PASTE,t,e)},_firePasted:function(){return this.fireEvent(T.PASTED)},getHandler:function(){return this.fireObjectEvent(T.GET_HANDLER)},onApplyCallback:function(){this._fireApplyCallback.apply(this,arguments)},onPopupMenuManagerMenuItemClicked:function(t,e,i){this._fireMenuItemClicked(e,i)},onScrollBarScrolled:function(t,e,i,n){var s=this.displayOptions(),r=this.layoutManager(),o=(o=s.scrollMessageCallback())&&"function"==typeof o?o:null;if(t.isVertical())switch(e){case tc.LINE_DOWN:case tc.LINE_UP:this.scrollRow(i);break;case tc.PAGE_DOWN:case tc.PAGE_UP:this.setTopIndex(this.topIndex()+i*t._page);break;case tc.THUMB_TRACK:var a=s.scrollDuration();s.isLiveScroll()||0<this._scrolledTime&&gt()-this._scrolledTime>a?(this.setTopIndex(n),this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new ac(this.container()._container)),this._vscrollBar._tipView=this._scrollTipView,this._vscrollBar.setPosition(n,!0),h=this._vscrollBar._pos+this.$_fixedRowCount,d=o?o(this.getHandler(),Dn.VERTICAL,h):String(h+1),this._vscrollBar.setText(d),0<a&&0==this._scrolledTime&&(this._scrolledTime=gt()));break;case tc.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar._tipView=null,this.setTopIndex(n);break;default:this.setTopIndex(n)}else switch(e){case tc.LINE_RIGHT:case tc.LINE_LEFT:this.setLeftPos(this.leftPos()+8*i,!0);break;case tc.PAGE_RIGHT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToNextColumn(),!0):this.setLeftPos(this.leftPos()+t._page,!0);break;case tc.PAGE_LEFT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToPrevColumn(),!0):this.setLeftPos(this.leftPos()-t._page,!0);break;case tc.THUMB_TRACK:var h,l,d,a=s.hscrollDuration();s.isHorizLiveScroll()||0<this._scrolledTime&&gt()-this._scrolledTime>a?(this.setLeftPos(n,!1),this._horzScrolling=!1,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new ac(this.container()._container)),this._hscrollBar._tipView=this._scrollTipView,this._hscrollBar.setPosition(n,!0),0<=(h=r.positionToColumn(this._hscrollBar._pos)+this.$_fixedColCount)&&(d=(l=this.getVisibleColumn(h))?l.header().displayText():"",this._hscrollBar.setText(d)),0<a&&0==this._scrolledTime&&(this._scrolledTime=gt()));break;case tc.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar._tipView=null,this.setLeftPos(n);break;default:this.setLeftPos(n)}},onImageListImageLoaded:function(t,e){var i=t.getImage(e);ft(t.name()+"'s image loaded at "+e+" ["+i.width+","+i.height+"]"),this.invalidateLayout()},onItemProviderReset:function(t){_t(">> onItemProviderReset"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.resetGrid(),this.$_syncHeadCheck([],void 0),this._shadowDom&&this._itemProvider&&this._shadowDom.setItemProvider(this._itemProvider)},onItemProviderRefresh:function(t){_t(">> onItemProviderRefresh"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.refreshView(),this._syncHeadCheck&&this.$_syncHeadCheck([],void 0),this._shadowDom&&this._itemProvider&&this._shadowDom.setItemProvider(this._itemProvider)},onItemProviderRefreshClient:function(t){_t(">> onItemProviderRefreshClient"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.refreshView(),this._syncHeadCheck&&this.$_syncHeadCheck([],void 0),this._shadowDom&&this._itemProvider&&this._shadowDom.setItemProvider(this._itemProvider)},onItemProviderItemInserted:function(t,e){_t(">> onItemProviderItemInserted: "+e.dataRow()),this.hideEditor(),this._dataChanged=!0,this._syncHeadCheck=!0,this._populateMerges(),this.refreshView()},onItemProviderItemDeleted:function(t,e){_t(">> onItemProviderItemDeleted: "+e.dataRow()),this.hideEditor(),this._dataChanged=!0,this._syncHeadCheck=!0,this._populateMerges(),this.refreshView()},onItemProviderItemUpdated:function(t,e){_t(">> onItemProviderItemUpdated: "+e.dataRow()),this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId()):this._updateRows=[e.dataId()],this._populateMerges(),this.refreshView()},onItemProviderCheckableChanged:function(t,e){_t(">> onItemProviderCheckableChanged: "+e.dataRow()+", "+e.isCheckable()),this.refreshView(),this.$_syncHeadCheck([],void 0)},onItemProviderItemChecked:function(t,e){_t(">> onItemProviderItemChecked: "+e.dataRow()+", "+e.isChecked()),this.refreshView(),this._fireItemChecked(e)},onItemProviderItemsChecked:function(t,e,i){_t(">> onItemProviderItemsChecked: "+e.length+" items, "+i),this.refreshView(),this._fireItemsChecked(e,i)},onItemProviderItemAllChecked:function(t,e){_t(">> onItemProviderItemAllChecked: "+e),this.refreshView(),this._fireItemAllChecked(e)},onItemProviderItemCheckChanged:function(t,e,i){_t(">> onItemProviderItemCheckChanged: "+i),this.$_syncHeadCheck(e,i)},onItemProviderRowStateChanged:function(t,e){_t(">> onItemProviderRowStateChanged: "+e.dataRow()),this.refreshView()},onItemProviderRowStatesChanged:function(t,e){_t(">> onItemProviderRowStatesChanged"),this.refreshView()},onItemProviderRowStatesCleared:function(t){_t(">> onItemProviderRowStatesCleared"),this.refreshView()},onItemProviderSort:function(t,e,i){_t(">> onItemProviderSort"),this.refreshView()},onItemProviderSorted:function(t){_t(">> onItemProviderSorted"),this.refreshView(),this.fireEvent(T.SORTING_CHANGED),this._shadowDom&&this._itemProvider&&this._shadowDom.reset()},onItemProviderFilterAdded:function(t){_t(">> onItemProviderFilterAdded")},onItemProviderFilterRemoved:function(t){_t(">> onItemProviderFilterRemoved")},onItemProviderFilterCleared:function(t){_t(">> onItemProviderFilterCleared")},onItemProviderFilterAllCleared:function(t){_t("onItemProviderFilterAllCleared")},onItemProviderFiltered:function(t,e,i){this.refreshView(),this._loading||this.$_syncHeadCheck([],void 0),this.fireEvent(T.FILTERING_CHANGED,e,i),this._shadowDom&&this._itemProvider&&this._shadowDom.reset()},$_focusEditItem:function(t){t=this.getIndex(t.index(),this.focusedIndex()?this.focusedIndex().column():null);!t.C()&&0<this.visibleColumnCount()&&(t._column=this.getVisibleColumn(0)),this.setFocusedIndex(t,!0),this.makeCellVisible(this.focusedIndex())},onItemEditUpdateStarted:function(t,e){this._clearColumnErrors(),this._setColumnErrors(e),this.refreshView(),this._fireUpdateStarted(e)},onItemEditAppendStarted:function(t,e){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this._fireInsertStarted(e,!0)},onItemEditInsertStarted:function(t,e){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this._fireInsertStarted(e,!1)},onItemEditCellEdited:function(t,e,i){this.refreshView(),this._cellUpdateEventLock||this._fireCellEdited(e,i)},onItemEditCellUpdated:function(t,e,i,n,s){this.refreshView(),this._cellUpdateEventLock||this._fireEditRowChanged(e,i,n,s)},onItemEditCommitting:function(t,e){},onItemEditCommitted:function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView()},onItemEditCanceled:function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem)},onItemEditCommitRequest:function(t){this.commit(!1)},onItemEditCancelReuqest:function(t){this.cancel()},onLookupSourceProviderChanged:function(t){this.refreshView()},onSelectionChanged:function(t){this._fireSelectionChanged()},onSelectionAdded:function(t,e,i){this._addSelectionView(e),this._layoutSelectionViews(),!1!==i&&(this._fireSelectionAdded(e),this._fireSelectionChanged())},onSelectionRemoved:function(t){this._fireSelectionRemoved(),this._fireSelectionChanged()},onSelectionCleared:function(t,e){this._clearSelectionViews(),!1!==e&&(this._fireSelectionCleared(),this._fireSelectionChanged())},onSelectionResized:function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(),this._fireSelectionChanged()},onSelectionEnded:function(t,e){this._fireSelectionEnded(e)},onMenuItemClick:function(t,e){this._fireContextMenuItemClicked(t,e)}},{setGridMapper:function(t){T._gridMapper=t},applyGridMapper:function(t,e){var i,n=T._gridMapper;if(n&&(i=n.column))for(var s in i){var r=i[s];e.hasOwnProperty(r)&&t.setProperty(s,e[r])}},createColumn:function(t){var e;return t?((e=new("group"==t.type||t.columns?R:"series"==t.type?Yl:M)).assign(t),T.applyGridMapper(e,t),e instanceof R&&t.columns&&(t=T.createColumns(t.columns),e.setColumns(t)),e):null},createColumns:function(t){if(k(t)){for(var e=[],i=0,n=t.length;i<n;i++){var s=T.createColumn(t[i]);s&&e.push(s)}return e}return null}}),Hu=(T.CURRENT_CHANGING="onGridBaseCurrentChanging",T.CURRENT_CHANGED="onGridBaseCurrentChanged",T.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",T.VALIDATE_CELL="onGridBaseValidateCell",T.VALIDATE_ROW="onGridBaseValidateRow",T.VALIDATION_FAIL="onGridBaseValidationFail",T.COLUMN_HEADER_CLICKED="onGridBaseColumnHeaderClicked",T.COLUMN_HEADER_IMAGE_CLICKED="onGridBaseColumnHeaderImageClicked",T.COLUMN_HEADER_DBL_CLICKED="onGridBaseColumnHeaderDblClicked",T.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",T.FOOTER_CELL_CLICKED="onGridBaseFooterCellClicked",T.FOOTER_CELL_DBL_CLICKED="onGridBaseFooterCellDblClicked",T.HEADERSUMMARY_CELL_CLICKED="onGridBaseHeaderSummaryCellClicked",T.HEADERSUMMARY_CELL_DBL_CLICKED="onGridBaseHeaderSummaryCellDblClicked",T.CHECK_BAR_HEAD_CLICKED="onGridBaseCheckBarHeadClicked",T.CHECK_BAR_FOOT_CLICKED="onGridBaseCheckBarFootClicked",T.INDICATOR_CELL_CLICKED="onGridBaseIndicatorCellClicked",T.STATE_BAR_CELL_CLICKED="onGridBaseStateBarCellClicked",T.ROWGROUP_HEAD_CLICKED="onGridBaseRowGroupHeadClicked",T.ROWGROUP_FOOT_CLICKED="onGridBaseRowGroupFootClicked",T.ROWGROUP_BAR_CLICKED="onGridBaseRowGroupBarClicked",T.ROWGROUP_HEADER_FOOTER_CLICKED="onGridBaseRowGroupHeaderFooterClicked",T.CHECK_BAR_FOOT_DBL_CLICKED="onGridBaseCheckBarFootDblClicked",T.INDICATOR_CELL_DBL_CLICKED="onGridBaseIndicatorCellDblClicked",T.STATE_BAR_CELL_DBL_CLICKED="onGridBaseStateBarCellDblClicked",T.ROWGROUP_HEAD_DBL_CLICKED="onGridBaseRowGroupHeadDblClicked",T.ROWGROUP_FOOT_DBL_CLICKED="onGridBaseRowGroupFootDblClicked",T.ROWGROUP_BAR_DBL_CLICKED="onGridBaseRowGroupBarDblClicked",T.ROWGROUP_HEADER_FOOTER_DBL_CLICKED="onGridBaseRowGroupHeaderFooterDblClicked",T.PANEL_CLICKED="onGridBasePanelClicked",T.PANEL_DBL_CLICKED="onGridBasePanelDblClicked",T.ROWGROUP_PANEL_CLICKED="onGridBaseRowGroupPanelClicked",T.ROWGROUP_PANEL_DBL_CLICKED="onGridBaseRowGroupPanelDblClicked",T.BODY_EMPTY_CLICKED="onGridBaseBodyEmptyClicked",T.BODY_EMPTY_DBL_CLICKED="onGridBaseBodyEmptyDblClicked",T.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",T.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",T.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",T.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",T.IMAGE_BUTTON_CLICKED="onGridBaseImageButtonClicked",T.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",T.CLICKABLE_CELL_CLICKED="onGridBaseClickableCellClicked",T.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",T.TOPITEMINDEX_CHANGED="onGridBaseTopItemIndexChanged",T.DATA_CELL_CLICKED="onGridBaseDataCellClicked",T.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",T.ROWS_DELETING="onGridBaseRowsDeleting",T.ROW_INSERTING="onGridBaseRowInserting",T.SELECTION_ADDED="onGridBaseSelectionAdded",T.SELECTION_CHANGED="onGridBaseSelectionChanged",T.SELECTION_REMOVED="onGridBaseSelectionRemoved",T.SELECTION_CLEARED="onGridBaseSelectionCleared",T.SELECTION_RESIZED="onGridBaseSelectionResized",T.SELECTION_ENDED="onGridBaseSelectionEnded",T.INSERT_STARTED="onGridBaseInsertStarted",T.UPDATE_STARTED="onGridBaseUpdateStarted",T.SHOW_EDITOR="onGridBaseShowEditor",T.HIDE_EDITOR="onGridBaseHideEditor",T.EDIT_CHANGE="onGridBaseEditChange",T.GET_EDIT_VALUE="onGridBaseGetEditValue",T.EDIT_COMMIT="onGridBaseEditCommit",T.EDIT_CANCELED="onGridBaseEditCanceled",T.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",T.ITEM_EDIT_CANCEL="onGridBaseItemEditCancel",T.EDIT_SEARCH="onGridBaseEditSearch",T.SEARCH_BUTTON_CLICK="onGridBaseSearchCellButtonClick",T.CELL_EDITED="onGridBaseCellEdited",T.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",T.EDIT_ROW_PASTED="onGridBaseEditRowPasted",T.ROWS_PASTED="onGridBaseRowsPasted",T.CELL_PASTING="onGridBaseCellPasting",T.ITEM_CHECKED="onGridBaseItemChecked",T.ITEMS_CHECKED="onGridBaseItemsChecked",T.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",T.ERROR_CLICKED="onGridBaseErrorClicked",T.SORTING="onGridBaseSorting",T.SORTING_CHANGED="onGridBaseSortingChanged",T.FILTERING="onGridBaseFiltering",T.FILTERING_CHANGED="onGridBaseFilteringChanged",T.FILTER_ACTION_CLICKED="onGridBaseFilterActionClicked",T.KEY_PRESS="onGridBaseKeyPress",T.KEY_DOWN="onGridBaseKeyDown",T.KEY_UP="onGridBaseKeyUp",T.SHOW_TOOLTIP="onGridBaseShowTooltip",T.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip",T.COLUMN_PROPERTY_CHANGED="onGridBaseColumnPropertyChanged",T.SHOW_INNER_DRAG_CURSOR="onGridBaseShowInnerDragCursor",T.INNER_DRAG_START="onGridBaseInnerDragStart",T.INNER_DRAG_OVER="onGridBaseInnerDragOver",T.INNER_DROP="onGridBaseInnerDrop",T.GRID_ACTIVATED="onGridBaseGridActivated",T.GRID_FOCUS_CHANGED="onGridBaseGridFocusChanged",T.APPLY_CALLBACK="onGridBaseApplyCallback",T.RUN_CALLBACK="onApplyCallback",T.GET_HANDLER="getHandler",T.COPY="onGridBaseCopy",T.PASTE="onGridBasePaste",T.PASTED="onGridBasePasted",T.CUT="onGridBaseCut",e("RootColumn",R,{init:function(t){this._super(),this._owner=t,this._columnMap={},this._header._visible=!1,this._isLastColumn=!0},destroy:function(){for(var t in this._destroying=!0,this._columnMap){var e=this._columnMap[t];e&&!e._destroying&&e.destroy&&e.destroy(),this._columnMap[t]=null}this._columnMap=null,this._super()},grid:function(){return this._owner},_columnAdded:function(t){this._super(t),this._columnMap[t.$_hash]=t;t=b(t,R);t&&this.$_groupAdded(t)},_columnRemoved:function(t){},$_groupAdded:function(t){for(var e=0,i=t.count();e<i;e++){var n=t.getItem(e),s=b(n,R);this._columnMap[n.$_hash]=n,s&&this.$_groupAdded(s)}}})),Gu=e("DataRootCollection",null,{init:function(){this._super(),this._root=null,this._dataRoots=[],this._list=[]},roots:function(){return this._dataRoots},collect:function(t){this._root=t,(this._dataRoots.length=0)<t.visibleCount()&&(this.$_collectGroup(t),this.$_checkValid(t))},collectDataColumns:function(t,e){var i,n,s,r,o=[],a=(t.dataRoot()!==t&&(t=t.dataRoot()),e.dataRoot()!=e&&(e=e.dataRoot()),b(t,R)),t=(a&&(t=R.getFirstDataRoot(a)),(a=b(e,R))&&(e=R.getLastDataRoot(a)),this._dataRoots.indexOf(t)),h=this._dataRoots.indexOf(e);for(h<t&&(r=t,t=h,h=r),r=t;r<=h;r++)if((i=this._dataRoots[r]).isVisible())if(a=b(i,R))for(this._list.length=0,this.$_collectDataColumns(a,this._list),n=0,s=this._list.length;n<s;n++)o.push(this._list[n]);else i instanceof M&&o.push(i);return o},$_collectGroup:function(t){var e,i,n,s=t.visibleCount();if(s<1)this._dataRoots.push(t);else if(1==s)e=t.getVisibleItem(0),(i=b(e,R))?this.$_collectGroup(i):this._dataRoots.push(e);else if(t.isVertical())this._dataRoots.push(t);else for(n=0;n<s;n++)e=t.getVisibleItem(n),(i=b(e,R))?this.$_collectGroup(i):this._dataRoots.push(e)},$_collectDataColumns:function(t,e){for(var i=0,n=t.visibleCount();i<n;i++){var s=t.getVisibleItem(i);s instanceof M?e.push(s):s instanceof R&&this.$_collectDataColumns(s,e)}},$_checkValid:function(t){}}),$u=function(n){var s=n.grid();return function(t,e,i){e=s.getItemOfRow(e,!0),i=s.getItemOfRow(i,!0),e=ga._displayText(e,n),i=ga._displayText(i,n);return e===i?0:e===I||null===e?i===I||null===i?0:-1:i===I||null===i||i<e?1:e<i?-1:0}},Uu=e("GridView",T,{init:function(t,e,i){if(this._super(t,e,i),this._items=this._createItemSource(),!this._items)throw new Error("ItemProvider can not be null");this.setItemSource(this._items),this.groupingOptionsChanged()},destroy:function(){this._destroying=!0,this._items=null,this._super()},pageCount:0,rowGroupLevels:function(){return this._items.groupLevels()},rowGroupFields:function(){return this._items.groupByFields()},isRowGrouped:function(){return this._items.isGrouped()},getGroupList:function(){return this._items.groupList()},isPaged:function(){return 0<=this._items.page()},isMergedRowGrouped:function(){return this._items.isMergedRowGrouped()},page:function(){return this._items.page()},pageCount_:function(){return this._items.pageCount()},setPageCount:function(t){var e=this._items.pageCount();this._items.setPageCount(t),this._items.pageCount()!=e&&this._firePageCountChanged(this._items.pageCount())},setPageSorting:function(t){this._items.setPageSorting(t)},isGrouped:function(t){return t&&0<t.groupLevel()},groupByFieldNames:function(t,e,i){var n=this.dataSource(),s={};if(n&&t&&0<t.length){for(var r,o=[],a=0;a<t.length;a++){var h=parseInt(t[a]);0<=(h=isNaN(h)?n.getFieldIndex(t[a]):h)&&((r=(r=this.columnsByFieldName(t[a]))&&1==r.length&&r[0])instanceof M&&r.isSortByLabel()&&r.isLookupDisplay()&&(s[h]=new $u(r)),o.push(h))}0<o.length&&(e=null==e?this.rowGroup()._sorting:e,i=null==i?ps.ASCENDING:i,this.setLabelComparer(s),this.groupBy(o,e,i))}else this.setLabelComparer(s),this.ungroupBy()},groupBy:function(t,e,i){this.isItemEditing(null)||this._toastManager.show(this.groupingOptions().toast(),!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},$_getVisibleRootByField:function(t){for(var e,i=this.visibleColumnCount(),n=0;n<i;n++)if((e=b(this.getVisibleColumn(n),M))&&e.dataIndex()==t)return e;return null},$_doGroupBy:function(t,e,i){var n,s=this.dataSource();if(this.clearColumnMergeGrouped(),s&&t&&0<(n=t.length)){for(var r=[],o=0;o<n;o++)0<=t[o]&&t[o]<s.fieldCount()&&r.push(t[o]);if(0<r.length){if(this.rowGroup().isMergeMode())for(o=r.length-1;0<=o;o--){var a=this.$_getVisibleRootByField(r[o]);a?a._setMergeGrouped(!0):r.splice(o,1)}0<r.length&&this._items.groupBy(r,e,i)}}else this._items.groupBy(null,!0,ps.ASCENDING);this._doRowGroupFooterMergeChanged()},clearGroupBy:function(){this.isItemEditing(null)||(this._items.groupBy(null,!0,ps.ASCENDING),this._items._groupSorting=this.rowGroup().isSorting(),this._doRowGroupFooterMergeChanged())},ungroupBy:function(){this.clearGroupBy()},getGroupByFields:function(){return this._items.groupByFields()},addGroupBy:function(t,e){this.isItemEditing(null)||this.isGrouped(e)||!e.isVisible()||!e.isRoot()&&this.rowGroup().isMergeMode()||0<=e.dataIndex()&&this._toastManager.show(this.groupingOptions().toast(),!0,function(){this.$_doAddGroupBy(t,e)}.bind(this))},$_doAddGroupBy:function(t,e){var i,n=e.dataIndex();e._setMergeGrouped(this.rowGroup().isMergeMode());try{e.isSortByLabel()&&e.isLookupDisplay()&&((i=this._items.getLabelComparer())[n]||(i[n]=new $u(e))),this._items.addGroupBy(t,n),this._doRowGroupFooterMergeChanged()}catch(t){throw e._setMergeGrouped(!1),t}},removeGroupBy:function(t){if(!this.isItemEditing(null)&&this.isGrouped(t)){var e=this.groupingOptions().isRemoveIncludeLower(),i=this._items.getLabelComparer(),n=this._items._groupedProvider.getGroupedFields(),s=t.dataIndex();if(e)for(var r=n.length-1;r&&(delete i[n[r]],n[r]!=s);r--);else delete i[s];this._items.removeGroupBy(s,e),(n=this._items._groupedProvider.getGroupedFields()).length<=0&&(this._items._groupSorting=this.rowGroup().isSorting()),this._doRowGroupFooterMergeChanged()}},expand:function(t,e,i,n){this.isItemEditing(null)||this._items.expand(t,e,i,n)},collapse:function(t,e,i){this.isItemEditing(null)||this._items.collapse(t,e,i)},getCheckedItems:function(t){for(var e=[],i=0,n=this.itemCount();i<n;i++){var s=this.getItem(i);s.isChecked()&&(t||0<=s.dataRow())&&e.push(s)}return e},getCheckedItemIndices:function(t){for(var e=[],i=0,n=this.itemCount();i<n;i++){var s=this.getItem(i);s.isChecked()&&(t||0<=s.dataRow())&&e.push(s.index())}return e},getCheckedRows:function(t,e,i){var n;if(e)for(var s=[],r=0,o=this.itemCount();r<o;r++)(n=this.getItem(r)).isChecked()&&0<=(n=n.dataRow())&&s.push(n);else s=this._items.getCheckedRows(i);return t&&s.sort(function(t,e){return t-e}),s},getMergedItems:function(t,e){"string"==typeof e?e=this.columnByName(e):e&&e.$_hash&&(e=this.columnByHash(e.$_hash));var t=$.temp(this,t,e),e=this.layoutManager().getMergedCell(t),i=[];if(e)for(var n=e.headItem(),s=e.tailItem();n<=s;n++)this.getItem(n)instanceof Ar&&i.push(n);return i},setPaging:function(t,e,i,n){this._items.setPaging(t,e=1<arguments.length?e:10,i=2<arguments.length?i:-1,null)},setPage:function(t,e){var i;e=1<arguments.length?e:-1,(t=Math.max(0,Math.min(t,this._items.pageCount()-1)))!=this._items.page()&&(i=!1,this._firePageChanging(t)&&(this._items.setPage(t,e),i=!0),i)&&this._firePageChanged(this._items.page())},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},dataSource:function(){return this._items&&this._items.dataSource()},setDataSource:function(t){var e=this.dataSource();this._items&&this._items.setDataSource(t),this.dataSource()!==e&&this.dataSource()&&this.applyFilters()},maxItemCount:function(){return this._items.maxItemCount()},setMaxItemCount:function(t){this._items.setMaxItemCount(t)},_createLayoutManager:function(){return new Wu(this)},_createItemSource:function(){var t=new eo(!0);return t.setSummaryMode(this.summaryMode()),t.setRowGroupSummaryMode(this.rowGroup().summaryMode()),t},_createPanelView:function(){return new Ku(this._dom)},_doColumnsReset:function(t){this.ungroupBy(),this._super(t)},_visualObjectChanged:function(t){this._super(t),t instanceof ta&&this._items.setCheckableExpression(t.checkableExpression())},getSummarizer:function(){return this._items.summarizer()},_doSortItems:function(t,e,i){this._items.orderBy(t,e,i)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},getLabelComparer:function(){return this._items.getLabelComparer()},isGroupedColumn:function(t){return t&&t.dataIndex&&this._items.isGroupedField(t.dataIndex())},getGroupLevels:function(){return this._items.getGroupLevels()},getGroupLevel:function(t){return this._items.getGroupLevel(t)},_doGroupingOptionsChanged:function(){this._items.setExpandWhenGrouping(this.groupingOptions().isExpandWhenGrouping())},_doRowGroupAdornmentsChanged:function(){this._items.setGroupedStyle(this.rowGroup().expandedAdornments(),this.rowGroup().collapsedAdornments(),this.rowGroup().createFooterCallback(),this.getHandler())},_doGroupSortingChanged:function(){this._items.setGroupSorting(this.rowGroup().isSorting())},_canMerge:function(){return!this._updateLock},_doRowGroupMergeModeChanged:function(){if(this._super(),this.clearColumnMergeGrouped(),this.rowGroup().isMergeMode()){var t,e=this._items.groupByFields();if(e&&0<e.length)for(t=e.length-1;0<=t;t--){var i=this.$_getVisibleRootByField(e[t]);i?i._setMergeGrouped(!0):e.splice(t,1)}e&&0<e.length?this._items.groupByMode(e,!0):this._items.groupByMode(null,!0)}else this._items.setMergeMode(!1)},_doRowGroupFooterMergeChanged:function(){this._groupFooterMergeManager.buildRooms(this)},_doColumnFiltersChanged:function(t,e){this.applyFilters(t,e),this.invalidateLayout()},_doSummaryModeChanged:function(){this._items.setSummaryMode(this.summaryMode())},_doGroupSummaryModeChanged:function(){this._items.setRowGroupSummaryMode(this.rowGroup().summaryMode())},getIndicatorIndex:function(t){return this._items.getDisplayItemIndex(t)},updatePastedRow:function(t,e,i){var n,t=t.dataRow();0<=t&&(n=b(this.dataSource(),s))&&(i?n.updateStrictRow(t,e):n.updateRow(t,e))},appendPastedRow:function(t){var e=b(this.dataSource(),s);if(e)return e.appendRow(t)},canMoveIndex:function(t){var e=this._super(t);return e=e&&this.isMergedRowGrouped()&&this.groupingOptions().isFixMergedColumns()?t>=this.rowGroupLevels():e},canMoveToIndex:function(t){var e=this._super(t);return e=e&&this.isMergedRowGrouped()&&this.groupingOptions().isFixMergedColumns()?t>=this.rowGroupLevels():e},_firePageChanging:function(t){return this.fireConfirmEvent(Uu.PAGE_CHANGING,t)},_firePageChanged:function(t){return this.fireEvent(Uu.PAGE_CHANGED,t)},_firePageCountChanged:function(t){return this.fireEvent(Uu.PAGE_COUNT_CHANGED,t)},_fireGrouping:function(t){return this.fireConfirmEvent(Uu.GROUPING,t)},_fireGrouped:function(){return this.fireEvent(Uu.GROUPED)},_fireExpanding:function(t){return this.fireConfirmEvent(Uu.EXPANDING,t)},_fireExpanded:function(t){return this.fireEvent(Uu.EXPANDED,t)},_fireCollapsing:function(t){return this.fireConfirmEvent(Uu.COLLAPSING,t)},_fireCollapsed:function(t){return this.fireEvent(Uu.COLLAPSED,t)},onGroupedItemProviderGrouping:function(t,e){return this._fireGrouping(e)},$_clearGroupedIndex:function(t){for(var e,i,n=t.count()-1;0<=n;n--)e=t.getItem(n),(i=b(e,M))&&i.setGroupLevel(-1),e instanceof R&&this.$_clearGroupedIndex(e)},$_setGroupedIndex:function(t){for(var e,i,n=t.count()-1;0<=n;n--)e=t.getItem(n),(i=b(e,M))&&i.setGroupLevel(this._items.getGroupLevel(i.dataIndex())),e instanceof R&&this.$_setGroupedIndex(e)},onGroupedItemProviderGrouped:function(t){this.selections().clear(),this.$_clearGroupedIndex(this._rootGroup());var e,i,n=this._items.groupByFields();if(n&&0<n.length&&this.$_setGroupedIndex(this._rootGroup()),this.rowGroup().isMergeMode()){for(var s=[],r=this.visibleColumnCount(),o=0;o<r;o++)(e=b(this.getVisibleColumn(o),M))&&(e.isMergeGrouped()&&e.groupLevel()<=0?((i=b(e.stateFor(Wh.MERGE_ROOMS),Wh))&&i.clear(),e._setMergeGrouped(!1)):e.isMergeGrouped()&&((i=b(e.stateFor(Wh.MERGE_ROOMS),Wh))||(i=new Wh(e),e.setState(Wh.MERGE_ROOMS,i)),s.push(e)));if(0<(r=s.length))for(s=s.sort(function(t,e){return t.groupLevel()-e.groupLevel()}),o=0;o<r;o++)s[o].setDisplayIndex(o),(i=s[o].stateFor(Wh.MERGE_ROOMS)).clear(),i.initialize(Gh.INIT_COUNT);for(r=this.visibleColumnCount(),o=0;o<r;o++)(e=b(this.getVisibleColumn(o),M))&&!e.isMergeGrouped()&&(i=e.stateFor(Wh.MERGE_ROOMS))&&(i.clear(),i.initialize(Gh.INIT_COUNT))}return this.$_syncHeadCheck([],void 0),this._fireGrouped()},onGroupedItemProviderExpand:function(t,e){return this._fireExpanding(e)},onGroupedItemProviderExpanded:function(t,e){return this._fireExpanded(e)},onGroupedItemProviderCollapse:function(t,e){return this._fireCollapsing(e)},onGroupedItemProviderCollapsed:function(t,e){return this._fireCollapsed(e)}}),Wu=(Uu.PAGE_CHANGING="onGridViewPageChanging",Uu.PAGE_CHANGED="onGridViewPageChanged",Uu.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",Uu.GROUPING="onGridViewGrouping",Uu.GROUPED="onGridViewGrouped",Uu.EXPANDING="onGridViewExpanding",Uu.EXPANDED="onGridViewExpanded",Uu.COLLAPSING="onGridViewCollapsing",Uu.COLLAPSED="onGridViewCollapsed",e("GridViewLayoutManager",ed,{init:function(t){this._super(t)},isRowGrouped:function(){return!this.grid().rowGroup().isMergeMode()&&this.grid().isRowGrouped()},rowGroupLevels:function(){return this.grid().rowGroupLevels()}})),zu=e("GridViewSelectionTool",Fd,{init:function(t){this._super(t)},_getEditRequest:function(t,e,i,n,s){if(t instanceof Xu)return new Ju(t);e=this._super(t,e,i,n,s);if(e)return e;i=this.grid();if(t instanceof Za){n=t.index().dataColumn();if(i.groupingOptions().isEnabled&&i.panel().isVisible()&&n&&n.isGroupable())return new ju(t)}return null},_getDragTracker:function(t,e,i){return t instanceof Ju?new Qu(this.grid(),t):t instanceof ju?new Zu(this.grid(),t):this._super(t,e,i)},_doColumnHeaderClicked:function(t,e,i){this._super(t),e||(e=this.grid(),t=b(t,M),!e.isEmpty()&&t&&t.isSortable()&&e.sortingOptions().isEnabled()&&e.sortColumn(t,i))},_doHandleClicked:function(t){var e,i,n=this.grid();t instanceof Ha?(i=n.leftPos(),n.sortColumn(t.cellView().index().dataColumn()),n.setLeftPos(i)):t instanceof Dh?(e=(i=t.cellView().item())instanceof Vr?i:t.cellView().item().parent(),(e=b(e,Vr))&&(e.isExpanded()?n.collapse(e):n.expand(e,!1,!1))):t instanceof Ka?(e=t.group())&&(e.isExpanded()?n.collapse(e):n.expand(e,!1,!1),e.isExpanded()||0<=(i=(i=(0<=e.index()?e:e.firstItem()).index())<0&&e.footer()?e.footer().index():i)&&(e=n.getIndex(i),i=n.focusedIndex().column()||n.getFirstColumn(),e.setColumn(i),n.makeCellVisible(e))):this._super(t)}}),Ku=e("GridPanelElement",Ta,{init:function(t){this._super(t),this._messageView=new Yu(t,"messageView"),this.addElement(this._messageView),this._groupByView=new qu(t,"groupByView"),this.addElement(this._groupByView),this._state=Ku.NORMAL},state:0,groupingIndex:-1,setState:function(t){if(t!=this._state){switch(this._state=t){case Ku.NORMAL:this._groupingIndex=-1;break;case Ku.GROUPING:this._groupingIndex=this._groupByView.childCount();break;case Ku.UNGROUPING:this._groupingIndex=0}this.layoutContent(null),this.invalidate()}},setGroupingIndex:function(t){t!=this._groupingIndex&&(this._groupingIndex=t,this.layoutContent(null),this.invalidate())},_doMeasure:function(t,e,i){var n=t.groupingOptions();return this._messageView.setText(n.prompt()),this._messageView.updateStyles(this.model().styles()),this._groupByView.setLinear(n.isLinear()),this._groupByView.updateStyles(this.model().styles()),n=this._groupByView.measure(e,i).clone(),this._groupByView.fieldCount()<1&&(n=this._messageView.measure(e,i).clone()),t=this._super(t,e,i),n.width=Math.max(n.width,t.width),n.height=Math.max(n.height,t.height,30),n},_doLayoutContent:function(t){var e,i=this.width(),n=this.height();this._messageView.setVisible(this._state==Ku.NORMAL&&!this.grid().isRowGrouped()),this._messageView.isVisible()&&(e=this._messageView.measure(i,n),this._messageView.setBounds(4,0,e.width+10,n)),this._groupByView.setVisible(!0),this._groupByView.isVisible()&&(this._groupByView.setBounds(4,0,i,n),this._groupByView.layoutContent(t))}},{NORMAL:0,GROUPING:1,UNGROUPING:2}),Yu=e("PanelMessageView",is,{init:function(t,e){this._super(t,e),this._paddingLeft=4},destroy:function(){this._destroying=!0,this._font=null,this._super()},font:null,foreground:g.BLACK,textAlignment:D.NEAR,text:null,measure:function(t,e){return new l(t,20)},updateStyles:function(t){this._paddingLeft=t.paddingLeft(),this.setForeground(t.foreground()),this.setFont(t.font())},_doDraw:function(t){var e=this.getClientRect();e.setLeft(this._paddingLeft),t.drawTextRect(this.font(),this.foreground(),this._text,e,this.textAlignment())}}),Xu=e("ColumnView",Za,{init:function(t,e,i){Xa.init.call(this,e,i),this._acceptable=!0,this._stroke=new f(2281701376,3),this.setShowHandles(!1),this._removeButton=new Wa(t,e,this),this._removeButton.setVisible(!1),this.addElement(this._removeButton)},removeButton:null,setAcceptable:function(t){t!=this._acceptable&&(this._acceptable=t,this.invalidate())},_doMeasure:function(t,e,i){var n=this.container().measureText(this.font(),this.text())+this.paddingHorz()+2*this.borderWidth();return n+=this._removeButton&&this._removeButton.isVisible()?this._removeButton.size()+this._removeButton._buttonGap:0,new l(n,i)},setBorderRight:function(t){Xa.setBorderRight.call(this,t)},_doPrepareElement:function(t){this._super(t),this.setShowHandles(!1)},_doLayoutHandles:function(){var t,e,i=this.grid(),n=this._column;i&&n instanceof M&&(n=(i=this._getRenderRect(null)).right()-4,t=i.y,i=i.height,this._removeButton)&&this._removeButton.isVisible()&&(e=this._removeButton.size(),this._removeButton.setMouseEnabled(!0),this._removeButton.setBounds(n-e,t,e,i),this._removeButton.invalidate())},_doUpdateContent:function(t){var e=this.grid(),e=e&&e.groupingOptions()&&e.groupingOptions().removeButton();this._removeButton.setVisible(e&&e.isVisible()),e&&e.fill()&&(this._removeButton._fill=e.fill()),e&&e.hoveredFill()&&(this._removeButton._hoveredFill=e.hoveredFill()),e&&e.size()&&(this._removeButton._size=e.size()),e&&null!=e.buttonGap&&(this._removeButton._buttonGap=e.buttonGap())},_doRender:function(t,e){var i=this.border(),n=i?i.width():0,s=null,r=((s=this.isHovered()&&this.hoveredBackground()||this.background())&&t.drawRectI(s,null,e),0<n&&e.inflate(n,n),s=null,s=this.isHovered()&&(s=this.hoveredForeground())||this.foreground(),e.clone());this._removeButton.isVisible()&&(r.width-=this._removeButton.size()+this._removeButton.buttonGap()),s&&t.drawTextRect(this.font(),s,this.text(),r,Tn.CENTER),i&&(e.inflate(-n,-n),t.drawBoundsI(null,i,e.x,e.y,e.right()-1,e.bottom()-1)),this._acceptable||(e.inflate(-3,-3),t.drawLine(this._stroke,e.x,e.y,e.right(),e.bottom()),t.drawLine(this._stroke,e.right(),e.y,e.x,e.bottom()))},isHovered:function(){return this._hovered||this._removeButton.isHovered()}}),qu=e("GroupByView",is,{init:function(t,e){this._super(t,e),this._columnViews=[],this._fields=[],this._paddingLeft=8,this._paddingTop=4,this._paddingBottom=5,this._columnWidth=80,this._columnHeight=20},destroy:function(){this._destroying=!0,this._columnViews=null,this._fields=null,this._super()},verticalGap:12,horizontalGap:12,linear:!1,fieldCount:function(){return this._fields?this._fields.length:0},measure:function(t,e){return this._fields=this.container().gridView().getGroupByFields(),this._fields&&0<this._fields.length?(this.$_prepareColumnViews(this._fields),new l(t,this._paddingTop+this._paddingBottom+this._columnHeight+(this._linear?0:(this._fields.length-1)*this._verticalGap))):new l(t,e)},layoutContent:function(t){this.$_layoutColumnViews(this._fields),this.invalidate()},updateStyles:function(t){this._paddingLeft=t.paddingLeft(),this._paddingTop=t.paddingTop(),this._paddingBottom=t.paddingBottom()},_doDraw:function(t){if(this._fields&&!(this._fields.legnth<1)){var e=this.container().gridView().rowGroup().panelStyles().line();if(e){var i=this._fields.length;if(!(i<1))for(var n,s=this._columnViews[0],r=s.getBounds(),o=(new O,1);o<i;o++)n=(s=this._columnViews[o]).getBounds(),this._linear?t.drawLineI(e,r.right(),r.y+r.height/2,n.x,r.y+r.height/2):t.drawLinesI(e,r.right(),r.y+r.height/3,n.x+n.width/4,r.y+r.height/3,n.x+n.width/4,n.y),r.copy(n)}}},$_prepareColumnViews:function(t){if(this._fields&&0<this._fields.length)for(var e=this._fields.length;this._columnViews.length<e;)this._columnViews.push(new Xu(this.container().gridView(),this._dom))},$_layoutColumnViews:function(t){if(this.hideAll(),t&&!(t.length<1))for(var e,i,n=this.container().gridView(),s=n.layoutManager(),r=t.length,o=this._paddingLeft,a=this._paddingTop,h=0;h<r;h++)i=n.getDataColumn(t[h]),i=n.header().getGroupingCell(i),(e=this._columnViews[h]).parent()==this?(e.setVisible(!0),e.invalidate()):this.addElement(e),e.updateCell(i),i=Math.max(this._columnWidth,e.measure(n,this._columnWidth,this._columnHeight).width),e.setBounds(o,a,i,this._columnHeight),e.layoutContent(s),o+=i+this._horizontalGap,this._linear||(a+=this._verticalGap)}}),ju=e("RowGroupingRequest",xs,{init:function(t){this._super(t)},groupIndex:-1,column:function(){return b(this.cell().index().column(),M)},cursor:function(){return null}}),Zu=e("RowGroupingTracker",Ss,{init:function(t,e){this._super(t,"rowGroupingTracker"),this._request=e,this._columnView=null,this._panelView=t.panelView()},request:function(){return this._request},_doStart:function(t,e){return this._panelView.setState(Ku.GROUPING),!0},_canAccept:function(t,e){return e-2<this.grid().layoutManager().headerBounds().y},_doCompleted:function(){var t=this.grid();t.isGrouped(this._request.column())||t.addGroupBy(this._panelView.groupingIndex(),this._request.column())},_doEnded:function(){this._panelView.setState(Ku.NORMAL)},_showFeedback:function(t,e){var i=this.grid(),n=$.temp(i,-1,this._request.column());this._columnView||(this._columnView=new Xu(i,i._dom)),this._columnView.updateCell(i.header().getCell(n)),this._columnView.setBounds(0,0,100,20),this._columnView.invalidate(),this._columnView.setAcceptable(!i.isGrouped(this._request.column())),i.addFeedbackElement(this._columnView),this._columnView.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_moveFeedback:function(t,e){var i=this.grid();this._columnView.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_hideFeedback:function(){this.grid().removeFeedbackElement(this._columnView)}}),Ju=e("PanelCellRequest",xs,{init:function(t){this._super(t)},groupIndex:-1,column:function(){return b(this.cell().index().column(),M)},cursor:function(){return null}}),Qu=e("PanelCellTracker",Ss,{init:function(t,e){this._super(t,"panelCellTracker"),this._request=e,this._columnView=null,this._panelView=t.panelView()},request:function(){return this._request},_doStart:function(t,e){return this._panelView.setState(Ku.NORMAL),!0},_canAccept:function(t,e){return e-2>=this.grid().layoutManager().headerBounds().y},_showFeedback:function(t,e){var i=this.grid(),n=$.temp(i,-1,this._request.column());this._columnView||(this._columnView=new Xu(i,i._dom)),this._columnView.updateCell(i.header().getCell(n)),this._columnView.setBounds(0,0,100,20),this._columnView.invalidate(),i.addFeedbackElement(this._columnView),this._columnView.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_moveFeedback:function(t,e){var i=this.grid();this._columnView.move(i.containerToGridX(t)-4,i.containerToGridY(e)-2)},_hideFeedback:function(){this.grid().removeFeedbackElement(this._columnView)},_doCompleted:function(){this.grid().removeGroupBy(this._request.column())}}),tc={LINE_UP:"lineUp",LINE_DOWN:"lineDown",LINE_LEFT:"lineLeft",LINE_RIGHT:"lineRight",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",PAGE_LEFT:"pageLeft",PAGE_RIGHT:"pageRight",THUMB_TRACK:"thumbTrack",THUMB_END:"thumbEnd"},ec=e("ScrollConrer",Ra,{init:function(t){this._super(t,"scrollCorner")},_doRender:function(t,e){var i=this.grid().displayOptions().scrollBarStyles().background()||new g("#fff0f0f0");t.drawRectI(i,null,e)}}),ic=e("ScrollBar",Ra,{init:function(t,e){this._super(t,"scrollBar"),this._nearButton=new nc(t,this,!1),this.addElement(this._nearButton),this._farButton=new nc(t,this,!0),this.addElement(this._farButton),this._thumb=new sc(t,this),this.addElement(this._thumb),this._vertical=e,this._buttonSize=20,this._min=0,this._max=0,this._pos=0,this._page=0,this._maxPosition=0,this._tipView=null},lineScrollSize:1,pageScrollSize:1,minThumbSize:20,isVertical:function(){return this._vertical},maxPosition:function(){return this._maxPosition},setProperties:function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate())},setPosition:function(t,e){(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(!1,!0),e)&&this._doLayoutContent()},setText:function(t){var e;this._tipView&&t&&(this._tipView.show(),this._tipView.setText(t),t=this._vertical?(t=this._tipView.width(),e=this.x()-t-5,this._thumb.y()):(t=this._tipView.height(),e=this._thumb.x(),this.y()-t-5),this._tipView.move(e,t))},ptInTrack:function(t,e,i){e=this.containerToElement(t,e);if(this._vertical){if(e.y>=this._nearButton.height()&&e.x<this._farButton.y())return!i&&e.y<this._thumb.y()||i&&e.y>=this._thumb.bottom()}else if(t>=this._nearButton.width()&&t<this._farButton.x())return!i&&e.x<this._thumb.x()||i&&e.x>=this._thumb.right();return!1},_doLayoutContent:function(t){var e=this._vertical,i=this._buttonSize,n=(e?this._height:this._width)-2*i,s=Math.min(n,Math.max(this._minThumbSize,B(n*this._page/(this._max-this._min+1)))),r=NaN;0<this._maxPosition&&(r=i+Math.min(n-s,Math.max(0,B((n-s)*this._pos/(this._maxPosition-this._min))))),this._thumb.setVisible(!isNaN(r)),e?(this._nearButton.setBounds(0,0,this._width,i),this._farButton.setBounds(0,this._height-i,this._width,i),s<=n&&this._thumb.setBounds(1,r,this._width-2,s)):(this._nearButton.setBounds(0,0,i,this._height),this._farButton.setBounds(this._width-i,0,i,this._height),s<=n&&this._thumb.setBounds(r,1,s,this._height-2))},_doRender:function(t,e){var i=this.grid().displayOptions().scrollBarStyles().background()||new g("#fff0f0f0");t.drawRectI(i,null,e),this._vertical},_doScroll:function(t,e,i){this.fireEvent(ic.SCROLLED,t,e,i)},_mouseOut:function(){this._nearButton.setPressed(!1),this._farButton.setPressed(!1),this._thumb.setPressed(!1)}}),nc=(ic.SCROLLED="onScrollBarScrolled",e("ScrollButton",is,{init:function(t,e,i){this._super(t),this._scrollBar=e,this._far=i,this._enabled=!0},pressed:!1,enabled:!0,isVertical:function(){return this._scrollBar._vertical},isFar:function(){return this._far},scrollBar:function(){return this._scrollBar},_hoveredChanged:function(){this.invalidate()},_doDraw:function(t){var e=this.getClientRect(),i=B(e.width/2),n=B(e.height/2),s=this.scrollBar().grid().displayOptions().scrollButtonStyles(),r=this._pressed?s.selectedBackground():this.isHovered()?s.hoveredBackground():s.background(),s=this._pressed?s.selectedForeground():this.isHovered()?s.hoveredForeground():s.foreground(),s=new f(s?s._color.toString():this._pressed?"#ffffffff":"#ff333333");t.drawRectI(r,null,e),this._scrollBar._vertical?this._far?(t.drawVertLineI(s,n-1,n+3,i),t.drawHorzLineI(s,i-3,i+4,n-1),t.drawHorzLineI(s,i-2,i+3,n),t.drawHorzLineI(s,i-1,i+2,n+1)):(t.drawVertLineI(s,n-2,n+1,i),t.drawHorzLineI(s,i-3,i+4,n+1),t.drawHorzLineI(s,i-2,i+3,n),t.drawHorzLineI(s,i-1,i+2,n-1)):this._far?(t.drawHorzLineI(s,i-1,i+3,n),t.drawVertLineI(s,n-3,n+4,i-1),t.drawVertLineI(s,n-2,n+3,i),t.drawVertLineI(s,n-1,n+2,i+1)):(t.drawHorzLineI(s,i-2,i+1,n),t.drawVertLineI(s,n-3,n+4,i+1),t.drawVertLineI(s,n-2,n+3,i),t.drawVertLineI(s,n-1,n+2,i-1))}})),sc=e("ScrollThumb",is,{init:function(t,e){this._scrollBar=e,this._super(t)},pressed:!1,scrollBar:function(){return this._scrollBar},isVertical:function(){return this._scrollBar._vertical},_hoveredChanged:function(){this.invalidate()},_doDraw:function(t){var e=this.getClientRect(),i=this.scrollBar().grid(),n=i.displayOptions().scrollThumbStyles(),s=this._pressed?n.selectedBackground():this.isHovered()?n.hoveredBackground():n.background(),n=n.border();0<i.scrollThumbRadius()?(i=i.scrollThumbRadius(),t.drawRoundRectI(s,n,e,i,i,i,i,0)):t.drawRectI(s,n,e)}}),rc=e("ScrollThumbRequest",Rs,{init:function(t){this._super(),this._thumb=t},thumb:function(){return this._thumb},scrollBar:function(){return this._thumb.scrollBar()},cursor:function(){return rs.ARROW},isSelectable:function(){return!1}}),oc=e("ScrollThumbTracker",Ss,{init:function(t,e,i){this._super(t.scrollBar().grid(),"scrollThumbTracker"),this._request=t,this._thumb=t.thumb(),this._scrollBar=t.scrollBar(),this._vertical=this._scrollBar.isVertical();t=this._scrollBar.containerToElement(e,i);this._scrollBar.isVertical()?this._offset=t.y-this._thumb.y():this._offset=t.x-this._thumb.x()},isStartWhenCreated:function(){return!0},_doStart:function(t,e){return this._thumb.setPressed(!0),!0},_doDrag:function(t,e){return this.$_doScroll(t,e,tc.THUMB_TRACK)},_doCompleted:function(t,e){return this.$_doScroll(t,e,tc.THUMB_END)},_doCanceled:function(t,e){},_doEnded:function(){this._thumb.setPressed(!1)},$_doScroll:function(t,e,i){var n,s=this._scrollBar._maxPosition-this._scrollBar._min+1,r=this._scrollBar._buttonSize,t=this._scrollBar.containerToElement(t,e);if(this._scrollBar.isVertical()){if((n=this._scrollBar.height()-2*r-this._thumb.height())<=0)return;t.y-=this._offset,t.y=(t.y-r)*s/n,this._scrollBar._doScroll(i,0,B(t.y))}else{if((n=this._scrollBar.width()-2*r-this._thumb.width())<=0)return;t.x-=this._offset,t.x=(t.x-r)*s/n,this._scrollBar._doScroll(i,0,B(t.x))}return!0}}),ac=e("ScrollTipTracker",null,{init:function(t){this._super(),this._container=t,this._dom=new E(this._element=this.$_createElement())},destroy:function(){return this.hide(),this._element&&this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._container=null,this._dom=this._element=null,this._super(),null},show:function(){this._container.appendChild(this._element)},hide:function(){this._element.parentElement&&this._element.parentElement.removeChild(this._element)},move:function(t,e){this._dom.move(t,e)},setText:function(t){this._element.innerHTML=this._msg=t},width:function(){return this._element.offsetWidth},height:function(){return this._element.offsetHeight},getRect:function(){return this._element.getBoundingClientRect()},$_createElement:function(){var t=E.createElement("div",{position:"absolute",padding:"4px 8px",fontSize:"12px",boxSizing:"border-box",display:"inline-block",borderRadius:"4px",pointerEvents:"none",userSelect:"none"});return t.className="rg-scroll-tip-view",t.style.backgroundColor="rgba(214, 214, 214, 0.8)",t.style.border="1px solid rgb(0, 66, 148)",t}}),hc=e("ScrollButtonTimer",le,{init:function(t){this._super(),this._button=t,this._scrollBar=t.scrollBar(),this._active=!1,this._timer=I,this._ready=!1},start:function(){this._button.setPressed(!0),this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(t,e){t=this._button.containerToElement(t,e);this._active=this._button.containsInClient(t.x,t.y)},stop:function(t,e){this._ready=!1,this._timer&&clearInterval(this._timer),this._button.setPressed(!1)},$_fireEvent:function(){var t=null,e=1;this._scrollBar.isVertical()?this._button.isFar()?t=tc.LINE_DOWN:(t=tc.LINE_UP,e=-1):this._button.isFar()?t=tc.LINE_RIGHT:(t=tc.LINE_LEFT,e=-1),this._scrollBar._doScroll(t,this._scrollBar.lineScrollSize()*e,0)}}),lc=e("ScrollTrackTimer",le,{init:function(t,e){this._super(t),this._scrollBar=t,this._isFar=e,this._active=!1,this._timer=I,this._ready=!1},start:function(){this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(t,e){t=this._scrollBar.containerToElement(t,e);this._active=this._scrollBar.ptInTrack(t.x,t.y,this._isFar)},stop:function(t,e){this._ready=!1,this._timer&&clearInterval(this._timer)},$_fireEvent:function(){var t,e=null,i=0,n=this._scrollBar._thumb;this._scrollBar.isVertical()?(t=this._scrollBar.mouseY(),this._isFar&&t>n.bottom()?(e=tc.PAGE_DOWN,i=1):t<n.y()&&(e=tc.PAGE_UP,i=-1)):(t=this._scrollBar.mouseX(),this._isFar&&t>n.right()?(i=1,e=tc.PAGE_RIGHT):t<n.x()&&(e=tc.PAGE_LEFT,i=-1)),0!=i&&this._scrollBar._doScroll(e,this._scrollBar.pageScrollSize()*i,0)}}),dc=e("DataRowExpressionRuntime",Si,{init:function(){this._super(),this._item=null,this._group=null,this._dataSource=null,this._fieldCount=null,this._grid=null},destroy:function(){this._destroying=!0,this._item=null,this._group=null,this._dataSource=null,this._grid=null,this._super()},index:function(){return this._item.index()},item:function(){return this._item},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setItem:function(t,e){this._item=t,this._group=b(t,C),this._grid=e},_evaluate:function(t){return t(this._grid?this._grid.getHandler():null,{dataRow:this._item._dataRow,itemIndex:this._item._index})},isIdentifier:function(t){return t=t.toLowerCase(),dc.IDENTS.hasOwnProperty(t)?dc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(Qt(null!=this._item,"item is null"),t){case dc.ID_ROW:return this._item.index();case dc.ID_DATA_ROW:return this._item.dataRow();case dc.ID_CHECKED:return this._item.isChecked();case dc.ID_STATE:switch(this._item.rowState()){case v.CREATED:return"c";case v.UPDATED:return"u";case v.DELETED:return"d";case v.CREATE_AND_DELETED:return"x"}return I;case dc.ID_COUNT:return this._group?this._group.count():0;case dc.ID_DCOUNT:return this._group?this._group.descendantCount():0}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._item){if(t!=dc.ID_VALUE&&t!=dc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}return I},evaluateIndexerS:function(t,e,i){if(t!=dc.ID_VALUE&&t!=dc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exists:"+e);return this._item.getData(t)}return I}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_STATE:5,ID_COUNT:6,ID_DCOUNT:7},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,value:t.ID_VALUE,values:t.ID_VALUES,state:t.ID_STATE,count:t.ID_COUNT,dcount:t.ID_DCOUNT}}),uc=e("DataCellExpressionRuntime",Si,{init:function(){this._super(),this._cell=null,this._item=null,this._dataSource=null,this._fieldCount=0,this._grid=null},destroy:function(){this._destroying=!0,this._cell=null,this._grid=null,this._dataSource=null,this._super()},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setCell:function(t,e){this._cell=t,this._grid=t._index.grid(),this._item=t.index().item()||e},_evaluate:function(t){var e=this._grid?this._grid.getHandler():null,i=this._cell,n=i._index,i=(n.item()||(n._item=this._item),i.value());return t(e,n.proxy(),i)},isIdentifier:function(t){return t=t.toLowerCase(),uc.IDENTS.hasOwnProperty(t)?uc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(this._cell.index().I()<0){var e=this._cell.index().dataField();switch(t){case uc.ID_VALUE:return this._item.getData(e);case uc.ID_DATA_ROW:return this._item.dataRow()}}switch(t){case uc.ID_VALUE:return this._cell.value();case uc.ID_ROW:return this._cell.index().I();case uc.ID_DATA_ROW:return this._cell.index().dataRow();case uc.ID_INDEX:return this._cell.index().column().index();case uc.ID_FIELD:return this._cell.index().dataField();case uc.ID_CHECKED:return this._item.isChecked();case uc.ID_STATE:switch(this._item.rowState()){case v.CREATED:return"c";case v.UPDATED:return"u";case v.DELETED:return"d";case v.CREATE_AND_DELETED:return"x"}return I;case uc.ID_TAG:return this._cell.index().C().tag();case uc.ID_BASE:var i=this._cell.index().dataColumn().baseIndex();return 0<=i?this._item.getData(i):I;case uc.ID_COUNT:return this._item instanceof C?this._item.count():0;case uc.ID_DCOUNT:return this._item instanceof C?this._item.descendantCount():0;case uc.ID_CHANGED_CELL:var i=this._cell.index(),n=this._item.dataRow(),i=i.dataField();return 0<=i&&this._item.rowState()==v.UPDATED&&this._dataSource.isDataChanged(n,i);case uc.ID_LOOKUP_EXISTS:n=this._cell.index().column();if(i=n.lookupSource()){for(var s=n.lookupKeyFieldIds(),r=s.length,o=[],a=0;a<r;a++)o.push(this._item.getData(s[a]));return i.exists(o)}return-1<n.getLookupIndex(this._item.getData(this._cell.index().dataField()))}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._item){if(t!=uc.ID_VALUE&&t!=uc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}},evaluateIndexerS:function(t,e,i){if(t!=uc.ID_VALUE&&t!=uc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exists:"+e);return this._item.getData(t)}}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11,ID_CHANGED_CELL:12,ID_LOOKUP_EXISTS:13},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES,count:t.ID_COUNT,dcount:t.ID_DCOUNT,changedcell:t.ID_CHANGED_CELL,lookupexists:t.ID_LOOKUP_EXISTS}}),cc=e("FooterExpressionRuntime",Si,{init:function(){this._super(),this._cell=null,this._grid=null},destroy:function(){this._destroying=!0,this._cell=null,this._grid=null,this._super()},setCell:function(t,e){this._cell=t,this._grid=t._index&&t._index._grid,this._item=e},_evaluate:function(t){var e=this._grid&&this._grid.getHandler(),i=this._cell,n=jt({},i._index.proxy()),i=null==i.value()&&i.displayText?i.displayText():i.value();return n.footerIndex=this._cell._footerIndex,t(e,n,i)},isIdentifier:function(t){return t=t.toLowerCase(),cc.IDENTS.hasOwnProperty(t)?cc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case cc.ID_VALUE:return this._cell.value();case cc.ID_FIELD:return this._cell.index().dataField();case cc.ID_LEVEL:return this._cell.level()}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){},evaluateIndexerS:function(t,e,i){}},{ID_VALUE:0,ID_FIELD:1,ID_LEVEL:2},function(t){t.IDENTS={value:t.ID_VALUE,field:t.ID_FIELD,level:t.ID_LEVEL}}),_c=e("CheckBarExpressionRuntime",Si,{init:function(){this._super(),this._cell=null,this._grid=null},setCell:function(t){this._cell=t,this._grid=t._index&&t._index._grid},destroy:function(){this._destroying=!0,this._cell=null,this._grid=null,this._super()},isIdentifier:function(t){return t=t.toLowerCase(),_c.IDENTS.hasOwnProperty(t)?_c.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case _c.ID_VALUE:case _c.ID_CHECKED:return this._cell.item().isChecked();case _c.ID_CHECKABLE:return this._cell.item().isCheckable();case _c.ID_ROW:return this._cell.item().I();case _c.ID_DATA_ROW:return this._cell.item().dataRow();case _c.ID_STATE:switch(this._cell.item().rowState()){case v.CREATED:return"c";case v.UPDATED:return"u";case v.DELETED:return"d";case v.CREATE_AND_DELETED:return"x"}return I}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._cell){var i=this._cell.item(),n=(i&&i.dataSource()).fieldCount();if(t!=_c.ID_VALUE&&t!=_c.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||n<=e)throw new h("Data field index out of bounds:"+e);return i.getData(e)}},evaluateIndexerS:function(t,e,i){if(t!=_c.ID_VALUE&&t!=_c.ID_VALUES)throw new h("Invalid identifier indexer: "+t);var t=this._cell.item(),n=t&&t.dataSource(),s=n.fieldCount();if(n){i=i?n.getFieldIndexC(e):n.getFieldIndex(e);if(i<0||s<=i)throw new h("Data field is not exists:"+e);return t.getData(i)}}},{ID_VALUE:0,ID_VALUES:1,ID_CHECKED:2,ID_CHECKABLE:3,ID_ROW:4,ID_DATA_ROW:5,ID_STATE:6},function(t){t.IDENTS={value:t.ID_VALUE,values:t.ID_VALUES,checked:t.ID_CHECKED,checkable:t.ID_CHECKABLE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,state:t.ID_STATE}}),fc=e("RowGroupStatementRuntime",Si,{init:function(){this._super(),this._grid=null,this._group=null},destroy:function(){this._destroying=!0,this._grid=null,this._group=null,this._super()},setGrid:function(t){this._grid=t},setGroup:function(t){this._group=t},isIdentifier:function(t){return t=t.toLowerCase(),fc.IDENTS.hasOwnProperty(t)?fc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){var e;switch(Qt(null!=this._group,"group is null"),t){case fc.ID_GROUP_FIELD:return(i=this._group.dataSource().getField(this._group.groupField()))?i.fieldName():"";case fc.ID_FIELD_HEADER:return(i=this._group.dataSource().getField(this._group.groupField()))?i.header():"";case fc.ID_GROUP_COLUMN:return(e=this._grid?this._grid.columnByField(this._group.groupField()):null)?e.displayText():this._group.dataSource().getFieldName(this._group.groupField());case fc.ID_COLUMN_HEADER:return(e=this._grid?this._grid.columnByField(this._group.groupField()):null)?(i=e.header())?i.text():e.displayText():this._group.dataSource().getFieldName(this._group.groupField());case fc.ID_COLUMN_FOOTER:return(e=this._grid?this._grid.columnByField(this._group.groupField()):null)?(i=e.footer())?i.groupText():e.displayText():this._group.dataSource().getFieldName(this._group.groupField());case fc.ID_GROUP_VALUE:var i=this._group.firstItem();return i?i.getData(this._group.groupField()):I;case fc.ID_ROW_COUNT:return this._group.descendantCount()}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){var i;switch(t){case fc.ID_SUM:case fc.ID_MAX:case fc.ID_MIN:case fc.ID_AVG:case fc.ID_DATA_COUNT:case fc.ID_DATA_AVG:if(isNaN(e)||e<0)return I;switch(t){case fc.ID_SUM:i=this._group.getSum(e);break;case fc.ID_MAX:i=this._group.getMax(e);break;case fc.ID_MIN:i=this._group.getMin(e);break;case fc.ID_AVG:i=this._group.getAvg(e);break;case fc.ID_DATA_COUNT:i=this._group.getDataCount(e);break;case fc.ID_DATA_AVG:i=this._group.getDataAvg(e)}return isNaN(i)?"":String(i)}throw new h("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){var n=this._group.dataSource(),n=e?n?n.getFieldIndex(e):-1:this._gorup.groupField;return this.evaluateIndexerI(t,n)}},{ID_GROUP_FIELD:0,ID_FIELD_HEADER:1,ID_GROUP_COLUMN:2,ID_COLUMN_HEADER:3,ID_COLUMN_FOOTER:4,ID_GROUP_VALUE:5,ID_ROW_COUNT:6,ID_SUM:8,ID_MAX:9,ID_MIN:10,ID_AVG:11,ID_DATA_COUNT:12,ID_DATA_AVG:13},function(t){t.IDENTS={groupfield:t.ID_GROUP_FIELD,fieldheader:t.ID_FIELD_HEADER,groupcolumn:t.ID_GROUP_COLUMN,columnheader:t.ID_COLUMN_HEADER,columnfooter:t.ID_COLUMN_FOOTER,groupvalue:t.ID_GROUP_VALUE,rowcount:t.ID_ROW_COUNT,sum:t.ID_SUM,max:t.ID_MAX,min:t.ID_MIN,avg:t.ID_AVG,datacount:t.ID_DATA_COUNT,dataavg:t.ID_DATA_AVG}}),mc=e("ColumnMergeRuntime",Si,{init:function(){this._super(),this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0},destroy:function(){this._destroying=!0,this._item=null,this._dataSource=null,this._grid=null,this._column=null,this._super()},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setColumn:function(t){this._column=t,this._grid=t.grid()},setCell:function(t){this._item=t.item(),this._field=t.dataField()},setItem:function(t,e){this._item=t,this._field=e},isIdentifier:function(t){return t=t.toLowerCase(),mc.IDENTS.hasOwnProperty(t)?mc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(this._item){switch(t){case mc.ID_VALUE:return this._item.getData(this._field);case mc.ID_ROW:return this._item.index();case mc.ID_DATA_ROW:return this._item.dataRow();case mc.ID_CHECKED:return this._item.isChecked();case mc.ID_GROUP:return this._item.parent();case mc.ID_PREV_VALUES:var e=this._grid.getDataColumns(),i=e.indexOf(this._column),n=[];if(e.length<0||i<0)return;for(var s=0,r=Math.min(i,e.length);s<r;s++)n.push(this._item.getData(e[s].dataIndex()));return n.join("`")}throw new h("Invalid identifier key: "+t)}return I},evaluateIndexerI:function(t,e){if(this._item){if(t!=mc.ID_VALUE&&t!=mc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}return I},evaluateIndexerS:function(t,e,i){if(this._item&&this._dataSource){if(t!=mc.ID_VALUE&&t!=mc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(t)}return I}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_GROUP:5,ID_PREV_VALUES:6},function(t){t.IDENTS={row:t.ID_ROW,datarow:t.ID_DATA_ROW,checked:t.ID_CHECKED,value:t.ID_VALUE,values:t.ID_VALUES,group:t.ID_GROUP,prevvalues:t.ID_PREV_VALUES}}),gc=e("ColumnFilterRuntime",Si,{init:function(){this._super(),this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0},destroy:function(){this._destroying=!0,this._item=null,this._dataSource=null,this._super()},setDataSource:function(t){this._dataSource=t,this._fieldCount=this._dataSource?this._dataSource.fieldCount():0},setData:function(t,e){this._item=t,this._field=e},isIdentifier:function(t){return t=t.toLowerCase(),gc.IDENTS.hasOwnProperty(t)?gc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case gc.ID_VALUE:return this._item.getData(this._field);case gc.ID_STATE:switch(this._item.rowState()){case v.CREATED:return"c";case v.UPDATED:return"u";case v.DELETED:return"d";case v.CREATE_AND_DELETED:return"x"}return I;case gc.ID_CHANGED_CELL:var e=this._item.dataRow(),i=this._field;return 0<=i&&this._item.rowState()==v.UPDATED&&this._dataSource.isDataChanged(e,i);case gc.ID_FIELD:return this._field;case gc.ID_MAX:case gc.ID_MIN:case gc.ID_MEAN:return 0}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._item){if(t!=gc.ID_VALUE&&t!=gc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}},evaluateIndexerS:function(t,e,i){if(t!=gc.ID_VALUE&&t!=gc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exists:"+e);return this._item.getData(t)}}},{ID_VALUE:0,ID_FIELD:1,ID_VALUES:2,ID_STATE:3,ID_CHANGED_CELL:4,ID_MAX:10,ID_MIN:11,ID_MEAN:12},function(t){t.IDENTS={value:t.ID_VALUE,field:t.ID_FIELD,values:t.ID_VALUES,state:t.ID_STATE,changedcell:t.ID_CHANGED_CELL,min:t.ID_MAX,max:t.ID_MIN,mean:t.ID_MEAN}}),F=e("SummaryExpressionRuntime",Si,{init:function(){this._super()},isIdentifier:function(t){return t=t.toLowerCase(),F.IDENTS.hasOwnProperty(t)?F.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case F.ID_COUNT:return this._getCount();case F.ID_SUM:return this._getSum();case F.ID_MAX:return this._getMax();case F.ID_MIN:return this._getMin();case F.ID_AVG:return this._getAvg();case F.ID_VAR:return this._getVar();case F.ID_VARP:return this._getVarp();case F.ID_STDEV:return this._getStdev();case F.ID_STDEVP:return this._getStdevp();case F.ID_DATA_COUNT:return this._getDataCount();case F.ID_DATA_AVG:return this._getDataAvg()}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){throw new h("Invalid identifier indexer: "+t)},evaluateIndexerS:function(t,e,i){throw new h("Invalid identifier indexer: "+t)},_getCount:function(){return NaN},_getSum:function(){return NaN},_getMax:function(){return NaN},_getMin:function(){return NaN},_getAvg:function(){return NaN},_getVar:function(){return NaN},_getVarp:function(){return NaN},_getStdev:function(){return NaN},_getStdevp:function(){return NaN},_getDataCount:function(){return NaN},_dataDataAvg:function(){return NaN}},{ID_COUNT:0,ID_SUM:1,ID_MAX:2,ID_MIN:3,ID_AVG:4,ID_VAR:5,ID_VARP:6,ID_STDEV:7,ID_STDEVP:8,ID_DATA_COUNT:9,ID_DATA_AVG:10},function(t){t.IDENTS={count:t.ID_COUNT,sum:t.ID_SUM,max:t.ID_MAX,min:t.ID_MIN,avg:t.ID_AVG,var:t.ID_VAR,varp:t.ID_VARP,stdev:t.ID_STDEV,stdevp:t.ID_STDEVP,datacount:t.ID_DATA_COUNT,dataavg:t.ID_DATA_AVG}}),pc=e("ColumnSummaryRuntime",F,{init:function(){this._super(),this._grid=null,this._dataSource=null,this._column=null,this._summarizer=null},destroy:function(){this._destroying=!0,this._grid=null,this._dataSource=null,this._column=null,this._summarizer=null,this._super()},setColumn:function(t,e){this._column=t,this._grid=t&&t.grid(),this._dataSource=this._grid?this._grid.dataSource():null,this._fieldCount=this._dataSource?this._dataSource.fieldCount():0,this._summarizer=this._grid?e:null},_getCount:function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex()):0},_getSum:function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex()):0},_getMax:function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex()):NaN},_getMin:function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex()):NaN},_getAvg:function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex()):NaN},_getVar:function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex()):NaN},_getVarp:function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex()):NaN},_getStdev:function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex()):NaN},_getStdevp:function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex()):NaN},_getDataCount:function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex()):NaN},_getDataAvg:function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex()):NaN},evaluateIndexerI:function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds: "+e);switch(t){case F.ID_SUM:return this._summarizer.getSum(e);case F.ID_COUNT:return this._summarizer.getCount(e);case F.ID_MAX:return this._summarizer.getMax(e);case F.ID_MIN:return this._summarizer.getMin(e);case F.ID_AVG:return this._summarizer.getAvg(e);case F.ID_VAR:return this._summarizer.getVar(e);case F.ID_VARP:return this._summarizer.getVarp(e);case F.ID_STDEV:return this._summarizer.getStdev(e);case F.ID_STDEVP:return this._summarizer.getStdevp(e)}throw new h("Invalid identifier indexer: "+t)}switch(t){case F.ID_SUM:case F.ID_COUNT:return 0;case F.ID_MAX:case F.ID_MIN:case F.ID_AVG:case F.ID_VAR:case F.ID_VARP:case F.ID_STDEV:case F.ID_STDEVP:return NaN}},evaluateIndexerS:function(t,e,i){if(this._summarizer&&this._dataSource){var n=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(n<0||n>=this._fieldCount)throw new h("Data field index out of bounds: "+n);switch(t){case F.ID_SUM:return this._summarizer.getSum(n);case F.ID_COUNT:return this._summarizer.getCount(n);case F.ID_MAX:return this._summarizer.getMax(n);case F.ID_MIN:return this._summarizer.getMin(n);case F.ID_AVG:return this._summarizer.getAvg(n);case F.ID_VAR:return this._summarizer.getVar(n);case F.ID_VARP:return this._summarizer.getVarp(n);case F.ID_STDEV:return this._summarizer.getStdev(n);case F.ID_STDEVP:return this._summarizer.getStdevp(n)}throw new h("Invalid identifier indexer: "+t)}switch(t){case F.ID_SUM:case F.ID_COUNT:return 0;case F.ID_MAX:case F.ID_MIN:case F.ID_AVG:case F.ID_VAR:case F.ID_VARP:case F.ID_STDEV:case F.ID_STDEVP:return NaN}}}),wc=e("RowGroupSummaryRuntime",pc,{init:function(){this._super(),this._item=null},destroy:function(){this._destroying=!0,this._item=null,this._super()},item:null,setItem:function(t){this._item=t},_getCount:function(){return this._item.getNumber(this._column.dataIndex())},_getSum:function(){return this._item.getSum(this._column.dataIndex())},_getMax:function(){return this._item.getMax(this._column.dataIndex())},_getMin:function(){return this._item.getMin(this._column.dataIndex())},_getAvg:function(){return this._item.getAvg(this._column.dataIndex())},_getVar:function(){return this._item.getVar(this._column.dataIndex(),1)},_getVarp:function(){return this._item.getVar(this._column.dataIndex(),0)},_getStdev:function(){return this._item.getStdev(this._column.dataIndex(),1)},_getStdevp:function(){return this._item.getStdev(this._column.dataIndex(),0)},_getDataCount:function(){return this._item.getDataCount(this._column.dataIndex(),0)},_getDataAvg:function(){return this._item.getDataAvg(this._column.dataIndex(),0)}}),vc=e("CheckableExpressionRuntime",dc,{init:function(){this._super()}}),Cc=e("DataCellRendererRuntime",Si,{init:function(){this._super(),this._target=null,this._item=null,this._dataSource=null,this._fieldCount=0},destroy:function(){this._destroying=!0,this._target=null,this._item=null,this._dataSource=null,this._super()},setDataSource:function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount():0},setTarget:function(t){this._target=t,this._item=t.index().item()},isIdentifier:function(t){return t=t.toLowerCase(),Cc.IDENTS.hasOwnProperty(t)?Cc.IDENTS[t]:this._super(t)},_evaluate:function(t){var e=this._grid&&this._grid.getHandler(),i=this._target,n=i.index(),i=i.value();return t(e,n.proxy(),i)},evaluateIdentifier:function(t){switch(Qt(null!=this._target,"target is null"),t){case Cc.ID_VALUE:return this._target.value();case Cc.ID_ROW:return this._target.index().I();case Cc.ID_DATA_ROW:return this._target.index().dataRow();case Cc.ID_INDEX:return this._target.index().column().index();case Cc.ID_FIELD:return this._target.index().dataField();case Cc.ID_CHECKED:return this._item&&this._item.isChecked();case Cc.ID_STATE:if(this._item)switch(this._item.rowState()){case v.CREATED:return"c";case v.UPDATED:return"u";case v.DELETED:return"d";case v.CREATE_AND_DELETED:return"x"}return I;case Cc.ID_TAG:return this._target.index().C().tag();case Cc.ID_BASE:var e=this._target.index().dataColumn().baseIndex();return 0<=e?this._item.getData(e):I;case Cc.ID_COUNT:return this._target.index().childCount();case Cc.ID_DCOUNT:return this._target.index().descendantCount()}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(t==Cc.ID_VALUE){var i=this._target.value();if(k(i)&&e<i.length)return i[e];throw new h("Value index out of bounds:"+e)}if(t!=Cc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}},evaluateIndexerS:function(t,e,i){if(t!=Cc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exits:"+e);return this._item.getData(t)}}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,datarow:t.ID_DATA_ROW,index:t.ID_INDEX,field:t.ID_FIELD,checked:t.ID_CHECKED,state:t.ID_STATE,tag:t.ID_TAG,base:t.ID_BASE,values:t.ID_VALUES,count:t.ID_COUNT,dcount:t.ID_DCOUNT}}),yc=e("LinkCellRendererRuntime",Si,{init:function(){this._super(),this._item=null,this._dataSource=null,this._requiredFields=null},destroy:function(){this._destroying=!0,this._dataSource=null,this._requiredFields=null,this._super()},setIndex:function(t){this._item=t.item(),this._dataSource=t.grid().dataSource()},setRequiredFields:function(t){this._requiredFields=t},isIdentifier:function(t){if(this._dataSource){var e=this._dataSource.getFieldIndex(t);if(0<=e)return e}return this._super(t)},evaluateIdentifier:function(t){if(0<=t){var e,i=this._item.getData(t);if(this._dataSource.getField(t).isEmpty(i)&&this._requiredFields&&0<(e=this._requiredFields.length)){var n=this._dataSource.getFieldName(t);if(n)for(var s=0;s<e;s++)if(this._requiredFields[s]==n)throw new Error("Required field error: "+n)}return i}this._invalidIdentError(t)}}),xc=e("CalculateExpressionRuntime",Si,{init:function(){this._super(),this._values=null,this._fields=null,this._fieldCount=0},destroy:function(){this._destroying=!0,this._values=null,this._fields=null,this._super()},setValues:function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},isIdentifier:function(t){return t=t.toLowerCase(),xc.IDENTS.hasOwnProperty(t)?xc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._values){if(t!=xc.ID_VALUE&&t!=xc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._values[e]}},evaluateIndexerS:function(t,e,i){if(t!=xc.ID_VALUE&&t!=xc.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._values&&this._fields){t=this._fields.indexOf(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exists:"+e);return this._values[t]}}},{ID_VALUE:0,ID_VALUES:1},function(t){t.IDENTS={value:t.ID_VALUE,values:t.ID_VALUES}}),Ic=e("EditorTitleExpressionRuntime",Si,{init:function(){this._super(),this._value=null,this._cell=null},destroy:function(){this._destroying=!0,this._cell=null,this._super()},setValue:function(t){this._value=t},setCell:function(t){this._cell=t},isIdentifier:function(t){return t=t.toLowerCase(),Ic.IDENTS.hasOwnProperty(t)?Ic.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(t){case Ic.ID_VALUE:return this._value;case Ic.ID_ROW:return String(this._cell.index().I()+1);case Ic.ID_COLUMN_HEADER:var e=this._cell&&this._cell.index().column();return e&&e.header&&e.header().text()?e.header().text():e.displayText()}}},{ID_VALUE:0,ID_ROW:1,ID_COLUMN_HEADER:2},function(t){t.IDENTS={value:t.ID_VALUE,row:t.ID_ROW,columnheader:t.ID_COLUMN_HEADER}}),bc=e("ColumnExportStatementRuntime",Si,{init:function(){this._super(),this._value=null,this._columns=null,this._cell=null,this._startCol=0},destroy:function(){this._destroying=!0,this._columns=null,this._cell=null,this._super()},setColumns:function(t){this._columns=t},setItemIndex:function(t,e){this._itemIndex=t,this._startCol=e},isIdentifier:function(t){return t=t.toLowerCase(),bc.IDENTS.hasOwnProperty(t)?bc.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){if(t===bc.ID_ROW)return String(this._itemIndex+1)},evaluateIndexerI:function(t,e){if(t!=bc.ID_EXCELCOLUMN)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._columns.length)throw new h("Data field index out of bounds:"+e);return this._columns[e]},evaluateIndexerS:function(t,e,i){if(t!=bc.ID_EXCELCOLUMN)throw new h("Invalid identifier indexer: "+t);if(this._columns){t=this._columns.indexOf(e);if(t<0||t>=this._columns.length)throw new h("Column is not exists:"+e);return si(t+this._startCol)}}},{ID_EXCELCOLUMN:0,ID_ROW:1},function(t){t.IDENTS={excelcolumn:t.ID_EXCELCOLUMN,row:t.ID_ROW}}),Ec=e("EqualBlankRuntime",Si,{init:function(){this._super(),this._cell=null,this._item=null,this._dataSource=null,this._fieldCount=0},destroy:function(){this._destroying=!0,this._cell=null,this._item=null,this._dataSource=null,this._grid=null,this._super()},setDataArguments:function(t,e,i){this._dataSource=t,this._fieldCount=t?t.fieldCount():0,this._cell=e,this._item=i,this._grid=e&&e.index().column().grid()},setItem:function(t){this._item=t},isIdentifier:function(t){return t=t.toLowerCase(),Ec.IDENTS.hasOwnProperty(t)?Ec.IDENTS[t]:this._super(t)},evaluateIdentifier:function(t){switch(Qt(null!=this._cell,"cell is null"),t){case Ec.ID_VALUE:return this._item.getData(this._cell.index().dataField());case Ec.ID_BASE:return 0<=(n=this._cell.index().dataColumn().baseIndex())?this._item.getData(n):I;case Ec.ID_PREV_VALUES:var e=this._cell.index().column(),i=this._grid.getDataColumns(),n=i.indexOf(e),s=[];if(i.length<0||n<0)return;for(var r=0,o=Math.min(n,i.length);r<o;r++)s.push(this._item.getData(i[r].dataIndex()));return s.join("`")}throw new h("Invalid identifier key: "+t)},evaluateIndexerI:function(t,e){if(this._item){if(t!=Ec.ID_VALUE&&t!=Ec.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new h("Data field index out of bounds:"+e);return this._item.getData(e)}return I},evaluateIndexerS:function(t,e,i){if(t!=Ec.ID_VALUE&&t!=Ec.ID_VALUES)throw new h("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new h("Data field is not exists:"+e);return this._item.getData(t)}return I}},{ID_VALUE:0,ID_VALUES:1,ID_BASE:2,ID_PREV_VALUES:3},function(t){t.IDENTS={value:t.ID_VALUE,values:t.ID_VALUES,base:t.ID_BASE,prevvalues:t.ID_PREV_VALUES}}),Ji=e("CellButtonRenderer",null,{init:function(t){this._super(),this._name=t},name:function(){return this._name},measure:function(t,e,i){return this._doMeasure(t,e,i)},render:function(t,e,i,n,s,r,o){this._doRender(t,e,i,n,s,r,o)},hitTest:function(t,e,i,n){return this._doHitTest(t,e,i,n)},getButtonIndex:function(t,e,i,n){return this._buttonIndex(t,e,i,n)},toString:function(){return this._name},_doMeasure:function(t,e,i){return new l(e,i)},_doRender:function(t,e,i,n,s,r){},_doHitTest:function(t,e,i,n){return!0},_buttonIndex:function(t,e,i,n){return 0}}),Rc=e("DefaultCellButtonRenderer",Ji,{init:function(t){this._super(t),this._inited=!1,this._imageUrls={ed:"ellipsis_down.png",eh:"ellipsis_hover.png",eu:"ellipsis_up.png",dd:"dropdown_down.png",dh:"dropdown_hover.png",du:"dropdown_up.png",cd:"calendar_down.png",ch:"calendar_hover.png",cu:"calendar_up.png"},this._images={}},prepare:function(t){if(!this._inited){for(var e in this._imageUrls)t.getImage(Y+X+this._imageUrls[e]);this._inited=!0}},_doMeasure:function(t,e,i){return new l(Rc.BUTTON_WIDTH+4,i)},_doRender:function(t,e,i,n,s,r){var o=t.dataColumn();o&&(i=i.clone(),r&&t.grid().isEditing()?(i.leftBy(2),i.rightBy(-2)):(i.leftBy(1),i.rightBy(-3)),(r=o.button())==Cs.ACTION?this.$_drawEllipsisButton(t.grid(),e,i,!0,n,s):r==Cs.POPUP&&this.$_drawMenuButton(t.grid(),e,i,!0,n,s))},$_getImage:function(t,e,i){var n=this._images[e];return n||(n=t.getImage(Y+X+i))&&(this._images[e]=n),n},$_drawEllipsisButton:function(t,e,i,n,s,r){var o,r=r?"ed":s?"eh":"eu";(r=this.$_getImage(t,r,this._imageUrls[r]))&&0<(s=r.width)&&0<(t=r.height)&&(o=B(i.x+(i.width-s)/2),i=B(i.y+(i.height-t)/2),e.drawImage(r,o,i,s,t))},$_drawMenuButton:function(t,e,i,n,s,r){var o,r=r?"dd":s?"dh":"du";(r=this.$_getImage(t,r,this._imageUrls[r]))&&0<(s=r.width)&&0<(t=r.height)&&(o=B(i.x+(i.width-s)/2),i=B(i.y+(i.height-t)/2),e.drawImage(r,o,i,s,t))},$_drawCalendarButton:function(t,e,i,n,s,r){var o,r=r?"cd":s?"ch":"cu";(r=this.$_getImage(t,r,this._imageUrls[r]))&&0<(s=r.width)&&0<(t=r.height)&&(o=B(i.x+(i.width-s)/2),i=B(i.y+(i.height-t)/2),e.drawImage(r,o,i,s,t))}},{BUTTON_WIDTH:16,BUTTON_HEIGHT:14}),Sc=t({COMBO:"combo",ELLIPSIS:"ellipsis",CALENDAR:"calendar"}),Tc=e("EditButtonRenderer",Rc,{init:function(t){this._super(t)},buttonType:Sc.COMBO,_doRender:function(t,e,i,n,s,r){if(t.dataColumn()){var o=i.clone();switch(o.leftBy(1),o.rightBy(-3),o.topBy(Math.max(1,B((i.height-Rc.BUTTON_HEIGHT)/2))),o.setBottom(Math.min(o.y+Rc.BUTTON_HEIGHT,o.bottom()-3)),this._buttonType){case Sc.COMBO:this.$_drawMenuButton(t.grid(),e,o,!0,n,s);break;case Sc.ELLIPSIS:this.$_drawEllipsisButton(t.grid(),e,o,!0,n,s);break;case Sc.CALENDAR:this.$_drawCalendarButton(t.grid(),e,o,!0,n,s)}}}}),kc=e("ImageButtonsRenderer",Ji,{init:function(t){this._super(t),this._inited=!1,this._images=[],this._count=0,this._imagePoints=[],this._imageGap=2,this._margin=2},imageWidth:16,imageHeight:14,imageUrls:[],margin:null,imageGap:null,setImageUrls:function(t){if(t){t=t&&k(t)?t:[t],this._count=t.length,this._imageUrls=[],this._images=[],this._imagePoints=[0];for(var e=0,i=0;i<this._count;i++){var n,s=t[i],r={};for(n in s)if(s.hasOwnProperty(n))for(var o in _s)if(_s[o]==n){r[n]=s[n];break}this._imageUrls.push(r),e+=a=(s.hasOwnProperty("width")&&!isNaN(s.width)?parseInt(s.width):this._imageWidth)+(i<this._count-1?this._imageGap:0);var a={name:s.name,width:a,cursor:s.cursor};this._imagePoints.push(e),this._images.push(a)}}else this._count=0,this._imageUrls=null,this._images=null;this._inited=!1},prepare:function(t){if(!this._inited){for(var e=0;e<this._count;e++)for(var i in this._imageUrls[e])t.getImage(this._imageUrls[e][i]);this._inited=!0}},_buttonIndex:function(t,e,i,n){for(var s=1,r=this._imagePoints.length;s<r;s++)if(this._imagePoints[s]>=i)return this._imagePoints[s]-(s<r-1?this._imageGap:0)>=i?s-1:-1;return-1},_doMeasure:function(t,e,i){var n=this._imagePoints.length<=0?0:this._imagePoints[this._imagePoints.length-1]+this._margin;return new l(n,i)},_doRender:function(t,e,i,n,s,r,o){if(t.dataColumn()){var a=i.clone();r&&t.grid().isEditing()?(a.leftBy(2),a.rightBy(-2)):(a.leftBy(1),a.rightBy(-3));for(var h=0;h<this._count;h++)o===h?this.$_drawButton(t.grid(),e,a,h,n,s):this.$_drawButton(t.grid(),e,a,h,!1,!1)}},_doHitTest:function(t,e,i,n){return-1!==this._buttonIndex(t,e,i,n)},$_getImage:function(t,e,i,n){var s=this._images[e][i];return s||(s=t.getImage(n))&&(this._images[e][i]=s),s},$_drawButton:function(t,e,i,n,s,r){var r=r?_s.DOWN:s?_s.HOVER:_s.UP;this._imageUrls[n][r]||this._imageUrls[n][_s.UP]&&(r=_s.UP),(img=this.$_getImage(t,n,r,this._imageUrls[n][r]))&&0<(s=img.width)&&0<(t=img.height)&&(r=B(i.x+1+this._imagePoints[n]),n=B(i.y+(i.height-t)/2),e.drawImage(img,r,n,s,t))},getCursor:function(t){return this._images&&this._images[t]&&this._images[t].cursor}},{}),Dc=e("DynamicRendererOption",null,{init:function(t){this._super(),ne(null!=t,"owner is null"),this._owner=t},owner:function(){return this._owner},apply:function(t,e){},_changed:function(){}}),Bc=e("DynamicRendererOptionImpl",Dc,{init:function(t,e){this._super(t),this._exprNode=null,this._propMap={},e&&(e.hasOwnProperty("criteria")&&this.setCriteria(e.criteria),e.hasOwnProperty("options")?this.setOptions(e.options):e.hasOwnProperty("styles")&&this.setOptions(e.styles))},criteria:null,options:null,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this.$_buildExpression(),this._changed())},setOptions:function(t){t!=this._options&&(this._options=t,this.$_buildStyles(),this._changed())},apply:function(t,e){var i;if(this._exprNode&&(i=this._exprNode.evaluate(t)))for(var n in i=this._exprNode instanceof fi&&"boolean"!=typeof i?i:this._propMap){var s=this._owner._readOption(n,i[n]);void 0!==s&&(e[n]=s)}},$_buildExpression:function(){(!this._criteria||(this._exprNode=ni.Default.parse(this._criteria,this._owner?this._owner.capitalIndexers():null),null==this._exprNode))&&(this._exprNode=_i.Default)},$_buildStyles:function(){var t,e,i,n;if(this._propMap={},"string"==typeof this._options)for(t=0,e=(i=this._options.split(";")).length;t<e;t++)1<(n=i[t].split("=")).length?this._propMap[n[0]]=n[1]:this._propMap[n[0]]=I;else if(this._options)for(var s in this._options)this._propMap[s]=this._options[s]}}),Oc=e("DynamicRendererOptionCase",Dc,{init:function(t,e){this._super(t),this._exprNodes=[],this._propMaps=[],e&&(e.hasOwnProperty("criteria")&&this.setCriteria(e.criteria),e.hasOwnProperty("options")?this.setStyles(e.options):e.hasOwnProperty("styles")&&this.setOptions(e.styles))},criteria:null,styles:null,setCriteria:function(t){t!=this._criteria&&(this._criteria=t,this.$_buildExpressions(),this._changed())},setStyles:function(t){t!=this._options&&(this._options=t,this.$_buildStyles(),this._changed())},apply:function(t,e){for(var i=0,n=this._exprNodes.length;i<n;i++){var s=this._exprNodes[i];if(s&&s.evaluate(t)){var r,o=this._propMaps[i];for(r in o){var a=this._owner._readOption(r,o[r]);void 0!==a&&(e[r]=a)}break}}},$_buildExpressions:function(){var t,e=this.owner();if(this._exprNodes=[],this._criteria&&0<(t=this._criteria.length))for(var i=0;i<t;i++){var n=this._criteria[i];n?(null==(n=ni.Default.parse(n,e?e.capitalIndexers():null))&&(n=_i.Default),this._exprNodes.push(n)):this._exprNodes.push(_i.Default)}},$_buildStyles:function(){this._propMaps=[];for(var t=0,e=this._exprNodes.length;t<e;t++){var i=(this._options.length>t?this._options[t]:this._options[e-1]).split(";"),n={};this._propMaps.push(n);for(var s=0;s<i.length;s++){var r=i[s].split(/\s*=/);1<r.length?n[r[0]]=r[1]:n[r[0]]=null}}}}),Mc=e("DynamicRendererOptionCollection",null,{init:function(t){this._super(),this._owner=t,this._items=[]},owner:function(){return this._owner},count:function(){return this._items.length},getItem:function(t){return this._items[t]},clear:function(){this._items=[]},add:function(t){t=this.$_createOption(t);t&&this._items.indexOf(t)<0&&this._items.push(t)},setItems:function(t){var e;if(this._items=[],t)if("function"==typeof(t=t instanceof Mc?t.toArray():t))(e=this.$_createOption(t))&&this._items.push(e);else if(k(t))for(var i=t.length,n=0;n<i;n++)(e=this.$_createOption(t[n]))&&this._items.push(e)},prepare:function(){},apply:function(t,e){for(var i=this._items.length,n=0;n<i;n++)this._items[n].apply(t,e)},toArray:function(){return this._items.concat()},$_createOption:function(t){var e=null;return"function"==typeof t?e=new Bc(this._owner,{criteria:t}):t instanceof Dc?(t._owner=this._owner,e=t):k(t)?e=(k(t.options)||k(t.styles),new Oc(this._owner,t)):t&&t.criteria&&(e=new Bc(this._owner,t)),e}}),Fc=e("DataCellRenderer",n,{init:function(){this._super(),this._rect=new O,this._runtime=null,this._dynamicOptions=null,this._runtimeOptions={},this._hoveredUnderline=!1},destroy:function(){return!1},minWidth:4,dynamicOptions:null,showTooltip:!1,tooltipEllipseTextOnly:!1,altText:null,hoveredUnderline:!1,dynamicOptions_:function(){return this._dynamicOptions?this._dynamicOptions.toArray():null},setDynamicOptions:function(t){t!=this._dynamicOptions&&(t?(this._runtime||(this._runtime=new Cc),this._dynamicOptions||(this._dynamicOptions=new Mc(this)),this._dynamicOptions.setItems(t),this._changed()):this._dynamicOptions&&(this._dynamicOptions=null,this._changed()))},capitalIndexers:function(){return null},isEditable:function(){return!1},canEditable:function(){return!0},isStartEditOnClick:function(){return!1},isDblClickEnabled:function(){return!1},isClickable:function(t){return!1},isButton:function(){return!1},isHoveredUnderline:function(t){return this._hoveredUnderline},setOptions:function(t){},prepareRuntime:function(t){this._runtime&&this._runtime.setDataSource(t.dataSource())},applyDynamicStyles:function(t){this._dynamicOptions&&0<this._dynamicOptions.count()&&(this._runtime.setTarget(t),this._dynamicOptions.apply(this._runtime,this._runtimeOptions={}))},measure:function(t,e,i,n){return this._doMeasure(t,e,i,n)},measureHeight:function(t,e,i,n){return this._doMeasureHeight(t,e,i,n)},render:function(t,e,i){},getButtonRenderer:function(){return null},isEditableKey:function(t,e){return!1},performEdit:function(t){},performClick:function(t,e,i){return!1},getTooltip:function(t){if(this.isShowTooltip())return this._getText(t)||void 0},assign:function(t){this._super(t),t&&!t.hasOwnProperty("dynamicOptions")&&t.hasOwnProperty("dynamicStyles")&&this.setDynamicOptions(t.dynamicStyles)},propertyChanged:function(t,e){this._changed()},_readOption:function(t,e){return e},_getOption:function(t){if(this._runtimeOptions.hasOwnProperty(t)){var e=this._runtimeOptions[t];if(void 0!==e)return e}return this[t]()},_doMeasure:function(t,e,i,n){return new l(Math.max(this._minWidth,i),n)},_doMeasureHeight:function(t,e,i,n){return new l(Math.max(this._minWidth,i),0)},_getText:function(t){var e,i=t.text();return null!==i&&i!==I||(i=""),null!=(e=t.prefix())&&(i=e+i),null!=(e=t.suffix())&&(i+=e),i},_changed:function(){}},{consumeKey:function(t,e,i,n){var s=t?t.grid():null;if(s&&!s.isEditing()&&t.dataColumn()&&e==p.SPACE){var r,o=s.body().getCell(t),a=o?o.styles().renderer():null,a=a?s.dataCellRenderers().getRenderer(a):t.dataColumn().rendererObj();if(a){if(!s.isReadOnly(t)&&a.isEditable()&&a.isEditableKey(t,e,i,n)&&s.edit(t)){var e=t.item();if((s.isItemEditing(e)||s.canUpdate(e,t.dataField()))&&s.canWrite(t))return s.makeCellVisible(t,!0),a.performEdit(t),!0}if(s&&s.editOptions().isButtonClickWhenSpace()){i=t.dataColumn().button(),n=s.getHandler();if(a instanceof Yc&&a.isClickable(t)&&n&&n.onLinkableCellClicked)return a.performClick(o),!0;if(a.isButton&&a.isButton())return e=a instanceof qc?0:void 0,r=a.images&&a.images(),name=k(r)?r[0].name:void 0,s._fireImageButtonClicked(t,e,name),!0;if(i&&i!==Cs.NONE){var h=s._delegate.getCellButtonRenderer(t);switch(i){case Cs.IMAGE:r=h._images,name=k(r)&&r[0].name,s._fireImageButtonClicked(t,0,name);break;case Cs.ACTION:s._fireCellButtonClicked(t);break;case Cs.POPUP:var l=s.popupMenuManager();if(l.isShow())return!1;var d=s.layoutManager().getMergedCell(t)?s.getCellView(s._mergeView,t,t.isFixedCol()):b(s.getCellView(null,t),Ya),u=t.column().menu();u&&d&&l.show(u,d)}return!0}if(n&&n.onDataCellClicked)return s._fireDataCellClicked(t),!0}}}return!1}}),Nc=function(n){var r={},s={},o=n._grid;this.addRenderers=function(t){if(t)for(var e=t,i=0,n=(e=k(e)?e:[t]).length;i<n;i++){var s=e[i];s&&s.hasOwnProperty("id")&&s.id&&(r[s.id]=jt({},s))}},this.getRenderer=function(t){var e,i=r[t];return i?((e=b(s[t],Fc))||(e=n.createRenderer(i))&&(s[t]=e).prepare&&e.prepare(o),e):null}},Lc=e("TextCellRenderer",Fc,{init:function(){this._super()},_doMeasure:function(t,e,i,n){var s;return!e._textWrap||e._textWrap!=Ms.NORMAL&&e._textWrap!=Ms.EXPLICIT?Rt(t.measureText(e.font(),this._getText(e))+e.paddingHorz(),n):(s=new O(0,0,0,0),t.measureTextRect(e.font(),this._getText(e),0,0,i,n,e._textAlign,e._lineAlign,e._textWrap,s),Rt(s.width+e.paddingHorz(),n))},_doMeasureHeight:function(t,e,i,n){t=Rt(i,t.measureTextRect(e.font(),this._getText(e),0,0,i,n,e._textAlign,e._lineAlign,e._textWrap)+e.paddingVert());return t.height=Math.min(t.height,n),t},render:function(t,e,i){var n=this._getText(t),s=t.figureName();s&&Lc.drawEdgeMark(s,t,e,i),i=this._rect.copy(i),t.inflatePadding(i),Lc.renderWrapText(t,e,i.x,i.y,i.width,i.height,n)}},{renderWrapText:function(t,e,i,n,s,r,o){switch(t.textWrap()){case Ms.EXPLICIT:e.drawTextBoundsExplicit(t.font(),t.foreground(),o,i,n,s,r,t.textAlign(),t.lineAlign());break;case Ms.NORMAL:e.drawTextBoundsWrap(t.font(),t.foreground(),o,i,n,s,r,t.textAlign(),t.lineAlign());break;case Ms.ELLIPSE:e.drawTextBoundsEllipse(t.font(),t.foreground(),o,i,n,s,r,t.textAlign(),t.lineAlign());break;default:e.drawTextBounds(t.font(),t.foreground(),o,i,n,s,r,t.textAlign(),t.lineAlign())}},drawEdgeMark:function(t,e,i,n){var s=e.figureBackground(),r=n.x,o=n.y,a=n.width,h=n.height,n=e.figureSize(),l=n?n.getDimension(h):10,d=null;switch(t){case zs.LEFT_TOP:d=[r,o,r+l,o,r,o+l];break;case zs.LEFT_BOTTOM:d=[r,o+h,r+l,o+h,r,o+h-l];break;case zs.RIGHT_TOP:d=[r+a-l,o,r+a,o,r+a,o+l];break;case zs.RIGHT_BOTTOM:d=[r+a,o+h-l,r+a,o+h,r+a-l,o+h]}d&&i.drawPolygonArray(s,null,d)}}),Ac=(Lc.Default=new Lc,e("BarCellRenderer",Fc,{init:function(){this._super(),this.setMinWidth(100)},minimum:0,maximum:100,showLabel:!1,origin:"default",absoluteValue:!1,render:function(t,e,i){if(this._maximum>this._minimum){var n=this.isAbsoluteValue()?Math.abs(t.value()):t.value(),s=Math.min(1,(n-this._minimum)/(this._maximum-this._minimum)),r=t.figureBorder(),o=t.figureBackground();if(r||o)switch(this.origin()){case Ac.ORIGIN_LEFT:this.$_drawLeft(t,e,o,r,i,s);break;case Ac.ORIGIN_RIGHT:this.$_drawRight(t,e,o,r,i,s);break;case Ac.ORIGIN_BOTTOM:this.$_drawBottom(t,e,o,r,i,s);break;case Ac.ORIGIN_TOP:this.$_drawTop(t,e,o,r,i,s);break;default:this.$_drawLeft(t,e,o,r,i,s)}}this.isShowLabel()&&(n=this._getText(t),Lc.renderWrapText(t,e,i.x,i.y,i.width,i.height,n))},$_drawLeft:function(t,e,i,n,s,r){var o,a,h,l=t.paddingLeft(),r=(s.width-l-t.paddingRight())*r;0<=r&&(o=t.paddingTop(),h=a=s.height-t.paddingBottom()-o,0<=(h=(t=t.figureSize())?t.getDimension(a):h))&&e.drawBoundsI(i,n,s.x+l,s.y+o+(a-h)/2,r,h)},$_drawRight:function(t,e,i,n,s,r){var o,a,h,l=t.paddingRight(),r=(s.width-t.paddingLeft()-l)*r;0<=r&&(o=t.paddingTop(),h=a=s.height-t.paddingBottom()-o,0<=(h=(t=t.figureSize())?t.getDimension(a):h))&&e.drawBoundsI(i,n,s.right()-l-r,s.y+o+(a-h)/2,r,h)},$_drawBottom:function(t,e,i,n,s,r){var o,a,h,l=t.paddingBottom(),r=(s.height-l-t.paddingTop())*r;0<=r&&(o=t.paddingLeft(),h=a=s.width-t.paddingRight()-o,0<=(h=(t=t.figureSize())?t.getDimension(a):h))&&e.drawBoundsI(i,n,s.x+o+(a-h)/2,s.bottom()-l-r,h,r)},$_drawTop:function(t,e,i,n,s,r){var o,a,h,l=t.paddingTop(),r=(s.height-l-t.paddingBottom())*r;0<=r&&(o=t.paddingLeft(),h=a=s.width-t.paddingRight()-o,0<=(h=(t=t.figureSize())?t.getDimension(a):h))&&e.drawBoundsI(i,n,s.x+o+(a-h)/2,s.y+l,h,r)}})),Vc=(Ac.ORIGIN_DEFAULT="default",Ac.ORIGIN_LEFT="left",Ac.ORIGIN_RIGHT="right",Ac.ORIGIN_TOP="top",Ac.ORIGIN_BOTTOM="bottom",e("ProgressCellRenderer",Fc,{init:function(){this._super(),this.setMinWidth(100)},render:function(t,e,i){}}),e("CheckCellRenderer",Fc,{init:function(){this._super(),this._values={},this._falseValue=void 0,this._trueValues=void 0},trueValues:null,falseValues:null,shape:void 0,labelPosition:"hidden",labelGap:4,spaceKey:!0,editable:!1,dblClickEditable:!1,startEditOnClick:!1,threeState:!1,showInnerFocus:!0,trueImage:null,falseImage:null,emptyImage:null,prepareRuntime:function(t){this._super(t),this._loadImage(t)},_loadImage:function(t){this._trueImage&&t.getImage(this._trueImage),this._falseImage&&t.getImage(this._falseImage),this._emptyImage&&t.getImage(this._emptyImage)},setTrueValues:function(t){t!=this._trueValues&&(this._trueValues=t,this.$_resetValues())},setFalseValues:function(t){t!=this._falseValues&&(this._falseValues=t,this.$_resetValues())},_doMeasure:function(t,e,i,n){var n=Rt(e.paddingHorz(),n),s=12,r=e.figureSize();return r&&(s=r.getDimension(12)),n.width+=s,this.labelPosition()!=Vc.HIDDEN&&(n.width+=this.labelGap()+t.measureText(e.font(),e.value())),n},render:function(t,e,i){var n,s,r,o,a=t.value(),a=this.$_getValue(a),h=this._threeState&&void 0===a,l=h?null:t.figureBorder(),d=h?null:a?t.figureBackground():t.figureInactiveBackground();if(this._trueImage&&a?u=this._trueImage:!this._falseImage||h||a?this._emptyImage&&h&&(u=this._emptyImage):u=this._falseImage,d||l||u){switch(n=12,s=10,u?(o=t.grid().getImage(u))&&(n=Math.min(o.width,i.width),s=Math.min(o.height,i.height)):this._shape==Vc.SHAPE_BOX&&(s=n=12),(a=t.figureSize())&&!o&&(s=10*(n=a.getDimension(n))/12),r=null,this._labelPosition){case Vc.RIGHT:c=t.paddingLeft()+i.x,_=i.y+(i.height-s)/2,(r=this._rect).copy(i),r.leftBy(n+this._labelGap),r.rightBy(-t.paddingRight());break;case Vc.LEFT:c=i.right()-t.paddingRight()-n,_=i.y+(i.height-s)/2,(r=this._rect).copy(i),r.leftBy(t.paddingLeft()),r.right(c-this._labelGap);break;case Vc.BOTTOM:c=i.x+(i.width-n)/2,_=t.paddingTop(),(r=this._rect).copy(i),r.leftBy(t.paddingLeft()),r.rightBy(-t.paddingRight()),r.topBy(s+this._labelGap);break;case Vc.TOP:c=i.x+(i.width-n)/2,_=i.bottom()-s-t.paddingBottom(),(r=this._rect).copy(i),r.leftBy(t.paddingLeft()),r.rightBy(-t.paddingRight()),r.bottomBy(-s-this._labelGap);break;default:c=i.x+(i.width-n)/2,_=i.y+(i.height-s)/2}var u,c=B(c),_=B(_);r&&(u=this._getText(t),r.topBy(t.paddingTop()),r.bottomBy(-t.paddingBottom()),Lc.renderWrapText(t,e,r.x,r.y,r.width,r.height,u)),o?e.drawImage(o,c,_,n,s):this._shape==Vc.SHAPE_BOX?(a=h?null:t.line()||f.DKGRAY,u=new O(c,_,n,s),e.drawRectI(null,a,u),u.inflate(-1,-1),e.drawPolygonArray(d,l,[u.x+1.25*u.width/8,u.y+2.65*u.height/7,u.x+0*u.width,u.y+4.25*u.height/7,u.x+3.45*u.width/8,u.y+7*u.height/7,u.x+8*u.width/8,u.y+1.2*u.height/7,u.x+6.5*u.width/8,u.y+.1*u.height,u.x+3.45*u.width/8,u.y+4.25*u.height/7])):e.drawPolygonArray(d,l,[c+1.25*n/8,_+2.65*s/7,c+0*n,_+4.25*s/7,c+3.95*n/8,_+7*s/7,c+8*n/8,_+1.2*s/7,c+6.3*n/8,_+0*s,c+3.45*n/8,_+4.25*s/7])}this.isEditable()&&t.isFocused()&&this.isShowInnerFocus()&&(o=t.grid())&&!o.isReadOnly(t.index())&&(i.inflate(-3,-3),i.isEmpty()||e.drawRect(null,f.FOCUS,i))},isEditableKey:function(t,e){return this.isSpaceKey()&&e==p.SPACE},performEdit:function(t){var e=this.$_getValue(t.value()),i=t.dataField(),n=t.grid(),s=t.grid().dataSource(),r=t.item(),e=0<=i&&s.getValueType(i)==S.BOOLEAN?this._threeState&&void 0!==e&&!e?void 0:!e:e?this._falseValue||!1:void 0!==e&&this._threeState?void 0:this._trueValue||!0;n.editorCommit(null,t,this.$_getValue(t.value()),e)&&(r.setData(i,e),t.grid())&&t.grid().validateCellCommit(t,e)},$_resetValues:function(){var t,e,i;if(this._values={},this._falseValues)if(t=this._falseValues.split(","))for(this._falseValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!1;else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(this._trueValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},$_getValue:function(t){var e;return"boolean"==typeof t?t:(e=String(t),this._values.hasOwnProperty(e)?this._values[e]:!this._threeState||""!=t&&null!=t?Boolean(t):void 0)}})),Pc=(Vc.HIDDEN="hidden",Vc.RIGHT="right",Vc.LEFT="left",Vc.BOTTOM="bottom",Vc.TOP="top",Vc.SHAPE_DEFAULT="default",Vc.SHAPE_BOX="box",e("ShapeCellRenderer",Fc,{init:function(){this._super(),this._ellipse=null,this._polygon=null,this._rect=new O},sizeRate:.6,render:function(t,e,i){var n=t.figureName(),s=this._getShape(n);switch(t.iconLocation()){case Fs.RIGHT:this._drawRight(t,s,e,i);break;case Fs.TOP:this._drawTop(t,s,e,i);break;case Fs.BOTTOM:this._drawBottom(t,s,e,i);break;case Fs.CENTER:this._drawCenter(t,s,e,i);break;default:Fs.LEFT;this._drawLeft(t,s,e,i)}},_getShape:function(t){var e=null;return t&&("null"==(t=t.toLowerCase())?e=Zn.Default:"ellipse"==t?e=this._ellipse||(this._ellipse=new jn):(e=this._polygon||(this._polygon=new Yn),this._polygon.setShape(t))),e},_drawLeft:function(t,e,i,n){var s=t.iconOffset(),r=t.iconPadding()+s,o=n.x+t.paddingLeft(),a=n.y+t.paddingTop(),h=n.width-t.paddingHorz(),l=n.height-t.paddingVert(),n=0;if(e){var d=n=Math.min(h,l),u=t.figureSize(),u=(u?(n=u.getDimension(n),d=u.getDimension(d)):(n*=this._sizeRate,d*=this._sizeRate),o+s),c=a;switch(t.iconAlignment()){case D.CENTER:c+=(l-d)/2;break;case D.FAR:c+=l-t.paddingVert()-d}this._rect.set(u,c,n,d),e.draw(i,this._rect,t.figureBackground(),t.figureBorder())}s=this._getText(t);s&&Lc.renderWrapText(t,i,o+=n+r,a,h-=n+r,l,s)},_drawRight:function(t,e,i,n){var s=t.iconOffset(),r=t.iconPadding()+s,o=n.x+t.paddingLeft(),a=n.y+t.paddingTop(),h=n.width-t.paddingHorz(),l=n.height-t.paddingVert(),d=0;if(e){var u=d=Math.min(h,l),c=t.figureSize(),c=(c?(d=c.getDimension(d),u=c.getDimension(u)):(d*=this._sizeRate,u*=this._sizeRate),n.right()-d-s-t.paddingRight()),_=a;switch(t.iconAlignment()){case D.CENTER:_+=(l-u)/2;break;case D.FAR:_+=l-t.paddingVert()-u}this._rect.set(c,_,d,u),e.draw(i,this._rect,t.figureBackground(),t.figureBorder())}n=this._getText(t);n&&Lc.renderWrapText(t,i,o,a,h-=d+r,l,n)},_drawTop:function(t,e,i,n){var s=t.iconOffset(),r=t.iconPadding()+s,o=n.x+t.paddingLeft(),a=n.y+t.paddingTop(),h=n.width-t.paddingHorz(),n=n.height-t.paddingVert(),l=0;if(e){var d=l=Math.min(h,n),u=t.figureSize(),c=(u?(d=u.getDimension(d),l=u.getDimension(l)):(d*=this._sizeRate,l*=this._sizeRate),o),u=a+s;switch(t.iconAlignment()){case D.CENTER:c+=(h-d)/2;break;case D.FAR:c+=h-t.paddingHorz()-d}this._rect.set(c,u,d,l),e.draw(i,this._rect,t.figureBackground(),t.figureBorder())}s=this._getText(t);s&&Lc.renderWrapText(t,i,o,a+=l+r,h,n-=l+r,s)},_drawBottom:function(t,e,i,n){var s=t.iconOffset(),r=t.iconPadding()+s,o=n.x+t.paddingLeft(),a=n.y+t.paddingTop(),h=n.width-t.paddingHorz(),l=n.height-t.paddingVert(),d=0;if(e){var u=d=Math.min(h,l),c=t.figureSize(),_=(c?(u=c.getDimension(u),d=c.getDimension(d)):(u*=this._sizeRate,d*=this._sizeRate),o),c=n.bottom()-d-s-t.paddingBottom();switch(t.iconAlignment()){case D.CENTER:_+=(h-u)/2;break;case D.FAR:_+=h-t.paddingHorz()-u}this._rect.set(_,c,u,d),e.draw(i,this._rect,t.figureBackground(),t.figureBorder())}n=this._getText(t);n&&Lc.renderWrapText(t,i,o,a,h,l-=d+r,n)},_drawCenter:function(t,e,i,n){var s,r,o=t.iconOffset(),a=(t.iconPadding(),n.x+t.paddingLeft()),h=n.y+t.paddingTop(),l=n.width-t.paddingHorz(),n=n.height-t.paddingVert(),d=0;e&&(s=d=Math.min(l,n),(r=t.figureSize())?(d=r.getDimension(d),s=r.getDimension(s)):(d*=this._sizeRate,s*=this._sizeRate),r=a+o,a=h+o,this._rect.set(r+=(l-d)/2,a+=(n-s)/2,d,s),e.draw(i,this._rect,t.figureBackground(),t.figureBorder()))}})),Hc=e("SignalBarCellRenderer",Fc,{init:function(){this._super()},barCount:4,minimum:NaN,maximum:NaN,absoluteValue:!1,setBarCount:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},render:function(t,e,i){var n=NaN,s=t.figureState(),r=s&&"string"==typeof s&&"value"==s.toLowerCase(),o=r?n=this.isAbsoluteValue()?Math.abs(t.value()):t.value():parseInt(s),a=t.figureBorder(),h=t.figureBackground();if(!r||isNaN(this._minimum)||isNaN(this._maximum)||(o=this._barCount*(n-this._minimum)/(this._maximum-this._minimum)),a||h)for(var l=t.figureInactiveBackground(),s=i.width-t.paddingHorz(),d=i.height-t.paddingVert(),r=t.paddingLeft(),n=t.paddingTop(),u=(s-2*(this._barCount+1))/this._barCount,c=r,_=n+d/2,f=d/2/(this._barCount-1),m=0;m<this._barCount;m++)e.drawBounds(h=m<o?h:l,a,c,_,u,d-_),c+=2+u,_-=f}}),Gc=e("IconCellRenderer",Fc,{init:function(){this._super()},textVisible:!0,iconWidth:0,iconHeight:0,_doMeasure:function(t,e,i,n){return Gc.measure(t,e,this._getText(e),i,n)},_doMeasureHeight:function(t,e,i,n){return Gc.measure(t,e,this._getText(e),i,n)},render:function(t,e,i){var n=this._textVisible?this._getText(t):void 0;Gc.renderBitmapText(t,n,e,i),i=this._rect.copy(i),t.inflatePadding(i)}},{measure:function(t,e,i,n,s){var r=new O(0,0,n,s),o=Gc.getIcon(e),a=e.iconLocation();if(t.measureTextRect(e.font(),i,0,0,n,s,e._textAlign,e._lineAlign,e._textWrap,r),o)switch(a){case Fs.RIGHT:case Fs.LEFT:isNaN(o.width)||(r.width+=o.width+e.iconPadding()+e.iconOffset()),r.height=Math.max(r.height,isNaN(o.height)?0:o.height);break;case Fs.TOP:case Fs.BOTTOM:isNaN(o.height)||(r.height+=o.height+e.iconPadding()+e.iconOffset()),r.width=Math.max(r.width,isNaN(o.width)?0:o.width);break;case Fs.CENTER:}return r.width+=e.paddingHorz(),r.height+=e.paddingVert(),Rt(r.width,r.height)},getIcon:function(t){var e,i,n=t.iconIndex();return"string"==typeof n&&0==n.indexOf("value")&&(5==n.length?n=t.value():"["==n.charAt(5)&&0<=(e=n.lastIndexOf("]"))&&(n=n.substring(6,e),n=t.getValueOf(n))),isNaN(e=parseInt(n))?-1!==e&&null!=n&&(i=t.grid().getImage(n)):i=(n=t.index().dataColumn().images())?n.getImage(e):null,i},renderBitmapText:function(t,e,i,n){var s=t.paddingHorz(),r=t.paddingVert(),o=t.iconOffset(),a=t.iconPadding()+o,h=n.x+t.paddingLeft(),l=n.y+t.paddingTop(),d=n.width-s,u=n.height-r,c=t.iconLocation(),_=t._renderer&&t._renderer._iconWidth||0,f=t._renderer&&t._renderer._iconHeight||0,m=Gc.getIcon(t);if(m||0<_||0<f){var g=h,p=l,w=m?Math.max(m.width,_):_,v=m?Math.max(m.height,f):f;switch(c){case Fs.RIGHT:switch(g=n.right()-w-o-t.paddingRight(),t.iconAlignment()){case D.CENTER:p+=(u-v)/2;break;case D.FAR:p+=u-r-v}d-=w+a;break;case Fs.TOP:switch(p+=o,t.iconAlignment()){case D.CENTER:g+=(d-w)/2;break;case D.FAR:g+=d-s-w}l+=v+a,u-=v+a;break;case Fs.BOTTOM:switch(p=n.bottom()-v-o-t.paddingBottom(),t.iconAlignment()){case D.CENTER:g+=(d-w)/2;break;case D.FAR:g+=d-s-w}u-=v+a;break;case Fs.CENTER:g+=(d-w)/2,p+=(u-v)/2;break;default:Fs.LEFT;switch(g+=o,t.iconAlignment()){case D.CENTER:p+=(u-v)/2;break;case D.FAR:p+=u-r-v}h+=w+a,d-=w+a}m&&i.drawImageI(m,g,p)}e&&c!=Fs.CENTER&&(_=new O(h,l,d,u),i.save(),i.clipRect(_),Lc.renderWrapText(t,i,h,l,d,u,e),i.restore())}}),$c=e("MultiIconCellRenderer",Fc,{init:function(){this._super(),this.setMinWidth(0),this._icons=null},renderCallback:null,icons:null,textVisible:!0,iconGap:0,setIcons:function(t){this._icons=t?k(t)?t:[t]:null},_doMeasure:function(t,e,i,n){var s,r,o=0,a=0,h=(t=e.grid())&&t.getHandler(),l=e.index(),d=this.renderCallback(),u=e.iconLocation(),c=this._textVisible&&this._getText(e),_=e.paddingHorz(),f=e.paddingVert(),m=e.iconOffset(),g=e.iconPadding()+m,m=(isNaN(this._iconGap)||this._iconGap,e.value()),p=(p=this._icons||d&&"function"==typeof d?this._icons||d(h,l.proxy(),m):[])||[],w=new O(0,0,i,n);for(t.measureTextRect(e.font(),c,0,0,i,n,e._textAlign,e._lineAlign,e._textWrap,w),s=0,r=p.length;s<r;s++){var v=t.getImage(p[s]),C=v?Math.max(v.width,this._minWidth):this._minWidth;v&&(a=Math.max(a,v.height)),o+=C+(s+1===r?0:this._iconGap)}switch(u){case Fs.LEFT:case Fs.RIGHT:w.width+=o+g+_,w.height=Math.max(w.height,a)+f;break;case Fs.TOP:case Fs.BOTTOM:w.width=Math.max(w.width,o)+_,w.height+=a+g+f;break;default:w.width=o+g+_,w.height=a+g+f}return Rt(w.width,w.height)},_doMeasureHeight:function(t,e,i,n){return this._doMeasure(t,e,i,n)},render:function(t,e,i){for(var n,s,r=0,o=0,a=t.grid(),h=a&&a.getHandler(),l=t.index(),d=this.renderCallback(),u=[],i=this._rect.copy(i),c=t.iconLocation(),_=this._textVisible&&this._getText(t),f=t.paddingHorz(),m=t.paddingVert(),g=t.iconOffset(),p=t.iconPadding()+g,w=(isNaN(this._iconGap)||this._iconGap,i.x+t.paddingLeft()),v=i.y+t.paddingTop(),C=i.width-f,y=i.height-m,x=t.iconAlignment(),I=t.value(),b=this._icons||d&&"function"==typeof d?this._icons||d(h,l.proxy(),I):[],E=0,R=(b=b||[]).length;E<R;E++){var S=(T=a.getImage(b[E]))?Math.max(T.width,this._minWidth):this._minWidth;T&&(o=Math.max(o,T.height)),r+=S+(E+1===R?0:this._iconGap),u.push(T)}switch(c){case Fs.LEFT:n=i.x+t.paddingLeft()+g,w+=r+p,C-=r+p;break;case Fs.RIGHT:n=i.right()-r-t.paddingRight()-g,C-=r+p;break;case Fs.TOP:s=i.y+t.paddingTop()+g,v+=o+p,y-=o+p;break;case Fs.BOTTOM:s=i.height-o-t.paddingBottom()-g,y-=o+p;break;case Fs.CENTER:n=i.x+t.paddingLeft()+B((i.width-f-r)/2),s=i.y+t.paddingTop()+(i.height-o-m)/2}switch(x){case D.FAR:s=c==Fs.LEFT||c==Fs.RIGHT?i.height-o-t.paddingBottom()-g:s,n=c==Fs.TOP||c==Fs.BOTTOM?i.right()-r-t.paddingRight()-g:n;break;case D.NEAR:s=c==Fs.LEFT||c==Fs.RIGHT?i.y+t.paddingTop():s,n=c==Fs.TOP||c==Fs.BOTTOM?i.x+t.paddingLeft()+g:n;break;default:s=c==Fs.LEFT||c==Fs.RIGHT?i.y+t.paddingTop()+(i.height-o-m)/2:s,n=c==Fs.TOP||c==Fs.BOTTOM?i.x+t.paddingLeft()+B((i.width-f-r)/2):n}for(E=0,R=u.length;E<R;E++){var T=u[E];S=this._minWidth,T&&(S=Math.max(T.width,this._minWidth)+(E+1===R?0:this._iconGap),T.height,e.drawImage(T,n,Yt(s+(o-T.height)/2),T.width,T.height)),n+=S}_&&(c!=Fs.CENTER||b.length<=0)&&(d=new O(w,v,C,y),e.save(),e.clipRect(d),Lc.renderWrapText(t,e,w,v,C,y,_),e.restore())}}),Uc=e("ImageCellRenderer",Fc,{init:function(){this._super()},render:function(t,e,i){var n=t.value();if(n){n=t.grid().getImage(n);if(n){i=this._rect.copy(i),t.inflatePadding(i);var s,r,o,a=i.x,h=i.y,l=n.width,d=n.height;switch(t.contentFit()){case Ns.CENTER:a+=(i.width-l)/2,h+=(i.height-d)/2;break;case Ns.BOTH:r=i.width/l,o=i.height/d,l=i.width,d=i.height;break;case Ns.WIDTH:s=i.width/l,l=i.width,h+=(i.height-d)/2;break;case Ns.HEIGHT:s=i.height/d,d=i.height,a+=(i.width-l)/2;break;case Ns.AUTO:r=i.width/l,o=i.height/d,l*=s=Math.min(r,o),d*=s,o<r?a+=(i.width-l)/2:h+=(i.height-d)/2}e.drawImageI(n,a,h,l,d)}}},_doMeasure:function(t,e,i,n){var s=e.value(),t=e.grid(),e=s&&t.getImage(s),t=this._minWidth,s=0;return e&&(t=Math.max(e.width,t),s=Math.max(e.height,s),n)&&n<s&&(e=n/s,s=n,t=parseInt(t*e)),new l(t,s)},_doMeasureHeight:function(t,e,i,n){return this._doMeasure(t,e,i,n)}}),Wc=(e("RatingCellRenderer",Fc,{init:function(){this._super()},base:0,delta:1,rangeType:"match",ranges:null,render:function(t,e,i){}}),e("Code39CellRenderer",Fc,{init:function(){this._super(),this._barcode=new ur,this.setMinWidth(100)},render:function(t,e,i){var n,s=t.value();s&&(n=t.figureBackground())&&(this._rect.copy(i),i=t.inflatePadding(this._rect),this._barcode.setValue(s.toUpperCase()),this._barcode.setBarFill(n),this._barcode.render(e,i))}})),zc=e("Code128CellRenderer",Fc,{init:function(){this._super(),this._barcode=new lr,this.setMinWidth(100)},render:function(t,e,i){var n,s=t.value();s&&(n=t.figureBackground())&&(this._rect.copy(i),i=t.inflatePadding(this._rect),this._barcode.setValue(s),this._barcode.setBarFill(n),this._barcode.render(e,i))}}),Kc=e("ClickableCellRenderer",Fc,{init:function(){this._super(),this._hoveredUnderline=!0},spaceKey:!0,hoveredUnderline:!0,isClickable:function(t){return!0},isHoveredUnderline:function(t){return this._hoveredUnderline},performClick:function(t,e,i){return this._doClick(t.index())},render:function(t,e,i){},_getClickSource:function(){return null},_getClickData:function(){return null},_doClick:function(t,e,i){var n=this._getClickData(t);return!!n&&(this._fireClicked(t,this._getClickSource(),n),!0)},_fireClicked:function(t,e,i){var n=t.grid();n&&n.fireEvent(T.CLICKABLE_CELL_CLICKED,t,e,i)}}),Yc=(Kc.LINKABLE_CELL="linkableCell",Kc.IMAGE_BUTTON_CELL="imageButtonCell",e("LinkCellRenderer",Kc,{init:function(){this._super(),this._urlStatement=new _r(null,!0),this._urlRuntime=new yc},urlField:null,url:null,showUrl:!0,openUrl:!1,requiredFields:null,cursor:null,isClickable:function(t){return!(!t||!this._getClickData(t))},isHoveredUnderline:function(t){return this._hoveredUnderline&&this.isClickable(t)},setUrl:function(t){t!=this._url&&(this._url=t,this._urlStatement.setSource(t),this._changed())},setRequiredFields:function(t){if(t!=this._requiredFields)if(this._requiredFields=t){for(var e=t.split(","),i=e.length;i--;)e[i]=e[i].trim().toUpperCase();this._urlRuntime.setRequiredFields(e)}else this._urlRuntime.setRequiredFields(null)},_doMeasure:function(t,e,i,n){var s;return!e._textWrap||e._textWrap!=Ms.NORMAL&&e._textWrap!=Ms.EXPLICIT?Rt(t.measureText(e.font(),this._getText(e))+e.paddingHorz(),n):(s=new O(0,0,0,0),t.measureTextRect(e.font(),this._getText(e),0,0,i,n,e._textAlign,e._lineAlign,e._textWrap,s),Rt(s.width+e.paddingHorz(),n))},_doMeasureHeight:function(t,e,i,n){t=Rt(i,t.measureTextRect(e.font(),this._getText(e),0,0,i,n,e._textAlign,e._lineAlign,e._textWrap)+e.paddingVert());return t.height=Math.min(t.height,n),t},render:function(t,e,i){var n=t.iconLocation()!=Fs.CENTER?this._getText(t):null;Gc.renderBitmapText(t,n,e,i)},_getClickSource:function(){return Kc.LINKABLE_CELL},_getClickData:function(t){return this._getUrl(t)},isShowTooltip:function(){return this._showTooltip||this._showUrl},getTooltip:function(t,e){if(this._showUrl){if(!(e&&t.grid().getItem(e._itemIndex)instanceof Ar))if(t instanceof Xh){e=t.index().clone();var i=t.item();if(!(i=i instanceof Ar?i:(i instanceof zh?i.parent():i).firstItem()))return null;e.setItemIndex(i.index())}else e=t.index();return this._getUrl(e)}return null},_getUrl:function(t){if(this._url)return this._urlRuntime.setIndex(t),this._urlStatement.evaluate(this._urlRuntime);if(this._urlField){t=t.item();if(t){var e=t.dataSource();if(e){e=e.getFieldIndex(this._urlField);if(0<=e)return t.getData(e)}}}return null},getCursor:function(t){return this._getUrl(t)?this._cursor:null}})),Xc=e("ImageButtonCellRenderer",Kc,{init:function(){this._super()},imageUrl:null,disabledUrl:null,hoverUrl:null,activeUrl:null,text:"Click",hoverText:void 0,disabledText:void 0,enabledExpression:null,cursor:null,tooltip:null,downOffset:V,ptInButton:function(t,e,i){var n,s=t._grid||t.grid(),r=this._hoverUrl||this._imageUrl,s=s.getImage(r),r=t.inflatePadding(t._getRenderRect());if(s&&this._rect)return t=r.x+(r.width-s.width)/2,r=r.y+(r.height-s.height)/2,n=t+s.width,s=r+s.height,t<=e&&r<=i&&e<=n&&i<=s},ptInButtonIndex:function(t,e,i){return this.ptInButton(t,e,i)?0:-1},isButton:function(){return!0},prepare:function(t){this._inited||(t.getImage(this._imageUrl),t.getImage(this._disabledUrl),t.getImage(this._hoverUrl),t.getImage(this._activeUrl),this._inited=!0)},render:function(t,e,i){var n,s,r,o=t.grid(),a=this._text||this._getText(t),h=(i=this._rect.copy(i),t.inflatePadding(i),this._imageUrl),h=(t.isPressed()?h=this._activeUrl:t.isHovered()&&(h=this._hoverUrl),o.getImage(h)||o.getImage(this._imageUrl));h&&0<(o=h.width)&&0<(r=h.height)&&(n=B(i.x+(i.width-o)/2),s=B(i.y+(i.height-r)/2),e.drawImage(h,n,s,o,r)),Lc.renderWrapText(t,e,i.x,i.y,i.width,i.height,a)},getCursor:function(t){return isNaN(t)?null:this._cursor},getTooltip:function(t,e,i){return null==i||i<0||!this._tooltip?this._super(t,e):this._tooltip}}),qc=e("ImageButtonsCellRenderer",Kc,{init:function(){this._super(),this._inited=!1,this._images=[],this._count=0,this._imagePoints=[],this._imageGap=2,this._margin=2,this._showText=null,this._imageHeight=null,this._buttonWidth=0,this._hoveredUnderline=!1},imageWidth:16,imageHeight:null,imageUrls:[],margin:null,imageGap:null,images:[],alignment:D.FAR,lineAlignment:D.CENTER,width:0,height:14,showText:!0,assign:function(t){this._super(t),null!=this._images?this.setImageUrls(this._images):(this._imageUrls=[],this._imagePoints=[],this._count=0)},setImages:function(t){this._images!=t&&(this._images=t)},canEditable:function(){return this._alignment===D.FAR||this._alignment===D.NEAR},isClickable:function(t){return!1},setHeight:function(t){this._imageHeight!=t&&(this._imageHeight=t)},isButton:function(){return!0},setImageUrls:function(t){if(t){t=t&&k(t)?t:[t],this._count=t.length,this._imageUrls=[],this._images=[],this._imagePoints=[0];for(var e=0,i=0;i<this._count;i++){var n,s=t[i],r={};for(n in s)if(s.hasOwnProperty(n))for(var o in _s)if(_s[o]==n){r[n]=s[n];break}this._imageUrls.push(r),e+=a=(s.hasOwnProperty("width")&&!isNaN(s.width)?parseInt(s.width):this._imageWidth)+(i<this._count-1?this._imageGap:0);var a={name:s.name,width:a,cursor:s.cursor,tooltip:s.tooltip};this._imagePoints.push(e),this._images.push(a)}this._buttonWidth=Math.max(e+this._margin,isNaN(this._width)?0:this._width)}else this._count=0,this._imageUrls=null,this._images=null;this._inited=!1},setAlignment:function(t){this._alignment!=t&&(this._alignment=t)},prepare:function(t){if(!this._inited){for(var e=0;e<this._count;e++)for(var i in this._imageUrls[e])t.getImage(this._imageUrls[e][i]);this._inited=!0}},ptInButton:function(t,e,i){return-1!=this.ptInButtonIndex(t,e,i)},ptInButtonIndex:function(t,e,i){var n,s,r;return!t._getButtonVisible(t.index().column().buttonVisibility())||(e-=this.$_getButtonX(t.width(),this._buttonWidth))<0?-1:t instanceof Xh?(s=(n=t.grid())&&n.layoutManager(),t.isFocused()?r=s&&s.getItemRect(t._mergeRoom.headItem()+t._innerIndex-n.topIndex()):t.isHovered()&&(r=s&&s.getItemRect(t._mergeRoom.headItem()+t._hoverIndex-n.topIndex())),r.y-=t.topBy(n,0),i-=r.y,this.$_buttonIndex(0,r.height,e,i)):this.$_buttonIndex(0,t.height(),e,i)},$_buttonIndex:function(t,e,i,n){if(this._imageHeight){switch(this._lineAlignment){case D.FAR:r=n>e-this._imageHeight&&n<e;break;case D.NEAR:r=0<n&&n<this._imageHeight;break;default:var s=(e-this._imageHeight)/2,r=s<n&&n<s+this._imageHeight}if(!r)return-1}for(var o=1,a=this._imagePoints.length;o<a;o++)if(this._imagePoints[o]>=i)return r=this._imagePoints[o]-(o<a-1?this._imageGap:0)>=i?o-1:-1;return-1},$_getButtonX:function(t,e){switch(this._alignment){case D.NEAR:return 0;case D.CENTER:return Math.round((t-e)/2);default:return t-e}},_doMeasure:function(t,e,i,n){e=e._getButtonVisible(e.index().column().buttonVisibility())?0<this._buttonWidth?this._buttonWidth:this._imagePoints.length<=0?0:this._imagePoints[this._imagePoints.length-1]+this._margin:0;return new l(e,n)},render:function(t,e,i){var n=this._alignment===D.FAR&&(this._showText||null==this._showText)||this._alignment===D.NEAR&&this._showText?this._getText(t):"",s=t.figureName();s&&Lc.drawEdgeMark(s,t,e,i),i=this._rect.copy(i),t.inflatePadding(i),Lc.renderWrapText(t,e,i.x,i.y,i.width,i.height,n)},doDrawButton:function(t,e,i){var n,s;this._imagePoints.length<=0||!t._getButtonVisible(t.index().column().buttonVisibility())||(n=t.index(),s=i.clone(),i=this._rect.copy(i),t.inflatePadding(i),i=this.$_getButtonX(s.width,this._buttonWidth),s.setLeft(i),this._doRender(n,e,s,t.isHovered(),t.isPressed(),t.isFocused(),t._buttonIndex))},_doRender:function(t,e,i,n,s,r,o){if(t.dataColumn()){var a=i.clone();r&&t.grid().isEditing()?(a.leftBy(2),a.rightBy(-2)):(a.leftBy(1),a.rightBy(-3));for(var h=0;h<this._count;h++)o===h?this.$_drawButton(t.grid(),e,a,h,n,s):this.$_drawButton(t.grid(),e,a,h,!1,!1)}},$_getImage:function(t,e,i,n){var s=this._images[e][i];return s||(s=t.getImage(n))&&(this._images[e][i]=s),s},$_drawButton:function(t,e,i,n,s,r){var o,a,h,r=r?_s.DOWN:s?_s.HOVER:_s.UP,s=(this._imageUrls[n][r]||this._imageUrls[n][_s.UP]&&(r=_s.UP),this.$_getImage(t,n,r,this._imageUrls[n][r])),t=this.lineAlignment();if(s&&0<(r=s.width)&&0<(o=s.height)){switch(h=parseInt(this.imageHeight())||o,t){case D.FAR:a=B(i.y+i.height-h+(h-o)/2-2);break;case D.NEAR:a=B(i.y+2+(h-o)/2);break;default:a=B(i.y+(i.height-o)/2)}t=B(i.x+1+this._imagePoints[n]);e.drawImage(s,t,a,r,o)}},getCursor:function(t){return this._images&&this._images[t]&&this._images[t].cursor},getTooltip:function(t,e,i){return!(null==i||i<0)&&this._images&&this._images[i]&&this._images[i].tooltip||this._super(t,e)}},{}),jc=e("SeriesTextCellRenderer",Lc,{init:function(){this._super()},valueSeparator:null,_getText:function(t){t=t.value();return wa.getText(t,this._valueSeparator)}}),as=(jc.Default=new jc,e("SeriesCellRenderer",Fc,{init:function(){this._super(),this.setMinWidth(100)},_getValues:function(t){return t.value()||[]}})),Zc=e("SparkChartRenderer",as,{init:function(){this._super()},baseValue:NaN,firstFill:null,lastFill:null,highFill:null,lowFill:null,belowFill:null,pointFill:null,setFirstFill:function(t){t!=this._firstFill&&(this._firstFill=d.getFill(t),this._changed())},setLastFill:function(t){t!=this._lastFill&&(this._lastFill=d.getFill(t),this._changed())},setPointFill:function(t){t!=this._PointFill&&(this._pointFill=d.getFill(t),this._changed())},setHighFill:function(t){t!=this._highFill&&(this._highFill=d.getFill(t),this._changed())},setLowFill:function(t){t!=this._lowFill&&(this._lowFill=d.getFill(t),this._changed())},setBelowFill:function(t){t!=this._belowFill&&(this._belowFill=d.getFill(t),this._changed())},render:function(t,e,i){var n=this._getValues(t);if(n&&n.length){for(var s,r,o=n.length,a=n[0],h=n[0],l=1;isNaN(a)&&l<o;)h=a=n[l++];for(;l<o;l++)s=Number(n[l]),isNaN(s)||(s<a&&(a=s),h<s&&(h=s));r=isNaN(this._baseValue)?a:this._baseValue,isNaN(a)||this._renderChart(t,e,i,n,a,h,r)}},_renderChart:function(t,e,i,n,s,r,o){},_getPoints:function(t,e,i,n,s){for(var r,o,a=i.length,h=[],l=e.x+t.paddingLeft(),d=e.width-t.paddingHorz(),u=e.y+t.paddingTop(),c=e.height-t.paddingVert(),_=s-n,f=0;f<a;f++)o=Number(i[f]),r=l+f/(a-1)*d,o=u+(isNaN(o)||0==_?c:(1-(o-n)/_)*c),h.push(r,o);return h},_getBasePoint:function(t,e,i,n,s){var r=e.height-t.paddingVert(),n=n-i;return e.y+t.paddingTop()+(isNaN(s)||0==n?r:(1-(s-i)/n)*r)}}),Jc=e("SparkLineRenderer",Zc,{init:function(){this._super()},curved:!1,_renderChart:function(t,e,i,n,s,r,o){var a=t.line();if(a){for(var h,l,d,u=isNaN(o)?r:Math.max(r,o),o=isNaN(o)?s:Math.min(s,o),c=this._getPoints(t,i,n,o,u),_=n.length,f=0;f<_-1;f++)e.drawLine(a,c[2*f],c[2*f+1],c[2*(f+1)],c[2*(f+1)+1]),(d=this.pointFill())&&(h=c[2*f],l=c[2*f+1],e.drawCircle(d,null,h,l,2));if((d=this.firstFill())&&(h=c[0],l=c[1],e.drawCircle(d,null,h,l,2)),(d=this.lastFill())&&(h=c[2*(_-1)],l=c[2*(_-1)+1],e.drawCircle(d,null,h,l,2)),d=this.highFill())for(f=0;f<_;f++)n[f]>=r&&(h=c[2*f],l=c[2*f+1],e.drawCircle(d,null,h,l,2));if(d=this.lowFill())for(f=0;f<_;f++)n[f]<=s&&(h=c[2*f],l=c[2*f+1],e.drawCircle(d,null,h,l,2))}}}),Qc=e("SparkColumnRenderer",Zc,{init:function(){this._super()},barWidth:.8,_renderChart:function(t,e,i,n,s,r,o){var a=t.figureBackground();if(a)for(var h,l,d=r,u=s,c=(isNaN(o)||(u=o,d=Math.max(o,d)),n.length),_=B(this._getBasePoint(t,i,u,d,o)),f=(i.width-t.paddingHorz())/c,m=i.height-t.paddingVert(),g=i.x+t.paddingLeft()+f/2,p=d-u,w=B(f*this._barWidth),v=0;v<c;v++)l=n[v],isNaN(l)||(h=l<=s&&this._lowFill?this._lowFill:r<=l&&this._highFill?this._highFill:l<o&&this._belowFill?this._belowFill:0==v&&this._firstFill?this._firstFill:v==c-1&&this._lastFill?this._lastFill:a,l=0==p?1:Math.max(1,B((l-u)*m/p)),e.drawBoundsI(h,null,B(g-w/2),_,w,-l)),g+=f}}),t_=e("SparkWinLossRenderer",Zc,{init:function(){this._super(),this.setBaseValue(0)},barWidth:.8,belowHeight:.4,_renderChart:function(t,e,i,n,s,r,o){var a=t.figureBackground();if(a)for(var h,l,d=n.length,u=(i.width-t.paddingHorz())/d,c=i.height-t.paddingVert(),_=i.x+t.paddingLeft()+u/2,f=i.y+t.paddingTop(),m=u*this._barWidth,g=f+c*(1-this._belowHeight),p=0;p<d;p++)l=n[p],isNaN(l)||l==o||(h=a,l<o&&this._belowFill&&(h=this._belowFill),l=l<o?f+c:f,e.drawBoundsI(h,null,B(_-m/2),B(l),B(m),B(g-l))),_+=u}}),e_=e("ActualTargetBulletRenderer",e("TargetActualRenderer",as,{init:function(){this._super(),this.setMinWidth(100)},minValue:0,maxValue:100,render:function(t,e,i){var n=this._getValues(t);2<=n.length&&this._doRender(t,e,i,n[0],n[1])},_getValueRate:function(t){return(t-this._minValue)/(this._maxValue-this._minValue)},_doRender:function(t,e,i,n,s){}}),{init:function(){this._super(),this.setMinWidth(100)},maximumBackground:null,figureBackground:null,figureBorder:null,line:null,setMaximumBackground:function(t){t!=this._maximumBackground&&(this._maximumBackground=d.getFill(t),this._changed())},_readOption:function(t,e){switch(t){case"figureBackground":if(e)return d.getFill(e);break;case"figureBorder":case"line":if(e)return d.getStroke(e)}return e},_doRender:function(t,e,i,n,s){var r,o=t.paddingLeft(),a=t.paddingTop(),h=i.width-o-t.paddingRight(),i=i.height-a-t.paddingBottom(),l=this._maximumBackground,s=(l&&e.drawBounds(l,null,o,a,h,i),this._figureBackground=t.figureBackground(),this._line=t.line(),this._figureBorder=t.figureBorder(),(l=this._getOption("figureBackground"))&&(r=i,(t=t.figureSize())&&(r=t.getDimension(i)),t=h*this._getValueRate(s),d=this._getOption("figureBorder"),e.drawBoundsI(l,d,o,a+(i-r)/2,t,r)),o+h*this._getValueRate(n)),d=this._getOption("line");e.drawLine(d=d||f.DKGRAY,s,a,s,a+i)}}),i_=e("ActualTargetTextRenderer",as,{init:function(){this._super(),this._actualForeground=g.BLACK,this._targetForeground=g.BLACK},separator:" / ",actualForeground:null,actualFont:null,targetForeground:null,targetFont:null,setActualForeground:function(t){t!=this._actualForeground&&(this._actualForeground=d.getFill(t)||g.BLACK,this._changed())},setActualFont:function(t){t!=this._actualFont&&(this._actualFont=d.getFont(t))},setTargetForeground:function(t){t!=this._targetForeground&&(this._targetForeground=d.getFill(t)||g.BLACK,this._changed())},setTargetFont:function(t){t!=this._targetFont&&(this._targetFont=d.getFont(t))},_readOption:function(t,e){switch(t){case"actualForeground":case"targetForeground":if(e)return d.getFill(e);break;case"actualFont":case"targetFont":if(e)return d.getFont(e)}return e},render:function(t,e,i){var n=this._getOption("actualFont"),s=this._getOption("targetFont"),r=this._getValues(t),o=t._numberFormatter?t._numberFormatter.format(r[0]):String(null!=r[0]?r[0]:""),r=t._numberFormatter?t._numberFormatter.format(r[1]):String(null!=r[1]?r[1]:""),a=e.getTextWidth(t.font(),this._separator),h=e.getTextWidth(this._actualFont,r),l=e.getTextWidth(this._targetFont,o),d=a+h+l,u=i.x+t.paddingLeft(),c=i.y;switch(t.textAlignment()){case D.CENTER:u=i.x+(i.width-t.paddingHorz()-d)/2;break;case D.FAR:u=i.right()-t.paddingRight()-d}""==r&&""==o||(e.drawTextBounds(n,this._getOption("actualForeground"),r,u,c,h,i.height),u+=h,e.drawTextBounds(t.font(),t.foreground(),this._separator,u,c,a,i.height),u+=a,e.drawTextBounds(s,this._getOption("targetForeground"),o,u,c,l,i.height))}});function n_(t){t.type=(t.type||"excel").toLowerCase(),"excel"===t.type?(new g_).export(t):"pdf"===t.type&&(new GridPDFExporter).export(t)}function s_(t){this.column=t,this.dataColumn=b(t,M),this.colIndex=0,this.colSpan=0,this.rowIndex=0,this.rowSpan=0,this.width=0,this.valueType="s",this.tag=void 0,this.data=void 0}function r_(t){ne(null!=t&&void 0!==t,"provider is null");var i=t,d=0,u=[],c=[],_=(this.provider=function(){return i},this.count=function(){return u.length},this.fixedCount=function(){return d},this.getItem=function(t){return u[t]},this.setItem=function(t,e){u[t]=e},this.indexOf=function(t){return u.indexOf(t)},this.clear=function(){u.length=0},function(t,e,i,n){for(var s,r=t.count(),o=0;o<r;o++)(s=t.getItem(o))&&(e.push(s),i&&s.level()<n||s.isExpanded())&&_(s,e,i,n);t.footer()&&e.push(t.footer())});this.expand=function(t,e,i){if(i=0<arguments.length?i:0,t){var n,s,r=t,o=e,a=i,h=c,l=r instanceof M_?d:r.index()+1;if(a=Math.max(0,a),h.length=0,_(r,h,o,0<a?r.level()+a:1e6),o){for(n=l,s=u.length;n<s&&!(u[n].level()<=r.level());n++);u.splice(l,n-l)}for(n=0,s=h.length;n<s;n++)u.splice(l+n,0,h[n])}},this.collapse=function(t){if(t)for(var e=t.index()+1;e<u.length&&u[e].level()>t.level();){if(u[e]==t.footer()){i.footerWhenCollapsed()||(u[e]._index=-1,u.splice(e,1));break}u[e]._index=-1,u.splice(e,1)}},this.getNext=function(t){return t&&t.isVisible()&&t.index()<this.count()-1?u[t.index()+1]:null},this.getPrior=function(t){return t&&t.isVisible()&&0<t.index()?u[t.index()-1]:null},this.insert=function(t,e){u.splice(e,0,t)},this.remove=function(t){var e=u.indexOf(t);if(0<=e&&(u.splice(e,1),t.isExpanded()))for(;e<u.length&&t.isDescendant(u[e]);)u.splice(e,1)},this._clearAndInit=function(t){this.clear(),d=Math.min(t,i.itemCount());for(var e=0;e<d;e++)u.push(i.getItem(e))}}function o_(t,e){var i=e.getBounds(),n=t.getItem(i.R1()),t=t.getItem(i.R2());return{style:e.style(),startItem:i.R1(),startRow:n?n.dataRow():-1,startColumn:i.C1().name(),endItem:i.R2(),endRow:t?t.dataRow():-1,endColumn:i.C2().name()}}function a_(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(t[i].rowId());return e}var h_=e("ColumnArray",null,{init:function(t,e,i,n,s){this._super(),this._grid=t,this._headerRows=[],this._dataRows=[],this._dataColumns=[],this._sparkColumns=[],this.$_parse(t,e,i,n,s)},destroy:function(){this._destroying=!0,this._grid=null,this._headerRows=null,this._dataRows=null,this._sparkColumns=null,this._super()},grid:function(){return this._grid},colCount:function(){return this._headerRows.length&&this._headerRows[0].length},headerRowCount:function(){return this._headerRows.length},dataRowCount:function(){return this._dataRows.length},getHeader:function(t,e){return this._headerRows[t][e]},getItem:function(t,e){return this._dataRows[t][e]},setItem:function(t,e,i){this._dataRows[t][e]=i},$_parse:function(t,e,i,n,s){var r=1,o=1,a=i||0<n.length?t._rootColumn.count():t.visibleColumnCount();if(!e)for(var h=0;h<a;h++){var l=i||0<n.length?t._rootColumn.getOrderedItem(h):t.getVisibleColumn(h);((i||l.isVisible())&&s.indexOf(l.name())<0||!l.isVisible()&&0<=n.indexOf(l.name()))&&l instanceof R&&(r=Math.max(r,l.calcHeaderLevels(!i,n,s)),o=Math.max(o,l.calcDataLevels(!i,n,s)))}for(h=0;h<r;h++)this._headerRows.push([]);for(h=0;h<o;h++)this._dataRows.push([]);this.$_parseRows(t,!0,this._headerRows,e,i,n,s),this.$_parseRows(t,!1,this._dataRows,e,i,n,s),this.$_setDataColumns(this._dataRows),this.$_setSparkInfo(this._dataRows)},$_parseRows:function(t,f,h,e,i,n,s){function m(t,e,i,n,s){for(var r,o,a=0;a<n;a++)for(r=0;r<i;r++){if((o=new s_(s)).colIndex=r,o.colSpan=i,o.rowIndex=a,o.rowSpan=n,o instanceof M)switch(s.valueType()){case S.NUMBER:o.valueType="n";break;case S.BOOLEAN:o.valueType="b";break;case S.DATETIME:o.valueType="d";break;default:o.valueType="s"}else o.valueType="s";h[e+a][t+r]=o}}var r,o=h.length,a=0,l=0;if(e)for(var d=t.getLeafColumns(!i&&0==n.length),u=0,c=d.length;u<c;u++)r=d[u],((i||r.isVisible())&&s.indexOf(r.name())<0||!r.isVisible()&&0<=n.indexOf(r.name()))&&m(l++,0,1,o,r);else for(c=i||0<n.length?t._rootColumn.count():t.visibleColumnCount(),u=0;u<c;u++)r=i||0<n.length?t._rootColumn.getOrderedItem(u):t.getVisibleColumn(u),((i||r.isVisible())&&s.indexOf(r.name())<0||!r.isVisible()&&0<=n.indexOf(r.name()))&&(r instanceof R?function t(e,i,n,s,r,o,a,h){var l,d,u,c,_=o||0<a.length?r._columns.count():r.visibleCount();if(_<1)m(e,i,n,s,r);else{if(f&&r.header().isVisible()){if(r.isHideChildHeaders())return void m(e,i,n,s,r);m(e,i,n,1,r),i++,s--}if(f&&r.isHideChildHeaders())m(e,i,n,s,r);else if(r.isVertical())for(l=0;l<_;l++)d=o||0<a.length?r.getOrderedItem(l):r.getVisibleItem(l),((o||d.isVisible())&&h.indexOf(d.name())<0||!d.isVisible()&&0<=a.indexOf(d.name()))&&(d instanceof R?(t(e,i,n,u=l<_-1?f?d.calcHeaderLevels(!o,a,h):d.calcDataLevels(!o,a,h):s,d,o,a,h),i+=u,s-=u):l<_-1?(m(e,i,n,1,d),i++,s--):m(e,i,n,s,d));else for(l=0;l<_;l++)d=o||0<a.length?r.getOrderedItem(l):r.getVisibleItem(l),((o||d.isVisible())&&h.indexOf(d.name())<0||!d.isVisible()&&0<=a.indexOf(d.name()))&&(d instanceof R?(t(e,i,c=l<_-1?d.calcHorz(!o,a,h):n,s,d,o,a,h),e+=c,n-=c):l<_-1?(m(e,i,1,s,d),e++,n--):m(e,i,n,s,d))}}(l,0,a=r.calcHorz(!i,n,s),o,r,i,n,s):m(l,0,a=1,o,r),l+=a)},$_setDataColumns:function(t){var e;this._dataColumns=[];for(var i=0,n=t.length;i<n;i++){for(var s=[],r=0,o=t[i].length;r<o;r++)e=t[i][r],s.push(e.column.name());this._dataColumns.push(s)}},$_setSparkInfo:function(t){var e,i,n;this._sparkColumns=[];for(var s=0,r=t.length;s<r;s++)for(var o=0,a=t[s].length;o<a;o++)if((i=(e=t[s][o]).column)instanceof Yl&&(n=i.rendererObj())&&n instanceof Zc){var h=i._fields,l=i.grid(),l=0<h.length&&function(t,e,i,n){var s={},r=e[0],e=e[e.length-1],o=t.columnByField(r),a=t.columnByField(e);if(!o||!a)return null;for(var o=o.name(),a=a.name(),h=0,l=n.length;h<l;h++)for(var d=0,u=n[h].length;d<u;d++)o==n[h][d]&&(s.startColumn=d,s.row=h-i),a==n[h][d]&&(s.endColumn=d);return s}(l,h,s,this._dataColumns),h=n instanceof Jc?"line":n instanceof Qc?"column":n instanceof t_?"stacked":"";if(l){var l={type:h,colors:{},sparkLines:[],refColumnInfo:l},d=l.colors;switch(n._highFill&&(d.colorHigh=n._highFill._color.toHex()),n._lowFill&&(d.colorLow=n._lowFill._color.toHex()),n._firstFill&&(d.colorFirst=n._firstFill._color.toHex()),n._lastFill&&(d.colorLast=n._lastFill._color.toHex()),h){case"line":n._pointFill&&(d.colorMarkers=n._pointFill._color.toHex()),i._styles&&i._styles.line()._color&&(d.colorSeries=i.styles().line()._color.toHex());break;case"column":case"stacked":i.styles().figureBackground()&&(d.colorSeries=i.styles().figureBackground()._color.toHex())}e.sparkLineGroup=l,this._sparkColumns[i.$_hash]=e}}}}),_n="default",l_="hidden",d_="visible",cn="default",u_=e("DocumentTitle",null,{init:function(t){"string"==typeof t?(this._message=t,this._styles=new d(null,"DocumentTitleStyle"),this.$_initStyles(),this._visible=!0,this._spaceTop=0,this._spaceBottom=0,this._height=-1):"object"==typeof t&&(this._message=t.message,this._visible=!t.hasOwnProperty("visible")||t.visible,this._styles=new d(null,"DocumentTitleStyle"),this.$_initStyles(),t.styles&&this._styles.extend(t.styles),this._spaceTop=!t.spaceTop||isNaN(parseInt(t.spaceTop))?0:parseInt(t.spaceTop),this._spaceBottom=!t.spaceBottom||isNaN(parseInt(t.spaceBottom))?0:parseInt(t.spaceBottom),this._height=!t.height||isNaN(parseInt(t.height))?-1:parseInt(t.height))},$_initStyles:function(){var t="#ff555555,1px";this._styles.borderLeft(t),this._styles.borderRight(t),this._styles.borderTop(t),this._styles.borderBottom(t)},proxy:function(){var t={message:this._message,visible:this._visible};return this._styles&&(t.styles=this._styles.toProxy()),t},message:null,visible:!0,styles:null,spaceTop:0,spaceBottom:0,height:-1}),c_=e("GridExportOptions",null,{init:function(t){this._super(),this._datetimeWriter=null,t&&this.assign(t)},target:"remote",url:void 0,fileName:null,linear:!1,allColumns:!1,allItems:!0,onlyCheckedItems:!1,pagingAllItems:!1,indicator:_n,checkBar:l_,header:_n,footer:_n,headerSummary:_n,indicatorValue:cn,checkMark:"v",indenting:!0,checkNumber:!1,datetimeFormat:void 0,nullDateText:"",datetimeCallback:null,numberFormat:void 0,numberCallback:null,booleanFormat:null,booleanCallback:null,objectCallback:null,separateRows:!1,showConfirm:!0,confirmMessage:"Excel 문서로 저장하시겠습니까?",confirmTitle:"Excel 저장",lookupDisplay:!1,textCallback:null,compatibility:!1,showLevelOutline:!0,documentTitle:null,documentSubtitle:null,documentTail:null,start:0,count:-1,showProgress:!1,progressMessage:null,applyDynamicStyles:!1,applyDefaultColumnFormat:!1,done:null,sheetName:null,exportSeriesColumn:!1,exportLink:!1,setFileName:function(t){t=$t(t),this._fileName=t},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new Fe(t):null)},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t)},isIndicatorVisible:function(t){if(t)switch(this._indicator){case d_:return!0;case l_:return!1;default:return t.indicator().isVisible()}return!1},isCheckBarVisible:function(t){if(t)switch(this._checkBar){case d_:return!0;case l_:return!1;default:return t.checkBar().isVisible()}return!1},isHeaderVisible:function(t){if(t)switch(this._header){case d_:return!0;case l_:return!1;default:return t.header().isVisible()}return!1},isHeaderSummaryVisible:function(t){if(t)switch(this._headerSummary){case d_:return!0;case l_:return!1;default:return t.header().summary().isVisible()}return!1},isFooterVisible:function(t){if(t)switch(this._footer){case d_:return!0;case l_:return!1;default:return t.footer().isVisible()}return!1},isIndicatorDataRow:function(t){if(t)switch(this._indicatorValue){case"item":return!1;case"row":return!0;default:return t.indicator().displayValue()==bs.ROW}return!1},setDocumentTitle:function(t){this._documentTitle=t?new u_(t):null},setDocumentSubtitle:function(t){this._documentSubtitle=t?new u_(t):null},setDocumentTail:function(t){this._documentTail=t?new u_(t):null},assign:function(t){this._super(t),this._fileName&&(t="csv"===this._type?".csv":".xlsx",this._fileName.indexOf(".")<0)&&(this._fileName+=t)}}),__=e("DataProviderExportOptions",null,{init:function(t){this._super(!0),this._datetimeWriter=null,t&&this.assign(t)},target:"remote",url:void 0,fileName:null,datetimeFormat:void 0,nullDateText:"",datetimeCallback:null,numberFormat:void 0,numberCallback:null,booleanFormat:null,booleanCallback:null,objectCallback:null,textCallback:null,start:0,count:-1,done:null,lfText:null,crText:null,seperator:null,exportFields:null,hideFields:null,includeFieldNames:!1,setFileName:function(t){t=$t(t),this._fileName=t},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new Fe(t):null)},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new Me(t):null)},assign:function(t){this._super(t),this._fileName&&(t="csv"===this._type?".csv":".xlsx",this._fileName.indexOf(".")<0)&&(this._fileName+=t)}}),f_=e("GridExportGridOptions",null,{init:function(t){this._super(!0),this._datetimeWriter=null,this._showColumns=[],this._hideColumns=[],t&&this.assign(t)},destroy:function(){this._grid=null,this._super()},grid:null,linear:!1,allColumns:!1,allItems:!0,onlyCheckedItems:!1,pagingAllItems:!1,indicator:_n,checkBar:l_,header:_n,footer:_n,headerSummary:_n,indicatorValue:cn,checkMark:"v",indenting:!0,checkNumber:!1,datetimeFormat:void 0,nullDateText:"",datetimeCallback:null,numberFormat:void 0,numberCallback:null,booleanFormat:null,booleanCallback:null,objectCallback:null,textCallback:null,separateRows:!1,showConfirm:!0,lookupDisplay:!1,compatibility:!1,showLevelOutline:!0,documentTitle:null,documentSubtitle:null,documentTail:null,start:0,count:-1,showProgress:!1,progressMessage:null,applyDynamicStyles:!1,applyDefaultColumnFormat:!1,applyFitStyle:!1,sheetName:null,exportSeriesColumn:!1,showColumns:null,hideColumns:null,exportLink:!1,setGrid:function(t){this._grid=t instanceof T?t:t._gv},setDatetimeFormat:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},setBooleanFormat:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new Fe(t):null)},setNumberFormat:function(t){t!=this._numberFormat&&(this._numberFormat=t)},isIndicatorVisible:function(t){if(t)switch(this._indicator){case d_:return!0;case l_:return!1;default:return t.indicator().isVisible()}return!1},isCheckBarVisible:function(t){if(t)switch(this._checkBar){case d_:return!0;case l_:return!1;default:return t.checkBar().isVisible()}return!1},isHeaderVisible:function(t){if(t)switch(this._header){case d_:return!0;case l_:return!1;default:return t.header().isVisible()}return!1},isHeaderSummaryVisible:function(t){if(t)switch(this._headerSummary){case d_:return!0;case l_:return!1;default:return t.header().summary().isVisible()}return!1},isFooterVisible:function(t){if(t)switch(this._footer){case d_:return!0;case l_:return!1;default:return t.footer().isVisible()}return!1},isIndicatorDataRow:function(t){if(t)switch(this._indicatorValue){case"item":return!1;case"row":return!0;default:return t.indicator().displayValue()==bs.ROW}return!1},setDocumentTitle:function(t){this._documentTitle=t?new u_(t):null},setDocumentSubtitle:function(t){this._documentSubtitle=t?new u_(t):null},setDocumentTail:function(t){this._documentTail=t?new u_(t):null},setShowColumns:function(t){this._showColumns=t?k(t)&&0<t.length?t:[t]:[]},setHideColumns:function(t){this._hideColumns=t?k(t)&&0<t.length?t:[t]:[]}}),m_=e("GridExportOptions2",null,{init:function(t){this._super(!0),t&&this.assign(t),this._progressMessage=this.progressMessage()||"Exporting..."},destroy:function(){this._super()},target:"remote",url:void 0,fileName:null,showProgress:!1,progressMessage:null,progressMax:0,prepareProgress:10,done:null,exportGrids:null,params:null,assign:function(t){for(var e=t.exportGrids,i=new f_,n=0,s=e.length;n<s;n++){var r,o=e[n];for(r in t)this.hasOwnProperty("_"+r)||o.hasOwnProperty(r)||!i.hasOwnProperty("_"+r)||(o[r]=t[r])}this._super(t)},setFileName:function(t){(t=$t(t))&&t.indexOf(".")<0&&(t+=".xlsx"),this._fileName=t},setExportGrids:function(t){t=k(t)?t:[t];for(var e=this._exportGrids=[],i=0,n=t.length;i<n;i++){var s=new f_(t[i]);e.push(s)}}}),g_=e("GridExcelExporter2",null,{init:function(){this._super(),this._runStyles=new d,this._seriesCell=new wa},destroy:function(){this._destroying=!0,this._runStyles=null,this._seriesCell=null,this._progressGrid=null,this._super()},setProgress:function(t){var e=this._progressGrid;e&&e.setExportProgress(this._progressMax,t+this._options.prepareProgress(),this._options.progressMessage())},$_setOptions:function(t){for(var e,i=this._exportGrids=[],n=0,s=(t=k(t)?t:[t]).length;n<s;n++)(e=t[n])&&e.grid instanceof T&&i.push(e)},$_prepareCount:function(t){for(var e,i,n=0,s=0,r=t.length;s<r;s++){if(o=null,e=(i=t[s]).grid(),this._progressGrid=Q!=e&&this._progressGrid||e,e instanceof Uu)if(i.isAllItems()&&e.isRowGrouped()){var o=e.getAllItems(),a=e.layoutManager().fixedItemCount();if(0<a)for(s=0;s<a;s++)o.splice(s,0,e.getItem(s))}else i.isPagingAllItems()&&e.isPaged()?o=e.getPagingAllItems():i.isOnlyCheckedItems()&&!e.isRowGrouped()&&(o=e.getCheckedItems());else e instanceof X_&&i.isAllItems()&&(o=e.getAllItems());n+=o?o.length:e.itemCount()}return n},export:function(r){function t(t){var e,i=gt(),n=(_t("E X C E L: buildBook "+(o=i-o)),o=i,a.createParts()),i=gt(),s=(_t("E X C E L: createParts "+(o=i-o)),o=i,[]);for(e in n)s.push({key:e,body:n[e]});t.$_export(s,r),i=gt(),_t("E X C E L: zip "+(o=i-o)),o=i,r._done&&"file"!==r.target()&&"string"!==r.target()&&"function"==typeof r._done&&r._done(),t.destroy&&t.destroy(),a&&a.destroy&&a.destroy()}var o=gt();if(r){this._options=r=r instanceof m_?r:new m_(r);var e=this._exportGrids=r._exportGrids;this._currentGridIndex=0;if(e&&!(e.length<=0)){var a=new Yi;if(r.isShowProgress())this._allCount=this.$_prepareCount(r._exportGrids),this._progressMax=this._allCount+this._options.prepareProgress(),this._progressPos=0,this._progressStep=Math.max(B(this._allCount/10),1),this._progressGrid&&this._progressGrid.beginExportProgress(this._options.progressMessage()),this.setProgress(this._progressPos),this._currentGridIndex<this._exportGrids.length&&setTimeout(function(){this.$_exportGridAsync(a,function(){this._progressGrid&&this._progressGrid.endExportProgress(),t(this)}.bind(this))}.bind(this),0);else{for(var i=0,n=e.length;i<n;i++)this.$_exportGrid(a,e[i]);t(this)}}}},$_exportGridAsync:function(t,e){this._currentGridIndex<this._exportGrids.length?this.$_exportGrid(t,this._exportGrids[this._currentGridIndex++],function(){setTimeout(function(){this.$_exportGridAsync(t,e)}.bind(this),0)}.bind(this)):e()},$_exportGrid:function(t,e,i){var n=e.grid(),s={grid:n,options:e,indicator:e.isIndicatorVisible(n)?n.indicator():null,header:e.isHeaderVisible(n)?n.header():null,headerSummary:e.isHeaderSummaryVisible(n)?n.header().summary():null,footer:e.isFooterVisible(n)?n.footer():null,colArr:new h_(n,e.isLinear(),e.isAllColumns(),e.showColumns(),e.hideColumns()),numberFormatId:0,textFormatId:49,dateFormatId:14,columnStyles:{},columnWrapStyles:{},fixedStyles:void 0,fixedWrapStyles:void 0,allItems:null,indicatorHead:n.indicator().headText()||"No",indicatorFoot:n.indicator().footText()||"",indicatorSummary:n.indicator().summaryText(),compatibility:e.isCompatibility(),showLevelOutline:e.isShowLevelOutline(),rowGrouped:!1,rowLevels:0,indents:0,indentWidth:3,indicatorStyle:void 0,indentHeadStyle:void 0,indentHeadSummaryStyle:void 0,indentFootStyle:void 0,columnMerged:!1,mergeHeads:{},excelFormulaRuntime:new bc,defHt:n._displayOptions.rowHeight()||n._layoutManager._heightMeasurer.$_calcItemHeights(n,n.getDataLevel()),sheetName:e.sheetName()};if(s.defHt&&s.colArr&&(s.defHt=.75*s.defHt/s.colArr.dataRowCount()),n instanceof Uu){if(e.isAllItems()&&n.isRowGrouped()){s.allItems=n.getAllItems();var r=n.layoutManager().fixedItemCount();if(0<r)for(var o=0;o<r;o++)s.allItems.splice(o,0,n.getItem(o))}else e.isPagingAllItems()&&n.isPaged()?s.allItems=n.getPagingAllItems():e.isOnlyCheckedItems()&&!n.isRowGrouped()&&(s.allItems=n.getCheckedItems());this.$_buildSheet(t,s,i)}else n instanceof X_&&(e.isAllItems()&&(s.allItems=n.getAllItems()),this.$_buildTreeSheet(t,s,i))},$_createStyles:function(t,e,i,n,s,r){i=null==i||i,n=null==n||n,s=null==s||s,r=null!=r&&r;var o,a=e.numberFormat(),h=(a&&"string"==typeof a&&0<=a.indexOf(";")&&(a=a.split(";")[0]),e.datetimeFormat());if(a&&0<a.length?d=ExcelFormatConverter.convertNumberFormat(a):h&&(d=ExcelFormatConverter.convertDateFormat(h)),d&&((a=e.prefix())&&(d='"'+a+'"'+d),h=e.suffix(),o=t.addNumberFormat(d=h?d+'"'+h+'"':d)),s){var l=new oi,a=e.background();if(a instanceof An)switch(l.gradient="linear",l.color=a._colors[0].toColorHex(),l.color2=a._colors[1].toColorHex(),l.tint=1-a._colors[0]._a,a._angle){case 90:l.degree="90";break;case 45:l.degree="45";break;default:l.degree="0"}else l.patternType="solid",l.color=a._color.toColorHex(),l.tint=1-a._color._a;t.addFill(l)}var h=null,d=(i&&((h=new ai).right=e.borderRight(),h.bottom=e.borderBottom(),h.left=e.borderLeft(),h.top=e.borderTop(),t.addBorder(h)),null),u=(r?((d=new ri).name=e.fontFamily(),d.size=72*e.fontSize()/96,d.color="0000ff",d.underline=!0,t.addFont(d)):n&&((d=new ri).name=e.fontFamily(),d.size=72*e.fontSize()/96,d.color=e.foreground()._color.toColorHex(),d.bold=e.fontBold(),d.italic=e.fontItalic(),t.addFont(d)),new hi);switch(u.fill=l,u.border=h,u.font=d,o&&(u.formatId=o),e.textAlignment()){case D.CENTER:u.horzAlign=hi.ALIGN_CENTER;break;case D.FAR:u.horzAlign=hi.ALIGN_FAR;break;default:u.horzAlign=hi.ALIGN_NEAR}switch(e.lineAlignment()){case D.CENTER:u.vertAlign=hi.VALIGN_CENTER;break;case D.FAR:u.vertAlign=hi.VALIGN_FAR;break;default:u.vertAlign=hi.VALIGN_NEAR}return u},$_addStyle:function(t,e,i,n,s){var r=this.$_createStyles(t,e,i=!(2<arguments.length)||i,n=!(3<arguments.length)||n,s=!(4<arguments.length)||s);return t.addStyle(r),r},$_addStyle2:function(t,e){return t.addStyle(e),e},$_buildSheet:function(t,e,i){var n=e.grid,s=e.allItems,s=s?s.length:n.itemCount(),r=new Ki(t),o=(r._id=t.getRelationshipId(),r._sheetName=e.sheetName||r._sheetName,t.sheets().push(r),e.sheet=r,e.rowGrouped=n.isRowGrouped(),e.mergedGrouped=n.isMergedRowGrouped(),e.rowGrouped&&(e.rowLevels=n.rowGroupLevels()),e.start=0,n.isRowGrouped()||(e.start=0<e.options.start()?e.options.start():0,s=!(0<(r=0<e.options.count()?e.options.count():s))||e.start+r>s?s-e.start:r),e.last=e.start+s,this.$_prepareFormats(t,e),this.$_prepareStyles(t,e),this.$_buildColumns(t,e),0),o=(o=(o+=this.$_buildDocumentTitle(t,e,o,0))+(e.header?this.$_buildHeader(t,e,o,0):0))+(e.headerSummary?this.$_buildHeaderSummary(t,e,o,0):0);this._options.isShowProgress()?o+=this.$_buildItemsAsync(t,e,o,0,function(){o=e.row,o=(o+=e.footer?this.$_buildFooter(t,e,o,0):0)+this.$_buildDocumentTail(t,e,o,0),i()}.bind(this)):o=(o=(o+=this.$_buildItems(t,e,o,0))+(e.footer?this.$_buildFooter(t,e,o,0):0))+this.$_buildDocumentTail(t,e,o,0)},$_buildTreeSheet:function(t,e,i){var n,s=e.grid,r=(e.rowLevels=s.getLevels(),new Ki(t)),o=(r._id=t.getRelationshipId(),r._sheetName=e.sheetName||r._sheetName,t.sheets().push(r),e.sheet=r,this.$_prepareFormats(t,e),this.$_prepareStyles(t,e),this.$_buildColumns(t,e),e.start=0,e.last=e.allItems?e.allItems.length:s.itemCount(),0),o=(o=(o+=this.$_buildDocumentTitle(t,e,o,0))+(e.header?this.$_buildTreeHeader(t,e,o,0):0))+(e.headerSummary?this.$_buildTreeHeaderSummary(t,e,o,0):0);this._options.isShowProgress()?o+=(n=this).$_buildTreeItemsAsync(t,e,o,0,function(){o=e.row,e.footer&&(o+=n.$_buildTreeFooter(t,e,o,0)),o+=n.$_buildDocumentTail(t,e,o,0),i()}):(o+=this.$_buildTreeItems(t,e,o,0),e.footer&&(o+=this.$_buildTreeFooter(t,e,o,0)),o+=this.$_buildDocumentTail(t,e,o,0))},$_buildTreeHeader:function(t,e,i,n){return this.$_buildHeader(t,e,i,n)},$_buildTreeHeaderSummary:function(t,e,i,n){return this.$_buildSummary(t,!1,e,i,n)},$_buildTreeFooter:function(t,e,i,n){return this.$_buildSummary(t,!0,e,i,n)},$_buildTreeItemsAsync:function(t,e,i,n,s){var r=e.grid,r=e.options.isIndicatorDataRow(r);this.$_buildTreeItemAsync(t,e,i,n,r,0,s)},$_buildTreeItems:function(t,e,i,n){for(var s=e.grid,r=e.options.isIndicatorDataRow(s),o=i,a=0;a<e.last;a++){var h=e.allItems?e.allItems[a]:s.getItem(a);if(!(h instanceof L))throw"Unkonw tree item type";o+=this.$_buildTreeItem(t,e,h,r?h.dataRow():a+1,o,n)}return o-i},$_buildTreeItemAsync:function(t,e,i,n,s,r,o){for(var a=r+Math.min(this._progressStep,e.last-r),h=r;h<a;h++){var l=e.allItems?e.allItems[h]:e.grid.getItem(h);if(!(l instanceof L))throw"Unkonw tree item type";i+=this.$_buildTreeItem(t,e,l,s?l.dataRow():h+1,i,n),this._progressPos+=1}e.row=i,this.setProgress(this._progressPos),(r=a)>=e.last?o():setTimeout(function(){this.$_buildTreeItemAsync(t,e,i,n,s,r,o)}.bind(this),0)},$_buildTreeItem:function(t,e,i,n,s,r){e.grid;var o,a=e.sheet,h=e.colArr,l=h.dataRowCount(),d=h.colCount(),u=e.columnStyles,c=e.indents,_=i.level(),f=e.defHt;e.indicator&&(r+=this.$_buildIndicatorCell(t,e,n,s,r,l));for(var m=0;m<l;m++){var g=s+m,p=0<c?r+_-1:r,w=u[(y=(C=h.getItem(m,0)).column).$_hash],v=0<c?c-_+1:0;if(0<C.colIndex||0<C.rowIndex)for(a.addBlank(g,p,w),o=0;o<v;o++)a.addBlank(g,1+o+p,w);else{for(this.$_buildValueCell(t,e,g,p,i,y,m,r),o=0;o<v;o++)a.addBlank(g,1+o+p,w);a.addMerge(g,p,C.rowSpan,C.colSpan+v)}for(p=0<c?r+c:r,a.addRow(g,f),o=1;o<d;o++){var C,y,x=o+p,w=u[(y=(C=h.getItem(m,o)).column).$_hash];0<C.colIndex||0<C.rowIndex?a.addBlank(g,x,w):(this.$_buildValueCell(t,e,g,x,i,y,m,r),(1<C.rowSpan||1<C.colSpan)&&a.addMerge(g,x,C.rowSpan,C.colSpan))}!e.compatibility&&e.showLevelOutline&&a.setRowLevel(s,i.level())}return l},$_prepareFormats:function(t,e){var i=e.options,n=i.numberFormat();"number"==typeof n||0<B(n)?e.numberFormatId=B(n):n&&(e.numberFormatId=t.addNumberFormat(ExcelFormatConverter.convertNumberFormat(n))),"number"==typeof(n=i.datetimeFormat())||0<B(n)?e.dateFormatId=B(n):n&&(e.dateFormatId=t.addNumberFormat(n))},$_prepareStyles:function(o,t){function e(t,e,i){if(e instanceof M){var n=u.getField(e.dataIndex()),s=i.options.isExportLink()&&e.rendererObj()instanceof Yc&&!e.excelFormat();if(n){var r=e.excelFormat();if("number"==typeof r||0<B(r))t.formatId=r;else if(s)t.formatId=0;else switch(n.dataType()){case S.TEXT:t.formatId=r?o.addNumberFormat(r):t.formatId||i.textFormatId;break;case S.NUMBER:t.formatId=r?o.addNumberFormat(r):t.formatId||i.numberFormatId;break;case S.DATETIME:t.formatId=r?o.addNumberFormat(r):t.formatId||i.dateFormatId}}}}for(var i,n=t.colArr,s=!1,r=n.colCount(),a=t.columnStyles,h=t.columnWrapStyles,l=t.grid,d=l.layoutManager().fixedItemCount(),u=l.dataSource(),c=t.options,_=o,f=0,m=n.dataRowCount();f<m;f++)for(var g=0;g<r;g++){var p,w,v,C,y=n.getItem(f,g);0==y.colIndex&&0==y.rowIndex&&(p=y.column,w=t.options.isExportLink()&&p.rendererObj()instanceof Yc&&!p.excelFormat(),p)&&!a[p.$_hash]&&((v=l._body._runtimeStyles2).clearValues(),l._body._fixedIgnoreColumn&&p.isFixed()||v.assign(p.styles()),p.isFixed()&&!l._body._fixedIgnoreColumn&&v.setParent(l._body._fixedStyles,!1),v._sysDefault=(p.isFixed()?l._body._fixedStyles:l._body._bodyStyles)._sysDefault,e(C=this.$_createStyles(_,v,null,null,null,w),p,t),C=this.$_addStyle2(_,C),a[p.$_hash]=C,e(i=this.$_createStyles(_,v,null,null,null,w),p,t),i.wrapText=!0,i=this.$_addStyle2(_,i),h[p.$_hash]=i,c.isSeparateRows()||c.isOnlyCheckedItems()&&!l.isRowGrouped()||0!==y.rowIndex||y.rowSpan!==n.dataRowCount()||(!(C=p.stateFor(Wh.MERGE_ROOMS))&&p._mergeRule&&(C=new Wh(p),p.setState(Wh.MERGE_ROOMS,C),C.clear(),C.initialize(l.itemCount()-1)),C&&p.canMerge&&p.canMerge()&&(C.refresh(d,l.itemCount()-1),s=!0)),v=null)}if(t.columnMerged=s,t.fixedStyles=this.$_addStyle(_,l.fixedOptions().styles()),(i=this.$_createStyles(_,l.fixedOptions().styles())).wrapText=!0,this.$_addStyle2(_,i),t.fixedWrapStyles=i,l instanceof Uu&&l.isRowGrouped()){var x=l.rowGroup(),I=(t.rowGroupHeadStyle=this.$_addStyle(_,x.headStyles()),t.rowGroupFootStyle=this.$_addStyle(_,x.footStyles()),t.headerBarStyle=this.$_addStyle(_,x.headerBarStyles(),!1),t.groupBarStyle=this.$_addStyle(_,x.headerStyles(),!1),t.rowGroupHeaderStyle=this.$_addStyle(_,x.headerStyles(),!1),t.rowGroupFooterStyle=this.$_addStyle(_,x.footerStyles(),!0),t.rowGroupBarStyle=this.$_addStyle(_,x.barStyles()),t.rowGroupHeaderStyles=[],t.rowGroupFooterStyles=[],t.rowGroupHeaderBarStyles=[],t.rowGroupFooterBarStyles=[],t.rowGroupBarStyles=[],x.levels());if(I&&k(I)&&0<I.length)for(var b=0,E=t.rowLevels,R=I.length-1;b<E;b++)t.rowGroupHeaderStyles.push(this.$_addStyle(_,I[Math.min(b,R)].headerStyles(),!1)),t.rowGroupFooterStyles.push(this.$_addStyle(_,I[Math.min(b,R)].footerStyles(),!0)),t.rowGroupBarStyles.push(this.$_addStyle(_,I[Math.min(b,R)].barStyles())),t.rowGroupHeaderBarStyles.push(this.$_addStyle(_,I[Math.min(b,R)].headerBarStyles(),!1)),t.rowGroupFooterBarStyles.push(this.$_addStyle(_,I[Math.min(b,R)].footerBarStyles(),!0))}},$_buildColumns:function(t,e){var i,n,s,r=e.grid,o=r.layoutManager(),a=e.options,h=t,l=e.colArr,d=1,u=[];if(e.indicator&&(n=e.indicatorStyle=this.$_addStyle(h,e.indicator.styles()),(s=new li).index=d++,s.width=Yt(r.indicator().minWidth()/7),u.push(s)),a.isIndenting()&&(e.rowGrouped&&!e.mergedGrouped?e.indents=e.rowLevels-(r.rowGroup().expandedAdornments()===A.SUMMARY?0:1):r instanceof X_&&(e.indents=e.rowLevels-1),e.indents)){for(i=0;i<e.indents;i++)(s=new li).width=Math.max(e.indentWidth,1),s.index=d++,u.push(s);e.indentHeadStyle=this.$_addStyle(h,r.header().styles()),e.indentHeadSummaryStyle=this.$_addStyle(h,r.header().summary().styles()),e.indentFootStyle=this.$_addStyle(h,r.footer().styles())}for(var c=l.colCount(),_=new Array(c),f=0;f<l._dataRows.length;f++)for(var m,g,p,w=0;w<c;w++)0===(p=l._dataRows[f][w]).colIndex&&1===p.colSpan&&null==_[w]&&(m=p.column,g=Yt((a.isApplyFitStyle()?m.displayWidth():m.groupWidth()||m.width())/7),isNaN(g)&&a.isApplyFitStyle()&&(g=o._doFitColumnWidth(m,!1,m.minWidth(),m.maxWidth(),!0),g=(isNaN(g)?m.width():g)/7),_[w]=g);for(i=0;i<c;i++){m=(p=l.getItem(0,i)).column,(s=new li).index=d++,(s.width=_[i])||(s.width=Yt((a.isApplyFitStyle()?m.displayWidth():m.groupWidth()||m.width())/7),isNaN(s.width)&&a.isApplyFitStyle()&&(v=o._doFitColumnWidth(m,!1,m.minWidth(),m.maxWidth(),!0),s.width=(isNaN(v)?m.width():v)/7));var v=r.dataSource(),C=m instanceof M?v.getField(m.dataIndex()):null,y=m instanceof M?m.excelFormat():null;if(null!=C&&(y||a._applyDefaultColumnFormat)){if(n=this.$_createStyles(h,m.styles(),!1,!0,!1),"number"==typeof y||0<B(y))n.formatId=y;else switch(C.dataType()){case S.TEXT:n.formatId=y?t.addNumberFormat(y):n.formatId||e.textFormatId;break;case S.NUMBER:n.formatId=y?t.addNumberFormat(y):n.formatId||e.numberFormatId;break;case S.DATETIME:n.formatId=y?t.addNumberFormat(y):n.formatId||e.dateFormatId}this.$_addStyle2(h,n),s.style=n}u.push(s)}e.sheet.setColumns(u)},$_buildDocumentTitle:function(t,e,i,n){e.grid;var s=e.options,r=e.sheet,o=r._columns.length,a=i;if((e=s.documentTitle())&&e._visible){a+=e.spaceTop();var h=e.message(),l=this.$_createStyles(t,e.styles());h&&h.match(lt)&&(l.wrapText=!0),this.$_addStyle2(t,l),r.addText(a,n,h,l,e.height()),r.addMerge(a,n,1,o);for(var d=1;d<o;d++)r.addBlank(a,n+d,l);a++,a+=e.spaceBottom()}if((e=s.documentSubtitle())&&e._visible){a+=e.spaceTop();h=e.message();l=this.$_createStyles(t,e.styles()),h&&h.match(lt)&&(l.wrapText=!0),this.$_addStyle2(t,l),r.addText(a,n,h,l,e.height()),r.addMerge(a,n,1,o);for(d=1;d<o;d++)r.addBlank(a,n+d,l);a++,a+=e.spaceBottom()}return a-i},$_buildDocumentTail:function(t,e,i,n){e.grid;var s=e.options,r=e.sheet,o=r._columns.length,a=i;if((e=s.documentTail())&&e._visible){a+=e.spaceTop();var s=e.message(),h=this.$_createStyles(t,e.styles());s&&s.match(lt)&&(h.wrapText=!0),this.$_addStyle2(t,h),r.addText(a,n,s,h,e.height()),r.addMerge(a,n,1,o);for(var l=1;l<o;l++)r.addBlank(a,n+l,h);a++,a+=e.spaceBottom()}return a-i},$_buildHeader:function(t,e,i,n){var s,r,o,a=e.grid,h=t,l=e.sheet,d=e.colArr,u=d.colCount(),c=d.headerRowCount(),_=(_=Math.max(a._header.realHeight(),a._header.minHeight()*c))&&.75*_/c,f=e.indents;if(e.indicator){if(w=this.$_addStyle(h,a.indicator().headStyles()),l.addText(i,n,e.indicatorHead,w),1<c){for(s=1;s<c;s++)l.addBlank(i+s,n,w);l.addMerge(i,n,c,1)}n++}if(0<f){for(o=0;o<f;o++){for(s=0;s<c;s++)l.addBlank(s+i,o+n,e.indentHeadStyle);l.addMerge(i,o+n,c,1)}n+=f}for(s=0;s<c;s++)for(l.addRow(r=i+s,_),o=0;o<u;o++){var m=d.getHeader(s,o),g=m.column,p=o+n;if(0<m.colIndex||0<m.rowIndex)l.addBlank(r,p,w);else{var g=g.header(),w=this.$_createStyles(h,g.styles()),v=g.displayText(),C=g.subText(),g=g.subTextLocation();if(C)switch(g){case Os.NONE:case Os.DEFAULT:break;case Os.LEFT:case Os.LEFT_FILL:v=C+" "+v;break;case Os.RIGHT:case Os.RIGHT_FILL:v=v+" "+C;break;case Os.UPPER:case Os.UPPER_FILL:v=C+"\r\n"+v;break;case Os.LOWER:case Os.LOWER_FILL:default:v=v+"\r\n"+C}v&&v.match(lt)&&(w.wrapText=!0),this.$_addStyle2(h,w),l.addText(r,p,v,w),(1<m.rowSpan||1<m.colSpan)&&l.addMerge(r,p,m.rowSpan,m.colSpan)}}return c},$_buildSummary:function(t,e,o,i,n){function s(t,e,i,n,s){var n=l.getCell(h.getIndex(-1,i),n),r=n.value();r instanceof Date?!o.options._datetimeCallback||(r=o.options._datetimeCallback(-1,i.name(),r))instanceof Date?c.addDate(t,e,r,s,void 0,void 0,o.compatibility):c.addText(t,e,r,s):isNaN(r)?void 0===r||"number"==typeof r?c.addText(t,e,n.displayText()||"",s):c.addText(t,e,r||"",s):c.addNumber(t,e,r,s)}var r,a,h=o.grid,l=e?h.footer():h.header().summary(),d=e?h.footerMergeManager():h.headerSummaryMergeManager(),u=t,c=o.sheet,_=o.colArr,f=_.colCount(),m=_.dataRowCount(),g=o.indents,p=l.count(),w=p*m,v=(v=l.realHeight())&&.75*v/w;if(o.indicator){if(b=this.$_addStyle(u,e?h.indicator().footStyles():h.indicator().summaryStyles()),c.addText(i,n,e?o.indicatorFoot:o.indicatorSummary,b),1<m||1<p){for(r=1;r<w;r++)c.addBlank(i+r,n,b);c.addMerge(i,n,w,1)}n++}if(0<g){for(a=0;a<g;a++){for(r=0;r<w;r++)c.addBlank(r+i,a+n,e?o.indentFootStyle:o.indentHeadSummaryStyle);c.addMerge(i,a+n,w,1)}n+=g}for(var C=i,y=0;y<p;y++)for(r=0;r<m;r++){for(c.addRow(C,v),a=0;a<f;a++){var x,I,b,E=_.getItem(r,a),R=E.column,S=a+n;0<E.colIndex||0<E.rowIndex?c.addBlank(C,S,b):(R.displayIndex(),x=null,(x=d.findRoomBy(R))&&R==x.startColumn()&&R!=x.baseColumn()&&(R=x.baseColumn()),I=l.getCell(h.getIndex(-1,R),y),b=this.$_addStyle(u,I.styles()),x?x.startColumn()==E.column?(s(C,S,R,y,b),c.addMerge(C,S,E.rowSpan,x.count())):c.addBlank(C,S,b):(s(C,S,R,y,b),(1<E.rowSpan||1<E.colSpan)&&c.addMerge(C,S,E.rowSpan,E.colSpan)))}C++}return o.rowGrouped&&!o.compatibility&&o.showLevelOutline&&c.setRowLevel(C,1),w},$_buildHeaderSummary:function(t,e,i,n){return this.$_buildSummary(t,!1,e,i,n)},$_buildFooter:function(t,e,i,n){return this.$_buildSummary(t,!0,e,i,n)},$_buildIndicatorCell:function(t,e,i,n,s,r,o){var a=e.grid,h=e.sheet,l=e.indicatorStyle||this.$_addStyle(t,a.indicator().styles());if(h.addNumber(n,s,i,l,o),1<r){for(var d=1;d<r;d++)h.addBlank(n+d,s,l,o);h.addMerge(n,s,r,1)}return 1},$_buildValueCell:function(t,e,i,n,s,r,o,a){var h=e.grid,l=0<=s.index()&&s.index()<h.fixedOptions().rowCount(),d=h.body(),u=e.options,c=e.sheet,_=$.temp(h,s.index(),r),f=!1,m=(r.isFixed()||l)&&h.fixedOptions()._ignoreColumnStyles?e.fixedStyles:e.columnStyles[r.$_hash];if((u.isApplyDynamicStyles()&&d.checkDynamicStyle(_,s)||l)&&(y=m.formatId,m=this.$_createStyles(t,d.getCell(_,!1,s)._styles),r._excelFormat&&(m.formatId=y),this.$_addStyle2(t,m),f=!0),r._blankWhenExport)c.addBlank(i,n,m);else if(r instanceof M){var g,p,w,v,C,y=r.dataIndex(),x=h.dataSource().getField(y),I=e.excelFormulaRuntime,b=r._excelFormulaExprStatement;if(b&&null!=o&&(I.setItemIndex(i,a),I.setColumns(e.colArr._dataColumns[o]),w=b.evaluate(I)),x)switch(g=s.getData(y),p=r.displayCallback&&r.displayCallback(),x.dataType()){case"number":null!=(g=u._numberCallback||p?u._numberCallback?u._numberCallback(s.index(),r.name(),g):p(h.getHandler(),_.proxy(),g):g)||w?"number"==typeof g||w?c.addNumber(i,n,g,m,void 0,w):null==g?c.addBlank(i,n,m):c.addText(i,n,g,m):c.addBlank(i,n,m);break;case"datetime":case"date":g?!u._datetimeCallback&&!p||(g=u._datetimeCallback?u._datetimeCallback(s.index(),r.name(),g):p(h.getHandler(),_.proxy(),g))instanceof Date?c.addDate(i,n,g,m,void 0,void 0,e.compatibility):c.addText(i,n,g,m):u._nullDateText?c.addText(i,n,u._nullDateText,m):c.addBlank(i,n,m);break;case"boolean":u._booleanCallback||p?(g=u._booleanCallback?u._booleanCallback(s.index(),r.name(),g):p(h.getHandler(),_.proxy(),g),c.addText(i,n,g,m)):u._booleanFormatter?(g=u._booleanFormatter.formatValue(g),c.addText(i,n,g,m)):c.addBool(i,n,g,m);break;case"object":g?(k=u._objectCallback,T=r._objectKey,R=r._objectCallback,C=t,(v=m&&m.clone()).id=m.id,"number"==typeof(g=k?k(s.index(),r.name(),g):R?R(x.orgFieldName(),s.dataRow(),g):T&&g.hasOwnProperty(T)?g[T]:p?p(h.getHandler(),_.proxy(),g):g)?(v.formatId=e.numberFormatId,C.addStyle(v),c.addNumber(i,n,g,v)):g instanceof Date?(v.formatId=e.dateFormatId,C.addStyle(v),c.addDate(i,n,g,v,void 0,void 0,e.compatibility)):g?(v.formatId=e.textFormatId,C.addStyle(v),c.addText(i,n,g,v)):(v.formatId=e.textFormatId,C.addStyle(v),c.addBlank(i,n,v))):c.addBlank(i,n,m);break;default:var E,R,S,T,k=d.getCellSimple(_);if(u._lookupDisplay&&(r.labelField()||r.isLookupDisplay()))E=k instanceof ga?ga._displayText(s,r):k.getTextFromItem(s);else if(g)if(u.isCheckNumber()){if(g=Number(g),!isNaN(g)){c.addNumber(i,n,g,m);break}E=""}else E=(R=r.getDisplayRegExp())&&(S=r.displayReplace())?g.replace(R,S):g;else E="";"number"==typeof(E=u._textCallback?u._textCallback(s.index(),r.name(),E):p&&!S?p(h.getHandler(),_.proxy(),g):E)?c.addNumber(i,n,E,m):(E&&E.match(lt)&&(f?m.wrapText=!0:m=(r.isFixed()||l)&&h.fixedOptions()._ignoreColumnStyles?e.fixedWrapStyles:e.columnWrapStyles[r.$_hash]),E&&u.isExportLink()&&r.rendererObj()instanceof Yc&&!r.excelFormat()?(T=r.rendererObj()._getUrl(_),c.addLink(i,n,E,T,m)):E?c.addText(i,n,E,m):c.addBlank(i,n,m))}else c.addBlank(i,n,m)}else r instanceof Yl&&((o=r.rendererObj())instanceof jc?(this._seriesCell.setIndex(_),(b=this._seriesCell.value())?(I=wa.getText(b),c.addText(i,n,I,m)):c.addBlank(i,n,m)):(y=e.colArr,u.isExportSeriesColumn()&&o instanceof Zc&&y._sparkColumns[r.$_hash]?c.addSparkLine(i,n,a,y._sparkColumns[r.$_hash],m):c.addBlank(i,n,m)))},$_findPrevCellStyle:function(t,e,i){var t=t._dataRows[e],n=t?t.childNodes():null;if(n)for(var s,r=si(i)+(e+1),o=0,a=n.length;o<a;o++)if(n[o]._attributes&&n[o]._attributes.r==r)return(s=n[o]._attributes.s)?{id:s}:null;return null},$_buildRow:function(t,e,i,n,s,r){var o,a,h=e.grid,l=h.rowGroup(),d=l.expandedAdornments()===A.SUMMARY?0:1,u=l.expandedAdornments()===A.SUMMARY&&l.isMergeMode(),c=e.sheet,_=e.colArr,f=_.dataRowCount(),m=_.colCount(),g=e.columnStyles,p=e.rowGroupBarStyle,w=h.layoutManager(),v=e.defHt,C=i&&i.dataId&&w._itemHeights[i.dataId()]||v,y=e.columnMerged,x=e.mergeHeads,I=e.indents;i.level();e.indicator&&(s+=this.$_buildIndicatorCell(t,e,r,n,s,f,C));for(var b=0;b<f;b++){var E=n+b,R=s;for(c.addRow(E,C),o=0;o<I;o++)e.rowGroupBarStyles&&0<e.rowGroupBarStyles.length?c.addBlank(E,R,e.rowGroupBarStyles[Math.min(o+d,e.rowGroupBarStyles.length-1)]):c.addBlank(E,R,p),R++;for(o=0;o<m;o++){var S=o+R,T=_.getItem(b,o),k=T.column,D=g[k.$_hash];if(0<T.colIndex||0<T.rowIndex)c.addBlank(E,S,D);else{var B=T.rowSpan,T=T.colSpan,O=!1;if(y){var M=$.temp(h,i.index(),k),F=w.getMergedCell(M);if(F){F.isHead(M)&&0==b||0<e.start&&i.index()==e.start&&!u?(this.$_buildValueCell(t,e,E,S,i,k,b,R),x[k.$_hash]=E):(N=this.$_findPrevCellStyle(c,E-1<0?0:E-1,S),c.addBlank(E,S,N||D,C),(F.isTail(M)||0<e.last&&i.index()==e.last-1)&&(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1),delete x[k.$_hash]));var N,O=!0}else if(e.allItems&&!i.isVisible()&&h.isGroupedColumn(k)&&e.mergedGrouped){for(c.addBlank(E,S,D),O=!0,a=i.parent();k.groupLevel()!=a.level()&&a;)a=a.parent();switch(l.expandedAdornments()){case A.NONE:i==a.firstItem()&&i==a.lastDataItem()?O=!1:i==a.firstItem()?(this.$_buildValueCell(t,e,E,S,i,k,b,R),x[k.$_hash]=E):i==a.lastDataItem()&&(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1));break;case A.BOTH:i!=a.lastDataItem()||a.footer().isVisible()||a._hasFooter?O=e.mergedGrouped:(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1));break;case A.HEADER:case A.SUMMARY:i==a.firstItem()&&i==a.lastDataItem()?x[k.$_hash]?(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1),delete x[k.$_hash]):O=!1:i==a.lastDataItem()?(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1),delete x[k.$_hash]):i!==a.firstDataItem()||a._hasFooter||x[k.$_hash]||(this.$_buildValueCell(t,e,E,S,i,k,b,R),x[k.$_hash]=E);break;case A.FOOTER:i==a.firstItem()&&(this.$_buildValueCell(t,e,E,S,i,k,b,R),x[k.$_hash]=E),i!=a.lastDataItem()||a.lastItem(!0)instanceof Pr||(B=E-x[k.$_hash]+f,c.addMerge(x[k.$_hash],S,B,1),delete x[k.$_hash])}}}!O&&(this.$_buildValueCell(t,e,E,S,i,k,b,R),1<B||1<T)&&c.addMerge(E,S,B,T)}}e.rowGrouped&&!e.compatibility&&e.showLevelOutline&&c.setRowLevel(E,i.level())}return f},$_buildGroupItem:function(t,e,i,n,s,r){var o=e.grid,a=e.sheet,h=e.colArr.colCount(),l=i.level()-1,d=e.rowGroupBarStyle,u=e.defHt;if(e.indicator&&(s+=this.$_buildIndicatorCell(t,e,r,n,s,1)),e.options.isIndenting())for(var c=0;c<l;c++)e.rowGroupBarStyles&&0<e.rowGroupBarStyles.length?a.addBlank(n,s,e.rowGroupBarStyles[Math.min(c+1,e.rowGroupBarStyles.length-1)]):a.addBlank(n,s,d),s++;t=o.rowGroup().getHeaderText(i);a.addRow(n,u),e.rowGroupHeaderStyles&&0<e.rowGroupHeaderStyles.length?a.addText(n,s,t,e.rowGroupHeaderStyles[l]):a.addText(n,s,t,e.rowGroupHeaderStyle),0<e.indents&&(h+=e.indents-(i.level()-1));for(var _=1;_<h;_++)a.addBlank(n,_+s,e.rowGroupHeaderStyle);return a.addMerge(n,s,1,h),e.rowGrouped&&!e.compatibility&&e.showLevelOutline&&a.setRowLevel(n,i.level()),1},$_buildGroupFooter:function(t,a,h,e,i,n){function s(t,e,i,n){var s,r,o=Ca.getValue(h,i);o instanceof Date?!a.options._datetimeCallback||(o=a.options._datetimeCallback(h.index(),i.name(),o))instanceof Date?f.addDate(t,e,o,n,void 0,void 0,a.compatibility):f.addText(t,e,o,n):"string"==typeof o?f.addText(t,e,o,n):isNaN(o)?(r=o,-1<(s=h.index())?(s=$.temp(d,s,i),s=u.getFooterCell(s),r=void 0===o||"number"==typeof o?s.displayText()||"":o):(s=i.footer().groupText())&&(r=s),f.addText(t,e,r,n)):f.addNumber(t,e,o,n)}var r,o,l,d=a.grid,u=d.rowGroup(),c=(d.fixedOptions().rowCount(),d.groupFooterMergeManager()),_=t,f=a.sheet,m=a.colArr,g=m.getItem(0,0).column,p=m.dataRowCount(),w=m.colCount(),v=a.rowGroupFooterStyle,C=a.rowGroupBarStyle,y=a.indents,x=h.level(),I=d.rowGroup().levels(),b=(0<I.length?I[Math.min(I.length-1,Math.max(x-2,0))]:d.rowGroup()).footerStyles(),E=d._rowGroup._expandedAdornments==A.SUMMARY,L=(d.layoutManager(),a.defHt);a.indicator&&(i+=this.$_buildIndicatorCell(t,a,n,e,i,p));for(var R=0;R<p;R++){var S=e+R,T=i;if(0<y)for(l=g,B=0;B<y;B++)a.rowGroupFooterBarStyles&&0<a.rowGroupFooterBarStyles.length?E?B<x-2?f.addBlank(S,T,a.rowGroupBarStyles[B]):B==x-2?f.addBlank(S,T,a.rowGroupFooterBarStyles[x-2]):f.addBlank(S,T,a.rowGroupFooterStyles[x-2]):B<x-2?f.addBlank(S,T,a.rowGroupBarStyles[Math.min(B+1,a.rowGroupBarStyles.length-1)]):f.addBlank(S,T,a.rowGroupFooterBarStyles[x-2]):!E||B<x-2?f.addBlank(S,T,C):f.addBlank(S,T,a.rowGroupFooterStyle),0==R&&1<p&&f.addMerge(S,T,p,1),T++;var k=g.root(),D=-1;f.addRow(S,L);for(var B=0;B<w;B++){r=B+T,(l=(o=m.getItem(R,B)).column).group()&&l.root()==k||(k=l.root(),D++);var O,M,F=c.findRoom(x-1,D),N=(F&&D==F.start()&&D!=F.base()&&(l=(o=m.getItem(R,F.base()+(B-D))).column),O=null,a.options.isApplyDynamicStyles()&&0<l._footer._groupDynamicStyles._items.length&&(N=$.temp(d,h.index(),l),O=this.$_addStyle(_,d._rowGroup.getFooterCell(N,h)._styles)),v[x]=v[x]||{});(O=O||N[l.$_hash])||(M=l.footer(),this._runStyles.clearValues(),this._runStyles.extend(M.styles()),this._runStyles.extend(M.groupStyles()),this._runStyles.setParent(b),O=this.$_addStyle(_,this._runStyles),v[x][l.$_hash]=O),0<o.colIndex||0<o.rowIndex?f.addBlank(S,r,O):F?F.start()==D?(s(S,r,l,O),f.addMerge(S,r,o.rowSpan,F.count())):f.addBlank(S,r,O):(s(S,r,l,O),(1<o.rowSpan||1<o.colSpan)&&f.addMerge(S,r,o.rowSpan,o.colSpan)),a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&f.setRowLevel(S,h.level())}}return p},$_buildMergedGroupHeader:function(t,e,i,n,s,r){var o=e.grid,a=e.sheet,h=e.colArr,l=h.colCount(),d=i.level(),u=e.defHt,c=e.rowGroupHeaderStyles&&0<e.rowGroupHeaderStyles.length?e.rowGroupHeaderStyles[d-1]:e.rowGroupHeaderStyle;e.indicator&&(s+=this.$_buildIndicatorCell(t,e,r,n,s,1));for(var _,f=0;f<d-1;f++)a.addBlank(n,s+f,this.$_findPrevCellStyle(a,n-1,s+f));e.columnMerged&&(_=h.getItem(0,r=d-1).column,this.$_buildValueCell(t,e,n,s+r,i.firstItem(),_),e.mergeHeads[_.$_hash]=n);t=o.rowGroup().getHeaderText(i),f=s+d;for(a.addRow(n,u),d<h.colCount()&&a.addText(n,f++,t,c);f<l+s;f++)a.addBlank(n,f,c);return 1<l-d&&a.addMerge(n,d+s,1,l-d),1},$_buildMergedGroupFooter:function(t,r,o,e,i,n){function s(t,e,i,n){var s=Ca.getValue(o,i);s instanceof Date?!r.options._datetimeCallback||(s=r.options._datetimeCallback(o.index(),i.name(),s))instanceof Date?f.addDate(t,e,s,n,void 0,void 0,r.compatibility):f.addText(t,e,s,n):"string"==typeof s?f.addText(t,e,s,n):isNaN(s)?(o.index(),i=Ca.$_displayText(o,i,s)||"",f.addText(t,e,i,n)):f.addNumber(t,e,s,n)}var a,h,l,d=r.grid,u=d.rowGroup()._expandedAdornments==A.SUMMARY,c=d.groupFooterMergeManager(),_=t,f=r.sheet,m=r.colArr,g=(m.getItem(0,0).column,m.dataRowCount()),p=m.colCount(),w=o.level()-1,v=d.rowGroup().levels(),C=(0<v.length?v[Math.min(v.length-1,Math.max(w-2,0))]:d.rowGroup()).footerStyles(),y=r.rowGroupFooterStyle,x=r.columnStyles,I=(r.options.isIndicatorDataRow(d),d.layoutManager(),r.defHt);for(r.indicator&&(i+=this.$_buildIndicatorCell(t,r,n,e,i,g)),h=0;h<w;h++)if(T=x[(B=m.getItem(0,h).column).$_hash],r.allItems||o.parent().isExpanded()){for(a=0;a<g;a++)if(u&&0==a){for(var b=o.parent();b&&B.groupLevel()!=b.level();)b=b.parent();b&&b.firstVisibleItem(u)===o?this.$_buildValueCell(t,r,e,i+h,o.parent().firstItem(),B):f.addBlank(e+a,i+h,T)}else f.addBlank(e+a,i+h,T);if(r.columnMerged)if(u)(!r.mergeHeads[B.$_hash]||B.groupLevel()===w)&&(r.mergeHeads[B.$_hash]=e);else if(o.isVisible()){var E=B.stateFor(Wh.MERGE_ROOMS);(S=E&&E.findRoom(o.index()))&&S.tail()===o.index()&&(a=r.mergeHeads[B.$_hash],f.addMerge(a,h+i,e+g-a,1))}else{for(b=o.parent();b&&B.groupLevel()!=b.level();)b=b.parent();b&&b.lastItem(!0)===o&&(a=r.mergeHeads[B.$_hash],f.addMerge(a,h+i,e+g-a,1))}}else for(a=0;a<g;a++)this.$_buildValueCell(t,r,e+a,i+h,o.parent().firstItem(),B);for(a=0;a<g;a++)for(f.addRow(l=e+a,I),h=w;h<p;h++){var R,S,T,k,D=h+i,B=(R=m.getItem(a,h)).column,O=((S=c.findRoom(w,h))&&h!=S.base()&&(B=(R=m.getItem(a,S.base())).column),T=null,r.options.isApplyDynamicStyles()&&0<B.footer()._groupDynamicStyles._items.length&&(O=$.temp(d,o.index(),B),T=this.$_addStyle(_,d._rowGroup.getFooterCell(O,o)._styles)),y[w]=y[w]||{});(T=T||O[B.$_hash])||(k=B.footer(),this._runStyles.clearValues(),this._runStyles.extend(k.styles()),this._runStyles.extend(k.groupStyles()),this._runStyles.setParent(C),T=this.$_addStyle(_,this._runStyles),y[w][B.$_hash]=T),0<R.colIndex||0<R.rowIndex?f.addBlank(l,D,T):S?S.start()==h?(s(l,D,B,T),f.addMerge(l,D,g,S.count())):f.addBlank(l,D,T):(s(l,D,B,T),(1<R.rowSpan||1<R.colSpan)&&f.addMerge(l,D,R.rowSpan,R.colSpan)),r.rowGrouped&&!r.compatibility&&r.showLevelOutline&&f.setRowLevel(l,w)}return g},$_buildItemsAsync:function(t,e,i,n,s){var r=e.options.isIndicatorDataRow(e.grid);this.$_buildItemAsync(t,e,i,n,r,e.start,s)},$_buildItemAsync:function(t,e,i,n,s,r,o){for(var a=e.grid,s=e.options.isIndicatorDataRow(a),h=e.allItems,l=r+Math.min(this._progressStep,e.last-r),d=i,u=r;u<l;u++){var c=h?h[u]:a.getItem(u);if(c instanceof Ar)d+=this.$_buildRow(t,e,c,d,n,s?c.dataRow():u+1);else if(c instanceof Vr)d+=this.$_buildGroupItem(t,e,c,d,n,u+1);else if(c instanceof Kh)d+=this.$_buildMergedGroupHeader(t,e,c,d,n,u+1);else if(c instanceof zh)d+=this.$_buildMergedGroupFooter(t,e,c,d,n,u+1);else{if(!(c instanceof Pr))throw"Unkown item type";d+=this.$_buildGroupFooter(t,e,c,d,n,u+1)}this._progressPos+=1}e.row=d,this.setProgress(this._progressPos),(r=l)>=e.last?o():setTimeout(function(){this.$_buildItemAsync(t,e,d,n,s,r,o)}.bind(this),0)},$_buildItems:function(t,e,i,n){for(var s=e.grid,r=e.options.isIndicatorDataRow(s),o=e.allItems,a=i,h=e.start;h<e.last;h++){var l=o?o[h]:s.getItem(h);if(l instanceof Ar)a+=this.$_buildRow(t,e,l,a,n,r?l.dataRow():h+1);else if(l instanceof Vr)a+=this.$_buildGroupItem(t,e,l,a,n,h+1);else if(l instanceof Kh)a+=this.$_buildMergedGroupHeader(t,e,l,a,n,h+1);else if(l instanceof zh)a+=this.$_buildMergedGroupFooter(t,e,l,a,n,h+1);else{if(!(l instanceof Pr))throw"Unkown item type";a+=this.$_buildGroupFooter(t,e,l,a,n,h+1)}}return a-i},$_export:function(t,n){function e(t){var e;window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(t,s):window.navigator.msSaveBlob?window.navigator.msSaveBlob(t,s):(e=document.createElement("a"),document.body.appendChild(e),t=URL.createObjectURL(t),e.href=t,e.download=s,e.click(),document.body.removeChild(e))}function i(t){var e=(e='<form name="tempForm" action="'+n.url()+'" method="post">')+('<input type="hidden" name="fileName" value = "'+s+'"/>')+('<input type="hidden" name="data" value = "'+t+'"/>');if(r)for(var i in r)e+='<input type="hidden" name="'+i+'" value = "'+r[i]+'"/>';e+='<input id="submitBtn" type="submit"/></form>';t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t),document.getElementById("submitBtn").click(),document.body.removeChild(t)}var s=n.fileName()||"realgrid.xlsx",r=n.params(),o="local"==n.target();if(JSZip.support.blob||!o){for(var a=new JSZip,h=0;h<t.length;h++){var l=t[h].body;0<=l.indexOf('xmlns=""')&&(l=l.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),a.file(t[h].key,l)}o?a.generateAsync?a.generateAsync({type:"blob",compression:"DEFLATE"}).then(function(t){e(t)}):e(a.generate({type:"blob",compression:"DEFLATE"})):"file"===n.target()||"string"===n.target()?a.generateAsync?a.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(t){n._done&&"function"==typeof n._done&&n._done(t)}):(o=a.generate({type:"base64",compression:"DEFLATE"}),n._done&&"function"==typeof n._done&&n._done(o)):a.generateAsync?a.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(t){i(t)}):i(a.generate({type:"base64",compression:"DEFLATE"}))}else alert("not supported on this browser")}}),p_=e("GridHtmlExporter",null,{init:function(){this._super(),this._runStyles=new d,this._seriesCell=new wa},export:function(e,i){if(e){i=i instanceof c_?i:new c_(i);function t(){var t=n.sheet.serialize(),e=i.done();e&&e(t)}var n={grid:e,options:i,indicator:i.isIndicatorVisible(e)?e.indicator():null,checkBar:i.isCheckBarVisible(e)?e.checkBar():null,checkMark:i.checkMark(),header:i.isHeaderVisible(e)?e.header():null,headerSummary:i.isHeaderSummaryVisible(e)?e.header().summary():null,footer:i.isFooterVisible(e)?e.footer():null,colArr:new h_(e,i.isLinear()),allItems:null,indicatorHead:e.indicator().headText()||"",indicatorFoot:e.indicator().footText()||"",checkBarHead:e.checkBar().headText()||"",checkBarFoot:e.checkBar().footText()||"",indicatorSummary:e.indicator().summaryText(),rowGrouped:!1,rowLevels:0,indents:0,indentWidth:3,columnMerged:!1,mergeHeads:{},showProgress:i.isShowProgress(),progressMessage:i.progressMessage()||"Exporting...",progressMax:0,prepareProgress:10,setProgress:function(t){e.setExportProgress(this.progressMax,t+this.prepareProgress,this.progressMessage)}},s=(n.sheet=new Xi,gt());if(e instanceof X_)throw new Error("Tree는 Html Export기능이 지원되지 않습니다.");if(e.isRowGrouped())throw new Error("RowGrouping상태에서는 Html Export기능이 지원되지 않습니다.");if(i.isAllItems()&&e.isRowGrouped()){n.allItems=e.getAllItems();var r=e.layoutManager().fixedItemCount();if(0<r)for(var o=0;o<r;o++)n.allItems.splice(o,0,e.getItem(o))}this.$_buildDocument(n,t),_t("H T M L: buildBook "+(gt()-s))}},$_buildDocument:function(t,e){gt();var i,n,s=t.grid,o=(t.rowGrouped=s.isRowGrouped(),t.mergedGrouped=s.isMergedRowGrouped(),t.rowGrouped&&!s.rowGroup().isMergeMode()&&(t.rowLevels+=s.rowGroupLevels()),t.start=0,t.allItems),o=o?o.length:s.itemCount();s.isRowGrouped()||(t.start=0<t.options.start()?t.options.start():0,o=!(0<(i=t.options.count()))||t.start+i>o?o-t.start:i),t.last=t.start+o,this.$_prepare(t),this.$_buildDocumentTitle(t),t.header&&this.$_buildHeader(t),t.headerSummary&&this.$_buildHeaderSummary(t),t.showProgress?(s.beginExportProgress(t.progressMessage),t.progressMax=o+t.prepareProgress,t.progressStep=Math.max(B(o/10),1),t.setProgress(0),(n=this).$_buildItemsAsync(t,function(){r=t.row,t.footer&&n.$_buildFooter(t),n.$_buildDocumentTail(t),s.endExportProgress(),e&&e()})):(this.$_buildItems(t),t.footer&&this.$_buildFooter(t),this.$_buildDocumentTail(t),e&&e())},$_buildTreeDocument:function(t,e){var i,n=t.grid;t.rowLevels=t.grid.getLevels(),this.$_prepare(t),t.start=0,t.last=t.allItems?t.allItems.length:n.itemCount(),this.$_buildDocumentTitle(t),t.header&&this.$_buildTreeHeader(t),t.headerSummary&&this.$_buildTreeHeaderSummary(t),t.showProgress?(n.beginExportProgress(t.progressMessage),t.progressMax=t.last+t.prepareProgress,t.progressStep=Math.max(B(t.last/10),1),t.setProgress(0),(i=this).$_buildTreeItemsAsync(t,function(){r=t.row,t.footer&&(r+=i.$_buildTreeFooter(t)),r+=i.$_buildDocumentTail(t),n.endExportProgress(),e&&e()})):(r+=this.$_buildTreeItems(t),t.footer&&(r+=this.$_buildTreeFooter(t)),r+=this.$_buildDocumentTail(t),e&&e())},$_prepare:function(t){for(var e=t.grid,i=e.layoutManager().fixedItemCount(),n=e.visibleColumnCount(),s=t.options,r=0;r<n;r++){var o=e.getVisibleColumn(r);s.isSeparateRows()||(o=o.stateFor(Wh.MERGE_ROOMS))&&(o.refresh(i,e.itemCount()-1),t.columnMerged=!0)}},$_buildDocumentTitle:function(t){},$_buildDocumentTail:function(t){},$_buildHeader:function(t){t.grid;for(var e,i=t.sheet,n=t.colArr,s=n.colCount(),r=n.headerRowCount(),o=(t.indents,0);o<r;o++)for(i.addHeadRow(),t.indicator&&0==o&&i.addHeader(t.indicator,t.indicatorHead,t.indicator.headStyles(),r,1),t.checkBar&&0==o&&i.addHeader(t.checkBar,t.checkBarHead,t.checkBar.headStyles(),r,1),e=0;e<s;e++){var a,h=n.getHeader(o,e),l=h.column;0==h.colIndex&&0==h.rowIndex&&(w=l.displayWidth(),a=l.header(),i.addHeader(l,a.displayText(),a.styles(),h.rowSpan,h.colSpan))}},$_buildFooter:function(t){function e(t,e,i,n,s){var r=e.value(),o=Number(r);!isNaN(o)&&i.numberFormat()?a.addFooterNumber(t,o,i,n,s):r?a.addFooterText(t,r,i,n,s):a.addFooterText(t,e.displayText(),i,n,s)}for(var i,n=t.grid,a=t.sheet,s=t.colArr,r=s.colCount(),o=s.dataRowCount(),h=(t.indents,n.footerMergeManager()),l=(n.layoutManager(),0);l<o;l++)for(a.addFootRow(),t.indicator&&0==l&&a.addFooterText(t.indicator,t.indicatorFoot,t.indicator.footStyles(),o,1),t.checkBar&&0==l&&a.addFooterText(t.checkBar,t.checkBarFoot,t.checkBar.footStyles(),o,1),i=0;i<r;i++){var d,u,c,_=s.getItem(l,i),f=_.column;0==_.colIndex&&0==_.rowIndex&&(f.displayIndex(),d=null,(d=h.findRoomBy(f))&&f==d.startColumn()&&f!=d.baseColumn()&&(f=d.baseColumn()),u=n.footer().getCell(n.getIndex(-1,f)),c=f.footer(),d?d.startColumn()==f&&e(f,u,c.styles(),_.rowSpan,d.count()):e(f,u,c.styles(),_.rowSpan,_.colSpan))}},$_buildHeaderSummary:function(t){},$_buildValueCell:function(t,e,i,n,s){var r=t.grid,o=r.body(),a=t.options,h=t.sheet,t=$.temp(r,e.index(),i),l=o.getCell(t),d=l._styles;if(i._blankWhenExport)return h.addBlank(i,d,n,s,width,height);if(i instanceof M){var u,o=i.dataIndex(),r=r.dataSource().getField(o),c=e.getData(o);if(!r)return h.addBlank(i,cellStylet,n,s);switch(r.dataType()){case"number":return isNaN(c)?h.addText(i,i.nanText(),d,n,s):!d.numberFormat()&&e.isVisible()?h.addText(i,l.displayText(),d,n,s):h.addNumber(i,c,d,n,s);case"datetime":case"date":return c&&c instanceof Date?h.addDate(i,c,d,n,s):e.isVisible()?h.addText(i,l.displayText(),d,n,s):h.addText(i,"",d,n,s);case"boolean":return("boolean"!=typeof c||!d.booleanFormat())&&e.isVisible()?h.addText(i,l.displayText(),d,n,s):h.addBool(i,c,d,n,s);default:if(a._lookupDisplay&&(i.labelField()||i.isLookupDisplay()))c=l.getTextFromItem(e);else if(c)if(a.isCheckNumber()){var _=Number(c);if(!isNaN(_))return h.addNumber(_,d,n,s,width,height)}else if((_=i.getDisplayRegExp())&&(u=i.displayReplace()))return c=c.replace(_,u),h.addText(i,c,d,n,s,!1);return e.isVisible()?h.addText(i,l.displayText(),d,n,s):h.addText(i,c,d,n,s)}}else if(i instanceof Yl)return this._seriesCell.setIndex(t),(o=this._seriesCell.value())?(r=wa.getText(o),h.addText(i,r,d,n,s)):h.addBlank(i,d,n,s)},$_buildRow:function(t,e,i){for(var n=t.grid,s=(n.body(),t.sheet),r=t.colArr,o=r.dataRowCount(),a=r.colCount(),h=(t.rowGroupBarStyles,n.layoutManager()),l=t.columnMerged,d=(t.mergeHeads,n.rowGroup(),t.indents,e.level(),0);d<o;d++)for(s.addBodyRow(),t.indicator&&0==d&&(w=t.indicator.realWidth(),s.addText(t.indicator,i+"",t.indicator.styles(),o,1)),t.checkBar&&0==d&&(w=t.checkBar.width(),s.addText(t.checkBar,e.isChecked()?t.checkMark:"",t.checkBar.styles(),o,1)),c=0;c<a;c++){var u,_,f,m,g,p=r.getItem(d,c);0==p.colIndex&&0==p.rowIndex&&(u=p.column,m=$.temp(n,e.index(),u),_=p.rowSpan,p=p.colSpan,f=!1,w=u.displayWidth(),l&&(m=$.temp(n,e.index(),u),g=h.getMergedCell(m))&&((g.isHead(m)&&0==d||0<t.start&&e.index()==t.start)&&(_*=(0<t.last?Math.min(g.tail(),t.last):g.tail())-e.index()+1,this.$_buildValueCell(t,e,u,_,p)),f=!0),f||this.$_buildValueCell(t,e,u,_,p))}},$_buildGroupItem:function(t,e,i){},$_buildGroupFooter:function(t,e,i){},$_buildMergedGroupHeader:function(t,e,i){},$_buildMergedGroupFooter:function(t,e,i){},$_buildItems:function(t){for(var e=t.grid,i=t.options.isIndicatorDataRow(e),n=t.allItems,s=t.indicator.isZeroBase(),r=t.start;r<t.last;r++){var o=n?n[r]:e.getItem(r),a=s?r:r+1;if(o instanceof Ar)this.$_buildRow(t,o,i?o.dataRow():a);else if(o instanceof Vr)this.$_buildGroupItem(t,o,a);else if(o instanceof Kh)this.$_buildMergedGroupHeader(t,o,a);else if(o instanceof zh)this.$_buildMergedGroupFooter(t,o,a);else{if(!(o instanceof Pr))throw"Unkown item type";this.$_buildGroupFooter(t,o,a)}}},$_buildItemsAsync:function(e,t){var i=e.options.isIndicatorDataRow(e.grid);try{this.$_buildItemAsync(e,i,e.start,t)}catch(t){throw e.grid.endExportProgress(),t}},$_buildItemAsync:function(t,e,i,n){for(var s,r=i+Math.min(t.progressStep,t.last-i),o=t.indicator.isZeroBase(),a=i;a<r;a++){var h=t.allItems?t.allItems[a]:t.grid.getItem(a),l=o?a:a+1;if(h instanceof Ar)this.$_buildRow(t,h,e?h.dataRow():l);else if(h instanceof Vr)this.$_buildGroupItem(t,h,l);else if(h instanceof Kh)this.$_buildMergedGroupHeader(t,h,l);else if(h instanceof zh)this.$_buildMergedGroupFooter(t,h,l);else{if(!(h instanceof Pr))throw"Unkown item type";this.$_buildGroupFooter(t,h,l)}}t.setProgress(r-t.start),(i=r)>=t.last?n():(s=this,setTimeout(function(){s.$_buildItemAsync(t,e,i,n)},0))},$_buildTreeHeader:function(t){},$_buildTreeHeaderSummary:function(t){},$_buildTreeFooter:function(t){},$_buildTreeItems:function(t){for(var e=t.grid,i=t.options.isIndicatorDataRow(e),n=t.indicator.isZeroBase(),s=0;s<t.last;s++){var r=t.allItems?t.allItems[s]:e.getItem(s);if(!(r instanceof L))throw"Unknown tree item type";row+=this.$_buildTreeItem(t,r,i?r.dataRow():n?s:s+1,row,startCol)}},$_buildTreeItemsAsync:function(t,e){var i=t.options.isIndicatorDataRow(t.grid);this.$_buildTreeItemAsync(t,i,0,e)},$_buildTreeItemAsync:function(t,e,i,n){for(var s,r=t.allItems?t.allItems[i]:t.grid.getItem(i),o=i+Math.min(t.progressStep,t.last-i),a=t.indicator.isZeroBase(),h=(t.indicator.indexOffset(),i);h<o;h++){if(!(r instanceof L))throw"Unknown tree item type";row+=this.$_buildTreeItem(t,r,e?r.dataRow():a?h:h+1)}t.row=row,t.setProgress(o-t.start),(i=o)>=t.last?n():(s=this,setTimeout(function(){s.$_buildTreeItemAsync(t,row,startCol,e,i,n)},0))},$_buildTreeItem:function(t,e,i){}}),w_=e("GridCsvExporter",null,{init:function(){this._super(!0)},destroy:function(){this._super()},$_export:function(t){var e,i=t.options,n=i.fileName()||"realgrid.csv",s="local"==i.target(),t=t.rows.join("\n");s?(s="\ufeff"+(s=t),s=new Blob([s],{type:"text/csv charset=UTF-8"}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(s,n):window.navigator.msSaveBlob?window.navigator.msSaveBlob(s,n):(e=document.createElement("a"),document.body.appendChild(e),s=URL.createObjectURL(s),e.href=s,e.download=n,e.click(),document.body.removeChild(e))):(s=t,e=i.url(),s=de.encode("\ufeff"+s),e=(e=(e='<form name="tempForm" action="'+e+'" method="post">')+'<input type="hidden" name="fileName" value = "'+n+'"/><input type="hidden" name="data" value = "'+s+'"/>')+'<input id="submitBtn" type="submit"/></form>',(s=document.createElement("div")).innerHTML=e,document.body.appendChild(s),document.getElementById("submitBtn").click(),document.body.removeChild(s))},export:function(e,t){function i(t){t.$_export(s)}if(e){t=t instanceof c_?t:new c_(t);var n=this,s={grid:e,options:t,indicator:t.isIndicatorVisible(e)?e.indicator():null,header:t.isHeaderVisible(e)?e.header():null,headerSummary:t.isHeaderSummaryVisible(e)?e.header().summary():null,footer:t.isFooterVisible(e)?e.footer():null,colArr:e.getLeafColumns(!0),allItems:null,indicatorHead:e.indicator().headText()||"No",indicatorFoot:e.indicator().footText()||"",indicatorSummary:e.indicator().summaryText(),progressMax:0,prepareProgress:10,indicatorNo:1,rows:[],setProgress:function(t){e.setExportProgress(this.progressMax,t+this.prepareProgress,this.progressMessage)}};if(s.indicator,e instanceof X_)t.isAllItems()&&(s.allItems=e.getAllItems()),this.$_buildTreeBook(s,function(){i(n)});else{if(t.isAllItems()&&e.isRowGrouped()){s.allItems=e.getAllItems();var r=e.layoutManager().fixedItemCount();if(0<r)for(var o=0;o<r;o++)s.allItems.splice(o,0,e.getItem(o))}else t.isPagingAllItems()&&e.isPaged()?s.allItems=e.getPagingAllItems():t.isOnlyCheckedItems()&&!e.isRowGrouped()&&(s.allItems=e.getCheckedItems());this.$_buildBook(s,function(){i(n)})}}},$_buildBook:function(t,e){t.header&&this.$_buildHeader(t),t.headerSummary&&this.$_buildHeaderSummary(t),this.$_buildItems(t),t.footer&&this.$_buildFooter(t),e()},$_addQuat:function(t,e,i){var n;return null===(t="string"==typeof t&&(i&&(n=i.lfText(),i=i.crText(),n&&(t=t&&t.replace(/\n/g,n)),i)&&(t=t&&t.replace(/\r/g,i)),e===S.TEXT||0<=t.indexOf("\n")||0<=t.indexOf(",")||0<=t.indexOf('"'))?'"'+t.replace(/\"/g,'""')+'"':t)?"":t},$_buildHeader:function(t){var e,i=[];t.indicator&&i.push(t.indicatorHead);for(var n=0,s=t.colArr.length;n<s;n++)e=t.colArr[n],i[i.length]=this.$_addQuat(e.header().displayText());var r=i.join(",");t.rows.push(r)},$_buildHeaderSummary:function(t){for(var e,i,n,s,r=[],o=t.grid,a=t.options,h=0,l=t.colArr.length;h<l;h++)s=t.colArr[h],s="number"==typeof(e=(i=o.header().summary().getCell(o.getIndex(-1,s))).value())?isNaN(e)?i.displayText():String(e):e instanceof Date?!a._datetimeCallback||(e=a._datetimeCallback(-1,s.name(),e))instanceof Date?Se.Default.getText(e):e:null==e?i.displayText():String(e),r[r.length]=this.$_addQuat(s);n=r.join(","),t.rows.push(n)},$_buildFooter:function(t){for(var e,i,n,s,r,o=t.options,a=t.grid,h=a.footer(),l=h.count(),d=0;d<l;d++){e=[],t.indicator&&e.push(0==d?t.indicatorFoot:"");for(var u=0,c=t.colArr.length;u<c;u++)r=t.colArr[u],r="number"==typeof(n=(i=h.getCell(a.getIndex(-1,r),d)).value())?isNaN(n)?i.displayText():String(n):n instanceof Date?!o._datetimeCallback||(n=o._datetimeCallback(-1,r.name(),n))instanceof Date?Se.Default.getText(n):n:null==n?i.displayText():String(n),e[e.length]=this.$_addQuat(r);s=e.join(","),t.rows.push(s)}},$_buildItems:function(t){for(var e,i=t.grid,n=t.allItems?t.allItems.length:i.itemCount(),s=t.allItems,r=(t.rows,0);r<n;r++)(e=s?s[r]:i.getItem(r))instanceof Ar?this.$_buildItem(t,e):e instanceof Vr?this.$_buildGroupItem(t,e):e instanceof Kh?this.$_buildMergedGroupHeader(t,e):e instanceof zh?this.$_buildMergedGroupFooter(t,e):e instanceof Pr&&this.$_buildGroupFooter(t,e)},$_buildItem:function(t,e){var i,n,s,r,o=t.colArr,a=[],h=o.length,l=t.options,d=t.grid;t.indicator&&(l.isIndicatorDataRow(d)?a.push(e.dataRow()):a.push(t.indicatorNo++));for(var u,c,_,f,m=0;m<h;m++){if(s=void 0,n=(i=o[m]).getField())switch(f=e.getData(i.dataIndex()),r=i.displayCallback&&i.displayCallback(),n.dataType()){case S.NUMBER:s=isNaN(f)||null==f?"":l._numberCallback||r?l._numberCallback?l._numberCallback(e.index(),i.name(),f):r(d.getHandler(),$.temp(e.index(),i).proxy(),f):String(f);break;case S.BOOLEAN:null!=f&&(l._booleanCallback||r?f=l._booleanCallback?l._booleanCallback(e.index(),i.name(),f):r(d.getHandler(),$.temp(e.index(),i).proxy(),f):l._booleanFormatter&&(f=l._booleanFormatter.formatValue(f)),s=String(f));break;case S.DATE:case S.DATETIME:f&&(s=!l._datetimeCallback&&!r||(f=l._datetimeCallback?l._datetimeCallback(e.index(),i.name(),f):r(d.getHandler(),$.temp(e.index(),i).proxy(),f))instanceof Date?Se.Default.getText(f):f);break;case S.OBJECT:break;default:f=l._lookupDisplay&&(i.labelField()||i.isLookupDisplay())?(_=$.temp(d,e.index(),i),d.body().getCellSimple(_).getTextFromItem(e)):f&&(u=i.getDisplayRegExp())&&(c=i.displayReplace())?f.replace(u,c):f,s=null!=(f=l._textCallback?l._textCallback(e.index(),i.name(),f):!r||u&&c?f:r(d.getHandler(),$.temp(d,e.index(),i).proxy(),f))?String(f):""}a[a.length]=this.$_addQuat(s,n&&n.dataType())}var g=a.join(",");t.rows.push(g)},$_buildGroupItem:function(t,e){var i=t.grid,e=i.rowGroup().getHeaderText(e),n=[],i=(t.indicator&&!t.options.isIndicatorDataRow(i)&&n.push(t.indicatorNo++),n.push(this.$_addQuat(e)),n.join(","));t.rows.push(i)},$_buildGroupFooter:function(t,e){var i,n=t.grid,s=n.rowGroup(),r=[],o=t.colArr,a=o.length;t.indicator&&!t.options.isIndicatorDataRow(n)&&r.push(t.indicatorNo++);for(var h=0;h<a;h++){var l,d,u=o[h];d="",(i=Ca.getValue(e,u))instanceof Date?d=!t.options._datetimeCallback||(i=t.options._datetimeCallback(e.index(),u.name(),i))instanceof Date?Se.Default.getText(i):i:isNaN(i)?d=-1<e.index()?void 0===i||"number"==typeof i?(l=$.temp(n,e.index(),u),s.getFooterCell(l).displayText()||""):String(i):u.footer().groupText():"number"==typeof i&&(d=String(i)),r[r.length]=this.$_addQuat(d)}var c=r.join(",");t.rows.push(c)},$_buildMergedGroupHeader:function(t,e){var i=t.grid,n=i.rowGroup().getHeaderText(e),s=[],r=e.level();t.indicator&&!t.options.isIndicatorDataRow(i)&&s.push(t.indicatorNo++);for(var o=0;o<r-1;o++)s[s.length]="";s.push(this.$_addQuat(n));e=s.join(",");t.rows.push(e)},$_buildMergedGroupFooter:function(t,e){var i,n=t.grid,s=n.rowGroup(),r=[],o=e.level(),a=t.colArr,h=a.length;t.indicator&&!t.options.isIndicatorDataRow(n)&&r.push(t.indicatorNo++);for(var l=0;l<o-1;l++)r[r.length]="";for(;l<h;l++){var d,u,c=a[l];u="",(i=Ca.getValue(e,c))instanceof Date?u=!t.options._datetimeCallback||(i=t.options._datetimeCallback(e.index(),c.name(),i))instanceof Date?Se.Default.getText(i):i:isNaN(i)?u=-1<e.index()?void 0===i||"number"==typeof i?(d=$.temp(n,e.index(),c),s.getFooterCell(d).displayText()||""):String(i):c.footer().groupText():"number"==typeof i&&(u=String(i)),r[r.length]=this.$_addQuat(u)}var _=r.join(",");t.rows.push(_)},$_buildTreeBook:function(t,e){t.header&&this.$_buildTreeHeader(t),t.headerSummary&&this.$_buildTreeHeaderSummary(t),this.$_buildTreeItems(t),t.footer&&this.$_buildTreeFooter(t),e()},$_buildTreeHeader:function(t){this.$_buildHeader(t)},$_buildTreeHeaderSummary:function(t){this.$_buildHeaderSummary(t)},$_buildTreeFooter:function(t){this.$_buildFooter(t)},$_buildTreeItems:function(t){for(var e,i=t.grid,n=t.allItems?t.allItems.length:i.itemCount(),s=t.allItems,r=(t.rows,0);r<n;r++){if(!((e=s?s[r]:i.getItem(r))instanceof L))throw"Unkonw tree item type";this.$_buildTreeItem(t,e)}},$_buildTreeItem:function(t,e){this.$_buildItem(t,e)}}),v_=e("DataProviderCsvExporter",w_,{init:function(){this._super(!0)},destroy:function(){this._super()},$_prepareFields:function(t,e,i){var n,s=t.getFields(),r=[];if(e){for(var o=0,a=e.length;o<a;o++)0<=(n=t.getFieldIndex(e[o]))&&r.push(t.getField(n));return r}if(i){for(o=0,a=i.length;o<a;o++)i[o]=i[o].toUpperCase();for(o=s.length;o--;)0<=i.indexOf(s[o].fieldName())&&s.splice(o,1)}return s},export:function(t,e){function i(t){t.$_export(s)}e=e instanceof __?e:new __(e);var n=this,s={provider:t,options:e,fields:this.$_prepareFields(t,e.exportFields(),e.hideFields()),rows:[]};t instanceof N?this.$_buildTreeBook(s,function(){i(n)}):this.$_buildBook(s,function(){i(n)})},$_buildBook:function(t,e){var i=t.options,n=t.provider.rowCount(),s=Math.max(0,i.start()),r=-1==i.count()?n:Math.min(Math.max(i.count(),0),n);i.isIncludeFieldNames()&&this.$_buildFieldName(t);for(var o=s;o<r;o++)this.$_buildItem(t,o);"string"===i.target()?(n=t.rows.join("\n"),i._done&&"function"==typeof i._done&&i._done(n)):(i._done&&"function"==typeof i._done&&i._done(),e())},$_buildFieldName:function(t){for(var e=t.fields,i=e.length,n=[],s=t.options.seperator(),r=0;r<i;r++)n.push(e[r].orgFieldName());t.rows.push(n.join(s||","))},$_buildItem:function(t,e){for(var i,n,s,r=t.provider,o=t.fields,a=r instanceof N?e?e.values():[]:r.getRow(e),h=[],l=o.length,d=t.options,r=d.seperator(),u=0;u<l;u++){if(s=void 0,i=o[u])switch(n=a[i.index()],i.dataType()){case S.NUMBER:s=isNaN(n)||null==n?"":d._numberCallback?d._numberCallback(e,i.orgFieldName(),n):d._numberFormat?d._numberFormatter.format(n):String(n);break;case S.BOOLEAN:null!=n&&(d._booleanCallback?n=d._booleanCallback(e,i.orgFieldName(),n):d._booleanFormatter&&(n=d._booleanFormatter.formatValue(n)),s=String(n));break;case S.DATE:case S.DATETIME:n&&(s=!d._datetimeCallback||(n=d._datetimeCallback(e,i.orgFieldName(),n))instanceof Date?Se.Default.getText(n):n);break;case S.OBJECT:n&&(s="object"==typeof(n=d._objectCallback?d._objectCallback(e,i.orgFieldName(),n):n)?JSON.stringify(n):String(n));break;default:s=null!=(n=d._textCallback?d._textCallback(e,i.orgFieldName(),n):n)?String(n):""}h[h.length]=this.$_addQuat(s,i&&i.dataType(),d)}r=h.join(r||",");t.rows.push(r)},$_buildTreeBook:function(t,e){var i=t.options,n=t.provider.getDescendants();i.isIncludeFieldNames()&&this.$_buildFieldName(t);for(var s,r=0,o=n.length;r<o;r++)this.$_buildItem(t,n[r]);"string"===i.target()?(s=t.rows.join("\n"),i._done&&"function"==typeof i._done&&i._done(s)):(i._done&&"function"==typeof i._done&&i._done(),e())}}),xs=t({LEAF:"leaf",ROOT:"root",ALL:"all",CUSTOM:"custom"}),C_=(e("TreeDataTag",null,{init:function(){this._super()},connect:function(t){},disconnect:function(){},clearRows:function(){},setRows:function(){},addRow:function(t){},addRows:function(t){},removeRow:function(t){},removeRows:function(t){},updateRow:function(){}}),e("TreeDataTagCollection",null,{init:function(t){this._super(),this._owner=t,this._tags=[]},add:function(t){var e;t&&((e=this._tags||(this._tags=[])).indexOf(t)<0&&e.push(t),t.connect(this._owner))},remove:function(t){var e;t&&this._tags&&0<=(e=this._tags.indexOf(t))&&(this._tags.splice(e,1),t.disconnect())},clearRows:function(){if(this._tags)for(var t=this._tags,e=t.length;e--;)t[e].clearRows()},setRows:function(){if(this._tags)for(var t=this._tags,e=t.length;e--;)t[e].setRows()},addRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].addRow(t)},addRows:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].addRows(t)},removeRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].removeRow(t)},removeRows:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].removeRows(t)},updateRow:function(t){if(this._tags)for(var e=this._tags,i=e.length;i--;)e[i].updateRow(t)}})),Rs=e("TreeDataSource",null,{init:function(t,e){re.init.call(this,t,e),this._provider=t,this._rootRow=e,this._rows=null,this._rowCount=0},provider:function(){return this._provider},rootRow:function(){return this._rootRow},insertedRows:function(){return this._rows},insertedCount:function(){return this._rowCount},_prepareLoad:function(t){this._rowCount=0,this._rows=[]},_objectToArray:function(t,e){for(var i,n=e.fieldCount(),s=new Array(n),r=0;r<n;r++)i=e.getOrgFieldName(r),t.hasOwnProperty(i)&&(s[r]=t[i]);return s},_createRow:function(t,e,i){var n=new k_(this._provider,i);return this.provider().$_internalCalculateValues(n._values,n.rowId()),0<=t&&this._provider.setHasChildren(n,i[t]),0<=e&&this._provider.setIconIndex(n,i[e]),n},_createRow2:function(t,e,i){i=new k_(this._provider,i);return this.provider().$_internalCalculateValues(i._values,i.rowId()),void 0!==t&&this._provider.setHasChildren(i,t),void 0!==e&&this._provider.setIconIndex(i,e),i},_rowAdded:function(t,e){this._rowCount++,this._rows&&e.parent()===t&&this._rows.push(e)},_addRow:function(t,e,i,n,s){i=this._createRow(i,n,s);return e._insertChild(e.count(),i,!0,!0),this._rowAdded(t,i),i},_addRow2:function(t,e,i,n,s){i=this._createRow2(i,n,s);return e._insertChild(e.count(),i,!0,!0),this._rowAdded(t,i),i}}),y_=Rs.prototype,Ss=e("ArraySourceImpl",Rs,{init:function(t,e){y_.init.call(this,t,e),this.checkParentProc=null},_loadData:function(t,e,i,n,s,r){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var o=this.provider(),a=t.length,h=[],l=0;l<a;l++)k(t[h[l]=l])||(t[l]=this._objectToArray(t[l],o));n&&this.$_sortRows(h,t,i,0,a-1),this.provider().beginUpdate();try{this.$_buildTree(e||this.rootRow(),h,t,i,s,r)}finally{this.provider().endUpdate(!1)}return this.insertedCount()},$_sortRows:function(t,i,n,e,s){return t.sort(function(t,e){i[t][n],i[e][n]}.bind(this))},$_buildTree:function(r,t,e,o,i,n){function s(t,e,i){for(var n,s=i[o];t!=r;){if(n=t.getValue(o),this.checkParentProc){if(this.checkParentProc(n,s))return t}else if(0==s.indexOf(n))return t;t=t.parent()}return r}var a=t[0],h=this._createRow(i,n,e[a]),l=s(r,0,e[a]);if(l._insertChild(l.count(),h,!0,!0),this._rowAdded(r,h),1<t.length)for(var d=t.length,u=h,c=1;c<d;c++)a=t[c],h=this._createRow(i,n,e[a]),(l=s(u,0,e[a]))._insertChild(l.count(),h,!0,!0),this._rowAdded(r,h),u=h}}),x_=Ss.prototype,I_=e("ArrayTreeSource",Ss,{init:function(t,e){x_.init.call(this,t,e)},load:function(t,e,i,n,s,r){return this._loadData(e,t,i,n,s,r)}}),b_=(I_.prototype,e("CsvTreeSource",Ss,{init:function(t,e){x_.init.call(this,t,e)},load:function(t,e,i,n,s,r){e=Dr.csvToArray(this.provider(),e);return this._loadData(e,t,i,n,s,r)}})),E_=(b_.prototype,e("JsonTreeSource",Rs,{init:function(t,e){y_.init.call(this,t,e)},load:function(t,e,i,n,s){if(this._prepareLoad(t),e){e=Or.extractJson(e,i);if(e&&0<e.length){this.provider().beginUpdate();try{this.$_buildTree(this.provider(),t||this.rootRow(),e,i,n,s)}finally{this.provider().endUpdate(!1)}}}return this._rowCount},load2:function(t,e,i,n,s,r){if(this._prepareLoad(t),e){e=Or.extractJson(e,i);if(e&&0<e.length){this.provider().beginUpdate();try{this.$_buildTree2(this.provider(),t||this.rootRow(),e,n,s,r)}finally{this.provider().endUpdate(!1)}}}return this._rowCount},$_buildTree:function(t,f,e,m,g,p){t=t.getOrgFieldNames();!function t(e,i,n,s){for(var r=s.length,o=0,a=n.length;o<a;o++){for(var h=n[o],l=new Array(r),d=0;d<r;d++){var u=s[d];h.hasOwnProperty(u)&&(l[d]=h[u])}var c,_=e._addRow(f,i,g,p,l);h.hasOwnProperty(m)&&k(c=h[m])&&0<c.length&&t(e,_,c,s)}}(this,f,e,t)},$_buildTree2:function(t,f,e,m,g,p){t=t.getOrgFieldNames();!function t(e,i,n,s){for(var r=s.length,o=0,a=n.length;o<a;o++){for(var h=n[o],l=new Array(r),d=0;d<r;d++){var u=s[d];h.hasOwnProperty(u)&&(l[d]=h[u])}var c,_=e._addRow2(f,i,h[g],h[p],l);h.hasOwnProperty(m)&&k(c=h[m])&&0<c.length&&t(e,_,c,s)}}(this,f,e,t)}})),R_=(E_.prototype,e("XmlTreeSource",Rs,{init:function(t,e){y_.init.call(this,t,e)},load:function(t,e,i,n,s){if(this._prepareLoad(t),e){e="string"==typeof e?pe(e):e;if(e){e=Or.extractXml(e.documentElement,i);if(e&&0<e.length){this.provider().beginUpdate();try{this.$_buildTree(this.provider(),t||this.rootRow(),e,i,n,s)}finally{this.provider().endUpdate(!1)}}}}return this._rowCount},$_buildTree:function(t,h,e,l,d,u){var c=t.getFields(),_=t.getOrgFieldNames();!function t(e,i,n){for(var s=0,r=n.length;s<r;s++){var o=n[s],a=Dr.xmlToRow(o,c,_),a=e._addRow(h,i,d,u,a);(o=Or.extractXml(o,l))&&0<o.length&&t(e,a,o)}}(this,h,e,t.getFields())}})),S_=(R_.prototype,e("TreeDataRow",null,{init:function(t){re.init.call(this,!0),this._rowId=t&&t._nextRowId++,this._children=null,this._descendantCount=0},destroy:function(t){if(this._children&&0<this._children.length)for(var e=0;e<this._children.length;e++){var i=this._children[e];i._destroying||i.destroy()}this._children=null,this._super(t)},rowId:function(){return this._rowId},provider:function(){return null},parent:function(){return null},index:function(){return-1},level:function(){return 0},iconIndex:function(){return-1},hasChildren:function(){return!1},count:function(){return this._children?this._children.length:0},descendantCount:function(){return this._descendantCount},children:function(){return this._children?this._children.concat():null},descendants:function(){var t;return this._children?(function t(e,i){for(var n,s=e.count(),r=0;r<s;r++)i.push(n=e.getChild(r)),t(n,i)}(this,t=[]),t):null},ancestors:function(){var t=null,e=this.parent();if(e)for(t=[];e&&0<=e.rowId();)t.push(e),e=e.parent();return t},getChild:function(t){if(0<=t){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},getChildObjects:function(t,e,i,n){var s=this._children;if(s){var r=[];e=e||"rows",i=i||"iconIndex";for(var o=0,a=s.length;o<a;o++){var h=s[o],l=h.getObject();n&&(l._rowId=h._rowId),t&&(l[e]=h.getChildObjects(t,e,i,n)),l[i]=h.iconIndex(),r.push(l)}return r}return null},$_createTreeOutputRows:function(t,e,i){for(var n,s=[],r=(!function t(e,i,n){for(var s=0,r=e.length;s<r;s++){var o=e[s];i.push(e[s]),n&&o[n]&&o[n].length&&t(o[n],i,n)}}(t,s,i),this.provider()),o=r.fieldCount(),a=s.length,h=(e=e instanceof Ir?e:new Ir(e)).nullDateText(),l=e.nullText(),d=e.nanText(),u=0;u<o;u++){var c,_,f=r.getField(u),m=f.orgFieldName();if(f._dataType==S.DATETIME&&((c=e._datetimeCallback)||(_=e._datetimeWriter)||null!=h))if(c)for(n=0;n<a;n++)(g=s[n])[m]=c(g._rowId,m,g[m]);else for(n=0;n<a;n++){var g,p=(g=s[n])[m];g[m]=p?_?_.getText(g[m]):p:h}else if(f._dataType==S.BOOLEAN&&((c=e._booleanCallback)||(_=e._booleanFormatter)))if(c)for(n=0;n<a;n++)(g=s[n])[m]=c(g._rowId,m,g[m]);else for(n=0;n<a;n++)(g=s[n])[m]=_.formatValue(g[m]);else if(f._dataType==S.NUMBER&&((c=e._numberCallback)||(_=e._numberFormatter)||null!=d))if(c)for(n=0;n<a;n++)(g=s[n])[m]=c(g._rowId,m,g[m]);else for(n=0;n<a;n++){var w=(g=s[n])[m];g[m]=null==w||isNaN(w)?d:_?_.format(w):w}else if(null!=l)for(n=0;n<a;n++){w=(g=s[n])[m];g[m]=null==w?l:w}}for(var u=0,v=s.length;u<v;u++)delete s[u]._rowId},getOutput:function(t,e){var i;return t?((i=this.getObject())[e||"iconIndex"]=this.iconIndex(),i._rowId=this._rowId,this.$_createTreeOutputRows([i],t),i):null},getChildOutputObjects:function(t,e,i,n){e=this.getChildObjects(e,i,n,!0);return e&&t&&this.$_createTreeOutputRows(e,t,i),e},findById:function(t){if(this._children)for(var e,i=this._children.length,n=0;n<i;n++){if((e=this._children[n]).rowId()==t)return e;if(e=e.findById(t))return e}return null},indexOf:function(t){return this._children?this._children.indexOf(t):-1},_moveChild:function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(e<t)for(var n=t;e<n;n--)this._children[n]=this._children[n-1];else for(n=t;n<e;n++)this._children[n]=this._children[n+1];this._children[e]=i},_changeParent:function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent(),n=this.index();i._children.splice(n,1),i._descendantCountChanged(-1-this.descendantCount()),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount()),t._attach(this)},_insertChild:function(t,e,i,n){var s=this.provider();if(s&&!i){if(!s._checkClientState())return;s.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e)||(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount()),this._attach(e),n||e._changeRowState(v.CREATED,!0),this._doChildAdded(t,e),0))},insertChild:function(t,e,i){return this._insertChild(t,e,!1,i)},_addChild:function(t,e,i){return this._insertChild(this.count(),t,e,i)},addChild:function(t,e){return this._insertChild(this.count(),t,!1,e)},$_removeChild:function(t,e,i){return!(!i&&!this._doChildRemoving(t)||(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount()),this._detach(t),this._doChildRemoved(t),0))},_removeChild:function(t,e){var i=this.provider();if(!i||e||i._checkClientState()){if(t&&this._children)for(var n,s=this._children.length;s--;)if(this._children[s]===t){if(!(n=this.provider()).isSoftDeleting()||!n.isCheckStates())return this.$_removeChild(t,s,e);switch(t.rowState()){case v.CREATED:if(n.isDeleteCreated())return this.$_removeChild(t,s,e);t._changeRowState(v.CREATE_AND_DELETED,!0);break;case v.DELETED:case v.CREATE_AND_DELETED:break;default:t._changeRowState(v.DELETED,!0)}}return!1}},removeChild:function(t){return this._removeChild(t,!1)},_removeChildren:function(){this._children&&0<this._children.length&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},clearChildren:function(){var t=this.provider();t&&!t._checkClientState()||this._removeChildren()},_setChildren:function(t){this._children&&0<this._children.length&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&0<(e=t.length)){this._children||(this._children=[]);for(var n=0;n<e;n++){var s=t[n];this._children.push(s),i+=1+s.descendantCount(),this._attach(s)}}this._descendantCountChanged(i)},findChild:function(t,e){var i=this.provider();if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var n,s,r=[],o=[],a=t.length,h=0;h<a;h++)0<=(n="string"==typeof t[h]?i.getFieldIndex(t[h]):Number(t[h]))&&n<i.fieldCount()&&r.indexOf(n)<0&&(r.push(n),o.push(e[h]));for(s=r.length,h=0;h<s;h++)r[h]=i.getField(r[h]);return this.$_findChild(r,o)},$_findChild:function(t,e){for(var i,n,s,r=t.length,o=this.count(),a=0;a<o;a++){for(n=this._children[a],s=!0,i=0;i<r;i++)if(!t[i].equalValues(e[i],n.getValue(t[i].index()))){s=!1;break}if(s)return n;if(n=n.$_findChild(t,e))return n}return null},isAncestorOf:function(t){if(t&&t!==this){for(var e=t.parent();e&&e!==this;)e=e.parent();return e===this}return!1},_descendantCountChanged:function(t){this._descendantCount+=t;var e=this.parent();e&&e._descendantCountChanged(t)},clearRowStates:function(t,e){var i=this.provider();if(i){var n,s,r=[],t=t?[]:null,o=(this._collectStateRows(r,t),r.length),a=t?t.length:0;if(0!=o||0!=a){if(e)for(s=r.length,n=0;n<s;n++)r[n]._changeRowState(v.NONE,!0);else o&&i.changeRowStates(r,v.NONE);a&&i.deleteRows(t)}}},_collectStateRows:function(t,e){for(var i=this.count();i--;){var n=this.getChild(i),s=n.rowState();!e||s!=v.DELETED&&s!=v.CREATE_AND_DELETED?(s!=v.NONE&&t.push(n),n._collectStateRows(t,e)):e.push(n)}},$_clearOrgValues:function(){for(var t=this.count();t--;)this.getChild(t).$_clearOrgValues()},$_restoreState:function(t,e){if(t)for(var i=this.count();i--;)this.getChild(i).$_restoreState(!0,e);return!1},$_restoreRow:function(t,e){if(t)for(var i=this.count();i--;)this.getChild(i).$_restoreRow(!0,e);return!1},toTreeString:function(){for(var t=this.rowId(),e=new Array(this.level()+1).join("  "),i=0;i<this.count();i++)t+="\n"+e+this.getChild(i).toTreeString();return t},_attach:function(t){a()},_deatach:function(t){a()},_checkFieldIndex:function(t){var e=this.provider().fieldCount();if(t<0||e<=t)throw new yr("Field index is out of bounds: "+t)},_doChildAdding:function(t,e){var i=this.provider();return!i||i._rowAdding(this,t,e)},_doChildAdded:function(t,e){var i=this.provider();i&&i._rowAdded(e)},_doChildRemoving:function(t){var e=this.provider();return!e||e._rowRemoving(t)},_doChildRemoved:function(t){var e=this.provider();e&&e._rowRemoved(t)},_doCleared:function(){var t=this.provider();t&&t._rowCleared(this)}})),T_=S_.prototype,k_=e("TreeDataRowImpl",S_,{init:function(t,e){if(T_.init.call(this,t),this._parent=null,this._iconIndex=-1,this._hasChildren=!1,this._values=null,this._orgValues=null,this._state=v.NONE,this._extents=0,t&&e){var i,n=t.fieldCount(),s=Math.min(e.length,n);for(this._values=new Array(n),i=0;i<s;i++)this._values[i]=t.getField(i).readValue(e[i])}},destroy:function(t){this._orgValues=null,this._parent=null,this._values=null,this._super(t)},provider:function(){return this._parent?this._parent.provider():null},parent:function(){return this._parent},index:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent?this._parent.level()+1:0},hasChildren:function(){return this._hasChildren},setHasChildren:function(t){t!=this._hasChildren&&(this._hasChildren=t,t=this.provider())&&t.hasChildrenChanged(this)},iconIndex:function(){return this._iconIndex},setIconIndex:function(t){t=parseInt(t),(t=isNaN(t)?-1:t)!=this._iconIndex&&(this._iconIndex=t,t=this.provider())&&t._iconIndexChanged(this)},values:function(){return this._values?this._values.concat():[]},rowState:function(){return this._state},_changeRowState:function(t,e,i){var n,s=this.provider();return!(!s||!s.isCheckStates()||t==this._state||(n=this._state,(this._state=t)==v.UPDATED&&s._needOrgValues?this._orgValues=this._values.concat():n==v.updated&&this._orgValues&&(this._orgValues=null),e&&s._stateChanged(this,i),0))},getValue:function(t){if(this.provider()){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},setValue:function(t,e,i){var n,s,r=this.provider();if(r&&r._checkClientState()){if(r.refreshFieldFormats(),this._checkFieldIndex(t),!this._values)throw new Error("Row data is not loaded");e=(s=r.getField(t)).readValue(e),s.equalValues(e,this._values[t])||(s=r.isCheckStates()&&(this._state==v.NONE||!this._state),!i&&s&&r._needOrgValues&&(n=this._values.concat()),this._values[t]=e,r.$_internalCalculateValues(this._values,this.rowId()),!i&&s?(r._needOrgValues&&(this._orgValues=n),this._state=v.UPDATED,r._stateChanged(this)):r._needRestore&&this.$$_restoreState(r),r._valueChanged(this,t))}},getObject:function(){var t=this.provider();if(t){for(var e=t.fieldCount(),i={},n=0;n<e;n++)i[t.getOrgFieldName(n)]=this._values[n];return i}return null},update:function(t){return this.$_update(t,!1,!1)},updateStrict:function(t){return this.$_update(t,!0,!1)},_update:function(t,e){return this.$_update(t,!1,e)},_updateStrict:function(t,e){return this.$_update(t,!0,e)},$_update:function(t,e,i){var n=this.provider();if(n){if(!i){if(!n._checkClientState())return;n.refreshFieldFormats()}if(t&&(i||n._rowUpdating(this)))return this._internalUpdate(t,e,!0),n._rowUpdated(this),!0}return!1},copy:function(){var t=new k_(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e,i=this.count(),n=0;n<i;n++)e=this.getChild(n).copy(),t._addChild(e,!0,!0);return t},_attach:function(t){t._parent=this},_detach:function(t){t._parent===this&&(t._parent=null)},$_clearOrgValues:function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),this._super()},$_restoreState:function(t,e){var i=$$_restoreState(this.provider());return i&&e&&e.push(this),this._super(t,e),i},$_restoreRow:function(t,e){var i=!1;if(this._state===v.UPDATED){var n=this._orgValues;if(n){for(var s=this._values,r=0,o=Math.min(n.length,this.provider().fieldCount());r<o;r++)s[r]=n[r];this._state=v.NONE,e&&e.push(this),i=!0}}return this._super(t,e),i},$$_restoreState:function(t){if(this._state==v.UPDATED&&this._orgValues){for(var e=this._orgValues,i=this._values,n=(t=this.provider()).isStrictRestore(),s=0,r=t.fieldCount();s<r;s++){var o=i.length>s?i[s]:void 0,a=e.length>s?e[s]:void 0;if(n){if(!t.getField(s).equalValues(o,a))return!1}else if(!t.getField(s).sameValues(o,a))return!1}return this._state=v.NONE,!0}return!1},$_getUpdatedCells:function(){var t=this._orgValues,e=this._values,i=this.provider(),n=i.isStrictRestore(),s=[];if(!t||t.length<=0)return null;for(var r=0,o=i.fieldCount();r<o;r++){var a=e.length>r?e[r]:void 0,h=t.length>r?t[r]:void 0;i._fields[r].isCalculated()||(n?i.getField(r).equalValues(a,h)||s.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}):i.getField(r).sameValues(a,h)||s.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}))}return s},_setHasChildren:function(t){this._hasChildren=t},_setIconIndex:function(t){t=parseInt(t),this._iconIndex=isNaN(t)?-1:parseInt(t)},_internalUpdate:function(t,e,i){var n,s=!1,r=k(t),o=this.provider();if(o){var a,h,l,d=Math.min(o.fieldCount(),r?t.length:o.fieldCount()),u=o.isCheckStates()&&(this._state==v.NONE||!this._state);for(u&&o._needOrgValues&&(l=this._values.concat()),a=0;a<d;a++)n=o.getField(a),(r||t.hasOwnProperty(n._orgFieldName))&&(h=r?t[a]:t[n._orgFieldName],e&&void 0===h||(s=!o._needRestore||s||(e?!n.equalValues(this._values[a],n.readValue(h)):!n.sameValues(this._values[a],n.readValue(h))),this._values[a]=o.getField(a).readValue(h)));return o.$_internalCalculateValues(this._values,this.rowId()),u&&s?(l&&(this._orgValues=l),this._state=v.UPDATED,i&&o._stateChanged(this)):o._needRestore&&this.$$_restoreState(o),u&&s}}}),D_=e("RootTreeRow",S_,{init:function(t){this._super(t),this._provider=t},copy:function(){for(var t,e=this.count(),i=new D_(null),n=0;n<e;n++)t=this.getChild(n).copy(),i._addChild(t,!0,!0);return i._provider=this._provider,i},set:function(t){for(var e=[],i=0,n=t.count();i<n;i++)e.push(t.getChild(i).copy());this._setChildren(e)},provider:function(){return this._provider},rowId:function(){return-1},parent:function(){return null},level:function(){return 0},index:function(){return 0},hasChildren:function(){return!0},iconIndex:function(){return-1},setIconIndex:function(t){},values:function(){return null},rowState:function(){return v.NONE},_setHasChildren:function(){},_changeRowState:function(t,e){return!1},getValue:function(t){return I},setValue:function(t,e,i){},getObject:function(){return null},update:function(t,e){return!1},updateStrict:function(t,e){return!1},_attach:function(t){t._parent=this},_detach:function(t){t._parent===this&&(t._parent=null)}}),B_=e("TreeDataProvider",br,{init:function(){this._super()},rootRow:function(){return null}}),N=e("LocalTreeDataProvider",B_,{init:function(){this._super(),this._eventLock=0,this._resetLock=0,this._countDirty=!1,this._tagLock=!1,this._points=[],this._nextPoint=0,this._nextRowId=0,this._rootRow=new D_(this),this._rowMap=[],this._tags=new C_(this),this._needOrgValues=!1,this._needRestore=!1,this.checkParentProc=null,this._hideRowIds=[],this.calculateRuntime()},destroy:function(){this._destroying=!0,this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hideRowIds=null,this._super()},needOrgValues:function(){return this._needOrgValues},needRestore:function(){return this._needRestore},addTag:function(t){this._tags.add(t)},removeTag:function(t){this._tags.remove(t)},setRows:function(t,e,i,n,s){if(this._checkClientState()){var r,o=0,e=this.getFieldIndex(e);if(0<=e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),(r=new I_(this,this._rootRow)).checkParentProc=this.checkParentProc,o=r.load(null,t,e,i,this.getFieldIndex(n),this.getFieldIndex(s)),this._checkSum(o),this.$_prepareMap()}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),o}},setCsvRows:function(t,e,i,n,s){if(this._checkClientState()){var r,o=0,e=this.getFieldIndex(e);if(0<=e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),(r=new b_(this,this._rootRow)).checkParentProc=this.checkParentProc,o=r.load(null,t,e,i,this.getFieldIndex(n),this.getFieldIndex(s)),this._checkSum(o),this.$_prepareMap()}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),o}},setXmlRows:function(t,e,i,n){if(this._checkClientState()){var s=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),s=new R_(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(n)),this._checkSum(s),this.$_prepareMap()}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s}},setJsonRows:function(t,e,i,n){if(this._checkClientState()){if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new E_(this,this._rootRow);this._rowCount=s.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(n)),this.$_prepareMap()}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this._rowCount}},setJsonRows2:function(t,e,i,n,s){if(this._checkClientState()){if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new E_(this,this._rootRow);this._rowCount=r.load2(null,t,e,i,n,s),this.$_prepareMap()}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this._rowCount}},appendDataRows:function(t,e,i,n,s,r){if(this._checkClientState()){var o=0,i=this.getFieldIndex(i);if(0<=i){var a=new I_(this,this._rootRow);a.checkParentProc=this.checkParentProc,this.beginUpdate();try{this.refreshFieldFormats(),o=a.load(t,e,i,n,this.getFieldIndex(s),this.getFieldIndex(r))}finally{this.endUpdate(!1),0<o&&(e=a.insertedRows())&&0<(o=e.length)&&this._rowsAdded(t,e),a=null}}return o}},appendCsvRows:function(t,e,i,n,s,r){if(this._checkClientState()){var o,a=0,i=this.getFieldIndex(i);if(0<=i){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),(o=new b_(this,this._rootRow)).checkParentProc=this.checkParentProc,a=o.load(t,e,i,n,this.getFieldIndex(s),this.getFieldIndex(r)),this._checkSum(a)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),a}},appendXmlRows:function(t,e,i,n,s){if(this._checkClientState()){var r=0;if(e){var o=new R_(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=o.load(t,e,i,this.getFieldIndex(n),this.getFieldIndex(s))}finally{this.endUpdate(!1),0<r&&(e=o.insertedRows())&&0<(r=e.length)&&this._rowsAdded(t,e),o=null}}return this.fireRowCountChanged(),r}},appendJsonRows:function(t,e,i,n,s){if(this._checkClientState()){var r=0;if(e){var o=new E_(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=o.load(t,e,i,this.getFieldIndex(n),this.getFieldIndex(s))}finally{this.endUpdate(!1),0<r&&(e=o.insertedRows())&&0<(r=e.length)&&this._rowsAdded(t,e),o=null}}return this._fireRowCountChanged(),r}},fillValue:function(t,e){if(!(Object.keys(t).length<=0)){var i,n=[],s=[];for(i in t){n.push(+i);for(var r={},o=0;o<t[i].length;o++)r[this._fields[t[i][o]].orgFieldName()]=e;var a=this.rowById(i);a&&a._internalUpdate(r,!1,!1)&&s.push(a)}s.length&&this._fireRowStatesChanged(s),n.length&&this._fireRowListUpdated(n)}},setIconIndex:function(t,e){return t instanceof k_&&t.iconIndex()!=e?(t._setIconIndex(e),!0):t.iconIndex()!=e&&(t.setIconIndex(e),!0)},setHasChildren:function(t,e){return(t instanceof S_&&t.hasChildren()!=e||t.hasChildren()!=e)&&(t._setHasChildren(e),!0)},getAllRows:function(){return[]},getJsonRows:function(t,e,i){return[]},getChildCount:function(t){return(t||this._rootRow).count()},getRows:function(t){return(t||this._rootRow).children()},getDescendantCount:function(t){return(t||this._rootRow).descendantCount()},getDescendants:function(t,e){var i=t||this._rootRow;return(e=1<arguments.length?e:0)<=0?i.descendants():e>i.level()?(function t(e,i,n){for(var s,r=e.count(),o=0;o<r;o++)i.push(s=e.getChild(o)),n>s.level()&&t(s,i,n)}(i,i=[],e),i):null},getRow:function(t,e){return(t||this._rootRow).getChild(e)},hasData:function(t){return null!=this.rowById(t)},rowById:function(t){var e=this._rowMap[t];return e||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},createRow:function(t,e,i){var n=null;if(this.refreshFieldFormats(),k(t))n=new k_(this,t);else if(t){var s,r=new Array(this.fieldCount());for(s in t){var o=this.getFieldIndex(s);0<=o&&(r[o]=t[s])}n=new k_(this,r)}return n&&(this.$_internalCalculateValues(n._values,n.rowId()),n._iconIndex=e,n._hasChildren=i),n},clearRows:function(){this._checkClientState()&&(this._clearRows(),this._eventLock<=0)&&(this._fireRefresh(),this._fireRowCountChanged())},removeRows:function(n){if(this._checkClientState()&&n&&!(n.length<1)){n.sort(function(t,e){return t.level()-e.level()});var t,e=n;for(r=n.length;r--;)1<n[r].level()&&!function(t,e){for(var i=e;0<=i;i--)if(n[i].isAncestorOf(t))return;return 1}(n[r],r-1)&&n.splice(r,1);if(n.length<1||!this._rowsRemoving(n))return!1;if(this._softDeleting&&this._checkStates){for(var i,s=[],r=n.length-1;0<=r;r--){switch(i=!1,(t=n[r]).rowState()){case v.CREATED:this.isDeleteCreated()||(i=t._changeRowState(v.CREATE_AND_DELETED,!1),n.splice(r,1));break;case v.DELETED:case v.CREATE_AND_DELETED:n.splice(r,1);break;default:i=t._changeRowState(v.DELETED,!0,!1),n.splice(r,1)}i&&s.push(t)}0<s.length&&this._fireRowStatesChanged(s)}return this.deleteRows(e),!0}},deleteRows:function(t){if(this._checkClientState()&&t&&0<t.length){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;0<=i;i--){var n=t[i];(n&&n.parent())._removeChild(n,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},moveRowSibling:function(t,e){var i,n,s;if(t instanceof S_)return 0!=e&&!!this._checkClientState()&&(s=(i=t.parent()).children().length,n=t.index(),0!=(e=(s=Math.min(Math.max(n+e,0),s-1))-n))&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(n,s),this._fireRowSiblingMoved(t,e),!0);throw new TypeError("row is not TreeDataRow.")},changeRowParent:function(t,e,i){if(!(t instanceof S_))throw new TypeError("row is not TreeDataRow.");if(!(t instanceof S_))throw new TypeError("parent is not TreeDataRow.");if(t===e)throw new Error("parent must not be self.");if(t.isAncestorOf(e))throw new Error("can`t move to child of descendant.");var n=t.parent();if(n===e&&i==t.index())return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var s=e._children.length;return i=Math.min(Math.max(i,0),s),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof D_||this.setHasChildren(e,!0),n instanceof D_||0!=n.count()||this.setHasChildren(n,!1),this._fireRowParentChanged(t,e,i),!0)},getRowState:function(t){t=this.rowById(t);return t?t.rowState():v.NONE},setRowState:function(t,e,i){t=this.rowById(t);t&&(this._checkStates||i)&&e!=(i=t.rowState())&&t._changeRowState(e,!0,!!v.isDeleted(i)||void 0)},changeRowStates:function(t,e){for(var i,n=t.length,s=[],r=0;r<n;r++)(i=t[r])._changeRowState(e,!1)&&s.push(i);0<s.length&&this._fireRowStatesChanged(s)},clearRowStates:function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},setRowStates:function(t,e,i,n){if(this._checkClientState()){for(var s,r=n?null:[],o=t.length,a=0;a<o;a++)(s=this.rowById(t[a]))&&(this._checkStates||i)&&s._changeRowState(e,n)&&!n&&r.push(s);!n&&0<r.length&&this._fireRowStatesChanged(r)}},$_collectStateRows:function(t,e,i){for(var n,s=t.count(),r=0;r<s;r++)(n=t.getChild(r)).rowState()==e&&i.push(n.rowId()),this.$_collectStateRows(n,e,i)},getStateRows:function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},$_collectAllStateRows:function(t,e){for(var i,n=t.count(),s=0;s<n;s++){switch((i=t.getChild(s)).rowState()){case v.CREATED:e.created.push(i.rowId());break;case v.UPDATED:e.updated.push(i.rowId());break;case v.DELETED:e.deleted.push(i.rowId());break;case v.CREATE_AND_DELETED:e.createAndDeleted.push(i.rowId())}this.$_collectAllStateRows(i,e)}},getAllStateRows:function(){var t={created:[],updated:[],deleted:[],createAndDeleted:[]};return this.$_collectAllStateRows(this._rootRow,t),t},$_getRowStateCount:function(t,e){for(var i=t.count(),n=0,s=0;s<i;s++){var r=t.getChild(s);0<=e.indexOf(r.rowState())&&n++,n+=this.$_getRowStateCount(r,e)}return n},getRowStateCount:function(t){return this.$_getRowStateCount(this._rootRow,t)},restoreUpdatedStates:function(t){this.restoreUpdatedRows(t)},restoreUpdatedRows:function(t){if(this._checkClientState()){var e,i=[];if(null==t)this._rootRow.$_restoreRow(!0,i);else for(var n=(t=k(t)?t:[t]).length;n--;)(e=this.rowById(t[n]))&&e.$_restoreRow(!1,i);1==i.length?this._fireRowStateChanged(i[0]):1<i.length&&this._fireRowStatesChanged(i)}},getUpdatedCells:function(t){var e=this.restoreMode();if(e!=ls.AUTO&&e!=ls.EXPLICIT)return null;if(null==t)t=this.getStateRows(v.UPDATED);else if(!k(t)){if("number"!=typeof t)return null;t=[t]}if(!k(t))return null;for(var i=[],n=0,s=t.length;n<s;n++){var r,o=this.rowById(t[n]);o&&(r=o.$_getUpdatedCells())&&0<r.length&&i.push({__rowId:o._rowId,updatedCells:r})}return i},canUpdateRow:function(t){return!0},canInsertRow:function(t){return!0},canDeleteRow:function(t){return!0},toTreeString:function(){return this._rootRow.toTreeString()},rootRow:function(){return this._rootRow},rowCount:function(){return this._rootRow._descendantCount},immediateUpdate:function(){return!0},isSummarized:function(){return!0},beginUpdate:function(){this._checkClientState(),this._eventLock++},endUpdate:function(t){this._checkClientState(),t=!(0<arguments.length)||t,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),this._countDirty)&&this._fireRowCountChanged(),this._resetLock=0,this._countDirty=!1)},findRow:function(t,e){return t&&0<t.length&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},$_extractTreeRowIds:function(t){if(t){for(var e=t.length,i=new Array(e),n=0;n<e;n++)i[n]=t[n].rowId();return i}return null},$_searchDataRow:function(t,e,i,n,s,r){var o=t.length;if(!(o<1)){var a=Math.min(e.length,i.length);if(!(a<1)){for(var h,l,d=!n||n.allFields,u=n&&n.caseSensitive,c=n&&n.partialMatch,_=null,f=[],m=0;m<a;m++)f[m]=this.getField(e[m]).dataType();for(s=Math.max(0,s),r=Math.min(o-1,r),h=s;h<=r;h++){if(p=!0)for(m=0;m<a;m++){switch(l=this.rowById(t[h]).getValue(e[m]),f[m]){case S.DATETIME:case S.DATE:var g,p=i[m]instanceof Date?ae(i[m],l,u,c):(_||(g=/[.]/.test(i[m])?"yyyy.MM.dd":/[/]/.test(i[m])?"yyyy/MM/dd":/[-]/.test(i[m])?"yyyy-MM-dd":"yyyyMMdd",_=new Se(g)),ae(i[m],l&&_.getText(l),u,c));break;default:p=ae(i[m],l,u,c)}if(p&&!d)return t[h];if(!p&&d)break}if(p)return t[h]}}}return-1},searchDataRow:function(t,e,i,n,s,r){if(n=3<arguments.length?n:0,s=!(4<arguments.length)||s,r=5<arguments.length?r:null,i=i instanceof Wn?i:i?new Wn(i):null,null!=r){var o=this.rowById(r);if(!o)return-1;o=this.$_extractTreeRowIds(o.descendants())}else o=this.$_extractTreeRowIds(this._rootRow.descendants());if(!k(o)||o.length<=0)return-1;var a=o.length,h=Math.max(0,o.indexOf(n)),l=-1;if(t&&0<t.length&&e&&0<e.length){for(var d,u=t.length,c=[],_=0;_<u;_++)d=parseFloat(t[_]),!isNaN(d)&&d|0==d?c.push(d):0<=(d=this.getFieldIndex(t[_]))&&c.push(d);0<c.length&&(l=h<a?this.$_searchDataRow(o,c,e,i,h,a-1):-1)<0&&s&&0<h&&(l=this.$_searchDataRow(o,c,e,i,0,h-1))}return l},$_searchData:function(t,e,i,n,s,r,o){var a=this.rowCount();if(!(a<1)){for(var h,l,d=n&&n.caseSensitive,u=n&&n.partialMatch,c=this.fieldCount(),_=e.length,f=null,m=[],g=0;g<c;g++)m[g]=this.getField(g).dataType();for(s=Math.max(0,s),r=Math.min(a-1,r),(o=Math.max(0,o))>=e.length&&(s++,o=0),h=s;h<=r;h++)for(g=s<h?0:o;g<_;g++){var p=e[g];if(0<=p&&p<c){switch(l=this.rowById(t[h]).getValue(p),m[p]){case S.DATETIME:case S.DATE:var w,v=i instanceof Date?ae(i,l,d,u):(f||(w=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd",f=new Se(w)),ae(i,l&&f.getText(l),d,u));break;default:v=ae(i,l,d,u)}if(v)return{dataRow:t[h],fieldIndex:p,searchFieldIndex:g}}}}return null},searchData:function(t,e,i,n,s,r,o){var a,h=3<arguments.length?h:0;if(s=4<arguments.length?s:0,r=!(5<arguments.length)||r,i=i instanceof zn?i:i?new zn(i):null,null!=(o=5<arguments.length?o:null)){var l=this.rowById(o);if(!l)return null;l=this.$_extractTreeRowIds(l.descendants())}else l=this.$_extractTreeRowIds(this._rootRow.descendants());if(!k(l)||l.length<=0)return null;a=l.length,h=Math.max(0,l.indexOf(n));var d=null;if(!t||t.length<1){t=[];for(var u=this.getFields(),c=0;c<u.length;c++)t.push(u[c].orgFieldName())}if(t&&0<t.length&&null!=e){for(var _,f=t.length,m=[],g=0;g<f;g++)_=parseFloat(t[g]),!isNaN(_)&&_|0==_?m.push(_):m.push(this.getFieldIndex(t[g]));0<m.length&&(s=Math.max(0,s),d=!(d=h<a?this.$_searchData(l,m,e,i,h,a-1,s):null)&&r&&0<h?this.$_searchData(l,m,e,i,0,h-1,0):d)&&(d.fieldName=this.getOrgFieldName(d.fieldIndex))}return d},isDataChanged:function(t,e){var i;return!((t=this.rowById(t)).rowState()!==v.UPDATED||!t._orgValues)&&!!t._orgValues&&(i=t._orgValues[e],t=t._values[e],e=this._fields[e])&&e.dataType()!==S.OBJECT&&!e.sameValues(i,t)},$_hideDataRows:function(t,e){if(null!=t){for(var i,n=this._hideRowIds.length,s=[],r=0,o=(t=k(t)?t:[t]).length;r<o;r++)i=t[r],null!=this._findRowById(i)&&(s.push(i),e?this._hideRowIds.indexOf(i)<0&&this._hideRowIds.push(i):0<=(i=this._hideRowIds.indexOf(i))&&this._hideRowIds.splice(i,1));this._hideRowIds.length!==n&&this._fireRowHided(s,e)}},hideDataRows:function(t){this.$_hideDataRows(t,!0)},showDataRows:function(t){this.$_hideDataRows(t,!1)},clearHideDataRows:function(){0<this._hideRowIds.length&&(this._hideRowIds=[],this._fireRowHided([],!1))},getHideDataRows:function(){var t=this._hideRowIds.concat();return t.sort(function(t,e){return t-e}),t},isHideDataRow:function(t){return!!this.rowById(t)&&0<=this._hideRowIds.indexOf(t)},hideCount:function(){return this._hideRowIds&&k(this._hideRowIds)?this._hideRowIds.length:0},setOptions:function(t){this._super(t)},getOptions:function(){jt(this._super(),{})},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(t,e){this.$_resetOrgValues()},$_getSortedRows:function(t){var e;switch(this.getField(t).dataType()){case S.NUMBER:e=this.compareNumbers.bind(this);break;case S.DATETIME:e=this.compareDates.bind(this);break;case S.BOOLEAN:e=this.compareBools.bind(this);break;case S.OBJECT:e=this.compareObjects.bind(this);break;default:e=this.compareValues.bind(this)}var i=this.getDescendants(this._rootRow,0);return this.$_sortRows(i,t,e,0,i.length-1),i},getDistinctValues:function(t,e,i){e=1<arguments.length?e:-1,this._checkFieldIndex(t);var n=[];if(0<(e=e<0?this.getDescendantCount(this._rootRow):e)){var s=this.getField(t).dataType()==S.NUMBER,r=this.$_getSortedRows(t);i===ps.DESCENDING&&r.reverse(),n.push(r[0]._values[t]);for(var o,a=1,h=r.length;a<h&&!(e<=n.length);a++)this.equalValues(t,r[a-1],r[a])||(o=r[a]._values[t],-1!=n.indexOf(o))||s&&isNaN(o)||n.push(o)}return n},_doFieldsReset:function(){this._super(),this._clearRows(),this._fireReset()},refreshClients:function(){this._fireRefreshClient()},savePoint:function(t){var e,i;if(this._checkClientState())return t=!(0<arguments.length)||t,0<this._fields.length&&0<this._rootRow.count()?(e=this._rootRow.copy(),i=this._nextPoint++,t||e.clearRowStates(!1,!1),this._points.push({id:i,data:e,nextRowId:this._nextRowId}),i):-1},rollback:function(t){if(this._checkClientState()){t=0<arguments.length?t:0;for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireReset();break}}}},$_removeSavePoints:function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},clearSavePoints:function(){this.$_removeSavePoints(0)},getSavePoints:function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},equalValues:function(t,e,i){var n;return e===i||(n=this._fields[t],e=e.getValue(t),i=i.getValue(t),n.equalValues(e,i))},sameValues:function(t,e,i){var n;return e===i||(n=this._fields[t],e=e.getValue(t),i=i.getValue(t),n.sameValues(e,i))},compareValues:function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),null===e?null===i?0:-1:null===i||i<e?1:e<i?-1:0):0},compareNumbers:function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),isNaN(e)?isNaN(i)?0:-1:isNaN(i)||i<e?1:e<i?-1:0):0},compareBools:function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),e&&!i?1:!e&&i?-1:0):0},compareDates:function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),e instanceof Date?!(i instanceof Date)||i<e?1:e<i?-1:0:i instanceof Date?-1:0):0},compareObjects:function(t,e,i){var n=this._values[e],s=this._values[i];return n===s?0:(n=n?n[t]:null,s=s?s[t]:null,n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0)},$_summarizeChildren:function(t,e){for(var i,n,s=e.field,r=t.count(),o=0;o<r;o++)n=(i=t.getChild(o)).getValue(s),isNaN(n)||(e.sum+=n,e.datacount++,n<e.min&&(e.min=n),n>e.max&&(e.max=n)),this.$_summarizeChildren(i,e)},$_summarizeVars:function(t,e){for(var i,n,s=e.field,r=e.avg,o=t.count(),a=0,h=0;h<o;h++)n=(i=t.getChild(h)).getValue(s),isNaN(n)||(a+=Math.pow(n-r,2)),a+=this.$_summarizeVars(i,e);return a},summarize:function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount();return!(i<1||(t.count=i,t.sum=0,t.min=Number.MAX_VALUE,t.max=Number.MIN_VALUE,t.datacount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataavg=0===t.datacount?NaN:t.sum/t.datacount,e&&(i=this.$_summarizeVars(this._rootRow,t),t.varsp=i/t.count,t.vars=i/(t.count-1)),0))},summarizeRange:function(t,e,i){if(null==t||null==e)return!1;t.clear();var n,s=e.length;if(s<1)return!1;var r=0,o=t.field,a=0,h=NaN,l=NaN;for(c=0;c<s;)if(n=e[c++].getValue(o),!isNaN(n)){a=h=l=n,r++;break}for(;c<s;)n=e[c++].getValue(o),isNaN(n)||(a+=n,n<h&&(h=n),l<n&&(l=n),r++);if(t.count=s,0<r&&(t.sum=a,t.min=h,t.max=l,t.avg=a/s,t.datacount=r,t.dataavg=0===r?NaN:a/r,i))if(1<s){for(var d=0,u=t.avg,c=0;c<s;c++)n=e[c++].getValue(o),isNaN(n)||(d+=Math.pow(n-u,2));t.varsp=d/s,t.vars=d/(s-1)}else t.varsp=0,t.vars=0;return!0},getHandler:function(){return this.fireObjectEvent(s.GET_HANDLER)},$_resetOrgValues:function(){this._needOrgValues=this._checkStates&&this._restoreMode!=ls.NONE,this._needRestore=this._needOrgValues&&this._restoreMode==ls.AUTO,this._rootRow.$_clearOrgValues()},_findRowById:function(t){return this._rootRow.findById(t)},_checkSum:function(t){if(t!=this.rowCount())throw new Error("Invalid row count: "+t+" <> "+this.rowCount())},_clearRows:function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&0<this._rootRow.descendantCount()||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},$_prepareMap:function(){var r=this;!function t(e){var i=Pt(e.children());if(i)for(var n=0;n<i.length;n++){var s=i[n];t(r._rowMap[s._rowId]=s)}}(this._rootRow)},$_removeMap:function(t){if(t=Pt(t))for(var e=0;e<t.length;e++){var i=t[e];this._rowMap[i._rowId]=void 0,this.$_removeMap(i._children),i._destroying||i.destroy()}},_summarizeChildren:function(t,e){for(var i,n,s=e.field,r=t.count(),o=0;o<r;o++)n=(i=t.getChild(o)).getValue(s),isNaN(n)||(e.sum+=n,n<e.min&&(e.min=n),n>e.max&&(e.max=n)),this.summarizeChildren(i,e)},_summarizeVars:function(t,e){for(var i,n,s=e.field,r=e.avg,o=t.count(),a=0,h=0;h<o;h++)n=(i=t.getChild(h)).getValue(s),isNaN(n)||(a+=Math.pow(n-r,2)),a+=summarizeChildren(i,e);return a},_summarize:function(t,e){return null!=t&&(t.clear(),!(this.rowCount()<1||(t.count=0,t.sum=0,t.min=Number.MIN_VALUE,t.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e&&(e=this._summarizeVars(this._rootRow,t),t.vars=e/t.count),0)))},_iconIndexChanged:function(t){this._fireIconIndexChanged(t)},_hasChildrenChanged:function(t){this._fireHasChildrenChanged(t)},_stateChanged:function(t,e){this._fireRowStateChanged(t,e)},_valueChanged:function(t,e){this._fireValueChanged(t,e)},_rowAdding:function(t,e,i){return this._fireRowAdding(t,e,i)},_rowAdded:function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},_rowsAdded:function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},_rowRemoving:function(t){return this._fireRowRemoving(t)},_rowRemoved:function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},_rowsRemoving:function(t){return this._fireRowsRemoving(t)},_rowsRemoved:function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},_rowCleared:function(t){t&&(t=t.children(),this._tags.removeRows(t),this._eventLock<=0)&&(this._fireRowsRemoved(t),this._fireRowCountChanged())},_rowUpdating:function(t){return this._fireRowUpdating(t)},_rowUpdated:function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},_fireDisposed:function(){this._eventLock<=0&&this.fireEvent(N.DISPOSED)},_fireReset:function(){this._eventLock<=0&&this.fireEvent(N.RESET)},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(N.REFRESH)},_fireRefreshClient:function(){this._eventLock<=0&&this.fireEvent(N.REFRESH_CLIENT)},_fireCleared:function(){this._eventLock<=0&&this.fireEvent(N.CLEARED)},_fireRowCountChanged:function(){this._eventLock<=0&&this.fireEvent(N.ROW_COUNT_CHANGED,this.rowCount())},_fireRowAdding:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROW_ADDING,t,e,i)},_fireRowAdded:function(t){this._eventLock<=0&&this.fireEvent(N.ROW_ADDED,t)},_fireRowsAdded:function(t,e){this._eventLock<=0&&this.fireEvent(N.ROWS_ADDED,t,e)},_fireRowRemoving:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROW_REMOVING,t)},_fireRowRemoved:function(t){this._eventLock<=0&&this.fireEvent(N.ROW_REMOVED,t)},_fireRowsRemoving:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROWS_REMOVING,t)},_fireRowsRemoved:function(t){this._eventLock<=0&&this.fireEvent(N.ROWS_REMOVED,t)},_fireRowUpdating:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROW_UPDATING,t)},_fireRowUpdated:function(t){this._eventLock<=0&&this.fireEvent(N.ROW_UPDATED,t)},_fireRowListUpdated:function(t){this._eventLock<=0&&this.fireEvent(N.LIST_UPDATED,t)},_fireValueChanging:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(N.VALUE_CHNAGED,t,e,i)},_fireValueChanged:function(t,e){this._eventLock<=0&&this.fireEvent(N.VALUE_CHNAGED,t,e)},_fireIconIndexChanged:function(t){this._eventLock<=0&&this.fireEvent(N.ICON_INDEX_CHANGED,t)},_fireHasChildrenChanged:function(t){this._eventLock<=0&&this.fireEvent(N.HAS_CHILDREN_CHANGED,t)},_fireRowStateChanged:function(t,e){this._eventLock<=0&&this.fireEvent(N.ROW_STATE_CHANGED,t,e)},_fireRowStatesChanged:function(t){this._eventLock<=0&&this.fireEvent(N.ROW_STATES_CHANGED,t)},_fireRowSiblingMoving:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROW_SIBLING_MOVING,t,e)},_fireRowSiblingMoved:function(t,e){this._eventLock<=0&&this.fireEvent(N.ROW_SIBLING_MOVED,t,e)},_fireRowParentChanging:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(N.ROW_PARENT_CHANGING,t,e,i)},_fireRowParentChanged:function(t,e,i){this._eventLock<=0&&this.fireEvent(N.ROW_PARENT_CHANGED,t,e,i)},_fireRowHided:function(t,e){this._eventLock<=0&&this.fireEvent(N.ROW_HIDED,t,e)}}),le=(N.DISPOSED="onTreeDataProviderDisposed",N.RESET="onTreeDataProviderReset",N.REFRESH="onTreeDataProviderRefresh",N.REFRESH_CLIENT="onTreeDataProviderRefreshClient",N.CLEARED="onTreeDataProviderCleared",N.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",N.ROW_ADDING="onTreeDataProviderRowAdding",N.ROW_ADDED="onTreeDataProviderRowAdded",N.ROWS_ADDED="onTreeDataProviderRowsAdded",N.ROW_REMOVING="onTreeDataProviderRowRemoving",N.ROW_REMOVED="onTreeDataProviderRowRemoved",N.ROWS_REMOVING="onTreeDataProviderRowsRemoving",N.ROWS_REMOVED="onTreeDataProviderRowsRemoved",N.ROW_UPDATING="onTreeDataProviderRowUpdating",N.ROW_UPDATED="onTreeDataProviderRowUpdated",N.LIST_UPDATED="onTreeDataProviderRowListUpdated",N.VALUE_CHANGING="onTreeDataProviderValueChanging",N.VALUE_CHNAGED="onTreeDataProviderValueChanged",N.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",N.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",N.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",N.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",N.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",N.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",N.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",N.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged",N.ROW_HIDED="onTreeDataProviderRowHideChanged",N.GET_HANDLER="getHandler",e("LocalTreeDataProviderObserver",Rr,{init:function(){this._super()},onTreeDataProviderDisposed:function(t){},onTreeDataProviderReset:function(t){},onTreeDataProviderRefresh:function(t){},onTreeDataProviderRefreshClient:function(t){},onTreeDataProviderCleared:function(t){},onTreeDataProviderRowCountChanged:function(t,e){},onTreeDataProviderRowAdding:function(t,e,i){return!0},onTreeDataProviderRowAdded:function(t,e){},onTreeDataProviderRowsAdded:function(t,e,i){},onTreeDataProviderRowRemoving:function(t,e){return!0},onTreeDataProviderRowRemoved:function(t,e){},onTreeDataProviderRowsRemoving:function(t,e){return!0},onTreeDataProviderRowsRemoved:function(t,e){},onTreeDataProviderRowUpdating:function(t,e){return!0},onTreeDataProviderRowUpdated:function(t,e){},onTreeDataProviderRowListUpdated:function(t,e){},onTreeDataProviderValueChanging:function(t,e,i,n){return!0},onTreeDataProviderValueChanged:function(t,e,i){},onTreeDataProviderIconIndexChanged:function(t,e){},onTreeDataProviderHasChildrenChanged:function(t,e){},onTreeDataProviderRowStateChanged:function(t,e){},onTreeDataProviderRowStatesChanged:function(t,e){},onTreeDataProviderRowSiblingMoving:function(t,e,i){return!0},onTreeDataProviderRowSiblingMoved:function(t,e,i){},onTreeDataProviderRowParentChanging:function(t,e,i,n){return!0},onTreeDataProviderRowParentChanged:function(t,e,i,n){}})),O_=e("TreeDataLoader",null,{init:function(t){re.init.call(this),this._provider=t},load:function(t,e,i){if(i=new gr(i),!this.$_checkEmpty(e,i))switch(this.$_prepareLoad(e,i),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,i);case"xml":return this.$_loadXml(e,i);case"csv":return this.$_loadCsv(e,i)}return 0},$_loadJson:function(t,e){var i,n,s;return(t="string"==typeof t?JSON.parse(t):t)?(i=e.childrenField||e.children,n=e.iconField||e.icon,e.fillMode==Mr.APPEND?(s=-1===e.parentId?this._provider.rootRow():this._provider.rowById(e.parentId),this._provider.appendJsonRows(s,t,e.rows,i,n)):this._provider.setJsonRows(t,e.rows,i,n)):0},$_loadXml:function(t,e){var i,n,s;return(t="string"==typeof t?pe(t):t)&&t.documentElement?(i=e.childrenField||e.children,n=e.iconField||e.icon,e.fillMode==Mr.APPEND?(s=this._provider.rowById(e.parentId),this._provider.appendXmlRows(s,t,e.rows,i,n)):this._provider.setXmlRows(t,e.rows,i,n)):0},$_loadCsv:function(t,e){var i=e.start,n=e.count,s=e.quoted,r=e.delimiter,t=Dr.csvToArray(this._provider,t,i,n,s,r);return t&&0<t.length?(i=e.treeField||e.tree,n=e.childrenField||e.children,s=e.iconField||e.icon,r=e.needSorting||e.sorting,e.fillMode==Mr.APPEND?(e=this._provider.rowById(e.parentId),this._provider.appendDataRows(e,t,i,r,n,s)):this._provider.setRows(t,i,r,n,s)):0},$_fillEmpty:function(t){t.fillMode===Mr.SET&&this._provider.setRows(null)},$_checkEmpty:function(t,e){return!t&&(this.$_fillEmpty(e),!0)},$_prepareLoad:function(t){var e=null;t.filters&&(e=new kr(this._provider.filterRuntime(),t.filters),t.filterMode)&&e.setFilterMode(t.filterMode)}}),L=e("TreeItem",C,{init:function(t){this._super(),this._dataRow=t,this._footer=null},destroy:function(){this._destroying=!0,this._dataRow=null,this._super()},isChecked:function(){var t=this._dataRow;return t&&0!=(1&t._extents)},$_setChecked:function(t){var e=this._dataRow;e&&(e._extents=t?1|e._extents:-2&e._extents)},isCheckable:function(){var t=this._dataRow;return!t||0==(4&t._extents)},$_setCheckable:function(t){var e=this._dataRow;e&&(e._extents=t?-5&e._extents:4|e._extents)},iconHeight:0,row:function(){return this._dataRow},rowId:function(){return this._dataRow?this._dataRow.rowId():-1},iconIndex:function(){return this._dataRow.iconIndex()},hasChildren:function(){return 0<this.count()||this._dataRow.hasChildren()},rootItem:function(){for(var t=this;1<t.level();)t=t.parent();return t},lastVisible:function(){return this.isExpanded()&&0<this.count()?this.isLastVisible():this},createFooter:function(){this._footer||(this._footer=new TreeItemFooter,this._attachItem(this._footer))},dataRow:function(){return this._dataRow?this._dataRow.rowId():-1},dataId:function(){return this._dataRow?this._dataRow.rowId():-1},descendantCount:function(){return this._dataRow.descendantCount()},rowState:function(){return this._dataRow.rowState()},isLeaf:function(){return 0==this.count()},footer:function(){return this._footer},isEditable:function(){return!0},summaryMode:function(){return Ts.AGGREGATE},setExpanded:function(t){var e;t!=this.isExpanded()&&(e=this.provider())&&(t?e.expand(this,!1,!1):e.collapse(this))},isResizable:function(){return!0},canEdit:function(){return!0},getData:function(t){return this._dataRow.getValue(t)},setData:function(t,e){this._dataRow.setValue(t,e)},setItem:function(t,e){this._super(t,e),e._addChildren(t.children()),t.clear()},exchange:function(t,e){this.exchangeItems(t,e)},moveChild:function(t,e){var i=t+e,n=this._children[t];if(e<0)for(var s=t;i<s;s--)this._children[s]=this._children[s-1];else for(s=t;s<i;s++)this._children[s]=this._children[s+1];this._children[i]=n},changeParent:function(t,e){this._parent.remove(this),t&&t.insert(e,this)},getRowData:function(){return this._dataRow&&this._dataRow._values.concat()}}),M_=(L.$_tempTreeItem=new L,L.getTemp=function(t){return L.$_tempTreeItem._dataRow=t,L.$_tempTreeItem},L.prototype,e("RootTreeItem",L,{init:function(t){this._super(null),this._provider=t},id:function(){return NaN},provider:function(){return this._provider},level:function(){return 0},isExpanded:function(){return!0},setExpanded:function(t){},isLeaf:function(){return!1},isVisible:function(){return!0},dataSource:function(){return this._provider.dataSource()}})),F_=e("TreeItemProvider",Gr,{init:function(){this._super(!0),this._cellStyles=new A_(this),this._editableMap=new L_(this),this._filters={},this._filterRuntime=new gc,this._filtered=!1,this._sorter=new z_,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._labelComparer={},this._visibleItems=new r_(this),this._itemMap=[],this._itemCount=0,this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null,this._filterLock=0},destroy:function(){this._destroying=!0,this._cellStyles=null,this._editableMap=null,this._filters={},this._filterRuntime=null,this._sorter=null,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._visibleItems=null,this._itemMap=[],this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null,this._super()},sortMode:ms.AUTO,onTreeDataProviderDisposed:function(t){this.provider().removeTag(this._cellStyls),this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.setDataSource(null)},onTreeDataProviderReset:function(t){var e;this.$_clearItems(),this.$_resetSummary(),this.hasFilters()&&(e=[],this._filterRuntime.setDataSource(this.dataSource()),this._addParentNodeOnFiltering)&&this.$_prepareFiltering(e,this._rootItem),this.$_buildTree(e),this._fireReset()},onTreeDataProviderRefresh:function(t){this._refreshItems()},onTreeDataProviderRefreshClient:function(t){this._fireRefreshClient()},onDataProvderCleared:function(t){this._refreshItems()},onTreeDataProviderRowCountChanged:function(t,e){},onTreeDataProviderRowAdding:function(t,e,i){return!0},onTreeDataProviderRowAdded:function(t,e){var i,n;this.$_needSort()?this._saveAndRefresh():(i=this._itemMap[e.parent().rowId()],(n=this.$_internalAddItem(i,e))?(this.$_buildItems(n),this.$_clearSummary(),i.isExpanded()?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()),this._checkableTag&&(this._checkableTag.addRow(e,!1),0<e.parent().level())&&this._checkableTag.addRow(e.parent(),!1)},onTreeDataProviderRowsAdded:function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var n,s,r,o=this._itemMap[e.rowId()];if(o&&i&&0<(r=i.length)){for(n=0;n<r;n++)s=i[n],(s=this.$_internalAddItem(o,s))&&this.$_buildItems(s);this.$_clearSummary(),o.isExpanded()?this._expandItem(o,!0,!1,0,!1):this._fireItemChanged(o),this._checkableTag&&(this._checkableTag.addRows(i),0<e.level())&&this._checkableTag.addRow(e)}}},onTreeDataProviderRowRemoving:function(t,e){return!0},onTreeDataProviderRowRemoved:function(t,e){var i,e=this._itemMap[e.rowId()];e&&(i=e.parent(),this.$_internalRemoveItem(e),this.$_clearSummary(),i.isExpanded())&&i.isVisible()&&(this._visibleItems.remove(e),this._fireRefresh())},onTreeDataProviderRowsRemoving:function(t,e){return!0},onTreeDataProviderRowsRemoved:function(t,e){for(var i,n,s=e.length,r=!1,o=0;o<s;o++)i=e[o],(i=this._itemMap[i.rowId()])&&(n=i.parent(),this.$_internalRemoveItem(i),n.isExpanded())&&n.isVisible()&&(this._visibleItems.remove(i),r=!0);this.$_clearSummary(),r&&this._fireRefresh()},onTreeDataProviderRowUpdating:function(t,e){return!0},onTreeDataProviderRowUpdated:function(t,e){var i;this.$_needSort()?this._saveAndRefresh():(i=this._itemMap[e.rowId()],this.$_clearSummary(),this._fireItemUpdated(i)),this._checkableTag&&this._checkableTag.updateRow(e)},onTreeDataProviderRowListUpdated:function(e,t){this.$_needSort()?this._saveAndRefresh():this.$_clearSummary(),this._checkableTag&&(t=t.map(function(t){return e.rowById(t)}),this._checkableTag.updateList(t)),this._fireRefresh()},onTreeDataProviderValueChanging:function(t,e,i){return!0},onTreeDataProviderValueChanged:function(t,e,i){var n;this.$_needSort()?this._saveAndRefresh():(n=this._itemMap[e.rowId()],this.$_clearSummary(),this._fireItemUpdated(n)),this._checkableTag&&this._checkableTag.updateRow(e)},onTreeDataProviderIconIndexChanged:function(t,e){e=this._itemMap[e.rowId()];e&&e.isVisible()&&this._fireItemChanged(e)},onTreeDataProviderHasChildrenChanged:function(t,e){e=this._itemMap[e.rowId()];e&&e.isVisible()&&this._fireItemChanged(e)},onTreeDataProviderRowStateChanged:function(t,e,i){var n=this._itemMap[e.rowId()];this.$_internalRowStateChanged(n,i),this._checkableTag&&this._checkableTag.updateRow(e),!n&&i&&this._saveAndRefresh()},onTreeDataProviderRowStatesChanged:function(t,e){var i,n,s,r,o,a,h=e.length,l=!1;if(1==h)s=e[0],l=!(n=this._itemMap[s.rowId()]),this.$_internalRowStateChanged(n),this._checkableTag&&this._checkableTag.updateRow(s),l&&this._saveAndRefresh();else if(0<h){if(a=!1,this._hideDeleted)for(r=0,o=e.length;r<o;r++)n=this._itemMap[e[r].rowId()],l=l||!n,n&&v.isDeleted(n.rowState())&&(i=n.parent(),this.$_internalRemoveItem(n),i.isExpanded()&&i.isVisible()&&this._visibleItems.remove(n),a=!0);this._checkableTag&&this._checkableTag.changeStates(e),a&&this.$_clearSummary(),l?this._saveAndRefresh():this._fireRefresh()}},onTreeDataProviderRowSiblingMoved:function(t,e,i){this.$_needSort()||(e=this._itemMap[e.rowId()])&&(e.parent().moveChild(e.childIndex(),i),this.$_resetVisibleItems(),this._fireRefresh())},onTreeDataProviderRowParentChanged:function(t,e,i,n){e=this._itemMap[e.rowId()];e&&(i=this._itemMap[i.rowId()],this.$_needSort()&&(n=i?i.count():0),e.changeParent(i,n),this.$_resetVisibleItems(),this._fireRefresh())},onTreeDataProviderRowHideChanged:function(t,e,i){var n,s,r,o,a;if(i){for(n=0,s=e.length;n<s;n++)r=e[n],(r=this._itemMap[r])&&(o=r.parent(),this.$_internalRemoveItem(r),o.isExpanded()&&o.isVisible()&&this._visibleItems.remove(r),a=!0);a&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},dataSource:function(){return this._dataSource},setDataSource:function(t){t!==this._dataSource&&(this.$_clearItems(),this.$_resetSummary(),this._dataSource&&(this._dataSource.removeTag(this._cellStyles),this._dataSource.removeTag(this._editableMap),this._dataSource.removeListener(this)),this._dataSource=b(t,B_),this._dataSource&&(this.$_buildTree(),this._dataSource.addTag(this._cellStyles),this._dataSource.addTag(this._editableMap),this._dataSource.addListener(this,0)),this._fireReset())},itemCount:function(){return this._visibleItems.count()},rowCount:function(){return this._itemCount},getItem:function(t){return 0<=t&&t<this._visibleItems.count()?this._visibleItems.getItem(t):null},_refreshItems:function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},_saveAndRefresh:function(){var t=[];this.$_saveExpanded(t,this._rootItem),this.$_clearItems(),this.$_buildTree(t),this._fireRefresh()},getIndexOfRow:function(t){t=this._itemMap[t];return t&&t.isVisible()?t.index():-1},getItemOfRow:function(t){return this._itemMap[t]},fixedCount:function(){return 0},setFixed:function(t,e,i){},maxItemCount:function(){return 0},setMaxItemCount:function(t){},findItem:function(t,e,i,n,s){var r=b(this.dataSource(),B_);if(r){var o=this.itemCount();if(!(o<1)){var a=Math.min(t.length,e.length);if(!(a<1)){for(var h,l,d,u,c=!i||i.allFields,_=i&&i.caseSensitive,f=i&&i.partialMatch,m=null,g=[],p=(p=i.dataComparer)&&"function"==typeof p?p:null,w=0;w<a;w++)g[w]=r.getField(t[w]).dataType();for(n=Math.max(0,n),s=Math.min(this._visibleItems.count()-1,s),h=n;h<=s;h++){if(C=0<=(u=(l=this._visibleItems.getItem(h)).dataRow()))for(w=0;w<a;w++){switch(d=l.getData(t[w]),g[w]){case S.DATETIME:case S.DATE:var v,C=e[w]instanceof Date?p?p(u,t[w],e[w],d):ae(e[w],d,_,f):(m||(v=/[.]/.test(e[w])?"yyyy.MM.dd":/[/]/.test(e[w])?"yyyy/MM/dd":/[-]/.test(e[w])?"yyyy-MM-dd":"yyyyMMdd",m=new Se(v)),p?p(u,t[w],e[w],d&&m.getText(d)):ae(e[w],d&&m.getText(d),_,f));break;default:C=p?p(u,t[w],e[w],d):ae(e[w],d,_,f)}if(C&&!c)return h;if(!C&&c)break}if(C)return h}}}}return-1},findCell:function(t,e,i,n,s,r){var o=this.dataSource();if(o){var a=this.itemCount();if(!(a<1)){for(var h,l,d,u,c=i&&i.caseSensitive,_=i&&i.partialMatch,f=this.dataSource().fieldCount(),m=t.length,g=null,p=[],w=(w=i.dataComparer)&&"function"==typeof w?w:null,v=0;v<f;v++)p[v]=o.getField(v).dataType();for(n=Math.max(0,n),s=Math.min(this._visibleItems.count()-1,s),(r=Math.max(0,r))>=t.length&&(n++,r=0),h=n;h<=s;h++)if(0<=(u=(l=this._visibleItems.getItem(h)).dataRow()))for(v=n<h?0:r;v<m;v++){var C=t[v];if(0<=C&&C<f){switch(d=l.getData(C),p[C]){case S.DATETIME:case S.DATE:var y,x=e instanceof Date?w?w(u,C,e,d):ae(e,d,c,_):(g||(y=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",g=new Se(y)),w?w(u,C,e,d&&g.getText(d)):ae(e,d&&g.getText(d),c,_));break;default:x=w?w(u,C,e,d):ae(e,d,c,_)}if(x)return{itemIndex:h,fieldIndex:C,searchFieldIndex:v}}}}}return null},expandWhenGrouping:!0,footerWhenExpanded:!0,setFooterWhenExpanded:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t,this.$_resetVisibleItems(),this._resetItemIndicies(),this._fireRefresh())},footerWhenCollapsed:!0,setFooterWhenCollapsed:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t,this.$_resetVisibleItems(),this._resetItemIndicies(),this._fireRefresh())},aggregateMode:"leaf",setAggregateMode:function(){value!=this._aggregateMode&&(this._aggregateMode=value,this.$_resetSummary(),this._fireRefresh())},summaryMode:"aggregate",setSummaryMode:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},groupSummaryMode:"aggregate",setGroupSummaryMode:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},hideDeleted:!1,setHideDeleted:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},checkableExpression:null,setCheckableExpression:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t)&&(this._checkableTag=new V_(this,t),this._dataSource)&&this._checkableTag.connect(this._dataSource)},isSorted:function(){return this._sortFields&&0<this._sortFields.length},$_needSort:function(){return this._sortFields&&0<this._sortFields.length&&this._sortMode==ms.AUTO},addObserver:function(t){t&&this._observers.indexOf(t)<0&&this._observers.push(t)},removeObserver:function(t){t=this._observers.indexOf(t);0<=t&&this._observers.splice(t,1)},insertItem:function(t,e,i,n){var s=this._visibleItems,r=(t.isCollapsed()&&s.expand(t,!1),s.indexOf(t.getItem(i)));if(n){t.insert(i+1,e);for(var o=s.count(),a=t.level()+1;++r<o&&!(s.getItem(r).level()<=a););}else t.insert(i,e);s.insert(e,r)},appendItem:function(t,e){for(var i,n=this._visibleItems,s=(t.isCollapsed()&&n.expand(t,!1),i=0<t.count()?n.indexOf(t.getItem(t.count()-1)):n.indexOf(t),n.count()),r=t.level();++i<s&&!(n.getItem(i).level()<=r););t.add(e),n.insert(e,i)},removeItem:function(t){this._visibleItems.remove(t),t.parent().remove(t)},$_calcLevel:function(t,e,i){for(var n,s=t.count(),r=e,o=0;o<s;o++)(n=t.getItem(o))&&(r=Math.max(r,e+1),i&&!n.isExpanded()||(r=Math.max(r,this.$_calcLevel(n,e+1,i))));return r},getLevels:function(t){return this.$_calcLevel(this._rootItem,0,t)},$_setExpanded:function(t,e,i){if(this._setExpanded(t,!0),this._dataSource.setHasChildren(t.row(),!1),e)for(var n,s=t.count(),r=0;r<s;r++)(n=t.getItem(r))instanceof L&&(n.isExpanded()||n.level()<i)&&this.$_setExpanded(n,!0,i)},_expandItem:function(t,e,i,n,s){if(t&&(e||!t.isExpanded())&&(!s||this._fireExpanding(t))){this._visibleItems.collapse(t),this._visibleItems.expand(t,i,n),this._resetItemIndicies(t===this._rootItem?0:t.index()),this.$_setExpanded(t,i,0<n?t.level()+n:1e6);try{this._fireRefresh()}finally{s&&this._fireExpanded(t)}}},expand:function(t,e,i){this._expandItem(t,i,e,0,!0)},expandAll:function(t){this._expandItem(this._rootItem,!0,!0,0<t?t+1:0,!0)},$_setCollapsed:function(t,e){if(this._setExpanded(t,!1),e)for(var i,n=t.count(),s=0;s<n;s++)(i=t.getItem(s))instanceof L&&this.$_setCollapsed(i,!0)},_collapseItem:function(t,e,i,n){if(t&&(e||t.isExpanded())&&(!n||this._fireCollapsing(t))){this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index());try{this._fireRefresh()}finally{n&&this._fireCollapsed(t)}}},collapse:function(t,e){this._collapseItem(t,!1,e,!0)},collapseAll:function(){this._collapseItem(this._rootItem,!0,!0,!0)},$_saveExpanded:function(t,e){for(var i,n=e.count(),s=0;s<n;s++)(i=b(e.getItem(s),L))&&(t[i.rowId()]=32|(i.isExpanded()?16:0),0<i.count())&&this.$_saveExpanded(t,i)},orderBy:function(t,e,i,n){n=!(3<arguments.length)||n,this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=t?t.length:0,r=e?e.length:0,o=i?i.length:0,a=0;a<s;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(ps.ASCENDING),a<o?this._sortCases.push(i[a]):0<o?this._sortCases.push(i[o-1]):this._sortCases.push(ws.SENSITIVE);var h=[];this.$_saveExpanded(h,this._rootItem),this.$_clearItems(),this.$_buildTree(h);try{n&&this._fireRefresh()}finally{this._fireSorted()}},getSortFields:function(){return this._sortFields.concat()},getSortDirections:function(){return this._sortDirections.concat()},getSortCases:function(){return this._sortCases.concat()},getLabelComparer:function(){return this._labelComparer},setLabelComparer:function(t){this._labelComparer=t},beginFiltering:function(){this._filterLock++},$_prepareFiltering:function(t,e){for(var i,n=e._dataRow.count(),s=e.rowId(),r=s<=-1||this.$_selectItem(e),o=0;o<n;o++)(i=new L(e._dataRow._children[o]))&&!this.dataSource().isHideDataRow(i.rowId())&&(r=this.$_prepareFiltering(t,i)||r);return t[s]=r&&0<=s?32|t[s]:-33&t[s],r},endFiltering:function(t,e,i){var n=[];(t=!(0<arguments.length)||t)&&(this._filterRuntime.setDataSource(this.dataSource()),this._addParentNodeOnFiltering)&&this.$_prepareFiltering(n,this._rootItem),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),t)&&0==this._filterLock&&this.applyFilters(n,e,i)},hasFilter:function(t){t=this._filters[t];return!!t&&0<t.length},addFilter:function(t,e){this._fireFilterAdded();var i=this._filters[t],t=(i||(this._filters[t]=i=[]),new Ro(e));return i.push(t),t},removeFilter:function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],n=i.length;n--;)if(i[n]===e){i.splice(n,1),this.applyFilters();break}}},clearFilters:function(t){var e;this._filtered&&this._filters[t]&&(this._fireFilterCleared(t),e=this._filters[t])&&0<e.length&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters())},clearAllFilters:function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters())},hasFilters:function(){for(var t in this._filters){t=this._filters[t];if(t&&0<t.length)return!0}return!1},applyFilters:function(t,e,i){var n,s=this.dataSource().fieldCount();for(n in this._filters)s<=n&&(this._filters[n]=null);if(this._filtered=this.hasFilters(),this._filtered)for(var r in this._filters){var o=this._filters[r];if(o)for(var a=o.length;a--;)o[a].prepare(this._filterRuntime,this._dataSource)}if(0==this._filterLock){this.$_clearItems(),this.$_buildTree(t);try{this._fireRefresh()}finally{this._fireFiltered(e,i)}}},getItemByRow:function(t){return t?this._itemMap[t.rowId()]:null},getCheckedRows:function(){var t=[];return function t(e,i){if(e instanceof L)for(var n,s,r=e.count(),o=0;o<r;o++)(s=e.getItem(o)).isChecked()&&(n=s.row())&&i.push(n),t(s,i)}(this._rootItem,t),t},getCheckedRowIds:function(){var t=[];return function t(e,i){if(e instanceof L)for(var n,s,r=e.count(),o=0;o<r;o++)(s=e.getItem(o)).isChecked()&&0<=(n=s.dataRow())&&i.push(n),t(s,i)}(this._rootItem,t),t},resetCheckables:function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},applyCheckables:function(){this._checkableTag?this._checkableTag.setRows():V_.clearCheckables(this),this._fireRefresh()},_createRootItem:function(){return this._rootItem=new M_(this),this._setExpanded(this._rootItem,!0),this._rootItem},$_collectItems:function(t,e){for(var i,n=t.count(),s=0;s<n;s++)(i=t.getItem(s))instanceof L&&(e.push(i),this.$_collectItems(i,e))},getAllItems:function(){var t=[];return this.$_collectItems(this._rootItem,t),t},$_checkChildren:function(t,e,i){for(var n,s=t.count(),r=0;r<s;r++)!(n=t.getItem(r))||i&&!n.isCheckable()||this._setCheckItem(n,e),n instanceof L&&this.$_checkChildren(n,e,i)},_clearChecked:function(){this.$_checkChildren(this._rootItem,!1,!1)},checkAll:function(t,e,i,n){e?this._super(t,e,i,n):(this.$_checkChildren(this._rootItem,t,i),n?this._fireItemAllChecked(t):this._fireRefreshClient())},hasCellstyle:function(){return!this._cellStyles.isEmpty()},setCellStyle:function(t,e,i){this._cellStyles.setCellStyle(t,e,i)},setCellStyles:function(t,e,i){this._cellStyles.setCellStyles(t,e,i)},removeCellStyle:function(t){this._cellStyles.removeCellStyle(t)},clearCellStyles:function(){this._cellStyles.clearCellStyles()},checkCellStyle:function(t,e){return this._cellStyles.checkCellStyle(t,e)},getCellStyle:function(t,e){return this._cellStyles.getCellStyle(t,e)},setCellEditable:function(t,e,i){this._editableMap.setEditable(t,e,i)},setCellReadOnly:function(t,e,i){this._editableMap.setReadOnly(t,e,i)},getCellEditable:function(t,e){return this._editableMap.getEditable(t,e)},getCellReadOnly:function(t,e,i){return this._editableMap.getReadOnly(t,e)},setCellCursor:function(t,e,i){this._editableMap.setCursor(t,e,i)},getCellCursor:function(t,e){return this._editableMap.getCursor(t,e)},setCellEditor:function(t,e,i){this._editableMap.setEditor(t,e,i)},getCellEditor:function(t,e){return this._editableMap.getEditor(t,e)},clearEditableMap:function(t){return this._editableMap.clearEditableMap(t)},getSum:function(t){t=this.$_getSummary(t);return t?t.sum:NaN},getMax:function(t){t=this.$_getSummary(t);return t?t.max:NaN},getMin:function(t){t=this.$_getSummary(t);return t?t.min:NaN},getAvg:function(t){t=this.$_getSummary(t);return t?t.avg:NaN},getVar:function(t){t=this.$_getSummary(t);return t?t.vars:NaN},getVarp:function(t){t=this.$_getSummary(t);return t?t.varsp:NaN},getStdev:function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.vars):NaN},getStdevp:function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.varsp):NaN},getDataCount:function(t){t=this.$_getSummary(t);return t?t.datacount:0},getDataAvg:function(t){t=this.$_getSummary(t);return t?t.dataavg:NaN},$_internalAddItem:function(t,e,i){var n=L.getTemp(e),s=this.dataSource();return(n=this._hideDeleted&&v.isDeleted(n.rowState())||s.isHideDataRow(e.rowId())?null:n)&&(i&&32&i[e.rowId()]||this.$_selectItem(n))?(n=new L(e),t.insert(e.index(),n),this._itemCount++,this._itemMap[e.rowId()]=n):null},$_internalRemoveItem:function(t){t&&(t.parent().remove(t),this._itemCount--,this._itemMap[t.row().rowId()]=void 0)},$_internalRowStateChanged:function(t,e){var i;e=null==e||e,t&&(this._hideDeleted&&v.isDeleted(t.rowState())?(i=t.parent(),this.$_internalRemoveItem(t),this.$_clearSummary(),i.isExpanded()&&i.isVisible()&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()):this._fireItemChanged(t))},_setItem:function(t,e){this._visibleItems.setItem(t.index(),e),this._resetItemIndex(t.index())},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this.fixedCount()),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},$_clearItems:function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},$_selectField:function(t,e,i){for(var n=t.length,s=0;s<n;s++)if(t[s].select(this._filterRuntime,e,i))return!0;return!1},$_selectItem:function(t){var e,i;if(!t)return!1;for(i in this._filters)if((e=this._filters[i])&&!this.$_selectField(e,t,i))return!1;return!!t&&!0},$_buildItems:function(t,e){for(var i,n,s=t.row(),r=s.count(),o=0;o<r;o++)i=s.getChild(o),(n=this.$_internalAddItem(t,i,e))&&(e&&this._setExpanded(n,0!=(16&e[i.rowId()])),0<i.count())&&this.$_buildItems(n,e)},$_sortItem:function(t){var e,i,n=t.count();for(1<n&&this.$_sort(t,0,0,n-1),e=0;e<n;e++)(i=t.getItem(e))instanceof L&&this.$_sortItem(i)},$_sort:function(t,e,i,n){var s=this._sortFields[e],r=this._sortDirections[e],o=this._dataSource,a=this._sortCases[e]==ws.INSENSITIVE;this._sorter.run(t,s,r,a,i,n,e+1==this._sortFields.length);var h=(o.getField(s).dataType()==S.TEXT&&a?o.equalTexts:o.equalValues).bind(o);if(e+1<this._sortFields.length){for(var l=i,d=l;l<n;)h(s,t.getItem(++l).row(),t.getItem(l-1).row())||(this.$_sort(t,e+1,d,l-1),d=l);d<n&&this.$_sort(t,e+1,d,n)}},$_buildTree:function(t){this._rootItem._dataRow=this._dataSource.rootRow(),this._itemMap[this._rootItem._dataRow.rowId()]=this._rootItem,this.$_buildItems(this._rootItem,t),this.$_clearSummary();for(var e=this._dataSource.fieldCount(),i=this._sortFields,n=this._sortDirections,s=this._sortCases,r=i.length;r--;)(i[r]<0||i[r]>=e)&&(i.splice(r,1),n.splice(r,1),s.splice(r,1));this.isSorted()&&0<this._rootItem.count()&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&(!t||t.length<=0)&&this._checkableTag.setRows()},$_resetSummary:function(){this._summaryMap=[]},$_resetGroupSummary:function(){},$_clearSummary:function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},$_getSummary:function(t){var e,i=this._summaryMap[t];return i||(e=this.dataSource())&&e.canSummarize(t)&&(i=new mr(t),this._summaryMap[t]=i),i&&0==i.count&&0<this.itemCount()&&this.$_summarize(i),i},$_summarize:function(t){var e=this.dataSource();if(e)if(this._filtered||this.isHideDeleted()||0<e.hideCount()){for(var i=this._rootItem.getDescendants(!1),n=i.length,s=[],r=0;r<n;r++){var o=i[r];o instanceof L&&!e.isHideDataRow(o.rowId())&&s.push(o.row())}t.count=s.length,e.summarizeRange(t,s,this._summaryMode==Ts.STATISTICAL)}else t.count=e.rowCount(),e.summarize(t,this._summaryMode==Ts.STATISTICAL)},_fireItemChanged:function(t){this._eventLock<=0&&this.fireEvent(F_.ITEM_CHANGED,t)},_fireExpanding:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(F_.EXPANDING,t)},_fireExpanded:function(t){this._eventLock<=0&&this.fireEvent(F_.EXPANDED,t)},_fireCollapsing:function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(F_.COLLAPSING,t)},_fireCollapsed:function(t){this._eventLock<=0&&this.fireEvent(F_.COLLAPSED,t)},_fireParentChanging:function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(F_.PARENT_CHANGING,t,e,i)},_fireParentChanged:function(t,e,i){this._eventLock<=0&&this.fireEvent(F_.PARENT_CHANGED,t,e,i)}}),N_=(F_.ITEM_CHANGED="onTreeItemProviderItemChanged",F_.EXPANDING="onTreeItemProviderExpanding",F_.EXPANDED="onTreeItemProviderExpanded",F_.COLLAPSING="onTreeItemProviderCollapsing",F_.COLLAPSED="onTreeItemProviderCollapsed",e("TreeEditItem",L,{init:function(t,e,i){this._super(e?e.row():null),this._provider=t,this._item=e,this._state=i,this._values=[],this._started=!1,this._checkDiff=!1,this._strictDiff=!1},destroy:function(){this._destroying=!0,this._values=null,this._super()},values:function(){return this._values.concat()},setValues:function(t){var e,i,n,s,r,o=this.dataSource(),a=o.fieldCount();if(k(arr))for(a=Math.min(a,t.length),e=0;e<a;e++)n=o.getField(e),s=this._values[e],r=n.readValue(arr[e]),this._values[e]=r,this._started&&parent&&!n.equalValues(s,r)&&this._provider._editItemCellUpdated(this,e,s,r);else if(t)for(e=0;e<a;e++)i=o.getOrgFieldName(e),t.hasOwnProperty(i)&&(n=o.getField(e),s=this._values[e],r=n.readValue(t[i]),this._values[e]=r,this._started)&&parent&&!n.equalValues(s,r)&&this._provider._editItemCellUpdated(this,e,s,r)},beginEdit:function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},setValue:function(t,e){var i=this.dataSource();if(t<0&&t>=i.fieldCount())throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),n=this._values[t];e=i.readValue(e),this._values[t]=e,this._started&&this.parent()&&!i.equalValues(n,e)&&this._provider._editItemCellUpdated(this,t,n,e)},dataSource:function(){return this._provider.dataSource()},itemState:function(){return this._state},rowState:function(){return this._item?this._item.rowState():v.NONE},iconIndex:function(){return this._item?this._super():-1},hasChildren:function(){return!!this._item&&this._super()},dataRow:function(){return this._item?this._super():-1},isExpanded:function(){return!!this._item&&this._item.isExpanded()},getData:function(t){if(t<0&&t>=this.dataSource().fieldCount())throw new RangeError("field index is out of bounds: "+t);return this._values[t]},setData:function(t,e){var i=this.dataSource();if(t<0&&t>=i.fieldCount())throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),n=this._values[t],s=(e=i.readValue(e),!this._checkDiff);(s=s||(this._strictDiff?!i.equalValues(n,e):!i.sameValues(n,e)))&&(this._values[t]=e,this.parent())&&(this._provider._editItemCellUpdated(this,t,n,e),this._provider._editItemCellEdited(this,t))},getRowData:function(){return this._values.concat()},getRowObject:function(){var t=this.dataSource();if(t){for(var e=t.fieldCount(),i={},n=0;n<e;n++)i[t.getOrgFieldName(n)]=this._values[n];return i}return null}})),L_=e("TreeCellEditableMap",rr,{init:function(t){this._super(),this._owner=t,this._editableMap=[]},destroy:function(){this._editableMap=null,this._super()},isEmpty:function(){return 0==this._styleMap.length&&!this._styleMap[-1]},setReadOnly:function(t,e,i){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._readOnly=i},setEditable:function(t,e,i){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._editable=i},getReadOnly:function(t,e){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._readOnly},getEditable:function(t,e){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._editable},setCursor:function(t,e,i){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._cursor=i},getCursor:function(t,e){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._cursor},setEditor:function(t,e,i){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]=this._editableMap[t]||[];t[e]=t[e]||{},t[e]._editor=i},getEditor:function(t,e){t=this._owner.getItemOfRow(t).rowId();t=this._editableMap[t]&&this._editableMap[t][e];return t&&t._editor},removeEditableMap:function(t,e){var i;null!=(t=this._owner.getItemOfRow(t).rowId())&&((e=arguments.length<2?-1:e)<0?delete this._editableMap[t]:(i=this._editableMap[t])&&delete i[e])},clearEditableMap:function(t){var e;return(0!==this._editableMap.length||null!=this._editableMap[-1])&&(e=0<=(t=t?t.dataId():-1)?this._editableMap[t]:void 0,this._editableMap=[],e&&(this._editableMap[t]=e),!0)},getWritable:function(t,e){var i=this.getReadOnly(t,e),t=this.getEditable(t,e);return!i&&t},connect:function(t){},disconnect:function(){},clearRows:function(){this._editableMap.length=0},setRows:function(){},setRowCount:function(t){},addRow:function(t){},addRows:function(t,e){},removeRow:function(t){},removeRows:function(t){},updateRow:function(){},updateRows:function(t,e){},setValue:function(t,e){},moveRow:function(t,e){},moveRows:function(t,e,i){}}),A_=e("TreeCellStyleMap",null,{init:function(t){this._super(),this._owner=t,this._styleMap={}},isEmpty:function(){for(var t in this._styleMap)return!1;return!0},connect:function(t){},disconnect:function(){},clearRows:function(){this._styleMap={}},setRows:function(){},addRow:function(t){},addRows:function(t){},removeRow:function(t){if(t){var e=t.descendants();if(e){for(var i=e.length;i--;)delete this._styleMap[e[i].rowId];delete this._styleMap[t.rowId()]}}},removeRows:function(t){for(var e=t.length;e--;)this.removeRow(t[e])},updateRow:function(){},setCellStyle:function(t,e,i){t=this._owner.getItemOfRow(t),t=t?t.row():null;if(null!=t)if(e<0)this._styleMap[t.rowId()]=i;else{var n=this._styleMap[t.rowId()];if(n)if(k(n))n[e]=i;else{for(var s=this._owner.dataSource().fieldCount(),r=[],o=0;o<s;o++)r[o]=n;this._styleMap[t.rowId()]=r}(r=k(r=this._styleMap[t.rowId()])?r:[])[e]=i,this._styleMap[t.rowId()]=r}},setCellStyles:function(t,e,i){if(e&&!(e.length<1)&&i){var n,s,r,o,a=this._owner.dataSource(),h=a.fieldCount();if(k(i)){for(o=i.concat(),r=Math.min(h,o.length),n=0;n<r;n++)s=parseInt(o[n]),isNaN(s)||s<0?o[n]=-1:o[n]=s;for(var l,d,u,c=this,_=a,f=e,m=o,g=f.length,p=Math.min(m.length,_.fieldCount()),w=0;w<g;w++)if(k(u=f[w]))for(l=0;l<p;l++)0<=(d=m[l])&&(d=t.getStyle(u[d]))&&c.setCellStyle(w,l,d)}else{for(var v in o={},i)s=parseInt(i[v]),0<=(s=isNaN(s)?a.getFieldIndex(i[v]):s)&&s<h&&(o[v]=s);for(var C,y,x,I,b=this,E=e,R=o,S=E.length,T=0;T<S;T++)if(I=E[T])for(C in R)y=R[C],(x=t.getStyle(I[C]))&&b.setCellStyle(T,y,x)}}},removeCellStyle:function(t){for(var e in this._styleMap){var i=this._styleMap[e];if(k(i))for(var n=i.length;n--;)i[n]===t&&(i[n]=null);else this._styleMap[e]===t&&delete this._styleMap[e]}},clearCellStyles:function(){this._styleMap={}},checkCellStyle:function(t,e){t=this._styleMap[t];return k(t)?!!t[e]:!!t},getCellStyle:function(t,e){var t=this._owner.getItemOfRow(t),t=t?t.row():null;return t?k(t=this._styleMap[t.rowId()])?t[e]:t:null}}),V_=e("TreeCheckableTag",null,{init:function(t,e){this._super(),this._owner=t,this._exprNode=ni.Default.parse(e,["value","values"]),this._runtime=new vc},connect:function(t){this._runtime.setDataSource(t)},disconnect:function(){},clearRows:function(){V_.clearCheckables(this._owner)},setRows:function(){for(var t=this._owner.itemCount();t--;){var e=this._owner.getItem(t);e instanceof L&&this.$_setCheckable(e,!0)}},addRow:function(t,e){e=!(1<arguments.length)||e;var i=this._owner.getItemOfRow(t.rowId());i instanceof L&&this.$_setCheckable(i,e)},addRows:function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId());i instanceof L&&this.$_setCheckable(i,!0)}},updateRow:function(t){t=this._owner.getItemOfRow(t.rowId());t instanceof L&&this.$_setCheckable(t,!1)},updateList:function(t){for(var e=0;e<t.length;e++)this.updateRow(t[e])},changeStates:function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId());i instanceof L&&this.$_setCheckable(i,!1)}},$_setCheckable:function(t,e){if(t&&(this._runtime.setItem(t),t.setCheckable(this._exprNode.evaluate(this._runtime)),e))for(var i=t.count();i--;){var n=t.getItem(i);n instanceof L&&this.$_setCheckable(n,e)}}},{clearCheckables:function(t){function n(t){if(t){t.setCheckable(!0);for(var e=t.count();e--;){var i=t.getItem(e);i instanceof L&&n(i)}}}for(var e=t.itemCount();e--;){var i=t.getItem(e);i instanceof L&&n(i)}}}),P_=e("TreeGridItemProvider",jr,{init:function(t){this._super(null,t),this._observers=[],this._items=new F_,this.setSource(this._items),this._summarizer=new sr(this._items),this._editingItem=null,this._appending=!1,this._insertAfter=!1,this._insertIndex=-1,this._updateLock=!1},destroy:function(){this._items=null,this._summarizer=null,this._super()},onItemProviderFilterAdd:function(t,e,i){},onItemProviderFilterRemove:function(t,e,i){},onItemProviderFilterClear:function(t,e){},onItemProviderFilterClearAll:function(t){},beginUpdate:function(){this._updateLock=!0},endUpdate:function(){this._updateLock=!1},setAggregateMode:function(t){this._items.setAggregateMode(t)},setSummaryMode:function(t){this._items.setSummaryMode(t)},setGroupSummaryMode:function(t){this._items.setGroupSummaryMode(t)},setSortMode:function(t){this._items.setSortMode(t)},sortMode:function(){return this._items.sortMode()},summarizer:function(){return this._summarizer},getLevels:function(t){return this._items.getLevels(t)},orderBy:function(t,e,i){this._items.orderBy(t,e,i)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},getLabelComparer:function(){return this._items.getLabelComparer()},setLabelComparer:function(t){this._items.setLabelComparer(t)},isFiltered:function(t){return null!=t?this._items.hasFilter(t):this._items.hasFilters()},addFilter:function(t,e){this._items.addFilter(t,e)},removeFilter:function(t,e){this._items.removeFilter(t,e)},clearFilters:function(t){this._items.clearFilters(t)},clearAllFilters:function(){this._items.clearAllFilters()},beginFiltering:function(){this._items.beginFiltering()},endFiltering:function(t,e){this._items._addParentNodeOnFiltering=this._addParentNodeOnFiltering,this._items.endFiltering(!0,t,e)},expand:function(t,e,i){this._items.expand(t,e,i)},collapse:function(t,e){this._items.collapse(t,e)},expandAll:function(t){this._items.expandAll(t)},collapseAll:function(){this._items.collapseAll()},getCheckedRows:function(){return this._items.getCheckedRows()},getCheckedRowIds:function(){return this._items.getCheckedRowIds()},setCheckableExpression:function(t){this._items.setCheckableExpression(t)},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},isHideDeleted:function(){return this._items.isHideDeleted()},setHideDeleted:function(t){this._items.setHideDeleted(t)},getAllItems:function(){return this._items.getAllItems()},getItem:function(t){return this._items.getItem(t)},getItemOfRow:function(t){return this._items.getItemOfRow(t)},findItem:function(t,e,i,n,s){return this._items.findItem(t,e,i,n,s)},findCell:function(t,e,i,n,s,r){return this._items.findCell(t,e,i,n,s,r)},checkItem:function(t,e,i,n){this._items.checkItem(t,e,i,n)},checkAll:function(t,e,i,n){this._items.checkAll(t,e,i,n)},hasCellStyle:function(){return this._items.hasCellstyle()},setCellStyle:function(t,e,i){this._items.setCellStyle(t,e,i)},setCellStyles:function(t,e,i){this._items.setCellStyles(t,e,i)},removeCellStyle:function(t){this._items.removeCellStyle(t)},clearCellStyles:function(){this._items.clearCellStyles()},checkCellStyle:function(t,e){return this._items.checkCellStyle(t,e)},getCellStyle:function(t,e){return this._items.getCellStyle(t,e)},setCellEditable:function(t,e,i){this._items.setCellEditable(t,e,i)},setCellReadOnly:function(t,e,i){this._items.setCellReadOnly(t,e,i)},getCellEditable:function(t,e){return this._items.getCellEditable(t,e)},getCellReadOnly:function(t,e){return this._items.getCellReadOnly(t,e)},setCellCursor:function(t,e,i){this._items.setCellCursor(t,e,i)},getCellCursor:function(t,e){return this._items.getCellCursor(t,e)},setCellEditor:function(t,e,i){this._items.setCellEditor(t,e,i)},getCellEditor:function(t,e){return this._items.getCellEditor(t,e)},clearEditableMap:function(){return this._items.clearEditableMap()},canAppend:function(){return!1},canInsert:function(t,e){return!!t},canDelete:function(t,e){return!!t},$_replaceItem:function(t,e){t.parent().setItem(t,e),this._items._setItem(t,e)},_doBeginUpdate:function(t){return this._editingItem=this._createEditItem(t,H.UPDATING,null),this.$_replaceItem(t,this._editingItem),this._editingItem},_doBeginAppend:function(t){return this._editingItem=this._createEditItem(null,H.APPENDING,t),this._editingItem},_doBeginInsert:function(t,e,i,n){return n?(this._appending=!0,t.setExpanded(!0),this._editingItem=this._createEditItem(null,H.INSERTING,e),this._items.appendItem(t,this._editingItem)):(n=t.parent(),this._appending=!1,this._insertAfter=i,this._insertIndex=n.indexOf(t),this._editingItem=this._createEditItem(t,H.INSERTING,e),this._items.insertItem(n,this._editingItem,this._insertIndex,this._insertAfter)),this._editingItem},_doCompleteUpdate:function(e){var t=!1;if(this.dataSource()){this.$_replaceItem(this._editingItem,e);var i=this._editingItem.row();try{t=i.update(this._editingItem.values())}catch(t){throw this.$_replaceItem(e,this._editingItem),t}t||this.$_replaceItem(e,this._editingItem)}return t},_doCompleteInsert:function(t){var e=!1,i=this.dataSource();if(i){var n=this._editingItem.parent(),s=n.row(),i=i.createRow(this._editingItem.values(),-1,!1),r=this._editingItem.parent().indexOf(this._editingItem);this._items.removeItem(this._editingItem);try{e=this.isAppending()?s.addChild(i):s.insertChild(r,i)}catch(t){throw this._appending?this._items.appendItem(n,this._editingItem):this._items.insertItem(n,this._editingItem,this._insertIndex,this._insertAfter),t}e?(s=n.itemOfRow(i.rowId),this._copyExtents(this._editingItem,s)):this._appending?this._items.appendItem(n,this._editingItem):this._items.insertItem(n,this._editingItem,this._insertIndex,this._insertAfter)}return e},_doCancelEdit:function(t,e){t==H.UPDATING?(this.$_replaceItem(this._editingItem,e),this._copyExtents(this._editingItem,e)):t==H.INSERTING&&this._editingItem.parent()&&this._items.removeItem(this._editingItem),this._super(t,e)},_doCommitEdit:function(t,e){t!=H.UPDATING&&H.INSERTING,this._super(t,e)},remove:function(t){t instanceof L&&(t=t.row())&&t.parent().removeChild(t)},removeAll:function(t){if(t&&0<t.length){for(var e=[],i=0,n=t.length;i<n;i++){var s=this._items.getItem(t[i]);s instanceof L&&e.push(s.row())}this.dataSource().removeRows(e)}},getRemovableRows:function(t){if(0<t.length){for(var e=[],i=0,n=t.length;i<n;i++){var s=this._items.getItem(t[i]);s instanceof L&&e.push(s.row())}return e}},removeRows:function(t){t&&this.dataSource().removeRows(t)},dataSource:function(){return this._items.dataSource()},setDataSource:function(t){this._items.setDataSource(t)},rootItem:function(){return this._items._rootItem},_createEditItem:function(t,e,i){this._editingItem=null;var n=this.dataSource();if(!n)return null;var s,r=n.fieldCount();switch(e){case H.UPDATING:for(this._editingItem=new N_(this,t,e),s=0;s<r;s++)this._editingItem.setValue(s,t.getData(s));this._copyExtents(t,this._editingItem);break;case H.INSERTING:case H.APPENDING:if(this._editingItem=new N_(this,null,e),i)for(s=0;s<r;s++)i.length>s&&this._editingItem.setValue(s,i[s])}return this._editingItem},onTreeItemProviderItemChanged:function(t,e){if(this._eventLock<=0)return this.fireConfirmEvent(F_.ITEM_CHANGED,e)},onTreeItemProviderExpanding:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(F_.EXPANDING,e)},onTreeItemProviderExpanded:function(t,e){if(this._eventLock<=0)return this.fireConfirmEvent(F_.EXPANDED,e)},onTreeItemProviderCollapsing:function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(F_.COLLAPSING,e)},onTreeItemProviderCollapsed:function(t,e){if(this._eventLock<=0)return this.fireConfirmEvent(F_.COLLAPSED,e)},onItemProviderFilterAdded:function(t,e,i){this._fireFilterAdded(e,i)},onItemProviderFilterRemoved:function(t,e,i){this._fireFilterRemoved(e,i)},onItemProviderFilterCleared:function(t,e){this._fireFilterCleared(e)},onItemProviderFilterAllCleared:function(t){this._fireFilterAllCleared()},onItemProviderFiltered:function(t,e,i){this._fireFiltered(e,i)},onItemProviderSort:function(t,e,i){this._fireSort(e,i)},onItemProviderSorted:function(t){this._fireSorted()}}),H_=e("TreeOptions",n,{init:function(t){this._super(t),this._expanderStyles=new d(t,"expanderStyles"),this._footerStyles=new d(t,"footerStyles"),this._icons=null},expanderStyles:null,expanderWithCellStyles:!0,footerStyles:null,expanderWidth:17,lineVisible:!0,lineStyle:null,showCheckBox:!1,checkBoxSize:17,iconImages:null,expandImage:null,collapseImage:null,iconWidth:0,iconHeight:0,aggregateMode:xs.LEAF,collapseWhenLeftArrow:!0,collapseWhenCtrlArrow:!0,expandWhenRightArrow:!0,expandWhenCtrlArrow:!0,icons:function(){return this._icons},setLinseVisible:function(t){t!=this._linesVisible&&(this._linesVisible=t,this._changed())},setExpanderWidth:function(t){t!=this._expanderWidth&&(this._expanderWidth=t,this._changed())},setShowCheckBox:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},setCheckBoxSize:function(t){(t=Math.max(0,t))!=this._checkBoxSize&&(this._checkBoxSize=t,this._changed())},setIconImages:function(t){t!=this._iconImages&&(this._iconImages=t,this._icons=this.owner().getImageList(t),this._changed())},setIconWidth:function(t){(t=Math.max(0,t))!=this._iconWidth&&(this._iconWidth=t,this._changed())},setIconHeight:function(t){(t=Math.max(0,t))!=this._iconHeight&&(this._iconHeight=t,this._changed())},setLineStyle:function(t){this._lineStyle!=t&&(this._lineStyle=t,this._expanderStyles.line(t))},setExpandImage:function(t){t?(this._expandImage=t,this._grid.getImage(t)):this._expandImage=null},setCollapseImage:function(t){t?(this._collapseImage=t,this._grid.getImage(t)):this._collapseImage=null}}),G_=e("TreeItemExpanderCell",ra,{init:function(){this._super("treeItemExpanderCell")},displayText:function(){return null},value:function(){return null}}),$_=e("TreeItemFooterCell",ra,{init:function(){this._super("treeItemFooterCell")},displayText:function(){var t,e=String(this.value());return e||(t=this.index()).dataColumn()&&(e=t().column().footer().groupText()),e},value:function(){return null}}),U_=e("TreeGridDelegate",Zl,{init:function(t){this._super(t),this._rowViews=[],this._footerViews=[]},borrowItemView:function(t,e,i){var n,s;return t instanceof L?(0==this._rowViews.length&&this._rowViews.push(new Q_),n=this._rowViews.length-1,(s=this._rowViews[n]).setFixed(e),s.setRightFixed(i),this._rowViews.pop(),s):t instanceof TreeItemFooter?(0==this._footerViews.length&&this._footerViews.push(new tf),n=this._footerViews.length-1,(t=this._footerViews[n]).setFixed(e),s.setRightFixed(i),this._footerViews.pop(),t):null}}),W_=e("TreeGridLayoutManager",ed,{init:function(t){this._super(t)},_doLayout:function(t){this._super(t);var e,t=this.grid(),i=t.treeLinesRenderer();i&&(e=0<this.fixedColCount()?this.fixedBounds():this.bodyBounds(),0<this.columnCount()?e.width=Math.max(0,this.columnRect(0).width):e.width=0,i.setRect(e),i.setLevelWidth(t.treeOptions().expanderWidth()),i.setRange(t,this.topIndex(),Math.min(t.itemCount(),this.topIndex()+this.itemCount())-1))}}),z_=function(){function a(t,e,i){if(f)return f(t,e._rowId,i._rowId)}function d(t,e,i,n){var s,r,o,a,h,l;do{o=m(((s=t)+(r=e))/2),a=u.getItem(o).dataRow(),h=u.getItem(o).row();do{if(i==ps.ASCENDING){for(;s<=r&&!((l=0==(l=_(c,h,u.getItem(s).row()))&&n?a-u.getItem(s).dataRow():l)<=0);)s++;for(;s<=r&&!(0<=(l=0==(l=_(c,h,u.getItem(r).row()))&&n?a-u.getItem(r).dataRow():l));)r--}else{for(;s<=r&&!(0<=(l=0==(l=_(c,h,u.getItem(s).row()))&&n?a-u.getItem(s).dataRow():l));)s++;for(;s<=r&&!((l=0==(l=_(c,h,u.getItem(r).row()))&&n?a-u.getItem(r).dataRow():l)<=0);)r--}}while(s<=r&&(s!=r&&u._exchangeItems(s,r),s++,r--),s<=r)}while(t<r&&d(t,r,i,n),(t=s)<e)}var h,l,u,c,_,f;this.run=function(t,e,i,n,s,r,o){h=t.provider(),l=h.dataSource(),u=t,c=e;t=l.getField(e);if(f=t._comparer||l._comparers[e]||h._labelComparer[e])_=a;else switch(t.dataType()){case S.NUMBER:case S.DATETIME:_=l.compareNumbers;break;case S.BOOLEAN:_=l.compareBools;break;case S.OBJECT:_=l.compareObjects;break;default:_=n?l.compareTexts:l.compareValues}d(s,r,i,o)}},K_=e("TreeSelectionTool",Fd,{init:function(t){this._super(t)},_doKeyDown:function(t,e,i,n){var s,r=this.focused().clone(),o=this.grid()._treeOptions;if(r&&(s=r.item()))switch(t){case p.RIGHT:if(!e&&1==this.grid().visibleColumnCount()&&r.isRight()&&o.isExpandWhenRightArrow()||e&&o.isExpandWhenCtrlArrow()){if(!s.isExpanded())return s.setExpanded(!0),!0;if(0<s.count())return r.down(),this.setFocused(r,!0),!0}break;case p.LEFT:if(!e&&r.isLeft()&&o.isCollapseWhenLeftArrow()||e&&o.isCollapseWhenCtrlArrow()){if(s.isExpanded())return s.setExpanded(!1),!0;if(!(s.parent()instanceof M_))return r.itemIndex(s.parent().index()),this.setFocused(r,!0),!0}}return this._super(t,e,i,n)},_doColumnHeaderClicked:function(t,e,i){this._super(t);var n=this.grid(),t=b(t,M);!n.isEmpty()&&t&&t.isSortable()&&n.sortingOptions().isEnabled()&&n.sortColumn(t,i)},_doElementClicked:function(t){var e;this._super(t),t instanceof Z_&&(e=this.grid()).editOptions().isCheckable()&&(t=t.item())&&t.isCheckable()&&e.itemSource().checkItem(t,!t.isChecked(),e.checkBar().isExclusive(),!0)},_doHandleClicked:function(t){var e;t instanceof q_?(e=t.cellView().item())&&e.setExpanded(!e.isExpanded()):this._super(t)},onTap:function(t,e){this._clickCell;var i,n,s=this._clickElement;s instanceof q_?(n=s.cellView().item())&&n.setExpanded(!n.isExpanded()):s instanceof Z_?(i=this.grid()).editOptions().isCheckable()&&(n=s.item())&&n.isCheckable()&&i.itemSource().checkItem(n,!n.isChecked(),i.checkBar().isExclusive(),!0):this._super(t,e)}}),Y_=e("TreeContainer",Au,{init:function(t,e,i){Au.prototype.init.call(this,t,e,i)},treeView:function(){return this._gridView},_createGridView:function(t,e,i){return new X_(t,e,i)},_createDefaultTool:function(){return new(xn&&_e()?Eu:K_)(this)}}),X_=e("TreeView",T,{init:function(t,e,i){this._treeLinesView=null,this._treeOptions=null,this._focusedRow=-1,this._super(t,e,i),this._expanderCell=new G_,this._footerCell=new $_,this.panel().setVisible(!1),this.setItemSource(this._items=this._createItemSource())},treeLinesRenderer:function(){return this._treeLinesView},treeOptions:function(){return this._treeOptions},getOptions:function(){return this._super()},setOptions:function(t){this._super(t)},getLevels:function(t){return this._items.getLevels(t)},getExpanderCell:function(t){return this._expanderCell.setStyles(this._treeOptions.expanderStyles()),this._expanderCell.setIndex($.temp(this,t)),this._expanderCell},getFooterCell:function(t){return this._footerCell.setStyles(this._treeOptions.footerStyles()),this._footerCell.setIndex(t),this._footerCell},expand:function(t,e,i){this.isItemEditing(null)||this._items.expand(t,e,i)},collapse:function(t,e){this.isItemEditing(null)||this._items.collapse(t,e)},expandAll:function(t){this.isItemEditing(null)||this._items.expandAll(t=0<arguments.length?t:0)},collapseAll:function(){this.isItemEditing(null)||this._items.collapseAll()},getTreeIcon:function(t){var e=this._treeOptions.icons();if(e){t=t.iconIndex();if(0<=t&&t<e.count())return e.getImage(t)}return null},getCheckedItems:function(){for(var t=[],e=0,i=this.itemCount();e<i;e++){var n=this.getItem(e);n.isChecked()&&t.push(n)}return t},getCheckedItemIndices:function(){for(var t=[],e=0,i=this.itemCount();e<i;e++){var n=this.getItem(e);n.isChecked()&&t.push(n.index())}return t},getCheckedRows:function(t){var e=null;if(t)for(var e=[],i=0,n=this.itemCount();i<n;i++){var s=this.getItem(i);s.isChecked()&&e.push(s.row())}else e=this._items.getCheckedRows();return e},getCheckedRowIds:function(t){var e=null;if(t)for(var e=[],i=0,n=this.itemCount();i<n;i++){var s=this.getItem(i);s.isChecked()&&e.push(s.dataRow())}else e=this._items.getCheckedRowIds();return e},checkChildren:function(t,e,i,n,s,r){if(n=!(3<arguments.length)||n,t)for(var o,a=t.count(),h=0;h<a;h++)o=t.getItem(h),s&&!o.isCheckable()||o.setChecked(e,r),!i||!o.isExpanded()&&n||this.checkChildren(o,e,!0,n,s,r)},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},dataSource:function(){return this._items?this._items.dataSource():null},setDataSource:function(t){this._items&&this._items.setDataSource(t)},maxItemCount:function(){return this._items?this._items.maxItemCount():0},setMaxItemCount:function(t){this._items&&this._items.setMaxItemCount(t)},_addGroupView:function(){this._treeLinesView=new ef(this._dom,this),this.addElement(this._treeLinesView)},addMasks:function(){},_createDelegate:function(){return new U_(this)},_createLayoutManager:function(){return new W_(this)},_createBodyView:function(t,e,i,n){return new nf(t,e,i,n)},_visualObjectChanged:function(t){this._super(t),t instanceof ta&&this._items.setCheckableExpression(t.checkableExpression())},append:function(){return this.insert(this._items.rootItem(),!1,!0)},_doCanInsert:function(t,e,i){return t&&(0<t.count()||!i||0==t.level()||this.editOptions().isAppendable())},getSummarizer:function(){return this._items.summarizer()},_doMaxRowCountChanged:function(){this._items.setMaxItemCount(this.maxItemCount())},onImageListImageLoaded:function(t,e){this._super(t,e),t===this._treeOptions.icons()&&(this.refreshView(),this._treeLinesView.invalidate())},onImageLoaded:function(t){this._super(t)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},_doSortItems:function(t,e,i){this._items.orderBy(t,e,i)},_doColumnFiltersChanged:function(t,e){this.applyFilters(t,e)},initStyles:function(){this._super(),this._addGridObject(this._treeOptions=new H_(this)),this._treeOptions.expanderStyles().setParent(this.body().styles());var t=u.Default;this._treeOptions.expanderStyles().setSysDefault(t.treeExpander())},$_doLayout:function(t){var e=this._treeOptions,t=(e.expanderStyles().setParent((0<this.fixedOptions().colCount()?this.fixedOptions():this.body()).styles(),!1),this._super(t));return e.isLineVisible()?(this._treeLinesView.setVisible(!0),this._treeLinesView.setStroke(e.expanderStyles().line()),this._treeLinesView.invalidate()):this._treeLinesView.setVisible(!1),t},assignImageList:function(t){this._super(t),this.treeOptions().iconImages()==t.name()&&(this.treeOptions._icons=t)},refreshView:function(){this._treeLinesView&&this._treeLinesView.invalidate(),this._super()},getEditBounds:function(t){return this._super(t)},updatePastedRow:function(t,e,i){t instanceof L&&(t=t.row())&&(i?t.updateStrict(e):t.update(e))},appendPastedRow:function(t){var e=this.dataSource();if(e)return t=e.createRow(t,-1,!1),e.rootRow().addChild(t),t.rowId()},_createItemSource:function(){var t=new P_(!0);return t._addParentNodeOnFiltering=this._filteringOptions?this._filteringOptions._addParentNodeOnFiltering:void 0,t},$_getVisibleAncestor:function(t){var e=this._items.getItemOfRow(t);if(e){for(;e&&!e.isVisible();)e=e.parent();return e}return null},onItemProviderReset:function(t){this._currentRowId=-1,this._super(t)},onTreeItemProviderItemChanged:function(t,e){this._treeLinesView.invalidate(),this.invalidateLayout(),this.fireEvent(X_.CHANGED,e)},$_expandChanging:function(t,e,i){return this._focusedRow=this.focusedIndex()?this.focusedIndex().dataRow():-1,this.editController().isEditing()&&!this._items.isEditing()&&this.editController().cancelEditor(!0),!this.editController().isEditing()&&!this._items.isEditing()&&this.fireConfirmEvent(i?X_.EXPANDING:X_.COLLAPSING,e)},onTreeItemProviderExpanding:function(t,e){return this.$_expandChanging(t,e,!0)},onTreeItemProviderCollapsing:function(t,e){return this.$_expandChanging(t,e,!1)},$_expandChanged:function(t,e,i){var n,s,r;0<=this._focusedRow&&!(e instanceof M_)&&(n=this.focusedIndex().clone(),(r=(s=this.$_getVisibleAncestor(this._focusedRow)).index())>=this.topIndex()&&r<=this.topIndex()+this.layoutManager()._availableItemCount?n._itemIndex=s?s.index():-1:n._itemIndex=e?e.index():-1,this.setFocusedIndex(n,!0)),this.fireEvent(i,e)},onTreeItemProviderExpanded:function(t,e){this.$_expandChanged(t,e,X_.EXPANDED)},onTreeItemProviderCollapsed:function(t,e){this.$_expandChanged(t,e,X_.COLLAPSED)}}),q_=(X_.EXPANDING="onTreeViewExpanding",X_.EXPANDED="onTreeViewExpanded",X_.COLLAPSING="onTreeViewCollapsing",X_.COLLAPSED="onTreeViewCollapsed",e("TreeExpandHandle",Kr,{init:function(t,e){this._super(t,e,"treeItemExpandHandle"),this._figureBackground=g.BLACK},expanded:!(X_.CHANGED="onTreeViewChanged"),figureSize:9,figureBackground:null,background:null,isClickable:function(){return!0},_doDraw:function(t){var e=this.figureSize(),i=this.background(),n=new O(0,0,this.width(),this.height()),s=this._parent.grid(),r=s&&s.treeOptions();this.isExpanded()?r&&r._collapseImage?this._drawTreeExpandImage(s,r._collapseImage,n,t):De(t,n,e,this.figureBackground(),i):r&&r._expandImage?this._drawTreeExpandImage(s,r._expandImage,n,t):ke(t,n,e,this.figureBackground(),i)},_drawTreeExpandImage:function(t,e,i,n){var s,r,t=t.getImage(e);t&&(e=Math.min(t.width,i.width),r=Math.min(t.height,i.height),s=i.x+B((i.width-e)/2),i=i.y+B((i.height-r)/2),n.drawImage(t,s,i,e,r))}})),j_=new g(4294967295),Z_=e("TreeCheckElement",is,{init:function(t){this._super(t,"treeCheckView")},item:null,checkable:!0,checked:!1,exclusive:!1,drawCheckBox:!0,radioImageUrl:null,unCheckRadioImageUrl:null,isClickable:function(){return!0},_doDraw:function(t){var e,i,n,s,r=new O(0,0,this.width(),this.height()),o=this._parent.grid().checkBar(),a=o.styles(),h=(t.drawRectI(null,null,r),a.figureSize()?a.figureSize().getDimension(r.height):12),l=h-2,d=a.line(),u=a.figureBackground(),a=a.figureInactiveBackground(),c=m(r.x+(r.width-l)/2),_=m(r.y+(r.height-l)/2);this._exclusive?(t.drawCircle(this._checkable?j_:a||yh,d||vh,c+(e=l/2),_+e,e),this._checked&&(this._radioImageUrl?(i=this._parent.grid().getImage(this._radioImageUrl))&&0<(n=i.width)&&0<(s=i.height)&&(c=m(r.x+(r.width-n)/2),_=m(r.y+(r.height-s)/2),t.drawImage(i,c,_,n,s)):t.drawCircle(u,null,c+e,_+e,e-2))):(t.drawBoundsI(this._checkable?j_:a||yh,d||vh,c,_,l,l),(i=o.getCheckImage(this._checked,this._checkable))?i&&0<(n=i.width)&&0<(s=i.height)&&(c=m(r.x+(r.width-n)/2),_=m(r.y+(r.height-s)/2),t.drawImage(i,c,_,n,s)):this._checked&&Be(t,u,r,h*=.9))}}),J_=e("TreeExpanderElement",Ya,{init:function(t,e){this._super(t,e),this._handle=new q_(t,this),this.addElement(this._handle),this._checkView=new Z_(t,this),this.addElement(this._checkView),this._iconView=new nr(t,"treeIconView"),this._iconView.setMouseEnabled(!1),this.addElement(this._iconView),this._line=null,this._expanderWidth=0,this._dataCell=null,this._useCellStyles=!0},setHandleWidth:function(t){this._handle.setWidth(t)},setShowCheck:function(t){this._checkView.setVisible(t)},setCheckSize:function(t){this._checkView.setWidth(t)},setIconWidth:function(t){this._iconView.setWidth(t)},setExpanderWidth:function(t){this._expanderWidth=t},setExclusive:function(t){this._checkView.setExclusive(t)},getAdapter:function(t){return t==bh?this._dataCell:this._super(t)},_doPrepareElement:function(t){this._super(t)},_doUpdateContent:function(t){this._super(t);var e=this.grid(),i=t.index().item(),e=(this._checkView.isVisible()&&(this._checkView.setItem(i),this._checkView.setCheckable(i.isCheckable()),this._checkView.setChecked(i.isChecked()),this._checkView.setDrawCheckBox(e.checkBar().isDrawCheckBox()),this._checkView.setRadioImageUrl(e.checkBar().radioImageUrl()),this._checkView.setUnCheckRadioImageUrl(e.checkBar().unCheckRadioImageUrl())),this._iconView.setImage(e.getTreeIcon(i)),i.setIconHeight(this._iconView.iconHeight()),this._handle.setVisible(i.hasChildren()),this._handle.setExpanded(i.isExpanded()),t.styles());this._handle.setBackground(e.background()),this._handle.setFigureBackground(e.figureBackground()),this._handle.setFigureSize(e.figureSize()?e.figureSize().getDimension(this._handle.width()):9)},_doLayoutContent:function(t){this.grid().treeOptions().expanderStyles();var e=this._handle.width()*(this.index().item().level()-1),i=this._checkView.isVisible()?this._checkView.width():0,n=(this._handle.setBounds(e,this.borderTopWidth(),this._handle.width(),this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._handle.invalidate(),0<i&&(this._checkView.setBounds(e+this._handle.width(),this.borderTopWidth(),i,this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._checkView.invalidate()),this._iconView.width());0<n?(this._iconView.setVisible(!0),this._iconView.setBounds(e+this._handle.width()+i,this.borderTopWidth(),n,this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._iconView.invalidate()):this._iconView.setVisible(!1)},_doRender:function(t,e){var i=this._useCellStyles?this._dataCell:null,n=(i||this).background(),n=(n&&t.drawRectI(n,null,e),(i||this).borderBottomWidth()),s=this.borderRightWidth();n&&(n=m((n+1)/2),t.drawLineI((i||this)._borderBottom,e.x,e.bottom()-n,e.right(),e.bottom()-n)),this.width()<this._expanderWidth&&s&&(s=m((s+1)/2),t.drawLineI(this._borderRight,e.right()-s,e.y,e.right()-s,e.bottom()))},canHovering:function(){return!1},_setDataCell:function(t){this._dataCell=t}}),Q_=e("TreeItemElement",Sh,{init:function(t){this._super(t),this.setName("treeItemView"),this._expander=new J_(t,"treeExpanderView"),this.addElement(this._expander)},_clearChildren:function(){this._super(),this.addElement(this._expander)},_prepareCells:function(t){var e,i,n,s;this._super(t),0<this.childCount()&&(0==t.firstCol()||this.isFixed())&&!this.isRightFixed()?(i=(e=this.grid()).treeOptions(),n=this._expander,s=this.grid().getExpanderCell(this.index()),t=this._getFirstCell(t),n.setShowCheck(i.isShowCheckBox()),n.setExclusive(e.checkBar().isExclusive()),n._setDataCell(t),n.setVisible(!0),n.updateCell(s)):this._expander.setVisible(!1)},_layoutCells:function(t){var e,i,n,s,r,o,a,h,l;this._super(t),this._expander.isVisible()&&(e=this.grid(),h=this.item(),i=e.treeOptions(),n=this._getFirstCell(t),l=h.level(),s=i.expanderWidth(),r=i.isShowCheckBox()?i.checkBoxSize():0,o=i.iconWidth(),a=this._expander,h=s*l+r+(o=o<=0&&i.icons()&&(l=e.getTreeIcon(h))?l.width:o)+i.expanderStyles().paddingRight(),l=n.width(),n.setWidth(l-h),n.setX(n.x()+h),n.layoutTreeContent(t),a._useCellStyles=i.isExpanderWithCellStyles(),a.setHandleWidth(s),a.setShowCheck(i.isShowCheckBox()),a.setExclusive(e.checkBar().isExclusive()),a.setCheckSize(r),a.setIconWidth(o),a.setExpanderWidth(h),a.setBounds(0,0,Math.min(h,l),this.height()),a.setIndex($.temp(e,this.index(),null)),a.layoutContent(t))}}),tf=e("TreeItemFooterElement",Qa,{init:function(t,e,i){this._super(t,"treeItemFooterView"),this._fixed=e,this._rightFixed=i,this._cells={}},fixed:!1,_doUpdateElement:function(t){this._super(t)},_doMesasure:function(t,e,i){return{width:e,height:i}},_doLayoutContent:function(t){this._prepareCells(t),this._layoutCells(t)},_doRender:function(t,e){var i,n;this.isFixed()&&(i=(n=this.grid().fixedOptions()).colBarStyles(),n=n.colBarWidth(),this._rightFixed?e.setRight(n):e.setLeft(e.right()-n),(n=i.background())&&t.drawRectI(n,null,e),(n=i.borderRight())&&t.drawLine(n,e.right()-1,e.y,e.right()-1,e.bottom()),i.borderLeft())&&this._rightFixed&&t.drawLine(n,e.x,e.y,e.x,e.bottom())},prepareCells:function(t){this.clear();for(var e=this.grid(),i=t.firstCol(this._fixed,this._rightFixed),n=t.lastCol(this._fixed,this._rightFixed),s=i;s<=n;s++){var r=t.getColumn(s),o=this._cells[r],r=(o||(o=new(r instanceof R?oh:rh)(this._dom),this._cells[r.$_hash]=o),this.addElement(o),$.temp(e,this.index(),r)),r=e.getFooterCell(r);o.updateCell(r)}},layoutCells:function(t){for(var e=this.grid(),i=t.firstCol(this._fixed,this._rightFixed),n=t.lastCol(this._fixed,this._rightFixed),s=i;s<=n;s++){var r=this._cells[t.getColumn(s).$_hash],o=t.columnBounds(s);this.isFixed()||(o.x-=e.leftPos),o.height=this.height(),r.setRect(o),r.layoutContent(t)}}}),ef=e("TreeLinesElement",ss,{init:function(t,e){this._super(t,"treeLinesView"),this._tree=e,this._startIndex=-1,this._endIndex=-1,this._levelWidth=20,this._handleWidth=9,this._handleHeight=9,this._stroke=f.LTGRAY,this._options=null},setLevelWidth:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},setHandleWidth:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},setHandleHeight:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},setStroke:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},setRange:function(t,e,i){this._options=t.treeOptions(),e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},$_findLevelItem:function(t,e,i){for(var n,s=i;s<=this._endIndex;s++)if((n=t.getItem(s))&&n.level()==e)return n;return null},$_drawVertLine:function(t,e,i,n){var s,r,o=this._tree.layoutManager(),a=o.topIndex(),n=n*this._levelWidth+this._levelWidth/2,h=0,l=this.height();e&&(s=o.itemBounds(e.index()-a),r=e instanceof L&&e.hasChildren()?this._handleHeight:0,h=s.y+s.height/2+r/2),i&&(s=o.itemBounds(i.index()-a),r=i instanceof L&&i.hasChildren()?this._handleHeight:0,l=s.y+s.height/2-r/2),n=m(n),t.drawLineI(this._stroke,n,h,n,l)},$_drawChildLine:function(t,e,i){var n,s=this._tree.layoutManager(),r=s.topIndex(),o=e.level()*this._levelWidth+this._levelWidth/2,a=this.height(),h=s.itemBounds(e.index()-r);n=this._options.isShowCheckBox()?(n=(n=this._tree.checkBar().styles()).figureSize()?n.figureSize().getDimension(h.height):12,h.y+h.height/2+(n-=2)/2):this._options.icons()&&e instanceof L&&0<e.iconHeight()?h.y+h.height/2+e.iconHeight()/2:h.bottom()-h.height/4,i&&(h=s.itemBounds(i.index()-r),e=i instanceof L&&i.hasChildren()?this._handleHeight:0,a=h.y+h.height/2-e/2),o=m(o),t.drawLineI(this._stroke,o,n,o,a)},$_drawHorzLine:function(t,e){var i=this._tree.layoutManager(),n=i.topIndex(),s=e.parent().level()*this._levelWidth+this._levelWidth/2,r=e.level()*this._levelWidth;e instanceof L&&e.hasChildren()&&(s+=this._handleWidth/2),i=i.itemBounds(e.index()-n),e=m(i.y+i.height/2),t.drawLineI(this._stroke,s,e,r,e)},_doDraw:function(t){t.clipBounds(0,0,this.width(),this.height());var e=this._tree;if(!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){e.layoutManager(),e.topIndex();for(var i,n,s,r,o=null,a=this._startIndex;a<=this._endIndex&&!(o=e.getItem(a));a++);if(o){if(1<(n=o.level())||0<o.childIndex()){for(i=0;i<n;i++)(r=(s=o.getAncestor(i)).last())&&r.index()>=a&&(r=this.$_findLevelItem(e,i+1,a),this.$_drawVertLine(t,null,r,s.level()));0<o.childIndex()&&this.$_drawVertLine(t,null,o,o.parent().level())}for(;a<=this._endIndex;a++)s=(o=e.getItem(a)).parent(),(i=o.childIndex())<s.count()-1&&((r=s.getItem(i+1)).index()>this._endIndex&&(r=null),this.$_drawVertLine(t,o,r,s.level())),(s=o)&&s.isExpanded()&&0<s.count()&&((r=s.getItem(0)).index()>this._endIndex&&(r=null),this.$_drawChildLine(t,o,r)),this.$_drawHorzLine(t,o)}}}}),nf=e("TreeBodyElement",Na,{init:function(t,e,i,n){this._super(t,e,i,n),this._footers=[],this._footerViews=[]},clearItems:function(){this._super(),this._footers.splice(0,this._footers.length)},addItem:function(t){t instanceof Pr?this._footers.push(t):this._super(t)}}),sf=function(t){return(t instanceof M?rf:af)(t)},rf=function(t){var e,i;return t instanceof Tl?(e={name:t.name(),tag:t.tag(),parent:t.parent()?t.parent().name():null,visible:t.isVisible(),resizable:t.isResizable(),movable:t.isMovable(),width:t.width(),displayIndex:t.displayIndex(),displayWidth:t.displayWidth(),fillWidth:t.fillWidth(),fillHeight:t.fillHeight(),checked:t.isChecked(),header:t.header().proxy(),$_hash:t.$_hash},t instanceof M?(e.type="data",e.editor=t.editor(),e.editorOptions=t.editorOptions(),e.readOnly=t.isReadOnly(),e.editable=t.isEditable(),e.fieldIndex=t.fieldIndex(),e.fieldName=t.fieldName(),e.dataIndex=t.dataIndex(),e.sortable=t.isSortable(),e.button=t.button(),e.buttonVisibility=t.buttonVisibility(),e.editButtonVisibility=t.editButtonVisibility(),e.defaultValue=t.defaultValue(),e.required=t.isRequired(),e.requiredLevel=t.requiredLevel(),e.requiredMessage=t.requiredMessage(),e.textInputCase=t.textInputCase(),e.nanText=t.nanText(),e.zeroText=t.zeroText(),e.lookupDisplay=t.isLookupDisplay(),e.labels=t.lookupLabels()||[],e.values=t.lookupValues()||[],e.labelField=t.labelField(),e.lookupSourceId=t.lookupSourceId(),e.lookupKeyFields=t.lookupKeyFields(),e.lookupData=t.lookupData(),e.imageList=t.imageList(),e.equalBlank=t.isEqualBlank(),e.equalBlankExpression=t.equalBlankExpression(),e.displayMinusZero=t.displayMinusZero(),e.imeMode=""):t instanceof R?(e.type="group",e.orientation=t.orientation(),e.hideChildHeaders=t.isHideChildHeaders()):t instanceof Yl&&(e.type="series",e.fieldNames=t.fieldNames()),(i=t._styles&&t._styles.toProxy(!1))&&0<Object.keys(i).length&&(e.styles=i),(i=t._dynamicStyles&&t._dynamicStyles.proxy())&&(e.dynamicStyles=i),t._footer&&t._footer.proxy&&(e.footer=t._footer.proxy()),e):null},of=function(t){return t instanceof Cr?{fieldName:t.fieldName(),orgFieldName:t.orgFieldName(),dataType:t.dataType(),subType:t.subType(),subtypeEnabled:t.isSubtypeEnabled(),length:t.length(),set:t.set(),minimum:t.minimum(),maximum:t.maximum(),required:t.isRequired(),updatable:t.isUpdatable(),defaultValue:t.defaultValue(),booleanFormat:t.booleanFormat(),datetimeFormat:t.datetimeFormat(),amText:t.amText(),pmText:t.pmText(),baseYear:t.baseYear(),header:t.header(),baseField:t.baseField(),calculateExpression:t.calculateExpression(),calculateCallback:t.calculateCallback()&&t.calculateCallback().toString&&t.calculateCallback().toString(),$_hash:t.$_hash}:null},af=function(t){var e=rf(t);if(t instanceof R)for(var i=e.columns=[],n=0,s=t.count();n<s;n++)i.push(af(t.getItem(n)));return e},hf=function(t,e){var i=t._parent,n={type:void 0,id:t._id,parentId:!i||i instanceof Hr?NaN:i.id(),itemIndex:t._index,dataRow:-1,checked:t.isChecked()};return e&&(n.childIndex=t.childIndex(),i)&&(n.level=t.level()),t instanceof Ar?(n.type="row",n.dataRow=t.dataRow()):t instanceof C?(n.count=t._children.length,n.expanded=t._expanded,t instanceof Vr||t instanceof Kh?(n.type="group",n.footerId=t._footer?t._footer.id():NaN,e&&(n.firstItem=hf(t.firstItem(),!0,!1),n.firstDataItem=hf(t.firstDataItem(),!0,!1),n.dataRows=t.$_getRows())):t instanceof L&&(n.type="tree",n.dataRow=t._dataRow?t._dataRow.rowId():-1),n.$_child=0<n.count?t._children[0]._index:-1):t instanceof Pr&&(n.type="footer"),n},lf=e("RealGridDataObserver",e("DataObserverBase",null,{init:function(t){this._super(),this._handler=t,this._handler._dp.addListener(this)}}),{init:function(t){this._super(t)},onDataProvderDisposed:function(t){},onDataProviderReset:function(t){},onDataProviderRefresh:function(t){},onDataProviderRefreshClient:function(t){},onDataProviderRowCountChanged:function(t){this._handler.onRowCountChanged&&this._handler.onRowCountChanged(this._handler,t.rowCount())},onDataProviderRowUpdating:function(t,e,i){return!this._handler.onRowUpdating||this._handler.onRowUpdating(this._handler,e)},onDataProviderRowUpdated:function(t,e){this._handler.onRowUpdated&&this._handler.onRowUpdated(this._handler,e)},onDataProviderRowsUpdated:function(t,e,i){this._handler.onRowsUpdated&&this._handler.onRowsUpdated(this._handler,e,i)},onDataProviderRowListUpdated:function(t,e){this._handler.onRowListUpdated&&this._handler.onRowListUpdated(this._handler,e)},onDataProviderRowInserting:function(t,e,i){return!this._handler.onRowInserting||this._handler.onRowInserting(this._handler,e,i)},onDataProviderRowInserted:function(t,e){this._handler.onRowInserted&&this._handler.onRowInserted(this._handler,e)},onDataProviderRowsInserted:function(t,e,i){this._handler.onRowsInserted&&this._handler.onRowsInserted(this._handler,e,i)},onDataProviderRowRemoving:function(t,e){return!this._handler.onRowDeleting||this._handler.onRowDeleting(this._handler,e)},onDataProviderRowRemoved:function(t,e){this._handler.onRowDeleted&&this._handler.onRowDeleted(this._handler,e)},onDataProviderRowsRemoving:function(t,e){return!0},onDataProviderRowsRemoved:function(t,e){this._handler.onRowsDeleted&&this._handler.onRowsDeleted(this._handler,e)},onDataProviderRowMoving:function(t,e,i){return!this._handler.onRowMoving||this._handler.onRowMoving(this._handler,e,i)},onDataProviderRowMoved:function(t,e,i){this._handler.onRowMoved&&this._handler.onRowMoved(this._handler,e,i)},onDataProviderRowsMoving:function(t,e,i,n){return!this._handler.onRowsMoving||this._handler.onRowsMoving(this._handler,e,i,n)},onDataProviderRowsMoved:function(t,e,i,n){this._handler.onRowsMoved&&this._handler.onRowsMoved(this._handler,e,i,n)},onDataProviderValueChanging:function(){return!0},onDataProviderValueChanged:function(t,e,i){this._handler.onValueChanged&&this._handler.onValueChanged(this._handler,e,i)},onDataProviderDataChanged:function(t){this._handler.onDataChanged&&this._handler.onDataChanged(this._handler)},onDataProviderStateChanged:function(t,e){this._handler.onRowStateChanged&&this._handler.onRowStateChanged(this._handler,e)},onDataProviderStatesChanged:function(t,e){this._handler.onRowStatesChanged&&this._handler.onRowStatesChanged(this._handler,e)},onDataProviderStatesCleared:function(t){this._handler.onRowStatesCleared&&this._handler.onRowStatesCleared(this._handler)},onDataProviderRestoreRows:function(t,e){this._handler.onRestoreRows&&this._handler.onRestoreRows(this._handler,e)},getHandler:function(){return this._handler}}),df=e("RealTreeDataObserver",le,{init:function(t){this._super(),this._handler=t,this._handler._dp.addListener(this)},onTreeDataProvderDisposed:function(t){},onTreeDataProviderReset:function(t){},onTreeDataProviderRefresh:function(t){},onTreeDataProviderRefreshClient:function(t){},onTreeDataProviderRowCountChanged:function(t){this._handler.onRowCountChanged&&this._handler.onRowCountChanged(this._handler,t.rowCount())},onTreeDataProviderCleared:function(t){},onTreeDataProviderRowAdding:function(t,e,i,n){return!this._handler.onRowAdding||this._handler.onRowAdding(this._handler,e.rowId(),i,n._values)},onTreeDataProviderRowAdded:function(t,e){this._handler.onRowAdded&&this._handler.onRowAdded(this._handler,e.rowId())},onTreeDataProviderRowsAdded:function(t,e,i){this._handler.onRowsAdded&&this._handler.onRowsAdded(this._handler,e.rowId(),a_)},onTreeDataProviderRowRemoving:function(t,e){return!this._handler.onRowDeleting||this._handler.onRowDeleting(this._handler,e.rowId())},onTreeDataProviderRowRemoved:function(t,e){this._handler.onRowDeleted&&this._handler.onRowDeleted(this._handler,e.rowId())},onTreeDataProviderRowsRemoving:function(t,e){return!this._handler.onRowsDeleting||this._handler.onRowsDeleting(this._handler,a_(e))},onTreeDataProviderRowsRemoved:function(t,e){this._handler.onRowsDeleted&&this._handler.onRowsDeleted(this._handler,a_(e))},onTreeDataProviderRowUpdating:function(t,e){return!this._handler.onRowUpdating||this._handler.onRowUpdating(this._handler,e.rowId())},onTreeDataProviderRowUpdated:function(t,e){this._handler.onRowUpdated&&this._handler.onRowUpdated(this._handler,e.rowId())},onTreeDataProviderRowListUpdated:function(t,e){this._handler.onRowListUpdated&&this._handler.onRowListUpdated(this._handler,e)},onTreeDataProviderValueChanging:function(t,e,i,n){return!0},onTreeDataProviderValueChanged:function(t,e,i){this._handler.onValueChanged&&this._handler.onValueChanged(this._handler,e.rowId(),i)},onTreeDataProviderIconIndexChanged:function(t,e){},onTreeDataProviderHasChildrenChanged:function(t,e){},onTreeDataProviderRowStateChanged:function(t,e){this._handler.onRowStateChanged&&this._handler.onRowStateChanged(this._handler,e.rowId())},onTreeDataProviderRowStatesChanged:function(t,e){this._handler.onRowStatesChanged&&this._handler.onRowStatesChanged(this._handler,a_(e))},onTreeDataProviderRowSiblingMoving:function(t,e,i){return!this._handler.onRowSiblingMoving||this._handler.onRowSiblingMoving(this._handler,e.rowId(),i)},onTreeDataProviderRowSiblingMoved:function(t,e,i){this._handler.onRowSiblingMoved&&this._handler.onRowSiblingMoved(this._handler,e.rowId(),i)},onTreeDataProviderRowParentChanging:function(t,e,i,n){return!this._handler.onRowParentChanging||this._handler.onRowParentChanging(this._handler,e.rowId(),i.rowId(),n)},onTreeDataProviderRowParentChanged:function(t,e,i,n){this._handler.onRowParentChanged&&this._handler.onRowParentChanged(this._handler,e.rowId(),i.rowId(),n)},getHandler:function(){return this._handler}}),Si=e("RealGridObserverBase",null,{init:function(t){this._super(),this._handler=t,this._handler._gv.addListener(this)},onGridBaseCurrentChanging:function(t,e,i){return!this._handler.onCurrentChanging||this._handler.onCurrentChanging(this._handler,e.proxy(),i.proxy())},onGridBaseCurrentChanged:function(t,e){this._handler.onCurrentChanged&&this._handler.onCurrentChanged(this._handler,e.proxy())},onGridBaseCurrentRowChanged:function(t,e,i){this._handler.onCurrentRowChanged&&this._handler.onCurrentRowChanged(this._handler,e,i)},onGridBaseValidateCell:function(t,e,i,n){if(this._handler.onValidateColumn){var s=e.itemIndex(),r=e.item()&&e.item().dataRow(),i=this._handler.onValidateColumn(this._handler,sf(e.column()),i,n,s,r);if(i&&i.level&&i.message)throw new Zr(i.level,i.message,e.column&&e.column(),i.message);if("string"==typeof i||"number"==typeof i)throw new Zr(Is.ERROR,i,e.column&&e.column(),i)}},onGridBaseValidateRow:function(t,e,i,n){if(this._handler.onValidateRow){e=this._handler.onValidateRow(this._handler,e.index(),e.dataRow(),i,n);if(e&&e.level&&e.message)throw new Zr(e.level,e.message,null,e.message);if("string"==typeof e||"number"==typeof e)throw new Zr(Is.ERROR,e,null,e)}},onGridBaseValidationFail:function(t,e,i,n){return this._handler.onValidationFail?(e=this._handler.onValidationFail(this._handler,e,sf(i),{level:n.level,message:n.message}))&&e.level&&e.message?(n.level=e.level,n.message=e.message,n.userMessage=e.message,n):"string"==typeof e||"number"==typeof e?(n.message=e,n.userMessage=e,n):void 0:n},onGridBaseColumnHeaderClicked:function(t,e,i,n){this._handler.onColumnHeaderClicked&&this._handler.onColumnHeaderClicked(this._handler,sf(e),i)},onGridBaseColumnHeaderImageClicked:function(t,e){this._handler.onColumnHeaderImageClicked&&this._handler.onColumnHeaderImageClicked(this._handler,sf(e))},onGridBaseColumnHeaderDblClicked:function(t,e){this._handler.onColumnHeaderDblClicked&&this._handler.onColumnHeaderDblClicked(this._handler,sf(e))},onGridBaseColumnCheckedChanged:function(t,e){this._handler.onColumnCheckedChanged&&this._handler.onColumnCheckedChanged(this._handler,sf(e),e.isChecked())},onGridBaseFooterCellClicked:function(t,e){this._handler.onFooterCellClicked&&this._handler.onFooterCellClicked(this._handler,sf(e))},onGridBaseFooterCellDblClicked:function(t,e){this._handler.onFooterCellDblClicked&&this._handler.onFooterCellDblClicked(this._handler,sf(e))},onGridBaseHeaderSummaryCellClicked:function(t,e){this._handler.onHeaderSummaryCellClicked&&this._handler.onHeaderSummaryCellClicked(this._handler,sf(e))},onGridBaseHeaderSummaryCellDblClicked:function(t,e){this._handler.onHeaderSummaryCellDblClicked&&this._handler.onHeaderSummaryCellDblClicked(this._handler,sf(e))},onGridBaseCheckBarHeadClicked:function(t){this._handler.onCheckBarHeadClicked&&this._handler.onCheckBarHeadClicked(this._handler)},onGridBaseCheckBarFootClicked:function(t){this._handler.onCheckBarFootClicked&&this._handler.onCheckBarFootClicked(this._handler)},onGridBaseIndicatorCellClicked:function(t,e){this._handler.onIndicatorCellClicked&&this._handler.onIndicatorCellClicked(this._handler,e)},onGridBaseStateBarCellClicked:function(t,e){this._handler.onStateBarCellClicked&&this._handler.onStateBarCellClicked(this._handler,e)},onGridBaseRowGroupHeadClicked:function(t){this._handler.onRowGroupHeadClicked&&this._handler.onRowGroupHeadClicked(this._handler)},onGridBaseRowGroupFootClicked:function(t){this._handler.onRowGroupFootClicked&&this._handler.onRowGroupFootClicked(this._handler)},onGridBaseRowGroupHeaderFooterClicked:function(t,e,i){this._handler.onRowGroupHeaderFooterClicked&&this._handler.onRowGroupHeaderFooterClicked(this._handler,e,i.proxy())},onGridBaseRowGroupBarClicked:function(t,e){this._handler.onRowGroupBarClicked&&this._handler.onRowGroupBarClicked(this._handler,e)},onGridBaseCheckBarFootDblClicked:function(t,e){this._handler.onCheckBarFootDblClicked&&this._handler.onCheckBarFootDblClicked(this._handler,e)},onGridBaseIndicatorCellDblClicked:function(t,e){this._handler.onIndicatorCellDblClicked&&this._handler.onIndicatorCellDblClicked(this._handler,e)},onGridBaseStateBarCellDblClicked:function(t,e){this._handler.onStateBarCellDblClicked&&this._handler.onStateBarCellDblClicked(this._handler,e)},onGridBaseRowGroupHeadDblClicked:function(t){this._handler.onRowGroupHeadDblClicked&&this._handler.onRowGroupHeadDblClicked(this._handler)},onGridBaseRowGroupFootDblClicked:function(t){this._handler.onRowGroupFootDblClicked&&this._handler.onRowGroupFootDblClicked(this._handler)},onGridBaseRowGroupHeaderFooterDblClicked:function(t,e,i){this._handler.onRowGroupHeaderFooterDblClicked&&this._handler.onRowGroupHeaderFooterDblClicked(this._handler,e,i.proxy())},onGridBaseRowGroupBarDblClicked:function(t,e){this._handler.onRowGroupBarDblClicked&&this._handler.onRowGroupBarDblClicked(this._handler,e)},onGridBasePanelClicked:function(t){this._handler.onPanelClicked&&this._handler.onPanelClicked(this._handler)},onGridBasePanelDblClicked:function(t){this._handler.onPanelDblClicked&&this._handler.onPanelDblClicked(this._handler)},onGridBaseRowGroupPanelClicked:function(t,e){this._handler.onRowGroupPanelClicked&&this._handler.onRowGroupPanelClicked(this._handler,sf(e))},onGridBaseRowGroupPanelDblClicked:function(t,e){this._handler.onRowGroupPanelDblClicked&&this._handler.onRowGroupPanelDblClicked(this._handler,sf(e))},onGridBaseBodyEmptyClicked:function(t){this._handler.onBodyEmptyClicked&&this._handler.onBodyEmptyClicked(this._handler)},onGridBaseBodyEmptyDblClicked:function(t){this._handler.onBodyEmptyDblClicked&&this._handler.onBodyEmptyDblClicked(this._handler)},onGridBaseMenuItemClicked:function(t,e,i){this._handler.onMenuItemClicked&&this._handler.onMenuItemClicked(this._handler,e.proxy(),i.proxy())},onGridBaseContextMenuPopup:function(t,e,i,n){return this._handler.onContextMenuPopup&&this._handler.onContextMenuPopup(this._handler,e,i,n)},onGridBaseContextMenuItemClicked:function(t,e,i){this._handler.onContextMenuItemClicked&&this._handler.onContextMenuItemClicked(this._handler,e.proxy(),i.proxy())},onGridBaseCellButtonClicked:function(t,e){this._handler.onCellButtonClicked&&this._handler.onCellButtonClicked(this._handler,e.itemIndex(),sf(e.column()))},onGridBaseEditButtonClicked:function(t,e){},onGridBaseImageButtonClicked:function(t,e,i,n){this._handler.onImageButtonClicked&&this._handler.onImageButtonClicked(this._handler,e.itemIndex(),sf(e.column()),i,n)},onGridBaseClickableCellClicked:function(t,e,i,n){i==Kc.LINKABLE_CELL&&this._handler.onLinkableCellClicked&&this._handler.onLinkableCellClicked(this._handler,e.proxy(),n)},onGridBaseScrollToBottom:function(t){this._handler.onScrollToBottom&&this._handler.onScrollToBottom(this._handler)},onGridBaseTopItemIndexChanged:function(t,e){this._handler.onTopItemIndexChanged&&this._handler.onTopItemIndexChanged(this._handler,e)},onGridBaseDataCellClicked:function(t,e){this._handler.onDataCellClicked&&this._handler.onDataCellClicked(this._handler,e.proxy())},onGridBaseDataCellDblClicked:function(t,e){this._handler.onDataCellDblClicked&&this._handler.onDataCellDblClicked(this._handler,e.proxy())},onGridBaseRowsDeleting:function(t,e){if(this._handler.onRowsDeleting){e=this._handler.onRowsDeleting(this._handler,e);if("string"==typeof e&&e)throw e;return e}},onGridBaseRowInserting:function(t,e,i){if(this._handler.onRowInserting){e=this._handler.onRowInserting(this._handler,e,i);if("string"==typeof e&&e)throw e;return e}},onGridBaseSelectionChanged:function(t){this._handler.onSelectionChanged&&this._handler.onSelectionChanged(this._handler)},onGridBaseSelectionAdded:function(t,e){this._handler.onSelectionAdded&&this._handler.onSelectionAdded(this._handler,o_(t,e))},onGridBaseSelectionEnded:function(t){this._handler.onSelectionEnded&&this._handler.onSelectionEnded(this._handler)},onGridBaseShowEditor:function(t,e,i){return this._handler.onShowEditor&&this._handler.onShowEditor(this._handler,e.proxy(),i)},onGridBaseHideEditor:function(t,e){return this._handler.onHideEditor&&this._handler.onHideEditor(this._handler,e.proxy())},onGridBaseEditChange:function(t,e,i){this._handler.onEditChange&&this._handler.onEditChange(this._handler,e.proxy(),i)},onGridBaseGetEditValue:function(t,e,i){this._handler.onGetEditValue&&this._handler.onGetEditValue(this._handler,e.proxy(),i)},onGridBaseEditCommit:function(t,e,i,n){if(this._handler.onEditCommit){e=this._handler.onEditCommit(this._handler,e.proxy(),i,n);if("string"==typeof e&&e)return t.editOptions().isShowCommitError()&&alert(e),!1}},onGridBaseEditCanceled:function(t,e){return this._handler.onEditCanceled&&this._handler.onEditCanceled(this._handler,e.proxy())},onGridBaseItemEditCanceled:function(t,e){return this._handler.onItemEditCanceled&&this._handler.onItemEditCanceled(this._handler,e.index(),e.itemState())},onGridBaseItemEditCancel:function(t,e){return this._handler.onItemEditCancel&&this._handler.onItemEditCancel(this._handler,e.index(),e.itemState())},onGridBaseEditSearch:function(t,e,i){return this._handler.onEditSearch&&this._handler.onEditSearch(this._handler,e.proxy(),i)},onGridBaseSearchCellButtonClick:function(t,e,i){return!this._handler.onSearchCellButtonClick||this._handler.onSearchCellButtonClick(this._handler,e.proxy(),i)},onGridBaseCellEdited:function(t,e,i){return this._handler.onCellEdited&&this._handler.onCellEdited(this._handler,e.index(),e.dataRow(),i)},onGridBaseEditRowChanged:function(t,e,i,n,s){return this._handler.onEditRowChanged&&this._handler.onEditRowChanged(this._handler,e.index(),e.dataRow(),i,n,s)},onGridBaseEditRowPasted:function(t,e,i,n,s){return this._handler.onEditRowPasted&&this._handler.onEditRowPasted(this._handler,e.index(),e.dataRow(),i,n,s)},onGridBaseRowsPasted:function(t,e){return this._handler.onRowsPasted&&this._handler.onRowsPasted(this._handler,e)},onGridBaseCellPasting:function(t,e,i){return this._handler.onCellPasting&&this._handler.onCellPasting(this._handler,e.proxy(),i)},onGridBaseItemChecked:function(t,e,i){return this._handler.onItemChecked&&this._handler.onItemChecked(this._handler,e.index(),i)},onGridBaseItemsChecked:function(t,e,i){return this._handler.onItemsChecked&&this._handler.onItemsChecked(this._handler,function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(t[i].index());return e}(e),i)},onGridBaseItemAllChecked:function(t,e){return this._handler.onItemAllChecked&&this._handler.onItemAllChecked(this._handler,e)},onGridBaseErrorClicked:function(t,e){this._handler.onErrorClicked&&this._handler.onErrorClicked(this._handler,e)},onGridBaseSorting:function(t,e,i){return this._handler.onSorting&&this._handler.onSorting(this._handler,e,i)},onGridBaseSortingChanged:function(t){return this._handler.onSortingChanged&&this._handler.onSortingChanged(this._handler)},onGridBaseFiltering:function(t){return this._handler.onFiltering&&this._handler.onFiltering(this._handler)},onGridBaseFilteringChanged:function(t,e,i){e=e&&sf(e._column),i=i&&i.proxy();return this._handler.onFilteringChanged&&this._handler.onFilteringChanged(this._handler,e,i)},onGridBaseFilterActionClicked:function(t,e,i,n){this._handler.onFilterActionClicked&&this._handler.onFilterActionClicked(this._handler,e.column().name(),e.name(),i,n)},onGridBaseKeyDown:function(t,e,i,n,s){return this._handler.onKeyDown&&this._handler.onKeyDown(this._handler,e,i,n,s)},onGridBaseKeyPress:function(t,e){this._handler.onKeyPress&&this._handler.onKeyPress(this._handler,e)},onGridBaseKeyUp:function(t,e,i,n,s){return this._handler.onKeyUp&&this._handler.onKeyUp(this._handler,e,i,n,s)},onGridBaseShowTooltip:function(t,e,i){return this._handler.onShowTooltip?this._handler.onShowTooltip(this._handler,e.proxy(),i):i},onGridBaseShowHeaderTooltip:function(t,e,i){return this._handler.onShowHeaderTooltip?this._handler.onShowHeaderTooltip(this._handler,e.proxy(),i):i},onGridBaseColumnPropertyChanged:function(t,e,i,n){return this._handler.onColumnPropertyChanged&&this._handler.onColumnPropertyChanged(this._handler,e.proxy(),i,n)},onGridBaseShowInnerDragCursor:function(t,e){return!this._handler.onShowInnerDragCursor||this._handler.onShowInnerDragCursor(this._handler,e?e.proxy():null)},onGridBaseInnerDragStart:function(t,e){return this._handler.onInnerDragStart&&this._handler.onInnerDragStart(this._handler,e?e.proxy():null)},onGridBaseInnerDragOver:function(t,e,i){return this._handler.onInnerDragOver&&this._handler.onInnerDragOver(this._handler,e.proxy(),i?i.proxy():null)},onGridBaseInnerDrop:function(t,e,i){return this._handler.onInnerDrop&&this._handler.onInnerDrop(this._handler,e.proxy(),i?i.proxy():null)},onGridBaseGridActivated:function(t){return this._handler.onGridActivated&&this._handler.onGridActivated(this._handler)},onGridBaseGridFocusChanged:function(t,e,i){return this._handler.onGridFocusChanged&&this._handler.onGridFocusChanged(this._handler,e,i)},onGridBasePaste:function(t,e,i){return this._handler.onPaste&&this._handler.onPaste(this._handler,e.proxy(),i)},onGridBaseCopy:function(t,e,i){return this._handler.onCopy&&this._handler.onCopy(this._handler,o_(t,e),i)},onGridBasePasted:function(t){return this._handler.onPasted&&this._handler.onPasted(this._handler)},onGridBaseCut:function(t,e,i){return this._handler.onCut&&this._handler.onCut(this._handler,o_(t,e),i)},onGridBaseApplyCallback:function(){for(var t,e=arguments[1],i=Array.prototype.slice.call(arguments,2),n=0,s=i.length;n<s;n++)(t=i[n])&&"object"==typeof t&&!t.noProxy&&t.proxy&&(i[n]=t.proxy());i.splice(0,0,this._handler),"function"==typeof e&&e.apply(this._handler,i)},getHandler:function(){return this._handler}}),uf=e("RealGridObserver",Si,{init:function(t){this._super(t)},onGridViewPageChanging:function(t,e){return!this._handler.onPageChanging||this._handler.onPageChanging(this._handler,e)},onGridViewPageChanged:function(t,e){this._handler.onPageChanged&&this._handler.onPageChanged(this._handler,e)},onGridViewPageCountChanged:function(t,e){this._handler.onPageCountChanged&&this._handler.onPageCountChanged(this._handler,e)},onGridViewGrouping:function(t,e){return this._handler.onGrouping&&this._handler.onGrouping(this._handler,e)},onGridViewGrouped:function(t){this._handler.onGroupingChanged&&this._handler.onGroupingChanged(this._handler)},onGridViewExpanding:function(t,e){return this._handler.onExpanding&&this._handler.onExpanding(this._handler,hf(e,!0))},onGridViewExpanded:function(t,e){this._handler.onExpanded&&this._handler.onExpanded(this._handler,hf(e,!0))},onGridViewCollapsing:function(t,e){return this._handler.onCollapsing&&this._handler.onCollapsing(this._handler,hf(e,!0))},onGridViewCollapsed:function(t,e){this._handler.onCollapsed&&this._handler.onCollapsed(this._handler,hf(e,!0))}}),cf=e("RealTreeObserver",Si,{init:function(t){this._super(t)},onTreeViewExpanding:function(t,e){return!this._handler.onTreeItemExpanding||this._handler.onTreeItemExpanding(this._handler,e.index(),e.dataRow())},onTreeViewExpanded:function(t,e){this._handler.onTreeItemExpanded&&this._handler.onTreeItemExpanded(this._handler,e.index(),e.dataRow())},onTreeViewCollapsing:function(t,e){return!this._handler.onTreeItemCollapsing||this._handler.onTreeItemCollapsing(this._handler,e.index(),e.dataRow())},onTreeViewCollapsed:function(t,e){this._handler.onTreeItemCollapsed&&this._handler.onTreeItemCollapsed(this._handler,e.index(),e.dataRow())},onTreeViewChanged:function(t,e){this._handler.onTreeItemChanged&&this._handler.onTreeItemChanged(this._handler,e.index(),e.dataRow())}}),_f="dkdl",ff="iVBORw0KGgoAAAANSUhEUgAAAWIAAAAsCAYAAABfebLSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAALIJJREFUeNrsXQl4VNX1v7Mnk8xM9hCWCAHZdxEVLJVVK7WiQltsiyjiX+tXUBBRrEUt2lK/D5dqpQKCuBergijQUkRZFAEVEGWJ7FvIvs2+/M953Dtz5vLezGSSgGLu990vyeTNe/fd5Xd+59xzztWxltJSWopOquKzEP89RCojP1tK4/qcNaDff9B9HgqFEuqMltJSfqxFT6qB/C4AIUhqgP/8wQNDguDIJMHTVO8t7i/3uVq/B6QxaAHilvKDYXZqi0lrrNUW2YUKNGr9ZeDVDNXCfxo5KGDx8+qF6iF/B5phfEJxxqS5+0KvAopMAsKmEEQCgI1Sv+tJv/t49fLq4/0eOkcMW+t+iaydFiD+kQOwPsZikn+qTU55sV3I7E8AgpEDgRWqDWo61BSoJn4NgoALah3Uel49HBiSGRv5d53GmAQ1xqQ5xkNH+kL0h4mDJeNCRwCiEETBRrRDgHAq1DTe52m83w38vtjHTtLvTv5ZoBkZtk5FS5LHSgbiWGsm1ALEPy4Q1pOFZOaLyKSiaqupnGLiBHgVzMNHmN+FCsiCCSMIZMBicWhdOHToUNP69esr4NdKDg6eGKqyTgUcDATojOQzygLlxe2XxsMnLfqmBmELB0cr7xMz/z8+1w21hv90kbYk8zzxLNv111+f895775k1L9Yp07WMP7ueC4PmYNjyWBnIOjJKY0WBNiBpTVRjCq+ZeEBsbMGxC4bZmcgisnJ2kUImlbwhpTWZPHyxieohEyx4gYGxWHxmzso0S3V1dSbvAxev8e5p0ACHFMI4jZIZhJHxEMDh4c9zc1boJSAYasL5IxhqxpgxYxxTpkzRgfDxHzt2zLBo0aI0qOzo0aPY9grybF+SbRAmIXNtbW1qHDNPHn9nd4x+F31uaSDDFkJNJ4GvGCOxhszEZEXXT4CMkYfMDZdEZOKWFiC+cMBEmYQPP/xwdnl5eeoVV1zBvF6vssBvu+02Z6wbrFixIqWsrMy0du1a+8mTJ0PA/HBy1vJJKyauOwE73Q/ZPJESy9zg8XjS+QKrkoBTTT02kgWdSgXkiBEjTAUFBfrhw4d7AoGADsYmCly2bNli2rVrl6mystK0Y8cOY3FxcRA+E2zUwMejMSAYa/5YEYTffffdMHi0bds2MHv27PpJkyYZunbtmltfXx8kQqIxc0ERgG63O4XPL63i4FqISUOD11Eicn17lvXeKCYYtke6NkX3ojImTNIAjWQOCG0gvXsmsw7MZYarWjNfTgoLjS6MCIJj9cyw+iizfFfDUo7XM9u6EywEP+v5/DDwd0pYe2kxTVwY6rWF2zezQQVKbewNkQU99thj9tdff10HC6+KL4RqohoGLhAwFlpENtR20HeagAAg1G3v3r2l8OthqCUcGAMSCKstaBsIxTQAYAZ9WpfseDz33HPGuXPn1nA1vZYLhabwItCT+ZO7bt26dGTCahdOnjw5a+HChSjUT3BmXM/BuKHAb+bPy7v00ksLPv/886oYpok+8KMY6hGopSqgrSPjmDGsNcv/38+1WSgAMTLsY/xeNRyIzXy8UNg6BuUz+x3dWOCWzgr5SLgAMJtf3c9CrxUzYcKq5eslGM80oW/BsQtKvbY2xQ2RBb344ouVX3/9dc2VV16JINUKaiYHFtMFNm+oKUGzwEIyqJgRmAoLTuMsLmfQoEH5S5YssWzevLkuWRAW45GdnW3i97USFbmp3l+o5kYtEMbSp08fH4vYjvVN0AYd9Gu8uSTmW7znnWHYgTDjjcWw04hpyMT71GY3s5zHBjDbputZfUNBGMs17RTQFeNvaYjFoQWILwwgEQsppSlv3L59e/+GDRtKBw8ebEe2BNVO7G4t2lSk/w0SCOdOnTrVvmnTpvpbbrnF3RQPgXvZOeszNhEIRskZ8S7bt2/XBI89e/ZYWfQm4/duDHzBsLeLVrGyaJuvYtJzmFnWW8OZ8eH+zNmYhmw8xTIICOsSHacWIP4Rsbpky6uvvlputVpzOSu2XoCsuLF9LkDYbrPZcl955RXj008/Xd+UDwOAdLBod6ymBGHhoeF94YUXLFoXrlu3zsZVeepJ870ak1D8eWli0b7jKNwct3VhqZzRJl3WHmeph+uUeaCT+jZuadmsu7BYccxJOGHChKLjx4+n6HS6oF6vD8LPUGFhoWvmzJklnTp18sVixiNGjAiuWLECgRjtamL3PpBAm2T/ZQoADQ1YUAuG0HK0b87gFOpvKmzC6Xa7Pfutt95i11xzjacpH1ZcXGw6duwYPksElAgQjBd0IPexWp+J3/G+7kWLFvmNRmPG/Pnzw3bbtWvXpt5///1tv/32W5wjaGJxs9j7BLECVxhh1LrzuF7EBp/lylbMNu+KxjFhLP8+qLBhD0tiH6UFiH9EZePGja0OHjyIjLaKgylOlixgcAUTJ048DovvhNZ377nnnnIA4gLO/AQYxwLfWA7xsiN8rIgt+Z5qwRFMYoqx7t2U/rdi40nxQ542bZoFQDguE16zZo31ySefLDx06FAaAKzZ41FwG8dCl5WV5cvJyfEWFRU5+/btW/uXv/yl9PXXX8f7V6qAIO0LGdxC7Oxde60AEh2/DhtS989//tO6dOnSIhDA+pqaGgsIb3xH3Kwt53PHxcEm1ICxl3FHYaahUEh3noA47EM+ok1sAnPPZtbm/SOs7YEaZZwV//EsC/O0S2euzg5Wf1d3dnpoa+beX61cjuMkNrUT9ippAeIfE23W6ZDR4I5uCV9QOFkQCOyw+HKheP785z+Xq3136NCh7hQobrdb2NgMMVR1A1ls1CGeAgD1lfVqqLwy0BhZtP+tgWmH4wbIfZsjGIKyYfvIkSNts2fPjrkh9+GHH6YBs+yye/duIcwoqClAXFFRgdW0b98+4+rVq63PPvtsm7Zt26LQO83B0M0ingqC1Qmbp4UIJhoQEpAAyEDAVzBs4W+L17ugWIABW3nbhCtjDYsO5lAbJyMBORMZN8rSxeZySjAYNJwnIBZtSJ3UVXtjbvhK1n3dCdaWC6FDHGT9FR4YKw8z7ShnpmUHWH7/HObcV62Qk2oWCXxJOAy+BYh/XEAc4JOkjFcnX7y40Pwvv/xyphYQcxNFYM+ePWYJBCkzk/1nhUO8RQJjAcLCSd/Jf3oIcIQIAAuQ0XKyN0hALACIBkK4JMAPNWIRU0ZltUF56aWXYgV5MFD5M+6+++4+IPRwoR7kC7aWRfyzKaiFBY3T6QwBKPv4O4jw6gABYsHIRSCDAOMAiwTkuPn9KUDqWCSAx8P/L0eRyVpGSMM8Q23lKaRayfP0RACL76WfRyBWntsjkxnbpmkH6Gw8xdpwllvChaFweaObtPovypTLPSzid+9tMU20FHUKp9eLyDDheF7PFwp+bj569Kgt1ve5q5GsAusI6xGLDwHBPmjQoNRRo0YpAE69BzBo4ZNPPrFCta9cuTLE21LDgUmATZBFRwwq9ywsLEy/5JJLjD169NB16NDBDz/9l112WZRNduHChdbt27djzdy6dauH37uaLxIXURsbw4bDqu3YsWPNwFrrEgBhXK6nuBAUftmxQm0pGPokG3E4LPmmm27KfPvtt4XHDLX1G0H4ZvN3DoK8MI4fP143btw4tPnjdSbQdOzr168X7TDBGJtZJKdGVBkyZIh1w4YNTi4UqCYi+07bBw8ebB0wYICuX79+4bHHcQdtAAOHUtetW2ctKSkxBwIB/3kCYqWfHebYZgnvma02N5+b1RyUvYQoyNoYDaEOtgBxS1HFUhad+EQ2D8RcFKWlpWZpctFND0VFZ+gQP2iQA1RqDwCmqr0UgNOHdcaMGWzz5s3mBx54IBcWeBphajreHmGDtd5+++1ZN998M/q5xnUHg2udUJXf3333XdxoalVcXGwlNs4Qi97sSmYhh12fAGRjtumJJ57oDCBcyUH4OIsEQ1BzzFkgIdldxXjJ9mEzAJump0NOTk6rsrIyf9++fevff//9UvRJpv/nodtmDtZmDjqqpa6uzs7HxUlUbz2LJO/JAMGYAeMZ/O1vf+vUGnceTVgxZsyY1nv37k0/T+sgxH+JOQdGtWWH/nNMIQFqGflk84ycXChhRtzivvZjQuEzjNZITAhU3bcUFRVpuu/gzj3aL8kkDMl2UqhZ9957r+I/CyCcENMB0PYCMy4DVomTXQSOWInZwQTsKn3BggUsVrCBVrnhhhtc+/fvL7vmmmuwffkIFiwSFNEYNqUAcbdu3Syx3nXatGmtDxw4YOAsuIRFEtgIE4OO2HnFeMjmH6Ziiw2bgwBMNaMps7KyjAC+RjUQVnTpM6HbNg6kMQOC+LUihwPN1IafZcMYZn799dcuAOGEvEbee++9Ew899NDJ80hKAp+WxL5ozbVs/+hCRXCiZoEunDl8DqWzSFKkAEs8XWcLELeUSE4BvvgcfFIh+GXAoqjW+uLcuXPzJTtuULJRZs6ZM8c6b968pNyAli1bdnr48OFpHCwdnGUpNksAdv2OHTsaZUtctWpVWfv27bMQm8giSuaeUdnKgOHFXEP//e9/8zgLr2ARbxUf0UiF2SWDt02umfx/DhadopNuVGoKFVD9U5YuXXpYDYT5/wXwC0HAYtxLCAq6EYtzKWPcuHE2GMMGjz2Adu35AmE+Du6Fe2ILoJXXsMMfX8cOD2+jzPNCqLh5l8fB2U6Ig1a6zBYgbilRjFjHATiLTyRkoAVWqzVv1qxZHjkBDS3vvPNOHrHhis0lASQOZLQA5K7GtG/hwoWleXl5AoCiQnlXrlxpbuz7T506tZYzmsZGCIZTjvbu3TvmzjiwcSuLeB1Qty8D7zs6Huge2BpqG1Jb88/z+cK3sbMj7DQFyi9+8YuTscw5XEuKex9+rdicEmxdEeqFhYUZIIC9P6SlwIFYycg2/xsWNz/LkALmWTuandx0PasYW8TsrawKGLfhayiLALKJJeEj3WIj/hGVDh061BuNRj3UFIPBkGW32709evTw/fGPfyzXYkxYrr766k4VFRVOzuhELl7GiNfAU089paqOopfFhAkTum7duhXBxJ+ZmYn22wN/+9vfzlIKMXAEmJX7+eefzybMUdkA2bhxY/i6O+64o83OnTvte/fuzayqqjIJNbCgoKAeGNYxtXtjueeee6qhndlHjhyxs8jud7KmCcU27nA4NFVQ9BcGdT7AIqkRvZImYcX2wHubXS6XAavKbRTwM0NJT0+33HDDDQgaaOt2swSCYQAgT8R6GZgHwqtCtlXHE0QClO3Tp09nseaP6Iv58+cX1NXVGfv27Vv95JNPnjqPS4G6N9ZtL2P1M7ewjLmXsaq4prR85oWK3hPsiS+Z/e+7WdtTzvAmntiAVXPxawHilhJWk/c29DuTJk0q/M9//oMs7CifbC5uAxNmjnRg0iZYiKqM6KqrrhpYUlKCixZtge7KykoDLMJ2JpMp8Pjjj5fJ1z/33HMlL730UicApTQO+orr2WeffVY3efJk22uvvZYL/7NyMCxjkU0R88mTJy0YKAHgEsRACLX29OrVKwBALFileJdkwFjxFBk1apQmE0TPDQ3bodjgtCIIjxkzRmzCJVJyWMTvOJnjmnDzMAeEcRA0IR/gOwUOSwPeX3FLa9eunW3KlCmaQSwoiEFb6rV7924HH0/f2rVr0d2vzTPPPLPvPJkmBBiLMan82w7Wtr2Npd/VnSWcnGlWP1aDddLHLPut75i13q9oWZW8f1yEsMQFYz2LfcxOrCND4kVPnYuidgqCfBKCSaXKAQG6ZmjP+eqTJim4gHr27NkfFgyqxqUc9ISNUwQA4MRLu++++1RV34kTJ7ZHFyXO4PAeJbyWv/LKK5lazx4wYICfq+AWPok9wHyrFy5cWAcgLO5zmttdBQsRyb7dwL4ytO4NgqGGq5AWpp5NrUFjHIsJ6vV6mseBBqsIILdosOBYJZNFbNwNavuIESO6paSkXPXQQw91nDlzZv4f/vCH9B07dgjXPk+CwE79Z1NuvPHGmBePHj26H4Aw9jWmsTzAzqS0PAAaVhkI1g64CXyeTBPh4BU+r0t/v5FZb1mvmIgaVBb9lJUvuYq5iuyK+Qg39DJY9HFbCTFiNVeZUJyXkAeGvlwwUSnQBKAn7yDrNCpj6s7pARZ9hlWoCdpDw27l8+B+EDl8FyxYkDljxowB1dXK3t1xPlGribkg7DUAjFCTDW/YsCGfMEJR8Xveo0ePWj755BPLkCFDzjJpdO/e3QvfFWBpYpHABBfpWxEoYERf1WAw6O/SpUul3+83tm7dWlPFBrXYze2tYuff18gxT2TRa6r3mBy+gc9MI++esF124MCBvbdu3Yqs9BRnbdTMFOQagr8B81zx7x45cqTmd+bMmZN74MABHMNjXCMqJ3Mgw+12B6ZPn563fPny4+cJjEVYt3in0NJ9LO+LMnbRrL6sfHynxNnx2CLmHJDLvD2WsXynP4ptBxLpV8EIKIPUSWAl7FSMnR23T4EwKD040MwgLGe/ks8AM0jXyH5+fqIyNvYoILXwXhpJ5GfRPqDf6wJMpbKwsHDTrbfe2g3UfRFIQJ3UwwnQAfw0gQQWYRa3xaZwFmck48W++uorVSAuKipycxVcRNBFPROA1oLq/LXXXlsDjKtBCXaAFQp/2WTTOSZ8EnB+fr6fxc4DETAYDA2dD0I4JdxudKEDEMaxOMGBuJRFNg9D7Oww5ESB2AL9rwlWb775ZlsO+mVEg/GySBCRCeZIbhNiQjJgLKILa8XfX1ewrJvXsZx5u1juiDas7i8DWWkiN2tvY364tnbqZoUVC/KQUCSnkUVHL5nJgFDjvbguyKKd0PVkUtAjx+NNYjVQ1WIScpYpeTLQM6YMLDovATVNqJ0zJcJr9RIYN7S9tD1mwrboQKsNyvcWlK+++monMNadvXv3LgL12SyBiWDE5lg+tKFQaFUyzwZ1txZU5zYscpglPjeFBAtUNvL1qBkr2QWsAClG8WEAidpFIMiqb7vtNjOZhzTHg+I6lZqamtLcgLNx48ZsoX5zIC7n897PIt4P8txXG88oAtSmTZuYZpUTJ06kcCYsNKo6FvFDx/5wGo1GbxOCcEM0lJBkoohyacO2bitlmVAzFuxhuQNzmevZwexYJ3tsDWpKT1YD12cCmDuIsPPFI6YCtCwgNfEU23yo2TfddBOyERw8xZWoqqoqBz7PggknPkcbiD0nJ8fBv5P7yCOPoG1FnCCQolLNLNr1hSZxMce41iRdR4MQlIieLVu2YBtyiouL0X6W+cEHH9jg7xSoxtCZ4oXq4T8D6LKDRwr973//y2QRdyC5vRYWnbhEq73UD1OxmW7atAnbkwcqvnA5EqcCpBBhd87TAHbo0OEnOp1uNNSRUIf16dOn59KlS+1a12NqTACSKt5HViJgwsJu+PDhvqZuJ0/JSUObs8aNG5fRkGCBBPZG9I0A4bCmU1lZGZOZQh/X8vegJwuHuOCvu+GGGzwwFllQu0IdhOPS1P1ZUVFhYZGkPaKKcwi9LLn8wnrQTGL2H27MsugDaH2SRurjYfdNxYR1oVCDxzREBSNnxuVcgCh27XI3O7rqKPP3WsY6j17N2se74U9aKe/rIORWn+iENL788sth6QZqaSpXDXO6deuW6XCcOWW8V69eqdy+hgDmALUyfPz4smXL0vnDhT9dGv89g3yeThonAC2cR0DlWisFXP6ZjVTlbxAUCot3u934LvZEN0BqamqMLPrUVxrk4CBtSJXAX7SXtlUkXgm3p6SkJJUb73NZxNcwTdI+zhkYw6T3cmaCNrlDO3fu9Nxyyy2d582bp7m5hV4Mubm5YixTJWZniOe21EiwVE5XHjZsWPq//vUvVxPeu7F9Hg4P/+qrr0xxbLM1ZK6KDRyhKbn4oj/F7ajCHt+0drwzWfc8pDaFiSyRTeiQZJI7K2kQ5sRuovFUBGsCieHV2kHNsR4upKq5BoGAjB5Dh9wBdvzDI8w8ZAXrEOsBl+cp2obADWOiQKzYesvLy40bNmxQACwvL8/AQcbRr18/M1EZvaBKCZByZGVlKWrVqVOn9Nw9JZ0AcCaLhAXmETByUBDVuDaHMEkbAUjh7J/DIlFHNlCjbTCguT179sTvGseOHWvHv6G2g9oDN4WwnR999FEKZx09obbhPplCNbPze+ZyYSPanCm110HaQNsrrrPV1tYaOdBb+P9pzSGag4mdw2OHePY1kUkKJxcehHn0iSeeKIgDJn4WCQ22nCM2j201WqEASdC0Q6J3x5gxYzp17Njx0pSUlCHIKKGOOAebPIrJadu2bTEvfvHFF4/zdUJJioks+jpuQz3Fa3MAcYhFh6YHmwD44pbMzEyvyt5NVGrTJLKvyRvxNLrQ2MqqbQIorgn3OwVjasoUbRXJe0RaSxGejqB8csMpZpm9TcEA1TKhc3hfxNwQIA7bYd9//31FuvOEHQqo9OjRQ3kxBDNkP/A3Eyywe/fuypeXLFmSRiSArXfv3hlPP/00mjosGI2DFRa7A4BSBtrs/v3758K1mdK1mDwk6tri4uIs+F/6nXfeqaipmCXq7bffxhd1vP7662h2KH3llVeED5+fRVIsulXYjI+oTFis48ePd4Dqm8rNGTrcSILniIMzc4WpZtSoUTkrVqyw4/PxWviO5de//rUIT8WfNmDmyuRyOp1m0Br8R48eLYVrnWgSgedksUhoZCo7h77cnBnVcTAW9sJTIISrH3vsMU1WDO9XwSL5CIS9WFnQmFGrqdsJ88Ehxu3nP/+5V4t1Y37fyy+/fPDy5csxn4PP4/FQN7vmBGJhV3RjikpMXBTrCw899NARSbCLdJU6sl9BXfCaq82sCUA4vOH9zTffxLywXbt2LqJFWiQznvJ3QUFBQzw11EyE1FxpLUzXBuK3DyhrTi1XitiLsBIzJTUj+YjQRNNF7deVzJwAtupZgpuqRqJm+Tdu3KiAAj81lsECNXfu3Nl/6NAh49SpU9t/+eWXey+77DInsACFeQJQKRFMW7duTeP3Sr300ksDn3/++VmT6cEHH3RDRR/R7O3btyudMWjQIDwU8awjuaVrlclTV1enHF/+s5/9DMM2FTUVo3QQHFwul7JovV6vnkg0kefVZDQaqSoifAeFEV0P4G5+4YUX3JJtL4Dq8N13323/xz/+gSDkgfaG1qxZU08nMwiM4BtvvOExm832pUuXKqqnz+dTNiCmT59egdFi9L4gNLzwfxsIEcaiPTcCzQ3Eer1eRBO5+IQSNrvUXbt2adqK0el+8uTJhSBg0vikFRFiftCEzJhRS+17GRkZ11RXVxtZZCM0lmdKkKjron26kSNHagLTI4880hHuLwI7RHrCFC40WDODsRD2dXPmzMkGoaCZx3natGlVQCRSYI4VsEhoeC2LTvwjbyY1NSNu9L3JfRTMqK+vDxw7dkzTPPWb3/zmxM6dO9txbUCMo5/PIUXD7Nu3rz9BEKZZ/vTSZ6mc2NgmdmaaG7nlbuVa2dkgRWKvjJhT6Lo0UtJUZNN2SlhzLJy7IuFTYagnhOfTTz9VOhb/cdFFFzlB1dOBmu9cvHix/dtvv81AQL7vvvtwwplycnLCzuwAxEoqu9TUVP0777xTI27erVu3zjB4A/Anfhc/e/bZZ3ECtoJrc9566y13AtcqjJjbfxGE3TfeeGMBXNtt4sSJBVTigJqjk1Q+/H6NcBHiP52Eefg6dOigFyCMrB/e+VIQQpegGQM/e/7552tyc3ORLeZiakf8DBkQvH93aENf+K7y7qA+1+Tn5ysbdsI3FEH4yiuv7ATXDYZ79hXvBSxOR1T9ZJPPNJYdCVBWNihAyMb8UteuXf3Eti362btu3TrNaKwxY8bsIWxPJKQ/zZn4Sf4zrPKxiHuVOI3Co+WRoCys8vJUFu39gtWTl5fnauY+DJsm8N1WrVoVjMeKQZifeuqpp07DXMI5i4ljRJ6CPKJxiWPYv88lRFR3z9///ndNoXf//fdXDB48uI6b+qi5T1nTRUVF5scff7wmQSA2ESFLTYPhenMn5rssT9urYVeFotGJDUohEK2Tu7Kc+T9h+b2ylPFoy2sBH5980mbFGaDIzoJPXq4N+GuPMTtT98KKC8TiRAPvsmXLlInQpUsXF4CiYpv74osv0vFcrUWLFjkQXGBR1hcWFiovjOACqjcuCB1It7AaCSyqYM+ePTixgngM98MPP4wvoqQ97N+/Pyb01olrb7755tb02j/96U/Z4tpLLrkEn5MuwA1Yatq7777bikXn0lWze4fdxlQYcdiN7Nprrw2D4Ny5cwvgPVMrKirS5s+fn0uEhB/ULJNw1Zo1a1YrAAHspwB8J2wrgvfH5+m5QECVNAcYP97Hiykk0VyjSNOiIuFAn3quN+wkMBYLyv3dd9/5hRBWK6Dp1BEbsYH3nwcElqbqtWTJkkMzZszYmZWV5SKTUj6+SPztSUtLq+cCVIQ2x/TIgH6s4vcUKT3RpGxesGBByTkSZML/tAo0p8x4X8RcF6dPny6+9957gyCMc6GtFyHnYZGMXtm9evUKfs+BmOaxdm7ZsiWm6g1a9nfXXXedC4hXa/6uyJDbwLqzfPzxx2UJPlMk4bc9NoDlDWutAHob3m8XATDmzurH/K8NYzHdGreWMgeLPhEF542tlZWl/183Fto5lnk/G8N8t3dlaVe3ZTkd7cozwmMEf+eN78R0H193JteEVtlcoggLYfpMCIyNTPKtBRVVyUTUsWNHjzjYD9gSvoBn9erVdjxKBwCpRoANgrNY1ACsYTWjqqrKTIDPf/z48TCtb9WqVYDuloJ6GXUtAIKJXouD4Pf7dZy1phOQdRGmyzhYU+O4Lo7BH80IYfD54IMPDrEz51JFFYfDEQTmHFZFQM20CfPH4cOHQ/AubZnKcfY1NTV6IoEDGN+PnwNzDrCzc8/6NHZ1zxWzc7366qvWBx54QDX2/5e//GUFAFwHFtn5VxbiiRMn6mbOnJkBAknVLosJeLCCNoEnQaTBWCljT8cfzQ/9+vXzosAEYWYhqqF3xYoVKagFqd0bc2fAgu4AZMAA37W0bt3a/eijj5ZqmUoas/Gk0XfiCKPqr776KnXcuHF5mM4z3hfnzZtX3khB8H1gxUrifgBTP2oDSJq0LoYxxI1hhtojhn2PHj3a3QBvG2HHTW1vY5aH+zMf1AAX1gmXJ75kORUeZbzocVM4j9OHFETmADJqqBXJdgyaJQCI07n2R5P/NAiIvdCpCohNmjSpGqSZFxkvgCg2uH737t0G/PuOO+6o4J9hdFSasP/RxcVBXKi/fliAfmJCUJOiqtfy+4RBHBacOItLmBf0SUQnhRehECicgXf59NNP8wlbCx/SOGTIEHnxUGEgpKsSOMJzDDBMbEM2DP0Wi8UvSXmx4WAiUjrImmZnO9EFFXZi37lzpyarw4i07OxsPTcHiBMd8P2rn3/++fTrr78+5mKcMmVKDdZ4DUpDWlxfL0wm3jVr1qRqATHfsDuY7Ng3ASsWcwDfy4THFd166625ixcvLm3GMQueY2EdSwjh+1fjCSuY3D/el+666666JMdJ8WzKTw2TtQaXJfsUU4M4jsvF38FoNzPziDasyXzh/7CJdWKRTGw0hDyutKGTyrd3715FRUUTBG7ScMaruHK4XC7Pm2++mYphqePHj6/jbDldbACdPBlJtm+32+mBiGgvDS9SuC4Fq/jbZrP5ta4FxhVlM+OsUqTuUxYrAF5QmiSy+i2+K+d9CAAbDz+3Xbt2TsIShc1ROQwQACgsPIDRCmDQd+7cGQNEyqGegn7B60PEJh0km08us9kckPpeqFwpLNq3uKHuYaEGgHdIw1bs2rp1a8xnduvWTRw2KgS4AkIAnJW/+93vsoQNvDGlqKhI+GsrxyWhf3tT3Fejv5LtO9lWWs8X36klS5YEhw0b1qYZQVDe9Eym7Y2ZP0EW7XlUs2HDBhcQt+xkXgbdD0HQdk4AjE2dHckJz7H/Ze33VyttruBAHD41+yetmi4n+6DlrAs8x8ciZxK6EzVN6Fm0X6QCbsJOjAVYUgqLbHDVbtq0Kax+c7ZsEP8HUPYJO+Mbb7xxvGvXrsrC7dmzp2/27NnV3LRg2bFjhwNtwWKBAbgf07oWGDcKApew83Jwo3beMMvkACizyqBkI6Y7ot7Vq1eHwfHxxx8/lZmZicfGB955552DAK77oBYDONQcOHAgKN4NVPFT6FWCgDFr1qzwxtC2bduwrwKCEXOhITwjvMI0QdoZzmDG7a/UBqtLAoRjqnvcjzigsoiVsS8uLvbE2nSCsRF5GsSGnRBYFdA/FQBAeWjDb8xkBsHmY5FTiF0A8jUTJkzIaMg98LBO9C2OAyZqds+G9J0aGCsRWR999JETyER77obX1MUp2R6TbXtj5o+o4Ui0l156KTRt2rTshoIwpkl1Op2xwLBRwSe3f8La/fugYhs+zcdHnJytvMOluazRh5fuqWLmi99kfT4tUdbtKQmIEzLB6FVUVOe+ffvCE/Wzzz4z8cYrHgjr168P0/jnnntOJNhWPBTqoIwdOza8EL/99tu9AGQ7d+3adUTYhH7/+9+j0b4CD1MESdgqgWuVkEzBMjmrFCGTSv4GUPmD3BQg2LKPgi0BcWHbEtVdW1uLicqVNmNobUVFxTZg/l/gWWdcpU4HkAnAZy5QwWzcXlpfVla2G9q7R5xQC9pDBh59jveFNgaJaULYiL3QzgBh5gFub8Zw6wwQaK1YxN+yoRt4Yc+XmIOt11MBRoFEuPTVvvbaa5q5D0AAlUpqvWD8ShTSwYMHy371q19l4qGQyaQ3RMGMNmQW7VtbBYyrrk+fPq0TYcYzZsxodffdd/eDMdM8/qawsLCKRbsx+ZPoO9nOLkAJ++jY4cOHS/D8vh49enR88MEHG5XYBgHrzjvvbM2ZdrUExr5GtD3Z+eMn66ueM82Sp556Cg8IbZfIOGFO5KFDh/YtKSkxwlqKNdfF+vH9rB1L2BsGbbV93mY9Fu1RvJNQVS/h7XSyiEeD79X9zHfPZpZ2qLbh/vwIwKM+ZJ37/Zv1Kq5R+uE4B2JxOKw3USA2SkCsTP4tW7Yo1pi1a9eaTp8+Xcsi8el+wFrf4sWLLbfeeqt/+/btIRZJqYcP1sF30avCcdNNNzHqmoIbOsC002Cxevj1XgBd/cUXX5wNwOaTrwVmlQ4D6hXPTU9PV14Ik1mziNuV0qHwmfIeyGRZ5IRZj1CfcSOH/z9IbERhNxZgUJby8nIbAK1bbPRgoMKcOXPSVq5cyfjkDwJImU+cOJExffp0l8j6hdc9+uij9lWrVgm7qQ/a6uf2Th9hDthOEwHiemrv8vl8Og7CvgaaJkLSxpEmkJIk4F6JaYQzUH388ceaAIbmKgCD2nXr1vklEHLR+yxfvjwLauGAAQOCoE348TRndGVSW4yoPYBwR9dI8969e4OcTdQSsPFwzSwEoJY/YsQI9tOf/rQefXPFfWA+OoDJ26DtWfv378c+xHSYmm5voM3UHzlyxE1ARdeIvqP9QDUMJZfEN998k4H1mWee6QL94cXNZ/hZl5ubG8CkQFp9An2cDWtNB32SBuQgxPukkrO6OgLExka2Pdn5Q3Ms1/M+xBiCnO7du7ceOHAgu+KKK1zDhw+v4xnv2F//+tds0BptsO7TgeyZ+LoqCwaDmnsLffv2PQ1asXI4wAvfMBN6JHQBaM2A1fbbi1ktBd4vy1jqtlJmA1BM3VGuvIc4K7Cc9JubaEQeuLbmma+ZBWpeu3Rm7Z3FfK2tzN/JwVw3dmC1NMnP4r3MUeJixo9OsCz8Cc8Qx2Ad42NTQbAw0fzOUcxGR+yVIkTZxv8WUk8EXlhYJAmMmMC1ZDEiiIswaJGbQEdsSvRe4ihum8q1Hknyi2iaILmPh7db5LYQXgp1/P8h3l5x6qqBt7OG2IrMLBJmLaLd9ITlUFcqI3+WyBsgAmI8xBYsMloJbcMn7dIKW3CQRUf5+ImKW0/sS4nuKlt5n6ObYB7pf5FZro5PFJGOsIZFog6FiURJsMOiQ7vNpM9FQpRSPvHqiOAIu5CxSOi6iMZLZdEJg3RErRbaiZO3qZpPZjE+OhZx2HeQdllZ9Cm6Yt9A7FTriNlHaBl+ft8K8g5O/j97En0X0thYEtFawu+V5iIRfSE2d2n0lZyi1Uveq55Fzr6rI8+3JDnuoSaYPx5C6Ch2iLGyMRXfc7L/4uRjp2eRFALirMIAf98qXt38cxuZAylEe6T9JkypcpIjD1lTAu/ofKXJuUS6UTk1MCWCYg+JjouqwAOtN2FGTDepQuTFqfpDF04tbyBN8Rgi9luX1FE07NjDoo/bqde4VpggaD7aEIvOIawjHUNB3CNtQND/U9D0kXevJzbaoMq1erIgxOGTIRYdMi0DcYBFh1S6yHtQm11QAu1QAxmxAHHGf68kgs1PFnONZLsKSQtECI8aFh2C7SOCiUaFBSUbo5eAtpVFZ6gzqpjDAgRwXKR6yPgGCPOuIyYck7TAPXQjhp2dIjVI3qGGRacoTKbv1MYioNIXIvdACgFhM4vOlc2kfvSR+eCjJi6J1eka2fbGzB+60R+UzBXVRFjScfIR4SLWtiAC9OQUSricROA7CV7QYCgq2N0EKN0sOstciMwp0dYAIWgWMrdMZIwoRlKMcUlYlVRec530Oz0GxUg2TejGgGA/BgloAmQDirplGaTFRNPh6Yg0VbuW2rV0Uqf7yT0MKt8NEIlvIoBCN/toG2SwoB4FPmlx03Se1L5O20SZX0DylNCRZ6ipiPR8s0Rt/QbCSs3SOwekCeSV+kgnjQXtC3mcvQQc5AMA5CQsJrJY6PhSRhyUbI4+aT6FpPczkbYZJTAISGNglOayzDbpuBqT7Lt4a0vOj2Ai/UMFttwnVGOSDxeQj1wyNbLt+ia4D80HIa9pQbBo8iE554NFY6x80jgZpLlJTxWifSbPpaCGBiPPV3qMmpzQn26OJvqMhBixLoapQk9ekFb5f0zF9UUvdZLs+hJkZ2c/Urs2RBYVY2cfy0TvofU/OVtTSOXe8rFLcsfLz1K7TjXNn4rrkE7yWFFjJ8mcFEIXgtqRTfR4KLWjmyhw0OAUvcbuerzjn+Q+lcc4pDEntO4Z6zxA2VtGnltMZawC0lxpTN8lMjY6ae3I/avWJ1rv1ZTj3hz3UTvGTJ5DVJjo4oyV/Cyt8yCD0v0bMk5a7dapbGwGG7pW4wJxvAtaSktpKS2lpTRv+X8BBgDflBXoY41+xgAAAABJRU5ErkJggg==";return function(){var t=location.hostname.toLowerCase(),e=location.pathname.toLowerCase();try{i=realGridJsLic}catch(t){return!1}if(!i)return!1;var i=j(i);if(i.name!=q.PRODUCT)return!1;if((i.vender||null)!=(q.VENDOR||null))return!1;var n=i.server.toLowerCase();if("Developer"!=q.TYPE&&!function(t,e,i){for(var n,s=[],r=0,o=(s=t.split(",")).length;r<o;r++){var a=s[r];if((n=a)==(h=e)||0===n.indexOf("*")&&(n=n.substr(1,n.length-1),h.substr(h.indexOf(n),n.length)==n))return 1;if(i&&a&&"*"===a[0]&&"*."!==a.substr(0,1)){var h=new RegExp("^/"+s[r].substr(1)+"/");if(i&&h.exec(i))return 1}}}(n,t,e))return!1;n=i.lic.toLowerCase();if("limited"!=n&&i.lic!=q.TYPE||"limited"==n&&"Evaluation"==q.TYPE)return!1;if("evaluation"==n||"asp"==n||"limited"==n){t=i.expire.split("."),e=new Date(t[0],t[1],t[2],23,59,59,999);if(new Date>e)return!1}return!0}()?{getActiveGrid:function(){return Q&&Q.getHandler&&Q.getHandler()},exportGrid:n_,getVersion:function(){return"1.1.51.2803"},setRootContext:function(t){(t=t&&String(t).trim())&&t.lastIndexOf("/")!=t.length-1&&(t+="/"),Y=t},setAssetRoot:function(t){(t=t&&String(t).trim())&&t.lastIndexOf("/")!=t.length-1&&(t+="/"),X=t},setDebug:function(t){tt=t},setLogging:ct,setTrace:ct,_log:function(){st&&st.apply(nt,arguments)},setMobile:ce,$_setMobileEnabled:function(t){xn=t},getTimer:gt,Dictionary:he,Dimensoion:Zs,SummaryMode:Ts,ValueType:S,DataField:Cr,RowState:v,ChangingMode:Ws,LocalDataProvider:Br,GridContainer:Au,GridView:Uu,CellIndex:$,ColumnHeaderItemLocation:P,ColumnGroup:R,Column:Tl,ValueColumn:zl,DataColumn:M,SeriesColumn:Yl,ColumnLayout:ql,VisualStyles:d,SelectionStyle:G,SelectionManager:fu,BlockSelection:mu,RowSelection:gu,ColumnSelection:pu,ImageList:fe,ColumnGroupOrientation:cs,CellButton:Cs,SolidBrush:g,SolidPen:f,LocalTreeDataProvider:N,TreeDataRow:S_,TreeContainer:Y_,TreeView:X_,realgrid:new function(){this.createGrid=function(t,e,i,n){t=new Au(!1,t,i,n);e._gv=t.gridView(),this.initGrid(e._gv),this.setGridHandler(e)},this.createTree=function(t,e,i,n){t=new Y_(!1,t,i,n);e._gv=t.gridView(),e._gv._productName="RealGridJS v1.0",this.initGrid(e._gv),this.setTreeHandler(e)};function r(t,e){var i=null;if("string"==typeof e)i=new Cr(e,S.TEXT,0);else if(e&&e.fieldName){i=new Cr(e.fieldName,e.dataType,e.length),e.datetimeFormat&&"flash"==e.datetimeFormat&&(e.datetimeFormat="platform"),i._typeLock=!0;try{i.assign(e),e&&(!e.hasOwnProperty("minimum")&&e.hasOwnProperty("min")&&i.setMinimum(e.min),!e.hasOwnProperty("maximum"))&&e.hasOwnProperty("max")&&i.setMaximum(e.max)}finally{i._typeLock=!1}}return i}function h(t,e){return hf(t,e)}function s(t){if(t){for(var e=t.length,i=new Array(e),n=0;n<e;n++)i[n]=t[n].rowId();return i}return null}this.setDataFields=function(t,e){e=function(t){if(k(t)){for(var e=[],i=0,n=t.length;i<n;i++){var s=r(0,t[i]);s&&e.push(s)}return e}return null}(e);t.setFields(e)},this.addDataField=function(t,e,i,n){e=r(0,e);if(!e.fieldName())throw new Error("fieldName must be exists.");if(0<=t.getFieldIndex(e.fieldName()))throw new Error("fieldName is already exists: "+e.fieldName());return(e=t.addField(e,i,n))&&of(e)},this.$_setMobile=function(t){ce(t)},this.$_isMobile=_e,this.toProxy=function(t){if(k(t)){for(var e=[],i=0,n=t.length;i<n;i++){var s=t[i];e.push(s instanceof Tl?sf(s):s&&s.proxy())}return e}return t?t instanceof Tl?sf(t):t.proxy():null},this.setDataProviderHandler=function(t){new lf(t)},this.setGridHandler=function(t){new uf(t)},this.setTreeDataProviderHandler=function(t){new df(t)},this.setTreeHandler=function(t){new cf(t)},this.ping=function(t,e){t instanceof T&&alert(e)},this.refreshGrid=function(t){t.refreshView()},this.getDataOptions=function(t){t=t.proxy();return t.datetimeFormat=t.datetimeFormat||t.dateFormat,delete t.dateFormat,t},this.setDataOptions=function(t,e){t.assign(e),e.hasOwnProperty("datetimeFormat")&&t.setDateFormat(e.datetimeFormat)},this.getDataFields=function(t){for(var e=t.getFields(),i=[],n=0;n<e.length;n++){var s=e[n];i.push(s.proxy())}return i},this.getDataValues=function(t,e){var i;return t instanceof N?(i=t.rowById(e))?i.values():null:t.getRow(e)},this.loadData=function(t,e,i,n){new Fr(t).load(e,i,n)},this.getDataValue=function(t,e,i){return"string"==typeof i&&(i=t.getFieldIndex(i)),t.getValue(e,i)},this.setDataValue=function(t,e,i,n){return"string"==typeof i&&(i=t.getFieldIndex(i)),t.setValue(e,i,n)},this.initGrid=function(t){t.displayOptions()._emptyMessage="Load data...",t._productName="RealGridJS v1.0"},this.resetSize=function(t,e){t.container().resetSize(e)},this.resetShadowDom=function(t){t._shadowDom&&t._shadowDom.reset()},this.setShadowDomOptions=function(t,e){t._shadowDom&&t._shadowDom.assignOptions(e)},this.setOptions=function(t,e){e&&t.setOptions(e)},this.isVisible=function(t){return t._container.isVisible()},this.setVisible=function(t,e){t._container.setVisible(e)},this.mouseToIndex=function(t,e,i){t=t.pointToIndex(e,i,!0);return t?t.proxy():$.nullProxy()},this.getCellBounds=function(t,e,i,n){i=this.$_getColumn(t,i),e=$.temp(t,e,i,n),i=t.getCellBounds(e,n);return i?{x:i.x,y:i.y,width:i.width,height:i.height}:null},this.getColumns=function(t){for(var e=t._rootColumn,i=[],n=0,s=e.count();n<s;n++)i.push(af(e.getItem(n)));return i},this.$_getColumn=function(t,e){return"string"==typeof e?t.columnByName(e):e&&e.$_hash?t.columnByHash(e.$_hash):null},this.getColumnProperty=function(t,e,i,n){t=this.$_getColumn(t,e);if(t&&i)return"styles"==i?t.styles().toProxy(n):t.getProperty(i)},this.$_fireColumnPropertyChanged=function(t,e,i,n){0<=["displayIndex","width","visible"].indexOf(i)&&t._fireColumnPropertyChanged(e,i,n)},this.setColumnProperty=function(t,e,i,n,s){e=this.$_getColumn(t,e);if(e&&i){var r=e.getProperty(i);e._ignoreRefresh=!s;try{"styles"==i?e.styles().extend(n):e.setProperty(i,n)}finally{delete e._ignoreRefresh}r!==e.getProperty(i)&&this.$_fireColumnPropertyChanged(t,e,i,e.getProperty(i))}},this.setColumn=function(t,e){var i=this.$_getColumn(t,e);if(i){!e.editor&&null!=e.editorOptions||delete e.editorOptions;for(var n,s=Object.keys(e),r={},o=0,a=s.length;o<a;o++)n=s[o],null!=i.getProperty(n)&&i.getProperty(n)!==e[n]&&(r[n]=e[n]);for(n in i.assign(e),i instanceof M&&T.applyGridMapper(i,e),r)this.$_fireColumnPropertyChanged(t,i,n,r[n])}},this.fieldByName=function(t,e){t=t.fieldByName(e);return t&&of(t)},this.columnByName=function(t,e){t=t.columnByName(e);return t&&sf(t)},this.columnByField=function(t,e){t=t.columnByFieldName(e);return t&&sf(t)},this.columnsByField=function(t,e){var i=t.columnsByFieldName(e);if(i){for(var n=[],s=0,r=i.length;s<r;s++)n.push(sf(i[s]));return n}return null},this.columnByTag=function(t,e){t=t.columnByTag(e);return t&&sf(t)},this.columnsByTag=function(t,e){var i=t.columnsByTag(e);if(i){for(var n=[],s=0,r=i.length;s<r;s++)n.push(sf(i[s]));return n}return null},this.getDisplayColumns=function(t){var e=[];if(t)for(var i=0,n=t.visibleColumnCount();i<n;i++){var s=t.getVisibleColumn(i);s.isVisible()&&(s instanceof R?e.push(function t(e){var i={name:e.name(),orientation:e.orientation(),saveWidth:e.saveWidth(),columns:[]};e.header&&e.header()&&(i.header=e.header().text());for(var n=0,s=e.visibleCount();n<s;n++){var r=e.getVisibleItem(n);r.isVisible()&&(r instanceof R?i.columns.push(t(r)):r.name()&&i.columns.push(r.name()))}return i}(s)):s.name()&&e.push(s.name()))}return e},this.getColumnGroupNames=function(t){var e=[],i=t.collectGroups();if(i)for(var n=0,s=i.length;n<s;n++){var r=i[n];r&&(r=r.name())&&e.push(r)}return e},this.getChildColumnNames=function(t,e){t=this.$_getColumn(t,e);if(t&&t instanceof R)for(var i=[],n=t.columns(),s=0,r=n.length;s<r;s++)i.push(n[s].name());return i},this.saveColumnLayout=function(t){function h(t){var e={name:t.name(),saveWidth:t.saveWidth()?t.saveWidth():t.width(),width:t.width(),visible:t.isVisible()},t=t.header&&t.header();return t&&0<t.fixedHeight()&&(e.header={fixedHeight:t.fixedHeight()}),e}if(t){for(var e=t.getOrderedColumns(),i=[],n=0,s=e.length;n<s;n++){var r=e[n];r instanceof R?i.push(function t(e){for(var i={type:"group",name:e.name(),orientation:e.orientation(),saveWidth:e.saveWidth()?e.saveWidth():e.width(),width:e.width(),visible:e.isVisible(),hideChildHeaders:e.isHideChildHeaders(),columns:[]},n=e.header&&e.header(),s=(n&&(i.header={text:n.text(),visible:n.isVisible()},0<(n=n.fixedHeight()))&&(i.header.fixedHeight=n),e._columns._orderedColumns),r=0,o=s.length;r<o;r++){var a=s[r];a instanceof R?i.columns.push(t(a)):a.name&&i.columns.push(h(a))}return i}(r)):r.name&&i.push(h(r))}return i}},this.fitColumnWidth=function(t,e,i,n,s){var r=t.layoutManager();if(e)e=this.$_getColumn(t,e),i=!isNaN(i=parseInt(i))&&i>Tl.MIN_WIDTH?i:e.maxWidth()>Tl.MIN_WIDTH?e.maxWidth():-1,n=!isNaN(n=parseInt(n))&&n>Tl.MIN_WIDTH?n:e.minWidth()>=Tl.MIN_WIDTH?e.minWidth():-1,e&&r.fitColumnWidth(e,s,n,i);else for(var o=t.visibleColumnCount();o--;)e=t.getVisibleColumn(o),i=!isNaN(i=parseInt(i))&&i>Tl.MIN_WIDTH?i:e.maxWidth()>Tl.MIN_WIDTH?e.maxWidth():-1,n=!isNaN(n=parseInt(n))&&n>Tl.MIN_WIDTH?n:e.minWidth()>=Tl.MIN_WIDTH?e.minWidth():-1,r.fitColumnWidth(t.getVisibleColumn(o),s,n,i)},this.fitRowHeight=function(t,e,i,n,s){t=t.layoutManager();0<=e&&t.fitRowHeight(e,i,n,s)},this.fitRowHeightAll=function(t,e,i){return t.layoutManager().fitRowHeightAll(e,i)},this.setRowHeight=function(t,e,i,n){t=t.layoutManager();0<=e&&t.setRowHeight(e,i,n)},this.getRowHeight=function(t,e){return t.layoutManager().getRowHeight(e)},this.clearRowHeights=function(t,e){t.layoutManager().clearRowHeights(e)},this.getGroupLevel=function(t,e){var i=Number(e);return 0<=(i=isNaN(i)?t.dataSource().getFieldIndex(e):i)?t.getGroupLevel(i):-1},this.getDataRow=function(t,e){t=t.getItem(e);return t?t.dataRow():-1},this.getRowsOfItems=function(t,e){var i=[];if(e)for(var n=0,s=e.length;n<s;n++){var r=t.getItem(e[n]);r&&i.push(r.dataRow())}return i},this.setValues=function(t,e,i,n){var s=t.getItem(e),r=s.dataSource();if(s&&r){var o,a,h,l=r.fieldCount(),d=!1;if(t.isItemEditing(s)){e=b(s,qr);if(e)e.setValues(i);else for(o=0;o<l;o++)a=r.getOrgFieldName(o),i.hasOwnProperty(a)&&s.setData(o,i[a])}else if(0<=(t=s.dataRow()))if(r instanceof B_){e=r.rowById(t);if(e){if(d=!1,h=e.values()?e.values():[],k(i))for(o=0;o<i.length&&!(d=!r.getField(o).equalValues(h[o],i[o]));o++);else for(o=0;o<l&&(a=r.getOrgFieldName(o),!i.hasOwnProperty(a)||!(d=!r.getField(o).equalValues(h[o],i[a])));o++);d&&(n?e.updateStrict(i):e.update(i))}}else{if(d=!1,h=r._values[t]||[],k(i))for(o=0;o<i.length&&!(d=!r.getField(o).equalValues(h[o],i[o]));o++);else for(o=0;o<l&&(a=r.getOrgFieldName(o),!i.hasOwnProperty(a)||!(d=!r.getField(o).equalValues(h[o],i[a])));o++);d&&(n?r.updateStrictRow(t,i):r.updateRow(t,i))}}},this.getValues=function(t,e){e=t.getItem(e);if(e){if(t.isItemEditing(e))return(s=e.getRowObject()).__rowId=e.dataRow(),s;if(0<=e.dataRow()){t=e.dataSource();if(t){var i,n=t.getRowObject(e.dataRow()),s={__rowId:e.dataRow()};for(i in n)s[i]=n[i];return s}}}return null},this.getDisplayValuesOfRow=function(t,e,i){var n=t.dataSource().getRowObject(e),e=t.getItemOfRow(e,!0);return this.getDisplayValues(t,n,void 0,i,e)},this.getDisplayValues=function(t,e,i,n,s){var r=e?qt(e):{};if(e)for(var o=t.body(),a=t.getLeafColumns(),h=0,l=a.length;h<l;h++){var d,u=a[h],c=u.valueType(),_=u.getField(),f=u.styles(),m=n&&f.numberFormat()&&new Me(f.numberFormat()),g=n&&f.datetimeFormat()&&new Re(f.datetimeFormat()),p=n&&f.booleanFormat()&&new Fe(f.booleanFormat()),w=n&&f.prefix(),f=n&&f.suffix(),v=e[_.orgFieldName()],C=null;c==S.NUMBER?(d=Number(v),isNaN(d)?C=u.nanText():0==d&&null!=u.zeroText()?C=u.zeroText():m&&(C=m.format(d))):c==S.DATETIME&&v instanceof Date?C=(g||Re.Default).getText(v):c==S.BOOLEAN&&p&&(C=p.formatValue(v)),null!=(C=C||(void 0===i?ga._displayText(s,u):(m=$.temp(t,i,u),o.getCell(m).displayText())))&&(w&&(C=w+C),f)&&(C+=f),r[_.orgFieldName()]=C}return r},this.getSelectionItem=function(t,e){var i,n;return e?(i=e.getBounds(),n=t.getItem(i.R1()),t=t.getItem(i.R2()),{style:e.style(),startItem:i.R1(),startRow:n?n.dataRow():-1,startColumn:i.C1().name(),endItem:i.R2(),endRow:t?t.dataRow():-1,endColumn:i.C2().name()}):null},this.getSelectionItems=function(t,e){if(e){for(var e=e.getBounds(),i=t.getItem(e.R1()),t=t.getItem(e.R2()),n=i.index(),s=t.index(),r=[];n<=s;n++)r.push(n);return r}return null},this.getSelectionRows=function(t,e){if(e){for(var i,e=e.getBounds(),n=t.getItem(e.R1()),e=t.getItem(e.R2()),s=n.index(),r=e.index(),o=[];s<=r;s++)0<=(i=(n=t.getItem(s)).dataRow())&&o.push(i);return o}return null},this.getSelectionData=function(t,e){return 0<t.selections().count()?t.selections().getItem(0).getData(e):null},this.setSelectionItem=function(t,e,i){if(e.hasOwnProperty("style")){var n=e.style,s=0;if(e.hasOwnProperty("startItem"))s=e.startItem;else if(e.hasOwnProperty("startRow"))s=t.getItemIndexOfRow(e.startRow);else if("singleColumn"!=n&&"columns"!=n)return;var s=new $(t,s,t.columnByName(e.startColumn)),r=0;if(e.hasOwnProperty("endItem"))r=e.endItem;else if(e.hasOwnProperty("endRow"))r=t.getItemIndexOfRow(e.endRow);else if("singleColumn"!=n&&"columns"!=n)return;r=new $(t,r,t.columnByName(e.endColumn));t.setFocusedIndex(s,!1,!0),t.selections().clear(i),t.selections().add(s,r,n,i)}},this.resetCheckables=function(t,e){t.resetCheckables(),e&&t.setCheckBar({checkableExpression:null})},this.setCheckableExpression=function(t,e,i){t.setCheckBar({checkableExpression:e}),i&&t.applyCheckables()},this.createColumns=function(t){return T.createColumns(t)},this.orderBy=function(t,e,i,n){if(e){var s=[];if(i)for(var r=0;r<i.length;r++)s.push(i[r]);t.orderByFields(e,s,n)}},this.setColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);t&&t.setFilters(i)},this.clearColumnFilters=function(t,e){t=this.$_getColumn(t,e);t&&t.clearFilters()},this.addColumnFilters=function(t,e,i,n){t=this.$_getColumn(t,e);t&&t.addFilters(i,n)},this.removeColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);t&&t.removeFilters(i)},this.activateColumnFilters=function(t,e,i,n){t=this.$_getColumn(t,e);t&&t.activateFilters(i,n)},this.activateAllColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);t&&t.activateAllFilters(i)},this.hideColumnFilters=function(t,e,i,n){t=this.$_getColumn(t,e);t&&t.hideColumnFilters(i,n)},this.hideAllColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);t&&t.hideAllColumnFilters(i)},this.toggleColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);t&&t.toggleFilters(i)},this.toggleAllColumnFilters=function(t,e){t=this.$_getColumn(t,e);t&&t.toggleAllFilters()},this.getColumnFilter=function(t,e,i){t=this.$_getColumn(t,e),e=t&&t.getFilter(i);return e&&e.proxy()},this.getColumnFilters=function(t,e){t=this.$_getColumn(t,e);return t&&this.toProxy(t.getFilters())},this.getActiveColumnFilters=function(t,e,i){t=this.$_getColumn(t,e);return t&&this.toProxy(t.getActiveFilters(i))},this.setFilterActions=function(t,e,i){t=this.$_getColumn(t,e);t&&i&&t.setFilterActions(i)},this.isFiltered=function(t,e){var i=e&&this.$_getColumn(t,e);if(!e||i)return!!t.isFiltered(i)},this.clearFilterActions=function(t,e){t=this.$_getColumn(t,e);t&&t.setFilterActions(null)},this._getParentGroupItem=function(t,e){t=t.getGroupList&&t.getGroupList();return t&&t[e.parentId]?t[e.parentId]:null},this._getGroupItem=function(t,e){var i;return t instanceof X_?t.getItem(e.itemIndex):0<=e.itemIndex?(i=t.getItem(e.itemIndex))instanceof qr?null:i:t.getGroupList()[e.id]||null},this.getGroupIndex=function(t,e){t=t.getItem(e);return t&&(e=t.parent())?e.index():-1},this.isGroupItem=function(t,e){t=t.getItem(e);return t&&t instanceof C},this.isParentVisible=function(t,e){t=t.getItem(e);return t&&t.parent()&&t.parent().isVisible()},this.expandGroup=function(t,e,i,n){var s=t.getItem(e);s instanceof C?s&&t.expand(s,i,n):(s instanceof Pr||s instanceof Ar)&&(s=s.parent())&&!s.isExpanded()&&this.expandParent(t,e,i,n)},this.collapseGroup=function(t,e,i){var n=t.getItem(e);n instanceof C?n&&t.collapse(n,i):(n instanceof Pr||n instanceof Ar)&&(n=n.parent())&&n.isExpanded()&&this.collapseParent(t,e,i)},this.expandParent=function(t,e,i,n){var e=t.getItem(e);e&&(e=e.parent())&&e.isExpandable()&&(e.isCollapsed()||n)&&(t.expand(e,i,n),(i=t.focusedIndex()).setItemIndex((e.isVisible()?e:e.firstVisibleItem()).index()),t.setFocusedIndex(i),t.makeCellVisible(i))},this.collapseParent=function(t,e,i){var n,e=t.getItem(e);e&&(n=e.parent(),n=e instanceof zh&&n instanceof Kh&&!n.isExpanded()?n.parent():n)&&n.isCollapsable()&&n.isExpanded()&&(t.collapse(n,i),(e=t.focusedIndex()).setItemIndex((n.isVisible()?n:n.firstVisibleItem()).index()),t.setFocusedIndex(e),t.makeCellVisible(e))},this.expandAll=function(t,e){for(var i,n=t._items._groupedProvider&&t._items._groupedProvider._rootItem&&t._items._groupedProvider._rootItem._children,s=n.length,r=0;r<s;r++)((i=n[r])instanceof Vr||i instanceof Kh)&&t.expand(i,!0,!1,e)},this.collapseAll=function(t,e){for(var i,n=t._items._groupedProvider&&t._items._groupedProvider._rootItem&&t._items._groupedProvider._rootItem._children,s=n.length,r=0;r<s;r++)((i=n[r])instanceof Vr||i instanceof Kh)&&t.collapse(i,e,!0)},this.getModel=function(t,e,i){t=t.getItem(e);return t?h(t,i):null},this.getModelAs=function(t,e,i,n){var s=t.getItem(e);switch(i){case"row":s=b(s,Ar);break;case"group":s=b(s,C);break;case"footer":s=b(s,Pr);break;case"tree":s=b(s,L)}return s?h(s,n):null},this.getGroupModel=function(t,e,i){t=t.getItem(e);return(t=!t||t instanceof C?t:t.parent())?h(t,i):null},this.getParentModel=function(t,e,i){if(e){var n,s=this._getGroupItem(t,e);if(s){if((n=s.parent())&&!isNaN(n.id()))return h(n,i)}else if((n=this._getParentGroupItem(t,e))&&!isNaN(n.id()))return h(n,i)}return null},this.getRootModel=function(t,e,i){if(e){t=t.getItem(e.itemIndex);if(t){e=t.root();if(e)return h(e,i)}}return null},this.getChildModels=function(t,e,i){if(e){var n,s=t.getItem(e.itemIndex);if((s=(s=!(s instanceof C)&&0<=e.$_child&&(n=t.getItem(e.$_child))?n instanceof qr?null:n.parent():s)instanceof C?s:(n=t.itemSource&&t.itemSource().source&&t.itemSource().source())?n._groupList[e.id]:null)instanceof C){for(var r=s.count(),o=[],a=0;a<r;a++)o.push(h(s.getItem(a),i));return o}}return null},this.getDescendantModels=function(t,e,i){e=e?this._getGroupItem(t,e):t._items&&t._items._groupedProvider&&t._items._groupedProvider._rootItem;if(e instanceof C){var n,s,r=e.getDescendants(!1),o=[];if(r){for(n=0,s=r.length;n<s;n++)o.push(h(r[n],i));return o}}return null},this.getChildModel=function(t,e,i,n){if(e){var s,r=t.getItem(e.itemIndex);if((r=(r=!(r instanceof C)&&0<=e.$_child&&(s=t.getItem(e.$_child))?s instanceof qr?null:s.parent():r)instanceof C?r:(s=t.itemSource&&t.itemSource().source&&t.itemSource().source())?s._groupList[e.id]:null)instanceof C&&0<=i&&i<r.count())return h(r.getItem(i),n)}return null},this.getModels=function(t,e,i){if(e){for(var n=[],s=0,r=e.length;s<r;s++){var o=t.getItem(e[s]);o&&n.push(h(o,i))}return n}return null},this.getModelOfRow=function(t,e,i){t=t.getItemOfRow(e);return t?h(t,i):null},this.getModelsOfRows=function(t,e,i){if(e){for(var n=[],s=0,r=e.length;s<r;s++){var o=t.getItemOfRow(e[s]);o&&n.push(h(o,i))}return n}return null},this.getGroupSummary=function(t,e,i,n){if(e){var s=t.getItem(e.itemIndex),r=(s||(s=(r=t.itemSource&&t.itemSource().source&&t.itemSource().source())?r._groupList[e.id]:null),isNaN(i)?t.dataSource().getFieldIndex(i):i);if(s instanceof C&&0<=r)return e={count:s.getNumber(r),sum:s.getSum(r),max:s.getMax(r),min:s.getMin(r),avg:s.getAvg(r),datacount:s.getDataCount(r),dataavg:s.getDataAvg(r)},n&&(e.var=s.getVar(r,1),e.varp=s.getVar(r,0),e.stdev=s.getStdev(r,1),e.stdevp=s.getStdev(r,0)),e}},this.expandModel=function(t,e,i,n){e&&(e=this._getGroupItem(t,e))instanceof C&&t.expand(e,i,n)},this.collapseModel=function(t,e,i){e&&(e=this._getGroupItem(t,e))instanceof C&&t.collapse(e,i)},this.getSortedFields=function(t){var e,i=t.getSortFields(),n=t.getSortDirections();if(i&&0<(e=i.length)){for(var s=t.dataSource(),r=[],o=0;o<e;o++)r.push({fieldName:s.getFieldName(i[o]),orgFieldName:s.getOrgFieldName(i[o]),direction:n[o]});return r}return null},this.getGroupFieldNames=function(t,e){var i=t.getGroupByFields();if(i){var n=t.dataSource();if(n){for(var s=[],r=0;r<i.length;r++)s.push(e?n.getOrgFieldName(i[r]):n.getFieldName(i[r]));return s}return i}return null},this.getStyles=function(t,e,i){var n=t.getStylesOf(e),s={};if("all"===e?s=n:n?s[e]=n:s=null,s){var r,o,a={},h=d.STYLE_NAMES;for(r in s){for(var l in a[r]={},h)(i||s[r].hasValue(h[l]))&&(o=s[r][l](),a[r][l]=o&&o.toText?o.toText():o);"body"===r&&((i||0<t.body().dynamicStyles().count())&&(a[r].dynamicStyles=t.body().dynamicStyles().proxy()),i||0<t.body().cellDynamicStyles().count())&&(a[r].cellDynamicStyles=t.body().cellDynamicStyles().proxy()),Object.keys(a[r]).length<=0&&delete a[r]}return"all"==e?a:a[e]}return null},this.hasCellStyle=function(t,e){return Boolean(t.dataCellStyles().get(e))},this.addCellStyle=function(t,e,i,n){n?t.dataCellStyles().set(e,i):t.dataCellStyles().add(e,i)},this.addCellStyles=function(t,e,i){if(k(e))for(var n=0,s=e.length;n<s;n++){var r=e[n];r&&r.id&&(i?t.dataCellStyles().set(r.id,r):t.dataCellStyles().add(r.id,r))}else e&&e.id&&(i?t.dataCellStyles().set(e.id,e):t.dataCellStyles().add(e.id,e))},this.removeCellStyles=function(t,e){if(k(e))for(var i=e.length;i--;)t.dataCellStyles().set(e[i],null);else e&&t.dataCellStyles().set(e,null)},this.removeAllCellStyles=function(t){t.dataCellStyles().clear()},this.getCellApplyStyles=function(t,e,i){var i=this.$_getColumn(t,i),n=t.getItem(e);if(!i||!n)return null;var s,r,o=$.temp(t,e,i),a=(n instanceof Ar?(r=t.layoutManager().getMergedCell(o),r=t.body().getCell(o,!!r,n),s=t.getDataCellStyle(o.dataRow(),i.dataIndex()),r=r._styles):n instanceof Vr?r=t.rowGroup().getHeaderCell(e)._styles:n instanceof Pr&&(r=t.rowGroup().getFooterCell(o)._styles),r?r.toProxy():null);if(s&&s._props)for(var h in s._props)a[h]=s._props[h];return a},this.beginUpdateRow=function(t,e){var i=t.focusedIndex().clone(),e=t.getItem(e);e&&i.itemIndex(e.index()),t.edit(i)},this.getEditingItem=function(t){t=t.getEditingItem();if(t){var e=t.dataSource(),i={},n=t.values();if(n)for(var s=e.fieldCount(),r=n.length;s--&&r--;)i[e.getOrgFieldName(s)]=n[s];return{itemIndex:t.index(),dataRow:t.dataRow(),values:i}}return null},this.getItemState=function(t,e){var i,e=t.getItem(e);return e?(i=e.itemState())==H.NORMAL&&t.focusedIndex().I()==e.index()?H.FOCUSED:i:H.NORMAL},this.getCurrent=function(t){t=t.focusedIndex();return t?t.proxy():$.nullProxy()},this.setCurrent=function(t,e,i){t.setCurrent(e,i)},this.resetCurrent=function(t){var e=t.getIndex(0,t.getFirstColumn());t.setFocusedIndex(e),t.makeCellVisible(t.focusedIndex())},this.addPopupMenu=function(t,e,i){return t.popupMenuManager().addMenu(e,i)},this.exportGrid=function(t,e){"html"==e.type?(new p_).export(t,e):"csv"===e.type?(new w_).export(t,e):(e.exportGrids=[{grid:t}],n_(e))},this.fullItemCount=function(t){return t.layoutManager().fullItemCount()};this.loadTreeData=function(t,e,i,n){new O_(t).load(e,i,n)},this.getTreeChildCount=function(t,e){return 0<=e?(e=t.rowById(e))?e.count():0:t.getChildCount(null)},this.getTreeChildren=function(t,e){var i=null;return(i=0<=e?(e=t.rowById(e))?e.children():0:t.getRows(null))?s(i):null},this.getTreeDescendantCount=function(t,e){return 0<=e?(e=t.rowById(e))?e.descendantCount():0:t.getDescendantCount(null)},this.getTreeDescendants=function(t,e,i){var n=null;return 0<=e&&(n=t.rowById(e)),s(t.getDescendants(n,i))},this.getTreeAncestors=function(t,e){t=t.rowById(e);return t?s(t.ancestors()):null},this.getTreeJsonRow=function(t,e){t=t.rowById(e);return t?t.getObject():null},this.getTreeJsonRows=function(t,e,i,n,s){t=void 0===e||e<0?t.rootRow():t.rowById(e);return t?t.getChildObjects(i,n,s):null},this.getTreeOutuputRow=function(t,e,i,n){t=void 0===i||i<0?t.rootRow():t.rowById(i);return t?t.getOutput(e,n):null},this.getTreeOutputRows=function(t,e,i,n,s,r){t=void 0===i||i<0?t.rootRow():t.rowById(i);return t?t.getChildOutputObjects(e,n,s,r):null},this.addTreeRow=function(t,e,i,n,s){e=t.rowById(e),i=t.createRow(i,n,s);return(e||t.rootRow()).addChild(i)?i.rowId():-1},this.insertTreeRow=function(t,e,i,n,s,r){e=t.rowById(e),n=t.createRow(n,s,r);return(e||t.rootRow()).insertChild(i,n)?n.rowId():-1},this.removeTreeRow=function(t,e){t=t.rowById(e);t&&t.parent().removeChild(t)},this.removeTreeRows=function(t,e){if(e&&0<e.length){for(var i=[],n=e.length;n--;){var s=t.rowById(e[n]);s&&i.push(s)}t.removeRows(i)}},this.updateTreeRow=function(t,e,i){t=t.rowById(e);t&&t.update(i)},this.updateStrictTreeRow=function(t,e,i){t=t.rowById(e);t&&t.updateStrict(i)},this.getTreeDataValue=function(t,e,i){"string"==typeof i&&(i=t.getFieldIndex(i));t=t.rowById(e);if(t)return t.getValue(i)},this.setTreeDataValue=function(t,e,i,n){"string"==typeof i&&(i=t.getFieldIndex(i));t=t.rowById(e);if(t)return t.setValue(i,n)},this.moveRowSibling=function(t,e,i){e=t.rowById(e);e&&t.moveRowSibling(e,i)},this.changeRowParent=function(t,e,i,n){e=t.rowById(e),i=i<0?t.rootRow():t.rowById(i);e&&i&&t.changeRowParent(e,i,n)},this.getTreeOptions=function(t){return t.treeOptions().proxy()},this.setTreeOptions=function(t,e){this.setOptions(t,e),t.treeOptions().assign(e)},this.getTreeParentIndex=function(t,e){t=t.getItem(e);return t?t.parentIndex():-1},this.getTreeChildIndices=function(t,e){t=t.getItem(e);if(t){for(var i=t.children(),n=0,s=i.length;n<s;n++)i[n]=i[n].index();return i}return null},this.getTreeDescendantIndices=function(t,e){t=t.getItem(e);if(t){var i,n,s=t.getDescendants(!0);if(s&&0<s.length){for(i=s.length-1;0<=i;i--)s[i]instanceof L||s.splice(i,1);if(0<s.length){for(i=0,n=s.length;i<n;i++)s[i]=s[i].index();return s}}}return null},this.getTreeAncestorIndices=function(t,e,i){t=t.getItem(e);if(t){var n=t.getAncestors();if(n&&0<n.length){for(var s,r=n.length-1;0<=r;r--)n[r]instanceof L||n.splice(r,1);if(!i&&0<n.length&&n[n.length-1]instanceof M_&&n.pop(),0<n.length){for(r=0,s=n.length;r<s;r++)n[r]=n[r].index();return n}}}return null},this.expandTreeItem=function(t,e,i,n){e=t.getItem(e);e&&t.expand(e,i,n)},this.collapseTreeItem=function(t,e,i){e=t.getItem(e);e&&t.collapse(e,i)},this.checkTreeChildren=function(t,e,i,n,s,r,o){e=t.getItem(e);e&&t.checkChildren(e,i,n,s,r,o)},this.getTreeIconIndex=function(t,e){t=t.rowById(e);return t?t.iconIndex():-1},this.setTreeIconIndex=function(t,e,i){t=t.rowById(e);t&&t.setIconIndex(i)},this.getTreeParentId=function(t,e){t=t.rowById(e);return t&&(e=t.parent())?e.rowId():-1},this.getTreeLevel=function(t,e){t=t.rowById(e);return t?t.level():0},this.getTreeValues=function(t,e){e=t.getItem(e);if(e instanceof L){if(t.isItemEditing(e))(s=e.getRowObject()).__rowId=e.dataRow;else for(var i=e.dataSource(),t=e.row(),n=t.values(),s={__rowId:t.rowId()},r=0,o=i.fieldCount();r<o;r++){var a=i.getOrgFieldName(r),h=n[r];s[a]=h}return s}return null}},Progress:ci,PopupMenu:En,PopupMenuManager:Sn,GridBase:T,AssertError:Jt,ColumnHeader:El,BooleanConverter:Ee,DateTimeReader:Te,DecimalFormatter:Me,SeriesCell:wa,ExpressionSyntaxError:ti,DataRowExpressionRuntime:dc,StylesArchiver:fo}:null}(this);